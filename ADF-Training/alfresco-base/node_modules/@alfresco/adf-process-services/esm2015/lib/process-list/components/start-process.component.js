/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Component, EventEmitter, Input, Output, ViewChild, ViewEncapsulation } from '@angular/core';
import { ActivitiContentService, AppConfigService, AppConfigValues, AppsProcessService } from '@alfresco/adf-core';
import { ProcessDefinitionRepresentation } from './../models/process-definition.model';
import { ProcessInstance } from './../models/process-instance.model';
import { ProcessService } from './../services/process.service';
import { FormControl, Validators } from '@angular/forms';
import { Subject, forkJoin } from 'rxjs';
import { map, takeUntil } from 'rxjs/operators';
import { MatAutocompleteTrigger } from '@angular/material/autocomplete';
import { StartFormComponent } from '../../form';
import { ProcessNamePipe } from '../../pipes/process-name.pipe';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './../services/process.service';
import * as ɵngcc2 from '@alfresco/adf-core';
import * as ɵngcc3 from '../../pipes/process-name.pipe';
import * as ɵngcc4 from '@angular/common';
import * as ɵngcc5 from '@angular/material/progress-spinner';
import * as ɵngcc6 from '@angular/material/form-field';
import * as ɵngcc7 from '@angular/material/input';
import * as ɵngcc8 from '@angular/forms';
import * as ɵngcc9 from '@angular/material/autocomplete';
import * as ɵngcc10 from '@angular/material/select';
import * as ɵngcc11 from '@angular/material/core';
import * as ɵngcc12 from '@angular/material/button';
import * as ɵngcc13 from '@angular/material/icon';
import * as ɵngcc14 from '../../form/start-form.component';
import * as ɵngcc15 from '@ngx-translate/core';

const _c0 = ["startForm"];
function StartProcessInstanceComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0);
} }
function StartProcessInstanceComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "mat-spinner", 3);
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_div_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 23);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r8 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r8.title));
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_form_field_5_mat_option_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-option", 27);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const application_r24 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("value", application_r24);
    ɵngcc0.ɵɵattribute("data-automation-id", "adf-start-process-apps-option-" + application_r24.name);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", application_r24.name, " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_form_field_5_Template(rf, ctx) { if (rf & 1) {
    const _r26 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "mat-form-field", 24);
    ɵngcc0.ɵɵelementStart(1, "mat-select", 25);
    ɵngcc0.ɵɵlistener("selectionChange", function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_form_field_5_Template_mat_select_selectionChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r26); const ctx_r25 = ɵngcc0.ɵɵnextContext(3); return ctx_r25.onAppSelectionChange($event); })("ngModelChange", function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_form_field_5_Template_mat_select_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r26); const ctx_r27 = ɵngcc0.ɵɵnextContext(3); return ctx_r27.selectedApplication = $event; });
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵtemplate(3, StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_form_field_5_mat_option_3_Template, 2, 3, "mat-option", 26);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r9 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵproperty("floatLabel", "always");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵpropertyInterpolate("placeholder", ɵngcc0.ɵɵpipeBind1(2, 4, "ADF_PROCESS_LIST.START_PROCESS.FORM.LABEL.SELECT_APPLICATION"));
    ɵngcc0.ɵɵproperty("ngModel", ctx_r9.selectedApplication);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r9.applications);
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_option_15_Template(rf, ctx) { if (rf & 1) {
    const _r30 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "mat-option", 28);
    ɵngcc0.ɵɵlistener("click", function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_option_15_Template_mat_option_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r30); const processDef_r28 = ctx.$implicit; const ctx_r29 = ɵngcc0.ɵɵnextContext(3); return ctx_r29.processDefinitionSelectionChanged(processDef_r28); });
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const processDef_r28 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("value", processDef_r28.name);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", processDef_r28.name, " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_17_button_1_Template(rf, ctx) { if (rf & 1) {
    const _r33 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 30);
    ɵngcc0.ɵɵlistener("click", function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_17_button_1_Template_button_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r33); const ctx_r32 = ɵngcc0.ɵɵnextContext(4); return ctx_r32.displayDropdown($event); });
    ɵngcc0.ɵɵelementStart(1, "mat-icon");
    ɵngcc0.ɵɵtext(2, "arrow_drop_down");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r31 = ɵngcc0.ɵɵnextContext(4);
    ɵngcc0.ɵɵproperty("disabled", ctx_r31.disableDropdownButton());
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_17_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_17_button_1_Template, 3, 1, "button", 29);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r13 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r13.showSelectProcessDropdown);
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_template_18_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "mat-spinner", 31);
} if (rf & 2) {
    ɵngcc0.ɵɵproperty("diameter", 20);
} }
const _c1 = function (a0) { return { characters: a0 }; };
function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_error_25_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r16 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind2(2, 1, "ADF_PROCESS_LIST.START_PROCESS.ERROR.MAXIMUM_LENGTH", ɵngcc0.ɵɵpureFunction1(4, _c1, ctx_r16.maxProcessNameLength)), " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_error_26_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "ADF_PROCESS_LIST.START_PROCESS.ERROR.PROCESS_NAME_REQUIRED"), " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_error_27_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "ADF_PROCESS_LIST.START_PROCESS.ERROR.SPACE_VALIDATOR"), " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    const _r42 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "adf-start-form", 34, 35);
    ɵngcc0.ɵɵlistener("outcomeClick", function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_ng_container_1_Template_adf_start_form_outcomeClick_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r42); const ctx_r41 = ɵngcc0.ɵɵnextContext(5); return ctx_r41.onOutcomeClick($event); });
    ɵngcc0.ɵɵelementStart(3, "button", 36);
    ɵngcc0.ɵɵlistener("click", function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_ng_container_1_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r42); const ctx_r43 = ɵngcc0.ɵɵnextContext(5); return ctx_r43.cancelStartProcess(); });
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵpipe(5, "uppercase");
    ɵngcc0.ɵɵpipe(6, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r37 = ɵngcc0.ɵɵnextContext(5);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("data", ctx_r37.movedNodeToPS)("disableStartProcessButton", ctx_r37.processNameInput.invalid)("processDefinitionId", ctx_r37.selectedProcessDef.id)("showRefreshButton", false);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(5, 5, ɵngcc0.ɵɵpipeBind1(6, 7, "ADF_PROCESS_LIST.START_PROCESS.FORM.ACTION.CANCEL")), " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "adf-empty-content", 37);
    ɵngcc0.ɵɵpipe(1, "translate");
} if (rf & 2) {
    ɵngcc0.ɵɵproperty("icon", "assessment")("title", ɵngcc0.ɵɵpipeBind1(1, 2, "ADF_PROCESS_LIST.START_PROCESS.NO_START_FORM"));
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_ng_container_1_Template, 7, 9, "ng-container", 4);
    ɵngcc0.ɵɵtemplate(2, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_ng_template_2_Template, 2, 4, "ng-template", null, 33, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const _r38 = ɵngcc0.ɵɵreference(3);
    const ctx_r34 = ɵngcc0.ɵɵnextContext(4);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r34.hasStartForm())("ngIfElse", _r38);
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "adf-empty-content", 37);
    ɵngcc0.ɵɵpipe(1, "translate");
} if (rf & 2) {
    ɵngcc0.ɵɵproperty("icon", "assessment")("title", ɵngcc0.ɵɵpipeBind1(1, 2, "ADF_PROCESS_LIST.START_PROCESS.NO_PROCESS_DEF_SELECTED"));
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_container_1_Template, 4, 2, "ng-container", 4);
    ɵngcc0.ɵɵtemplate(2, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_ng_template_2_Template, 2, 4, "ng-template", null, 32, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const _r35 = ɵngcc0.ɵɵreference(3);
    const ctx_r19 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r19.isProcessDefinitionSelected())("ngIfElse", _r35);
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_template_29_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "mat-spinner", 3);
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_button_1_Template(rf, ctx) { if (rf & 1) {
    const _r47 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 41);
    ɵngcc0.ɵɵlistener("click", function StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_button_1_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r47); const ctx_r46 = ɵngcc0.ɵɵnextContext(4); return ctx_r46.cancelStartProcess(); });
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "uppercase");
    ɵngcc0.ɵɵpipe(3, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, ɵngcc0.ɵɵpipeBind1(3, 3, "ADF_PROCESS_LIST.START_PROCESS.FORM.ACTION.CANCEL")), " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_button_2_Template(rf, ctx) { if (rf & 1) {
    const _r49 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 42);
    ɵngcc0.ɵɵlistener("click", function StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_button_2_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r48 = ɵngcc0.ɵɵnextContext(4); return ctx_r48.startProcess(); });
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "uppercase");
    ɵngcc0.ɵɵpipe(3, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r45 = ɵngcc0.ɵɵnextContext(4);
    ɵngcc0.ɵɵproperty("disabled", !ctx_r45.validateForm());
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 2, ɵngcc0.ɵɵpipeBind1(3, 4, "ADF_PROCESS_LIST.START_PROCESS.FORM.ACTION.START")), " ");
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 38);
    ɵngcc0.ɵɵtemplate(1, StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_button_1_Template, 4, 5, "button", 39);
    ɵngcc0.ɵɵtemplate(2, StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_button_2_Template, 4, 6, "button", 40);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r22 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r22.hasStartForm());
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r22.hasStartForm());
} }
function StartProcessInstanceComponent_ng_template_3_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "div", 6);
    ɵngcc0.ɵɵtemplate(2, StartProcessInstanceComponent_ng_template_3_ng_container_0_div_2_Template, 3, 3, "div", 7);
    ɵngcc0.ɵɵelementStart(3, "div", 8);
    ɵngcc0.ɵɵelementStart(4, "div", 9);
    ɵngcc0.ɵɵtemplate(5, StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_form_field_5_Template, 4, 6, "mat-form-field", 10);
    ɵngcc0.ɵɵelementStart(6, "mat-form-field", 11);
    ɵngcc0.ɵɵelementStart(7, "mat-label");
    ɵngcc0.ɵɵtext(8);
    ɵngcc0.ɵɵpipe(9, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(10, "input", 12, 13);
    ɵngcc0.ɵɵelementStart(12, "div", 14);
    ɵngcc0.ɵɵelementStart(13, "mat-autocomplete", 15, 16);
    ɵngcc0.ɵɵtemplate(15, StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_option_15_Template, 2, 2, "mat-option", 17);
    ɵngcc0.ɵɵpipe(16, "async");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(17, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_17_Template, 2, 1, "ng-container", 4);
    ɵngcc0.ɵɵtemplate(18, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_template_18_Template, 1, 1, "ng-template", null, 18, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(20, "mat-form-field", 11);
    ɵngcc0.ɵɵelementStart(21, "mat-label");
    ɵngcc0.ɵɵtext(22);
    ɵngcc0.ɵɵpipe(23, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(24, "input", 19);
    ɵngcc0.ɵɵtemplate(25, StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_error_25_Template, 3, 6, "mat-error", 20);
    ɵngcc0.ɵɵtemplate(26, StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_error_26_Template, 3, 3, "mat-error", 20);
    ɵngcc0.ɵɵtemplate(27, StartProcessInstanceComponent_ng_template_3_ng_container_0_mat_error_27_Template, 3, 3, "mat-error", 20);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(28, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_container_28_Template, 4, 2, "ng-container", 4);
    ɵngcc0.ɵɵtemplate(29, StartProcessInstanceComponent_ng_template_3_ng_container_0_ng_template_29_Template, 1, 0, "ng-template", null, 21, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(31, StartProcessInstanceComponent_ng_template_3_ng_container_0_div_31_Template, 3, 2, "div", 22);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const _r11 = ɵngcc0.ɵɵreference(14);
    const _r14 = ɵngcc0.ɵɵreference(19);
    const _r20 = ɵngcc0.ɵɵreference(30);
    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5.title);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5.showSelectApplicationDropdown);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("floatLabel", "always");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 19, "ADF_PROCESS_LIST.START_PROCESS.FORM.LABEL.TYPE"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("formControl", ctx_r5.processDefinitionInput)("matAutocomplete", _r11);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("displayWith", ctx_r5.displayFn);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngForOf", ɵngcc0.ɵɵpipeBind1(16, 21, ctx_r5.filteredProcessesDefinitions$));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r5.isProcessDefinitionsLoading)("ngIfElse", _r14);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("floatLabel", "always");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(23, 23, "ADF_PROCESS_LIST.START_PROCESS.FORM.LABEL.NAME"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("formControl", ctx_r5.processNameInput);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5.nameController.hasError("maxlength"));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5.nameController.hasError("required"));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5.nameController.hasError("pattern"));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r5.isProcessDefinitionsLoading)("ngIfElse", _r20);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r5.hasStartForm());
} }
function StartProcessInstanceComponent_ng_template_3_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "adf-empty-content", 37);
    ɵngcc0.ɵɵpipe(1, "translate");
} if (rf & 2) {
    ɵngcc0.ɵɵproperty("icon", "assessment")("title", ɵngcc0.ɵɵpipeBind1(1, 2, "ADF_PROCESS_LIST.START_PROCESS.NO_PROCESS_DEFINITIONS"));
} }
function StartProcessInstanceComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, StartProcessInstanceComponent_ng_template_3_ng_container_0_Template, 32, 25, "ng-container", 4);
    ɵngcc0.ɵɵtemplate(1, StartProcessInstanceComponent_ng_template_3_ng_template_1_Template, 2, 4, "ng-template", null, 5, ɵngcc0.ɵɵtemplateRefExtractor);
} if (rf & 2) {
    const _r6 = ɵngcc0.ɵɵreference(2);
    const ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.hasApplications() || ctx_r4.hasProcessDefinitions())("ngIfElse", _r6);
} }
export class StartProcessInstanceComponent {
    constructor(activitiProcess, activitiContentService, appsProcessService, appConfig, processNamePipe) {
        this.activitiProcess = activitiProcess;
        this.activitiContentService = activitiContentService;
        this.appsProcessService = appsProcessService;
        this.appConfig = appConfig;
        this.processNamePipe = processNamePipe;
        this.MAX_LENGTH = 255;
        this.name = '';
        this.showSelectProcessDropdown = true;
        this.showSelectApplicationDropdown = false;
        this.processFilterSelector = true;
        this.start = new EventEmitter();
        this.cancel = new EventEmitter();
        this.error = new EventEmitter();
        this.processDefinitionSelection = new EventEmitter();
        this.applicationSelection = new EventEmitter();
        this.processDefinitions = [];
        this.maxProcessNameLength = this.MAX_LENGTH;
        this.applications = [];
        this.isProcessDefinitionsLoading = true;
        this.isAppsLoading = true;
        this.onDestroy$ = new Subject();
    }
    ngOnInit() {
        this.processNameInput = new FormControl('', [Validators.required, Validators.maxLength(this.maxProcessNameLength), Validators.pattern('^[^\\s]+(\\s+[^\\s]+)*$')]);
        this.processDefinitionInput = new FormControl();
        this.load();
        this.filteredProcessesDefinitions$ = this.processDefinitionInput.valueChanges
            .pipe(map((value) => this._filter(value)), takeUntil(this.onDestroy$));
        this.activitiContentService.getAlfrescoRepositories().subscribe((repoList) => {
            if (repoList && repoList[0]) {
                const alfrescoRepository = repoList[0];
                this.alfrescoRepositoryName = `alfresco-${alfrescoRepository.id}-${alfrescoRepository.name}`;
            }
        });
    }
    ngOnDestroy() {
        this.onDestroy$.next(true);
        this.onDestroy$.complete();
    }
    ngOnChanges(changes) {
        if (changes['values'] && changes['values'].currentValue) {
            this.moveNodeFromCStoPS();
        }
        if (this.isAppIdChanged(changes)) {
            this.appId = changes['appId'].currentValue;
            this.load();
        }
        if (this.isProcessDefinitionChanged(changes)) {
            this.processDefinitionName = changes['processDefinitionName'].currentValue;
            this.filterProcessDefinitionByName();
        }
    }
    isAppIdChanged(changes) {
        return changes['appId'] && changes['appId'].currentValue && changes['appId'].currentValue !== changes['appId'].previousValue;
    }
    isProcessDefinitionChanged(changes) {
        return changes['processDefinitionName'] && changes['processDefinitionName'].currentValue &&
            changes['processDefinitionName'].currentValue !== changes['processDefinitionName'].previousValue;
    }
    _filter(value) {
        if (value !== null && value !== undefined) {
            const filterValue = value.toLowerCase();
            const filteredProcess = this.processDefinitions.filter((option) => option.name.toLowerCase().includes(filterValue));
            if (this.processFilterSelector) {
                this.selectedProcessDef = this.getSelectedProcess(filterValue);
            }
            return filteredProcess;
        }
        return [];
    }
    getSelectedProcess(selectedProcess) {
        let processSelected = this.processDefinitions.find((process) => process.name.toLowerCase() === selectedProcess);
        if (!processSelected) {
            processSelected = new ProcessDefinitionRepresentation();
        }
        return processSelected;
    }
    load() {
        if (this.showSelectApplicationDropdown) {
            this.loadApps();
        }
        else {
            this.loadProcessDefinitions(this.appId);
        }
    }
    loadProcessDefinitions(appId) {
        this.isProcessDefinitionsLoading = true;
        this.resetSelectedProcessDefinition();
        this.activitiProcess.getProcessDefinitions(appId).pipe(map((processDefinitionRepresentations) => {
            let currentProcessDef;
            if (processDefinitionRepresentations.length === 1) {
                currentProcessDef = processDefinitionRepresentations[0];
            }
            if (this.processDefinitionName) {
                const filteredProcessDefinition = processDefinitionRepresentations.find((processDefinition) => {
                    return processDefinition.name === this.processDefinitionName;
                });
                if (filteredProcessDefinition) {
                    currentProcessDef = filteredProcessDefinition;
                }
            }
            return { currentProcessDef, processDefinitionRepresentations };
        })).subscribe((filteredProcessDefinitions) => {
            this.processDefinitions = filteredProcessDefinitions.processDefinitionRepresentations;
            this.processDefinitionSelectionChanged(filteredProcessDefinitions.currentProcessDef);
            this.processDefinitionInput.setValue(this.selectedProcessDef ? this.selectedProcessDef.name : '');
            this.isProcessDefinitionsLoading = false;
        }, (error) => {
            this.isProcessDefinitionsLoading = false;
            this.error.emit(error);
        });
    }
    filterProcessDefinitionByName() {
        if (this.processDefinitionName) {
            const filteredProcessDef = this.processDefinitions.find((processDefinition) => {
                return processDefinition.name === this.processDefinitionName;
            });
            if (filteredProcessDef) {
                this.processDefinitionSelectionChanged(filteredProcessDef);
                this.processDefinitionInput.setValue(this.selectedProcessDef ? this.selectedProcessDef.name : '');
            }
        }
    }
    loadApps() {
        this.isAppsLoading = true;
        this.appsProcessService
            .getDeployedApplications()
            .pipe(map((response) => {
            const applications = this.removeDefaultApps(response);
            let currentApplication;
            if (applications && applications.length === 1) {
                currentApplication = applications[0];
            }
            const filteredApp = applications.find(app => app.id === +this.appId);
            if (filteredApp) {
                currentApplication = filteredApp;
            }
            return { currentApplication, applications };
        }))
            .subscribe((filteredApps) => {
            this.applications = filteredApps.applications;
            this.selectedApplication = filteredApps.currentApplication;
            this.applicationSelection.emit(this.selectedApplication);
            this.toggleProcessNameAndDefinitionsDropdown();
            this.isAppsLoading = false;
            this.loadProcessDefinitionsBasedOnSelectedApp();
        }, (err) => {
            this.isAppsLoading = false;
            this.error.emit(err);
        });
    }
    loadProcessDefinitionsBasedOnSelectedApp() {
        if (this.selectedApplication && this.selectedApplication.id) {
            this.loadProcessDefinitions(this.selectedApplication ? this.selectedApplication.id : null);
        }
        else {
            this.isProcessDefinitionsLoading = false;
            this.resetProcessDefinitions();
        }
    }
    onAppSelectionChange(selectedApplication) {
        this.resetProcessDefinitions();
        this.selectedApplication = selectedApplication.value;
        this.applicationSelection.emit(this.selectedApplication);
        this.toggleProcessNameAndDefinitionsDropdown();
        this.loadProcessDefinitionsBasedOnSelectedApp();
    }
    isAppSelected() {
        return !!(this.selectedApplication && this.selectedApplication.id);
    }
    removeDefaultApps(apps) {
        return apps.filter((app) => app.id);
    }
    hasApplications() {
        return this.applications && this.applications.length > 0;
    }
    hasProcessDefinitions() {
        return this.processDefinitions && this.processDefinitions.length > 0;
    }
    isProcessDefinitionSelected() {
        return !!(this.selectedProcessDef && this.selectedProcessDef.id);
    }
    isProcessDefinitionsEmpty() {
        return this.processDefinitions.length === 0;
    }
    disableDropdownButton() {
        return this.showSelectApplicationDropdown && !this.isAppSelected();
    }
    getAlfrescoRepositoryName() {
        let alfrescoRepositoryName = this.appConfig.get(AppConfigValues.ALFRESCO_REPOSITORY_NAME);
        if (!alfrescoRepositoryName) {
            alfrescoRepositoryName = this.alfrescoRepositoryName;
        }
        return alfrescoRepositoryName + 'Alfresco';
    }
    moveNodeFromCStoPS() {
        const accountIdentifier = this.getAlfrescoRepositoryName();
        for (const key in this.values) {
            if (this.values.hasOwnProperty(key)) {
                const currentValue = Array.isArray(this.values[key]) ? this.values[key] : [this.values[key]];
                const contents = currentValue.filter((value) => value && value.isFile)
                    .map((content) => this.activitiContentService.applyAlfrescoNode(content, null, accountIdentifier));
                forkJoin(contents).subscribe((res) => {
                    this.movedNodeToPS = { [key]: [...res] };
                });
            }
        }
    }
    startProcess(outcome) {
        if (this.selectedProcessDef && this.selectedProcessDef.id && this.nameController.value) {
            const formValues = this.startForm ? this.startForm.form.values : undefined;
            this.activitiProcess.startProcess(this.selectedProcessDef.id, this.nameController.value, outcome, formValues, this.variables).subscribe((res) => {
                this.name = '';
                this.start.emit(res);
            }, (err) => {
                this.error.emit(err);
            });
        }
    }
    cancelStartProcess() {
        this.cancel.emit();
    }
    hasStartForm() {
        return this.selectedProcessDef && this.selectedProcessDef.hasStartForm;
    }
    isStartFormMissingOrValid() {
        if (this.startForm) {
            return this.startForm.form && this.startForm.form.isValid;
        }
        else {
            return true;
        }
    }
    validateForm() {
        return this.selectedProcessDef && this.selectedProcessDef.id && this.processNameInput.valid && this.isStartFormMissingOrValid();
    }
    resetSelectedProcessDefinition() {
        this.selectedProcessDef = undefined;
        if (this.processDefinitionInput) {
            this.processDefinitionInput.setValue('');
        }
    }
    resetProcessDefinitions() {
        this.processDefinitions = [];
        this.resetSelectedProcessDefinition();
    }
    onOutcomeClick(outcome) {
        this.startProcess(outcome);
    }
    reset() {
        this.resetSelectedProcessDefinition();
        this.name = '';
        if (this.startForm) {
            this.startForm.data = {};
        }
    }
    displayFn(process) {
        if (process) {
            let processName = process;
            if (typeof process !== 'string') {
                processName = process.name;
            }
            return processName;
        }
        return undefined;
    }
    displayDropdown(event) {
        event.stopPropagation();
        if (!this.inputAutocomplete.panelOpen) {
            this.processDefinitionInput.setValue('');
            this.inputAutocomplete.openPanel();
        }
        else {
            this.inputAutocomplete.closePanel();
        }
    }
    get nameController() {
        return this.processNameInput;
    }
    get processDefinitionController() {
        return this.processDefinitionInput;
    }
    toggleProcessNameAndDefinitionsDropdown() {
        if (!this.isAppSelected()) {
            this.processDefinitionController.disable();
            this.nameController.disable();
        }
        else {
            this.processDefinitionController.enable();
            this.nameController.enable();
        }
    }
    processDefinitionSelectionChanged(processDefinition) {
        if (processDefinition) {
            const processInstanceDetails = new ProcessInstance({ processDefinitionName: processDefinition.name });
            const processName = this.processNamePipe.transform(this.name, processInstanceDetails);
            this.processNameInput.setValue(processName);
            this.processNameInput.markAsDirty();
            this.processNameInput.markAsTouched();
            this.selectedProcessDef = processDefinition;
            this.processDefinitionSelection.emit(this.selectedProcessDef);
        }
        else {
            this.nameController.reset();
        }
    }
    isLoading() {
        return this.showSelectApplicationDropdown ? this.isAppsLoading : false;
    }
}
StartProcessInstanceComponent.ɵfac = function StartProcessInstanceComponent_Factory(t) { return new (t || StartProcessInstanceComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ProcessService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ActivitiContentService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AppsProcessService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AppConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.ProcessNamePipe)); };
StartProcessInstanceComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: StartProcessInstanceComponent, selectors: [["adf-start-process"]], viewQuery: function StartProcessInstanceComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
        ɵngcc0.ɵɵviewQuery(MatAutocompleteTrigger, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.startForm = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.inputAutocomplete = _t.first);
    } }, inputs: { name: "name", showSelectProcessDropdown: "showSelectProcessDropdown", showSelectApplicationDropdown: "showSelectApplicationDropdown", processFilterSelector: "processFilterSelector", appId: "appId", processDefinitionName: "processDefinitionName", title: "title", variables: "variables", values: "values" }, outputs: { start: "start", cancel: "cancel", error: "error", processDefinitionSelection: "processDefinitionSelection", applicationSelection: "applicationSelection" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 5, vars: 3, consts: [[4, "ngIf", "ngIfThen", "ngIfElse"], ["showLoadingTemplate", ""], ["showStartProcessTemplate", ""], [1, "adf-start-process-loading"], [4, "ngIf", "ngIfElse"], ["showEmptyTemplate", ""], [1, "adf-start-process"], ["class", "adf-title", 4, "ngIf"], [1, "content"], [1, "adf-start-process-definition-container"], ["class", "adf-start-process-app-list", 3, "floatLabel", 4, "ngIf"], [1, "adf-process-input-container", 3, "floatLabel"], ["type", "text", "matInput", "", "id", "processDefinitionName", 3, "formControl", "matAutocomplete"], ["inputAutocomplete", ""], [1, "adf-process-input-autocomplete"], ["id", "processDefinitionOptions", 3, "displayWith"], ["auto", "matAutocomplete"], [3, "value", "click", 4, "ngFor", "ngForOf"], ["showProcessDefLoadingTemplate", ""], ["matInput", "", "id", "processName", "required", "", 3, "formControl"], [4, "ngIf"], ["showStartFormLoadingTemplate", ""], ["class", "mat-content-actions", 4, "ngIf"], [1, "adf-title"], [1, "adf-start-process-app-list", 3, "floatLabel"], ["data-automation-id", "adf-start-process-apps-drop-down", 3, "placeholder", "ngModel", "selectionChange", "ngModelChange"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [3, "value", "click"], ["id", "adf-select-process-dropdown", "mat-icon-button", "", 3, "disabled", "click", 4, "ngIf"], ["id", "adf-select-process-dropdown", "mat-icon-button", "", 3, "disabled", "click"], ["id", "adf-select-process-spinner", 3, "diameter"], ["emptyProcessDefTemplate", ""], ["noStartFormTemplate", ""], [3, "data", "disableStartProcessButton", "processDefinitionId", "showRefreshButton", "outcomeClick"], ["startForm", ""], ["adf-form-custom-button", "", "mat-button", "", "id", "cancel_process", 3, "click"], [1, "adf-start-process-empty-template", 3, "icon", "title"], [1, "mat-content-actions"], ["mat-button", "", "id", "cancel_process", 3, "click", 4, "ngIf"], ["color", "primary", "mat-button", "", "data-automation-id", "btn-start", "id", "button-start", "class", "btn-start", 3, "disabled", "click", 4, "ngIf"], ["mat-button", "", "id", "cancel_process", 3, "click"], ["color", "primary", "mat-button", "", "data-automation-id", "btn-start", "id", "button-start", 1, "btn-start", 3, "disabled", "click"]], template: function StartProcessInstanceComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, StartProcessInstanceComponent_ng_container_0_Template, 1, 0, "ng-container", 0);
        ɵngcc0.ɵɵtemplate(1, StartProcessInstanceComponent_ng_template_1_Template, 1, 0, "ng-template", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵtemplate(3, StartProcessInstanceComponent_ng_template_3_Template, 3, 2, "ng-template", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);
    } if (rf & 2) {
        const _r1 = ɵngcc0.ɵɵreference(2);
        const _r3 = ɵngcc0.ɵɵreference(4);
        ɵngcc0.ɵɵproperty("ngIf", ctx.isLoading())("ngIfThen", _r1)("ngIfElse", _r3);
    } }, directives: [ɵngcc4.NgIf, ɵngcc5.MatSpinner, ɵngcc6.MatFormField, ɵngcc6.MatLabel, ɵngcc7.MatInput, ɵngcc8.DefaultValueAccessor, ɵngcc9.MatAutocompleteTrigger, ɵngcc8.NgControlStatus, ɵngcc8.FormControlDirective, ɵngcc9.MatAutocomplete, ɵngcc4.NgForOf, ɵngcc8.RequiredValidator, ɵngcc10.MatSelect, ɵngcc8.NgModel, ɵngcc11.MatOption, ɵngcc12.MatButton, ɵngcc13.MatIcon, ɵngcc6.MatError, ɵngcc14.StartFormComponent, ɵngcc2.StartFormCustomButtonDirective, ɵngcc2.EmptyContentComponent], pipes: [ɵngcc15.TranslatePipe, ɵngcc4.AsyncPipe, ɵngcc4.UpperCasePipe], styles: [".adf-start-process{margin-left:auto;margin-right:auto;margin-top:10px;width:96%}.adf-start-process mat-form-field{width:100%}.adf-start-process .mat-form-field-label{color:var(--theme-colors-mat-grey-dark)}.adf-start-process .mat-content-actions{text-align:right}.adf-start-process .mat-button{text-transform:uppercase!important}.adf-title{padding-bottom:1.25em}.adf-process-input-container mat-form-field{width:100%}.adf-process-input-autocomplete{display:flex}.adf-process-input-autocomplete button{position:absolute;right:-14px;top:0}.adf-process-input-autocomplete mat-spinner{position:absolute;right:-1px;top:0}.adf-start-form-container .mat-card{box-shadow:none!important;padding:0!important}.adf-start-form-actions{text-align:right!important}.adf-start-process-definition-container{align-items:baseline;display:flex;flex-direction:row;justify-content:space-around}.adf-start-process-app-list{margin-right:10px}@media (max-width:600px){.adf-start-process{margin-left:auto;margin-right:auto;width:90%}}.adf-start-process-loading{margin-left:calc(50% - 50px);margin-right:calc(50% - 50px)}"], encapsulation: 2 });
StartProcessInstanceComponent.ctorParameters = () => [
    { type: ProcessService },
    { type: ActivitiContentService },
    { type: AppsProcessService },
    { type: AppConfigService },
    { type: ProcessNamePipe }
];
StartProcessInstanceComponent.propDecorators = {
    appId: [{ type: Input }],
    title: [{ type: Input }],
    processDefinitionName: [{ type: Input }],
    variables: [{ type: Input }],
    values: [{ type: Input }],
    name: [{ type: Input }],
    showSelectProcessDropdown: [{ type: Input }],
    showSelectApplicationDropdown: [{ type: Input }],
    processFilterSelector: [{ type: Input }],
    start: [{ type: Output }],
    cancel: [{ type: Output }],
    error: [{ type: Output }],
    processDefinitionSelection: [{ type: Output }],
    applicationSelection: [{ type: Output }],
    startForm: [{ type: ViewChild, args: ['startForm',] }],
    inputAutocomplete: [{ type: ViewChild, args: [MatAutocompleteTrigger,] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StartProcessInstanceComponent, [{
        type: Component,
        args: [{
                selector: 'adf-start-process',
                template: "\n<ng-container *ngIf=\"isLoading(); then showLoadingTemplate; else showStartProcessTemplate\"></ng-container>\n    <ng-template #showLoadingTemplate>\n        <mat-spinner class=\"adf-start-process-loading\"></mat-spinner>\n    </ng-template>\n<ng-template #showStartProcessTemplate>\n    <ng-container *ngIf=\"hasApplications() || hasProcessDefinitions() ; else showEmptyTemplate\">\n        <div class=\"adf-start-process\">\n            <div class=\"adf-title\" *ngIf=\"title\">{{ title | translate}}</div>\n            <div class=\"content\">\n                <div class=\"adf-start-process-definition-container\">\n                    <mat-form-field *ngIf=\"showSelectApplicationDropdown\" [floatLabel]=\"'always'\" class=\"adf-start-process-app-list\">\n                        <mat-select\n                            placeholder=\"{{ 'ADF_PROCESS_LIST.START_PROCESS.FORM.LABEL.SELECT_APPLICATION' | translate }}\"\n                            (selectionChange)=\"onAppSelectionChange($event)\"\n                            [(ngModel)]=\"selectedApplication\"\n                            data-automation-id=\"adf-start-process-apps-drop-down\">\n                            <mat-option \n                                *ngFor=\"let application of applications\"\n                                [value]=\"application\"\n                                [attr.data-automation-id]=\"'adf-start-process-apps-option-' + application.name\">\n                                {{ application.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <mat-form-field class=\"adf-process-input-container\" [floatLabel]=\"'always'\">\n                        <mat-label>{{'ADF_PROCESS_LIST.START_PROCESS.FORM.LABEL.TYPE' | translate}}</mat-label>\n                        <input\n                            type=\"text\"\n                            matInput\n                            [formControl]=\"processDefinitionInput\"\n                            [matAutocomplete]=\"auto\"\n                            id=\"processDefinitionName\"\n                            #inputAutocomplete>\n                        <div class=\"adf-process-input-autocomplete\">\n                            <mat-autocomplete\n                                #auto=\"matAutocomplete\"\n                                id=\"processDefinitionOptions\"\n                                [displayWith]=\"displayFn\">\n                                <mat-option *ngFor=\"let processDef of filteredProcessesDefinitions$ | async\" [value]=\"processDef.name\"\n                                (click)=\"processDefinitionSelectionChanged(processDef)\">\n                                    {{ processDef.name }}\n                                </mat-option>\n                            </mat-autocomplete>\n                            <ng-container *ngIf=\"!isProcessDefinitionsLoading ; else showProcessDefLoadingTemplate\">\n                                <button\n                                    id=\"adf-select-process-dropdown\"\n                                    *ngIf=\"showSelectProcessDropdown\"\n                                    mat-icon-button\n                                    (click)=\"displayDropdown($event)\"\n                                    [disabled]=\"disableDropdownButton()\">\n                                    <mat-icon>arrow_drop_down</mat-icon>\n                                </button>\n                            </ng-container>\n                            <ng-template #showProcessDefLoadingTemplate>\n                                <mat-spinner id=\"adf-select-process-spinner\" [diameter]=\"20\"></mat-spinner>\n                            </ng-template>\n                        </div>\n                    </mat-form-field>\n                </div>\n                <mat-form-field class=\"adf-process-input-container\" [floatLabel]=\"'always'\">\n                    <mat-label>{{'ADF_PROCESS_LIST.START_PROCESS.FORM.LABEL.NAME' | translate}}</mat-label>\n                    <input\n                        matInput\n                        [formControl]=\"processNameInput\"\n                        id=\"processName\"\n                        required/>\n                    <mat-error *ngIf=\"nameController.hasError('maxlength')\">\n                        {{ 'ADF_PROCESS_LIST.START_PROCESS.ERROR.MAXIMUM_LENGTH' | translate : { characters : maxProcessNameLength } }}\n                    </mat-error>\n                    <mat-error *ngIf=\"nameController.hasError('required')\">\n                        {{ 'ADF_PROCESS_LIST.START_PROCESS.ERROR.PROCESS_NAME_REQUIRED' | translate }}\n                    </mat-error>\n                    <mat-error *ngIf=\"nameController.hasError('pattern')\">\n                        {{ 'ADF_PROCESS_LIST.START_PROCESS.ERROR.SPACE_VALIDATOR' | translate }}\n                    </mat-error>\n                </mat-form-field>\n        \n                <ng-container *ngIf=\"!isProcessDefinitionsLoading ; else showStartFormLoadingTemplate\">\n                    <ng-container *ngIf=\"isProcessDefinitionSelected() ; else emptyProcessDefTemplate\">\n                        <ng-container  *ngIf=\"hasStartForm(); else noStartFormTemplate\">\n                            <adf-start-form\n                                #startForm\n                                [data]=\"movedNodeToPS\"\n                                [disableStartProcessButton]=\"processNameInput.invalid\"\n                                [processDefinitionId]=\"selectedProcessDef.id\"\n                                (outcomeClick)=\"onOutcomeClick($event)\"\n                                [showRefreshButton]=\"false\">\n                                <button\n                                    adf-form-custom-button\n                                    mat-button\n                                    (click)=\"cancelStartProcess()\"\n                                    id=\"cancel_process\">\n                                    {{'ADF_PROCESS_LIST.START_PROCESS.FORM.ACTION.CANCEL'| translate | uppercase}}\n                                </button>\n                            </adf-start-form>\n                        </ng-container>\n                        <ng-template #noStartFormTemplate>\n                            <adf-empty-content \n                                class=\"adf-start-process-empty-template\"\n                                [icon]=\"'assessment'\"\n                                [title]=\"'ADF_PROCESS_LIST.START_PROCESS.NO_START_FORM'  | translate\">\n                            </adf-empty-content>\n                        </ng-template>\n                    </ng-container>\n                    <ng-template #emptyProcessDefTemplate>\n                        <adf-empty-content class=\"adf-start-process-empty-template\"\n                            [icon]=\"'assessment'\"\n                            [title]=\"'ADF_PROCESS_LIST.START_PROCESS.NO_PROCESS_DEF_SELECTED'  | translate\">\n                        </adf-empty-content>\n                    </ng-template>\n                </ng-container>\n                <ng-template #showStartFormLoadingTemplate>\n                    <mat-spinner class=\"adf-start-process-loading\"></mat-spinner>\n                </ng-template>\n            </div>\n            <div class=\"mat-content-actions\" *ngIf=\"!hasStartForm()\">\n                <button\n                    mat-button\n                    *ngIf=\"!hasStartForm()\"\n                    (click)=\"cancelStartProcess()\"\n                    id=\"cancel_process\">\n                    {{'ADF_PROCESS_LIST.START_PROCESS.FORM.ACTION.CANCEL'| translate | uppercase}}\n                </button>\n                <button\n                    color=\"primary\"\n                    mat-button\n                    *ngIf=\"!hasStartForm()\"\n                    [disabled]=\"!validateForm()\"\n                    (click)=\"startProcess()\"\n                    data-automation-id=\"btn-start\"\n                    id=\"button-start\"\n                    class=\"btn-start\">\n                    {{'ADF_PROCESS_LIST.START_PROCESS.FORM.ACTION.START' | translate | uppercase}}\n                </button>\n            </div>\n        </div>\n    </ng-container>\n        <ng-template #showEmptyTemplate>\n            <adf-empty-content class=\"adf-start-process-empty-template\"\n                [icon]=\"'assessment'\"\n                [title]=\"'ADF_PROCESS_LIST.START_PROCESS.NO_PROCESS_DEFINITIONS' | translate\">\n            </adf-empty-content>\n        </ng-template>    \n</ng-template>\n",
                encapsulation: ViewEncapsulation.None,
                styles: [".adf-start-process{margin-left:auto;margin-right:auto;margin-top:10px;width:96%}.adf-start-process mat-form-field{width:100%}.adf-start-process .mat-form-field-label{color:var(--theme-colors-mat-grey-dark)}.adf-start-process .mat-content-actions{text-align:right}.adf-start-process .mat-button{text-transform:uppercase!important}.adf-title{padding-bottom:1.25em}.adf-process-input-container mat-form-field{width:100%}.adf-process-input-autocomplete{display:flex}.adf-process-input-autocomplete button{position:absolute;right:-14px;top:0}.adf-process-input-autocomplete mat-spinner{position:absolute;right:-1px;top:0}.adf-start-form-container .mat-card{box-shadow:none!important;padding:0!important}.adf-start-form-actions{text-align:right!important}.adf-start-process-definition-container{align-items:baseline;display:flex;flex-direction:row;justify-content:space-around}.adf-start-process-app-list{margin-right:10px}@media (max-width:600px){.adf-start-process{margin-left:auto;margin-right:auto;width:90%}}.adf-start-process-loading{margin-left:calc(50% - 50px);margin-right:calc(50% - 50px)}"]
            }]
    }], function () { return [{ type: ɵngcc1.ProcessService }, { type: ɵngcc2.ActivitiContentService }, { type: ɵngcc2.AppsProcessService }, { type: ɵngcc2.AppConfigService }, { type: ɵngcc3.ProcessNamePipe }]; }, { name: [{
            type: Input
        }], showSelectProcessDropdown: [{
            type: Input
        }], showSelectApplicationDropdown: [{
            type: Input
        }], processFilterSelector: [{
            type: Input
        }], start: [{
            type: Output
        }], cancel: [{
            type: Output
        }], error: [{
            type: Output
        }], processDefinitionSelection: [{
            type: Output
        }], applicationSelection: [{
            type: Output
        }], appId: [{
            type: Input
        }], processDefinitionName: [{
            type: Input
        }], title: [{
            type: Input
        }], variables: [{
            type: Input
        }], values: [{
            type: Input
        }], startForm: [{
            type: ViewChild,
            args: ['startForm']
        }], inputAutocomplete: [{
            type: ViewChild,
            args: [MatAutocompleteTrigger]
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnQtcHJvY2Vzcy5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2hvbWUvdHJhdmlzL2J1aWxkL0FsZnJlc2NvL2FsZnJlc2NvLW5nMi1jb21wb25lbnRzL2xpYi9wcm9jZXNzLXNlcnZpY2VzL3NyYy9saWIvcHJvY2Vzcy1saXN0L2NvbXBvbmVudHMvc3RhcnQtcHJvY2Vzcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUVILE9BQU8sRUFDSCxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFDOUIsTUFBTSxFQUFpQixTQUFTLEVBQUUsaUJBQWlCLEVBQ3RELE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCxzQkFBc0IsRUFDdEIsZ0JBQWdCLEVBQ2hCLGVBQWUsRUFDZixrQkFBa0IsRUFFckIsTUFBTSxvQkFBb0IsQ0FBQztBQUU1QixPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUN2RixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDckUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFtQixNQUFNLGdCQUFnQixDQUFDO0FBQzFFLE9BQU8sRUFBYyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3JELE9BQU8sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDaEQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFeEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sWUFBWSxDQUFDO0FBR2hE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bnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LFxuICAgIE91dHB1dCwgU2ltcGxlQ2hhbmdlcywgVmlld0NoaWxkLCBWaWV3RW5jYXBzdWxhdGlvbiwgT25EZXN0cm95XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgICBBY3Rpdml0aUNvbnRlbnRTZXJ2aWNlLFxuICAgIEFwcENvbmZpZ1NlcnZpY2UsXG4gICAgQXBwQ29uZmlnVmFsdWVzLFxuICAgIEFwcHNQcm9jZXNzU2VydmljZSxcbiAgICBGb3JtVmFsdWVzXG59IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBQcm9jZXNzSW5zdGFuY2VWYXJpYWJsZSB9IGZyb20gJy4uL21vZGVscy9wcm9jZXNzLWluc3RhbmNlLXZhcmlhYmxlLm1vZGVsJztcbmltcG9ydCB7IFByb2Nlc3NEZWZpbml0aW9uUmVwcmVzZW50YXRpb24gfSBmcm9tICcuLy4uL21vZGVscy9wcm9jZXNzLWRlZmluaXRpb24ubW9kZWwnO1xuaW1wb3J0IHsgUHJvY2Vzc0luc3RhbmNlIH0gZnJvbSAnLi8uLi9tb2RlbHMvcHJvY2Vzcy1pbnN0YW5jZS5tb2RlbCc7XG5pbXBvcnQgeyBQcm9jZXNzU2VydmljZSB9IGZyb20gJy4vLi4vc2VydmljZXMvcHJvY2Vzcy5zZXJ2aWNlJztcbmltcG9ydCB7IEZvcm1Db250cm9sLCBWYWxpZGF0b3JzLCBBYnN0cmFjdENvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0LCBmb3JrSm9pbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBNYXRBdXRvY29tcGxldGVUcmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7IE1hdFNlbGVjdENoYW5nZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NlbGVjdCc7XG5pbXBvcnQgeyBTdGFydEZvcm1Db21wb25lbnQgfSBmcm9tICcuLi8uLi9mb3JtJztcbmltcG9ydCB7IE1pbmltYWxOb2RlLCBSZWxhdGVkQ29udGVudFJlcHJlc2VudGF0aW9uIH0gZnJvbSAnQGFsZnJlc2NvL2pzLWFwaSc7XG5pbXBvcnQgeyBBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbCB9IGZyb20gJy4uLy4uL3Rhc2stbGlzdCc7XG5pbXBvcnQgeyBQcm9jZXNzTmFtZVBpcGUgfSBmcm9tICcuLi8uLi9waXBlcy9wcm9jZXNzLW5hbWUucGlwZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXN0YXJ0LXByb2Nlc3MnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zdGFydC1wcm9jZXNzLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zdGFydC1wcm9jZXNzLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBTdGFydFByb2Nlc3NJbnN0YW5jZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25Jbml0LCBPbkRlc3Ryb3kge1xuXG4gICAgTUFYX0xFTkdUSDogbnVtYmVyID0gMjU1O1xuXG4gICAgLyoqIChvcHRpb25hbCkgTGltaXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc2VzIHRoYXQgY2FuIGJlIHN0YXJ0ZWQgdG8gdGhvc2VcbiAgICAgKiBjb250YWluZWQgaW4gdGhlIHNwZWNpZmllZCBhcHAuXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBhcHBJZDogbnVtYmVyO1xuXG4gICAgLyoqIChvcHRpb25hbCkgRGVmaW5lIHRoZSBoZWFkZXIgb2YgdGhlIGNvbXBvbmVudC4gKi9cbiAgICBASW5wdXQoKVxuICAgIHRpdGxlOiBzdHJpbmc7XG5cbiAgICAvKiogKG9wdGlvbmFsKSBEZWZpbml0aW9uIG5hbWUgb2YgdGhlIHByb2Nlc3MgdG8gc3RhcnQuICovXG4gICAgQElucHV0KClcbiAgICBwcm9jZXNzRGVmaW5pdGlvbk5hbWU6IHN0cmluZztcblxuICAgIC8qKiBWYXJpYWJsZXMgaW4gdGhlIGlucHV0IHRvIHRoZSBwcm9jZXNzXG4gICAgICogW1Jlc3RWYXJpYWJsZV0oaHR0cHM6Ly9naXRodWIuY29tL0FsZnJlc2NvL2FsZnJlc2NvLWpzLWFwaS90cmVlL21hc3Rlci9zcmMvYWxmcmVzY28tYWN0aXZpdGktcmVzdC1hcGkvZG9jcy9SZXN0VmFyaWFibGUubWQpLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgdmFyaWFibGVzOiBQcm9jZXNzSW5zdGFuY2VWYXJpYWJsZVtdO1xuXG4gICAgLyoqIFBhcmFtZXRlciB0byBwYXNzIGZvcm0gZmllbGQgdmFsdWVzIGluIHRoZSBzdGFydCBmb3JtIGlmIG9uZSBpcyBhc3NvY2lhdGVkLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgdmFsdWVzOiBGb3JtVmFsdWVzO1xuXG4gICAgLyoqIChvcHRpb25hbCkgTmFtZSB0byBhc3NpZ24gdG8gdGhlIGN1cnJlbnQgcHJvY2Vzcy4gKi9cbiAgICBASW5wdXQoKVxuICAgIG5hbWU6IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEhpZGUgb3Igc2hvdyB0aGUgcHJvY2VzcyBzZWxlY3Rpb24gZHJvcGRvd24uICovXG4gICAgQElucHV0KClcbiAgICBzaG93U2VsZWN0UHJvY2Vzc0Ryb3Bkb3duOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIC8qKiAob3B0aW9uYWwpIEhpZGUgb3Igc2hvdyBhcHBsaWNhdGlvbiBzZWxlY3Rpb24gZHJvcGRvd24uICovXG4gICAgQElucHV0KClcbiAgICBzaG93U2VsZWN0QXBwbGljYXRpb25Ecm9wZG93bjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIChvcHRpb25hbCkgUGFyYW1ldGVyIHRvIGVuYWJsZSBzZWxlY3Rpb24gb2YgcHJvY2VzcyB3aGVuIGZpbHRlcmluZy4gKi9cbiAgICBASW5wdXQoKVxuICAgIHByb2Nlc3NGaWx0ZXJTZWxlY3RvcjogYm9vbGVhbiA9IHRydWU7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSBwcm9jZXNzIHN0YXJ0cy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBzdGFydDogRXZlbnRFbWl0dGVyPFByb2Nlc3NJbnN0YW5jZT4gPSBuZXcgRXZlbnRFbWl0dGVyPFByb2Nlc3NJbnN0YW5jZT4oKTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIHByb2Nlc3MgaXMgY2FuY2VsZWQuICovXG4gICAgQE91dHB1dCgpXG4gICAgY2FuY2VsOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gcHJvY2VzcyBkZWZpbml0aW9uIHNlbGVjdGlvbiBjaGFuZ2VzLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHByb2Nlc3NEZWZpbml0aW9uU2VsZWN0aW9uOiBFdmVudEVtaXR0ZXI8UHJvY2Vzc0RlZmluaXRpb25SZXByZXNlbnRhdGlvbj4gPSBuZXcgRXZlbnRFbWl0dGVyPFByb2Nlc3NEZWZpbml0aW9uUmVwcmVzZW50YXRpb24+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGFwcGxpY2F0aW9uIHNlbGVjdGlvbiBjaGFuZ2VzLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGFwcGxpY2F0aW9uU2VsZWN0aW9uOiBFdmVudEVtaXR0ZXI8QXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWw+ID0gbmV3IEV2ZW50RW1pdHRlcjxBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbD4oKTtcblxuICAgIEBWaWV3Q2hpbGQoJ3N0YXJ0Rm9ybScpXG4gICAgc3RhcnRGb3JtOiBTdGFydEZvcm1Db21wb25lbnQ7XG5cbiAgICBAVmlld0NoaWxkKE1hdEF1dG9jb21wbGV0ZVRyaWdnZXIpXG4gICAgaW5wdXRBdXRvY29tcGxldGU6IE1hdEF1dG9jb21wbGV0ZVRyaWdnZXI7XG5cbiAgICBwcm9jZXNzRGVmaW5pdGlvbnM6IFByb2Nlc3NEZWZpbml0aW9uUmVwcmVzZW50YXRpb25bXSA9IFtdO1xuICAgIHNlbGVjdGVkUHJvY2Vzc0RlZjogUHJvY2Vzc0RlZmluaXRpb25SZXByZXNlbnRhdGlvbjtcbiAgICBwcm9jZXNzTmFtZUlucHV0OiBGb3JtQ29udHJvbDtcbiAgICBwcm9jZXNzRGVmaW5pdGlvbklucHV0OiBGb3JtQ29udHJvbDtcbiAgICBmaWx0ZXJlZFByb2Nlc3Nlc0RlZmluaXRpb25zJDogT2JzZXJ2YWJsZTxQcm9jZXNzRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uW10+O1xuICAgIG1heFByb2Nlc3NOYW1lTGVuZ3RoOiBudW1iZXIgPSB0aGlzLk1BWF9MRU5HVEg7XG4gICAgYWxmcmVzY29SZXBvc2l0b3J5TmFtZTogc3RyaW5nO1xuICAgIGFwcGxpY2F0aW9uczogQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWxbXSA9IFtdO1xuICAgIHNlbGVjdGVkQXBwbGljYXRpb246IEFwcERlZmluaXRpb25SZXByZXNlbnRhdGlvbk1vZGVsO1xuXG4gICAgaXNQcm9jZXNzRGVmaW5pdGlvbnNMb2FkaW5nID0gdHJ1ZTtcbiAgICBpc0FwcHNMb2FkaW5nID0gdHJ1ZTtcbiAgICBtb3ZlZE5vZGVUb1BTOiBGb3JtVmFsdWVzO1xuXG4gICAgcHJpdmF0ZSBvbkRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFjdGl2aXRpUHJvY2VzczogUHJvY2Vzc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBhY3Rpdml0aUNvbnRlbnRTZXJ2aWNlOiBBY3Rpdml0aUNvbnRlbnRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgYXBwc1Byb2Nlc3NTZXJ2aWNlOiBBcHBzUHJvY2Vzc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBhcHBDb25maWc6IEFwcENvbmZpZ1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBwcm9jZXNzTmFtZVBpcGU6IFByb2Nlc3NOYW1lUGlwZSkge1xuICAgICAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzTmFtZUlucHV0ID0gbmV3IEZvcm1Db250cm9sKCcnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5tYXhMZW5ndGgodGhpcy5tYXhQcm9jZXNzTmFtZUxlbmd0aCksIFZhbGlkYXRvcnMucGF0dGVybignXlteXFxcXHNdKyhcXFxccytbXlxcXFxzXSspKiQnKV0pO1xuICAgICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9uSW5wdXQgPSBuZXcgRm9ybUNvbnRyb2woKTtcblxuICAgICAgICB0aGlzLmxvYWQoKTtcblxuICAgICAgICB0aGlzLmZpbHRlcmVkUHJvY2Vzc2VzRGVmaW5pdGlvbnMkID0gdGhpcy5wcm9jZXNzRGVmaW5pdGlvbklucHV0LnZhbHVlQ2hhbmdlc1xuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgbWFwKCh2YWx1ZSkgPT4gdGhpcy5fZmlsdGVyKHZhbHVlKSksXG4gICAgICAgICAgICAgICAgdGFrZVVudGlsKHRoaXMub25EZXN0cm95JClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5hY3Rpdml0aUNvbnRlbnRTZXJ2aWNlLmdldEFsZnJlc2NvUmVwb3NpdG9yaWVzKCkuc3Vic2NyaWJlKChyZXBvTGlzdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcG9MaXN0ICYmIHJlcG9MaXN0WzBdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxmcmVzY29SZXBvc2l0b3J5ID0gcmVwb0xpc3RbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5hbGZyZXNjb1JlcG9zaXRvcnlOYW1lID0gYGFsZnJlc2NvLSR7YWxmcmVzY29SZXBvc2l0b3J5LmlkfS0ke2FsZnJlc2NvUmVwb3NpdG9yeS5uYW1lfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLm9uRGVzdHJveSQubmV4dCh0cnVlKTtcbiAgICAgICAgdGhpcy5vbkRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlc1sndmFsdWVzJ10gJiYgY2hhbmdlc1sndmFsdWVzJ10uY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmVOb2RlRnJvbUNTdG9QUygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNBcHBJZENoYW5nZWQoY2hhbmdlcykpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwSWQgPSBjaGFuZ2VzWydhcHBJZCddLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzRGVmaW5pdGlvbkNoYW5nZWQoY2hhbmdlcykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0RlZmluaXRpb25OYW1lID0gY2hhbmdlc1sncHJvY2Vzc0RlZmluaXRpb25OYW1lJ10uY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJQcm9jZXNzRGVmaW5pdGlvbkJ5TmFtZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0FwcElkQ2hhbmdlZChjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgICAgIHJldHVybiBjaGFuZ2VzWydhcHBJZCddICYmIGNoYW5nZXNbJ2FwcElkJ10uY3VycmVudFZhbHVlICYmIGNoYW5nZXNbJ2FwcElkJ10uY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzWydhcHBJZCddLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1Byb2Nlc3NEZWZpbml0aW9uQ2hhbmdlZChjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgICAgIHJldHVybiBjaGFuZ2VzWydwcm9jZXNzRGVmaW5pdGlvbk5hbWUnXSAmJiBjaGFuZ2VzWydwcm9jZXNzRGVmaW5pdGlvbk5hbWUnXS5jdXJyZW50VmFsdWUgJiZcbiAgICAgICAgY2hhbmdlc1sncHJvY2Vzc0RlZmluaXRpb25OYW1lJ10uY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzWydwcm9jZXNzRGVmaW5pdGlvbk5hbWUnXS5wcmV2aW91c1ZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2ZpbHRlcih2YWx1ZTogc3RyaW5nKTogUHJvY2Vzc0RlZmluaXRpb25SZXByZXNlbnRhdGlvbltdIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUHJvY2VzcyA9IHRoaXMucHJvY2Vzc0RlZmluaXRpb25zLmZpbHRlcigob3B0aW9uKSA9PiBvcHRpb24ubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlclZhbHVlKSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NGaWx0ZXJTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQcm9jZXNzRGVmID0gdGhpcy5nZXRTZWxlY3RlZFByb2Nlc3MoZmlsdGVyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkUHJvY2VzcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBnZXRTZWxlY3RlZFByb2Nlc3Moc2VsZWN0ZWRQcm9jZXNzOiBzdHJpbmcpOiBQcm9jZXNzRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uIHtcbiAgICAgICAgbGV0IHByb2Nlc3NTZWxlY3RlZCA9IHRoaXMucHJvY2Vzc0RlZmluaXRpb25zLmZpbmQoKHByb2Nlc3MpID0+IHByb2Nlc3MubmFtZS50b0xvd2VyQ2FzZSgpID09PSBzZWxlY3RlZFByb2Nlc3MpO1xuXG4gICAgICAgIGlmICghcHJvY2Vzc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICBwcm9jZXNzU2VsZWN0ZWQgPSBuZXcgUHJvY2Vzc0RlZmluaXRpb25SZXByZXNlbnRhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9jZXNzU2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgbG9hZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvd1NlbGVjdEFwcGxpY2F0aW9uRHJvcGRvd24pIHtcbiAgICAgICAgICAgIHRoaXMubG9hZEFwcHMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZFByb2Nlc3NEZWZpbml0aW9ucyh0aGlzLmFwcElkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvYWRQcm9jZXNzRGVmaW5pdGlvbnMoYXBwSWQ6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLmlzUHJvY2Vzc0RlZmluaXRpb25zTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMucmVzZXRTZWxlY3RlZFByb2Nlc3NEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgdGhpcy5hY3Rpdml0aVByb2Nlc3MuZ2V0UHJvY2Vzc0RlZmluaXRpb25zKGFwcElkKS5waXBlKFxuICAgICAgICAgICAgbWFwKChwcm9jZXNzRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uczogUHJvY2Vzc0RlZmluaXRpb25SZXByZXNlbnRhdGlvbltdKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRQcm9jZXNzRGVmOiBQcm9jZXNzRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NEZWZpbml0aW9uUmVwcmVzZW50YXRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJvY2Vzc0RlZiA9IHByb2Nlc3NEZWZpbml0aW9uUmVwcmVzZW50YXRpb25zWzBdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NEZWZpbml0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFByb2Nlc3NEZWZpbml0aW9uID0gcHJvY2Vzc0RlZmluaXRpb25SZXByZXNlbnRhdGlvbnMuZmluZCgocHJvY2Vzc0RlZmluaXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9jZXNzRGVmaW5pdGlvbi5uYW1lID09PSB0aGlzLnByb2Nlc3NEZWZpbml0aW9uTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJlZFByb2Nlc3NEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJvY2Vzc0RlZiA9IGZpbHRlcmVkUHJvY2Vzc0RlZmluaXRpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4geyBjdXJyZW50UHJvY2Vzc0RlZiwgcHJvY2Vzc0RlZmluaXRpb25SZXByZXNlbnRhdGlvbnMgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGZpbHRlcmVkUHJvY2Vzc0RlZmluaXRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGVmaW5pdGlvbnMgPSBmaWx0ZXJlZFByb2Nlc3NEZWZpbml0aW9ucy5wcm9jZXNzRGVmaW5pdGlvblJlcHJlc2VudGF0aW9ucztcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9uU2VsZWN0aW9uQ2hhbmdlZChmaWx0ZXJlZFByb2Nlc3NEZWZpbml0aW9ucy5jdXJyZW50UHJvY2Vzc0RlZik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGVmaW5pdGlvbklucHV0LnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRQcm9jZXNzRGVmID8gdGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYubmFtZSA6ICcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvY2Vzc0RlZmluaXRpb25zTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQcm9jZXNzRGVmaW5pdGlvbnNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvci5lbWl0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZpbHRlclByb2Nlc3NEZWZpbml0aW9uQnlOYW1lKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9jZXNzRGVmaW5pdGlvbk5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUHJvY2Vzc0RlZiA9IHRoaXMucHJvY2Vzc0RlZmluaXRpb25zLmZpbmQoKHByb2Nlc3NEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NEZWZpbml0aW9uLm5hbWUgPT09IHRoaXMucHJvY2Vzc0RlZmluaXRpb25OYW1lO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZFByb2Nlc3NEZWYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9uU2VsZWN0aW9uQ2hhbmdlZChmaWx0ZXJlZFByb2Nlc3NEZWYpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0RlZmluaXRpb25JbnB1dC5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkUHJvY2Vzc0RlZiA/IHRoaXMuc2VsZWN0ZWRQcm9jZXNzRGVmLm5hbWUgOiAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkQXBwcygpIHtcbiAgICAgICAgdGhpcy5pc0FwcHNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hcHBzUHJvY2Vzc1NlcnZpY2VcbiAgICAgICAgICAgIC5nZXREZXBsb3llZEFwcGxpY2F0aW9ucygpXG4gICAgICAgICAgICAucGlwZShtYXAoKHJlc3BvbnNlOiBBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbFtdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcGxpY2F0aW9ucyA9IHRoaXMucmVtb3ZlRGVmYXVsdEFwcHMocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudEFwcGxpY2F0aW9uOiBBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwbGljYXRpb25zICYmIGFwcGxpY2F0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBcHBsaWNhdGlvbiA9IGFwcGxpY2F0aW9uc1swXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkQXBwID0gYXBwbGljYXRpb25zLmZpbmQoIGFwcCA9PiBhcHAuaWQgPT09ICt0aGlzLmFwcElkICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkQXBwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QXBwbGljYXRpb24gPSBmaWx0ZXJlZEFwcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGN1cnJlbnRBcHBsaWNhdGlvbiwgYXBwbGljYXRpb25zIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGZpbHRlcmVkQXBwcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGxpY2F0aW9ucyA9IGZpbHRlcmVkQXBwcy5hcHBsaWNhdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRBcHBsaWNhdGlvbiA9IGZpbHRlcmVkQXBwcy5jdXJyZW50QXBwbGljYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbGljYXRpb25TZWxlY3Rpb24uZW1pdCh0aGlzLnNlbGVjdGVkQXBwbGljYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVByb2Nlc3NOYW1lQW5kRGVmaW5pdGlvbnNEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQXBwc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkUHJvY2Vzc0RlZmluaXRpb25zQmFzZWRPblNlbGVjdGVkQXBwKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBcHBzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yLmVtaXQoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgbG9hZFByb2Nlc3NEZWZpbml0aW9uc0Jhc2VkT25TZWxlY3RlZEFwcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBcHBsaWNhdGlvbiAmJiB0aGlzLnNlbGVjdGVkQXBwbGljYXRpb24uaWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZFByb2Nlc3NEZWZpbml0aW9ucyh0aGlzLnNlbGVjdGVkQXBwbGljYXRpb24gPyB0aGlzLnNlbGVjdGVkQXBwbGljYXRpb24uaWQgOiBudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNQcm9jZXNzRGVmaW5pdGlvbnNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlc2V0UHJvY2Vzc0RlZmluaXRpb25zKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkFwcFNlbGVjdGlvbkNoYW5nZShzZWxlY3RlZEFwcGxpY2F0aW9uOiBNYXRTZWxlY3RDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5yZXNldFByb2Nlc3NEZWZpbml0aW9ucygpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQXBwbGljYXRpb24gPSBzZWxlY3RlZEFwcGxpY2F0aW9uLnZhbHVlO1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uU2VsZWN0aW9uLmVtaXQodGhpcy5zZWxlY3RlZEFwcGxpY2F0aW9uKTtcbiAgICAgICAgdGhpcy50b2dnbGVQcm9jZXNzTmFtZUFuZERlZmluaXRpb25zRHJvcGRvd24oKTtcbiAgICAgICAgdGhpcy5sb2FkUHJvY2Vzc0RlZmluaXRpb25zQmFzZWRPblNlbGVjdGVkQXBwKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0FwcFNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEodGhpcy5zZWxlY3RlZEFwcGxpY2F0aW9uICYmIHRoaXMuc2VsZWN0ZWRBcHBsaWNhdGlvbi5pZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW1vdmVEZWZhdWx0QXBwcyhhcHBzOiBBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbCBbXSk6IEFwcERlZmluaXRpb25SZXByZXNlbnRhdGlvbk1vZGVsW10ge1xuICAgICAgICByZXR1cm4gYXBwcy5maWx0ZXIoKGFwcCkgPT4gYXBwLmlkKTtcbiAgICB9XG5cbiAgICBoYXNBcHBsaWNhdGlvbnMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9ucyAmJiB0aGlzLmFwcGxpY2F0aW9ucy5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIGhhc1Byb2Nlc3NEZWZpbml0aW9ucygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0RlZmluaXRpb25zICYmIHRoaXMucHJvY2Vzc0RlZmluaXRpb25zLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgaXNQcm9jZXNzRGVmaW5pdGlvblNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEodGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYgJiYgdGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYuaWQpO1xuICAgIH1cblxuICAgIGlzUHJvY2Vzc0RlZmluaXRpb25zRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NEZWZpbml0aW9ucy5sZW5ndGggPT09IDA7XG4gICAgfVxuXG4gICAgZGlzYWJsZURyb3Bkb3duQnV0dG9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93U2VsZWN0QXBwbGljYXRpb25Ecm9wZG93biAmJiAhdGhpcy5pc0FwcFNlbGVjdGVkKCk7XG4gICAgfVxuXG4gICAgZ2V0QWxmcmVzY29SZXBvc2l0b3J5TmFtZSgpOiBzdHJpbmcge1xuICAgICAgICBsZXQgYWxmcmVzY29SZXBvc2l0b3J5TmFtZSA9IHRoaXMuYXBwQ29uZmlnLmdldDxzdHJpbmc+KEFwcENvbmZpZ1ZhbHVlcy5BTEZSRVNDT19SRVBPU0lUT1JZX05BTUUpO1xuICAgICAgICBpZiAoIWFsZnJlc2NvUmVwb3NpdG9yeU5hbWUpIHtcbiAgICAgICAgICAgIGFsZnJlc2NvUmVwb3NpdG9yeU5hbWUgPSB0aGlzLmFsZnJlc2NvUmVwb3NpdG9yeU5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFsZnJlc2NvUmVwb3NpdG9yeU5hbWUgKyAnQWxmcmVzY28nO1xuICAgIH1cblxuICAgIG1vdmVOb2RlRnJvbUNTdG9QUygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWNjb3VudElkZW50aWZpZXIgPSB0aGlzLmdldEFsZnJlc2NvUmVwb3NpdG9yeU5hbWUoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnZhbHVlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBBcnJheS5pc0FycmF5KHRoaXMudmFsdWVzW2tleV0pID8gdGhpcy52YWx1ZXNba2V5XSA6IFt0aGlzLnZhbHVlc1trZXldXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50cyA9IGN1cnJlbnRWYWx1ZS5maWx0ZXIoKHZhbHVlOiBhbnkpID0+IHZhbHVlICYmIHZhbHVlLmlzRmlsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGNvbnRlbnQ6IE1pbmltYWxOb2RlKSA9PiB0aGlzLmFjdGl2aXRpQ29udGVudFNlcnZpY2UuYXBwbHlBbGZyZXNjb05vZGUoY29udGVudCwgbnVsbCwgYWNjb3VudElkZW50aWZpZXIpKTtcbiAgICAgICAgICAgICAgICBmb3JrSm9pbihjb250ZW50cykuc3Vic2NyaWJlKChyZXM6IFJlbGF0ZWRDb250ZW50UmVwcmVzZW50YXRpb25bXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVkTm9kZVRvUFMgPSB7IFtrZXldOiBbLi4ucmVzXX07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGFydFByb2Nlc3Mob3V0Y29tZT86IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYgJiYgdGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYuaWQgJiYgdGhpcy5uYW1lQ29udHJvbGxlci52YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuc3RhcnRGb3JtID8gdGhpcy5zdGFydEZvcm0uZm9ybS52YWx1ZXMgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmFjdGl2aXRpUHJvY2Vzcy5zdGFydFByb2Nlc3ModGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYuaWQsIHRoaXMubmFtZUNvbnRyb2xsZXIudmFsdWUsIG91dGNvbWUsIGZvcm1WYWx1ZXMsIHRoaXMudmFyaWFibGVzKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydC5lbWl0KHJlcyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IuZW1pdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjYW5jZWxTdGFydFByb2Nlc3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FuY2VsLmVtaXQoKTtcbiAgICB9XG5cbiAgICBoYXNTdGFydEZvcm0oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkUHJvY2Vzc0RlZiAmJiB0aGlzLnNlbGVjdGVkUHJvY2Vzc0RlZi5oYXNTdGFydEZvcm07XG4gICAgfVxuXG4gICAgaXNTdGFydEZvcm1NaXNzaW5nT3JWYWxpZCgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRGb3JtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydEZvcm0uZm9ybSAmJiB0aGlzLnN0YXJ0Rm9ybS5mb3JtLmlzVmFsaWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhbGlkYXRlRm9ybSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRQcm9jZXNzRGVmICYmIHRoaXMuc2VsZWN0ZWRQcm9jZXNzRGVmLmlkICYmIHRoaXMucHJvY2Vzc05hbWVJbnB1dC52YWxpZCAmJiB0aGlzLmlzU3RhcnRGb3JtTWlzc2luZ09yVmFsaWQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0U2VsZWN0ZWRQcm9jZXNzRGVmaW5pdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLnByb2Nlc3NEZWZpbml0aW9uSW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0RlZmluaXRpb25JbnB1dC5zZXRWYWx1ZSgnJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0UHJvY2Vzc0RlZmluaXRpb25zKCkge1xuICAgICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnJlc2V0U2VsZWN0ZWRQcm9jZXNzRGVmaW5pdGlvbigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbk91dGNvbWVDbGljayhvdXRjb21lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdGFydFByb2Nlc3Mob3V0Y29tZSk7XG4gICAgfVxuXG4gICAgcmVzZXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVzZXRTZWxlY3RlZFByb2Nlc3NEZWZpbml0aW9uKCk7XG4gICAgICAgIHRoaXMubmFtZSA9ICcnO1xuICAgICAgICBpZiAodGhpcy5zdGFydEZvcm0pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRGb3JtLmRhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BsYXlGbihwcm9jZXNzOiBhbnkpOiBzdHJpbmcge1xuICAgICAgICBpZiAocHJvY2Vzcykge1xuICAgICAgICAgICAgbGV0IHByb2Nlc3NOYW1lID0gcHJvY2VzcztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzTmFtZSA9IHByb2Nlc3MubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9jZXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGRpc3BsYXlEcm9wZG93bihldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0QXV0b2NvbXBsZXRlLnBhbmVsT3Blbikge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGVmaW5pdGlvbklucHV0LnNldFZhbHVlKCcnKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRBdXRvY29tcGxldGUub3BlblBhbmVsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0QXV0b2NvbXBsZXRlLmNsb3NlUGFuZWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBuYW1lQ29udHJvbGxlcigpOiBBYnN0cmFjdENvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzTmFtZUlucHV0O1xuICAgIH1cblxuICAgIGdldCBwcm9jZXNzRGVmaW5pdGlvbkNvbnRyb2xsZXIoKTogQWJzdHJhY3RDb250cm9sIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0RlZmluaXRpb25JbnB1dDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRvZ2dsZVByb2Nlc3NOYW1lQW5kRGVmaW5pdGlvbnNEcm9wZG93bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQXBwU2VsZWN0ZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGVmaW5pdGlvbkNvbnRyb2xsZXIuZGlzYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5uYW1lQ29udHJvbGxlci5kaXNhYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9uQ29udHJvbGxlci5lbmFibGUoKTtcbiAgICAgICAgICAgIHRoaXMubmFtZUNvbnRyb2xsZXIuZW5hYmxlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9jZXNzRGVmaW5pdGlvblNlbGVjdGlvbkNoYW5nZWQocHJvY2Vzc0RlZmluaXRpb246IFByb2Nlc3NEZWZpbml0aW9uUmVwcmVzZW50YXRpb24pIHtcbiAgICAgICAgaWYgKHByb2Nlc3NEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzSW5zdGFuY2VEZXRhaWxzID0gbmV3IFByb2Nlc3NJbnN0YW5jZSh7IHByb2Nlc3NEZWZpbml0aW9uTmFtZTogcHJvY2Vzc0RlZmluaXRpb24ubmFtZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NOYW1lID0gdGhpcy5wcm9jZXNzTmFtZVBpcGUudHJhbnNmb3JtKHRoaXMubmFtZSwgcHJvY2Vzc0luc3RhbmNlRGV0YWlscyk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NOYW1lSW5wdXQuc2V0VmFsdWUocHJvY2Vzc05hbWUpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzTmFtZUlucHV0Lm1hcmtBc0RpcnR5KCk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NOYW1lSW5wdXQubWFya0FzVG91Y2hlZCgpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFByb2Nlc3NEZWYgPSBwcm9jZXNzRGVmaW5pdGlvbjtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0RlZmluaXRpb25TZWxlY3Rpb24uZW1pdCh0aGlzLnNlbGVjdGVkUHJvY2Vzc0RlZik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5hbWVDb250cm9sbGVyLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0xvYWRpbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dTZWxlY3RBcHBsaWNhdGlvbkRyb3Bkb3duID8gdGhpcy5pc0FwcHNMb2FkaW5nIDogZmFsc2U7XG4gICAgfVxufVxuIl19