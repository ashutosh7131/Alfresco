/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Component, EventEmitter, Output, ViewEncapsulation, Input } from '@angular/core';
import { Validators, FormBuilder, FormControl } from '@angular/forms';
import { AppConfigService, AppConfigValues } from '../app-config/app-config.service';
import { StorageService } from '../services/storage.service';
import { AlfrescoApiService } from '../services/alfresco-api.service';
import { ENTER } from '@angular/cdk/keycodes';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/forms';
import * as ɵngcc2 from '../services/storage.service';
import * as ɵngcc3 from '../services/alfresco-api.service';
import * as ɵngcc4 from '../app-config/app-config.service';
import * as ɵngcc5 from '@angular/material/toolbar';
import * as ɵngcc6 from '@angular/material/card';
import * as ɵngcc7 from '@angular/common';
import * as ɵngcc8 from '@angular/material/radio';
import * as ɵngcc9 from '@angular/material/button';
import * as ɵngcc10 from '@angular/material/form-field';
import * as ɵngcc11 from '@angular/material/select';
import * as ɵngcc12 from '@angular/material/core';
import * as ɵngcc13 from '@angular/material/input';
import * as ɵngcc14 from '@angular/material/slide-toggle';
import * as ɵngcc15 from '@ngx-translate/core';

function HostSettingsComponent_mat_form_field_7_mat_option_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-option", 14);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const provider_r6 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("value", provider_r6);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", provider_r6, " ");
} }
function HostSettingsComponent_mat_form_field_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-form-field");
    ɵngcc0.ɵɵelementStart(1, "mat-select", 12);
    ɵngcc0.ɵɵtemplate(2, HostSettingsComponent_mat_form_field_7_mat_option_2_Template, 2, 2, "mat-option", 13);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("formControl", ctx_r0.providersControl);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r0.providers);
} }
function HostSettingsComponent_ng_container_19_mat_error_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.NOT_VALID"), " ");
} }
function HostSettingsComponent_ng_container_19_mat_error_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.REQUIRED"), " ");
} }
function HostSettingsComponent_ng_container_19_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "mat-card-content");
    ɵngcc0.ɵɵelementStart(2, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(3, "mat-label");
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵpipe(5, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(6, "input", 16);
    ɵngcc0.ɵɵtemplate(7, HostSettingsComponent_ng_container_19_mat_error_7_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵtemplate(8, HostSettingsComponent_ng_container_19_mat_error_8_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(9, "p");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 4, "CORE.HOST_SETTINGS.CS-HOST"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("formControl", ctx_r1.ecmHost);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.ecmHost.hasError("pattern"));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.ecmHost.hasError("required"));
} }
function HostSettingsComponent_ng_container_20_mat_error_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.NOT_VALID"), " ");
} }
function HostSettingsComponent_ng_container_20_mat_error_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.REQUIRED"), " ");
} }
function HostSettingsComponent_ng_container_20_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "mat-card-content");
    ɵngcc0.ɵɵelementStart(2, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(3, "mat-label");
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵpipe(5, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(6, "input", 17);
    ɵngcc0.ɵɵtemplate(7, HostSettingsComponent_ng_container_20_mat_error_7_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵtemplate(8, HostSettingsComponent_ng_container_20_mat_error_8_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 4, "CORE.HOST_SETTINGS.BP-HOST"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("formControl", ctx_r2.bpmHost);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r2.bpmHost.hasError("pattern"));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r2.bpmHost.hasError("required"));
} }
function HostSettingsComponent_ng_container_21_mat_error_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.NOT_VALID"), " ");
} }
function HostSettingsComponent_ng_container_21_mat_error_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.REQUIRED"), " ");
} }
function HostSettingsComponent_ng_container_21_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "mat-card-content");
    ɵngcc0.ɵɵelementStart(2, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(3, "mat-label");
    ɵngcc0.ɵɵtext(4, "Identity Host");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(5, "input", 18);
    ɵngcc0.ɵɵtemplate(6, HostSettingsComponent_ng_container_21_mat_error_6_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵtemplate(7, HostSettingsComponent_ng_container_21_mat_error_7_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(6);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.identityHost.hasError("pattern"));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.identityHost.hasError("required"));
} }
function HostSettingsComponent_ng_container_22_mat_error_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.NOT_VALID"), " ");
} }
function HostSettingsComponent_ng_container_22_mat_error_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.REQUIRED"), " ");
} }
function HostSettingsComponent_ng_container_22_mat_error_13_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.REQUIRED"), " ");
} }
function HostSettingsComponent_ng_container_22_mat_error_20_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.REQUIRED"), " ");
} }
function HostSettingsComponent_ng_container_22_mat_error_35_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-error");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, "CORE.HOST_SETTINGS.REQUIRED"), " ");
} }
function HostSettingsComponent_ng_container_22_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "div", 19);
    ɵngcc0.ɵɵelementStart(2, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(3, "mat-label");
    ɵngcc0.ɵɵtext(4, "Auth Host");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(5, "input", 20);
    ɵngcc0.ɵɵtemplate(6, HostSettingsComponent_ng_container_22_mat_error_6_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵtemplate(7, HostSettingsComponent_ng_container_22_mat_error_7_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(8, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(9, "mat-label");
    ɵngcc0.ɵɵtext(10);
    ɵngcc0.ɵɵpipe(11, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(12, "input", 21);
    ɵngcc0.ɵɵtemplate(13, HostSettingsComponent_ng_container_22_mat_error_13_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(14, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(15, "mat-label");
    ɵngcc0.ɵɵtext(16);
    ɵngcc0.ɵɵpipe(17, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(18, "input", 22);
    ɵngcc0.ɵɵpipe(19, "translate");
    ɵngcc0.ɵɵtemplate(20, HostSettingsComponent_ng_container_22_mat_error_20_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(21, "label", 23);
    ɵngcc0.ɵɵtext(22);
    ɵngcc0.ɵɵpipe(23, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(24, "mat-slide-toggle", 24);
    ɵngcc0.ɵɵelementStart(25, "label", 25);
    ɵngcc0.ɵɵtext(26);
    ɵngcc0.ɵɵpipe(27, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(28, "mat-slide-toggle", 26);
    ɵngcc0.ɵɵelementStart(29, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(30, "mat-label");
    ɵngcc0.ɵɵtext(31);
    ɵngcc0.ɵɵpipe(32, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(33, "input", 27);
    ɵngcc0.ɵɵpipe(34, "translate");
    ɵngcc0.ɵɵtemplate(35, HostSettingsComponent_ng_container_22_mat_error_35_Template, 3, 3, "mat-error", 4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(36, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(37, "mat-label");
    ɵngcc0.ɵɵtext(38);
    ɵngcc0.ɵɵpipe(39, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(40, "input", 28);
    ɵngcc0.ɵɵpipe(41, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(42, "mat-form-field", 15);
    ɵngcc0.ɵɵelementStart(43, "mat-label");
    ɵngcc0.ɵɵtext(44);
    ɵngcc0.ɵɵpipe(45, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(46, "input", 29);
    ɵngcc0.ɵɵpipe(47, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(6);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.host.hasError("pattern"));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.host.hasError("required"));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 18, "CORE.HOST_SETTINGS.CLIENT"));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.clientId.hasError("required"));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(17, 20, "CORE.HOST_SETTINGS.SCOPE"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵpropertyInterpolate("name", ɵngcc0.ɵɵpipeBind1(19, 22, "CORE.HOST_SETTINGS.SCOPE"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.scope.hasError("required"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(23, 24, "CORE.HOST_SETTINGS.SILENT"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("color", "primary");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(27, 26, "CORE.HOST_SETTINGS.IMPLICIT-FLOW"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("color", "primary");
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(32, 28, "CORE.HOST_SETTINGS.REDIRECT"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵpropertyInterpolate("placeholder", ɵngcc0.ɵɵpipeBind1(34, 30, "CORE.HOST_SETTINGS.REDIRECT"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.redirectUri.hasError("required"));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(39, 32, "CORE.HOST_SETTINGS.REDIRECT_LOGOUT"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵpropertyInterpolate("placeholder", ɵngcc0.ɵɵpipeBind1(41, 34, "CORE.HOST_SETTINGS.REDIRECT_LOGOUT"));
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(45, 36, "CORE.HOST_SETTINGS.PUBLIC_URLS"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵpropertyInterpolate("placeholder", ɵngcc0.ɵɵpipeBind1(47, 38, "CORE.HOST_SETTINGS.PUBLIC_URLS"));
} }
export class HostSettingsComponent {
    constructor(formBuilder, storageService, alfrescoApiService, appConfig) {
        this.formBuilder = formBuilder;
        this.storageService = storageService;
        this.alfrescoApiService = alfrescoApiService;
        this.appConfig = appConfig;
        this.HOST_REGEX = '^(http|https):\/\/.*[^/]$';
        this.providers = ['BPM', 'ECM', 'ALL'];
        this.showSelectProviders = true;
        this.error = new EventEmitter();
        this.cancel = new EventEmitter();
        this.success = new EventEmitter();
    }
    ngOnInit() {
        if (this.providers.length === 1) {
            this.showSelectProviders = false;
        }
        const providerSelected = this.appConfig.get(AppConfigValues.PROVIDERS);
        const authType = this.appConfig.get(AppConfigValues.AUTHTYPE, 'BASIC');
        this.form = this.formBuilder.group({
            providersControl: [providerSelected, Validators.required],
            authType: authType
        });
        this.addFormGroups();
        if (authType === 'OAUTH') {
            this.addOAuthFormGroup();
            this.addIdentityHostFormControl();
        }
        this.form.get('authType').valueChanges.subscribe((value) => {
            if (value === 'BASIC') {
                this.form.removeControl('oauthConfig');
                this.form.removeControl('identityHost');
            }
            else {
                this.addOAuthFormGroup();
                this.addIdentityHostFormControl();
            }
        });
        this.providersControl.valueChanges.subscribe(() => {
            this.removeFormGroups();
            this.addFormGroups();
        });
    }
    removeFormGroups() {
        this.form.removeControl('bpmHost');
        this.form.removeControl('ecmHost');
    }
    addFormGroups() {
        this.addBPMFormControl();
        this.addECMFormControl();
    }
    addOAuthFormGroup() {
        const oauthFormGroup = this.createOAuthFormGroup();
        this.form.addControl('oauthConfig', oauthFormGroup);
    }
    addBPMFormControl() {
        if ((this.isBPM() || this.isALL() || this.isOAUTH()) && !this.bpmHost) {
            const bpmFormControl = this.createBPMFormControl();
            this.form.addControl('bpmHost', bpmFormControl);
        }
    }
    addIdentityHostFormControl() {
        const identityHostFormControl = this.createIdentityFormControl();
        this.form.addControl('identityHost', identityHostFormControl);
    }
    addECMFormControl() {
        if ((this.isECM() || this.isALL()) && !this.ecmHost) {
            const ecmFormControl = this.createECMFormControl();
            this.form.addControl('ecmHost', ecmFormControl);
        }
    }
    createOAuthFormGroup() {
        const oauth = this.appConfig.get(AppConfigValues.OAUTHCONFIG, {});
        return this.formBuilder.group({
            host: [oauth.host, [Validators.required, Validators.pattern(this.HOST_REGEX)]],
            clientId: [oauth.clientId, Validators.required],
            redirectUri: [oauth.redirectUri, Validators.required],
            redirectUriLogout: [oauth.redirectUriLogout],
            scope: [oauth.scope, Validators.required],
            secret: oauth.secret,
            silentLogin: oauth.silentLogin,
            implicitFlow: oauth.implicitFlow,
            publicUrls: [oauth.publicUrls]
        });
    }
    createBPMFormControl() {
        return new FormControl(this.appConfig.get(AppConfigValues.BPMHOST), [Validators.required, Validators.pattern(this.HOST_REGEX)]);
    }
    createIdentityFormControl() {
        return new FormControl(this.appConfig.get(AppConfigValues.IDENTITY_HOST), [Validators.required, Validators.pattern(this.HOST_REGEX)]);
    }
    createECMFormControl() {
        return new FormControl(this.appConfig.get(AppConfigValues.ECMHOST), [Validators.required, Validators.pattern(this.HOST_REGEX)]);
    }
    onCancel() {
        this.cancel.emit(true);
    }
    onSubmit(values) {
        this.storageService.setItem(AppConfigValues.PROVIDERS, values.providersControl);
        if (this.isBPM()) {
            this.saveBPMValues(values);
        }
        else if (this.isECM()) {
            this.saveECMValues(values);
        }
        else if (this.isALL()) {
            this.saveECMValues(values);
            this.saveBPMValues(values);
        }
        if (this.isOAUTH()) {
            this.saveOAuthValues(values);
        }
        this.storageService.setItem(AppConfigValues.AUTHTYPE, values.authType);
        this.alfrescoApiService.reset();
        this.alfrescoApiService.getInstance().invalidateSession();
        this.success.emit(true);
    }
    keyDownFunction(event) {
        if (event.keyCode === ENTER && this.form.valid) {
            this.onSubmit(this.form.value);
        }
    }
    saveOAuthValues(values) {
        if (values.oauthConfig.publicUrls && (typeof values.oauthConfig.publicUrls === 'string')) {
            values.oauthConfig.publicUrls = values.oauthConfig.publicUrls.split(',');
        }
        this.storageService.setItem(AppConfigValues.OAUTHCONFIG, JSON.stringify(values.oauthConfig));
        this.storageService.setItem(AppConfigValues.IDENTITY_HOST, values.identityHost);
    }
    saveBPMValues(values) {
        this.storageService.setItem(AppConfigValues.BPMHOST, values.bpmHost);
    }
    saveECMValues(values) {
        this.storageService.setItem(AppConfigValues.ECMHOST, values.ecmHost);
    }
    isBPM() {
        return this.providersControl.value === 'BPM';
    }
    isECM() {
        return this.providersControl.value === 'ECM';
    }
    isALL() {
        return this.providersControl.value === 'ALL';
    }
    isOAUTH() {
        return this.form.get('authType').value === 'OAUTH';
    }
    get providersControl() {
        return this.form.get('providersControl');
    }
    get bpmHost() {
        return this.form.get('bpmHost');
    }
    get ecmHost() {
        return this.form.get('ecmHost');
    }
    get host() {
        return this.oauthConfig.get('host');
    }
    get identityHost() {
        return this.form.get('identityHost');
    }
    get clientId() {
        return this.oauthConfig.get('clientId');
    }
    get scope() {
        return this.oauthConfig.get('scope');
    }
    get secretId() {
        return this.oauthConfig.get('secretId');
    }
    get implicitFlow() {
        return this.oauthConfig.get('implicitFlow');
    }
    get silentLogin() {
        return this.oauthConfig.get('silentLogin');
    }
    get redirectUri() {
        return this.oauthConfig.get('redirectUri');
    }
    get publicUrls() {
        return this.oauthConfig.get('publicUrls');
    }
    get redirectUriLogout() {
        return this.oauthConfig.get('redirectUriLogout');
    }
    get oauthConfig() {
        return this.form.get('oauthConfig');
    }
}
HostSettingsComponent.ɵfac = function HostSettingsComponent_Factory(t) { return new (t || HostSettingsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.StorageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.AlfrescoApiService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.AppConfigService)); };
HostSettingsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: HostSettingsComponent, selectors: [["adf-host-settings"]], hostAttrs: [1, "adf-host-settings"], inputs: { providers: "providers" }, outputs: { error: "error", cancel: "cancel", success: "success" }, decls: 30, vars: 25, consts: [[1, "adf-setting-container"], ["color", "primary", 1, "adf-setting-toolbar"], [1, "adf-setting-card"], ["id", "host-form", 3, "formGroup", "submit", "keydown"], [4, "ngIf"], [1, "adf-authentication-type"], ["formControlName", "authType"], ["value", "BASIC"], ["value", "OAUTH"], [1, "adf-actions"], ["mat-button", "", "color", "primary", 3, "click"], ["type", "submit", "id", "host-button", "mat-raised-button", "", "color", "primary", "data-automation-id", "host-button", 1, "adf-login-button", 3, "disabled"], ["id", "adf-provider-selector", "placeholder", "Provider", 3, "formControl"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "adf-full-width"], ["matInput", "", "data-automation-id", "ecmHost", "type", "text", "id", "ecmHost", "placeholder", "http(s)://host|ip:port(/path)", 3, "formControl"], ["matInput", "", "data-automation-id", "bpmHost", "type", "text", "id", "bpmHost", "placeholder", "http(s)://host|ip:port(/path)", 3, "formControl"], ["matInput", "", "name", "identityHost", "id", "identityHost", "formControlName", "identityHost", "placeholder", "http(s)://host|ip:port(/path)"], ["formGroupName", "oauthConfig"], ["matInput", "", "name", "host", "id", "oauthHost", "formControlName", "host", "placeholder", "http(s)://host|ip:port(/path)"], ["matInput", "", "name", "clientId", "id", "clientId", "formControlName", "clientId", "placeholder", "Client Id"], ["matInput", "", "formControlName", "scope", "placeholder", "Scope Id", 3, "name"], ["for", "silentLogin"], ["name", "silentLogin", "formControlName", "silentLogin", 1, "adf-full-width", 3, "color"], ["for", "implicitFlow"], ["name", "implicitFlow", "formControlName", "implicitFlow", 1, "adf-full-width", 3, "color"], ["matInput", "", "name", "redirectUri", "formControlName", "redirectUri", 3, "placeholder"], ["id", "logout-url", "matInput", "", "name", "redirectUriLogout", "formControlName", "redirectUriLogout", 3, "placeholder"], ["id", "public-url", "matInput", "", "name", "publicUrls", "formControlName", "publicUrls", 3, "placeholder"]], template: function HostSettingsComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "mat-toolbar", 1);
        ɵngcc0.ɵɵelementStart(2, "h3");
        ɵngcc0.ɵɵtext(3);
        ɵngcc0.ɵɵpipe(4, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(5, "mat-card", 2);
        ɵngcc0.ɵɵelementStart(6, "form", 3);
        ɵngcc0.ɵɵlistener("submit", function HostSettingsComponent_Template_form_submit_6_listener() { return ctx.onSubmit(ctx.form.value); })("keydown", function HostSettingsComponent_Template_form_keydown_6_listener($event) { return ctx.keyDownFunction($event); });
        ɵngcc0.ɵɵtemplate(7, HostSettingsComponent_mat_form_field_7_Template, 3, 2, "mat-form-field", 4);
        ɵngcc0.ɵɵelementStart(8, "div", 5);
        ɵngcc0.ɵɵelementStart(9, "div");
        ɵngcc0.ɵɵtext(10);
        ɵngcc0.ɵɵpipe(11, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(12, "mat-radio-group", 6);
        ɵngcc0.ɵɵelementStart(13, "mat-radio-button", 7);
        ɵngcc0.ɵɵtext(14);
        ɵngcc0.ɵɵpipe(15, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(16, "mat-radio-button", 8);
        ɵngcc0.ɵɵtext(17);
        ɵngcc0.ɵɵpipe(18, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(19, HostSettingsComponent_ng_container_19_Template, 10, 6, "ng-container", 4);
        ɵngcc0.ɵɵtemplate(20, HostSettingsComponent_ng_container_20_Template, 9, 6, "ng-container", 4);
        ɵngcc0.ɵɵtemplate(21, HostSettingsComponent_ng_container_21_Template, 8, 2, "ng-container", 4);
        ɵngcc0.ɵɵtemplate(22, HostSettingsComponent_ng_container_22_Template, 48, 40, "ng-container", 4);
        ɵngcc0.ɵɵelementStart(23, "mat-card-actions", 9);
        ɵngcc0.ɵɵelementStart(24, "button", 10);
        ɵngcc0.ɵɵlistener("click", function HostSettingsComponent_Template_button_click_24_listener() { return ctx.onCancel(); });
        ɵngcc0.ɵɵtext(25);
        ɵngcc0.ɵɵpipe(26, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(27, "button", 11);
        ɵngcc0.ɵɵtext(28);
        ɵngcc0.ɵɵpipe(29, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 13, "CORE.HOST_SETTINGS.TITLE"));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("formGroup", ctx.form);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showSelectProviders);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(11, 15, "CORE.HOST_SETTINGS.TYPE-AUTH"), " : ");
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵtextInterpolate1("", ɵngcc0.ɵɵpipeBind1(15, 17, "CORE.HOST_SETTINGS.BASIC"), " ");
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate1("", ɵngcc0.ɵɵpipeBind1(18, 19, "CORE.HOST_SETTINGS.SSO"), " ");
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.isALL() || ctx.isECM());
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.isALL() || ctx.isBPM());
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.isOAUTH());
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.isOAUTH());
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(26, 21, "CORE.HOST_SETTINGS.BACK"), " ");
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("disabled", !ctx.form.valid);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(29, 23, "CORE.HOST_SETTINGS.APPLY"), " ");
    } }, directives: [ɵngcc5.MatToolbar, ɵngcc6.MatCard, ɵngcc1.ɵangular_packages_forms_forms_y, ɵngcc1.NgControlStatusGroup, ɵngcc1.FormGroupDirective, ɵngcc7.NgIf, ɵngcc8.MatRadioGroup, ɵngcc1.NgControlStatus, ɵngcc1.FormControlName, ɵngcc8.MatRadioButton, ɵngcc6.MatCardActions, ɵngcc9.MatButton, ɵngcc10.MatFormField, ɵngcc11.MatSelect, ɵngcc1.FormControlDirective, ɵngcc7.NgForOf, ɵngcc12.MatOption, ɵngcc6.MatCardContent, ɵngcc10.MatLabel, ɵngcc13.MatInput, ɵngcc1.DefaultValueAccessor, ɵngcc10.MatError, ɵngcc1.FormGroupName, ɵngcc14.MatSlideToggle], pipes: [ɵngcc15.TranslatePipe], styles: [".adf-host-settings{align-items:center;display:flex;min-height:100%}.adf-host-settings .adf-authentication-type{margin-bottom:20px;margin-top:10px}.adf-host-settings .adf-setting-container{border-collapse:collapse;border-spacing:0;display:table;margin:0 auto;width:800px}.adf-host-settings .adf-setting-card-padding{display:table-cell;margin:0;vertical-align:middle;width:50%}.adf-host-settings .adf-settings-link-icon{margin-right:10px;position:relative;top:6px}.adf-host-settings .adf-settings-actions{display:flex;justify-content:flex-end}.adf-host-settings .adf-full-width{width:100%}"], encapsulation: 2 });
HostSettingsComponent.ctorParameters = () => [
    { type: FormBuilder },
    { type: StorageService },
    { type: AlfrescoApiService },
    { type: AppConfigService }
];
HostSettingsComponent.propDecorators = {
    providers: [{ type: Input }],
    error: [{ type: Output }],
    cancel: [{ type: Output }],
    success: [{ type: Output }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(HostSettingsComponent, [{
        type: Component,
        args: [{
                selector: 'adf-host-settings',
                template: "<div class=\"adf-setting-container\">\n    <mat-toolbar color=\"primary\" class=\"adf-setting-toolbar\">\n        <h3>{{'CORE.HOST_SETTINGS.TITLE' | translate}}</h3>\n    </mat-toolbar>\n    <mat-card class=\"adf-setting-card\">\n        <form id=\"host-form\" [formGroup]=\"form\" (submit)=\"onSubmit(form.value)\" (keydown)=\"keyDownFunction($event)\">\n\n            <mat-form-field *ngIf=\"showSelectProviders\">\n                <mat-select  id=\"adf-provider-selector\" placeholder=\"Provider\" [formControl]=\"providersControl\">\n                    <mat-option *ngFor=\"let provider of providers\" [value]=\"provider\">\n                        {{ provider }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n            <div class=\"adf-authentication-type\">\n                <div> {{'CORE.HOST_SETTINGS.TYPE-AUTH' | translate }} : </div>\n                <mat-radio-group formControlName=\"authType\" >\n                <mat-radio-button value=\"BASIC\">{{'CORE.HOST_SETTINGS.BASIC' | translate }}\n                </mat-radio-button>\n                <mat-radio-button value=\"OAUTH\">{{'CORE.HOST_SETTINGS.SSO' | translate }}\n                </mat-radio-button>\n            </mat-radio-group>\n            </div>\n\n            <ng-container *ngIf=\"isALL() || isECM()\">\n                <mat-card-content>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{'CORE.HOST_SETTINGS.CS-HOST' | translate }}</mat-label>\n                        <input matInput [formControl]=\"ecmHost\" data-automation-id=\"ecmHost\" type=\"text\"\n                               id=\"ecmHost\" placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"ecmHost.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"ecmHost.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                    <p>\n                </mat-card-content>\n            </ng-container>\n\n            <ng-container *ngIf=\"isALL() || isBPM()\">\n                <mat-card-content>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{'CORE.HOST_SETTINGS.BP-HOST' | translate }}</mat-label>\n                        <input matInput [formControl]=\"bpmHost\" data-automation-id=\"bpmHost\" type=\"text\"\n                               id=\"bpmHost\" placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"bpmHost.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"bpmHost.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                </mat-card-content>\n            </ng-container>\n\n            <ng-container *ngIf=\"isOAUTH()\">\n                <mat-card-content>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>Identity Host</mat-label>\n                        <input matInput name=\"identityHost\" id=\"identityHost\" formControlName=\"identityHost\"\n                                placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"identityHost.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"identityHost.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                </mat-card-content>\n            </ng-container>\n\n            <ng-container *ngIf=\"isOAUTH()\">\n                <div formGroupName=\"oauthConfig\">\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>Auth Host</mat-label>\n                        <input matInput name=\"host\" id=\"oauthHost\" formControlName=\"host\"\n                               placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"host.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"host.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.CLIENT'| translate }}</mat-label>\n                        <input matInput name=\"clientId\" id=\"clientId\" formControlName=\"clientId\"\n                               placeholder=\"Client Id\">\n                        <mat-error *ngIf=\"clientId.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.SCOPE'| translate }}</mat-label>\n                        <input matInput name=\"{{ 'CORE.HOST_SETTINGS.SCOPE'| translate }}\"\n                               formControlName=\"scope\" placeholder=\"Scope Id\">\n                        <mat-error *ngIf=\"scope.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n\n                    <label for=\"silentLogin\">{{ 'CORE.HOST_SETTINGS.SILENT'| translate }}</label>\n                    <mat-slide-toggle class=\"adf-full-width\" name=\"silentLogin\" [color]=\"'primary'\"\n                                      formControlName=\"silentLogin\">\n                    </mat-slide-toggle>\n\n                    <label for=\"implicitFlow\">{{ 'CORE.HOST_SETTINGS.IMPLICIT-FLOW'| translate }}</label>\n                    <mat-slide-toggle class=\"adf-full-width\" name=\"implicitFlow\" [color]=\"'primary'\"\n                                      formControlName=\"implicitFlow\">\n                    </mat-slide-toggle>\n\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.REDIRECT'| translate }}</mat-label>\n                        <input matInput placeholder=\"{{ 'CORE.HOST_SETTINGS.REDIRECT'| translate }}\"\n                               name=\"redirectUri\" formControlName=\"redirectUri\">\n                        <mat-error *ngIf=\"redirectUri.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.REDIRECT_LOGOUT'| translate }}</mat-label>\n                        <input id=\"logout-url\" matInput placeholder=\"{{ 'CORE.HOST_SETTINGS.REDIRECT_LOGOUT'| translate }}\"\n                               name=\"redirectUriLogout\" formControlName=\"redirectUriLogout\">\n                    </mat-form-field>\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.PUBLIC_URLS'| translate }}</mat-label>\n                        <input id=\"public-url\" matInput placeholder=\"{{ 'CORE.HOST_SETTINGS.PUBLIC_URLS'| translate }}\"\n                               name=\"publicUrls\" formControlName=\"publicUrls\">\n                    </mat-form-field>\n\n                </div>\n            </ng-container>\n            <mat-card-actions class=\"adf-actions\">\n                <button mat-button (click)=\"onCancel()\" color=\"primary\">\n                    {{'CORE.HOST_SETTINGS.BACK' | translate }}\n                </button>\n                <button type=\"submit\" id=\"host-button\" class=\"adf-login-button\" mat-raised-button\n                        color=\"primary\" data-automation-id=\"host-button\"\n                        [disabled]=\"!form.valid\">\n                    {{'CORE.HOST_SETTINGS.APPLY' | translate }}\n                </button>\n            </mat-card-actions>\n        </form>\n    </mat-card>\n</div>\n",
                host: {
                    'class': 'adf-host-settings'
                },
                encapsulation: ViewEncapsulation.None,
                styles: [".adf-host-settings{align-items:center;display:flex;min-height:100%}.adf-host-settings .adf-authentication-type{margin-bottom:20px;margin-top:10px}.adf-host-settings .adf-setting-container{border-collapse:collapse;border-spacing:0;display:table;margin:0 auto;width:800px}.adf-host-settings .adf-setting-card-padding{display:table-cell;margin:0;vertical-align:middle;width:50%}.adf-host-settings .adf-settings-link-icon{margin-right:10px;position:relative;top:6px}.adf-host-settings .adf-settings-actions{display:flex;justify-content:flex-end}.adf-host-settings .adf-full-width{width:100%}"]
            }]
    }], function () { return [{ type: ɵngcc1.FormBuilder }, { type: ɵngcc2.StorageService }, { type: ɵngcc3.AlfrescoApiService }, { type: ɵngcc4.AppConfigService }]; }, { providers: [{
            type: Input
        }], error: [{
            type: Output
        }], cancel: [{
            type: Output
        }], success: [{
            type: Output
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG9zdC1zZXR0aW5ncy5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2hvbWUvdHJhdmlzL2J1aWxkL0FsZnJlc2NvL2FsZnJlc2NvLW5nMi1jb21wb25lbnRzL2xpYi9jb3JlL3NldHRpbmdzL2hvc3Qtc2V0dGluZ3MuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFFSCxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsaUJBQWlCLEVBQVUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xHLE9BQU8sRUFBRSxVQUFVLEVBQWEsV0FBVyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxlQUFlLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNyRixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFFdEUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLHVCQUF1QixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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c291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0VuY2Fwc3VsYXRpb24sIE9uSW5pdCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFZhbGlkYXRvcnMsIEZvcm1Hcm91cCwgRm9ybUJ1aWxkZXIsIEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQXBwQ29uZmlnU2VydmljZSwgQXBwQ29uZmlnVmFsdWVzIH0gZnJvbSAnLi4vYXBwLWNvbmZpZy9hcHAtY29uZmlnLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9zdG9yYWdlLnNlcnZpY2UnO1xuaW1wb3J0IHsgQWxmcmVzY29BcGlTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYWxmcmVzY28tYXBpLnNlcnZpY2UnO1xuaW1wb3J0IHsgT2F1dGhDb25maWdNb2RlbCB9IGZyb20gJy4uL21vZGVscy9vYXV0aC1jb25maWcubW9kZWwnO1xuaW1wb3J0IHsgRU5URVIgfSBmcm9tICdAYW5ndWxhci9jZGsva2V5Y29kZXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1ob3N0LXNldHRpbmdzJyxcbiAgICB0ZW1wbGF0ZVVybDogJ2hvc3Qtc2V0dGluZ3MuY29tcG9uZW50Lmh0bWwnLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ2NsYXNzJzogJ2FkZi1ob3N0LXNldHRpbmdzJ1xuICAgIH0sXG4gICAgc3R5bGVVcmxzOiBbJy4vaG9zdC1zZXR0aW5ncy5jb21wb25lbnQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgSG9zdFNldHRpbmdzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIEhPU1RfUkVHRVg6IHN0cmluZyA9ICdeKGh0dHB8aHR0cHMpOlxcL1xcLy4qW14vXSQnO1xuXG4gICAgLyoqXG4gICAgICogVGVsbHMgdGhlIGNvbXBvbmVudCB3aGljaCBwcm92aWRlciBvcHRpb25zIGFyZSBhdmFpbGFibGUuIFBvc3NpYmxlIHZhbGlkIHZhbHVlc1xuICAgICAqIGFyZSBcIkVDTVwiIChDb250ZW50KSwgXCJCUE1cIiAoUHJvY2VzcykgLCBcIkFMTFwiIChDb250ZW50IGFuZCBQcm9jZXNzKSwgJ09BVVRIMicgU1NPLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcHJvdmlkZXJzOiBzdHJpbmdbXSA9IFsnQlBNJywgJ0VDTScsICdBTEwnXTtcblxuICAgIHNob3dTZWxlY3RQcm92aWRlcnMgPSB0cnVlO1xuXG4gICAgZm9ybTogRm9ybUdyb3VwO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgVVJMIGlzIGludmFsaWQuICovXG4gICAgQE91dHB1dCgpXG4gICAgZXJyb3IgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIHVzZXIgY2FuY2VscyB0aGUgY2hhbmdlcy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBjYW5jZWwgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSBjaGFuZ2VzIGFyZSBzdWNjZXNzZnVsbHkgYXBwbGllZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBzdWNjZXNzID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBmb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBzdG9yYWdlU2VydmljZTogU3RvcmFnZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBhbGZyZXNjb0FwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGFwcENvbmZpZzogQXBwQ29uZmlnU2VydmljZSkge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dTZWxlY3RQcm92aWRlcnMgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyU2VsZWN0ZWQgPSB0aGlzLmFwcENvbmZpZy5nZXQ8c3RyaW5nPihBcHBDb25maWdWYWx1ZXMuUFJPVklERVJTKTtcblxuICAgICAgICBjb25zdCBhdXRoVHlwZSA9IHRoaXMuYXBwQ29uZmlnLmdldDxzdHJpbmc+KEFwcENvbmZpZ1ZhbHVlcy5BVVRIVFlQRSwgJ0JBU0lDJyk7XG5cbiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy5mb3JtQnVpbGRlci5ncm91cCh7XG4gICAgICAgICAgICBwcm92aWRlcnNDb250cm9sOiBbcHJvdmlkZXJTZWxlY3RlZCwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXG4gICAgICAgICAgICBhdXRoVHlwZTogYXV0aFR5cGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRGb3JtR3JvdXBzKCk7XG5cbiAgICAgICAgaWYgKGF1dGhUeXBlID09PSAnT0FVVEgnKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE9BdXRoRm9ybUdyb3VwKCk7XG4gICAgICAgICAgICB0aGlzLmFkZElkZW50aXR5SG9zdEZvcm1Db250cm9sKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZvcm0uZ2V0KCdhdXRoVHlwZScpLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09ICdCQVNJQycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucmVtb3ZlQ29udHJvbCgnb2F1dGhDb25maWcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucmVtb3ZlQ29udHJvbCgnaWRlbnRpdHlIb3N0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT0F1dGhGb3JtR3JvdXAoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZElkZW50aXR5SG9zdEZvcm1Db250cm9sKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucHJvdmlkZXJzQ29udHJvbC52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9ybUdyb3VwcygpO1xuICAgICAgICAgICAgdGhpcy5hZGRGb3JtR3JvdXBzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlRm9ybUdyb3VwcygpIHtcbiAgICAgICAgdGhpcy5mb3JtLnJlbW92ZUNvbnRyb2woJ2JwbUhvc3QnKTtcbiAgICAgICAgdGhpcy5mb3JtLnJlbW92ZUNvbnRyb2woJ2VjbUhvc3QnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEZvcm1Hcm91cHMoKSB7XG4gICAgICAgIHRoaXMuYWRkQlBNRm9ybUNvbnRyb2woKTtcbiAgICAgICAgdGhpcy5hZGRFQ01Gb3JtQ29udHJvbCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkT0F1dGhGb3JtR3JvdXAoKSB7XG4gICAgICAgIGNvbnN0IG9hdXRoRm9ybUdyb3VwID0gdGhpcy5jcmVhdGVPQXV0aEZvcm1Hcm91cCgpO1xuICAgICAgICB0aGlzLmZvcm0uYWRkQ29udHJvbCgnb2F1dGhDb25maWcnLCBvYXV0aEZvcm1Hcm91cCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRCUE1Gb3JtQ29udHJvbCgpIHtcbiAgICAgICAgaWYgKCh0aGlzLmlzQlBNKCkgfHwgdGhpcy5pc0FMTCgpIHx8IHRoaXMuaXNPQVVUSCgpKSAmJiAhdGhpcy5icG1Ib3N0KSB7XG4gICAgICAgICAgICBjb25zdCBicG1Gb3JtQ29udHJvbCA9IHRoaXMuY3JlYXRlQlBNRm9ybUNvbnRyb2woKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5hZGRDb250cm9sKCdicG1Ib3N0JywgYnBtRm9ybUNvbnRyb2wpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRJZGVudGl0eUhvc3RGb3JtQ29udHJvbCgpIHtcbiAgICAgICAgY29uc3QgaWRlbnRpdHlIb3N0Rm9ybUNvbnRyb2wgPSB0aGlzLmNyZWF0ZUlkZW50aXR5Rm9ybUNvbnRyb2woKTtcbiAgICAgICAgdGhpcy5mb3JtLmFkZENvbnRyb2woJ2lkZW50aXR5SG9zdCcsIGlkZW50aXR5SG9zdEZvcm1Db250cm9sKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEVDTUZvcm1Db250cm9sKCkge1xuICAgICAgICBpZiAoKHRoaXMuaXNFQ00oKSB8fCB0aGlzLmlzQUxMKCkpICYmICF0aGlzLmVjbUhvc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGVjbUZvcm1Db250cm9sID0gdGhpcy5jcmVhdGVFQ01Gb3JtQ29udHJvbCgpO1xuICAgICAgICAgICAgdGhpcy5mb3JtLmFkZENvbnRyb2woJ2VjbUhvc3QnLCBlY21Gb3JtQ29udHJvbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU9BdXRoRm9ybUdyb3VwKCk6IEZvcm1Hcm91cCB7XG4gICAgICAgIGNvbnN0IG9hdXRoID0gPE9hdXRoQ29uZmlnTW9kZWw+IHRoaXMuYXBwQ29uZmlnLmdldChBcHBDb25maWdWYWx1ZXMuT0FVVEhDT05GSUcsIHt9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtQnVpbGRlci5ncm91cCh7XG4gICAgICAgICAgICBob3N0OiBbb2F1dGguaG9zdCwgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMucGF0dGVybih0aGlzLkhPU1RfUkVHRVgpXV0sXG4gICAgICAgICAgICBjbGllbnRJZDogW29hdXRoLmNsaWVudElkLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSxcbiAgICAgICAgICAgIHJlZGlyZWN0VXJpOiBbb2F1dGgucmVkaXJlY3RVcmksIFZhbGlkYXRvcnMucmVxdWlyZWRdLFxuICAgICAgICAgICAgcmVkaXJlY3RVcmlMb2dvdXQ6IFtvYXV0aC5yZWRpcmVjdFVyaUxvZ291dF0sXG4gICAgICAgICAgICBzY29wZTogW29hdXRoLnNjb3BlLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSxcbiAgICAgICAgICAgIHNlY3JldDogb2F1dGguc2VjcmV0LFxuICAgICAgICAgICAgc2lsZW50TG9naW46IG9hdXRoLnNpbGVudExvZ2luLFxuICAgICAgICAgICAgaW1wbGljaXRGbG93OiBvYXV0aC5pbXBsaWNpdEZsb3csXG4gICAgICAgICAgICBwdWJsaWNVcmxzOiBbb2F1dGgucHVibGljVXJsc11cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVCUE1Gb3JtQ29udHJvbCgpOiBGb3JtQ29udHJvbCB7XG4gICAgICAgIHJldHVybiBuZXcgRm9ybUNvbnRyb2wodGhpcy5hcHBDb25maWcuZ2V0PHN0cmluZz4oQXBwQ29uZmlnVmFsdWVzLkJQTUhPU1QpLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5wYXR0ZXJuKHRoaXMuSE9TVF9SRUdFWCldKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUlkZW50aXR5Rm9ybUNvbnRyb2woKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gbmV3IEZvcm1Db250cm9sKHRoaXMuYXBwQ29uZmlnLmdldDxzdHJpbmc+KEFwcENvbmZpZ1ZhbHVlcy5JREVOVElUWV9IT1NUKSwgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMucGF0dGVybih0aGlzLkhPU1RfUkVHRVgpXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVFQ01Gb3JtQ29udHJvbCgpOiBGb3JtQ29udHJvbCB7XG4gICAgICAgIHJldHVybiBuZXcgRm9ybUNvbnRyb2wodGhpcy5hcHBDb25maWcuZ2V0PHN0cmluZz4oQXBwQ29uZmlnVmFsdWVzLkVDTUhPU1QpLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5wYXR0ZXJuKHRoaXMuSE9TVF9SRUdFWCldKTtcbiAgICB9XG5cbiAgICBvbkNhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5jYW5jZWwuZW1pdCh0cnVlKTtcbiAgICB9XG5cbiAgICBvblN1Ym1pdCh2YWx1ZXM6IGFueSkge1xuICAgICAgICB0aGlzLnN0b3JhZ2VTZXJ2aWNlLnNldEl0ZW0oQXBwQ29uZmlnVmFsdWVzLlBST1ZJREVSUywgdmFsdWVzLnByb3ZpZGVyc0NvbnRyb2wpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzQlBNKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2F2ZUJQTVZhbHVlcyh2YWx1ZXMpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFQ00oKSkge1xuICAgICAgICAgICAgdGhpcy5zYXZlRUNNVmFsdWVzKHZhbHVlcyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0FMTCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNhdmVFQ01WYWx1ZXModmFsdWVzKTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZUJQTVZhbHVlcyh2YWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNPQVVUSCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNhdmVPQXV0aFZhbHVlcyh2YWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdG9yYWdlU2VydmljZS5zZXRJdGVtKEFwcENvbmZpZ1ZhbHVlcy5BVVRIVFlQRSwgdmFsdWVzLmF1dGhUeXBlKTtcblxuICAgICAgICB0aGlzLmFsZnJlc2NvQXBpU2VydmljZS5yZXNldCgpO1xuICAgICAgICB0aGlzLmFsZnJlc2NvQXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmludmFsaWRhdGVTZXNzaW9uKCk7XG4gICAgICAgIHRoaXMuc3VjY2Vzcy5lbWl0KHRydWUpO1xuICAgIH1cblxuICAgIGtleURvd25GdW5jdGlvbihldmVudDogYW55KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBFTlRFUiAmJiB0aGlzLmZvcm0udmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMub25TdWJtaXQodGhpcy5mb3JtLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2F2ZU9BdXRoVmFsdWVzKHZhbHVlczogYW55KSB7XG4gICAgICAgIGlmICh2YWx1ZXMub2F1dGhDb25maWcucHVibGljVXJscyAmJiAodHlwZW9mIHZhbHVlcy5vYXV0aENvbmZpZy5wdWJsaWNVcmxzID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgICAgIHZhbHVlcy5vYXV0aENvbmZpZy5wdWJsaWNVcmxzID0gdmFsdWVzLm9hdXRoQ29uZmlnLnB1YmxpY1VybHMuc3BsaXQoJywnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RvcmFnZVNlcnZpY2Uuc2V0SXRlbShBcHBDb25maWdWYWx1ZXMuT0FVVEhDT05GSUcsIEpTT04uc3RyaW5naWZ5KHZhbHVlcy5vYXV0aENvbmZpZykpO1xuICAgICAgICB0aGlzLnN0b3JhZ2VTZXJ2aWNlLnNldEl0ZW0oQXBwQ29uZmlnVmFsdWVzLklERU5USVRZX0hPU1QsIHZhbHVlcy5pZGVudGl0eUhvc3QpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2F2ZUJQTVZhbHVlcyh2YWx1ZXM6IGFueSkge1xuICAgICAgICB0aGlzLnN0b3JhZ2VTZXJ2aWNlLnNldEl0ZW0oQXBwQ29uZmlnVmFsdWVzLkJQTUhPU1QsIHZhbHVlcy5icG1Ib3N0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNhdmVFQ01WYWx1ZXModmFsdWVzOiBhbnkpIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlU2VydmljZS5zZXRJdGVtKEFwcENvbmZpZ1ZhbHVlcy5FQ01IT1NULCB2YWx1ZXMuZWNtSG9zdCk7XG4gICAgfVxuXG4gICAgaXNCUE0oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyc0NvbnRyb2wudmFsdWUgPT09ICdCUE0nO1xuICAgIH1cblxuICAgIGlzRUNNKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnNDb250cm9sLnZhbHVlID09PSAnRUNNJztcbiAgICB9XG5cbiAgICBpc0FMTCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzQ29udHJvbC52YWx1ZSA9PT0gJ0FMTCc7XG4gICAgfVxuXG4gICAgaXNPQVVUSCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybS5nZXQoJ2F1dGhUeXBlJykudmFsdWUgPT09ICdPQVVUSCc7XG4gICAgfVxuXG4gICAgZ2V0IHByb3ZpZGVyc0NvbnRyb2woKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtLmdldCgncHJvdmlkZXJzQ29udHJvbCcpIGFzIEZvcm1Db250cm9sO1xuICAgIH1cblxuICAgIGdldCBicG1Ib3N0KCk6IEZvcm1Db250cm9sIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybS5nZXQoJ2JwbUhvc3QnKSBhcyBGb3JtQ29udHJvbDtcbiAgICB9XG5cbiAgICBnZXQgZWNtSG9zdCgpOiBGb3JtQ29udHJvbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm0uZ2V0KCdlY21Ib3N0JykgYXMgRm9ybUNvbnRyb2w7XG4gICAgfVxuXG4gICAgZ2V0IGhvc3QoKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5vYXV0aENvbmZpZy5nZXQoJ2hvc3QnKSBhcyBGb3JtQ29udHJvbDtcbiAgICB9XG5cbiAgICBnZXQgaWRlbnRpdHlIb3N0KCk6IEZvcm1Db250cm9sIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybS5nZXQoJ2lkZW50aXR5SG9zdCcpIGFzIEZvcm1Db250cm9sO1xuICAgIH1cblxuICAgIGdldCBjbGllbnRJZCgpOiBGb3JtQ29udHJvbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm9hdXRoQ29uZmlnLmdldCgnY2xpZW50SWQnKSBhcyBGb3JtQ29udHJvbDtcbiAgICB9XG5cbiAgICBnZXQgc2NvcGUoKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5vYXV0aENvbmZpZy5nZXQoJ3Njb3BlJykgYXMgRm9ybUNvbnRyb2w7XG4gICAgfVxuXG4gICAgZ2V0IHNlY3JldElkKCk6IEZvcm1Db250cm9sIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2F1dGhDb25maWcuZ2V0KCdzZWNyZXRJZCcpIGFzIEZvcm1Db250cm9sO1xuICAgIH1cblxuICAgIGdldCBpbXBsaWNpdEZsb3coKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5vYXV0aENvbmZpZy5nZXQoJ2ltcGxpY2l0RmxvdycpIGFzIEZvcm1Db250cm9sO1xuICAgIH1cblxuICAgIGdldCBzaWxlbnRMb2dpbigpOiBGb3JtQ29udHJvbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm9hdXRoQ29uZmlnLmdldCgnc2lsZW50TG9naW4nKSBhcyBGb3JtQ29udHJvbDtcbiAgICB9XG5cbiAgICBnZXQgcmVkaXJlY3RVcmkoKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5vYXV0aENvbmZpZy5nZXQoJ3JlZGlyZWN0VXJpJykgYXMgRm9ybUNvbnRyb2w7XG4gICAgfVxuXG4gICAgZ2V0IHB1YmxpY1VybHMoKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5vYXV0aENvbmZpZy5nZXQoJ3B1YmxpY1VybHMnKSBhcyBGb3JtQ29udHJvbDtcbiAgICB9XG5cbiAgICBnZXQgcmVkaXJlY3RVcmlMb2dvdXQoKTogRm9ybUNvbnRyb2wge1xuICAgICAgICByZXR1cm4gdGhpcy5vYXV0aENvbmZpZy5nZXQoJ3JlZGlyZWN0VXJpTG9nb3V0JykgYXMgRm9ybUNvbnRyb2w7XG4gICAgfVxuXG4gICAgZ2V0IG9hdXRoQ29uZmlnKCk6IEZvcm1Db250cm9sIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybS5nZXQoJ29hdXRoQ29uZmlnJykgYXMgRm9ybUNvbnRyb2w7XG4gICAgfVxuXG59XG4iXX0=