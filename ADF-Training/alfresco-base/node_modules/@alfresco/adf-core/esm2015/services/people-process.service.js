import { Injectable } from '@angular/core';
import { from, throwError } from 'rxjs';
import { AlfrescoApiService } from './alfresco-api.service';
import { LogService } from './log.service';
import { catchError, map } from 'rxjs/operators';
import { TaskActionsApi, UsersApi } from '@alfresco/js-api';
import * as i0 from "@angular/core";
import * as i1 from "./alfresco-api.service";
import * as i2 from "./log.service";
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './alfresco-api.service';
import * as ɵngcc2 from './log.service';
export class PeopleProcessService {
    constructor(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    get taskActionsApi() {
        var _a;
        this._taskActionsApi = (_a = this._taskActionsApi) !== null && _a !== void 0 ? _a : new TaskActionsApi(this.apiService.getInstance());
        return this._taskActionsApi;
    }
    get userApi() {
        var _a;
        this._userApi = (_a = this._userApi) !== null && _a !== void 0 ? _a : new UsersApi(this.apiService.getInstance());
        return this._userApi;
    }
    getWorkflowUsers(taskId, searchWord) {
        const option = { excludeTaskId: taskId, filter: searchWord };
        return from(this.getWorkflowUserApi(option))
            .pipe(map((response) => response.data || []), catchError((err) => this.handleError(err)));
    }
    getUserImage(user) {
        return this.getUserProfileImageApi(user.id.toString());
    }
    involveUserWithTask(taskId, idToInvolve) {
        const node = { userId: idToInvolve };
        return from(this.involveUserToTaskApi(taskId, node))
            .pipe(catchError((err) => this.handleError(err)));
    }
    removeInvolvedUser(taskId, idToRemove) {
        const node = { userId: idToRemove };
        return from(this.removeInvolvedUserFromTaskApi(taskId, node))
            .pipe(catchError((err) => this.handleError(err)));
    }
    getWorkflowUserApi(options) {
        return this.userApi.getUsers(options);
    }
    involveUserToTaskApi(taskId, node) {
        return this.taskActionsApi.involveUser(taskId, node);
    }
    removeInvolvedUserFromTaskApi(taskId, node) {
        return this.taskActionsApi.removeInvolvedUser(taskId, node);
    }
    getUserProfileImageApi(userId) {
        return this.userApi.getUserProfilePictureUrl(userId);
    }
    handleError(error) {
        this.logService.error(error);
        return throwError(error || 'Server error');
    }
}
PeopleProcessService.ɵfac = function PeopleProcessService_Factory(t) { return new (t || PeopleProcessService)(ɵngcc0.ɵɵinject(ɵngcc1.AlfrescoApiService), ɵngcc0.ɵɵinject(ɵngcc2.LogService)); };
PeopleProcessService.ɵprov = i0.ɵɵdefineInjectable({ factory: function PeopleProcessService_Factory() { return new PeopleProcessService(i0.ɵɵinject(i1.AlfrescoApiService), i0.ɵɵinject(i2.LogService)); }, token: PeopleProcessService, providedIn: "root" });
PeopleProcessService.ctorParameters = () => [
    { type: AlfrescoApiService },
    { type: LogService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PeopleProcessService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: ɵngcc1.AlfrescoApiService }, { type: ɵngcc2.LogService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVvcGxlLXByb2Nlc3Muc2VydmljZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vaG9tZS90cmF2aXMvYnVpbGQvQWxmcmVzY28vYWxmcmVzY28tbmcyLWNvbXBvbmVudHMvbGliL2NvcmUvc2VydmljZXMvcGVvcGxlLXByb2Nlc3Muc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQkEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQWMsSUFBSSxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUVwRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM1RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDakQsT0FBTyxFQUNILGNBQWMsRUFDZCxRQUFRLEVBRVgsTUFBTSxrQkFBa0IsQ0FBQztBQUMxQjtBQUVzQjtBQUlqQjs7OztBQUZMLE1BQU0sT0FBTyxvQkFBb0I7QUFDakMsSUFhSSxZQUFvQixVQUE4QixFQUM5QixVQUFzQjtBQUM5QyxRQUZ3QixlQUFVLEdBQVYsVUFBVSxDQUFvQjtBQUFDLFFBQy9CLGVBQVUsR0FBVixVQUFVLENBQVk7QUFBQyxJQUMzQyxDQUFDO0FBQ0wsSUFkSSxJQUFJLGNBQWM7QUFBSztBQUMzQixRQUFRLElBQUksQ0FBQyxlQUFlLFNBQUcsSUFBSSxDQUFDLGVBQWUsbUNBQUksSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0FBQ3pHLFFBQVEsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO0FBQ3BDLElBQUksQ0FBQztBQUNMLElBRUksSUFBSSxPQUFPO0FBQUs7QUFDZCxRQUFFLElBQUksQ0FBQyxRQUFRLFNBQUcsSUFBSSxD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K1BBL0ZLO0FBQUM7RUFITCxVQUFVLFNBQUMsckJBS0csWUFkTixrQkFBa0I7S0FVdkIsVUFBVSxFQUFFLE1BQU0sdkJBVlMsWUFDdEIsVUFBVTtBQUFHO1NBVXJCOzs7OztnSEFWdUI7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20sIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFVzZXJQcm9jZXNzTW9kZWwgfSBmcm9tICcuLi9tb2RlbHMvdXNlci1wcm9jZXNzLm1vZGVsJztcbmltcG9ydCB7IEFsZnJlc2NvQXBpU2VydmljZSB9IGZyb20gJy4vYWxmcmVzY28tYXBpLnNlcnZpY2UnO1xuaW1wb3J0IHsgTG9nU2VydmljZSB9IGZyb20gJy4vbG9nLnNlcnZpY2UnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtcbiAgICBUYXNrQWN0aW9uc0FwaSxcbiAgICBVc2Vyc0FwaSxcbiAgICBSZXN1bHRMaXN0RGF0YVJlcHJlc2VudGF0aW9uTGlnaHRVc2VyUmVwcmVzZW50YXRpb25cbn0gZnJvbSAnQGFsZnJlc2NvL2pzLWFwaSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgUGVvcGxlUHJvY2Vzc1NlcnZpY2Uge1xuXG4gICAgX3Rhc2tBY3Rpb25zQXBpOiBUYXNrQWN0aW9uc0FwaTtcbiAgICBnZXQgdGFza0FjdGlvbnNBcGkoKTogVGFza0FjdGlvbnNBcGkge1xuICAgICAgICB0aGlzLl90YXNrQWN0aW9uc0FwaSA9IHRoaXMuX3Rhc2tBY3Rpb25zQXBpID8/IG5ldyBUYXNrQWN0aW9uc0FwaSh0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQWN0aW9uc0FwaTtcbiAgICB9XG5cbiAgICBfdXNlckFwaTogVXNlcnNBcGk7XG4gICAgZ2V0IHVzZXJBcGkoKTogVXNlcnNBcGkge1xuICAgICAgICB0aGlzLl91c2VyQXBpID0gdGhpcy5fdXNlckFwaSA/PyBuZXcgVXNlcnNBcGkodGhpcy5hcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckFwaTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGxvZ1NlcnZpY2U6IExvZ1NlcnZpY2UpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IHVzZXJzIGFjcm9zcyBhbGwgdGFza3MuXG4gICAgICogQHBhcmFtIHRhc2tJZCBJRCBvZiB0aGUgdGFza1xuICAgICAqIEBwYXJhbSBzZWFyY2hXb3JkIEZpbHRlciB0ZXh0IHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiB1c2VyIGluZm9ybWF0aW9uIG9iamVjdHNcbiAgICAgKi9cbiAgICBnZXRXb3JrZmxvd1VzZXJzKHRhc2tJZD86IHN0cmluZywgc2VhcmNoV29yZD86IHN0cmluZyk6IE9ic2VydmFibGU8VXNlclByb2Nlc3NNb2RlbFtdPiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHsgZXhjbHVkZVRhc2tJZDogdGFza0lkLCBmaWx0ZXI6IHNlYXJjaFdvcmQgfTtcbiAgICAgICAgcmV0dXJuIGZyb20odGhpcy5nZXRXb3JrZmxvd1VzZXJBcGkob3B0aW9uKSlcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgICAgIG1hcCgocmVzcG9uc2U6IGFueSkgPT4gPFVzZXJQcm9jZXNzTW9kZWxbXT4gcmVzcG9uc2UuZGF0YSB8fCBbXSksXG4gICAgICAgICAgICAgICAgY2F0Y2hFcnJvcigoZXJyKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycikpXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHByb2ZpbGUgcGljdHVyZSBVUkwgZm9yIHRoZSBzcGVjaWZpZWQgdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciBUaGUgdGFyZ2V0IHVzZXJcbiAgICAgKiBAcmV0dXJucyBQcm9maWxlIHBpY3R1cmUgVVJMXG4gICAgICovXG4gICAgZ2V0VXNlckltYWdlKHVzZXI6IFVzZXJQcm9jZXNzTW9kZWwpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyUHJvZmlsZUltYWdlQXBpKHVzZXIuaWQudG9TdHJpbmcoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIHVzZXIgdG8gYmUgaW52b2x2ZWQgd2l0aCBhIHRhc2suXG4gICAgICogQHBhcmFtIHRhc2tJZCBJRCBvZiB0aGUgdGFyZ2V0IHRhc2tcbiAgICAgKiBAcGFyYW0gaWRUb0ludm9sdmUgSUQgb2YgdGhlIHVzZXIgdG8gaW52b2x2ZVxuICAgICAqIEByZXR1cm5zIEVtcHR5IHJlc3BvbnNlIHdoZW4gdGhlIHVwZGF0ZSBjb21wbGV0ZXNcbiAgICAgKi9cbiAgICBpbnZvbHZlVXNlcldpdGhUYXNrKHRhc2tJZDogc3RyaW5nLCBpZFRvSW52b2x2ZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxVc2VyUHJvY2Vzc01vZGVsW10+IHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHsgdXNlcklkOiBpZFRvSW52b2x2ZSB9O1xuICAgICAgICByZXR1cm4gZnJvbSh0aGlzLmludm9sdmVVc2VyVG9UYXNrQXBpKHRhc2tJZCwgbm9kZSkpXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgICAgICBjYXRjaEVycm9yKChlcnIpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSlcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHVzZXIgd2hvIGlzIGN1cnJlbnRseSBpbnZvbHZlZCB3aXRoIGEgdGFzay5cbiAgICAgKiBAcGFyYW0gdGFza0lkIElEIG9mIHRoZSB0YXJnZXQgdGFza1xuICAgICAqIEBwYXJhbSBpZFRvUmVtb3ZlIElEIG9mIHRoZSB1c2VyIHRvIHJlbW92ZVxuICAgICAqIEByZXR1cm5zIEVtcHR5IHJlc3BvbnNlIHdoZW4gdGhlIHVwZGF0ZSBjb21wbGV0ZXNcbiAgICAgKi9cbiAgICByZW1vdmVJbnZvbHZlZFVzZXIodGFza0lkOiBzdHJpbmcsIGlkVG9SZW1vdmU6IHN0cmluZyk6IE9ic2VydmFibGU8VXNlclByb2Nlc3NNb2RlbFtdPiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB7IHVzZXJJZDogaWRUb1JlbW92ZSB9O1xuICAgICAgICByZXR1cm4gZnJvbSh0aGlzLnJlbW92ZUludm9sdmVkVXNlckZyb21UYXNrQXBpKHRhc2tJZCwgbm9kZSkpXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgICAgICBjYXRjaEVycm9yKChlcnIpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSlcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRXb3JrZmxvd1VzZXJBcGkob3B0aW9uczogYW55KTogUHJvbWlzZTxSZXN1bHRMaXN0RGF0YVJlcHJlc2VudGF0aW9uTGlnaHRVc2VyUmVwcmVzZW50YXRpb24+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckFwaS5nZXRVc2VycyhvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGludm9sdmVVc2VyVG9UYXNrQXBpKHRhc2tJZDogc3RyaW5nLCBub2RlOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza0FjdGlvbnNBcGkuaW52b2x2ZVVzZXIodGFza0lkLCBub2RlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZUludm9sdmVkVXNlckZyb21UYXNrQXBpKHRhc2tJZDogc3RyaW5nLCBub2RlOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza0FjdGlvbnNBcGkucmVtb3ZlSW52b2x2ZWRVc2VyKHRhc2tJZCwgbm9kZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRVc2VyUHJvZmlsZUltYWdlQXBpKHVzZXJJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckFwaS5nZXRVc2VyUHJvZmlsZVBpY3R1cmVVcmwodXNlcklkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaHJvdyB0aGUgZXJyb3JcbiAgICAgKiBAcGFyYW0gZXJyb3JcbiAgICAgKi9cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiBhbnkpIHtcbiAgICAgICAgdGhpcy5sb2dTZXJ2aWNlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoZXJyb3IgfHwgJ1NlcnZlciBlcnJvcicpO1xuICAgIH1cbn1cbiJdfQ==