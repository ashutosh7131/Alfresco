/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { DecimalPipe } from '@angular/common';
import { Pipe } from '@angular/core';
import { AppConfigService } from '../app-config/app-config.service';
import { UserPreferencesService, UserPreferenceValues } from '../services/user-preferences.service';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '../services/user-preferences.service';
import * as ɵngcc2 from '../app-config/app-config.service';
export class DecimalNumberPipe {
    constructor(userPreferenceService, appConfig) {
        this.userPreferenceService = userPreferenceService;
        this.appConfig = appConfig;
        this.defaultLocale = DecimalNumberPipe.DEFAULT_LOCALE;
        this.defaultMinIntegerDigits = DecimalNumberPipe.DEFAULT_MIN_INTEGER_DIGITS;
        this.defaultMinFractionDigits = DecimalNumberPipe.DEFAULT_MIN_FRACTION_DIGITS;
        this.defaultMaxFractionDigits = DecimalNumberPipe.DEFAULT_MAX_FRACTION_DIGITS;
        this.onDestroy$ = new Subject();
        if (this.userPreferenceService) {
            this.userPreferenceService.select(UserPreferenceValues.Locale)
                .pipe(takeUntil(this.onDestroy$))
                .subscribe((locale) => {
                if (locale) {
                    this.defaultLocale = locale;
                }
            });
        }
        if (this.appConfig) {
            this.defaultMinIntegerDigits = this.appConfig.get('decimalValues.minIntegerDigits', DecimalNumberPipe.DEFAULT_MIN_INTEGER_DIGITS);
            this.defaultMinFractionDigits = this.appConfig.get('decimalValues.minFractionDigits', DecimalNumberPipe.DEFAULT_MIN_FRACTION_DIGITS);
            this.defaultMaxFractionDigits = this.appConfig.get('decimalValues.maxFractionDigits', DecimalNumberPipe.DEFAULT_MAX_FRACTION_DIGITS);
        }
    }
    transform(value, digitsInfo, locale) {
        const actualMinIntegerDigits = digitsInfo && digitsInfo.minIntegerDigits ? digitsInfo.minIntegerDigits : this.defaultMinIntegerDigits;
        const actualMinFractionDigits = digitsInfo && digitsInfo.minFractionDigits ? digitsInfo.minFractionDigits : this.defaultMinFractionDigits;
        const actualMaxFractionDigits = digitsInfo && digitsInfo.maxFractionDigits ? digitsInfo.maxFractionDigits : this.defaultMaxFractionDigits;
        const actualDigitsInfo = `${actualMinIntegerDigits}.${actualMinFractionDigits}-${actualMaxFractionDigits}`;
        const actualLocale = locale || this.defaultLocale;
        const decimalPipe = new DecimalPipe(actualLocale);
        return decimalPipe.transform(value, actualDigitsInfo);
    }
    ngOnDestroy() {
        this.onDestroy$.next(true);
        this.onDestroy$.complete();
    }
}
DecimalNumberPipe.ɵfac = function DecimalNumberPipe_Factory(t) { return new (t || DecimalNumberPipe)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.UserPreferencesService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AppConfigService)); };
DecimalNumberPipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: "adfDecimalNumber", type: DecimalNumberPipe, pure: false });
DecimalNumberPipe.DEFAULT_LOCALE = 'en-US';
DecimalNumberPipe.DEFAULT_MIN_INTEGER_DIGITS = 1;
DecimalNumberPipe.DEFAULT_MIN_FRACTION_DIGITS = 0;
DecimalNumberPipe.DEFAULT_MAX_FRACTION_DIGITS = 2;
DecimalNumberPipe.ctorParameters = () => [
    { type: UserPreferencesService },
    { type: AppConfigService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DecimalNumberPipe, [{
        type: Pipe,
        args: [{
                name: 'adfDecimalNumber',
                pure: false
            }]
    }], function () { return [{ type: ɵngcc1.UserPreferencesService }, { type: ɵngcc2.AppConfigService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjaW1hbC1udW1iZXIucGlwZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vaG9tZS90cmF2aXMvYnVpbGQvQWxmcmVzY28vYWxmcmVzY28tbmcyLWNvbXBvbmVudHMvbGliL2NvcmUvcGlwZXMvZGVjaW1hbC1udW1iZXIucGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBRUgsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxJQUFJLEVBQTRCLE1BQU0sZUFBZSxDQUFDO0FBQy9ELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBRXBHLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7O0FBTTNDLE1BQU0sT0FBTyxpQkFBaUI7QUFBRyxJQWM3QixZQUFtQixxQkFBOEMsRUFDOUMsU0FBNEI7QUFDbkQsUUFGdUIsMEJBQXFCLEdBQXJCLHFCQUFxQixDQUF5QjtBQUFDLFFBQy9DLGNBQVMsR0FBVCxTQUFTLENBQW1CO0FBQUMsUUFSaEQsa0JBQWEsR0FBVyxpQkFBaUIsQ0FBQyxjQUFjLENBQUM7QUFDN0QsUUFBSSw0QkFBdUIsR0FBVyxpQkFBaUIsQ0FBQywwQkFBMEIsQ0FBQztBQUNuRixRQUFJLDZCQUF3QixHQUFXLGlCQUFpQixDQUFDLDJCQUEyQixDQUFDO0FBQ3JGLFFBQUksNkJBQXdCLEdBQVcsaUJBQWlCLENBQUMsMkJBQTJCLENBQUM7QUFDckYsUUFDSSxlQUFVLEdBQXFCLElB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Y2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBEZWNpbWFsUGlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFwcENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi9hcHAtY29uZmlnL2FwcC1jb25maWcuc2VydmljZSc7XG5pbXBvcnQgeyBVc2VyUHJlZmVyZW5jZXNTZXJ2aWNlLCBVc2VyUHJlZmVyZW5jZVZhbHVlcyB9IGZyb20gJy4uL3NlcnZpY2VzL3VzZXItcHJlZmVyZW5jZXMuc2VydmljZSc7XG5pbXBvcnQgeyBEZWNpbWFsTnVtYmVyTW9kZWwgfSBmcm9tICcuLi9tb2RlbHMvZGVjaW1hbC1udW1iZXIubW9kZWwnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AUGlwZSh7XG4gICAgbmFtZTogJ2FkZkRlY2ltYWxOdW1iZXInLFxuICAgIHB1cmU6IGZhbHNlXG59KVxuZXhwb3J0IGNsYXNzIERlY2ltYWxOdW1iZXJQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSwgT25EZXN0cm95IHtcblxuICAgIHN0YXRpYyBERUZBVUxUX0xPQ0FMRSA9ICdlbi1VUyc7XG4gICAgc3RhdGljIERFRkFVTFRfTUlOX0lOVEVHRVJfRElHSVRTID0gMTtcbiAgICBzdGF0aWMgREVGQVVMVF9NSU5fRlJBQ1RJT05fRElHSVRTID0gMDtcbiAgICBzdGF0aWMgREVGQVVMVF9NQVhfRlJBQ1RJT05fRElHSVRTID0gMjtcblxuICAgIGRlZmF1bHRMb2NhbGU6IHN0cmluZyA9IERlY2ltYWxOdW1iZXJQaXBlLkRFRkFVTFRfTE9DQUxFO1xuICAgIGRlZmF1bHRNaW5JbnRlZ2VyRGlnaXRzOiBudW1iZXIgPSBEZWNpbWFsTnVtYmVyUGlwZS5ERUZBVUxUX01JTl9JTlRFR0VSX0RJR0lUUztcbiAgICBkZWZhdWx0TWluRnJhY3Rpb25EaWdpdHM6IG51bWJlciA9IERlY2ltYWxOdW1iZXJQaXBlLkRFRkFVTFRfTUlOX0ZSQUNUSU9OX0RJR0lUUztcbiAgICBkZWZhdWx0TWF4RnJhY3Rpb25EaWdpdHM6IG51bWJlciA9IERlY2ltYWxOdW1iZXJQaXBlLkRFRkFVTFRfTUFYX0ZSQUNUSU9OX0RJR0lUUztcblxuICAgIG9uRGVzdHJveSQ6IFN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIHVzZXJQcmVmZXJlbmNlU2VydmljZT86IFVzZXJQcmVmZXJlbmNlc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHVibGljIGFwcENvbmZpZz86IEFwcENvbmZpZ1NlcnZpY2UpIHtcblxuICAgICAgICBpZiAodGhpcy51c2VyUHJlZmVyZW5jZVNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMudXNlclByZWZlcmVuY2VTZXJ2aWNlLnNlbGVjdChVc2VyUHJlZmVyZW5jZVZhbHVlcy5Mb2NhbGUpXG4gICAgICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgICAgIHRha2VVbnRpbCh0aGlzLm9uRGVzdHJveSQpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKGxvY2FsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRMb2NhbGUgPSBsb2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmFwcENvbmZpZykge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0TWluSW50ZWdlckRpZ2l0cyA9IHRoaXMuYXBwQ29uZmlnLmdldDxudW1iZXI+KCdkZWNpbWFsVmFsdWVzLm1pbkludGVnZXJEaWdpdHMnLCBEZWNpbWFsTnVtYmVyUGlwZS5ERUZBVUxUX01JTl9JTlRFR0VSX0RJR0lUUyk7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRNaW5GcmFjdGlvbkRpZ2l0cyA9IHRoaXMuYXBwQ29uZmlnLmdldDxudW1iZXI+KCdkZWNpbWFsVmFsdWVzLm1pbkZyYWN0aW9uRGlnaXRzJywgRGVjaW1hbE51bWJlclBpcGUuREVGQVVMVF9NSU5fRlJBQ1RJT05fRElHSVRTKTtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1heEZyYWN0aW9uRGlnaXRzID0gdGhpcy5hcHBDb25maWcuZ2V0PG51bWJlcj4oJ2RlY2ltYWxWYWx1ZXMubWF4RnJhY3Rpb25EaWdpdHMnLCBEZWNpbWFsTnVtYmVyUGlwZS5ERUZBVUxUX01BWF9GUkFDVElPTl9ESUdJVFMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdHJhbnNmb3JtKHZhbHVlOiBhbnksIGRpZ2l0c0luZm8/OiBEZWNpbWFsTnVtYmVyTW9kZWwsIGxvY2FsZT86IHN0cmluZyk6IGFueSB7XG4gICAgICAgIGNvbnN0IGFjdHVhbE1pbkludGVnZXJEaWdpdHM6IG51bWJlciA9IGRpZ2l0c0luZm8gJiYgZGlnaXRzSW5mby5taW5JbnRlZ2VyRGlnaXRzID8gZGlnaXRzSW5mby5taW5JbnRlZ2VyRGlnaXRzIDogdGhpcy5kZWZhdWx0TWluSW50ZWdlckRpZ2l0cztcbiAgICAgICAgY29uc3QgYWN0dWFsTWluRnJhY3Rpb25EaWdpdHM6IG51bWJlciA9IGRpZ2l0c0luZm8gJiYgZGlnaXRzSW5mby5taW5GcmFjdGlvbkRpZ2l0cyA/IGRpZ2l0c0luZm8ubWluRnJhY3Rpb25EaWdpdHMgOiB0aGlzLmRlZmF1bHRNaW5GcmFjdGlvbkRpZ2l0cztcbiAgICAgICAgY29uc3QgYWN0dWFsTWF4RnJhY3Rpb25EaWdpdHM6IG51bWJlciA9IGRpZ2l0c0luZm8gJiYgZGlnaXRzSW5mby5tYXhGcmFjdGlvbkRpZ2l0cyA/IGRpZ2l0c0luZm8ubWF4RnJhY3Rpb25EaWdpdHMgOiB0aGlzLmRlZmF1bHRNYXhGcmFjdGlvbkRpZ2l0cztcblxuICAgICAgICBjb25zdCBhY3R1YWxEaWdpdHNJbmZvID0gYCR7YWN0dWFsTWluSW50ZWdlckRpZ2l0c30uJHthY3R1YWxNaW5GcmFjdGlvbkRpZ2l0c30tJHthY3R1YWxNYXhGcmFjdGlvbkRpZ2l0c31gO1xuICAgICAgICBjb25zdCBhY3R1YWxMb2NhbGUgPSBsb2NhbGUgfHwgdGhpcy5kZWZhdWx0TG9jYWxlO1xuXG4gICAgICAgIGNvbnN0IGRlY2ltYWxQaXBlOiBEZWNpbWFsUGlwZSA9IG5ldyBEZWNpbWFsUGlwZShhY3R1YWxMb2NhbGUpO1xuICAgICAgICByZXR1cm4gZGVjaW1hbFBpcGUudHJhbnNmb3JtKHZhbHVlLCBhY3R1YWxEaWdpdHNJbmZvKTtcbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vbkRlc3Ryb3kkLm5leHQodHJ1ZSk7XG4gICAgICAgIHRoaXMub25EZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH1cbn1cbiJdfQ==