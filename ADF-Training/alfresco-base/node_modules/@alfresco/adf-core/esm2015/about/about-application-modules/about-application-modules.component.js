/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Component, Input, ViewEncapsulation } from '@angular/core';
import { ObjectDataTableAdapter } from '../../datatable/data/object-datatable-adapter';
import { AppExtensionService } from '@alfresco/adf-extensions';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@alfresco/adf-extensions';
import * as ɵngcc2 from '../../datatable/components/datatable/datatable.component';
import * as ɵngcc3 from '@angular/common';
import * as ɵngcc4 from '@angular/material/table';
import * as ɵngcc5 from '@ngx-translate/core';

function AboutApplicationModulesComponent_div_8_mat_header_cell_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-header-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, "ABOUT.EXTENSIONS.TABLE_HEADERS.ID"));
} }
function AboutApplicationModulesComponent_div_8_mat_cell_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const element_r17 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(element_r17.$id);
} }
function AboutApplicationModulesComponent_div_8_mat_header_cell_9_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-header-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, "ABOUT.EXTENSIONS.TABLE_HEADERS.NAME"));
} }
function AboutApplicationModulesComponent_div_8_mat_cell_10_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const element_r18 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(element_r18.$name);
} }
function AboutApplicationModulesComponent_div_8_mat_header_cell_12_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-header-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, "ABOUT.EXTENSIONS.TABLE_HEADERS.VERSION"));
} }
function AboutApplicationModulesComponent_div_8_mat_cell_13_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const element_r19 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(element_r19.$version);
} }
function AboutApplicationModulesComponent_div_8_mat_header_cell_15_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-header-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, "ABOUT.EXTENSIONS.TABLE_HEADERS.VENDOR"));
} }
function AboutApplicationModulesComponent_div_8_mat_cell_16_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const element_r20 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(element_r20.$vendor);
} }
function AboutApplicationModulesComponent_div_8_mat_header_cell_18_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-header-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, "ABOUT.EXTENSIONS.TABLE_HEADERS.LICENSE"));
} }
function AboutApplicationModulesComponent_div_8_mat_cell_19_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const element_r21 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(element_r21.$license);
} }
function AboutApplicationModulesComponent_div_8_mat_header_cell_21_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-header-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, "ABOUT.EXTENSIONS.TABLE_HEADERS.RUNTIME"));
} }
function AboutApplicationModulesComponent_div_8_mat_cell_22_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const element_r22 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(element_r22.$runtime);
} }
function AboutApplicationModulesComponent_div_8_mat_header_cell_24_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-header-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, "ABOUT.EXTENSIONS.TABLE_HEADERS.DESCRIPTION"));
} }
function AboutApplicationModulesComponent_div_8_mat_cell_25_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-cell");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const element_r23 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(element_r23.$description);
} }
function AboutApplicationModulesComponent_div_8_mat_header_row_26_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "mat-header-row");
} }
function AboutApplicationModulesComponent_div_8_mat_row_27_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "mat-row");
} }
function AboutApplicationModulesComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 4);
    ɵngcc0.ɵɵelementStart(1, "h3");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵpipe(3, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(4, "mat-table", 5);
    ɵngcc0.ɵɵelementContainerStart(5, 6);
    ɵngcc0.ɵɵtemplate(6, AboutApplicationModulesComponent_div_8_mat_header_cell_6_Template, 3, 3, "mat-header-cell", 7);
    ɵngcc0.ɵɵtemplate(7, AboutApplicationModulesComponent_div_8_mat_cell_7_Template, 2, 1, "mat-cell", 8);
    ɵngcc0.ɵɵelementContainerEnd();
    ɵngcc0.ɵɵelementContainerStart(8, 9);
    ɵngcc0.ɵɵtemplate(9, AboutApplicationModulesComponent_div_8_mat_header_cell_9_Template, 3, 3, "mat-header-cell", 7);
    ɵngcc0.ɵɵtemplate(10, AboutApplicationModulesComponent_div_8_mat_cell_10_Template, 2, 1, "mat-cell", 8);
    ɵngcc0.ɵɵelementContainerEnd();
    ɵngcc0.ɵɵelementContainerStart(11, 10);
    ɵngcc0.ɵɵtemplate(12, AboutApplicationModulesComponent_div_8_mat_header_cell_12_Template, 3, 3, "mat-header-cell", 7);
    ɵngcc0.ɵɵtemplate(13, AboutApplicationModulesComponent_div_8_mat_cell_13_Template, 2, 1, "mat-cell", 8);
    ɵngcc0.ɵɵelementContainerEnd();
    ɵngcc0.ɵɵelementContainerStart(14, 11);
    ɵngcc0.ɵɵtemplate(15, AboutApplicationModulesComponent_div_8_mat_header_cell_15_Template, 3, 3, "mat-header-cell", 7);
    ɵngcc0.ɵɵtemplate(16, AboutApplicationModulesComponent_div_8_mat_cell_16_Template, 2, 1, "mat-cell", 8);
    ɵngcc0.ɵɵelementContainerEnd();
    ɵngcc0.ɵɵelementContainerStart(17, 12);
    ɵngcc0.ɵɵtemplate(18, AboutApplicationModulesComponent_div_8_mat_header_cell_18_Template, 3, 3, "mat-header-cell", 7);
    ɵngcc0.ɵɵtemplate(19, AboutApplicationModulesComponent_div_8_mat_cell_19_Template, 2, 1, "mat-cell", 8);
    ɵngcc0.ɵɵelementContainerEnd();
    ɵngcc0.ɵɵelementContainerStart(20, 13);
    ɵngcc0.ɵɵtemplate(21, AboutApplicationModulesComponent_div_8_mat_header_cell_21_Template, 3, 3, "mat-header-cell", 7);
    ɵngcc0.ɵɵtemplate(22, AboutApplicationModulesComponent_div_8_mat_cell_22_Template, 2, 1, "mat-cell", 8);
    ɵngcc0.ɵɵelementContainerEnd();
    ɵngcc0.ɵɵelementContainerStart(23, 14);
    ɵngcc0.ɵɵtemplate(24, AboutApplicationModulesComponent_div_8_mat_header_cell_24_Template, 3, 3, "mat-header-cell", 7);
    ɵngcc0.ɵɵtemplate(25, AboutApplicationModulesComponent_div_8_mat_cell_25_Template, 2, 1, "mat-cell", 8);
    ɵngcc0.ɵɵelementContainerEnd();
    ɵngcc0.ɵɵtemplate(26, AboutApplicationModulesComponent_div_8_mat_header_row_26_Template, 1, 0, "mat-header-row", 15);
    ɵngcc0.ɵɵtemplate(27, AboutApplicationModulesComponent_div_8_mat_row_27_Template, 1, 0, "mat-row", 16);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 4, "ABOUT.EXTENSIONS.TITLE"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("dataSource", ctx_r0.extensions);
    ɵngcc0.ɵɵadvance(22);
    ɵngcc0.ɵɵproperty("matHeaderRowDef", ctx_r0.extensionColumns);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("matRowDefColumns", ctx_r0.extensionColumns);
} }
export class AboutApplicationModulesComponent {
    constructor(appExtensions) {
        this.appExtensions = appExtensions;
        this.extensionColumns = ['$id', '$name', '$version', '$vendor', '$license', '$runtime', '$description'];
        this.showExtensions = true;
        this.regexp = '^(@alfresco)';
        this.onDestroy$ = new Subject();
    }
    ngOnInit() {
        const alfrescoPackages = Object.keys(this.dependencies).filter((val) => {
            return new RegExp(this.regexp).test(val);
        });
        const alfrescoPackagesTableRepresentation = [];
        alfrescoPackages.forEach((val) => {
            alfrescoPackagesTableRepresentation.push({
                name: val,
                version: (this.dependencies[val])
            });
        });
        this.dependencyEntries = new ObjectDataTableAdapter(alfrescoPackagesTableRepresentation, [
            { type: 'text', key: 'name', title: 'Name', sortable: true },
            { type: 'text', key: 'version', title: 'Version', sortable: true }
        ]);
        this.appExtensions.references$
            .pipe(takeUntil(this.onDestroy$))
            .subscribe((extensions) => this.extensions = extensions);
    }
    ngOnDestroy() {
        this.onDestroy$.next(true);
        this.onDestroy$.complete();
    }
}
AboutApplicationModulesComponent.ɵfac = function AboutApplicationModulesComponent_Factory(t) { return new (t || AboutApplicationModulesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.AppExtensionService)); };
AboutApplicationModulesComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AboutApplicationModulesComponent, selectors: [["adf-about-application-modules"]], inputs: { showExtensions: "showExtensions", regexp: "regexp", dependencies: "dependencies" }, decls: 9, vars: 8, consts: [[1, "adf-about-modules-container"], ["data-automation-id", "adf-about-modules-title"], [3, "data"], ["class", "adf-extension-details-container", 4, "ngIf"], [1, "adf-extension-details-container"], [3, "dataSource"], ["matColumnDef", "$id"], [4, "matHeaderCellDef"], [4, "matCellDef"], ["matColumnDef", "$name"], ["matColumnDef", "$version"], ["matColumnDef", "$vendor"], ["matColumnDef", "$license"], ["matColumnDef", "$runtime"], ["matColumnDef", "$description"], [4, "matHeaderRowDef"], [4, "matRowDef", "matRowDefColumns"]], template: function AboutApplicationModulesComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "h3", 1);
        ɵngcc0.ɵɵtext(2);
        ɵngcc0.ɵɵpipe(3, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(4, "small");
        ɵngcc0.ɵɵtext(5);
        ɵngcc0.ɵɵpipe(6, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(7, "adf-datatable", 2);
        ɵngcc0.ɵɵtemplate(8, AboutApplicationModulesComponent_div_8_Template, 28, 6, "div", 3);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 4, "ABOUT.PACKAGES.TITLE"));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 6, "ABOUT.PACKAGES.DESCRIPTION"));
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("data", ctx.dependencyEntries);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showExtensions && ctx.extensions.length);
    } }, directives: [ɵngcc2.DataTableComponent, ɵngcc3.NgIf, ɵngcc4.MatTable, ɵngcc4.MatColumnDef, ɵngcc4.MatHeaderCellDef, ɵngcc4.MatCellDef, ɵngcc4.MatHeaderRowDef, ɵngcc4.MatRowDef, ɵngcc4.MatHeaderCell, ɵngcc4.MatCell, ɵngcc4.MatHeaderRow, ɵngcc4.MatRow], pipes: [ɵngcc5.TranslatePipe], encapsulation: 2 });
AboutApplicationModulesComponent.ctorParameters = () => [
    { type: AppExtensionService }
];
AboutApplicationModulesComponent.propDecorators = {
    showExtensions: [{ type: Input }],
    regexp: [{ type: Input }],
    dependencies: [{ type: Input }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AboutApplicationModulesComponent, [{
        type: Component,
        args: [{
                selector: 'adf-about-application-modules',
                template: "<div class=\"adf-about-modules-container\">\n    <h3 data-automation-id=\"adf-about-modules-title\">{{ 'ABOUT.PACKAGES.TITLE' | translate }}</h3>\n    <small>{{ 'ABOUT.PACKAGES.DESCRIPTION' | translate }}</small>\n    <adf-datatable [data]=\"dependencyEntries\"></adf-datatable>\n\n    <div class=\"adf-extension-details-container\" *ngIf=\"showExtensions && extensions.length\">\n        <h3>{{ 'ABOUT.EXTENSIONS.TITLE' | translate }}</h3>\n        <mat-table [dataSource]=\"extensions\">\n            <!-- $id Column -->\n            <ng-container matColumnDef=\"$id\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.ID' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$id}}</mat-cell>\n            </ng-container>\n\n            <!-- $name Column -->\n            <ng-container matColumnDef=\"$name\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.NAME' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$name}}</mat-cell>\n            </ng-container>\n\n            <!-- $version Column -->\n            <ng-container matColumnDef=\"$version\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.VERSION' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$version}}</mat-cell>\n            </ng-container>\n\n            <!-- $vendor Column -->\n            <ng-container matColumnDef=\"$vendor\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.VENDOR' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$vendor}}</mat-cell>\n            </ng-container>\n\n            <!-- $license Column -->\n            <ng-container matColumnDef=\"$license\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.LICENSE' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$license}}</mat-cell>\n            </ng-container>\n\n            <!-- $runtime Column -->\n            <ng-container matColumnDef=\"$runtime\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.RUNTIME' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$runtime}}</mat-cell>\n            </ng-container>\n\n            <!-- $description Column -->\n            <ng-container matColumnDef=\"$description\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.DESCRIPTION' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$description}}</mat-cell>\n            </ng-container>\n\n            <mat-header-row *matHeaderRowDef=\"extensionColumns\"></mat-header-row>\n            <mat-row *matRowDef=\"let row; columns: extensionColumns;\"></mat-row>\n        </mat-table>\n    </div>\n</div>\n",
                encapsulation: ViewEncapsulation.None
            }]
    }], function () { return [{ type: ɵngcc1.AppExtensionService }]; }, { showExtensions: [{
            type: Input
        }], regexp: [{
            type: Input
        }], dependencies: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJvdXQtYXBwbGljYXRpb24tbW9kdWxlcy5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2hvbWUvdHJhdmlzL2J1aWxkL0FsZnJlc2NvL2FsZnJlc2NvLW5nMi1jb21wb25lbnRzL2xpYi9jb3JlL2Fib3V0L2Fib3V0LWFwcGxpY2F0aW9uLW1vZHVsZXMvYWJvdXQtYXBwbGljYXRpb24tbW9kdWxlcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUVILE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFxQixpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUN2RixPQUFPLEVBQUUsbUJBQW1CLEVBQWdCLE1BQU0sMEJBQTBCLENBQUM7QUFDN0UsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPM0MsTUFBTSxPQUFPLGdDQUFnQztBQUFHLElBbUI1QyxZQUFvQixhQUFrQztBQUMxRCxRQUR3QixrQkFBYSxHQUFiLGFBQWEsQ0FBcUI7QUFBQyxRQWpCdkQscUJBQWdCLEdBQWEsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUNqSCxRQU1JLG1CQUFjLEdBQUcsSUFBSSxDQUFDO0FBQzFCLFFBRWEsV0FBTSxHQUFHLGNBQWMsQ0FBQztBQUNyQyxRQUlZLGVBQVUsR0FBRyxJQUFJLE9BQU8sRUFBVyxDQUFDO0FBQ2hELElBRUksQ0FBQztBQUNMLElBQ0ksUUFBUTtBQUNaLFFBQVEsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtBQUMvRSxZQUFZLE9BQU8sSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyRCxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ1gsUUFDUSxNQUFNLG1DQUFtQyxHQUFHLEVBQUUsQ0FBQztBQUN2RCxRQUFRLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO0FBQ3pDLFlBQVksbUNBQW1DLENBQUMsSUFBSSxDQUFDO0FBQ3JELGdCQUFnQixJQUFJLEVBQUUsR0FBRztBQUN6QixnQkFBZ0IsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNqRCxhQUFhLENBQUMsQ0FBQztBQUNmLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDWCxRQUNRLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLHNCQUFzQixDQUFDLG1DQUFtQyxFQUFFO0FBQ2pHLFlBQVksRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO0FBQ3hFLFlBQVksRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO0FBQzlFLFNBQVMsQ0FBQyxDQUFDO0FBQ1gsUUFDUSxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVc7QUFDdEMsYUFBYSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM3QyxhQUFhLFNBQVMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsQ0FBQztBQUNyRSxJQUFJLENBQUM7QUFDTCxJQUNJLFdBQVc7QUFDZixRQUFRLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ25DLFFBQVEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztBQUNuQyxJQUFJLENBQUM7QUFDTDs0REF0REMsU0FBUyxTQUFDLGtCQUNQLFFBQVEsRUFBRSwrQkFBK0Isa0JBQ3pDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3VEFHQztBQUFDO0FBQTBELFlBVHZELG1CQUFtQjtBQUFHO0FBQUc7QUFDMUIsNkJBZ0JILEtBQUs7QUFDUixxQkFHRyxLQUFLO0FBQUssMkJBR1YsS0FBSztBQUFJOzs7Ozt1akJBbEIrQyxrQkFDekQsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUksY0FDeEM7Ozs7Ozs7OztvQkFnQmU7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0LCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JqZWN0RGF0YVRhYmxlQWRhcHRlciB9IGZyb20gJy4uLy4uL2RhdGF0YWJsZS9kYXRhL29iamVjdC1kYXRhdGFibGUtYWRhcHRlcic7XG5pbXBvcnQgeyBBcHBFeHRlbnNpb25TZXJ2aWNlLCBFeHRlbnNpb25SZWYgfSBmcm9tICdAYWxmcmVzY28vYWRmLWV4dGVuc2lvbnMnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1hYm91dC1hcHBsaWNhdGlvbi1tb2R1bGVzJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYWJvdXQtYXBwbGljYXRpb24tbW9kdWxlcy5jb21wb25lbnQuaHRtbCcsXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBBYm91dEFwcGxpY2F0aW9uTW9kdWxlc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcblxuICAgIGV4dGVuc2lvbkNvbHVtbnM6IHN0cmluZ1tdID0gWyckaWQnLCAnJG5hbWUnLCAnJHZlcnNpb24nLCAnJHZlbmRvcicsICckbGljZW5zZScsICckcnVudGltZScsICckZGVzY3JpcHRpb24nXTtcblxuICAgIGRlcGVuZGVuY3lFbnRyaWVzOiBPYmplY3REYXRhVGFibGVBZGFwdGVyO1xuICAgIGV4dGVuc2lvbnM6IEV4dGVuc2lvblJlZltdO1xuXG4gICAgLyoqIFRvZ2dsZXMgc2hvd2luZy9oaWRpbmcgb2YgZXh0ZW5zaW9ucyBibG9jay4gKi9cbiAgICBASW5wdXQoKVxuICAgIHNob3dFeHRlbnNpb25zID0gdHJ1ZTtcblxuICAgIC8qKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIGZpbHRlcmluZyBkZXBlbmRlbmNpZXMgcGFja2FnZXMuICovXG4gICAgQElucHV0KCkgcmVnZXhwID0gJ14oQGFsZnJlc2NvKSc7XG5cbiAgICAvKiogQ3VycmVudCB2ZXJzaW9uIG9mIHRoZSBhcHAgcnVubmluZyAqL1xuICAgIEBJbnB1dCgpIGRlcGVuZGVuY2llczogYW55O1xuXG4gICAgcHJpdmF0ZSBvbkRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwRXh0ZW5zaW9uczogQXBwRXh0ZW5zaW9uU2VydmljZSkge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCBhbGZyZXNjb1BhY2thZ2VzID0gT2JqZWN0LmtleXModGhpcy5kZXBlbmRlbmNpZXMpLmZpbHRlcigodmFsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCh0aGlzLnJlZ2V4cCkudGVzdCh2YWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhbGZyZXNjb1BhY2thZ2VzVGFibGVSZXByZXNlbnRhdGlvbiA9IFtdO1xuICAgICAgICBhbGZyZXNjb1BhY2thZ2VzLmZvckVhY2goKHZhbCkgPT4ge1xuICAgICAgICAgICAgYWxmcmVzY29QYWNrYWdlc1RhYmxlUmVwcmVzZW50YXRpb24ucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogdmFsLFxuICAgICAgICAgICAgICAgIHZlcnNpb246ICh0aGlzLmRlcGVuZGVuY2llc1t2YWxdKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZGVwZW5kZW5jeUVudHJpZXMgPSBuZXcgT2JqZWN0RGF0YVRhYmxlQWRhcHRlcihhbGZyZXNjb1BhY2thZ2VzVGFibGVSZXByZXNlbnRhdGlvbiwgW1xuICAgICAgICAgICAgeyB0eXBlOiAndGV4dCcsIGtleTogJ25hbWUnLCB0aXRsZTogJ05hbWUnLCBzb3J0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgeyB0eXBlOiAndGV4dCcsIGtleTogJ3ZlcnNpb24nLCB0aXRsZTogJ1ZlcnNpb24nLCBzb3J0YWJsZTogdHJ1ZSB9XG4gICAgICAgIF0pO1xuXG4gICAgICAgIHRoaXMuYXBwRXh0ZW5zaW9ucy5yZWZlcmVuY2VzJFxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMub25EZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChleHRlbnNpb25zKSA9PiB0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zKTtcbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5vbkRlc3Ryb3kkLm5leHQodHJ1ZSk7XG4gICAgICAgIHRoaXMub25EZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH1cbn1cbiJdfQ==