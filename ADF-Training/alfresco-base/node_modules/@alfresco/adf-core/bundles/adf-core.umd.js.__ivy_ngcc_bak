(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/material/core'), require('moment'), require('moment-es6'), require('rxjs'), require('@alfresco/js-api'), require('@angular/common/http'), require('rxjs/operators'), require('@alfresco/adf-extensions'), require('@angular/common'), require('@ngx-translate/core'), require('@mat-datetimepicker/core'), require('@angular/material/autocomplete'), require('@angular/material/button'), require('@angular/material/card'), require('@angular/material/checkbox'), require('@angular/material/chips'), require('@angular/material/datepicker'), require('@angular/material/dialog'), require('@angular/material/expansion'), require('@angular/material/grid-list'), require('@angular/material/icon'), require('@angular/material/input'), require('@angular/material/list'), require('@angular/material/menu'), require('@angular/material/progress-bar'), require('@angular/material/progress-spinner'), require('@angular/material/radio'), require('@angular/material/select'), require('@angular/material/sidenav'), require('@angular/material/slide-toggle'), require('@angular/material/snack-bar'), require('@angular/material/table'), require('@angular/material/tabs'), require('@angular/material/toolbar'), require('@angular/material/tooltip'), require('@angular/material/badge'), require('@angular/router'), require('@angular/cdk/overlay'), require('@angular/cdk/portal'), require('@angular/animations'), require('@angular/cdk/keycodes'), require('@angular/cdk/a11y'), require('@angular/platform-browser'), require('minimatch'), require('cropperjs'), require('@angular/forms'), require('@angular/flex-layout'), require('@mat-datetimepicker/moment'), require('@angular/cdk/layout'), require('@angular/core/testing'), require('@angular/platform-browser/animations'), require('@angular/router/testing'), require('@angular/cdk/bidi')) :
    typeof define === 'function' && define.amd ? define('@alfresco/adf-core', ['exports', '@angular/core', '@angular/material/core', 'moment', 'moment-es6', 'rxjs', '@alfresco/js-api', '@angular/common/http', 'rxjs/operators', '@alfresco/adf-extensions', '@angular/common', '@ngx-translate/core', '@mat-datetimepicker/core', '@angular/material/autocomplete', '@angular/material/button', '@angular/material/card', '@angular/material/checkbox', '@angular/material/chips', '@angular/material/datepicker', '@angular/material/dialog', '@angular/material/expansion', '@angular/material/grid-list', '@angular/material/icon', '@angular/material/input', '@angular/material/list', '@angular/material/menu', '@angular/material/progress-bar', '@angular/material/progress-spinner', '@angular/material/radio', '@angular/material/select', '@angular/material/sidenav', '@angular/material/slide-toggle', '@angular/material/snack-bar', '@angular/material/table', '@angular/material/tabs', '@angular/material/toolbar', '@angular/material/tooltip', '@angular/material/badge', '@angular/router', '@angular/cdk/overlay', '@angular/cdk/portal', '@angular/animations', '@angular/cdk/keycodes', '@angular/cdk/a11y', '@angular/platform-browser', 'minimatch', 'cropperjs', '@angular/forms', '@angular/flex-layout', '@mat-datetimepicker/moment', '@angular/cdk/layout', '@angular/core/testing', '@angular/platform-browser/animations', '@angular/router/testing', '@angular/cdk/bidi'], factory) :
    (global = global || self, factory((global.alfresco = global.alfresco || {}, global.alfresco['adf-core'] = {}), global.ng.core, global.ng.material.core, global.moment, global['moment-es6'], global.rxjs, global['@alfresco/js-api'], global.ng.common.http, global.rxjs.operators, global['@alfresco/adf-extensions'], global.ng.common, global['@ngx-translate/core'], global['@mat-datetimepicker/core'], global.ng.material.autocomplete, global.ng.material.button, global.ng.material.card, global.ng.material.checkbox, global.ng.material.chips, global.ng.material.datepicker, global.ng.material.dialog, global.ng.material.expansion, global.ng.material.gridList, global.ng.material.icon, global.ng.material.input, global.ng.material.list, global.ng.material.menu, global.ng.material.progressBar, global.ng.material.progressSpinner, global.ng.material.radio, global.ng.material.select, global.ng.material.sidenav, global.ng.material.slideToggle, global.ng.material.snackBar, global.ng.material.table, global.ng.material.tabs, global.ng.material.toolbar, global.ng.material.tooltip, global.ng.material.badge, global.ng.router, global.ng.cdk.overlay, global.ng.cdk.portal, global.ng.animations, global.ng.cdk.keycodes, global.ng.cdk.a11y, global.ng.platformBrowser, global['minimatch-browser'], global.cropperjs, global.ng.forms, global.ng.flexLayout, global['@mat-datetimepicker/moment'], global.ng.cdk.layout, global.ng.core.testing, global.ng.platformBrowser.animations, global.ng.router.testing, global.ng.cdk.bidi));
}(this, (function (exports, i0, core, moment, moment$1, rxjs, jsApi, i1, operators, i2, i1$1, i1$2, core$1, autocomplete, button, card, checkbox, chips, datepicker, i4, expansion, gridList, i2$1, input, list, menu, progressBar, progressSpinner, radio, select, sidenav, slideToggle, i1$3, table, tabs, toolbar, tooltip, badge, i2$2, i1$4, portal, animations, keycodes, a11y, i3, minimatch, Cropper, forms, flexLayout, moment$2, layout, testing, animations$1, testing$1, i3$1) { 'use strict';

    moment$1 = moment$1 && Object.prototype.hasOwnProperty.call(moment$1, 'default') ? moment$1['default'] : moment$1;
    Cropper = Cropper && Object.prototype.hasOwnProperty.call(Cropper, 'default') ? Cropper['default'] : Cropper;

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AboutGithubLinkComponent = /** @class */ (function () {
        function AboutGithubLinkComponent() {
            this.url = 'https://github.com/Alfresco/alfresco-ng2-components/commits/';
            this.version = '';
            this.application = '';
        }
        return AboutGithubLinkComponent;
    }());
    AboutGithubLinkComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-about-github-link',
                    template: "<div class=\"adf-github-link-container\">\n    <div>\n        <h3 data-automation-id=\"adf-github-source-code-title\">{{ 'ABOUT.SOURCE_CODE.TITLE' | translate }}</h3>\n        <mat-card>\n            <h3 data-automation-id=\"adf-github-app-title\">{{application}}</h3>\n            <p *ngIf=\"version\" data-automation-id=\"adf-github-version\">{{ 'ABOUT.VERSION' | translate }}: {{ version }}</p>\n\n            <div *ngIf=\"url\">\n                <small>{{ 'ABOUT.SOURCE_CODE.DESCRIPTION' | translate }}</small>\n                <div data-automation-id=\"adf-github-url\">\n                    <a [href]=\"url\" target=\"_blank\">{{url}}</a>\n                </div>\n            </div>\n        </mat-card>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    AboutGithubLinkComponent.ctorParameters = function () { return []; };
    AboutGithubLinkComponent.propDecorators = {
        url: [{ type: i0.Input }],
        version: [{ type: i0.Input }],
        application: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ObjectUtils = /** @class */ (function () {
        function ObjectUtils() {
        }
        ObjectUtils.getValue = function (target, key) {
            if (!target) {
                return undefined;
            }
            var keys = key.split('.');
            key = '';
            do {
                key += keys.shift();
                var value = target[key];
                if (value !== undefined && (typeof value === 'object' || !keys.length)) {
                    target = value;
                    key = '';
                }
                else if (!keys.length) {
                    target = undefined;
                }
                else {
                    key += '.';
                }
            } while (keys.length);
            return target;
        };
        ObjectUtils.merge = function () {
            var objects = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                objects[_i] = arguments[_i];
            }
            var result = {};
            objects.forEach(function (source) {
                Object.keys(source).forEach(function (prop) {
                    if (prop in result && Array.isArray(result[prop])) {
                        result[prop] = result[prop].concat(source[prop]);
                    }
                    else if (prop in result && typeof result[prop] === 'object') {
                        result[prop] = ObjectUtils.merge(result[prop], source[prop]);
                    }
                    else {
                        result[prop] = source[prop];
                    }
                });
            });
            return result;
        };
        return ObjectUtils;
    }());

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (Object.prototype.hasOwnProperty.call(b, p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __rest(s, e) {
        var t = {};
        for (var p in s)
            if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
                t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                    t[p[i]] = s[p[i]];
            }
        return t;
    }
    function __decorate(decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
            r = Reflect.decorate(decorators, target, key, desc);
        else
            for (var i = decorators.length - 1; i >= 0; i--)
                if (d = decorators[i])
                    r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    }
    function __param(paramIndex, decorator) {
        return function (target, key) { decorator(target, key, paramIndex); };
    }
    function __metadata(metadataKey, metadataValue) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function")
            return Reflect.metadata(metadataKey, metadataValue);
    }
    function __awaiter(thisArg, _arguments, P, generator) {
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try {
                step(generator.next(value));
            }
            catch (e) {
                reject(e);
            } }
            function rejected(value) { try {
                step(generator["throw"](value));
            }
            catch (e) {
                reject(e);
            } }
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }
    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function () { if (t[0] & 1)
                throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function () { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f)
                throw new TypeError("Generator is already executing.");
            while (_)
                try {
                    if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
                        return t;
                    if (y = 0, t)
                        op = [op[0] & 2, t.value];
                    switch (op[0]) {
                        case 0:
                        case 1:
                            t = op;
                            break;
                        case 4:
                            _.label++;
                            return { value: op[1], done: false };
                        case 5:
                            _.label++;
                            y = op[1];
                            op = [0];
                            continue;
                        case 7:
                            op = _.ops.pop();
                            _.trys.pop();
                            continue;
                        default:
                            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                                _ = 0;
                                continue;
                            }
                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                                _.label = op[1];
                                break;
                            }
                            if (op[0] === 6 && _.label < t[1]) {
                                _.label = t[1];
                                t = op;
                                break;
                            }
                            if (t && _.label < t[2]) {
                                _.label = t[2];
                                _.ops.push(op);
                                break;
                            }
                            if (t[2])
                                _.ops.pop();
                            _.trys.pop();
                            continue;
                    }
                    op = body.call(thisArg, _);
                }
                catch (e) {
                    op = [6, e];
                    y = 0;
                }
                finally {
                    f = t = 0;
                }
            if (op[0] & 5)
                throw op[1];
            return { value: op[0] ? op[1] : void 0, done: true };
        }
    }
    var __createBinding = Object.create ? (function (o, m, k, k2) {
        if (k2 === undefined)
            k2 = k;
        Object.defineProperty(o, k2, { enumerable: true, get: function () { return m[k]; } });
    }) : (function (o, m, k, k2) {
        if (k2 === undefined)
            k2 = k;
        o[k2] = m[k];
    });
    function __exportStar(m, o) {
        for (var p in m)
            if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p))
                __createBinding(o, m, p);
    }
    function __values(o) {
        var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
        if (m)
            return m.call(o);
        if (o && typeof o.length === "number")
            return {
                next: function () {
                    if (o && i >= o.length)
                        o = void 0;
                    return { value: o && o[i++], done: !o };
                }
            };
        throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    /** @deprecated */
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }
    /** @deprecated */
    function __spreadArrays() {
        for (var s = 0, i = 0, il = arguments.length; i < il; i++)
            s += arguments[i].length;
        for (var r = Array(s), k = 0, i = 0; i < il; i++)
            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
                r[k] = a[j];
        return r;
    }
    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2)
            for (var i = 0, l = from.length, ar; i < l; i++) {
                if (ar || !(i in from)) {
                    if (!ar)
                        ar = Array.prototype.slice.call(from, 0, i);
                    ar[i] = from[i];
                }
            }
        return to.concat(ar || from);
    }
    function __await(v) {
        return this instanceof __await ? (this.v = v, this) : new __await(v);
    }
    function __asyncGenerator(thisArg, _arguments, generator) {
        if (!Symbol.asyncIterator)
            throw new TypeError("Symbol.asyncIterator is not defined.");
        var g = generator.apply(thisArg, _arguments || []), i, q = [];
        return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
        function verb(n) { if (g[n])
            i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
        function resume(n, v) { try {
            step(g[n](v));
        }
        catch (e) {
            settle(q[0][3], e);
        } }
        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
        function fulfill(value) { resume("next", value); }
        function reject(value) { resume("throw", value); }
        function settle(f, v) { if (f(v), q.shift(), q.length)
            resume(q[0][0], q[0][1]); }
    }
    function __asyncDelegator(o) {
        var i, p;
        return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
    }
    function __asyncValues(o) {
        if (!Symbol.asyncIterator)
            throw new TypeError("Symbol.asyncIterator is not defined.");
        var m = o[Symbol.asyncIterator], i;
        return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function (v) { resolve({ value: v, done: d }); }, reject); }
    }
    function __makeTemplateObject(cooked, raw) {
        if (Object.defineProperty) {
            Object.defineProperty(cooked, "raw", { value: raw });
        }
        else {
            cooked.raw = raw;
        }
        return cooked;
    }
    ;
    var __setModuleDefault = Object.create ? (function (o, v) {
        Object.defineProperty(o, "default", { enumerable: true, value: v });
    }) : function (o, v) {
        o["default"] = v;
    };
    function __importStar(mod) {
        if (mod && mod.__esModule)
            return mod;
        var result = {};
        if (mod != null)
            for (var k in mod)
                if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k))
                    __createBinding(result, mod, k);
        __setModuleDefault(result, mod);
        return result;
    }
    function __importDefault(mod) {
        return (mod && mod.__esModule) ? mod : { default: mod };
    }
    function __classPrivateFieldGet(receiver, state, kind, f) {
        if (kind === "a" && !f)
            throw new TypeError("Private accessor was defined without a getter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
            throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    }
    function __classPrivateFieldSet(receiver, state, value, kind, f) {
        if (kind === "m")
            throw new TypeError("Private method is not writable");
        if (kind === "a" && !f)
            throw new TypeError("Private accessor was defined without a setter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
            throw new TypeError("Cannot write private member to an object whose class did not declare it");
        return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
    }

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FileUtils = /** @class */ (function () {
        function FileUtils() {
        }
        FileUtils.flatten = function (folder) {
            var reader = folder.createReader();
            var files = [];
            return new Promise(function (resolve) {
                var iterations = [];
                (function traverse() {
                    reader.readEntries(function (entries) {
                        if (!entries.length) {
                            Promise.all(iterations).then(function () { return resolve(files); });
                        }
                        else {
                            iterations.push(Promise.all(entries.map(function (entry) {
                                if (entry.isFile) {
                                    return new Promise(function (resolveFile) {
                                        entry.file(function (file) {
                                            files.push({
                                                entry: entry,
                                                file: file,
                                                relativeFolder: entry.fullPath.replace(/\/[^\/]*$/, '')
                                            });
                                            resolveFile();
                                        });
                                    });
                                }
                                else {
                                    return FileUtils.flatten(entry).then(function (result) {
                                        files.push.apply(files, __spread(result));
                                    });
                                }
                            })));
                            traverse();
                        }
                    });
                })();
            });
        };
        FileUtils.toFileArray = function (fileList) {
            var result = [];
            if (fileList && fileList.length > 0) {
                for (var i = 0; i < fileList.length; i++) {
                    result.push(fileList[i]);
                }
            }
            return result;
        };
        return FileUtils;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var MOMENT_DATE_FORMATS = {
        parse: {
            dateInput: 'DD/MM/YYYY'
        },
        display: {
            dateInput: 'DD/MM/YYYY',
            monthYearLabel: 'MMMM Y',
            dateA11yLabel: 'LL',
            monthYearA11yLabel: 'MMMM Y'
        }
    };
    var dateNames = [];
    for (var date = 1; date <= 31; date++) {
        dateNames.push(String(date));
    }

    var MomentDateAdapter = /** @class */ (function (_super) {
        __extends(MomentDateAdapter, _super);
        function MomentDateAdapter() {
            var _this = _super.apply(this, __spread(arguments)) || this;
            _this.localeData = moment$1.localeData();
            return _this;
        }
        MomentDateAdapter.prototype.getYear = function (date) {
            return date.year();
        };
        MomentDateAdapter.prototype.getMonth = function (date) {
            return date.month();
        };
        MomentDateAdapter.prototype.getDate = function (date) {
            return date.date();
        };
        MomentDateAdapter.prototype.getDayOfWeek = function (date) {
            return date.day();
        };
        MomentDateAdapter.prototype.getMonthNames = function (style) {
            switch (style) {
                case 'long':
                    return this.localeData.months();
                case 'short':
                    return this.localeData.monthsShort();
                case 'narrow':
                    return this.localeData.monthsShort().map(function (month) { return month[0]; });
                default:
                    return [];
            }
        };
        MomentDateAdapter.prototype.getDateNames = function () {
            var dateNames = [];
            for (var date = 1; date <= 31; date++) {
                dateNames.push(String(date));
            }
            return dateNames;
        };
        MomentDateAdapter.prototype.getDayOfWeekNames = function (style) {
            switch (style) {
                case 'long':
                    return this.localeData.weekdays();
                case 'short':
                    return this.localeData.weekdaysShort();
                case 'narrow':
                    return this.localeData.weekdaysShort();
                default:
                    return [];
            }
        };
        MomentDateAdapter.prototype.getYearName = function (date) {
            return String(date.year());
        };
        MomentDateAdapter.prototype.getFirstDayOfWeek = function () {
            return this.localeData.firstDayOfWeek();
        };
        MomentDateAdapter.prototype.getNumDaysInMonth = function (date) {
            return date.daysInMonth();
        };
        MomentDateAdapter.prototype.clone = function (date) {
            var locale = this.locale || 'en';
            return date.clone().locale(locale);
        };
        MomentDateAdapter.prototype.createDate = function (year, month, date) {
            return moment$1([year, month, date]);
        };
        MomentDateAdapter.prototype.today = function () {
            var locale = this.locale || 'en';
            return moment$1().locale(locale);
        };
        MomentDateAdapter.prototype.parse = function (value, parseFormat) {
            var locale = this.locale || 'en';
            if (value && typeof value === 'string') {
                var m = moment$1(value, parseFormat, locale, true);
                if (!m.isValid()) {
                    m = moment$1(value, this.overrideDisplayFormat, locale, true);
                }
                if (m.isValid()) {
                    if (m.year() === 2001 && value.indexOf('2001') === -1) {
                        var currentYear = new Date().getFullYear();
                        m.set('year', currentYear);
                        if (m.isAfter(moment$1())) {
                            m.set('year', currentYear - 1);
                        }
                    }
                }
                return m;
            }
            return value ? moment$1(value).locale(locale) : null;
        };
        MomentDateAdapter.prototype.format = function (date, displayFormat) {
            date = this.clone(date);
            displayFormat = this.overrideDisplayFormat ? this.overrideDisplayFormat : displayFormat;
            if (date && date.format) {
                return date.format(displayFormat);
            }
            else {
                return '';
            }
        };
        MomentDateAdapter.prototype.addCalendarYears = function (date, years) {
            return date.clone().add(years, 'y');
        };
        MomentDateAdapter.prototype.addCalendarMonths = function (date, months) {
            return date.clone().add(months, 'M');
        };
        MomentDateAdapter.prototype.addCalendarDays = function (date, days) {
            return date.clone().add(days, 'd');
        };
        MomentDateAdapter.prototype.getISODateString = function (date) {
            return date.toISOString();
        };
        MomentDateAdapter.prototype.setLocale = function (locale) {
            _super.prototype.setLocale.call(this, locale);
            this.localeData = moment$1.localeData(locale);
        };
        MomentDateAdapter.prototype.compareDate = function (first, second) {
            return first.diff(second, 'seconds', true);
        };
        MomentDateAdapter.prototype.sameDate = function (first, second) {
            if (first == null) {
                return second == null;
            }
            else if (moment.isMoment(first)) {
                return first.isSame(second);
            }
            else {
                var isSame = _super.prototype.sameDate.call(this, first, second);
                return isSame;
            }
        };
        MomentDateAdapter.prototype.clampDate = function (date, min, max) {
            if (min && date.isBefore(min)) {
                return min;
            }
            else if (max && date.isAfter(max)) {
                return max;
            }
            else {
                return date;
            }
        };
        MomentDateAdapter.prototype.isDateInstance = function (date) {
            var isValidDateInstance = false;
            if (date) {
                isValidDateInstance = date._isAMomentObject;
            }
            return isValidDateInstance;
        };
        MomentDateAdapter.prototype.isValid = function (date) {
            return date.isValid();
        };
        MomentDateAdapter.prototype.toIso8601 = function (date) {
            return this.clone(date).format();
        };
        MomentDateAdapter.prototype.fromIso8601 = function (iso8601String) {
            var locale = this.locale || 'en';
            var d = moment$1(iso8601String, moment$1.ISO_8601).locale(locale);
            return this.isValid(d) ? d : null;
        };
        MomentDateAdapter.prototype.invalid = function () {
            return moment$1.invalid();
        };
        return MomentDateAdapter;
    }(core.DateAdapter));
    MomentDateAdapter.decorators = [
        { type: i0.Injectable }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ObjectDataRow = /** @class */ (function () {
        function ObjectDataRow(obj, isSelected) {
            if (isSelected === void 0) { isSelected = false; }
            this.obj = obj;
            this.isSelected = isSelected;
            if (!obj) {
                throw new Error('Object source not found');
            }
        }
        ObjectDataRow.prototype.getValue = function (key) {
            return ObjectUtils.getValue(this.obj, key);
        };
        ObjectDataRow.prototype.hasValue = function (key) {
            return this.getValue(key) !== undefined;
        };
        ObjectDataRow.prototype.imageErrorResolver = function () {
            return '';
        };
        return ObjectDataRow;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ObjectDataColumn = /** @class */ (function () {
        function ObjectDataColumn(input) {
            this.key = input.key;
            this.type = input.type || 'text';
            this.format = input.format;
            this.sortable = input.sortable;
            this.title = input.title;
            this.srTitle = input.srTitle;
            this.cssClass = input.cssClass;
            this.template = input.template;
            this.copyContent = input.copyContent;
            this.focus = input.focus;
            this.sortingKey = input.sortingKey;
            this.header = input.header;
        }
        return ObjectDataColumn;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataSorting = /** @class */ (function () {
        function DataSorting(key, direction) {
            this.key = key;
            this.direction = direction;
        }
        return DataSorting;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ObjectDataTableAdapter = /** @class */ (function () {
        function ObjectDataTableAdapter(data, schema) {
            if (data === void 0) { data = []; }
            if (schema === void 0) { schema = []; }
            this._rows = [];
            this._columns = [];
            if (data && data.length > 0) {
                this._rows = data.map(function (item) {
                    return new ObjectDataRow(item);
                });
            }
            if (schema && schema.length > 0) {
                this._columns = schema.map(function (item) {
                    return new ObjectDataColumn(item);
                });
                var sortable = this._columns.filter(function (column) { return column.sortable; });
                if (sortable.length > 0) {
                    this.sort(sortable[0].key, 'asc');
                }
            }
            this.rowsChanged = new rxjs.Subject();
        }
        ObjectDataTableAdapter.generateSchema = function (data) {
            var schema = [];
            if (data && data.length) {
                var rowToExaminate = data[0];
                if (typeof rowToExaminate === 'object') {
                    for (var key in rowToExaminate) {
                        if (rowToExaminate.hasOwnProperty(key)) {
                            schema.push({
                                type: 'text',
                                key: key,
                                title: key,
                                sortable: false
                            });
                        }
                    }
                }
            }
            return schema;
        };
        ObjectDataTableAdapter.prototype.getRows = function () {
            return this._rows;
        };
        ObjectDataTableAdapter.prototype.setRows = function (rows) {
            this._rows = rows || [];
            this.sort();
            this.rowsChanged.next(this._rows);
        };
        ObjectDataTableAdapter.prototype.getColumns = function () {
            return this._columns;
        };
        ObjectDataTableAdapter.prototype.setColumns = function (columns) {
            this._columns = columns || [];
        };
        ObjectDataTableAdapter.prototype.getValue = function (row, col, resolver) {
            if (!row) {
                throw new Error('Row not found');
            }
            if (!col) {
                throw new Error('Column not found');
            }
            if (resolver) {
                return resolver(row, col);
            }
            var value = row.getValue(col.key);
            if (col.type === 'icon') {
                var icon = row.getValue(col.key);
                return icon;
            }
            return value;
        };
        ObjectDataTableAdapter.prototype.getSorting = function () {
            return this._sorting;
        };
        ObjectDataTableAdapter.prototype.setSorting = function (sorting) {
            this._sorting = sorting;
            if (sorting && sorting.key) {
                this._rows.sort(function (a, b) {
                    var left = a.getValue(sorting.key);
                    if (left) {
                        left = (left instanceof Date) ? left.valueOf().toString() : left.toString();
                    }
                    else {
                        left = '';
                    }
                    var right = b.getValue(sorting.key);
                    if (right) {
                        right = (right instanceof Date) ? right.valueOf().toString() : right.toString();
                    }
                    else {
                        right = '';
                    }
                    return sorting.direction === 'asc'
                        ? left.localeCompare(right)
                        : right.localeCompare(left);
                });
            }
        };
        ObjectDataTableAdapter.prototype.sort = function (key, direction) {
            var sorting = this._sorting || new DataSorting();
            if (key) {
                sorting.key = key;
                sorting.direction = direction || 'asc';
            }
            this.setSorting(sorting);
        };
        return ObjectDataTableAdapter;
    }());

    (function (AppConfigValues) {
        AppConfigValues["APP_CONFIG_LANGUAGES_KEY"] = "languages";
        AppConfigValues["PROVIDERS"] = "providers";
        AppConfigValues["OAUTHCONFIG"] = "oauth2";
        AppConfigValues["ECMHOST"] = "ecmHost";
        AppConfigValues["BASESHAREURL"] = "baseShareUrl";
        AppConfigValues["BPMHOST"] = "bpmHost";
        AppConfigValues["IDENTITY_HOST"] = "identityHost";
        AppConfigValues["AUTHTYPE"] = "authType";
        AppConfigValues["CONTEXTROOTECM"] = "contextRootEcm";
        AppConfigValues["CONTEXTROOTBPM"] = "contextRootBpm";
        AppConfigValues["ALFRESCO_REPOSITORY_NAME"] = "alfrescoRepositoryName";
        AppConfigValues["LOG_LEVEL"] = "logLevel";
        AppConfigValues["LOGIN_ROUTE"] = "loginRoute";
        AppConfigValues["DISABLECSRF"] = "disableCSRF";
        AppConfigValues["AUTH_WITH_CREDENTIALS"] = "auth.withCredentials";
        AppConfigValues["APPLICATION"] = "application";
        AppConfigValues["STORAGE_PREFIX"] = "application.storagePrefix";
        AppConfigValues["NOTIFY_DURATION"] = "notificationDefaultDuration";
    })(exports.AppConfigValues || (exports.AppConfigValues = {}));
    (function (Status) {
        Status["INIT"] = "init";
        Status["LOADING"] = "loading";
        Status["LOADED"] = "loaded";
    })(exports.Status || (exports.Status = {}));
    var AppConfigService = /** @class */ (function () {
        function AppConfigService(http, extensionService) {
            var _this = this;
            this.http = http;
            this.extensionService = extensionService;
            this.config = {
                application: {
                    name: 'Alfresco ADF Application'
                },
                ecmHost: 'http://{hostname}{:port}/ecm',
                bpmHost: 'http://{hostname}{:port}/bpm',
                logLevel: 'silent'
            };
            this.status = exports.Status.INIT;
            this.onLoadSubject = new rxjs.Subject();
            this.onLoad = this.onLoadSubject.asObservable();
            extensionService.setup$.subscribe(function (config) {
                _this.onExtensionsLoaded(config);
            });
        }
        AppConfigService.prototype.select = function (property) {
            return this.onLoadSubject
                .pipe(operators.map(function (config) { return config[property]; }), operators.distinctUntilChanged());
        };
        AppConfigService.prototype.get = function (key, defaultValue) {
            var result = ObjectUtils.getValue(this.config, key);
            if (typeof result === 'string') {
                var keywords = new Map();
                keywords.set('hostname', this.getLocationHostname());
                keywords.set(':port', this.getLocationPort(':'));
                keywords.set('port', this.getLocationPort());
                keywords.set('protocol', this.getLocationProtocol());
                result = this.formatString(result, keywords);
            }
            if (typeof result === 'object') {
                result = JSON.parse(JSON.stringify(result).replace('{hostname}', this.getLocationHostname()));
                result = JSON.parse(JSON.stringify(result).replace('{:port}', this.getLocationPort(':')));
                result = JSON.parse(JSON.stringify(result).replace('{protocol}', this.getLocationProtocol()));
            }
            if (result === undefined) {
                return defaultValue;
            }
            return result;
        };
        AppConfigService.prototype.getLocationProtocol = function () {
            return location.protocol;
        };
        AppConfigService.prototype.getLocationHostname = function () {
            return location.hostname;
        };
        AppConfigService.prototype.getLocationPort = function (prefix) {
            if (prefix === void 0) { prefix = ''; }
            return location.port ? prefix + location.port : '';
        };
        AppConfigService.prototype.onLoaded = function () {
            this.onLoadSubject.next(this.config);
        };
        AppConfigService.prototype.onDataLoaded = function (data) {
            var _this = this;
            this.config = Object.assign({}, this.config, data || {});
            this.onLoadSubject.next(this.config);
            this.extensionService.setup$
                .pipe(operators.take(1))
                .subscribe(function (config) { return _this.onExtensionsLoaded(config); });
        };
        AppConfigService.prototype.onExtensionsLoaded = function (config) {
            if (config) {
                var customConfig = config.appConfig;
                if (customConfig) {
                    this.config = i2.mergeObjects(this.config, customConfig);
                }
            }
        };
        AppConfigService.prototype.load = function () {
            var _this = this;
            return new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {
                var configUrl;
                var _this = this;
                return __generator(this, function (_a) {
                    configUrl = "app.config.json?v=" + Date.now();
                    if (this.status === exports.Status.INIT) {
                        this.status = exports.Status.LOADING;
                        this.http.get(configUrl).subscribe(function (data) {
                            _this.status = exports.Status.LOADED;
                            _this.onDataLoaded(data);
                            resolve(_this.config);
                        }, function () {
                            resolve(_this.config);
                        });
                    }
                    else if (this.status === exports.Status.LOADED) {
                        resolve(this.config);
                    }
                    else if (this.status === exports.Status.LOADING) {
                        this.onLoad.subscribe(function () {
                            resolve(_this.config);
                        });
                    }
                    return [2 /*return*/];
                });
            }); });
        };
        AppConfigService.prototype.formatString = function (str, keywords) {
            var result = str;
            keywords.forEach(function (value, key) {
                var expr = new RegExp('{' + key + '}', 'gm');
                result = result.replace(expr, value);
            });
            return result;
        };
        return AppConfigService;
    }());
    AppConfigService.ɵprov = i0.ɵɵdefineInjectable({ factory: function AppConfigService_Factory() { return new AppConfigService(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.ExtensionService)); }, token: AppConfigService, providedIn: "root" });
    AppConfigService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AppConfigService.ctorParameters = function () { return [
        { type: i1.HttpClient },
        { type: i2.ExtensionService }
    ]; };

    var StorageService = /** @class */ (function () {
        function StorageService() {
            this.memoryStore = {};
            this.useLocalStorage = false;
            this._prefix = '';
            this.useLocalStorage = this.storageAvailable('localStorage');
        }
        Object.defineProperty(StorageService.prototype, "prefix", {
            get: function () {
                return this._prefix;
            },
            set: function (prefix) {
                this._prefix = prefix ? prefix + '_' : '';
            },
            enumerable: false,
            configurable: true
        });
        StorageService.prototype.getItem = function (key) {
            if (this.useLocalStorage) {
                return localStorage.getItem(this.prefix + key);
            }
            else {
                return this.memoryStore.hasOwnProperty(this.prefix + key) ? this.memoryStore[this.prefix + key] : null;
            }
        };
        StorageService.prototype.setItem = function (key, data) {
            if (this.useLocalStorage) {
                localStorage.setItem(this.prefix + key, data);
            }
            else {
                this.memoryStore[this.prefix + key] = data.toString();
            }
        };
        StorageService.prototype.clear = function () {
            if (this.useLocalStorage) {
                localStorage.clear();
            }
            else {
                this.memoryStore = {};
            }
        };
        StorageService.prototype.removeItem = function (key) {
            if (this.useLocalStorage) {
                localStorage.removeItem(this.prefix + key);
            }
            else {
                delete this.memoryStore[this.prefix + key];
            }
        };
        StorageService.prototype.hasItem = function (key) {
            if (this.useLocalStorage) {
                return localStorage.getItem(this.prefix + key) ? true : false;
            }
            else {
                return this.memoryStore.hasOwnProperty(key);
            }
        };
        StorageService.prototype.storageAvailable = function (type) {
            try {
                var storage = window[type];
                var key = '__storage_test__';
                storage.setItem(key, key);
                storage.removeItem(key, key);
                return true;
            }
            catch (e) {
                return false;
            }
        };
        return StorageService;
    }());
    StorageService.ɵprov = i0.ɵɵdefineInjectable({ factory: function StorageService_Factory() { return new StorageService(); }, token: StorageService, providedIn: "root" });
    StorageService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    StorageService.ctorParameters = function () { return []; };

    var AlfrescoApiService = /** @class */ (function () {
        function AlfrescoApiService(appConfig, storageService) {
            this.appConfig = appConfig;
            this.storageService = storageService;
            this.nodeUpdated = new rxjs.Subject();
            this.alfrescoApiInitialized = new rxjs.ReplaySubject(1);
            this.excludedErrorUrl = ['api/enterprise/system/properties'];
        }
        AlfrescoApiService.prototype.getInstance = function () {
            return this.alfrescoApi;
        };
        AlfrescoApiService.prototype.load = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, this.appConfig.load().then(function () {
                                _this.storageService.prefix = _this.appConfig.get(exports.AppConfigValues.STORAGE_PREFIX, '');
                                _this.initAlfrescoApi();
                                _this.alfrescoApiInitialized.next(true);
                            })];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            });
        };
        AlfrescoApiService.prototype.reset = function () {
            this.initAlfrescoApi();
        };
        AlfrescoApiService.prototype.initAlfrescoApi = function () {
            var oauth = Object.assign({}, this.appConfig.get(exports.AppConfigValues.OAUTHCONFIG, null));
            if (oauth) {
                oauth.redirectUri = window.location.origin + window.location.pathname;
                oauth.redirectUriLogout = window.location.origin + window.location.pathname;
            }
            var config = new jsApi.AlfrescoApiConfig({
                provider: this.appConfig.get(exports.AppConfigValues.PROVIDERS),
                hostEcm: this.appConfig.get(exports.AppConfigValues.ECMHOST),
                hostBpm: this.appConfig.get(exports.AppConfigValues.BPMHOST),
                authType: this.appConfig.get(exports.AppConfigValues.AUTHTYPE, 'BASIC'),
                contextRootBpm: this.appConfig.get(exports.AppConfigValues.CONTEXTROOTBPM),
                contextRoot: this.appConfig.get(exports.AppConfigValues.CONTEXTROOTECM),
                disableCsrf: this.appConfig.get(exports.AppConfigValues.DISABLECSRF),
                withCredentials: this.appConfig.get(exports.AppConfigValues.AUTH_WITH_CREDENTIALS, false),
                domainPrefix: this.appConfig.get(exports.AppConfigValues.STORAGE_PREFIX),
                oauth2: oauth
            });
            if (this.alfrescoApi && this.isDifferentConfig(this.lastConfig, config)) {
                this.lastConfig = config;
                this.alfrescoApi.setConfig(config);
            }
            else {
                this.lastConfig = config;
                this.alfrescoApi = new jsApi.AlfrescoApi(config);
            }
        };
        AlfrescoApiService.prototype.isDifferentConfig = function (lastConfig, newConfig) {
            return JSON.stringify(lastConfig) !== JSON.stringify(newConfig);
        };
        AlfrescoApiService.prototype.isExcludedErrorListener = function (currentFullPath) {
            var formattedPath = currentFullPath.replace(this.lastConfig.hostBpm + '/' + this.lastConfig.contextRootBpm, '');
            return this.excludedErrorUrl.includes(formattedPath);
        };
        return AlfrescoApiService;
    }());
    AlfrescoApiService.ɵprov = i0.ɵɵdefineInjectable({ factory: function AlfrescoApiService_Factory() { return new AlfrescoApiService(i0.ɵɵinject(AppConfigService), i0.ɵɵinject(StorageService)); }, token: AlfrescoApiService, providedIn: "root" });
    AlfrescoApiService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AlfrescoApiService.ctorParameters = function () { return [
        { type: AppConfigService },
        { type: StorageService }
    ]; };

    var CookieService = /** @class */ (function () {
        function CookieService() {
            this.cookieEnabled = false;
            if (navigator.cookieEnabled === false) {
                this.cookieEnabled = false;
            }
            this.setItem('test-cookie', 'test');
            this.cookieEnabled = document.cookie.indexOf('test-cookie') >= 0;
            this.deleteCookie('test-cookie');
        }
        CookieService.prototype.isEnabled = function () {
            return this.cookieEnabled;
        };
        CookieService.prototype.getItem = function (key) {
            var regexp = new RegExp('(?:' + key + '|;\s*' + key + ')=(.*?)(?:;|$)', 'g');
            var result = regexp.exec(document.cookie);
            return (result === null) ? null : result[1];
        };
        CookieService.prototype.setItem = function (key, data, expiration, path) {
            if (expiration === void 0) { expiration = null; }
            if (path === void 0) { path = null; }
            document.cookie = key + "=" + data +
                (expiration ? ';expires=' + expiration.toUTCString() : '') +
                (path ? ";path=" + path : ';path=/');
        };
        CookieService.prototype.deleteCookie = function (key, path) {
            if (path === void 0) { path = null; }
            document.cookie = key + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;' +
                (path ? ";path=" + path : ';path=/');
        };
        CookieService.prototype.clear = function () {
        };
        return CookieService;
    }());
    CookieService.ɵprov = i0.ɵɵdefineInjectable({ factory: function CookieService_Factory() { return new CookieService(); }, token: CookieService, providedIn: "root" });
    CookieService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    CookieService.ctorParameters = function () { return []; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LogLevelsEnum = /** @class */ (function (_super) {
        __extends(LogLevelsEnum, _super);
        function LogLevelsEnum() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return LogLevelsEnum;
    }(Number));
    LogLevelsEnum.TRACE = 5;
    LogLevelsEnum.DEBUG = 4;
    LogLevelsEnum.INFO = 3;
    LogLevelsEnum.WARN = 2;
    LogLevelsEnum.ERROR = 1;
    LogLevelsEnum.SILENT = 0;
    var logLevels = [
        { level: LogLevelsEnum.TRACE, name: 'TRACE' },
        { level: LogLevelsEnum.DEBUG, name: 'DEBUG' },
        { level: LogLevelsEnum.INFO, name: 'INFO' },
        { level: LogLevelsEnum.WARN, name: 'WARN' },
        { level: LogLevelsEnum.ERROR, name: 'ERROR' },
        { level: LogLevelsEnum.SILENT, name: 'SILENT' }
    ];

    var LogService = /** @class */ (function () {
        function LogService(appConfig) {
            this.appConfig = appConfig;
            this.onMessage = new rxjs.Subject();
        }
        Object.defineProperty(LogService.prototype, "currentLogLevel", {
            get: function () {
                var configLevel = this.appConfig.get(exports.AppConfigValues.LOG_LEVEL);
                if (configLevel) {
                    return this.getLogLevel(configLevel);
                }
                return LogLevelsEnum.TRACE;
            },
            enumerable: false,
            configurable: true
        });
        LogService.prototype.error = function (message) {
            var optionalParams = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                optionalParams[_i - 1] = arguments[_i];
            }
            if (this.currentLogLevel >= LogLevelsEnum.ERROR) {
                this.messageBus(message, 'ERROR');
                console.error.apply(console, __spread([message], optionalParams));
            }
        };
        LogService.prototype.debug = function (message) {
            var optionalParams = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                optionalParams[_i - 1] = arguments[_i];
            }
            if (this.currentLogLevel >= LogLevelsEnum.DEBUG) {
                this.messageBus(message, 'DEBUG');
                console.debug.apply(console, __spread([message], optionalParams));
            }
        };
        LogService.prototype.info = function (message) {
            var optionalParams = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                optionalParams[_i - 1] = arguments[_i];
            }
            if (this.currentLogLevel >= LogLevelsEnum.INFO) {
                this.messageBus(message, 'INFO');
                console.info.apply(console, __spread([message], optionalParams));
            }
        };
        LogService.prototype.log = function (message) {
            var optionalParams = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                optionalParams[_i - 1] = arguments[_i];
            }
            if (this.currentLogLevel >= LogLevelsEnum.TRACE) {
                this.messageBus(message, 'LOG');
                console.log.apply(console, __spread([message], optionalParams));
            }
        };
        LogService.prototype.trace = function (message) {
            var optionalParams = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                optionalParams[_i - 1] = arguments[_i];
            }
            if (this.currentLogLevel >= LogLevelsEnum.TRACE) {
                this.messageBus(message, 'TRACE');
                console.trace.apply(console, __spread([message], optionalParams));
            }
        };
        LogService.prototype.warn = function (message) {
            var optionalParams = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                optionalParams[_i - 1] = arguments[_i];
            }
            if (this.currentLogLevel >= LogLevelsEnum.WARN) {
                this.messageBus(message, 'WARN');
                console.warn.apply(console, __spread([message], optionalParams));
            }
        };
        LogService.prototype.assert = function (test, message) {
            var optionalParams = [];
            for (var _i = 2; _i < arguments.length; _i++) {
                optionalParams[_i - 2] = arguments[_i];
            }
            if (this.currentLogLevel !== LogLevelsEnum.SILENT) {
                this.messageBus(message, 'ASSERT');
                console.assert.apply(console, __spread([test, message], optionalParams));
            }
        };
        LogService.prototype.group = function (groupTitle) {
            var optionalParams = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                optionalParams[_i - 1] = arguments[_i];
            }
            if (this.currentLogLevel !== LogLevelsEnum.SILENT) {
                console.group.apply(console, __spread([groupTitle], optionalParams));
            }
        };
        LogService.prototype.groupEnd = function () {
            if (this.currentLogLevel !== LogLevelsEnum.SILENT) {
                console.groupEnd();
            }
        };
        LogService.prototype.getLogLevel = function (level) {
            var referencedLevel = logLevels.find(function (currentLevel) {
                return currentLevel.name.toLocaleLowerCase() === level.toLocaleLowerCase();
            });
            return referencedLevel ? referencedLevel.level : 5;
        };
        LogService.prototype.messageBus = function (text, logLevel) {
            this.onMessage.next({ text: text, type: logLevel });
        };
        return LogService;
    }());
    LogService.ɵprov = i0.ɵɵdefineInjectable({ factory: function LogService_Factory() { return new LogService(i0.ɵɵinject(AppConfigService)); }, token: LogService, providedIn: "root" });
    LogService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    LogService.ctorParameters = function () { return [
        { type: AppConfigService }
    ]; };

    var JwtHelperService = /** @class */ (function () {
        function JwtHelperService(storageService) {
            this.storageService = storageService;
        }
        JwtHelperService.prototype.decodeToken = function (token) {
            var parts = token.split('.');
            if (parts.length !== 3) {
                throw new Error('JWT must have 3 parts');
            }
            var decoded = this.urlBase64Decode(parts[1]);
            if (!decoded) {
                throw new Error('Cannot decode the token');
            }
            return JSON.parse(decoded);
        };
        JwtHelperService.prototype.urlBase64Decode = function (token) {
            var output = token.replace(/-/g, '+').replace(/_/g, '/');
            switch (output.length % 4) {
                case 0: {
                    break;
                }
                case 2: {
                    output += '==';
                    break;
                }
                case 3: {
                    output += '=';
                    break;
                }
                default: {
                    throw new Error('Illegal base64url string!');
                }
            }
            return decodeURIComponent(escape(window.atob(output)));
        };
        JwtHelperService.prototype.getValueFromLocalAccessToken = function (key) {
            return this.getValueFromToken(this.getAccessToken(), key);
        };
        JwtHelperService.prototype.getAccessToken = function () {
            return this.storageService.getItem(JwtHelperService.USER_ACCESS_TOKEN);
        };
        JwtHelperService.prototype.getValueFromToken = function (accessToken, key) {
            var value;
            if (accessToken) {
                var tokenPayload = this.decodeToken(accessToken);
                value = tokenPayload[key];
            }
            return value;
        };
        JwtHelperService.prototype.getRealmRoles = function () {
            var access = this.getValueFromLocalAccessToken(JwtHelperService.REALM_ACCESS);
            return access ? access['roles'] : [];
        };
        JwtHelperService.prototype.getClientRoles = function (clientName) {
            var clientRole = this.getValueFromLocalAccessToken(JwtHelperService.RESOURCE_ACCESS)[clientName];
            return clientRole ? clientRole['roles'] : [];
        };
        JwtHelperService.prototype.hasRealmRole = function (role) {
            var hasRole = false;
            if (this.getAccessToken()) {
                var realmRoles = this.getRealmRoles();
                hasRole = realmRoles.some(function (currentRole) {
                    return currentRole === role;
                });
            }
            return hasRole;
        };
        JwtHelperService.prototype.hasRealmRoles = function (rolesToCheck) {
            var _this = this;
            return rolesToCheck.some(function (currentRole) {
                return _this.hasRealmRole(currentRole);
            });
        };
        JwtHelperService.prototype.hasRealmRolesForClientRole = function (clientName, rolesToCheck) {
            var _this = this;
            return rolesToCheck.some(function (currentRole) {
                return _this.hasClientRole(clientName, currentRole);
            });
        };
        JwtHelperService.prototype.hasClientRole = function (clientName, role) {
            var hasRole = false;
            if (this.getAccessToken()) {
                var clientRoles = this.getClientRoles(clientName);
                hasRole = clientRoles.some(function (currentRole) {
                    return currentRole === role;
                });
            }
            return hasRole;
        };
        return JwtHelperService;
    }());
    JwtHelperService.USER_NAME = 'name';
    JwtHelperService.FAMILY_NAME = 'family_name';
    JwtHelperService.GIVEN_NAME = 'given_name';
    JwtHelperService.USER_EMAIL = 'email';
    JwtHelperService.USER_ACCESS_TOKEN = 'access_token';
    JwtHelperService.REALM_ACCESS = 'realm_access';
    JwtHelperService.RESOURCE_ACCESS = 'resource_access';
    JwtHelperService.USER_PREFERRED_USERNAME = 'preferred_username';
    JwtHelperService.ɵprov = i0.ɵɵdefineInjectable({ factory: function JwtHelperService_Factory() { return new JwtHelperService(i0.ɵɵinject(StorageService)); }, token: JwtHelperService, providedIn: "root" });
    JwtHelperService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    JwtHelperService.ctorParameters = function () { return [
        { type: StorageService }
    ]; };

    var REMEMBER_ME_COOKIE_KEY = 'ALFRESCO_REMEMBER_ME';
    var REMEMBER_ME_UNTIL = 1000 * 60 * 60 * 24 * 30;
    var AuthenticationService = /** @class */ (function () {
        function AuthenticationService(appConfig, storageService, alfrescoApi, cookie, logService) {
            var _this = this;
            this.appConfig = appConfig;
            this.storageService = storageService;
            this.alfrescoApi = alfrescoApi;
            this.cookie = cookie;
            this.logService = logService;
            this.redirectUrl = null;
            this.bearerExcludedUrls = ['auth/realms', 'resources/', 'assets/'];
            this.onLogin = new rxjs.ReplaySubject(1);
            this.onLogout = new rxjs.ReplaySubject(1);
            this.alfrescoApi.alfrescoApiInitialized.subscribe(function () {
                _this.alfrescoApi.getInstance().reply('logged-in', function () {
                    _this.onLogin.next();
                });
                if (_this.isKerberosEnabled()) {
                    _this.loadUserDetails();
                }
            });
        }
        Object.defineProperty(AuthenticationService.prototype, "peopleApi", {
            get: function () {
                var _a;
                this._peopleApi = (_a = this._peopleApi) !== null && _a !== void 0 ? _a : new jsApi.PeopleApi(this.alfrescoApi.getInstance());
                return this._peopleApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(AuthenticationService.prototype, "profileApi", {
            get: function () {
                var _a;
                this._profileApi = (_a = this._profileApi) !== null && _a !== void 0 ? _a : new jsApi.UserProfileApi(this.alfrescoApi.getInstance());
                return this._profileApi;
            },
            enumerable: false,
            configurable: true
        });
        AuthenticationService.prototype.loadUserDetails = function () {
            var _this = this;
            var ecmUser$ = rxjs.from(this.peopleApi.getPerson('-me-'));
            var bpmUser$ = this.getBpmLoggedUser();
            if (this.isALLProvider()) {
                rxjs.forkJoin([ecmUser$, bpmUser$]).subscribe(function () { return _this.onLogin.next(); });
            }
            else if (this.isECMProvider()) {
                ecmUser$.subscribe(function () { return _this.onLogin.next(); });
            }
            else {
                bpmUser$.subscribe(function () { return _this.onLogin.next(); });
            }
        };
        AuthenticationService.prototype.isLoggedIn = function () {
            if (!this.isOauth() && this.cookie.isEnabled() && !this.isRememberMeSet()) {
                return false;
            }
            return this.alfrescoApi.getInstance().isLoggedIn();
        };
        AuthenticationService.prototype.isLoggedInWith = function (provider) {
            if (provider === 'BPM') {
                return this.isBpmLoggedIn();
            }
            else if (provider === 'ECM') {
                return this.isEcmLoggedIn();
            }
            else {
                return this.isLoggedIn();
            }
        };
        AuthenticationService.prototype.isKerberosEnabled = function () {
            return this.appConfig.get(exports.AppConfigValues.AUTH_WITH_CREDENTIALS, false);
        };
        AuthenticationService.prototype.isOauth = function () {
            return this.alfrescoApi.getInstance().isOauthConfiguration();
        };
        AuthenticationService.prototype.isPublicUrl = function () {
            return this.alfrescoApi.getInstance().isPublicUrl();
        };
        AuthenticationService.prototype.isECMProvider = function () {
            return this.alfrescoApi.getInstance().isEcmConfiguration();
        };
        AuthenticationService.prototype.isBPMProvider = function () {
            return this.alfrescoApi.getInstance().isBpmConfiguration();
        };
        AuthenticationService.prototype.isALLProvider = function () {
            return this.alfrescoApi.getInstance().isEcmBpmConfiguration();
        };
        AuthenticationService.prototype.login = function (username, password, rememberMe) {
            var _this = this;
            if (rememberMe === void 0) { rememberMe = false; }
            return rxjs.from(this.alfrescoApi.getInstance().login(username, password))
                .pipe(operators.map(function (response) {
                _this.saveRememberMeCookie(rememberMe);
                _this.onLogin.next(response);
                return {
                    type: _this.appConfig.get(exports.AppConfigValues.PROVIDERS),
                    ticket: response
                };
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        AuthenticationService.prototype.ssoImplicitLogin = function () {
            this.alfrescoApi.getInstance().implicitLogin();
        };
        AuthenticationService.prototype.saveRememberMeCookie = function (rememberMe) {
            var expiration = null;
            if (rememberMe) {
                expiration = new Date();
                var time = expiration.getTime();
                var expireTime = time + REMEMBER_ME_UNTIL;
                expiration.setTime(expireTime);
            }
            this.cookie.setItem(REMEMBER_ME_COOKIE_KEY, '1', expiration, null);
        };
        AuthenticationService.prototype.isRememberMeSet = function () {
            return (this.cookie.getItem(REMEMBER_ME_COOKIE_KEY) !== null);
        };
        AuthenticationService.prototype.logout = function () {
            var _this = this;
            return rxjs.from(this.callApiLogout())
                .pipe(operators.tap(function (response) {
                _this.onLogout.next(response);
                return response;
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        AuthenticationService.prototype.callApiLogout = function () {
            if (this.alfrescoApi.getInstance()) {
                return this.alfrescoApi.getInstance().logout();
            }
            return Promise.resolve();
        };
        AuthenticationService.prototype.getTicketEcm = function () {
            return this.alfrescoApi.getInstance().getTicketEcm();
        };
        AuthenticationService.prototype.getTicketBpm = function () {
            return this.alfrescoApi.getInstance().getTicketBpm();
        };
        AuthenticationService.prototype.getTicketEcmBase64 = function () {
            var ticket = this.alfrescoApi.getInstance().getTicketEcm();
            if (ticket) {
                return 'Basic ' + btoa(ticket);
            }
            return null;
        };
        AuthenticationService.prototype.isEcmLoggedIn = function () {
            if (this.isECMProvider() || this.isALLProvider()) {
                if (!this.isOauth() && this.cookie.isEnabled() && !this.isRememberMeSet()) {
                    return false;
                }
                return this.alfrescoApi.getInstance().isEcmLoggedIn();
            }
            return false;
        };
        AuthenticationService.prototype.isBpmLoggedIn = function () {
            if (this.isBPMProvider() || this.isALLProvider()) {
                if (!this.isOauth() && this.cookie.isEnabled() && !this.isRememberMeSet()) {
                    return false;
                }
                return this.alfrescoApi.getInstance().isBpmLoggedIn();
            }
            return false;
        };
        AuthenticationService.prototype.getEcmUsername = function () {
            return this.alfrescoApi.getInstance().getEcmUsername();
        };
        AuthenticationService.prototype.getBpmUsername = function () {
            return this.alfrescoApi.getInstance().getBpmUsername();
        };
        AuthenticationService.prototype.setRedirect = function (url) {
            this.redirectUrl = url;
        };
        AuthenticationService.prototype.getRedirect = function () {
            var provider = this.appConfig.get(exports.AppConfigValues.PROVIDERS);
            return this.hasValidRedirection(provider) ? this.redirectUrl.url : null;
        };
        AuthenticationService.prototype.getBpmLoggedUser = function () {
            return rxjs.from(this.profileApi.getProfile());
        };
        AuthenticationService.prototype.hasValidRedirection = function (provider) {
            return this.redirectUrl && (this.redirectUrl.provider === provider || this.hasSelectedProviderAll(provider));
        };
        AuthenticationService.prototype.hasSelectedProviderAll = function (provider) {
            return this.redirectUrl && (this.redirectUrl.provider === 'ALL' || provider === 'ALL');
        };
        AuthenticationService.prototype.handleError = function (error) {
            this.logService.error('Error when logging in', error);
            return rxjs.throwError(error || 'Server error');
        };
        AuthenticationService.prototype.getBearerExcludedUrls = function () {
            return this.bearerExcludedUrls;
        };
        AuthenticationService.prototype.getToken = function () {
            return this.storageService.getItem(JwtHelperService.USER_ACCESS_TOKEN);
        };
        AuthenticationService.prototype.addTokenToHeader = function (headersArg) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                var headers = headersArg;
                if (!headers) {
                    headers = new i1.HttpHeaders();
                }
                try {
                    var token = _this.getToken();
                    headers = headers.set('Authorization', 'bearer ' + token);
                    observer.next(headers);
                    observer.complete();
                }
                catch (error) {
                    observer.error(error);
                }
            });
        };
        return AuthenticationService;
    }());
    AuthenticationService.ɵprov = i0.ɵɵdefineInjectable({ factory: function AuthenticationService_Factory() { return new AuthenticationService(i0.ɵɵinject(AppConfigService), i0.ɵɵinject(StorageService), i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(CookieService), i0.ɵɵinject(LogService)); }, token: AuthenticationService, providedIn: "root" });
    AuthenticationService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AuthenticationService.ctorParameters = function () { return [
        { type: AppConfigService },
        { type: StorageService },
        { type: AlfrescoApiService },
        { type: CookieService },
        { type: LogService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var BpmProductVersionModel = /** @class */ (function () {
        function BpmProductVersionModel(obj) {
            if (obj) {
                this.edition = obj.edition || null;
                this.majorVersion = obj.majorVersion || null;
                this.revisionVersion = obj.revisionVersion || null;
                this.minorVersion = obj.minorVersion || null;
                this.type = obj.type || null;
            }
        }
        return BpmProductVersionModel;
    }());
    var VersionModel = /** @class */ (function () {
        function VersionModel(obj) {
            if (obj) {
                this.major = obj.major || null;
                this.minor = obj.minor || null;
                this.patch = obj.patch || null;
                this.hotfix = obj.hotfix || null;
                this.schema = obj.schema || null;
                this.label = obj.label || null;
                this.display = obj.display || null;
            }
        }
        return VersionModel;
    }());
    var LicenseModel = /** @class */ (function () {
        function LicenseModel(obj) {
            if (obj) {
                this.issuedAt = obj.issuedAt || null;
                this.expiresAt = obj.expiresAt || null;
                this.remainingDays = obj.remainingDays || null;
                this.holder = obj.holder || null;
                this.mode = obj.mode || null;
                this.isClusterEnabled = !!obj.isClusterEnabled;
                this.isCryptodocEnabled = !!obj.isCryptodocEnabled;
            }
        }
        return LicenseModel;
    }());
    var VersionStatusModel = /** @class */ (function () {
        function VersionStatusModel(obj) {
            if (obj) {
                this.isReadOnly = !!obj.isReadOnly;
                this.isAuditEnabled = !!obj.isAuditEnabled;
                this.isQuickShareEnabled = !!obj.isQuickShareEnabled;
                this.isThumbnailGenerationEnabled = !!obj.isThumbnailGenerationEnabled;
            }
        }
        return VersionStatusModel;
    }());
    var VersionModuleModel = /** @class */ (function () {
        function VersionModuleModel(obj) {
            if (obj) {
                this.id = obj.id || null;
                this.title = obj.title || null;
                this.description = obj.description || null;
                this.version = obj.version || null;
                this.installDate = obj.installDate || null;
                this.installState = obj.installState || null;
                this.versionMin = obj.versionMin || null;
                this.versionMax = obj.versionMax || null;
            }
        }
        return VersionModuleModel;
    }());
    var EcmProductVersionModel = /** @class */ (function () {
        function EcmProductVersionModel(obj) {
            var _this = this;
            this.modules = [];
            if (obj && obj.entry && obj.entry.repository) {
                this.edition = obj.entry.repository.edition || null;
                this.version = new VersionModel(obj.entry.repository.version);
                this.license = new LicenseModel(obj.entry.repository.license);
                this.status = new VersionStatusModel(obj.entry.repository.status);
                if (obj.entry.repository.modules) {
                    obj.entry.repository.modules.forEach(function (module) {
                        _this.modules.push(new VersionModuleModel(module));
                    });
                }
            }
        }
        return EcmProductVersionModel;
    }());

    var DiscoveryApiService = /** @class */ (function () {
        function DiscoveryApiService(apiService, authenticationService) {
            var _this = this;
            this.apiService = apiService;
            this.authenticationService = authenticationService;
            this.ecmProductInfo$ = new rxjs.Subject();
            this.authenticationService.onLogin
                .pipe(operators.filter(function () { var _a; return (_a = _this.apiService.getInstance()) === null || _a === void 0 ? void 0 : _a.isEcmLoggedIn(); }), operators.take(1), operators.switchMap(function () { return _this.getEcmProductInfo(); }))
                .subscribe(function (info) { return _this.ecmProductInfo$.next(info); });
        }
        DiscoveryApiService.prototype.getEcmProductInfo = function () {
            var discoveryApi = new jsApi.DiscoveryApi(this.apiService.getInstance());
            return rxjs.from(discoveryApi.getRepositoryInformation())
                .pipe(operators.map(function (res) { return new EcmProductVersionModel(res); }), operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        DiscoveryApiService.prototype.getBpmProductInfo = function () {
            var aboutApi = new jsApi.AboutApi(this.apiService.getInstance());
            return rxjs.from(aboutApi.getAppVersion())
                .pipe(operators.map(function (res) { return new BpmProductVersionModel(res); }), operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        DiscoveryApiService.prototype.getBPMSystemProperties = function () {
            var systemPropertiesApi = new jsApi.SystemPropertiesApi(this.apiService.getInstance());
            return rxjs.from(systemPropertiesApi.getProperties())
                .pipe(operators.map(function (res) {
                if ('string' === typeof (res)) {
                    throw new Error('Not valid response');
                }
                return res;
            }), operators.catchError(function (err) { return rxjs.throwError(err.error); }));
        };
        return DiscoveryApiService;
    }());
    DiscoveryApiService.ɵprov = i0.ɵɵdefineInjectable({ factory: function DiscoveryApiService_Factory() { return new DiscoveryApiService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(AuthenticationService)); }, token: DiscoveryApiService, providedIn: "root" });
    DiscoveryApiService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    DiscoveryApiService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: AuthenticationService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AboutProductVersionComponent = /** @class */ (function () {
        function AboutProductVersionComponent(authService, discovery) {
            this.authService = authService;
            this.discovery = discovery;
            this.ecmVersion = null;
            this.bpmVersion = null;
        }
        AboutProductVersionComponent.prototype.ngOnInit = function () {
            if (this.authService.isEcmLoggedIn()) {
                this.setECMInfo();
            }
            if (this.authService.isBpmLoggedIn()) {
                this.setBPMInfo();
            }
        };
        AboutProductVersionComponent.prototype.setECMInfo = function () {
            var _this = this;
            this.discovery.getEcmProductInfo().subscribe(function (ecmVers) {
                _this.ecmVersion = ecmVers;
                _this.modules = new ObjectDataTableAdapter(_this.ecmVersion.modules, [
                    { type: 'text', key: 'id', title: 'ABOUT.TABLE_HEADERS.MODULES.ID', sortable: true },
                    { type: 'text', key: 'title', title: 'ABOUT.TABLE_HEADERS.MODULES.TITLE', sortable: true },
                    { type: 'text', key: 'version', title: 'ABOUT.TABLE_HEADERS.MODULES.DESCRIPTION', sortable: true },
                    {
                        type: 'text',
                        key: 'installDate',
                        title: 'ABOUT.TABLE_HEADERS.MODULES.INSTALL_DATE',
                        sortable: true
                    },
                    {
                        type: 'text',
                        key: 'installState',
                        title: 'ABOUT.TABLE_HEADERS.MODULES.INSTALL_STATE',
                        sortable: true
                    },
                    {
                        type: 'text',
                        key: 'versionMin',
                        title: 'ABOUT.TABLE_HEADERS.MODULES.VERSION_MIN',
                        sortable: true
                    },
                    {
                        type: 'text',
                        key: 'versionMax',
                        title: 'ABOUT.TABLE_HEADERS.MODULES.VERSION_MAX',
                        sortable: true
                    }
                ]);
                _this.status = new ObjectDataTableAdapter([_this.ecmVersion.status], [
                    { type: 'text', key: 'isReadOnly', title: 'ABOUT.TABLE_HEADERS.STATUS.READ_ONLY', sortable: true },
                    {
                        type: 'text',
                        key: 'isAuditEnabled',
                        title: 'ABOUT.TABLE_HEADERS.STATUS.AUDIT_ENABLED',
                        sortable: true
                    },
                    {
                        type: 'text',
                        key: 'isQuickShareEnabled',
                        title: 'ABOUT.TABLE_HEADERS.STATUS.QUICK_SHARE_ENABLED',
                        sortable: true
                    },
                    {
                        type: 'text',
                        key: 'isThumbnailGenerationEnabled',
                        title: 'ABOUT.TABLE_HEADERS.STATUS.THUMBNAIL_ENABLED',
                        sortable: true
                    }
                ]);
                _this.license = new ObjectDataTableAdapter([_this.ecmVersion.license], [
                    { type: 'text', key: 'issuedAt', title: 'ABOUT.TABLE_HEADERS.LICENSE.ISSUES_AT', sortable: true },
                    { type: 'text', key: 'expiresAt', title: 'ABOUT.TABLE_HEADERS.LICENSE.EXPIRES_AT', sortable: true },
                    {
                        type: 'text',
                        key: 'remainingDays',
                        title: 'ABOUT.TABLE_HEADERS.LICENSE.REMAINING_DAYS',
                        sortable: true
                    },
                    { type: 'text', key: 'holder', title: 'ABOUT.TABLE_HEADERS.LICENSE.HOLDER', sortable: true },
                    { type: 'text', key: 'mode', title: 'ABOUT.TABLE_HEADERS.LICENSE.MODE', sortable: true },
                    {
                        type: 'text',
                        key: 'isClusterEnabled',
                        title: 'ABOUT.TABLE_HEADERS.LICENSE.CLUSTER_ENABLED',
                        sortable: true
                    },
                    {
                        type: 'text',
                        key: 'isCryptodocEnabled',
                        title: 'ABOUT.TABLE_HEADERS.LICENSE.CRYPTODOC_ENABLED',
                        sortable: true
                    }
                ]);
            });
        };
        AboutProductVersionComponent.prototype.setBPMInfo = function () {
            var _this = this;
            this.discovery.getBpmProductInfo().subscribe(function (bpmVersion) {
                _this.bpmVersion = bpmVersion;
            });
        };
        return AboutProductVersionComponent;
    }());
    AboutProductVersionComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-about-product-version',
                    template: "<div class=\"adf-about-product-version-container\" *ngIf=\"bpmVersion || ecmVersion\">\n    <h3 data-automation-id=\"adf-about-product-version-title\">{{ 'ABOUT.VERSIONS.TITLE' | translate }}</h3>\n        <mat-card>\n            <div *ngIf=\"bpmVersion\" data-automation-id=\"adf-about-bpm-service\">\n                <h3>{{ 'ABOUT.VERSIONS.PROCESS_SERVICE' | translate }}</h3>\n                <p data-automation-id=\"adf-about-bpm-edition\">\n                    {{ 'ABOUT.VERSIONS.LABELS.EDITION' | translate }}: {{ bpmVersion.edition }}\n                </p>\n                <p data-automation-id=\"adf-about-bpm-version\">\n                    {{ 'ABOUT.VERSIONS.LABELS.VERSION' | translate }}: {{ bpmVersion.majorVersion }}.{{\n                    bpmVersion.minorVersion }}.{{ bpmVersion.revisionVersion }}\n                </p>\n            </div>\n            <div *ngIf=\"ecmVersion\" data-automation-id=\"adf-about-ecm-service\">\n                <h3>{{ 'ABOUT.VERSIONS.CONTENT_SERVICE' | translate }}</h3>\n                <p data-automation-id=\"adf-about-ecm-edition\">\n                    {{ 'ABOUT.VERSIONS.LABELS.EDITION' | translate }}: {{ ecmVersion.edition }}\n                </p>\n                <p data-automation-id=\"adf-about-ecm-version\">\n                    {{ 'ABOUT.VERSIONS.LABELS.VERSION' | translate }}: {{ ecmVersion.version.display }}\n                </p>\n            </div>\n        </mat-card>\n    <div *ngIf=\"ecmVersion\" data-automation-id=\"adf-about-ecm\">\n        <h3 data-automation-id=\"adf-about-ecm-license-title\">{{ 'ABOUT.VERSIONS.LABELS.LICENSE' | translate }}</h3>\n        <adf-datatable [data]=\"license\"></adf-datatable>\n        <h3 data-automation-id=\"adf-about-ecm-status-title\"> {{ 'ABOUT.VERSIONS.LABELS.STATUS' | translate }}</h3>\n        <adf-datatable [data]=\"status\"></adf-datatable>\n        <h3 data-automation-id=\"adf-about-ecm-modules-title\">{{ 'ABOUT.VERSIONS.LABELS.MODULES' | translate }}</h3>\n        <adf-datatable [data]=\"modules\"></adf-datatable>\n    </div>\n</div>\n\n\n\n",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    AboutProductVersionComponent.ctorParameters = function () { return [
        { type: AuthenticationService },
        { type: DiscoveryApiService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AboutApplicationModulesComponent = /** @class */ (function () {
        function AboutApplicationModulesComponent(appExtensions) {
            this.appExtensions = appExtensions;
            this.extensionColumns = ['$id', '$name', '$version', '$vendor', '$license', '$runtime', '$description'];
            this.showExtensions = true;
            this.regexp = '^(@alfresco)';
            this.onDestroy$ = new rxjs.Subject();
        }
        AboutApplicationModulesComponent.prototype.ngOnInit = function () {
            var _this = this;
            var alfrescoPackages = Object.keys(this.dependencies).filter(function (val) {
                return new RegExp(_this.regexp).test(val);
            });
            var alfrescoPackagesTableRepresentation = [];
            alfrescoPackages.forEach(function (val) {
                alfrescoPackagesTableRepresentation.push({
                    name: val,
                    version: (_this.dependencies[val])
                });
            });
            this.dependencyEntries = new ObjectDataTableAdapter(alfrescoPackagesTableRepresentation, [
                { type: 'text', key: 'name', title: 'Name', sortable: true },
                { type: 'text', key: 'version', title: 'Version', sortable: true }
            ]);
            this.appExtensions.references$
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (extensions) { return _this.extensions = extensions; });
        };
        AboutApplicationModulesComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        return AboutApplicationModulesComponent;
    }());
    AboutApplicationModulesComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-about-application-modules',
                    template: "<div class=\"adf-about-modules-container\">\n    <h3 data-automation-id=\"adf-about-modules-title\">{{ 'ABOUT.PACKAGES.TITLE' | translate }}</h3>\n    <small>{{ 'ABOUT.PACKAGES.DESCRIPTION' | translate }}</small>\n    <adf-datatable [data]=\"dependencyEntries\"></adf-datatable>\n\n    <div class=\"adf-extension-details-container\" *ngIf=\"showExtensions && extensions.length\">\n        <h3>{{ 'ABOUT.EXTENSIONS.TITLE' | translate }}</h3>\n        <mat-table [dataSource]=\"extensions\">\n            <!-- $id Column -->\n            <ng-container matColumnDef=\"$id\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.ID' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$id}}</mat-cell>\n            </ng-container>\n\n            <!-- $name Column -->\n            <ng-container matColumnDef=\"$name\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.NAME' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$name}}</mat-cell>\n            </ng-container>\n\n            <!-- $version Column -->\n            <ng-container matColumnDef=\"$version\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.VERSION' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$version}}</mat-cell>\n            </ng-container>\n\n            <!-- $vendor Column -->\n            <ng-container matColumnDef=\"$vendor\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.VENDOR' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$vendor}}</mat-cell>\n            </ng-container>\n\n            <!-- $license Column -->\n            <ng-container matColumnDef=\"$license\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.LICENSE' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$license}}</mat-cell>\n            </ng-container>\n\n            <!-- $runtime Column -->\n            <ng-container matColumnDef=\"$runtime\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.RUNTIME' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$runtime}}</mat-cell>\n            </ng-container>\n\n            <!-- $description Column -->\n            <ng-container matColumnDef=\"$description\">\n                <mat-header-cell\n                    *matHeaderCellDef>{{ 'ABOUT.EXTENSIONS.TABLE_HEADERS.DESCRIPTION' | translate }}</mat-header-cell>\n                <mat-cell *matCellDef=\"let element\">{{element.$description}}</mat-cell>\n            </ng-container>\n\n            <mat-header-row *matHeaderRowDef=\"extensionColumns\"></mat-header-row>\n            <mat-row *matRowDef=\"let row; columns: extensionColumns;\"></mat-row>\n        </mat-table>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    AboutApplicationModulesComponent.ctorParameters = function () { return [
        { type: i2.AppExtensionService }
    ]; };
    AboutApplicationModulesComponent.propDecorators = {
        showExtensions: [{ type: i0.Input }],
        regexp: [{ type: i0.Input }],
        dependencies: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AboutServerSettingsComponent = /** @class */ (function () {
        function AboutServerSettingsComponent(appConfig) {
            this.appConfig = appConfig;
            this.ecmHost = '';
            this.bpmHost = '';
        }
        AboutServerSettingsComponent.prototype.ngOnInit = function () {
            this.ecmHost = this.appConfig.get(exports.AppConfigValues.ECMHOST);
            this.bpmHost = this.appConfig.get(exports.AppConfigValues.BPMHOST);
        };
        return AboutServerSettingsComponent;
    }());
    AboutServerSettingsComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-about-server-settings',
                    template: "<div class=\"adf-github-link-container\">\n    <h3 data-automation-id=\"adf-about-setting-title\">{{ 'ABOUT.SERVER_SETTINGS.TITLE' | translate }}</h3>\n    <small>{{ 'ABOUT.SERVER_SETTINGS.DESCRIPTION' | translate }}</small>\n    <mat-card>\n        <p data-automation-id=\"adf-process-service-host\">\n            {{ 'ABOUT.SERVER_SETTINGS.PROCESS_SERVICE_HOST' | translate: {value: bpmHost} }}\n        </p>\n        <p data-automation-id=\"adf-content-service-host\">\n            {{ 'ABOUT.SERVER_SETTINGS.CONTENT_SERVICE_HOST' | translate: {value: ecmHost} }}\n        </p>\n    </mat-card>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    AboutServerSettingsComponent.ctorParameters = function () { return [
        { type: AppConfigService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var MaterialModule = /** @class */ (function () {
        function MaterialModule() {
        }
        return MaterialModule;
    }());
    MaterialModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        autocomplete.MatAutocompleteModule, button.MatButtonModule, card.MatCardModule, checkbox.MatCheckboxModule,
                        chips.MatChipsModule, datepicker.MatDatepickerModule, i4.MatDialogModule, gridList.MatGridListModule, i2$1.MatIconModule,
                        input.MatInputModule, list.MatListModule, core.MatNativeDateModule, core.MatOptionModule, progressSpinner.MatProgressSpinnerModule, radio.MatRadioModule,
                        core.MatRippleModule, select.MatSelectModule, slideToggle.MatSlideToggleModule, table.MatTableModule, tabs.MatTabsModule,
                        menu.MatMenuModule, progressBar.MatProgressBarModule, sidenav.MatSidenavModule, i1$3.MatSnackBarModule, toolbar.MatToolbarModule,
                        tooltip.MatTooltipModule, core$1.MatDatetimepickerModule, core$1.MatNativeDatetimeModule, expansion.MatExpansionModule, badge.MatBadgeModule
                    ],
                    exports: [
                        autocomplete.MatAutocompleteModule, button.MatButtonModule, card.MatCardModule, checkbox.MatCheckboxModule,
                        chips.MatChipsModule, datepicker.MatDatepickerModule, i4.MatDialogModule, gridList.MatGridListModule, i2$1.MatIconModule,
                        input.MatInputModule, list.MatListModule, core.MatNativeDateModule, core.MatOptionModule, progressSpinner.MatProgressSpinnerModule, radio.MatRadioModule,
                        core.MatRippleModule, select.MatSelectModule, slideToggle.MatSlideToggleModule, table.MatTableModule, tabs.MatTabsModule,
                        menu.MatMenuModule, progressBar.MatProgressBarModule, sidenav.MatSidenavModule, i1$3.MatSnackBarModule, toolbar.MatToolbarModule,
                        tooltip.MatTooltipModule, core$1.MatDatetimepickerModule, core$1.MatNativeDatetimeModule, expansion.MatExpansionModule, badge.MatBadgeModule
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ContextMenuOverlayRef = /** @class */ (function () {
        function ContextMenuOverlayRef(overlayRef) {
            this.overlayRef = overlayRef;
        }
        ContextMenuOverlayRef.prototype.close = function () {
            this.overlayRef.dispose();
        };
        return ContextMenuOverlayRef;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CONTEXT_MENU_DATA = new i0.InjectionToken('CONTEXT_MENU_DATA');

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var contextMenuAnimation = [
        animations.state('void', animations.style({
            opacity: 0,
            transform: 'scale(0.01, 0.01)'
        })),
        animations.transition('void => *', animations.sequence([
            animations.query('.mat-menu-content', animations.style({ opacity: 0 })),
            animations.animate('100ms linear', animations.style({ opacity: 1, transform: 'scale(1, 0.5)' })),
            animations.group([
                animations.query('.mat-menu-content', animations.animate('400ms cubic-bezier(0.55, 0, 0.55, 0.2)', animations.style({ opacity: 1 }))),
                animations.animate('300ms cubic-bezier(0.25, 0.8, 0.25, 1)', animations.style({ transform: 'scale(1, 1)' }))
            ])
        ])),
        animations.transition('* => void', animations.animate('150ms 50ms linear', animations.style({ opacity: 0 })))
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ContextMenuListComponent = /** @class */ (function () {
        function ContextMenuListComponent(contextMenuOverlayRef, data) {
            this.contextMenuOverlayRef = contextMenuOverlayRef;
            this.data = data;
            this.links = this.data;
        }
        ContextMenuListComponent.prototype.handleKeydownEscape = function (event) {
            if (event) {
                this.contextMenuOverlayRef.close();
            }
        };
        ContextMenuListComponent.prototype.handleKeydownEvent = function (event) {
            if (event) {
                var keyCode = event.keyCode;
                if (keyCode === keycodes.UP_ARROW || keyCode === keycodes.DOWN_ARROW) {
                    this.keyManager.onKeydown(event);
                }
            }
        };
        ContextMenuListComponent.prototype.onMenuItemClick = function (event, menuItem) {
            if (menuItem && menuItem.model && menuItem.model.disabled) {
                event.preventDefault();
                event.stopImmediatePropagation();
                return;
            }
            menuItem.subject.next(menuItem);
            this.contextMenuOverlayRef.close();
        };
        ContextMenuListComponent.prototype.ngAfterViewInit = function () {
            this.keyManager = new a11y.FocusKeyManager(this.items);
            this.keyManager.setFirstItemActive();
        };
        return ContextMenuListComponent;
    }());
    ContextMenuListComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-context-menu',
                    template: "\n        <div mat-menu class=\"mat-menu-panel\" @panelAnimation>\n            <div id=\"adf-context-menu-content\" class=\"mat-menu-content\">\n                <ng-container *ngFor=\"let link of links\">\n                    <button *ngIf=\"link.model?.visible\"\n                            [attr.data-automation-id]=\"'context-'+((link.title || link.model?.title) | translate)\"\n                            mat-menu-item\n                            [disabled]=\"link.model?.disabled\"\n                            (click)=\"onMenuItemClick($event, link)\">\n                        <mat-icon *ngIf=\"link.model?.icon\">{{ link.model.icon }}</mat-icon>\n                        <span>{{ (link.title || link.model?.title) | translate }}</span>\n                    </button>\n                </ng-container>\n            </div>\n        </div>\n    ",
                    host: {
                        role: 'menu',
                        class: 'adf-context-menu'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    animations: [
                        animations.trigger('panelAnimation', contextMenuAnimation)
                    ]
                },] }
    ];
    ContextMenuListComponent.ctorParameters = function () { return [
        { type: ContextMenuOverlayRef, decorators: [{ type: i0.Inject, args: [ContextMenuOverlayRef,] }] },
        { type: undefined, decorators: [{ type: i0.Optional }, { type: i0.Inject, args: [CONTEXT_MENU_DATA,] }] }
    ]; };
    ContextMenuListComponent.propDecorators = {
        items: [{ type: i0.ViewChildren, args: [menu.MatMenuItem,] }],
        handleKeydownEscape: [{ type: i0.HostListener, args: ['document:keydown.Escape', ['$event'],] }],
        handleKeydownEvent: [{ type: i0.HostListener, args: ['document:keydown', ['$event'],] }]
    };

    var DEFAULT_CONFIG = {
        panelClass: 'cdk-overlay-pane',
        backdropClass: 'cdk-overlay-transparent-backdrop',
        hasBackdrop: true
    };
    var ContextMenuOverlayService = /** @class */ (function () {
        function ContextMenuOverlayService(injector, overlay) {
            this.injector = injector;
            this.overlay = overlay;
        }
        ContextMenuOverlayService.prototype.open = function (config) {
            var overlayConfig = Object.assign(Object.assign({}, DEFAULT_CONFIG), config);
            var overlay = this.createOverlay(overlayConfig);
            var overlayRef = new ContextMenuOverlayRef(overlay);
            this.attachDialogContainer(overlay, config, overlayRef);
            overlay.backdropClick().subscribe(function () { return overlayRef.close(); });
            if (overlayConfig.hasBackdrop) {
                overlay._backdropElement
                    .addEventListener('contextmenu', function (event) {
                    event.preventDefault();
                    overlay._backdropClick.next(null);
                }, true);
            }
            return overlayRef;
        };
        ContextMenuOverlayService.prototype.createOverlay = function (config) {
            var overlayConfig = this.getOverlayConfig(config);
            return this.overlay.create(overlayConfig);
        };
        ContextMenuOverlayService.prototype.attachDialogContainer = function (overlay, config, contextMenuOverlayRef) {
            var injector = this.createInjector(config, contextMenuOverlayRef);
            var containerPortal = new portal.ComponentPortal(ContextMenuListComponent, null, injector);
            var containerRef = overlay.attach(containerPortal);
            return containerRef.instance;
        };
        ContextMenuOverlayService.prototype.createInjector = function (config, contextMenuOverlayRef) {
            var injectionTokens = new WeakMap();
            injectionTokens.set(ContextMenuOverlayRef, contextMenuOverlayRef);
            injectionTokens.set(CONTEXT_MENU_DATA, config.data);
            return new portal.PortalInjector(this.injector, injectionTokens);
        };
        ContextMenuOverlayService.prototype.getOverlayConfig = function (config) {
            var _a = config.source, clientY = _a.clientY, clientX = _a.clientX;
            var fakeElement = {
                getBoundingClientRect: function () { return ({
                    bottom: clientY,
                    height: 0,
                    left: clientX,
                    right: clientX,
                    top: clientY,
                    width: 0
                }); }
            };
            var positionStrategy = this.overlay.position()
                .connectedTo(new i0.ElementRef(fakeElement), { originX: 'start', originY: 'bottom' }, { overlayX: 'start', overlayY: 'top' })
                .withFallbackPosition({ originX: 'start', originY: 'top' }, { overlayX: 'start', overlayY: 'bottom' })
                .withFallbackPosition({ originX: 'end', originY: 'top' }, { overlayX: 'start', overlayY: 'top' })
                .withFallbackPosition({ originX: 'start', originY: 'top' }, { overlayX: 'end', overlayY: 'top' })
                .withFallbackPosition({ originX: 'end', originY: 'center' }, { overlayX: 'start', overlayY: 'center' })
                .withFallbackPosition({ originX: 'start', originY: 'center' }, { overlayX: 'end', overlayY: 'center' });
            var overlayConfig = new i1$4.OverlayConfig({
                hasBackdrop: config.hasBackdrop,
                backdropClass: config.backdropClass,
                panelClass: config.panelClass,
                scrollStrategy: this.overlay.scrollStrategies.close(),
                positionStrategy: positionStrategy
            });
            return overlayConfig;
        };
        return ContextMenuOverlayService;
    }());
    ContextMenuOverlayService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ContextMenuOverlayService_Factory() { return new ContextMenuOverlayService(i0.ɵɵinject(i0.INJECTOR), i0.ɵɵinject(i1$4.Overlay)); }, token: ContextMenuOverlayService, providedIn: "root" });
    ContextMenuOverlayService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    ContextMenuOverlayService.ctorParameters = function () { return [
        { type: i0.Injector },
        { type: i1$4.Overlay }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ContextMenuDirective = /** @class */ (function () {
        function ContextMenuDirective(contextMenuService) {
            this.contextMenuService = contextMenuService;
            this.enabled = false;
        }
        ContextMenuDirective.prototype.onShowContextMenu = function (event) {
            if (this.enabled) {
                if (event) {
                    event.preventDefault();
                }
                if (this.links && this.links.length > 0) {
                    this.contextMenuService.open({
                        source: event,
                        data: this.links
                    });
                }
            }
        };
        return ContextMenuDirective;
    }());
    ContextMenuDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-context-menu]'
                },] }
    ];
    ContextMenuDirective.ctorParameters = function () { return [
        { type: ContextMenuOverlayService }
    ]; };
    ContextMenuDirective.propDecorators = {
        links: [{ type: i0.Input, args: ['adf-context-menu',] }],
        enabled: [{ type: i0.Input, args: ['adf-context-menu-enabled',] }],
        onShowContextMenu: [{ type: i0.HostListener, args: ['contextmenu', ['$event'],] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ContextMenuModule = /** @class */ (function () {
        function ContextMenuModule() {
        }
        return ContextMenuModule;
    }());
    ContextMenuModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        ContextMenuDirective,
                        ContextMenuListComponent
                    ],
                    exports: [
                        ContextMenuDirective
                    ]
                },] }
    ];

    (function (UserPreferenceValues) {
        UserPreferenceValues["PaginationSize"] = "paginationSize";
        UserPreferenceValues["Locale"] = "locale";
        UserPreferenceValues["SupportedPageSizes"] = "supportedPageSizes";
        UserPreferenceValues["ExpandedSideNavStatus"] = "expandedSidenav";
    })(exports.UserPreferenceValues || (exports.UserPreferenceValues = {}));
    var UserPreferencesService = /** @class */ (function () {
        function UserPreferencesService(translate, appConfig, storage, alfrescoApiService) {
            this.translate = translate;
            this.appConfig = appConfig;
            this.storage = storage;
            this.alfrescoApiService = alfrescoApiService;
            this.defaults = {
                paginationSize: 25,
                supportedPageSizes: [5, 10, 15, 20],
                locale: 'en',
                expandedSidenav: true
            };
            this.userPreferenceStatus = this.defaults;
            this.alfrescoApiService.alfrescoApiInitialized.pipe(operators.filter(function (status) { return status; })).subscribe(this.initUserPreferenceStatus.bind(this));
            this.onChangeSubject = new rxjs.BehaviorSubject(this.userPreferenceStatus);
            this.onChange = this.onChangeSubject.asObservable();
        }
        UserPreferencesService.prototype.initUserPreferenceStatus = function () {
            this.initUserLanguage();
            this.set(exports.UserPreferenceValues.PaginationSize, this.paginationSize);
            this.set(exports.UserPreferenceValues.SupportedPageSizes, JSON.stringify(this.supportedPageSizes));
        };
        UserPreferencesService.prototype.initUserLanguage = function () {
            if (this.locale || this.appConfig.get(exports.UserPreferenceValues.Locale)) {
                var locale = this.locale || this.getDefaultLocale();
                this.set(exports.UserPreferenceValues.Locale, locale);
                this.set('textOrientation', this.getLanguageByKey(locale).direction || 'ltr');
            }
            else {
                var locale = this.locale || this.getDefaultLocale();
                this.setWithoutStore(exports.UserPreferenceValues.Locale, locale);
                this.setWithoutStore('textOrientation', this.getLanguageByKey(locale).direction || 'ltr');
            }
        };
        UserPreferencesService.prototype.select = function (property) {
            return this.onChange
                .pipe(operators.map(function (userPreferenceStatus) { return userPreferenceStatus[property]; }), operators.distinctUntilChanged());
        };
        UserPreferencesService.prototype.get = function (property, defaultValue) {
            var key = this.getPropertyKey(property);
            var value = this.storage.getItem(key);
            if (value === undefined || value === null) {
                return defaultValue;
            }
            return value;
        };
        UserPreferencesService.prototype.set = function (property, value) {
            if (!property) {
                return;
            }
            this.storage.setItem(this.getPropertyKey(property), value);
            this.userPreferenceStatus[property] = value;
            this.onChangeSubject.next(this.userPreferenceStatus);
        };
        UserPreferencesService.prototype.setWithoutStore = function (property, value) {
            if (!property) {
                return;
            }
            this.userPreferenceStatus[property] = value;
            this.onChangeSubject.next(this.userPreferenceStatus);
        };
        UserPreferencesService.prototype.hasItem = function (property) {
            if (!property) {
                return false;
            }
            return this.storage.hasItem(this.getPropertyKey(property));
        };
        UserPreferencesService.prototype.getStoragePrefix = function () {
            return this.storage.getItem('USER_PROFILE') || 'GUEST';
        };
        UserPreferencesService.prototype.setStoragePrefix = function (value) {
            this.storage.setItem('USER_PROFILE', value || 'GUEST');
            this.initUserPreferenceStatus();
        };
        UserPreferencesService.prototype.getPropertyKey = function (property) {
            return this.getStoragePrefix() + "__" + property;
        };
        Object.defineProperty(UserPreferencesService.prototype, "supportedPageSizes", {
            get: function () {
                var supportedPageSizes = this.get(exports.UserPreferenceValues.SupportedPageSizes);
                if (supportedPageSizes) {
                    return JSON.parse(supportedPageSizes);
                }
                else {
                    return this.appConfig.get('pagination.supportedPageSizes', this.defaults.supportedPageSizes);
                }
            },
            set: function (value) {
                this.set(exports.UserPreferenceValues.SupportedPageSizes, JSON.stringify(value));
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(UserPreferencesService.prototype, "paginationSize", {
            get: function () {
                var paginationSize = this.get(exports.UserPreferenceValues.PaginationSize);
                if (paginationSize) {
                    return Number(paginationSize);
                }
                else {
                    return Number(this.appConfig.get('pagination.size', this.defaults.paginationSize));
                }
            },
            set: function (value) {
                this.set(exports.UserPreferenceValues.PaginationSize, value);
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(UserPreferencesService.prototype, "locale", {
            get: function () {
                return this.get(exports.UserPreferenceValues.Locale);
            },
            set: function (value) {
                this.set(exports.UserPreferenceValues.Locale, value);
            },
            enumerable: false,
            configurable: true
        });
        UserPreferencesService.prototype.getDefaultLocale = function () {
            return this.appConfig.get(exports.UserPreferenceValues.Locale) || this.translate.getBrowserCultureLang() || 'en';
        };
        UserPreferencesService.prototype.getLanguageByKey = function (key) {
            return (this.appConfig
                .get(exports.AppConfigValues.APP_CONFIG_LANGUAGES_KEY, [{ key: 'en' }])
                .find(function (language) { return key.includes(language.key); }) || { key: 'en' });
        };
        return UserPreferencesService;
    }());
    UserPreferencesService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UserPreferencesService_Factory() { return new UserPreferencesService(i0.ɵɵinject(i1$2.TranslateService), i0.ɵɵinject(AppConfigService), i0.ɵɵinject(StorageService), i0.ɵɵinject(AlfrescoApiService)); }, token: UserPreferencesService, providedIn: "root" });
    UserPreferencesService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    UserPreferencesService.ctorParameters = function () { return [
        { type: i1$2.TranslateService },
        { type: AppConfigService },
        { type: StorageService },
        { type: AlfrescoApiService }
    ]; };

    var TRANSLATION_PROVIDER = new i0.InjectionToken('Injection token for translation providers.');
    var TranslationService = /** @class */ (function () {
        function TranslationService(translate, userPreferencesService, providers) {
            var e_1, _a;
            var _this = this;
            this.translate = translate;
            this.customLoader = this.translate.currentLoader;
            this.defaultLang = 'en';
            translate.setDefaultLang(this.defaultLang);
            this.customLoader.setDefaultLang(this.defaultLang);
            if (providers && providers.length > 0) {
                try {
                    for (var providers_1 = __values(providers), providers_1_1 = providers_1.next(); !providers_1_1.done; providers_1_1 = providers_1.next()) {
                        var provider = providers_1_1.value;
                        this.addTranslationFolder(provider.name, provider.source);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (providers_1_1 && !providers_1_1.done && (_a = providers_1.return)) _a.call(providers_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            userPreferencesService.select(exports.UserPreferenceValues.Locale).subscribe(function (locale) {
                if (locale) {
                    _this.userLang = locale;
                    _this.use(_this.userLang);
                }
            });
        }
        TranslationService.prototype.addTranslationFolder = function (name, path) {
            if (name === void 0) { name = ''; }
            if (path === void 0) { path = ''; }
            if (!this.customLoader.providerRegistered(name)) {
                this.customLoader.registerProvider(name, path);
                if (this.userLang) {
                    this.loadTranslation(this.userLang, this.defaultLang);
                }
                else {
                    this.loadTranslation(this.defaultLang);
                }
            }
        };
        TranslationService.prototype.loadTranslation = function (lang, fallback) {
            var _this = this;
            this.translate.getTranslation(lang).subscribe(function () {
                _this.translate.use(lang);
                _this.onTranslationChanged(lang);
            }, function () {
                if (fallback && fallback !== lang) {
                    _this.loadTranslation(fallback);
                }
            });
        };
        TranslationService.prototype.onTranslationChanged = function (lang) {
            this.translate.onTranslationChange.next({
                lang: lang,
                translations: this.customLoader.getFullTranslationJSON(lang)
            });
        };
        TranslationService.prototype.use = function (lang) {
            this.customLoader.init(lang);
            return this.translate.use(lang);
        };
        TranslationService.prototype.get = function (key, interpolateParams) {
            return this.translate.get(key, interpolateParams);
        };
        TranslationService.prototype.instant = function (key, interpolateParams) {
            return key ? this.translate.instant(key, interpolateParams) : '';
        };
        return TranslationService;
    }());
    TranslationService.ɵprov = i0.ɵɵdefineInjectable({ factory: function TranslationService_Factory() { return new TranslationService(i0.ɵɵinject(i1$2.TranslateService), i0.ɵɵinject(UserPreferencesService), i0.ɵɵinject(TRANSLATION_PROVIDER, 8)); }, token: TranslationService, providedIn: "root" });
    TranslationService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    TranslationService.ctorParameters = function () { return [
        { type: i1$2.TranslateService },
        { type: UserPreferencesService },
        { type: Array, decorators: [{ type: i0.Optional }, { type: i0.Inject, args: [TRANSLATION_PROVIDER,] }] }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FileSizePipe = /** @class */ (function () {
        function FileSizePipe(translation) {
            this.translation = translation;
        }
        FileSizePipe.prototype.transform = function (paramByte, decimals) {
            if (decimals === void 0) { decimals = 2; }
            if (paramByte == null) {
                return '';
            }
            var bytes = parseInt(paramByte, 10);
            if (isNaN(bytes)) {
                return '';
            }
            if (bytes === 0) {
                return '0 ' + this.translation.instant('CORE.FILE_SIZE.BYTES');
            }
            var k = 1024, dm = decimals || 2, sizes = ['BYTES', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'], i = Math.floor(Math.log(bytes) / Math.log(k));
            var i18nSize = this.translation.instant("CORE.FILE_SIZE." + sizes[i]);
            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + i18nSize;
        };
        return FileSizePipe;
    }());
    FileSizePipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfFileSize',
                    pure: false
                },] }
    ];
    FileSizePipe.ctorParameters = function () { return [
        { type: TranslationService }
    ]; };

    var ThumbnailService = /** @class */ (function () {
        function ThumbnailService(apiService, matIconRegistry, sanitizer) {
            var _this = this;
            this.apiService = apiService;
            this.DEFAULT_ICON = './assets/images/ft_ic_miscellaneous.svg';
            this.mimeTypeIcons = {
                'image/png': './assets/images/ft_ic_raster_image.svg',
                'image/jpeg': './assets/images/ft_ic_raster_image.svg',
                'image/gif': './assets/images/ft_ic_raster_image.svg',
                'image/bmp': './assets/images/ft_ic_raster_image.svg',
                'image/cgm': './assets/images/ft_ic_raster_image.svg',
                'image/ief': './assets/images/ft_ic_raster_image.svg',
                'image/jp2': './assets/images/ft_ic_raster_image.svg',
                'image/tiff': './assets/images/ft_ic_raster_image.svg',
                'image/vnd.adobe.photoshop': './assets/images/ft_ic_raster_image.svg',
                'image/vnd.adobe.premiere': './assets/images/ft_ic_raster_image.svg',
                'image/x-cmu-raster': './assets/images/ft_ic_raster_image.svg',
                'image/x-dwt': './assets/images/ft_ic_raster_image.svg',
                'image/x-portable-anymap': './assets/images/ft_ic_raster_image.svg',
                'image/x-portable-bitmap': './assets/images/ft_ic_raster_image.svg',
                'image/x-portable-graymap': './assets/images/ft_ic_raster_image.svg',
                'image/x-portable-pixmap': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-adobe': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-canon': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-fuji': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-hasselblad': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-kodak': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-leica': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-minolta': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-nikon': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-olympus': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-panasonic': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-pentax': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-red': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-sigma': './assets/images/ft_ic_raster_image.svg',
                'image/x-raw-sony': './assets/images/ft_ic_raster_image.svg',
                'image/x-xbitmap': './assets/images/ft_ic_raster_image.svg',
                'image/x-xpixmap': './assets/images/ft_ic_raster_image.svg',
                'image/x-xwindowdump': './assets/images/ft_ic_raster_image.svg',
                'image/svg+xml': './assets/images/ft_ic_vector_image.svg',
                'application/eps': './assets/images/ft_ic_raster_image.svg',
                'application/illustrator': './assets/images/ft_ic_raster_image.svg',
                'application/pdf': './assets/images/ft_ic_pdf.svg',
                'application/vnd.ms-excel': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.openxmlformats-officedocument.spreadsheetml.template': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.ms-excel.addin.macroenabled.12': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.ms-excel.sheet.binary.macroenabled.12': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.ms-excel.sheet.macroenabled.12': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.ms-excel.template.macroenabled.12': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.sun.xml.calc': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.sun.xml.calc.template': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.ms-outlook': './assets/images/ft_ic_document.svg',
                'application/msword': './assets/images/ft_ic_ms_word.svg',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document': './assets/images/ft_ic_ms_word.svg',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.template': './assets/images/ft_ic_ms_word.svg',
                'application/vnd.ms-word.document.macroenabled.12': './assets/images/ft_ic_ms_word.svg',
                'application/vnd.ms-word.template.macroenabled.12': './assets/images/ft_ic_ms_word.svg',
                'application/vnd.sun.xml.writer': './assets/images/ft_ic_ms_word.svg',
                'application/vnd.sun.xml.writer.template': './assets/images/ft_ic_ms_word.svg',
                'application/rtf': './assets/images/ft_ic_ms_word.svg',
                'text/rtf': './assets/images/ft_ic_ms_word.svg',
                'application/vnd.ms-powerpoint': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.openxmlformats-officedocument.presentationml.presentation': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.openxmlformats-officedocument.presentationml.template': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.openxmlformats-officedocument.presentationml.slideshow': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.oasis.opendocument.presentation': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.oasis.opendocument.presentation-template': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.openxmlformats-officedocument.presentationml.slide': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.sun.xml.impress': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.sun.xml.impress.template': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.oasis.opendocument.spreadsheet': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.oasis.opendocument.spreadsheet-template': './assets/images/ft_ic_ms_excel.svg',
                'application/vnd.ms-powerpoint.addin.macroenabled.12': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.ms-powerpoint.presentation.macroenabled.12': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.ms-powerpoint.slide.macroenabled.12': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.ms-powerpoint.slideshow.macroenabled.12': './assets/images/ft_ic_ms_powerpoint.svg',
                'application/vnd.ms-powerpoint.template.macroenabled.12': './assets/images/ft_ic_ms_powerpoint.svg',
                'video/mp4': './assets/images/ft_ic_video.svg',
                'video/3gpp': './assets/images/ft_ic_video.svg',
                'video/3gpp2': './assets/images/ft_ic_video.svg',
                'video/mp2t': './assets/images/ft_ic_video.svg',
                'video/mpeg': './assets/images/ft_ic_video.svg',
                'video/mpeg2': './assets/images/ft_ic_video.svg',
                'video/ogg': './assets/images/ft_ic_video.svg',
                'video/quicktime': './assets/images/ft_ic_video.svg',
                'video/webm': './assets/images/ft_ic_video.svg',
                'video/x-flv': './assets/images/ft_ic_video.svg',
                'video/x-m4v': './assets/images/ft_ic_video.svg',
                'video/x-ms-asf': './assets/images/ft_ic_video.svg',
                'video/x-ms-wmv': './assets/images/ft_ic_video.svg',
                'video/x-msvideo': './assets/images/ft_ic_video.svg',
                'video/x-rad-screenplay': './assets/images/ft_ic_video.svg',
                'video/x-sgi-movie': './assets/images/ft_ic_video.svg',
                'video/x-matroska': './assets/images/ft_ic_video.svg',
                'audio/mpeg': './assets/images/ft_ic_audio.svg',
                'audio/ogg': './assets/images/ft_ic_audio.svg',
                'audio/wav': './assets/images/ft_ic_audio.svg',
                'audio/basic': './assets/images/ft_ic_audio.svg',
                'audio/mp3': './assets/images/ft_ic_audio.svg',
                'audio/mp4': './assets/images/ft_ic_audio.svg',
                'audio/vnd.adobe.soundbooth': './assets/images/ft_ic_audio.svg',
                'audio/vorbis': './assets/images/ft_ic_audio.svg',
                'audio/x-aiff': './assets/images/ft_ic_audio.svg',
                'audio/x-flac': './assets/images/ft_ic_audio.svg',
                'audio/x-ms-wma': './assets/images/ft_ic_audio.svg',
                'audio/x-wav': './assets/images/ft_ic_audio.svg',
                'x-world/x-vrml': './assets/images/ft_ic_video.svg',
                'text/plain': './assets/images/ft_ic_document.svg',
                'application/vnd.oasis.opendocument.text': './assets/images/ft_ic_document.svg',
                'application/vnd.oasis.opendocument.text-template': './assets/images/ft_ic_document.svg',
                'application/x-javascript': './assets/images/ft_ic_document.svg',
                'application/json': './assets/images/ft_ic_document.svg',
                'text/csv': './assets/images/ft_ic_document.svg',
                'text/xml': './assets/images/ft_ic_document.svg',
                'text/html': './assets/images/ft_ic_website.svg',
                'application/x-compressed': './assets/images/ft_ic_archive.svg',
                'application/x-zip-compressed': './assets/images/ft_ic_archive.svg',
                'application/zip': './assets/images/ft_ic_archive.svg',
                'application/x-tar': './assets/images/ft_ic_archive.svg',
                'application/vnd.apple.keynote': './assets/images/ft_ic_presentation.svg',
                'application/vnd.apple.pages': './assets/images/ft_ic_document.svg',
                'application/vnd.apple.numbers': './assets/images/ft_ic_spreadsheet.svg',
                'application/vnd.visio': './assets/images/ft_ic_document.svg',
                'application/wordperfect': './assets/images/ft_ic_document.svg',
                'application/x-cpio': './assets/images/ft_ic_document.svg',
                'folder': './assets/images/ft_ic_folder.svg',
                'smartFolder': './assets/images/ft_ic_smart_folder.svg',
                'ruleFolder': './assets/images/ft_ic_folder_rule.svg',
                'linkFolder': './assets/images/ft_ic_folder_shortcut_link.svg',
                'disable/folder': './assets/images/ft_ic_folder_disable.svg',
                'selected': './assets/images/ft_ic_selected.svg',
                'dynamic-feed': './assets/images/dynamic_feed-24px.svg',
                'ic-process': './assets/images/ic-process.svg',
                'filter': './assets/images/ft_ic_filter.svg',
                'save-as': './assets/images/save-as.svg',
                'save': './assets/images/save.svg',
                'task': './assets/images/task.svg'
            };
            Object.keys(this.mimeTypeIcons).forEach(function (key) {
                var url = sanitizer.bypassSecurityTrustResourceUrl(_this.mimeTypeIcons[key]);
                matIconRegistry.addSvgIcon(key, url);
                matIconRegistry.addSvgIconInNamespace('adf', key, url);
            });
        }
        Object.defineProperty(ThumbnailService.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        ThumbnailService.prototype.getDocumentThumbnailUrl = function (node, attachment, ticket) {
            var resultUrl;
            if (node) {
                var nodeId = void 0;
                if (typeof node === 'string') {
                    nodeId = node;
                }
                else if (node.entry) {
                    nodeId = node.entry.id;
                }
                resultUrl = this.contentApi.getDocumentThumbnailUrl(nodeId, attachment, ticket);
            }
            return resultUrl || this.DEFAULT_ICON;
        };
        ThumbnailService.prototype.getMimeTypeIcon = function (mimeType) {
            var icon = this.mimeTypeIcons[mimeType];
            return (icon || this.DEFAULT_ICON);
        };
        ThumbnailService.prototype.getDefaultMimeTypeIcon = function () {
            return this.DEFAULT_ICON;
        };
        return ThumbnailService;
    }());
    ThumbnailService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ThumbnailService_Factory() { return new ThumbnailService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(i2$1.MatIconRegistry), i0.ɵɵinject(i3.DomSanitizer)); }, token: ThumbnailService, providedIn: "root" });
    ThumbnailService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    ThumbnailService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: i2$1.MatIconRegistry },
        { type: i3.DomSanitizer }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var MimeTypeIconPipe = /** @class */ (function () {
        function MimeTypeIconPipe(thumbnailService) {
            this.thumbnailService = thumbnailService;
        }
        MimeTypeIconPipe.prototype.transform = function (text) {
            return this.thumbnailService.getMimeTypeIcon(text);
        };
        return MimeTypeIconPipe;
    }());
    MimeTypeIconPipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfMimeTypeIcon'
                },] }
    ];
    MimeTypeIconPipe.ctorParameters = function () { return [
        { type: ThumbnailService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NodeNameTooltipPipe = /** @class */ (function () {
        function NodeNameTooltipPipe() {
        }
        NodeNameTooltipPipe.prototype.transform = function (node) {
            if (node) {
                return this.getNodeTooltip(node);
            }
            return null;
        };
        NodeNameTooltipPipe.prototype.containsLine = function (lines, line) {
            return lines.some(function (item) {
                return item.toLowerCase() === line.toLowerCase();
            });
        };
        NodeNameTooltipPipe.prototype.removeDuplicateLines = function (lines) {
            var _this = this;
            var reducer = function (acc, line) {
                if (!_this.containsLine(acc, line)) {
                    acc.push(line);
                }
                return acc;
            };
            return lines.reduce(reducer, []);
        };
        NodeNameTooltipPipe.prototype.getNodeTooltip = function (node) {
            if (!node || !node.entry) {
                return null;
            }
            var _a = node.entry, properties = _a.properties, name = _a.name;
            var lines = [name];
            if (properties) {
                var title = properties["cm:title"], description = properties["cm:description"];
                if (title && description) {
                    lines[0] = title;
                    lines[1] = description;
                }
                if (title) {
                    lines[1] = title;
                }
                if (description) {
                    lines[1] = description;
                }
            }
            return this.removeDuplicateLines(lines).join("\n");
        };
        return NodeNameTooltipPipe;
    }());
    NodeNameTooltipPipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfNodeNameTooltip'
                },] }
    ];

    var HighlightTransformService = /** @class */ (function () {
        function HighlightTransformService() {
        }
        HighlightTransformService.prototype.highlight = function (text, search, wrapperClass) {
            if (wrapperClass === void 0) { wrapperClass = 'adf-highlight'; }
            var isMatching = false, result = text;
            if (search && text) {
                var pattern = search.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
                pattern = pattern.split(' ').filter(function (t) {
                    return t.length > 0;
                }).join('|');
                var regex = new RegExp(pattern, 'gi');
                result = text.replace(/<[^>]+>/g, '').replace(regex, function (match) {
                    isMatching = true;
                    return "<span class=\"" + wrapperClass + "\">" + match + "</span>";
                });
                return { text: result, changed: isMatching };
            }
            else {
                return { text: result, changed: isMatching };
            }
        };
        return HighlightTransformService;
    }());
    HighlightTransformService.ɵprov = i0.ɵɵdefineInjectable({ factory: function HighlightTransformService_Factory() { return new HighlightTransformService(); }, token: HighlightTransformService, providedIn: "root" });
    HighlightTransformService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var HighlightPipe = /** @class */ (function () {
        function HighlightPipe(highlightTransformService) {
            this.highlightTransformService = highlightTransformService;
        }
        HighlightPipe.prototype.transform = function (text, search) {
            var highlightTransformResult = this.highlightTransformService.highlight(text, search);
            return highlightTransformResult.text;
        };
        return HighlightPipe;
    }());
    HighlightPipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'highlight'
                },] }
    ];
    HighlightPipe.ctorParameters = function () { return [
        { type: HighlightTransformService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var TimeAgoPipe = /** @class */ (function () {
        function TimeAgoPipe(userPreferenceService, appConfig) {
            var _this = this;
            this.userPreferenceService = userPreferenceService;
            this.appConfig = appConfig;
            this.onDestroy$ = new rxjs.Subject();
            this.userPreferenceService
                .select(exports.UserPreferenceValues.Locale)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (locale) {
                _this.defaultLocale = locale || TimeAgoPipe.DEFAULT_LOCALE;
            });
            this.defaultDateTimeFormat = this.appConfig.get('dateValues.defaultDateTimeFormat', TimeAgoPipe.DEFAULT_DATE_TIME_FORMAT);
        }
        TimeAgoPipe.prototype.transform = function (value, locale) {
            if (value !== null && value !== undefined) {
                var actualLocale = locale || this.defaultLocale;
                var then = moment$1(value);
                var diff = moment$1().locale(actualLocale).diff(then, 'days');
                if (diff > 7) {
                    var datePipe = new i1$1.DatePipe(actualLocale);
                    return datePipe.transform(value, this.defaultDateTimeFormat);
                }
                else {
                    return then.locale(actualLocale).fromNow();
                }
            }
            return '';
        };
        TimeAgoPipe.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        return TimeAgoPipe;
    }());
    TimeAgoPipe.DEFAULT_LOCALE = 'en-US';
    TimeAgoPipe.DEFAULT_DATE_TIME_FORMAT = 'dd/MM/yyyy HH:mm';
    TimeAgoPipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfTimeAgo'
                },] }
    ];
    TimeAgoPipe.ctorParameters = function () { return [
        { type: UserPreferencesService },
        { type: AppConfigService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var InitialUsernamePipe = /** @class */ (function () {
        function InitialUsernamePipe(sanitized) {
            this.sanitized = sanitized;
        }
        InitialUsernamePipe.prototype.transform = function (user, className, delimiter) {
            if (className === void 0) { className = ''; }
            if (delimiter === void 0) { delimiter = ''; }
            var safeHtml = '';
            if (user) {
                var initialResult = this.getInitialUserName(user.firstName || user.displayName, user.lastName, delimiter);
                safeHtml = this.sanitized.bypassSecurityTrustHtml("<div id=\"user-initials-image\" class=\"" + className + "\">" + initialResult + "</div>");
            }
            return safeHtml;
        };
        InitialUsernamePipe.prototype.getInitialUserName = function (firstName, lastName, delimiter) {
            firstName = (firstName ? firstName[0] : '');
            lastName = (lastName ? lastName[0] : '');
            return firstName + delimiter + lastName;
        };
        return InitialUsernamePipe;
    }());
    InitialUsernamePipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'usernameInitials'
                },] }
    ];
    InitialUsernamePipe.ctorParameters = function () { return [
        { type: i3.DomSanitizer }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FullNamePipe = /** @class */ (function () {
        function FullNamePipe() {
        }
        FullNamePipe.prototype.transform = function (user) {
            var fullName = '';
            if (user) {
                if (user.firstName && user.firstName !== 'null') {
                    fullName += user.firstName;
                }
                if (user.lastName && user.lastName !== 'null') {
                    fullName += fullName.length > 0 ? ' ' : '';
                    fullName += user.lastName;
                }
                if (!fullName) {
                    fullName += user.username ? user.username : user.email ? user.email : '';
                }
            }
            return fullName;
        };
        return FullNamePipe;
    }());
    FullNamePipe.decorators = [
        { type: i0.Pipe, args: [{ name: 'fullName' },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormatSpacePipe = /** @class */ (function () {
        function FormatSpacePipe() {
        }
        FormatSpacePipe.prototype.transform = function (inputValue, replaceChar, lowerCase) {
            if (replaceChar === void 0) { replaceChar = '_'; }
            if (lowerCase === void 0) { lowerCase = true; }
            var transformedString = '';
            if (inputValue) {
                transformedString = lowerCase ? inputValue.trim().split(' ').join(replaceChar).toLocaleLowerCase() :
                    inputValue.trim().split(' ').join(replaceChar);
            }
            return transformedString;
        };
        return FormatSpacePipe;
    }());
    FormatSpacePipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'formatSpace'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FileTypePipe = /** @class */ (function () {
        function FileTypePipe() {
        }
        FileTypePipe.prototype.transform = function (value) {
            if (value == null) {
                return '';
            }
            else {
                var fileInfo = value.substring(value.lastIndexOf('/') + 1).replace(/\.[a-z]+/, '');
                return fileInfo.split('_').pop();
            }
        };
        return FileTypePipe;
    }());
    FileTypePipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'fileType',
                    pure: true
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var MultiValuePipe = /** @class */ (function () {
        function MultiValuePipe() {
        }
        MultiValuePipe.prototype.transform = function (values, valueSeparator) {
            if (valueSeparator === void 0) { valueSeparator = MultiValuePipe.DEFAULT_SEPARATOR; }
            if (values && values instanceof Array) {
                return values.join(valueSeparator);
            }
            return values;
        };
        return MultiValuePipe;
    }());
    MultiValuePipe.DEFAULT_SEPARATOR = ', ';
    MultiValuePipe.decorators = [
        { type: i0.Pipe, args: [{ name: 'multiValue' },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LocalizedDatePipe = /** @class */ (function () {
        function LocalizedDatePipe(userPreferenceService, appConfig) {
            var _this = this;
            this.userPreferenceService = userPreferenceService;
            this.appConfig = appConfig;
            this.defaultLocale = LocalizedDatePipe.DEFAULT_LOCALE;
            this.defaultFormat = LocalizedDatePipe.DEFAULT_DATE_FORMAT;
            this.onDestroy$ = new rxjs.Subject();
            if (this.userPreferenceService) {
                this.userPreferenceService
                    .select(exports.UserPreferenceValues.Locale)
                    .pipe(operators.takeUntil(this.onDestroy$))
                    .subscribe(function (locale) {
                    if (locale) {
                        _this.defaultLocale = locale;
                    }
                });
            }
            if (this.appConfig) {
                this.defaultFormat = this.appConfig.get('dateValues.defaultDateFormat', LocalizedDatePipe.DEFAULT_DATE_FORMAT);
            }
        }
        LocalizedDatePipe.prototype.transform = function (value, format, locale) {
            var actualFormat = format || this.defaultFormat;
            var actualLocale = locale || this.defaultLocale;
            var datePipe = new i1$1.DatePipe(actualLocale);
            return datePipe.transform(value, actualFormat);
        };
        LocalizedDatePipe.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        return LocalizedDatePipe;
    }());
    LocalizedDatePipe.DEFAULT_LOCALE = 'en-US';
    LocalizedDatePipe.DEFAULT_DATE_FORMAT = 'mediumDate';
    LocalizedDatePipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfLocalizedDate',
                    pure: false
                },] }
    ];
    LocalizedDatePipe.ctorParameters = function () { return [
        { type: UserPreferencesService },
        { type: AppConfigService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DecimalNumberPipe = /** @class */ (function () {
        function DecimalNumberPipe(userPreferenceService, appConfig) {
            var _this = this;
            this.userPreferenceService = userPreferenceService;
            this.appConfig = appConfig;
            this.defaultLocale = DecimalNumberPipe.DEFAULT_LOCALE;
            this.defaultMinIntegerDigits = DecimalNumberPipe.DEFAULT_MIN_INTEGER_DIGITS;
            this.defaultMinFractionDigits = DecimalNumberPipe.DEFAULT_MIN_FRACTION_DIGITS;
            this.defaultMaxFractionDigits = DecimalNumberPipe.DEFAULT_MAX_FRACTION_DIGITS;
            this.onDestroy$ = new rxjs.Subject();
            if (this.userPreferenceService) {
                this.userPreferenceService.select(exports.UserPreferenceValues.Locale)
                    .pipe(operators.takeUntil(this.onDestroy$))
                    .subscribe(function (locale) {
                    if (locale) {
                        _this.defaultLocale = locale;
                    }
                });
            }
            if (this.appConfig) {
                this.defaultMinIntegerDigits = this.appConfig.get('decimalValues.minIntegerDigits', DecimalNumberPipe.DEFAULT_MIN_INTEGER_DIGITS);
                this.defaultMinFractionDigits = this.appConfig.get('decimalValues.minFractionDigits', DecimalNumberPipe.DEFAULT_MIN_FRACTION_DIGITS);
                this.defaultMaxFractionDigits = this.appConfig.get('decimalValues.maxFractionDigits', DecimalNumberPipe.DEFAULT_MAX_FRACTION_DIGITS);
            }
        }
        DecimalNumberPipe.prototype.transform = function (value, digitsInfo, locale) {
            var actualMinIntegerDigits = digitsInfo && digitsInfo.minIntegerDigits ? digitsInfo.minIntegerDigits : this.defaultMinIntegerDigits;
            var actualMinFractionDigits = digitsInfo && digitsInfo.minFractionDigits ? digitsInfo.minFractionDigits : this.defaultMinFractionDigits;
            var actualMaxFractionDigits = digitsInfo && digitsInfo.maxFractionDigits ? digitsInfo.maxFractionDigits : this.defaultMaxFractionDigits;
            var actualDigitsInfo = actualMinIntegerDigits + "." + actualMinFractionDigits + "-" + actualMaxFractionDigits;
            var actualLocale = locale || this.defaultLocale;
            var decimalPipe = new i1$1.DecimalPipe(actualLocale);
            return decimalPipe.transform(value, actualDigitsInfo);
        };
        DecimalNumberPipe.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        return DecimalNumberPipe;
    }());
    DecimalNumberPipe.DEFAULT_LOCALE = 'en-US';
    DecimalNumberPipe.DEFAULT_MIN_INTEGER_DIGITS = 1;
    DecimalNumberPipe.DEFAULT_MIN_FRACTION_DIGITS = 0;
    DecimalNumberPipe.DEFAULT_MAX_FRACTION_DIGITS = 2;
    DecimalNumberPipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfDecimalNumber',
                    pure: false
                },] }
    ];
    DecimalNumberPipe.ctorParameters = function () { return [
        { type: UserPreferencesService },
        { type: AppConfigService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LocalizedRolePipe = /** @class */ (function () {
        function LocalizedRolePipe(translationService) {
            this.translationService = translationService;
        }
        LocalizedRolePipe.prototype.transform = function (value) {
            if (value) {
                var key = "ADF.ROLES." + value.toUpperCase();
                var translation = this.translationService.instant(key);
                if (translation) {
                    return translation;
                }
            }
            return value;
        };
        return LocalizedRolePipe;
    }());
    LocalizedRolePipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfLocalizedRole'
                },] }
    ];
    LocalizedRolePipe.ctorParameters = function () { return [
        { type: TranslationService }
    ]; };

    var MomentDatePipe = /** @class */ (function () {
        function MomentDatePipe() {
        }
        MomentDatePipe.prototype.transform = function (value, dateFormat) {
            return moment$1(value, dateFormat);
        };
        return MomentDatePipe;
    }());
    MomentDatePipe.decorators = [
        { type: i0.Pipe, args: [{ name: 'adfMomentDate' },] }
    ];

    var MomentDateTimePipe = /** @class */ (function () {
        function MomentDateTimePipe() {
        }
        MomentDateTimePipe.prototype.transform = function (value, dateFormat) {
            return moment$1(value, dateFormat)
                .add(moment$1(value, dateFormat).utcOffset(), 'minutes');
        };
        return MomentDateTimePipe;
    }());
    MomentDateTimePipe.decorators = [
        { type: i0.Pipe, args: [{ name: 'adfMomentDateTime' },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PipeModule = /** @class */ (function () {
        function PipeModule() {
        }
        return PipeModule;
    }());
    PipeModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        FileSizePipe,
                        HighlightPipe,
                        TimeAgoPipe,
                        MimeTypeIconPipe,
                        InitialUsernamePipe,
                        FullNamePipe,
                        NodeNameTooltipPipe,
                        FormatSpacePipe,
                        FileTypePipe,
                        MultiValuePipe,
                        LocalizedDatePipe,
                        DecimalNumberPipe,
                        LocalizedRolePipe,
                        MomentDatePipe,
                        MomentDateTimePipe
                    ],
                    providers: [
                        FileSizePipe,
                        HighlightPipe,
                        TimeAgoPipe,
                        MimeTypeIconPipe,
                        InitialUsernamePipe,
                        NodeNameTooltipPipe,
                        FormatSpacePipe,
                        FileTypePipe,
                        MultiValuePipe,
                        LocalizedDatePipe,
                        DecimalNumberPipe,
                        LocalizedRolePipe,
                        MomentDatePipe,
                        MomentDateTimePipe
                    ],
                    exports: [
                        FileSizePipe,
                        HighlightPipe,
                        TimeAgoPipe,
                        MimeTypeIconPipe,
                        InitialUsernamePipe,
                        FullNamePipe,
                        NodeNameTooltipPipe,
                        FormatSpacePipe,
                        FileTypePipe,
                        MultiValuePipe,
                        LocalizedDatePipe,
                        DecimalNumberPipe,
                        LocalizedRolePipe,
                        MomentDatePipe,
                        MomentDateTimePipe
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var HighlightDirective = /** @class */ (function () {
        function HighlightDirective(el, renderer, highlightTransformService) {
            this.el = el;
            this.renderer = renderer;
            this.highlightTransformService = highlightTransformService;
            this.selector = '';
            this.search = '';
            this.classToApply = 'adf-highlight';
        }
        HighlightDirective.prototype.ngAfterViewChecked = function () {
            this.highlight();
        };
        HighlightDirective.prototype.highlight = function (search, selector, classToApply) {
            var _this = this;
            if (search === void 0) { search = this.search; }
            if (selector === void 0) { selector = this.selector; }
            if (classToApply === void 0) { classToApply = this.classToApply; }
            if (search && selector) {
                var elements = this.el.nativeElement.querySelectorAll(selector);
                elements.forEach(function (element) {
                    var highlightTransformResult = _this.highlightTransformService.highlight(element.innerHTML, search, classToApply);
                    if (highlightTransformResult.changed) {
                        _this.renderer.setProperty(element, 'innerHTML', highlightTransformResult.text);
                    }
                });
            }
        };
        return HighlightDirective;
    }());
    HighlightDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-highlight]'
                },] }
    ];
    HighlightDirective.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.Renderer2 },
        { type: HighlightTransformService }
    ]; };
    HighlightDirective.propDecorators = {
        selector: [{ type: i0.Input, args: ['adf-highlight-selector',] }],
        search: [{ type: i0.Input, args: ['adf-highlight',] }],
        classToApply: [{ type: i0.Input, args: ['adf-highlight-class',] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LogoutDirective = /** @class */ (function () {
        function LogoutDirective(elementRef, renderer, router, appConfig, auth) {
            this.elementRef = elementRef;
            this.renderer = renderer;
            this.router = router;
            this.appConfig = appConfig;
            this.auth = auth;
            this.enableRedirect = true;
        }
        LogoutDirective.prototype.ngOnInit = function () {
            var _this = this;
            if (this.elementRef.nativeElement) {
                this.renderer.listen(this.elementRef.nativeElement, 'click', function (evt) {
                    evt.preventDefault();
                    _this.logout();
                });
            }
        };
        LogoutDirective.prototype.getRedirectUri = function () {
            if (this.redirectUri === undefined) {
                return this.appConfig.get('loginRoute', '/login');
            }
            return this.redirectUri;
        };
        LogoutDirective.prototype.logout = function () {
            var _this = this;
            this.auth.logout().subscribe(function () { return _this.redirectToUri(); }, function () { return _this.redirectToUri(); });
        };
        LogoutDirective.prototype.redirectToUri = function () {
            if (this.enableRedirect && !this.auth.isOauth()) {
                var redirectRoute = this.getRedirectUri();
                this.router.navigate([redirectRoute]);
            }
        };
        return LogoutDirective;
    }());
    LogoutDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-logout]'
                },] }
    ];
    LogoutDirective.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.Renderer2 },
        { type: i2$2.Router },
        { type: AppConfigService },
        { type: AuthenticationService }
    ]; };
    LogoutDirective.propDecorators = {
        redirectUri: [{ type: i0.Input }],
        enableRedirect: [{ type: i0.Input }]
    };

    var NodeDeleteDirective = /** @class */ (function () {
        function NodeDeleteDirective(alfrescoApiService, translation, elementRef) {
            this.alfrescoApiService = alfrescoApiService;
            this.translation = translation;
            this.elementRef = elementRef;
            this.permanent = false;
            this.delete = new i0.EventEmitter();
        }
        Object.defineProperty(NodeDeleteDirective.prototype, "trashcanApi", {
            get: function () {
                var _a;
                this._trashcanApi = (_a = this._trashcanApi) !== null && _a !== void 0 ? _a : new jsApi.TrashcanApi(this.alfrescoApiService.getInstance());
                return this._trashcanApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(NodeDeleteDirective.prototype, "nodesApi", {
            get: function () {
                var _a;
                this._nodesApi = (_a = this._nodesApi) !== null && _a !== void 0 ? _a : new jsApi.NodesApi(this.alfrescoApiService.getInstance());
                return this._nodesApi;
            },
            enumerable: false,
            configurable: true
        });
        NodeDeleteDirective.prototype.onClick = function () {
            this.process(this.selection);
        };
        NodeDeleteDirective.prototype.ngOnChanges = function () {
            if (!this.selection || (this.selection && this.selection.length === 0)) {
                this.setDisableAttribute(true);
            }
            else {
                if (!this.elementRef.nativeElement.hasAttribute('adf-check-allowable-operation')) {
                    this.setDisableAttribute(false);
                }
            }
        };
        NodeDeleteDirective.prototype.setDisableAttribute = function (disable) {
            this.elementRef.nativeElement.disabled = disable;
        };
        NodeDeleteDirective.prototype.process = function (selection) {
            var _this = this;
            if (selection && selection.length) {
                var batch = this.getDeleteNodesBatch(selection);
                rxjs.forkJoin.apply(void 0, __spread(batch)).subscribe(function (data) {
                    var processedItems = _this.processStatus(data);
                    var message = _this.getMessage(processedItems);
                    if (message) {
                        _this.delete.emit(message);
                    }
                });
            }
        };
        NodeDeleteDirective.prototype.getDeleteNodesBatch = function (selection) {
            var _this = this;
            return selection.map(function (node) { return _this.deleteNode(node); });
        };
        NodeDeleteDirective.prototype.deleteNode = function (node) {
            var id = node.entry.nodeId || node.entry.id;
            var promise;
            if (node.entry.hasOwnProperty('archivedAt') && node.entry['archivedAt']) {
                promise = this.trashcanApi.deleteDeletedNode(id);
            }
            else {
                promise = this.nodesApi.deleteNode(id, { permanent: this.permanent });
            }
            return rxjs.from(promise).pipe(operators.retry(3), operators.map(function () { return ({
                entry: node.entry,
                status: 1
            }); }), operators.catchError(function () { return rxjs.of({
                entry: node.entry,
                status: 0
            }); }));
        };
        NodeDeleteDirective.prototype.processStatus = function (data) {
            var deleteStatus = {
                success: [],
                failed: [],
                get someFailed() {
                    return !!(this.failed.length);
                },
                get someSucceeded() {
                    return !!(this.success.length);
                },
                get oneFailed() {
                    return this.failed.length === 1;
                },
                get oneSucceeded() {
                    return this.success.length === 1;
                },
                get allSucceeded() {
                    return this.someSucceeded && !this.someFailed;
                },
                get allFailed() {
                    return this.someFailed && !this.someSucceeded;
                }
            };
            return data.reduce(function (acc, next) {
                if (next.status === 1) {
                    acc.success.push(next);
                }
                else {
                    acc.failed.push(next);
                }
                return acc;
            }, deleteStatus);
        };
        NodeDeleteDirective.prototype.getMessage = function (status) {
            if (status.allFailed && !status.oneFailed) {
                return this.translation.instant('CORE.DELETE_NODE.ERROR_PLURAL', { number: status.failed.length });
            }
            if (status.allSucceeded && !status.oneSucceeded) {
                return this.translation.instant('CORE.DELETE_NODE.PLURAL', { number: status.success.length });
            }
            if (status.someFailed && status.someSucceeded && !status.oneSucceeded) {
                return this.translation.instant('CORE.DELETE_NODE.PARTIAL_PLURAL', {
                    success: status.success.length,
                    failed: status.failed.length
                });
            }
            if (status.someFailed && status.oneSucceeded) {
                return this.translation.instant('CORE.DELETE_NODE.PARTIAL_SINGULAR', {
                    success: status.success.length,
                    failed: status.failed.length
                });
            }
            if (status.oneFailed && !status.someSucceeded) {
                return this.translation.instant('CORE.DELETE_NODE.ERROR_SINGULAR', { name: status.failed[0].entry.name });
            }
            if (status.oneSucceeded && !status.someFailed) {
                return this.translation.instant('CORE.DELETE_NODE.SINGULAR', { name: status.success[0].entry.name });
            }
            return null;
        };
        return NodeDeleteDirective;
    }());
    NodeDeleteDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-delete]'
                },] }
    ];
    NodeDeleteDirective.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: TranslationService },
        { type: i0.ElementRef }
    ]; };
    NodeDeleteDirective.propDecorators = {
        selection: [{ type: i0.Input, args: ['adf-delete',] }],
        permanent: [{ type: i0.Input }],
        delete: [{ type: i0.Output }],
        onClick: [{ type: i0.HostListener, args: ['click',] }]
    };

    var NodeFavoriteDirective = /** @class */ (function () {
        function NodeFavoriteDirective(alfrescoApiService) {
            this.alfrescoApiService = alfrescoApiService;
            this.favorites = [];
            this.selection = [];
            this.toggle = new i0.EventEmitter();
            this.error = new i0.EventEmitter();
        }
        Object.defineProperty(NodeFavoriteDirective.prototype, "favoritesApi", {
            get: function () {
                var _a;
                this._favoritesApi = (_a = this._favoritesApi) !== null && _a !== void 0 ? _a : new jsApi.FavoritesApi(this.alfrescoApiService.getInstance());
                return this._favoritesApi;
            },
            enumerable: false,
            configurable: true
        });
        NodeFavoriteDirective.prototype.onClick = function () {
            this.toggleFavorite();
        };
        NodeFavoriteDirective.prototype.ngOnChanges = function (changes) {
            if (!changes.selection.currentValue.length) {
                this.favorites = [];
                return;
            }
            this.markFavoritesNodes(changes.selection.currentValue);
        };
        NodeFavoriteDirective.prototype.toggleFavorite = function () {
            var _this = this;
            if (!this.favorites.length) {
                return;
            }
            var every = this.favorites.every(function (selected) { return selected.entry.isFavorite; });
            if (every) {
                var batch = this.favorites.map(function (selected) {
                    var id = selected.entry.nodeId || selected.entry.id;
                    return rxjs.from(_this.favoritesApi.deleteFavorite('-me-', id));
                });
                rxjs.forkJoin(batch).subscribe(function () {
                    _this.favorites.map(function (selected) { return selected.entry.isFavorite = false; });
                    _this.toggle.emit();
                }, function (error) { return _this.error.emit(error); });
            }
            if (!every) {
                var notFavorite_1 = this.favorites.filter(function (node) { return !node.entry.isFavorite; });
                var body = notFavorite_1.map(function (node) { return _this.createFavoriteBody(node); });
                rxjs.from(this.favoritesApi.createFavorite('-me-', body))
                    .subscribe(function () {
                    notFavorite_1.map(function (selected) { return selected.entry.isFavorite = true; });
                    _this.toggle.emit();
                }, function (error) { return _this.error.emit(error); });
            }
        };
        NodeFavoriteDirective.prototype.markFavoritesNodes = function (selection) {
            var _this = this;
            if (selection.length <= this.favorites.length) {
                var newFavorites = this.reduce(this.favorites, selection);
                this.favorites = newFavorites;
            }
            var result = this.diff(selection, this.favorites);
            var batch = this.getProcessBatch(result);
            rxjs.forkJoin(batch).subscribe(function (data) {
                var _b;
                (_b = _this.favorites).push.apply(_b, __spread(data));
            });
        };
        NodeFavoriteDirective.prototype.hasFavorites = function () {
            if (this.favorites && !this.favorites.length) {
                return false;
            }
            return this.favorites.every(function (selected) { return selected.entry.isFavorite; });
        };
        NodeFavoriteDirective.prototype.getProcessBatch = function (selection) {
            var _this = this;
            return selection.map(function (selected) { return _this.getFavorite(selected); });
        };
        NodeFavoriteDirective.prototype.getFavorite = function (selected) {
            var node = selected.entry;
            if (node && node.hasOwnProperty('isFavorite')) {
                return rxjs.of(selected);
            }
            var name = node.name, isFile = node.isFile, isFolder = node.isFolder;
            var id = node.nodeId || node.id;
            var promise = this.favoritesApi.getFavorite('-me-', id);
            return rxjs.from(promise).pipe(operators.map(function () { return ({
                entry: {
                    id: id,
                    isFolder: isFolder,
                    isFile: isFile,
                    name: name,
                    isFavorite: true
                }
            }); }), operators.catchError(function () {
                return rxjs.of({
                    entry: {
                        id: id,
                        isFolder: isFolder,
                        isFile: isFile,
                        name: name,
                        isFavorite: false
                    }
                });
            }));
        };
        NodeFavoriteDirective.prototype.createFavoriteBody = function (node) {
            var _b;
            var type = this.getNodeType(node);
            var id = node.entry.nodeId || node.entry.id;
            return {
                target: (_b = {},
                    _b[type] = {
                        guid: id
                    },
                    _b)
            };
        };
        NodeFavoriteDirective.prototype.getNodeType = function (node) {
            if (!node.entry.isFile && !node.entry.isFolder) {
                return 'file';
            }
            return node.entry.isFile ? 'file' : 'folder';
        };
        NodeFavoriteDirective.prototype.diff = function (list, patch) {
            var ids = patch.map(function (item) { return item.entry.id; });
            return list.filter(function (item) { return ids.includes(item.entry.id) ? null : item; });
        };
        NodeFavoriteDirective.prototype.reduce = function (patch, comparator) {
            var ids = comparator.map(function (item) { return item.entry.id; });
            return patch.filter(function (item) { return ids.includes(item.entry.id) ? item : null; });
        };
        return NodeFavoriteDirective;
    }());
    NodeFavoriteDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-node-favorite]',
                    exportAs: 'adfFavorite'
                },] }
    ];
    NodeFavoriteDirective.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };
    NodeFavoriteDirective.propDecorators = {
        selection: [{ type: i0.Input, args: ['adf-node-favorite',] }],
        toggle: [{ type: i0.Output }],
        error: [{ type: i0.Output }],
        onClick: [{ type: i0.HostListener, args: ['click',] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PermissionsEnum = /** @class */ (function (_super) {
        __extends(PermissionsEnum, _super);
        function PermissionsEnum() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return PermissionsEnum;
    }(String));
    PermissionsEnum.CONTRIBUTOR = 'Contributor';
    PermissionsEnum.CONSUMER = 'Consumer';
    PermissionsEnum.COLLABORATOR = 'Collaborator';
    PermissionsEnum.MANAGER = 'Manager';
    PermissionsEnum.EDITOR = 'Editor';
    PermissionsEnum.COORDINATOR = 'Coordinator';
    PermissionsEnum.NOT_CONTRIBUTOR = '!Contributor';
    PermissionsEnum.NOT_CONSUMER = '!Consumer';
    PermissionsEnum.NOT_COLLABORATOR = '!Collaborator';
    PermissionsEnum.NOT_MANAGER = '!Manager';
    PermissionsEnum.NOT_EDITOR = '!Editor';
    PermissionsEnum.NOT_COORDINATOR = '!Coordinator';

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AllowableOperationsEnum = /** @class */ (function (_super) {
        __extends(AllowableOperationsEnum, _super);
        function AllowableOperationsEnum() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return AllowableOperationsEnum;
    }(String));
    AllowableOperationsEnum.DELETE = 'delete';
    AllowableOperationsEnum.UPDATE = 'update';
    AllowableOperationsEnum.CREATE = 'create';
    AllowableOperationsEnum.COPY = 'copy';
    AllowableOperationsEnum.LOCK = 'lock';
    AllowableOperationsEnum.UPDATEPERMISSIONS = 'updatePermissions';
    AllowableOperationsEnum.NOT_DELETE = '!delete';
    AllowableOperationsEnum.NOT_UPDATE = '!update';
    AllowableOperationsEnum.NOT_CREATE = '!create';
    AllowableOperationsEnum.NOT_UPDATEPERMISSIONS = '!updatePermissions';

    var DownloadService = /** @class */ (function () {
        function DownloadService() {
            this.saveData = (function () {
                var a = document.createElement('a');
                document.body.appendChild(a);
                a.style.display = 'none';
                return function (fileData, format, fileName) {
                    var blob = null;
                    if (format === 'blob' || format === 'data') {
                        blob = new Blob([fileData], { type: 'octet/stream' });
                    }
                    if (format === 'object' || format === 'json') {
                        var json = JSON.stringify(fileData);
                        blob = new Blob([json], { type: 'octet/stream' });
                    }
                    if (blob) {
                        if (typeof window.navigator !== 'undefined' &&
                            window.navigator.msSaveOrOpenBlob) {
                            navigator.msSaveOrOpenBlob(blob, fileName);
                        }
                        else {
                            var url = window.URL.createObjectURL(blob);
                            a.href = url;
                            a.download = fileName;
                            a.click();
                            window.URL.revokeObjectURL(url);
                        }
                    }
                };
            })();
        }
        DownloadService.prototype.downloadBlob = function (blob, fileName) {
            this.saveData(blob, 'blob', fileName);
        };
        DownloadService.prototype.downloadData = function (data, fileName) {
            this.saveData(data, 'data', fileName);
        };
        DownloadService.prototype.downloadJSON = function (json, fileName) {
            this.saveData(json, 'json', fileName);
        };
        DownloadService.prototype.downloadUrl = function (url, fileName) {
            if (url && fileName) {
                var link = document.createElement('a');
                link.style.display = 'none';
                link.download = fileName;
                link.href = url;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        };
        return DownloadService;
    }());
    DownloadService.ɵprov = i0.ɵɵdefineInjectable({ factory: function DownloadService_Factory() { return new DownloadService(); }, token: DownloadService, providedIn: "root" });
    DownloadService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    DownloadService.ctorParameters = function () { return []; };

    var ContentService = /** @class */ (function () {
        function ContentService(authService, apiService, logService, sanitizer, downloadService, thumbnailService) {
            this.authService = authService;
            this.apiService = apiService;
            this.logService = logService;
            this.sanitizer = sanitizer;
            this.downloadService = downloadService;
            this.thumbnailService = thumbnailService;
            this.folderCreated = new rxjs.Subject();
            this.folderCreate = new rxjs.Subject();
            this.folderEdit = new rxjs.Subject();
        }
        Object.defineProperty(ContentService.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ContentService.prototype, "nodesApi", {
            get: function () {
                var _a;
                this._nodesApi = (_a = this._nodesApi) !== null && _a !== void 0 ? _a : new jsApi.NodesApi(this.apiService.getInstance());
                return this._nodesApi;
            },
            enumerable: false,
            configurable: true
        });
        ContentService.prototype.downloadBlob = function (blob, fileName) {
            this.downloadService.downloadBlob(blob, fileName);
        };
        ContentService.prototype.createTrustedUrl = function (blob) {
            var url = window.URL.createObjectURL(blob);
            return this.sanitizer.bypassSecurityTrustUrl(url);
        };
        ContentService.prototype.getDocumentThumbnailUrl = function (node, attachment, ticket) {
            return this.thumbnailService.getDocumentThumbnailUrl(node, attachment, ticket);
        };
        ContentService.prototype.getContentUrl = function (node, attachment, ticket) {
            if (node) {
                var nodeId = void 0;
                if (typeof node === 'string') {
                    nodeId = node;
                }
                else if (node.entry) {
                    nodeId = node.entry.id;
                }
                return this.contentApi.getContentUrl(nodeId, attachment, ticket);
            }
            return null;
        };
        ContentService.prototype.getNodeContent = function (nodeId) {
            var _this = this;
            return rxjs.from(this.nodesApi.getNodeContent(nodeId))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ContentService.prototype.getNode = function (nodeId, opts) {
            return rxjs.from(this.nodesApi.getNode(nodeId, opts));
        };
        ContentService.prototype.hasPermissions = function (node, permission, userId) {
            var _a, _b;
            var hasPermissions = false;
            userId = userId !== null && userId !== void 0 ? userId : this.authService.getEcmUsername();
            var permissions = __spread((((_a = node.permissions) === null || _a === void 0 ? void 0 : _a.locallySet) || []), (((_b = node.permissions) === null || _b === void 0 ? void 0 : _b.inherited) || [])).filter(function (currentPermission) { return currentPermission.authorityId === userId; });
            if (permissions.length) {
                if (permission && permission.startsWith('!')) {
                    hasPermissions = !permissions.find(function (currentPermission) { return currentPermission.name === permission.replace('!', ''); });
                }
                else {
                    hasPermissions = !!permissions.find(function (currentPermission) { return currentPermission.name === permission; });
                }
            }
            else {
                if (permission === PermissionsEnum.CONSUMER) {
                    hasPermissions = true;
                }
                else if (permission === PermissionsEnum.NOT_CONSUMER) {
                    hasPermissions = false;
                }
                else if (permission && permission.startsWith('!')) {
                    hasPermissions = true;
                }
            }
            return hasPermissions;
        };
        ContentService.prototype.hasAllowableOperations = function (node, allowableOperation) {
            var hasAllowableOperations = false;
            if (node && node.allowableOperations) {
                if (allowableOperation && allowableOperation.startsWith('!')) {
                    hasAllowableOperations = !node.allowableOperations.find(function (currentOperation) { return currentOperation === allowableOperation.replace('!', ''); });
                }
                else {
                    hasAllowableOperations = !!node.allowableOperations.find(function (currentOperation) { return currentOperation === allowableOperation; });
                }
            }
            else {
                if (allowableOperation && allowableOperation.startsWith('!')) {
                    hasAllowableOperations = true;
                }
            }
            if (allowableOperation === AllowableOperationsEnum.COPY) {
                hasAllowableOperations = true;
            }
            if (allowableOperation === AllowableOperationsEnum.LOCK) {
                hasAllowableOperations = node.isFile;
                if (node.isLocked && node.allowableOperations) {
                    hasAllowableOperations = !!~node.allowableOperations.indexOf('updatePermissions');
                }
            }
            return hasAllowableOperations;
        };
        ContentService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return ContentService;
    }());
    ContentService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ContentService_Factory() { return new ContentService(i0.ɵɵinject(AuthenticationService), i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService), i0.ɵɵinject(i3.DomSanitizer), i0.ɵɵinject(DownloadService), i0.ɵɵinject(ThumbnailService)); }, token: ContentService, providedIn: "root" });
    ContentService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    ContentService.ctorParameters = function () { return [
        { type: AuthenticationService },
        { type: AlfrescoApiService },
        { type: LogService },
        { type: i3.DomSanitizer },
        { type: DownloadService },
        { type: ThumbnailService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EXTENDIBLE_COMPONENT = new i0.InjectionToken('extendible.component');

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CheckAllowableOperationDirective = /** @class */ (function () {
        function CheckAllowableOperationDirective(elementRef, renderer, contentService, changeDetector, parentComponent) {
            this.elementRef = elementRef;
            this.renderer = renderer;
            this.contentService = contentService;
            this.changeDetector = changeDetector;
            this.parentComponent = parentComponent;
            this.permission = null;
            this.nodes = [];
        }
        CheckAllowableOperationDirective.prototype.ngOnChanges = function (changes) {
            if (changes.nodes && !changes.nodes.firstChange) {
                this.updateElement();
            }
        };
        CheckAllowableOperationDirective.prototype.updateElement = function () {
            var enable = this.hasAllowableOperations(this.nodes, this.permission);
            if (enable) {
                this.enable();
            }
            else {
                this.disable();
            }
            return enable;
        };
        CheckAllowableOperationDirective.prototype.enable = function () {
            if (this.parentComponent) {
                this.parentComponent.disabled = false;
                this.changeDetector.detectChanges();
            }
            else {
                this.enableElement();
            }
        };
        CheckAllowableOperationDirective.prototype.disable = function () {
            if (this.parentComponent) {
                this.parentComponent.disabled = true;
                this.changeDetector.detectChanges();
            }
            else {
                this.disableElement();
            }
        };
        CheckAllowableOperationDirective.prototype.enableElement = function () {
            this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');
        };
        CheckAllowableOperationDirective.prototype.disableElement = function () {
            this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'true');
        };
        CheckAllowableOperationDirective.prototype.hasAllowableOperations = function (nodes, permission) {
            var _this = this;
            if (nodes && nodes.length > 0) {
                return nodes.every(function (node) { return _this.contentService.hasAllowableOperations(node.entry, permission); });
            }
            return false;
        };
        return CheckAllowableOperationDirective;
    }());
    CheckAllowableOperationDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-check-allowable-operation]'
                },] }
    ];
    CheckAllowableOperationDirective.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.Renderer2 },
        { type: ContentService },
        { type: i0.ChangeDetectorRef },
        { type: undefined, decorators: [{ type: i0.Host }, { type: i0.Optional }, { type: i0.Inject, args: [EXTENDIBLE_COMPONENT,] }] }
    ]; };
    CheckAllowableOperationDirective.propDecorators = {
        permission: [{ type: i0.Input, args: ['adf-check-allowable-operation',] }],
        nodes: [{ type: i0.Input, args: ['adf-nodes',] }]
    };

    var RestoreMessageModel = /** @class */ (function () {
        function RestoreMessageModel() {
        }
        return RestoreMessageModel;
    }());
    var NodeRestoreDirective = /** @class */ (function () {
        function NodeRestoreDirective(alfrescoApiService, translation) {
            this.alfrescoApiService = alfrescoApiService;
            this.translation = translation;
            this.restore = new i0.EventEmitter();
            this.restoreProcessStatus = this.processStatus();
        }
        Object.defineProperty(NodeRestoreDirective.prototype, "trashcanApi", {
            get: function () {
                var _a;
                this._trashcanApi = (_a = this._trashcanApi) !== null && _a !== void 0 ? _a : new jsApi.TrashcanApi(this.alfrescoApiService.getInstance());
                return this._trashcanApi;
            },
            enumerable: false,
            configurable: true
        });
        NodeRestoreDirective.prototype.onClick = function () {
            this.recover(this.selection);
        };
        NodeRestoreDirective.prototype.recover = function (selection) {
            var _b;
            var _this = this;
            if (!selection.length) {
                return;
            }
            var nodesWithPath = this.getNodesWithPath(selection);
            if (selection.length && nodesWithPath.length) {
                this.restoreNodesBatch(nodesWithPath).pipe(operators.tap(function (restoredNodes) {
                    var _b, _c;
                    var status = _this.processStatus(restoredNodes);
                    (_b = _this.restoreProcessStatus.fail).push.apply(_b, __spread(status.fail));
                    (_c = _this.restoreProcessStatus.success).push.apply(_c, __spread(status.success));
                }), operators.mergeMap(function () { return _this.getDeletedNodes(); }))
                    .subscribe(function (deletedNodesList) {
                    var nodeList = deletedNodesList.list.entries;
                    var restoreErrorNodes = _this.restoreProcessStatus.fail;
                    var selectedNodes = _this.diff(restoreErrorNodes, selection, false);
                    var remainingNodes = _this.diff(selectedNodes, nodeList);
                    if (!remainingNodes.length) {
                        _this.notification();
                    }
                    else {
                        _this.recover(remainingNodes);
                    }
                });
            }
            else {
                (_b = this.restoreProcessStatus.fail).push.apply(_b, __spread(selection));
                this.notification();
                return;
            }
        };
        NodeRestoreDirective.prototype.restoreNodesBatch = function (batch) {
            var _this = this;
            return rxjs.forkJoin(batch.map(function (node) { return _this.restoreNode(node); }));
        };
        NodeRestoreDirective.prototype.getNodesWithPath = function (selection) {
            return selection.filter(function (node) { return node.entry.path; });
        };
        NodeRestoreDirective.prototype.getDeletedNodes = function () {
            var promise = this.trashcanApi.listDeletedNodes({ include: ['path'] });
            return rxjs.from(promise);
        };
        NodeRestoreDirective.prototype.restoreNode = function (node) {
            var entry = node.entry;
            var promise = this.trashcanApi.restoreDeletedNode(entry.id);
            return rxjs.from(promise).pipe(operators.map(function () { return ({
                status: 1,
                entry: entry
            }); }), operators.catchError(function (error) {
                var statusCode = (JSON.parse(error.message)).error.statusCode;
                return rxjs.of({
                    status: 0,
                    statusCode: statusCode,
                    entry: entry
                });
            }));
        };
        NodeRestoreDirective.prototype.diff = function (selection, list, fromList) {
            if (fromList === void 0) { fromList = true; }
            var ids = selection.map(function (item) { return item.entry.id; });
            return list.filter(function (item) {
                if (fromList) {
                    return ids.includes(item.entry.id) ? item : null;
                }
                else {
                    return !ids.includes(item.entry.id) ? item : null;
                }
            });
        };
        NodeRestoreDirective.prototype.processStatus = function (data) {
            if (data === void 0) { data = []; }
            var status = {
                fail: [],
                success: [],
                get someFailed() {
                    return !!(this.fail.length);
                },
                get someSucceeded() {
                    return !!(this.success.length);
                },
                get oneFailed() {
                    return this.fail.length === 1;
                },
                get oneSucceeded() {
                    return this.success.length === 1;
                },
                get allSucceeded() {
                    return this.someSucceeded && !this.someFailed;
                },
                get allFailed() {
                    return this.someFailed && !this.someSucceeded;
                },
                reset: function () {
                    this.fail = [];
                    this.success = [];
                }
            };
            return data.reduce(function (acc, node) {
                if (node.status) {
                    acc.success.push(node);
                }
                else {
                    acc.fail.push(node);
                }
                return acc;
            }, status);
        };
        NodeRestoreDirective.prototype.getRestoreMessage = function () {
            var status = this.restoreProcessStatus;
            if (status.someFailed && !status.oneFailed) {
                return this.translation.instant('CORE.RESTORE_NODE.PARTIAL_PLURAL', {
                    number: status.fail.length
                });
            }
            if (status.oneFailed && status.fail[0].statusCode) {
                if (status.fail[0].statusCode === 409) {
                    return this.translation.instant('CORE.RESTORE_NODE.NODE_EXISTS', {
                        name: status.fail[0].entry.name
                    });
                }
                else {
                    return this.translation.instant('CORE.RESTORE_NODE.GENERIC', {
                        name: status.fail[0].entry.name
                    });
                }
            }
            if (status.oneFailed && !status.fail[0].statusCode) {
                return this.translation.instant('CORE.RESTORE_NODE.LOCATION_MISSING', {
                    name: status.fail[0].entry.name
                });
            }
            if (status.allSucceeded && !status.oneSucceeded) {
                return this.translation.instant('CORE.RESTORE_NODE.PLURAL');
            }
            if (status.allSucceeded && status.oneSucceeded) {
                return this.translation.instant('CORE.RESTORE_NODE.SINGULAR', {
                    name: status.success[0].entry.name
                });
            }
            return null;
        };
        NodeRestoreDirective.prototype.notification = function () {
            var status = Object.assign({}, this.restoreProcessStatus);
            var message = this.getRestoreMessage();
            this.reset();
            var action = (status.oneSucceeded && !status.someFailed) ? this.translation.instant('CORE.RESTORE_NODE.VIEW') : '';
            var path;
            if (status.success && status.success.length > 0) {
                path = status.success[0].entry.path;
            }
            this.restore.emit({
                message: message,
                action: action,
                path: path
            });
        };
        NodeRestoreDirective.prototype.reset = function () {
            this.restoreProcessStatus.reset();
            this.selection = [];
        };
        return NodeRestoreDirective;
    }());
    NodeRestoreDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-restore]'
                },] }
    ];
    NodeRestoreDirective.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: TranslationService }
    ]; };
    NodeRestoreDirective.propDecorators = {
        selection: [{ type: i0.Input, args: ['adf-restore',] }],
        restore: [{ type: i0.Output }],
        onClick: [{ type: i0.HostListener, args: ['click',] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var UploadDirective = /** @class */ (function () {
        function UploadDirective(el, renderer, ngZone) {
            this.el = el;
            this.renderer = renderer;
            this.ngZone = ngZone;
            this.enabled = true;
            this.mode = ['drop'];
            this.isDragging = false;
            this.cssClassName = 'adf-upload__dragging';
            this.element = el.nativeElement;
        }
        UploadDirective.prototype.ngOnInit = function () {
            var _this = this;
            if (this.isClickMode() && this.renderer) {
                var inputUpload = this.renderer.createElement('input');
                this.upload = this.el.nativeElement.parentElement.appendChild(inputUpload);
                this.upload.type = 'file';
                this.upload.style.display = 'none';
                this.upload.addEventListener('change', function (event) { return _this.onSelectFiles(event); });
                if (this.multiple) {
                    this.upload.setAttribute('multiple', '');
                }
                if (this.accept) {
                    this.upload.setAttribute('accept', this.accept);
                }
                if (this.directory) {
                    this.upload.setAttribute('webkitdirectory', '');
                }
            }
            if (this.isDropMode()) {
                this.ngZone.runOutsideAngular(function () {
                    _this.element.addEventListener('dragenter', _this.onDragEnter.bind(_this));
                    _this.element.addEventListener('dragover', _this.onDragOver.bind(_this));
                    _this.element.addEventListener('dragleave', _this.onDragLeave.bind(_this));
                    _this.element.addEventListener('drop', _this.onDrop.bind(_this));
                });
            }
        };
        UploadDirective.prototype.ngOnDestroy = function () {
            this.element.removeEventListener('dragenter', this.onDragEnter);
            this.element.removeEventListener('dragover', this.onDragOver);
            this.element.removeEventListener('dragleave', this.onDragLeave);
            this.element.removeEventListener('drop', this.onDrop);
        };
        UploadDirective.prototype.onClick = function (event) {
            if (this.isClickMode() && this.upload) {
                event.preventDefault();
                this.upload.click();
            }
        };
        UploadDirective.prototype.onDragEnter = function (event) {
            if (this.isDropMode()) {
                event.dataTransfer.dropEffect = 'copy';
                this.element.classList.add(this.cssClassName);
                this.isDragging = true;
            }
        };
        UploadDirective.prototype.onDragOver = function (event) {
            event.preventDefault();
            if (this.isDropMode()) {
                event.dataTransfer.dropEffect = 'copy';
                this.element.classList.add(this.cssClassName);
                this.isDragging = true;
            }
            return false;
        };
        UploadDirective.prototype.onDragLeave = function () {
            if (this.isDropMode()) {
                this.element.classList.remove(this.cssClassName);
                this.isDragging = false;
            }
        };
        UploadDirective.prototype.onDrop = function (event) {
            var _this = this;
            if (this.isDropMode()) {
                event.stopPropagation();
                event.preventDefault();
                this.element.classList.remove(this.cssClassName);
                this.isDragging = false;
                var dataTransfer = this.getDataTransfer(event);
                if (dataTransfer) {
                    this.getFilesDropped(dataTransfer).then(function (files) {
                        _this.onUploadFiles(files);
                    });
                }
            }
            return false;
        };
        UploadDirective.prototype.onUploadFiles = function (files) {
            if (this.enabled && files.length > 0) {
                var customEvent = new CustomEvent('upload-files', {
                    detail: {
                        sender: this,
                        data: this.data,
                        files: files
                    },
                    bubbles: true
                });
                this.el.nativeElement.dispatchEvent(customEvent);
            }
        };
        UploadDirective.prototype.hasMode = function (mode) {
            return this.enabled && mode && this.mode && this.mode.indexOf(mode) > -1;
        };
        UploadDirective.prototype.isDropMode = function () {
            return this.hasMode('drop');
        };
        UploadDirective.prototype.isClickMode = function () {
            return this.hasMode('click');
        };
        UploadDirective.prototype.getDataTransfer = function (event) {
            if (event && event.dataTransfer) {
                return event.dataTransfer;
            }
            if (event && event.originalEvent && event.originalEvent.dataTransfer) {
                return event.originalEvent.dataTransfer;
            }
            return null;
        };
        UploadDirective.prototype.getFilesDropped = function (dataTransfer) {
            return new Promise(function (resolve) {
                var iterations = [];
                if (dataTransfer) {
                    var items = dataTransfer.items;
                    if (items) {
                        var _loop_1 = function (i) {
                            if (typeof items[i].webkitGetAsEntry !== 'undefined') {
                                var item_1 = items[i].webkitGetAsEntry();
                                if (item_1) {
                                    if (item_1.isFile) {
                                        iterations.push(Promise.resolve({
                                            entry: item_1,
                                            file: items[i].getAsFile(),
                                            relativeFolder: '/'
                                        }));
                                    }
                                    else if (item_1.isDirectory) {
                                        iterations.push(new Promise(function (resolveFolder) {
                                            FileUtils.flatten(item_1).then(function (files) { return resolveFolder(files); });
                                        }));
                                    }
                                }
                            }
                            else {
                                iterations.push(Promise.resolve({
                                    entry: null,
                                    file: items[i].getAsFile(),
                                    relativeFolder: '/'
                                }));
                            }
                        };
                        for (var i = 0; i < items.length; i++) {
                            _loop_1(i);
                        }
                    }
                    else {
                        var files = FileUtils
                            .toFileArray(dataTransfer.files)
                            .map(function (file) { return ({
                            entry: null,
                            file: file,
                            relativeFolder: '/'
                        }); });
                        iterations.push(Promise.resolve(files));
                    }
                }
                Promise.all(iterations).then(function (result) {
                    resolve(result.reduce(function (a, b) { return a.concat(b); }, []));
                });
            });
        };
        UploadDirective.prototype.onSelectFiles = function (event) {
            if (this.isClickMode()) {
                var input = event.currentTarget;
                var files = FileUtils.toFileArray(input.files);
                this.onUploadFiles(files.map(function (file) { return ({
                    entry: null,
                    file: file,
                    relativeFolder: '/'
                }); }));
                event.target.value = '';
            }
        };
        return UploadDirective;
    }());
    UploadDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-upload]'
                },] }
    ];
    UploadDirective.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.Renderer2 },
        { type: i0.NgZone }
    ]; };
    UploadDirective.propDecorators = {
        enabled: [{ type: i0.Input, args: ['adf-upload',] }],
        data: [{ type: i0.Input, args: ['adf-upload-data',] }],
        mode: [{ type: i0.Input }],
        multiple: [{ type: i0.Input }],
        accept: [{ type: i0.Input }],
        directory: [{ type: i0.Input }],
        onClick: [{ type: i0.HostListener, args: ['click', ['$event'],] }]
    };

    var DownloadZipService = /** @class */ (function () {
        function DownloadZipService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(DownloadZipService.prototype, "downloadsApi", {
            get: function () {
                var _a;
                this._downloadsApi = (_a = this._downloadsApi) !== null && _a !== void 0 ? _a : new jsApi.DownloadsApi(this.apiService.getInstance());
                return this._downloadsApi;
            },
            enumerable: false,
            configurable: true
        });
        DownloadZipService.prototype.createDownload = function (payload) {
            var _this = this;
            return rxjs.from(this.downloadsApi.createDownload(payload)).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        DownloadZipService.prototype.getDownload = function (downloadId) {
            return rxjs.from(this.downloadsApi.getDownload(downloadId));
        };
        DownloadZipService.prototype.cancelDownload = function (downloadId) {
            this.downloadsApi.cancelDownload(downloadId);
        };
        DownloadZipService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return DownloadZipService;
    }());
    DownloadZipService.ɵprov = i0.ɵɵdefineInjectable({ factory: function DownloadZipService_Factory() { return new DownloadZipService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: DownloadZipService, providedIn: "root" });
    DownloadZipService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    DownloadZipService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NodeMetadata = /** @class */ (function () {
        function NodeMetadata(metadata, nodeType) {
            this.metadata = metadata;
            this.nodeType = nodeType;
        }
        return NodeMetadata;
    }());

    var NodesApiService = /** @class */ (function () {
        function NodesApiService(apiService, preferences) {
            this.apiService = apiService;
            this.preferences = preferences;
        }
        Object.defineProperty(NodesApiService.prototype, "trashcanApi", {
            get: function () {
                var _a;
                this._trashcanApi = (_a = this._trashcanApi) !== null && _a !== void 0 ? _a : new jsApi.TrashcanApi(this.apiService.getInstance());
                return this._trashcanApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(NodesApiService.prototype, "nodesApi", {
            get: function () {
                var _a;
                this._nodesApi = (_a = this._nodesApi) !== null && _a !== void 0 ? _a : new jsApi.NodesApi(this.apiService.getInstance());
                return this._nodesApi;
            },
            enumerable: false,
            configurable: true
        });
        NodesApiService.prototype.getEntryFromEntity = function (entity) {
            return entity.entry;
        };
        NodesApiService.prototype.getNode = function (nodeId, options) {
            if (options === void 0) { options = {}; }
            var defaults = {
                include: ['path', 'properties', 'allowableOperations', 'permissions']
            };
            var queryOptions = Object.assign(defaults, options);
            return rxjs.from(this.nodesApi.getNode(nodeId, queryOptions)).pipe(operators.map(this.getEntryFromEntity), operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        NodesApiService.prototype.getNodeChildren = function (nodeId, options) {
            if (options === void 0) { options = {}; }
            var defaults = {
                maxItems: this.preferences.paginationSize,
                skipCount: 0,
                include: ['path', 'properties', 'allowableOperations', 'permissions']
            };
            var queryOptions = Object.assign(defaults, options);
            return rxjs.from(this.nodesApi.listNodeChildren(nodeId, queryOptions)).pipe(operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        NodesApiService.prototype.createNode = function (parentNodeId, nodeBody, options) {
            if (options === void 0) { options = {}; }
            return rxjs.from(this.nodesApi.createNode(parentNodeId, nodeBody, options)).pipe(operators.map(this.getEntryFromEntity), operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        NodesApiService.prototype.createFolder = function (parentNodeId, nodeBody, options) {
            if (options === void 0) { options = {}; }
            var body = Object.assign({ nodeType: 'cm:folder' }, nodeBody);
            return this.createNode(parentNodeId, body, options);
        };
        NodesApiService.prototype.updateNode = function (nodeId, nodeBody, options) {
            if (options === void 0) { options = {}; }
            var defaults = {
                include: ['path', 'properties', 'allowableOperations', 'permissions', 'definition']
            };
            var queryOptions = Object.assign(defaults, options);
            return rxjs.from(this.nodesApi.updateNode(nodeId, nodeBody, queryOptions)).pipe(operators.map(this.getEntryFromEntity), operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        NodesApiService.prototype.deleteNode = function (nodeId, options) {
            if (options === void 0) { options = {}; }
            return rxjs.from(this.nodesApi.deleteNode(nodeId, options)).pipe(operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        NodesApiService.prototype.restoreNode = function (nodeId) {
            return rxjs.from(this.trashcanApi.restoreDeletedNode(nodeId)).pipe(operators.map(this.getEntryFromEntity), operators.catchError(function (err) { return rxjs.throwError(err); }));
        };
        NodesApiService.prototype.getNodeMetadata = function (nodeId) {
            return rxjs.from(this.nodesApi.getNode(nodeId))
                .pipe(operators.map(this.cleanMetadataFromSemicolon));
        };
        NodesApiService.prototype.createNodeMetadata = function (nodeType, nameSpace, data, path, name) {
            var properties = {};
            for (var key in data) {
                if (data[key]) {
                    properties[nameSpace + ':' + key] = data[key];
                }
            }
            return this.createNodeInsideRoot(name || this.generateUuid(), nodeType, properties, path);
        };
        NodesApiService.prototype.createNodeInsideRoot = function (name, nodeType, properties, path) {
            var body = {
                name: name,
                nodeType: nodeType,
                properties: properties,
                relativePath: path
            };
            return rxjs.from(this.nodesApi.createNode('-root-', body, {}));
        };
        NodesApiService.prototype.generateUuid = function () {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        };
        NodesApiService.prototype.cleanMetadataFromSemicolon = function (nodeEntry) {
            var metadata = {};
            if (nodeEntry && nodeEntry.entry.properties) {
                for (var key in nodeEntry.entry.properties) {
                    if (key) {
                        if (key.indexOf(':') !== -1) {
                            metadata[key.split(':')[1]] = nodeEntry.entry.properties[key];
                        }
                        else {
                            metadata[key] = nodeEntry.entry.properties[key];
                        }
                    }
                }
            }
            return new NodeMetadata(metadata, nodeEntry.entry.nodeType);
        };
        return NodesApiService;
    }());
    NodesApiService.ɵprov = i0.ɵɵdefineInjectable({ factory: function NodesApiService_Factory() { return new NodesApiService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(UserPreferencesService)); }, token: NodesApiService, providedIn: "root" });
    NodesApiService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    NodesApiService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: UserPreferencesService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DownloadZipDialogComponent = /** @class */ (function () {
        function DownloadZipDialogComponent(dialogRef, data, logService, downloadZipService, nodeService, contentService) {
            this.dialogRef = dialogRef;
            this.data = data;
            this.logService = logService;
            this.downloadZipService = downloadZipService;
            this.nodeService = nodeService;
            this.contentService = contentService;
            this.cancelled = false;
        }
        DownloadZipDialogComponent.prototype.ngOnInit = function () {
            if (this.data && this.data.nodeIds && this.data.nodeIds.length > 0) {
                if (!this.cancelled) {
                    this.downloadZip(this.data.nodeIds);
                }
                else {
                    this.logService.log('Cancelled');
                }
            }
        };
        DownloadZipDialogComponent.prototype.cancelDownload = function () {
            this.cancelled = true;
            this.downloadZipService.cancelDownload(this.downloadId);
            this.dialogRef.close(false);
        };
        DownloadZipDialogComponent.prototype.downloadZip = function (nodeIds) {
            var _this = this;
            if (nodeIds && nodeIds.length > 0) {
                this.downloadZipService.createDownload({ nodeIds: nodeIds }).subscribe(function (data) {
                    if (data && data.entry && data.entry.id) {
                        var url_1 = _this.contentService.getContentUrl(data.entry.id, true);
                        _this.nodeService.getNode(data.entry.id).subscribe(function (downloadNode) {
                            _this.logService.log(downloadNode);
                            var fileName = downloadNode.name;
                            _this.downloadId = data.entry.id;
                            _this.waitAndDownload(data.entry.id, url_1, fileName);
                        });
                    }
                });
            }
        };
        DownloadZipDialogComponent.prototype.waitAndDownload = function (downloadId, url, fileName) {
            var _this = this;
            if (this.cancelled) {
                return;
            }
            this.downloadZipService.getDownload(downloadId).subscribe(function (downloadEntry) {
                if (downloadEntry.entry) {
                    if (downloadEntry.entry.status === 'DONE') {
                        _this.download(url, fileName);
                    }
                    else {
                        setTimeout(function () {
                            _this.waitAndDownload(downloadId, url, fileName);
                        }, 1000);
                    }
                }
            });
        };
        DownloadZipDialogComponent.prototype.download = function (url, fileName) {
            if (url && fileName) {
                var link = document.createElement('a');
                link.style.display = 'none';
                link.download = fileName;
                link.href = url;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
            this.dialogRef.close(true);
        };
        return DownloadZipDialogComponent;
    }());
    DownloadZipDialogComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-download-zip-dialog',
                    template: "<h1 matDialogTitle>{{ 'CORE.DIALOG.DOWNLOAD_ZIP.TITLE' | translate }}</h1>\n<div mat-dialog-content>\n    <mat-progress-bar color=\"primary\" mode=\"indeterminate\"></mat-progress-bar>\n</div>\n<mat-dialog-actions align=\"end\">\n    <button mat-button color=\"primary\" id=\"cancel-button\" (click)=\"cancelDownload()\">\n        {{ 'CORE.DIALOG.DOWNLOAD_ZIP.ACTIONS.CANCEL' | translate }}\n    </button>\n</mat-dialog-actions>\n",
                    host: { 'class': 'adf-download-zip-dialog' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-download-zip-dialog .mat-dialog-actions .mat-button-wrapper{text-transform:uppercase}"]
                },] }
    ];
    DownloadZipDialogComponent.ctorParameters = function () { return [
        { type: i4.MatDialogRef },
        { type: undefined, decorators: [{ type: i0.Inject, args: [i4.MAT_DIALOG_DATA,] }] },
        { type: LogService },
        { type: DownloadZipService },
        { type: NodesApiService },
        { type: ContentService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NodeDownloadDirective = /** @class */ (function () {
        function NodeDownloadDirective(apiService, downloadService, dialog) {
            this.apiService = apiService;
            this.downloadService = downloadService;
            this.dialog = dialog;
        }
        Object.defineProperty(NodeDownloadDirective.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        NodeDownloadDirective.prototype.onClick = function () {
            this.downloadNodes(this.nodes);
        };
        NodeDownloadDirective.prototype.downloadNodes = function (selection) {
            if (!this.isSelectionValid(selection)) {
                return;
            }
            if (selection instanceof Array) {
                if (selection.length === 1) {
                    this.downloadNode(selection[0]);
                }
                else {
                    this.downloadZip(selection);
                }
            }
            else {
                this.downloadNode(selection);
            }
        };
        NodeDownloadDirective.prototype.downloadNode = function (node) {
            if (node && node.entry) {
                var entry = node.entry;
                if (entry.isFile) {
                    this.downloadFile(node);
                }
                if (entry.isFolder) {
                    this.downloadZip([node]);
                }
                if (!entry.isFile && !entry.isFolder && entry.nodeId) {
                    this.downloadFile(node);
                }
            }
        };
        NodeDownloadDirective.prototype.isSelectionValid = function (selection) {
            return selection || (selection instanceof Array && selection.length > 0);
        };
        NodeDownloadDirective.prototype.downloadFile = function (node) {
            if (node && node.entry) {
                var id = node.entry.nodeId || node.entry.id;
                var url = void 0, fileName = void 0;
                if (this.version) {
                    url = this.contentApi.getVersionContentUrl(id, this.version.entry.id, true);
                    fileName = this.version.entry.name;
                }
                else {
                    url = this.contentApi.getContentUrl(id, true);
                    fileName = node.entry.name;
                }
                this.downloadService.downloadUrl(url, fileName);
            }
        };
        NodeDownloadDirective.prototype.downloadZip = function (selection) {
            if (selection && selection.length > 0) {
                var nodeIds = selection.map(function (node) { return (node.entry.nodeId || node.entry.id); });
                this.dialog.open(DownloadZipDialogComponent, {
                    width: '600px',
                    disableClose: true,
                    data: {
                        nodeIds: nodeIds
                    }
                });
            }
        };
        return NodeDownloadDirective;
    }());
    NodeDownloadDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adfNodeDownload]'
                },] }
    ];
    NodeDownloadDirective.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: DownloadService },
        { type: i4.MatDialog }
    ]; };
    NodeDownloadDirective.propDecorators = {
        nodes: [{ type: i0.Input, args: ['adfNodeDownload',] }],
        version: [{ type: i0.Input }],
        onClick: [{ type: i0.HostListener, args: ['click',] }]
    };

    var VersionCompatibilityService = /** @class */ (function () {
        function VersionCompatibilityService(discoveryApiService) {
            var _this = this;
            this.discoveryApiService = discoveryApiService;
            this.acsVersionInitialized$ = new rxjs.ReplaySubject();
            this.discoveryApiService.ecmProductInfo$
                .pipe(operators.filter(function (acsInfo) { return !!acsInfo; }))
                .subscribe(function (acsInfo) { return _this.initializeAcsVersion(acsInfo.version); });
        }
        VersionCompatibilityService.prototype.initializeAcsVersion = function (acsVersion) {
            this.acsVersion = acsVersion;
            this.acsVersionInitialized$.next();
        };
        VersionCompatibilityService.prototype.getAcsVersion = function () {
            return this.acsVersion;
        };
        VersionCompatibilityService.prototype.isVersionSupported = function (requiredVersion) {
            var parsedRequiredVersion = this.parseVersion(requiredVersion);
            var currentVersion = this.getAcsVersion();
            var versionSupported = false;
            if (currentVersion) {
                if (+currentVersion.major > +parsedRequiredVersion.major) {
                    versionSupported = true;
                }
                else if (currentVersion.major === parsedRequiredVersion.major &&
                    +currentVersion.minor > +parsedRequiredVersion.minor) {
                    versionSupported = true;
                }
                else if (currentVersion.major === parsedRequiredVersion.major &&
                    currentVersion.minor === parsedRequiredVersion.minor &&
                    +currentVersion.patch >= +parsedRequiredVersion.patch) {
                    versionSupported = true;
                }
            }
            return versionSupported;
        };
        VersionCompatibilityService.prototype.parseVersion = function (version) {
            var major = version.split('.')[0];
            var minor = version.split('.')[1] || '0';
            var patch = version.split('.')[2] || '0';
            return {
                major: major,
                minor: minor,
                patch: patch
            };
        };
        return VersionCompatibilityService;
    }());
    VersionCompatibilityService.ɵprov = i0.ɵɵdefineInjectable({ factory: function VersionCompatibilityService_Factory() { return new VersionCompatibilityService(i0.ɵɵinject(DiscoveryApiService)); }, token: VersionCompatibilityService, providedIn: "root" });
    VersionCompatibilityService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    VersionCompatibilityService.ctorParameters = function () { return [
        { type: DiscoveryApiService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var VersionCompatibilityDirective = /** @class */ (function () {
        function VersionCompatibilityDirective(templateRef, viewContainer, versionCompatibilityService) {
            this.templateRef = templateRef;
            this.viewContainer = viewContainer;
            this.versionCompatibilityService = versionCompatibilityService;
        }
        Object.defineProperty(VersionCompatibilityDirective.prototype, "version", {
            set: function (requiredVersion) {
                this.validateAcsVersion(requiredVersion);
            },
            enumerable: false,
            configurable: true
        });
        VersionCompatibilityDirective.prototype.validateAcsVersion = function (requiredVersion) {
            var _this = this;
            this.versionCompatibilityService.acsVersionInitialized$.pipe(operators.take(1)).subscribe(function () {
                _this.viewContainer.clear();
                if (requiredVersion && _this.versionCompatibilityService.isVersionSupported(requiredVersion)) {
                    _this.viewContainer.createEmbeddedView(_this.templateRef);
                }
            });
        };
        return VersionCompatibilityDirective;
    }());
    VersionCompatibilityDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-acs-version]'
                },] }
    ];
    VersionCompatibilityDirective.ctorParameters = function () { return [
        { type: i0.TemplateRef },
        { type: i0.ViewContainerRef },
        { type: VersionCompatibilityService }
    ]; };
    VersionCompatibilityDirective.propDecorators = {
        version: [{ type: i0.Input, args: ['adf-acs-version',] }]
    };

    var TooltipCardComponent = /** @class */ (function () {
        function TooltipCardComponent(sanitizer) {
            this.sanitizer = sanitizer;
            this.image = '';
            this.text = '';
            this.htmlContent = '';
            this.width = '300';
        }
        TooltipCardComponent.prototype.sanitizedHtmlContent = function () {
            return this.sanitizer.sanitize(i0.SecurityContext.HTML, this.htmlContent);
        };
        return TooltipCardComponent;
    }());
    TooltipCardComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-tooltip-card-component',
                    template: "<div @tooltip class=\"adf-tooltip-card\" [style.width.px]=\"width\">\n    <img *ngIf=\"image \" [src]=\"image\" [width]=\"width\" alt=\"{{text}}\">\n    <hr *ngIf=\"image\" />\n    <p *ngIf=\"text\">{{text}}</p>\n    <div *ngIf=\"htmlContent\" [innerHTML]=\"sanitizedHtmlContent()\" class=\"adf-tooltip-card-content\"></div>\n</div>\n",
                    animations: [
                        animations.trigger('tooltip', [
                            animations.transition(':enter', [
                                animations.style({ opacity: 0 }),
                                animations.animate(200, animations.style({ opacity: 1 }))
                            ]),
                            animations.transition(':leave', [
                                animations.animate(200, animations.style({ opacity: 0 }))
                            ])
                        ])
                    ],
                    styles: [":host{display:block}div.adf-tooltip-card{background-color:var(--theme-card-bg-color);border:1px solid var(--theme-primary-color);border-radius:6px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);padding:12px}div.adf-tooltip-card div,div.adf-tooltip-card p{color:var(--adf-tooltip-card-color);font-size:var(--theme-caption-font-size);margin:0}div.adf-tooltip-card hr{border:1px solid var(--theme-primary-color);margin:6px 0}div.adf-tooltip-card img{border-radius:6px}::ng-deep .cdk-overlay-connected-position-bounding-box{margin-top:10px!important}"]
                },] }
    ];
    TooltipCardComponent.ctorParameters = function () { return [
        { type: i3.DomSanitizer }
    ]; };
    TooltipCardComponent.propDecorators = {
        image: [{ type: i0.Input }],
        text: [{ type: i0.Input }],
        htmlContent: [{ type: i0.Input }],
        width: [{ type: i0.Input }]
    };

    var TooltipCardDirective = /** @class */ (function () {
        function TooltipCardDirective(overlay, overlayPositionBuilder, elementRef) {
            this.overlay = overlay;
            this.overlayPositionBuilder = overlayPositionBuilder;
            this.elementRef = elementRef;
            this.text = '';
            this.image = '';
            this.width = '300';
            this.htmlContent = '';
            this.originX = 'start';
            this.originY = 'top';
            this.overlayX = 'start';
            this.overlayY = 'bottom';
            this.offsetX = 0;
            this.offsetY = -8;
        }
        TooltipCardDirective.prototype.ngOnDestroy = function () {
            this.hide();
        };
        TooltipCardDirective.prototype.ngOnInit = function () {
            var positionStrategy = this.overlayPositionBuilder
                .flexibleConnectedTo(this.elementRef)
                .withPositions([{
                    originX: this.originX,
                    originY: this.originY,
                    overlayX: this.overlayX,
                    overlayY: this.overlayY,
                    offsetY: this.offsetY,
                    offsetX: this.offsetX
                }]);
            this.overlayRef = this.overlay.create({ positionStrategy: positionStrategy });
        };
        TooltipCardDirective.prototype.show = function () {
            var tooltipRef = this.overlayRef.attach(new portal.ComponentPortal(TooltipCardComponent));
            tooltipRef.instance.text = this.text;
            tooltipRef.instance.image = this.image;
            tooltipRef.instance.width = this.width;
            tooltipRef.instance.htmlContent = this.htmlContent;
        };
        TooltipCardDirective.prototype.hide = function () {
            this.overlayRef.detach();
        };
        return TooltipCardDirective;
    }());
    TooltipCardDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-tooltip-card]' },] }
    ];
    TooltipCardDirective.ctorParameters = function () { return [
        { type: i1$4.Overlay },
        { type: i1$4.OverlayPositionBuilder },
        { type: i0.ElementRef }
    ]; };
    TooltipCardDirective.propDecorators = {
        text: [{ type: i0.Input, args: ['adf-tooltip-card',] }],
        image: [{ type: i0.Input }],
        width: [{ type: i0.Input }],
        htmlContent: [{ type: i0.Input }],
        originX: [{ type: i0.Input }],
        originY: [{ type: i0.Input }],
        overlayX: [{ type: i0.Input }],
        overlayY: [{ type: i0.Input }],
        offsetX: [{ type: i0.Input }],
        offsetY: [{ type: i0.Input }],
        show: [{ type: i0.HostListener, args: ['mouseenter',] }],
        hide: [{ type: i0.HostListener, args: ['mouseleave',] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SELECT_ITEM_HEIGHT_EM = 3;
    var InfiniteSelectScrollDirective = /** @class */ (function () {
        function InfiniteSelectScrollDirective(matSelect) {
            this.matSelect = matSelect;
            this.scrollEnd = new i0.EventEmitter();
            this.onDestroy$ = new rxjs.Subject();
            this.itemHeightToWaitBeforeLoadNext = 0;
        }
        InfiniteSelectScrollDirective.prototype.ngAfterViewInit = function () {
            var _this = this;
            this.matSelect.openedChange
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (opened) {
                if (opened) {
                    _this.itemHeightToWaitBeforeLoadNext = (_this.getItemHeight() * (InfiniteSelectScrollDirective.MAX_ITEMS / 2));
                    _this.matSelect.panel.nativeElement.addEventListener('scroll', function (event) { return _this.handleScrollEvent(event); });
                }
            });
        };
        InfiniteSelectScrollDirective.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        InfiniteSelectScrollDirective.prototype.handleScrollEvent = function (event) {
            if (this.isScrollInNextFetchArea(event)) {
                this.scrollEnd.emit(event);
            }
        };
        InfiniteSelectScrollDirective.prototype.isScrollInNextFetchArea = function (event) {
            var target = event.target;
            return target.scrollTop >= (target.scrollHeight - target.offsetHeight - this.itemHeightToWaitBeforeLoadNext);
        };
        InfiniteSelectScrollDirective.prototype.getItemHeight = function () {
            return parseFloat(getComputedStyle(this.matSelect.panel.nativeElement).fontSize || '0') * SELECT_ITEM_HEIGHT_EM;
        };
        return InfiniteSelectScrollDirective;
    }());
    InfiniteSelectScrollDirective.MAX_ITEMS = 50;
    InfiniteSelectScrollDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-infinite-select-scroll]'
                },] }
    ];
    InfiniteSelectScrollDirective.ctorParameters = function () { return [
        { type: select.MatSelect, decorators: [{ type: i0.Inject, args: [select.MatSelect,] }] }
    ]; };
    InfiniteSelectScrollDirective.propDecorators = {
        scrollEnd: [{ type: i0.Output }]
    };

    var LibraryFavoriteDirective = /** @class */ (function () {
        function LibraryFavoriteDirective(alfrescoApiService) {
            this.alfrescoApiService = alfrescoApiService;
            this.library = null;
            this.toggle = new i0.EventEmitter();
            this.error = new i0.EventEmitter();
            this.targetLibrary = null;
        }
        Object.defineProperty(LibraryFavoriteDirective.prototype, "favoritesApi", {
            get: function () {
                var _a;
                this._favoritesApi = (_a = this._favoritesApi) !== null && _a !== void 0 ? _a : new jsApi.FavoritesApi(this.alfrescoApiService.getInstance());
                return this._favoritesApi;
            },
            enumerable: false,
            configurable: true
        });
        LibraryFavoriteDirective.prototype.onClick = function () {
            var guid = this.targetLibrary.entry.guid;
            if (this.targetLibrary.isFavorite) {
                this.removeFavorite(guid);
            }
            else {
                this.addFavorite({
                    target: {
                        site: {
                            guid: guid
                        }
                    }
                });
            }
        };
        LibraryFavoriteDirective.prototype.ngOnChanges = function (changes) {
            if (!changes.library.currentValue) {
                this.targetLibrary = null;
                return;
            }
            this.targetLibrary = changes.library.currentValue;
            this.markFavoriteLibrary(changes.library.currentValue);
        };
        LibraryFavoriteDirective.prototype.isFavorite = function () {
            return this.targetLibrary && this.targetLibrary.isFavorite;
        };
        LibraryFavoriteDirective.prototype.markFavoriteLibrary = function (library) {
            return __awaiter(this, void 0, void 0, function () {
                var _a_1;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (!(this.targetLibrary.isFavorite === undefined)) return [3 /*break*/, 5];
                            _b.label = 1;
                        case 1:
                            _b.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, this.favoritesApi.getFavoriteSite('-me-', library.entry.id)];
                        case 2:
                            _b.sent();
                            this.targetLibrary.isFavorite = true;
                            return [3 /*break*/, 4];
                        case 3:
                            _a_1 = _b.sent();
                            this.targetLibrary.isFavorite = false;
                            return [3 /*break*/, 4];
                        case 4: return [3 /*break*/, 6];
                        case 5:
                            this.targetLibrary = library;
                            _b.label = 6;
                        case 6: return [2 /*return*/];
                    }
                });
            });
        };
        LibraryFavoriteDirective.prototype.addFavorite = function (favoriteBody) {
            var _this = this;
            this.favoritesApi
                .createFavorite('-me-', favoriteBody)
                .then(function (libraryEntry) {
                _this.targetLibrary.isFavorite = true;
                _this.toggle.emit(libraryEntry);
            })
                .catch(function (error) { return _this.error.emit(error); });
        };
        LibraryFavoriteDirective.prototype.removeFavorite = function (favoriteId) {
            var _this = this;
            this.favoritesApi
                .deleteFavorite('-me-', favoriteId)
                .then(function (libraryBody) {
                _this.targetLibrary.isFavorite = false;
                _this.toggle.emit(libraryBody);
            })
                .catch(function (error) { return _this.error.emit(error); });
        };
        return LibraryFavoriteDirective;
    }());
    LibraryFavoriteDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-favorite-library]',
                    exportAs: 'favoriteLibrary'
                },] }
    ];
    LibraryFavoriteDirective.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };
    LibraryFavoriteDirective.propDecorators = {
        library: [{ type: i0.Input, args: ['adf-favorite-library',] }],
        toggle: [{ type: i0.Output }],
        error: [{ type: i0.Output }],
        onClick: [{ type: i0.HostListener, args: ['click',] }]
    };

    var SitesService = /** @class */ (function () {
        function SitesService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(SitesService.prototype, "sitesApi", {
            get: function () {
                var _a;
                this._sitesApi = (_a = this._sitesApi) !== null && _a !== void 0 ? _a : new jsApi.SitesApi(this.apiService.getInstance());
                return this._sitesApi;
            },
            enumerable: false,
            configurable: true
        });
        SitesService.prototype.createSite = function (siteBody) {
            var _this = this;
            return rxjs.from(this.sitesApi.createSite(siteBody))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.getSites = function (opts) {
            var _this = this;
            if (opts === void 0) { opts = {}; }
            var defaultOptions = {
                skipCount: 0,
                include: ['properties']
            };
            var queryOptions = Object.assign({}, defaultOptions, opts);
            return rxjs.from(this.sitesApi.listSites(queryOptions))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.getSite = function (siteId, opts) {
            var _this = this;
            return rxjs.from(this.sitesApi.getSite(siteId, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.deleteSite = function (siteId, permanentFlag) {
            var _this = this;
            if (permanentFlag === void 0) { permanentFlag = true; }
            var options = {};
            options.permanent = permanentFlag;
            return rxjs.from(this.sitesApi.deleteSite(siteId, options))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.getSiteContent = function (siteId) {
            return this.getSite(siteId, { relations: ['containers'] });
        };
        SitesService.prototype.getSiteMembers = function (siteId) {
            return this.getSite(siteId, { relations: ['members'] });
        };
        SitesService.prototype.listSiteMemberships = function (siteId, opts) {
            return rxjs.from(this.sitesApi.listSiteMemberships(siteId, opts));
        };
        SitesService.prototype.getEcmCurrentLoggedUserName = function () {
            return this.apiService.getInstance().getEcmUsername();
        };
        SitesService.prototype.getSiteNameFromNodePath = function (node) {
            var siteName = '';
            if (node.path && node.path.elements) {
                var foundNode = node.path
                    .elements.find(function (pathNode) { return pathNode.nodeType === 'st:site' &&
                    pathNode.name !== 'Sites'; });
                siteName = foundNode ? foundNode.name : '';
            }
            return siteName.toLocaleLowerCase();
        };
        SitesService.prototype.getSiteMembershipRequests = function (opts) {
            var _this = this;
            return rxjs.from(this.sitesApi.getSiteMembershipRequests(opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.createSiteMembership = function (siteId, siteMembershipBodyCreate, opts) {
            var _this = this;
            return rxjs.from(this.sitesApi.createSiteMembership(siteId, siteMembershipBodyCreate, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.updateSiteMembership = function (siteId, personId, siteMembershipBodyUpdate, opts) {
            var _this = this;
            return rxjs.from(this.sitesApi.updateSiteMembership(siteId, personId, siteMembershipBodyUpdate, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.deleteSiteMembership = function (siteId, personId) {
            var _this = this;
            return rxjs.from(this.sitesApi.deleteSiteMembership(siteId, personId))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.approveSiteMembershipRequest = function (siteId, inviteeId, opts) {
            var _this = this;
            return rxjs.from(this.sitesApi.approveSiteMembershipRequest(siteId, inviteeId, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.rejectSiteMembershipRequest = function (siteId, inviteeId, opts) {
            var _this = this;
            return rxjs.from(this.sitesApi.rejectSiteMembershipRequest(siteId, inviteeId, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.listSiteGroups = function (siteId, opts) {
            var _this = this;
            return rxjs.from(this.sitesApi.listSiteGroups(siteId, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.createSiteGroupMembership = function (siteId, siteMembershipBodyCreate) {
            var _this = this;
            return rxjs.from(this.sitesApi.createSiteGroupMembership(siteId, siteMembershipBodyCreate))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.getSiteGroupMembership = function (siteId, groupId) {
            var _this = this;
            return rxjs.from(this.sitesApi.getSiteGroupMembership(siteId, groupId))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.updateSiteGroupMembership = function (siteId, groupId, siteMembershipBodyUpdate) {
            var _this = this;
            return rxjs.from(this.sitesApi.updateSiteGroupMembership(siteId, groupId, siteMembershipBodyUpdate))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.deleteSiteGroupMembership = function (siteId, groupId) {
            var _this = this;
            return rxjs.from(this.sitesApi.deleteSiteGroupMembership(siteId, groupId))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        SitesService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return SitesService;
    }());
    SitesService.ɵprov = i0.ɵɵdefineInjectable({ factory: function SitesService_Factory() { return new SitesService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: SitesService, providedIn: "root" });
    SitesService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    SitesService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LibraryMembershipDirective = /** @class */ (function () {
        function LibraryMembershipDirective(alfrescoApiService, sitesService, versionCompatibilityService) {
            this.alfrescoApiService = alfrescoApiService;
            this.sitesService = sitesService;
            this.versionCompatibilityService = versionCompatibilityService;
            this.targetSite = null;
            this.isJoinRequested = new rxjs.BehaviorSubject(false);
            this.selection = null;
            this.isAdmin = false;
            this.toggle = new i0.EventEmitter();
            this.error = new i0.EventEmitter();
        }
        Object.defineProperty(LibraryMembershipDirective.prototype, "sitesApi", {
            get: function () {
                var _a;
                this._sitesApi = (_a = this._sitesApi) !== null && _a !== void 0 ? _a : new jsApi.SitesApi(this.alfrescoApiService.getInstance());
                return this._sitesApi;
            },
            enumerable: false,
            configurable: true
        });
        LibraryMembershipDirective.prototype.onClick = function () {
            this.toggleMembershipRequest();
        };
        LibraryMembershipDirective.prototype.ngOnChanges = function (changes) {
            if (!changes.selection.currentValue || !changes.selection.currentValue.entry) {
                this.targetSite = null;
                return;
            }
            this.targetSite = changes.selection.currentValue.entry;
            this.markMembershipRequest();
        };
        LibraryMembershipDirective.prototype.toggleMembershipRequest = function () {
            var _this = this;
            if (!this.targetSite) {
                return;
            }
            if (this.targetSite.joinRequested) {
                this.cancelJoinRequest().subscribe(function () {
                    _this.targetSite.joinRequested = false;
                    _this.isJoinRequested.next(false);
                    var info = {
                        updatedEntry: _this.targetSite,
                        shouldReload: false,
                        i18nKey: 'APP.MESSAGES.INFO.JOIN_CANCELED'
                    };
                    _this.toggle.emit(info);
                }, function (error) {
                    var errWithMessage = {
                        error: error,
                        i18nKey: 'APP.MESSAGES.ERRORS.JOIN_CANCEL_FAILED'
                    };
                    _this.error.emit(errWithMessage);
                });
            }
            if (!this.targetSite.joinRequested && !this.isAdmin) {
                this.joinLibraryRequest().subscribe(function (createdMembership) {
                    _this.targetSite.joinRequested = true;
                    _this.isJoinRequested.next(true);
                    if (createdMembership.entry && createdMembership.entry.site && createdMembership.entry.site.role) {
                        var info = {
                            shouldReload: true,
                            i18nKey: 'APP.MESSAGES.INFO.JOINED'
                        };
                        _this.toggle.emit(info);
                    }
                    else {
                        var info = {
                            updatedEntry: _this.targetSite,
                            shouldReload: false,
                            i18nKey: 'APP.MESSAGES.INFO.JOIN_REQUESTED'
                        };
                        _this.toggle.emit(info);
                    }
                }, function (error) {
                    var errWithMessage = {
                        error: error,
                        i18nKey: 'APP.MESSAGES.ERRORS.JOIN_REQUEST_FAILED'
                    };
                    var senderEmailCheck = 'Failed to resolve sender mail address';
                    var receiverEmailCheck = 'All recipients for the mail action were invalid';
                    if (error.message) {
                        if (error.message.includes(senderEmailCheck)) {
                            errWithMessage.i18nKey = 'APP.MESSAGES.ERRORS.INVALID_SENDER_EMAIL';
                        }
                        else if (error.message.includes(receiverEmailCheck)) {
                            errWithMessage.i18nKey = 'APP.MESSAGES.ERRORS.INVALID_RECEIVER_EMAIL';
                        }
                    }
                    _this.error.emit(errWithMessage);
                });
            }
            if (this.isAdmin) {
                this.joinLibrary().subscribe(function (createdMembership) {
                    if (createdMembership.entry && createdMembership.entry.role) {
                        var info = {
                            shouldReload: true,
                            i18nKey: 'APP.MESSAGES.INFO.JOINED'
                        };
                        _this.toggle.emit(info);
                    }
                }, function (error) {
                    var errWithMessage = {
                        error: error,
                        i18nKey: 'APP.MESSAGES.ERRORS.JOIN_REQUEST_FAILED'
                    };
                    var senderEmailCheck = 'Failed to resolve sender mail address';
                    var receiverEmailCheck = 'All recipients for the mail action were invalid';
                    if (error.message) {
                        if (error.message.includes(senderEmailCheck)) {
                            errWithMessage.i18nKey = 'APP.MESSAGES.ERRORS.INVALID_SENDER_EMAIL';
                        }
                        else if (error.message.includes(receiverEmailCheck)) {
                            errWithMessage.i18nKey = 'APP.MESSAGES.ERRORS.INVALID_RECEIVER_EMAIL';
                        }
                    }
                    _this.error.emit(errWithMessage);
                });
            }
        };
        LibraryMembershipDirective.prototype.markMembershipRequest = function () {
            var _this = this;
            if (!this.targetSite) {
                return;
            }
            this.getMembershipRequest().subscribe(function (data) {
                if (data.entry.id === _this.targetSite.id) {
                    _this.targetSite.joinRequested = true;
                    _this.isJoinRequested.next(true);
                }
            }, function () {
                _this.targetSite.joinRequested = false;
                _this.isJoinRequested.next(false);
            });
        };
        LibraryMembershipDirective.prototype.joinLibraryRequest = function () {
            var memberBody = {
                id: this.targetSite.id
            };
            if (this.versionCompatibilityService.isVersionSupported('7.0.0')) {
                memberBody.client = 'workspace';
            }
            return rxjs.from(this.sitesApi.createSiteMembershipRequestForPerson('-me-', memberBody));
        };
        LibraryMembershipDirective.prototype.joinLibrary = function () {
            return this.sitesService.createSiteMembership(this.targetSite.id, {
                role: 'SiteConsumer',
                id: '-me-'
            });
        };
        LibraryMembershipDirective.prototype.cancelJoinRequest = function () {
            return rxjs.from(this.sitesApi.deleteSiteMembershipRequestForPerson('-me-', this.targetSite.id));
        };
        LibraryMembershipDirective.prototype.getMembershipRequest = function () {
            return rxjs.from(this.sitesApi.getSiteMembershipRequestForPerson('-me-', this.targetSite.id));
        };
        return LibraryMembershipDirective;
    }());
    LibraryMembershipDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-library-membership]',
                    exportAs: 'libraryMembership'
                },] }
    ];
    LibraryMembershipDirective.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: SitesService },
        { type: VersionCompatibilityService }
    ]; };
    LibraryMembershipDirective.propDecorators = {
        selection: [{ type: i0.Input, args: ['adf-library-membership',] }],
        isAdmin: [{ type: i0.Input }],
        toggle: [{ type: i0.Output }],
        error: [{ type: i0.Output }],
        onClick: [{ type: i0.HostListener, args: ['click',] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DirectiveModule = /** @class */ (function () {
        function DirectiveModule() {
        }
        return DirectiveModule;
    }());
    DirectiveModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$4.OverlayModule
                    ],
                    declarations: [
                        HighlightDirective,
                        LogoutDirective,
                        NodeDeleteDirective,
                        NodeFavoriteDirective,
                        CheckAllowableOperationDirective,
                        NodeRestoreDirective,
                        NodeDownloadDirective,
                        UploadDirective,
                        VersionCompatibilityDirective,
                        TooltipCardDirective,
                        TooltipCardComponent,
                        InfiniteSelectScrollDirective,
                        LibraryFavoriteDirective,
                        LibraryMembershipDirective
                    ],
                    exports: [
                        HighlightDirective,
                        LogoutDirective,
                        NodeDeleteDirective,
                        NodeFavoriteDirective,
                        CheckAllowableOperationDirective,
                        NodeRestoreDirective,
                        NodeDownloadDirective,
                        UploadDirective,
                        VersionCompatibilityDirective,
                        TooltipCardDirective,
                        InfiniteSelectScrollDirective,
                        LibraryFavoriteDirective,
                        LibraryMembershipDirective
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataTableCellComponent = /** @class */ (function () {
        function DataTableCellComponent(alfrescoApiService) {
            this.alfrescoApiService = alfrescoApiService;
            this.value$ = new rxjs.BehaviorSubject('');
            this.resolverFn = null;
            this.onDestroy$ = new rxjs.Subject();
        }
        DataTableCellComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.updateValue();
            this.alfrescoApiService.nodeUpdated
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (node) {
                if (_this.row) {
                    if (_this.row['node'].entry.id === node.id) {
                        _this.row['node'].entry = node;
                        _this.row['cache'][_this.column.key] = _this.column.key.split('.').reduce(function (source, key) { return source ? source[key] : ''; }, node);
                        _this.updateValue();
                    }
                }
            });
        };
        DataTableCellComponent.prototype.updateValue = function () {
            if (this.column && this.column.key && this.row && this.data) {
                var value = this.data.getValue(this.row, this.column, this.resolverFn);
                this.value$.next(value);
                if (!this.tooltip) {
                    this.tooltip = value;
                }
            }
        };
        DataTableCellComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        return DataTableCellComponent;
    }());
    DataTableCellComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-datatable-cell',
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    template: "\n        <ng-container>\n            <span *ngIf=\"copyContent; else defaultCell\"\n                adf-clipboard=\"CLIPBOARD.CLICK_TO_COPY\"\n                [clipboard-notification]=\"'CLIPBOARD.SUCCESS_COPY'\"\n                [attr.aria-label]=\"value$ | async\"\n                [title]=\"tooltip\"\n                class=\"adf-datatable-cell-value\"\n                >{{ value$ | async }}</span>\n        </ng-container>\n        <ng-template #defaultCell>\n            <span\n                [attr.aria-label]=\"value$ | async\"\n                [title]=\"tooltip\"\n                class=\"adf-datatable-cell-value\"\n            >{{ value$ | async }}</span>\n        </ng-template>\n    ",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-datatable-content-cell' }
                },] }
    ];
    DataTableCellComponent.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };
    DataTableCellComponent.propDecorators = {
        data: [{ type: i0.Input }],
        column: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        copyContent: [{ type: i0.Input }],
        tooltip: [{ type: i0.Input }],
        resolverFn: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataTableRowComponent = /** @class */ (function () {
        function DataTableRowComponent(element) {
            this.element = element;
            this.disabled = false;
            this.select = new i0.EventEmitter();
        }
        Object.defineProperty(DataTableRowComponent.prototype, "isSelected", {
            get: function () {
                if (!this.row) {
                    return false;
                }
                return this.row.isSelected;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(DataTableRowComponent.prototype, "isAriaSelected", {
            get: function () {
                if (!this.row) {
                    return false;
                }
                return this.row.isSelected;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(DataTableRowComponent.prototype, "ariaLabel", {
            get: function () {
                if (!this.row) {
                    return null;
                }
                if (this.row.isSelected) {
                    return this.row.getValue('name') + ' selected' || '';
                }
                else {
                    return this.row.getValue('name') || '';
                }
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(DataTableRowComponent.prototype, "tabindex", {
            get: function () {
                return this.disabled ? null : 0;
            },
            enumerable: false,
            configurable: true
        });
        DataTableRowComponent.prototype.onKeyDown = function (event) {
            if (event.target.tagName === this.element.nativeElement.tagName) {
                event.preventDefault();
                this.select.emit(event);
            }
        };
        DataTableRowComponent.prototype.focus = function () {
            this.element.nativeElement.focus();
        };
        return DataTableRowComponent;
    }());
    DataTableRowComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-datatable-row',
                    template: "<ng-content></ng-content>",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: {
                        class: 'adf-datatable-row',
                        tabindex: '0',
                        role: 'row'
                    }
                },] }
    ];
    DataTableRowComponent.ctorParameters = function () { return [
        { type: i0.ElementRef }
    ]; };
    DataTableRowComponent.propDecorators = {
        row: [{ type: i0.Input }],
        disabled: [{ type: i0.Input }],
        select: [{ type: i0.Output }],
        isSelected: [{ type: i0.HostBinding, args: ['class.adf-is-selected',] }],
        isAriaSelected: [{ type: i0.HostBinding, args: ['attr.aria-selected',] }],
        ariaLabel: [{ type: i0.HostBinding, args: ['attr.aria-label',] }],
        tabindex: [{ type: i0.HostBinding, args: ['attr.tabindex',] }],
        onKeyDown: [{ type: i0.HostListener, args: ['keydown.space', ['$event'],] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataColumnComponent = /** @class */ (function () {
        function DataColumnComponent() {
            this.type = 'text';
            this.sortable = true;
            this.title = '';
            this.editable = false;
            this.focus = true;
        }
        DataColumnComponent.prototype.ngOnInit = function () {
            if (!this.srTitle && this.key === '$thumbnail') {
                this.srTitle = 'Thumbnail';
            }
        };
        return DataColumnComponent;
    }());
    DataColumnComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'data-column',
                    template: ''
                },] }
    ];
    DataColumnComponent.propDecorators = {
        key: [{ type: i0.Input }],
        type: [{ type: i0.Input }],
        format: [{ type: i0.Input }],
        sortable: [{ type: i0.Input }],
        title: [{ type: i0.Input }],
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }],
        formatTooltip: [{ type: i0.Input }],
        srTitle: [{ type: i0.Input, args: ['sr-title',] }],
        cssClass: [{ type: i0.Input, args: ['class',] }],
        copyContent: [{ type: i0.Input }],
        editable: [{ type: i0.Input }],
        focus: [{ type: i0.Input }],
        sortingKey: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataColumnListComponent = /** @class */ (function () {
        function DataColumnListComponent() {
        }
        return DataColumnListComponent;
    }());
    DataColumnListComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'data-columns',
                    template: ''
                },] }
    ];
    DataColumnListComponent.propDecorators = {
        columns: [{ type: i0.ContentChildren, args: [DataColumnComponent,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var BaseEvent = /** @class */ (function () {
        function BaseEvent() {
            this.isDefaultPrevented = false;
        }
        Object.defineProperty(BaseEvent.prototype, "defaultPrevented", {
            get: function () {
                return this.isDefaultPrevented;
            },
            enumerable: false,
            configurable: true
        });
        BaseEvent.prototype.preventDefault = function () {
            this.isDefaultPrevented = true;
        };
        return BaseEvent;
    }());

    var BaseUIEvent = /** @class */ (function (_super) {
        __extends(BaseUIEvent, _super);
        function BaseUIEvent() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return BaseUIEvent;
    }(BaseEvent));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FileUploadOptions = /** @class */ (function () {
        function FileUploadOptions() {
        }
        return FileUploadOptions;
    }());
    (function (FileUploadStatus) {
        FileUploadStatus[FileUploadStatus["Pending"] = 0] = "Pending";
        FileUploadStatus[FileUploadStatus["Complete"] = 1] = "Complete";
        FileUploadStatus[FileUploadStatus["Starting"] = 2] = "Starting";
        FileUploadStatus[FileUploadStatus["Progress"] = 3] = "Progress";
        FileUploadStatus[FileUploadStatus["Cancelled"] = 4] = "Cancelled";
        FileUploadStatus[FileUploadStatus["Aborted"] = 5] = "Aborted";
        FileUploadStatus[FileUploadStatus["Error"] = 6] = "Error";
        FileUploadStatus[FileUploadStatus["Deleted"] = 7] = "Deleted";
    })(exports.FileUploadStatus || (exports.FileUploadStatus = {}));
    var FileModel = /** @class */ (function () {
        function FileModel(file, options, id) {
            this.status = exports.FileUploadStatus.Pending;
            this.file = file;
            this.id = id;
            this.name = file.name;
            this.size = file.size;
            this.data = null;
            this.errorCode = null;
            this.progress = {
                loaded: 0,
                total: 0,
                percent: 0
            };
            this.options = Object.assign({}, {
                newVersion: false
            }, options);
        }
        Object.defineProperty(FileModel.prototype, "extension", {
            get: function () {
                return this.name.slice((Math.max(0, this.name.lastIndexOf('.')) || Infinity) + 1);
            },
            enumerable: false,
            configurable: true
        });
        return FileModel;
    }());

    var FileUploadEvent = /** @class */ (function () {
        function FileUploadEvent(file, status, error) {
            if (status === void 0) { status = exports.FileUploadStatus.Pending; }
            if (error === void 0) { error = null; }
            this.file = file;
            this.status = status;
            this.error = error;
        }
        return FileUploadEvent;
    }());
    var FileUploadCompleteEvent = /** @class */ (function (_super) {
        __extends(FileUploadCompleteEvent, _super);
        function FileUploadCompleteEvent(file, totalComplete, data, totalAborted) {
            if (totalComplete === void 0) { totalComplete = 0; }
            if (totalAborted === void 0) { totalAborted = 0; }
            var _this = _super.call(this, file, exports.FileUploadStatus.Complete) || this;
            _this.totalComplete = totalComplete;
            _this.data = data;
            _this.totalAborted = totalAborted;
            return _this;
        }
        return FileUploadCompleteEvent;
    }(FileUploadEvent));
    var FileUploadDeleteEvent = /** @class */ (function (_super) {
        __extends(FileUploadDeleteEvent, _super);
        function FileUploadDeleteEvent(file, totalComplete) {
            if (totalComplete === void 0) { totalComplete = 0; }
            var _this = _super.call(this, file, exports.FileUploadStatus.Deleted) || this;
            _this.totalComplete = totalComplete;
            return _this;
        }
        return FileUploadDeleteEvent;
    }(FileUploadEvent));
    var FileUploadErrorEvent = /** @class */ (function (_super) {
        __extends(FileUploadErrorEvent, _super);
        function FileUploadErrorEvent(file, error, totalError) {
            if (totalError === void 0) { totalError = 0; }
            var _this = _super.call(this, file, exports.FileUploadStatus.Error) || this;
            _this.error = error;
            _this.totalError = totalError;
            return _this;
        }
        return FileUploadErrorEvent;
    }(FileUploadEvent));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var DataRowEvent = /** @class */ (function (_super) {
        __extends(DataRowEvent, _super);
        function DataRowEvent(value, domEvent, sender) {
            var _this = _super.call(this) || this;
            _this.value = value;
            _this.event = domEvent;
            _this.sender = sender;
            return _this;
        }
        return DataRowEvent;
    }(BaseUIEvent));

    var DataCellEventModel = /** @class */ (function () {
        function DataCellEventModel(row, col, actions) {
            this.row = row;
            this.col = col;
            this.actions = actions || [];
        }
        return DataCellEventModel;
    }());
    var DataCellEvent = /** @class */ (function (_super) {
        __extends(DataCellEvent, _super);
        function DataCellEvent(row, col, actions) {
            var _this = _super.call(this) || this;
            _this.value = new DataCellEventModel(row, col, actions);
            return _this;
        }
        return DataCellEvent;
    }(BaseEvent));

    var DataRowActionModel = /** @class */ (function () {
        function DataRowActionModel(row, action) {
            this.row = row;
            this.action = action;
        }
        return DataRowActionModel;
    }());
    var DataRowActionEvent = /** @class */ (function (_super) {
        __extends(DataRowActionEvent, _super);
        function DataRowActionEvent(row, action) {
            var _this = _super.call(this) || this;
            _this.value = new DataRowActionModel(row, action);
            return _this;
        }
        Object.defineProperty(DataRowActionEvent.prototype, "args", {
            get: function () {
                return this.value;
            },
            enumerable: false,
            configurable: true
        });
        return DataRowActionEvent;
    }(BaseEvent));

    (function (DisplayMode) {
        DisplayMode["List"] = "list";
        DisplayMode["Gallery"] = "gallery";
    })(exports.DisplayMode || (exports.DisplayMode = {}));
    (function (ShowHeaderMode) {
        ShowHeaderMode["Never"] = "never";
        ShowHeaderMode["Always"] = "always";
        ShowHeaderMode["Data"] = "data";
    })(exports.ShowHeaderMode || (exports.ShowHeaderMode = {}));
    var DataTableComponent = /** @class */ (function () {
        function DataTableComponent(elementRef, differs) {
            var _this = this;
            this.elementRef = elementRef;
            this.display = exports.DisplayMode.List;
            this.rows = [];
            this.sorting = [];
            this.columns = [];
            this.selectionMode = 'single';
            this.multiselect = false;
            this.actions = false;
            this.actionsPosition = 'right';
            this.actionsVisibleOnHover = false;
            this.contextMenu = false;
            this.rowStyleClass = '';
            this.showHeader = exports.ShowHeaderMode.Data;
            this.stickyHeader = false;
            this.rowClick = new i0.EventEmitter();
            this.rowDblClick = new i0.EventEmitter();
            this.showRowContextMenu = new i0.EventEmitter();
            this.showRowActionsMenu = new i0.EventEmitter();
            this.executeRowAction = new i0.EventEmitter();
            this.loading = false;
            this.noPermission = false;
            this.rowMenuCacheEnabled = true;
            this.resolverFn = null;
            this.allowFiltering = false;
            this.isSelectAllIndeterminate = false;
            this.isSelectAllChecked = false;
            this.selection = new Array();
            this.fakeRows = [];
            this.rowMenuCache = {};
            this.subscriptions = [];
            if (differs) {
                this.differ = differs.find([]).create(null);
            }
            this.click$ = new rxjs.Observable(function (observer) { return _this.clickObserver = observer; })
                .pipe(operators.share());
        }
        DataTableComponent.prototype.onKeydown = function (event) {
            this.keyManager.onKeydown(event);
        };
        DataTableComponent.prototype.ngAfterContentInit = function () {
            var _this = this;
            if (this.columnList) {
                this.subscriptions.push(this.columnList.columns.changes.subscribe(function () {
                    _this.setTableSchema();
                }));
            }
            this.datatableLayoutFix();
            this.setTableSchema();
        };
        DataTableComponent.prototype.ngAfterViewInit = function () {
            this.keyManager = new a11y.FocusKeyManager(this.rowsList)
                .withWrap()
                .skipPredicate(function (item) { return item.disabled; });
        };
        DataTableComponent.prototype.ngOnChanges = function (changes) {
            this.initAndSubscribeClickStream();
            var dataChanges = changes['data'];
            var rowChanges = changes['rows'];
            var columnChanges = changes['columns'];
            if (this.isPropertyChanged(dataChanges) || this.isPropertyChanged(rowChanges) || this.isPropertyChanged(columnChanges)) {
                if (this.isTableEmpty()) {
                    this.initTable();
                }
                else {
                    if (dataChanges) {
                        this.data = changes['data'].currentValue;
                        this.resetSelection();
                    }
                    else if (rowChanges) {
                        this.setTableRows(changes['rows'].currentValue);
                        this.setTableSorting(this.sorting);
                    }
                    else {
                        this.setTableColumns(changes['columns'].currentValue);
                    }
                }
                return;
            }
            if (changes.selectionMode && !changes.selectionMode.isFirstChange()) {
                this.resetSelection();
                this.emitRowSelectionEvent('row-unselect', null);
            }
            if (this.isPropertyChanged(changes['sorting'])) {
                this.setTableSorting(changes['sorting'].currentValue);
            }
            if (this.isPropertyChanged(changes['display'])) {
                this.datatableLayoutFix();
            }
        };
        DataTableComponent.prototype.isColumnSortActive = function (column) {
            if (!column || !this.data.getSorting()) {
                return false;
            }
            return column.key === this.data.getSorting().key;
        };
        DataTableComponent.prototype.ngDoCheck = function () {
            var changes = this.differ.diff(this.rows);
            if (changes) {
                this.setTableRows(this.rows);
            }
        };
        DataTableComponent.prototype.isPropertyChanged = function (property) {
            return !!(property && property.currentValue);
        };
        DataTableComponent.prototype.convertToRowsData = function (rows) {
            return rows.map(function (row) { return new ObjectDataRow(row, row.isSelected); });
        };
        DataTableComponent.prototype.convertToColumnsData = function (columns) {
            return columns.map(function (column) { return new ObjectDataColumn(column); });
        };
        DataTableComponent.prototype.convertToDataSorting = function (sorting) {
            if (sorting && sorting.length > 0) {
                return new DataSorting(sorting[0], sorting[1]);
            }
            return null;
        };
        DataTableComponent.prototype.initAndSubscribeClickStream = function () {
            var _this = this;
            this.unsubscribeClickStream();
            var singleClickStream = this.click$
                .pipe(operators.buffer(this.click$.pipe(operators.debounceTime(250))), operators.map(function (list) { return list; }), operators.filter(function (x) { return x.length === 1; }));
            this.singleClickStreamSub = singleClickStream.subscribe(function (dataRowEvents) {
                var event = dataRowEvents[0];
                _this.handleRowSelection(event.value, event.event);
                _this.rowClick.emit(event);
                if (!event.defaultPrevented) {
                    _this.elementRef.nativeElement.dispatchEvent(new CustomEvent('row-click', {
                        detail: event,
                        bubbles: true
                    }));
                }
            });
            var multiClickStream = this.click$
                .pipe(operators.buffer(this.click$.pipe(operators.debounceTime(250))), operators.map(function (list) { return list; }), operators.filter(function (x) { return x.length >= 2; }));
            this.multiClickStreamSub = multiClickStream.subscribe(function (dataRowEvents) {
                var event = dataRowEvents[0];
                _this.rowDblClick.emit(event);
                if (!event.defaultPrevented) {
                    _this.elementRef.nativeElement.dispatchEvent(new CustomEvent('row-dblclick', {
                        detail: event,
                        bubbles: true
                    }));
                }
            });
        };
        DataTableComponent.prototype.unsubscribeClickStream = function () {
            if (this.singleClickStreamSub) {
                this.singleClickStreamSub.unsubscribe();
                this.singleClickStreamSub = null;
            }
            if (this.multiClickStreamSub) {
                this.multiClickStreamSub.unsubscribe();
                this.multiClickStreamSub = null;
            }
        };
        DataTableComponent.prototype.initTable = function () {
            var runtimeColumns = this.getRuntimeColumns();
            this.data = new ObjectDataTableAdapter(this.rows, runtimeColumns);
            this.setTableSorting(this.sorting);
            this.resetSelection();
            this.rowMenuCache = {};
        };
        DataTableComponent.prototype.isTableEmpty = function () {
            return this.data === undefined || this.data === null;
        };
        DataTableComponent.prototype.setTableRows = function (rows) {
            if (this.data) {
                this.resetSelection();
                var rowsData = this.convertToRowsData(rows);
                this.data.setRows(rowsData);
            }
        };
        DataTableComponent.prototype.setTableColumns = function (columns) {
            if (this.data) {
                this.resetSelection();
                var columnsData = this.convertToColumnsData(columns);
                this.data.setColumns(columnsData);
            }
        };
        DataTableComponent.prototype.getRuntimeColumns = function () {
            return __spread((this.columns || []), this.getSchemaFromHtml());
        };
        DataTableComponent.prototype.setTableSchema = function () {
            var columns = this.getRuntimeColumns();
            if (this.data && columns.length > 0) {
                this.data.setColumns(columns);
            }
        };
        DataTableComponent.prototype.setTableSorting = function (sorting) {
            if (this.data) {
                this.data.setSorting(this.convertToDataSorting(sorting));
            }
        };
        DataTableComponent.prototype.getSchemaFromHtml = function () {
            var schema = [];
            if (this.columnList && this.columnList.columns && this.columnList.columns.length > 0) {
                schema = this.columnList.columns.map(function (c) { return c; });
            }
            return schema;
        };
        DataTableComponent.prototype.onRowClick = function (row, mouseEvent) {
            if (mouseEvent) {
                mouseEvent.preventDefault();
            }
            if (row) {
                var rowIndex = this.data.getRows().indexOf(row) + (this.isHeaderListVisible() ? 1 : 0);
                this.keyManager.setActiveItem(rowIndex);
                var dataRowEvent = new DataRowEvent(row, mouseEvent, this);
                this.clickObserver.next(dataRowEvent);
            }
        };
        DataTableComponent.prototype.onEnterKeyPressed = function (row, e) {
            if (row) {
                this.handleRowSelection(row, e);
            }
        };
        DataTableComponent.prototype.isHeaderListVisible = function () {
            return this.isHeaderVisible() && this.display === exports.DisplayMode.List;
        };
        DataTableComponent.prototype.handleRowSelection = function (row, e) {
            if (this.data) {
                if (this.isSingleSelectionMode()) {
                    this.resetSelection();
                    this.selectRow(row, true);
                    this.emitRowSelectionEvent('row-select', row);
                }
                if (this.isMultiSelectionMode()) {
                    var modifier = e && (e.metaKey || e.ctrlKey);
                    var newValue = void 0;
                    if (this.selection.length === 1) {
                        newValue = !row.isSelected;
                    }
                    else {
                        newValue = modifier ? !row.isSelected : true;
                    }
                    var domEventName = newValue ? 'row-select' : 'row-unselect';
                    if (!modifier) {
                        this.resetSelection();
                    }
                    this.selectRow(row, newValue);
                    this.emitRowSelectionEvent(domEventName, row);
                }
            }
        };
        DataTableComponent.prototype.resetSelection = function () {
            if (this.data) {
                var rows = this.data.getRows();
                if (rows && rows.length > 0) {
                    rows.forEach(function (r) { return r.isSelected = false; });
                }
                this.selection = [];
            }
            this.isSelectAllChecked = false;
        };
        DataTableComponent.prototype.onRowDblClick = function (row, event) {
            if (event) {
                event.preventDefault();
            }
            var dataRowEvent = new DataRowEvent(row, event, this);
            this.clickObserver.next(dataRowEvent);
        };
        DataTableComponent.prototype.onRowEnterKeyDown = function (row, keyboardEvent) {
            if (keyboardEvent.key === 'Enter') {
                this.onKeyboardNavigate(row, keyboardEvent);
            }
        };
        DataTableComponent.prototype.onRowKeyUp = function (row, keyboardEvent) {
            var event = new CustomEvent('row-keyup', {
                detail: {
                    row: row,
                    keyboardEvent: keyboardEvent,
                    sender: this
                },
                bubbles: true
            });
            this.elementRef.nativeElement.dispatchEvent(event);
            if (event.defaultPrevented) {
                keyboardEvent.preventDefault();
            }
        };
        DataTableComponent.prototype.onKeyboardNavigate = function (row, keyboardEvent) {
            if (keyboardEvent) {
                keyboardEvent.preventDefault();
            }
            var event = new DataRowEvent(row, keyboardEvent, this);
            this.rowDblClick.emit(event);
            this.elementRef.nativeElement.dispatchEvent(new CustomEvent('row-dblclick', {
                detail: event,
                bubbles: true
            }));
        };
        DataTableComponent.prototype.onColumnHeaderClick = function (column) {
            var _a;
            if (column && column.sortable) {
                var current = this.data.getSorting();
                var newDirection = 'asc';
                if (current && column.key === current.key) {
                    newDirection = ((_a = current.direction) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === 'asc' ? 'desc' : 'asc';
                }
                this.sorting = [column.key, newDirection];
                this.data.setSorting(new DataSorting(column.key, newDirection));
                this.emitSortingChangedEvent(column.key, column.sortingKey, newDirection);
            }
            this.keyManager.updateActiveItem(0);
        };
        DataTableComponent.prototype.onSelectAllClick = function (matCheckboxChange) {
            this.isSelectAllChecked = matCheckboxChange.checked;
            this.isSelectAllIndeterminate = false;
            if (this.multiselect) {
                var rows = this.data.getRows();
                if (rows && rows.length > 0) {
                    for (var i = 0; i < rows.length; i++) {
                        this.selectRow(rows[i], matCheckboxChange.checked);
                    }
                }
                var domEventName = matCheckboxChange.checked ? 'row-select' : 'row-unselect';
                var row = this.selection.length > 0 ? this.selection[0] : null;
                this.emitRowSelectionEvent(domEventName, row);
            }
        };
        DataTableComponent.prototype.onCheckboxChange = function (row, event) {
            var newValue = event.checked;
            this.selectRow(row, newValue);
            var domEventName = newValue ? 'row-select' : 'row-unselect';
            this.emitRowSelectionEvent(domEventName, row);
            this.checkSelectAllCheckboxState();
        };
        DataTableComponent.prototype.checkSelectAllCheckboxState = function () {
            if (this.multiselect) {
                var numberOfSelectedRows_1 = 0;
                var rows = this.data.getRows();
                rows.forEach(function (row) {
                    if (row.isSelected) {
                        numberOfSelectedRows_1++;
                    }
                });
                if (numberOfSelectedRows_1 === rows.length) {
                    this.isSelectAllChecked = true;
                    this.isSelectAllIndeterminate = false;
                }
                else if (numberOfSelectedRows_1 > 0 && numberOfSelectedRows_1 < rows.length) {
                    this.isSelectAllChecked = false;
                    this.isSelectAllIndeterminate = true;
                }
                else {
                    this.isSelectAllChecked = false;
                    this.isSelectAllIndeterminate = false;
                }
            }
        };
        DataTableComponent.prototype.onImageLoadingError = function (event, row) {
            if (event) {
                var element = event.target;
                if (this.fallbackThumbnail) {
                    element.src = this.fallbackThumbnail;
                }
                else {
                    element.src = row.imageErrorResolver(event);
                }
            }
        };
        DataTableComponent.prototype.isIconValue = function (row, col) {
            if (row && col) {
                var value = row.getValue(col.key);
                return value && value.startsWith('material-icons://');
            }
            return false;
        };
        DataTableComponent.prototype.asIconValue = function (row, col) {
            if (this.isIconValue(row, col)) {
                var value = row.getValue(col.key) || '';
                return value.replace('material-icons://', '');
            }
            return null;
        };
        DataTableComponent.prototype.iconAltTextKey = function (value) {
            return value ? 'ICONS.' + value.substring(value.lastIndexOf('/') + 1).replace(/\.[a-z]+/, '') : '';
        };
        DataTableComponent.prototype.isColumnSorted = function (col, direction) {
            if (col && direction) {
                var sorting = this.data.getSorting();
                return sorting && sorting.key === col.key && sorting.direction.toLocaleLowerCase() === direction;
            }
            return false;
        };
        DataTableComponent.prototype.getContextMenuActions = function (row, col) {
            var event = new DataCellEvent(row, col, []);
            this.showRowContextMenu.emit(event);
            return event.value.actions;
        };
        DataTableComponent.prototype.getRowActions = function (row, col) {
            var id = row.getValue('id');
            if (!this.rowMenuCache[id]) {
                var event = new DataCellEvent(row, col, []);
                this.showRowActionsMenu.emit(event);
                if (!this.rowMenuCacheEnabled) {
                    return this.getVisibleActions(event.value.actions);
                }
                this.rowMenuCache[id] = event.value.actions;
            }
            return this.getVisibleActions(this.rowMenuCache[id]);
        };
        DataTableComponent.prototype.getVisibleActions = function (actions) {
            return actions.filter(function (action) { return action.visible || action.visible === undefined; });
        };
        DataTableComponent.prototype.onExecuteRowAction = function (row, action) {
            if (action.disabled || action.disabled) {
                event.stopPropagation();
            }
            else {
                this.executeRowAction.emit(new DataRowActionEvent(row, action));
            }
        };
        DataTableComponent.prototype.getHideActionsWithoutHoverClass = function (actionsMenuTrigger) {
            return { 'adf-datatable-hide-actions-without-hover': this.actionsVisibleOnHover && !actionsMenuTrigger.menuOpen };
        };
        DataTableComponent.prototype.rowAllowsDrop = function (row) {
            return row.isDropTarget === true;
        };
        DataTableComponent.prototype.hasSelectionMode = function () {
            return this.isSingleSelectionMode() || this.isMultiSelectionMode();
        };
        DataTableComponent.prototype.isSingleSelectionMode = function () {
            return this.selectionMode && this.selectionMode.toLowerCase() === 'single';
        };
        DataTableComponent.prototype.isMultiSelectionMode = function () {
            return this.selectionMode && this.selectionMode.toLowerCase() === 'multiple';
        };
        DataTableComponent.prototype.getRowStyle = function (row) {
            row.cssClass = row.cssClass ? row.cssClass : '';
            this.rowStyleClass = this.rowStyleClass ? this.rowStyleClass : '';
            return row.cssClass + " " + this.rowStyleClass;
        };
        DataTableComponent.prototype.getSortingKey = function () {
            if (this.data.getSorting()) {
                return this.data.getSorting().key;
            }
            return null;
        };
        DataTableComponent.prototype.selectRow = function (row, value) {
            if (row) {
                row.isSelected = value;
                var idx = (row === null || row === void 0 ? void 0 : row.id) ? this.findSelectionById(row.id) : this.selection.indexOf(row);
                if (value) {
                    if (idx < 0) {
                        this.selection.push(row);
                    }
                }
                else {
                    if (idx > -1) {
                        this.selection.splice(idx, 1);
                    }
                }
            }
        };
        DataTableComponent.prototype.findSelectionById = function (id) {
            return this.selection.findIndex(function (selection) { return (selection === null || selection === void 0 ? void 0 : selection.id) === id; });
        };
        DataTableComponent.prototype.getCellTooltip = function (row, col) {
            if (row && col && col.formatTooltip) {
                var result = col.formatTooltip(row, col);
                if (result) {
                    return result;
                }
            }
            return null;
        };
        DataTableComponent.prototype.getSortableColumns = function () {
            return this.data.getColumns().filter(function (column) {
                return column.sortable === true;
            });
        };
        DataTableComponent.prototype.isEmpty = function () {
            return this.data.getRows().length === 0;
        };
        DataTableComponent.prototype.isHeaderVisible = function () {
            var headerVisibility;
            if (this.showHeader === exports.ShowHeaderMode.Data) {
                headerVisibility = !this.loading && !this.noPermission && !this.isEmpty();
            }
            else if (this.showHeader === exports.ShowHeaderMode.Always) {
                headerVisibility = !this.loading && !this.noPermission;
            }
            else if (this.showHeader === exports.ShowHeaderMode.Never) {
                headerVisibility = false;
            }
            return headerVisibility;
        };
        DataTableComponent.prototype.isStickyHeaderEnabled = function () {
            return this.stickyHeader && this.isHeaderVisible();
        };
        DataTableComponent.prototype.emitRowSelectionEvent = function (name, row) {
            var domEvent = new CustomEvent(name, {
                detail: {
                    row: row,
                    selection: this.selection
                },
                bubbles: true
            });
            this.elementRef.nativeElement.dispatchEvent(domEvent);
        };
        DataTableComponent.prototype.emitSortingChangedEvent = function (key, sortingKey, direction) {
            var domEvent = new CustomEvent('sorting-changed', {
                detail: {
                    key: key,
                    sortingKey: sortingKey,
                    direction: direction
                },
                bubbles: true
            });
            this.elementRef.nativeElement.dispatchEvent(domEvent);
        };
        DataTableComponent.prototype.ngOnDestroy = function () {
            this.unsubscribeClickStream();
            this.subscriptions.forEach(function (s) { return s.unsubscribe(); });
            this.subscriptions = [];
            if (this.dataRowsChanged) {
                this.dataRowsChanged.unsubscribe();
                this.dataRowsChanged = null;
            }
        };
        DataTableComponent.prototype.datatableLayoutFix = function () {
            var maxGalleryRows = 25;
            if (this.display === 'gallery') {
                for (var i = 0; i < maxGalleryRows; i++) {
                    this.fakeRows.push('');
                }
            }
            else {
                this.fakeRows = [];
            }
        };
        DataTableComponent.prototype.getNameColumnValue = function () {
            return this.data.getColumns().find(function (el) {
                return el.key.includes('name');
            });
        };
        DataTableComponent.prototype.getAutomationValue = function (row) {
            var name = this.getNameColumnValue();
            return name ? row.getValue(name.key) : '';
        };
        DataTableComponent.prototype.getAriaSort = function (column) {
            if (!this.isColumnSortActive(column)) {
                return 'ADF-DATATABLE.ACCESSIBILITY.SORT_NONE';
            }
            return this.isColumnSorted(column, 'asc') ?
                'ADF-DATATABLE.ACCESSIBILITY.SORT_ASCENDING' :
                'ADF-DATATABLE.ACCESSIBILITY.SORT_DESCENDING';
        };
        DataTableComponent.prototype.getSortLiveAnnouncement = function (column) {
            if (!this.isColumnSortActive(column)) {
                return 'ADF-DATATABLE.ACCESSIBILITY.SORT_DEFAULT';
            }
            return this.isColumnSorted(column, 'asc') ?
                'ADF-DATATABLE.ACCESSIBILITY.SORT_ASCENDING_BY' :
                'ADF-DATATABLE.ACCESSIBILITY.SORT_DESCENDING_BY';
        };
        return DataTableComponent;
    }());
    DataTableComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-datatable',
                    template: "<div\n    role=\"grid\"\n    *ngIf=\"data\" class=\"adf-full-width\"\n    [class.adf-datatable-card]=\"display === 'gallery'\"\n    [class.adf-datatable-list]=\"display === 'list'\"\n    [class.adf-sticky-header]=\"isStickyHeaderEnabled()\"\n    [class.adf-datatable--empty]=\"(isEmpty() && !isHeaderVisible()) || loading\"\n    [class.adf-datatable--empty--header-visible]=\"isEmpty() && isHeaderVisible()\">\n    <div *ngIf=\"isHeaderVisible()\" class=\"adf-datatable-header\" role=\"rowgroup\" [ngClass]=\"{ 'adf-sr-only': !isHeaderVisible() }\">\n        <adf-datatable-row\n            data-automation-id=\"datatable-row-header\"\n            [disabled]=\"!isHeaderVisible()\"\n            class=\"adf-datatable-row\"\n            *ngIf=\"display === 'list'\"\n            role=\"row\">\n            <!-- Actions (left) -->\n            <div *ngIf=\"actions && actionsPosition === 'left'\" class=\"adf-actions-column adf-datatable-cell-header\">\n                <span class=\"adf-sr-only\">{{ 'ADF-DATATABLE.ACCESSIBILITY.ACTIONS' | translate }}</span>\n            </div>\n            <!-- Columns -->\n            <div *ngIf=\"multiselect\" class=\"adf-datatable-cell-header adf-datatable-checkbox\">\n                <mat-checkbox [indeterminate]=\"isSelectAllIndeterminate\" [checked]=\"isSelectAllChecked\" (change)=\"onSelectAllClick($event)\" class=\"adf-checkbox-sr-only\">{{ 'ADF-DATATABLE.ACCESSIBILITY.SELECT_ALL' | translate }}</mat-checkbox>\n            </div>\n            <div class=\"adf-datatable-cell--{{col.type || 'text'}} {{col.cssClass}} adf-datatable-cell-header\"\n                 *ngFor=\"let col of data.getColumns()\"\n                 [class.adf-sortable]=\"col.sortable\"\n                 [attr.data-automation-id]=\"'auto_id_' + col.key\"\n                 [class.adf-datatable__header--sorted-asc]=\"isColumnSorted(col, 'asc')\"\n                 [class.adf-datatable__header--sorted-desc]=\"isColumnSorted(col, 'desc')\"\n                 (click)=\"onColumnHeaderClick(col)\"\n                 (keyup.enter)=\"onColumnHeaderClick(col)\"\n                 role=\"columnheader\"\n                 [attr.tabindex]=\"isHeaderVisible() ? 0 : null\"\n                 [attr.aria-sort]=\"col.sortable ? (getAriaSort(col) | translate) : null\"\n                 adf-drop-zone dropTarget=\"header\" [dropColumn]=\"col\">\n                <ng-container *ngIf=\"!col.header\">\n                    <span *ngIf=\"col.title\" class=\"adf-datatable-cell-value\">{{ col.title | translate}}</span>\n                    <span *ngIf=\"col.title && col.sortable\" class=\"adf-sr-only\" aria-live=\"polite\">{{ getSortLiveAnnouncement(col) | translate: { string: col.title | translate } }}</span>\n                    <ng-template *ngIf=\"allowFiltering\" [ngTemplateOutlet]=\"headerFilterTemplate\" [ngTemplateOutletContext]=\"{$implicit: col}\"></ng-template>\n                </ng-container>\n                <ng-template *ngIf=\"col.header\" [ngTemplateOutlet]=\"col.header\" [ngTemplateOutletContext]=\"{$implicit: col}\"></ng-template>\n            </div>\n            <!-- Actions (right) -->\n            <div *ngIf=\"actions && actionsPosition === 'right'\" class=\"adf-actions-column adf-datatable-cell-header adf-datatable__actions-cell\">\n                <span class=\"adf-sr-only\">{{ 'ADF-DATATABLE.ACCESSIBILITY.ACTIONS' | translate }}</span>\n            </div>\n        </adf-datatable-row>\n        <mat-form-field *ngIf=\"display === 'gallery' && isHeaderVisible()\">\n            <mat-select [value]=\"getSortingKey()\" [attr.data-automation-id]=\"'grid-view-sorting'\">\n                <mat-option *ngFor=\"let col of getSortableColumns()\"\n                            [value]=\"col.key\"\n                            [attr.data-automation-id]=\"'grid-view-sorting-'+col.title\"\n                            (click)=\"onColumnHeaderClick(col)\"\n                            (keyup.enter)=\"onColumnHeaderClick(col)\">\n                    {{ col.title | translate}}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n    </div>\n\n    <div class=\"adf-datatable-body\" role=\"rowgroup\">\n        <ng-container *ngIf=\"!loading && !noPermission\">\n            <adf-datatable-row *ngFor=\"let row of data.getRows(); let idx = index\"\n                [row]=\"row\"\n                (select)=\"onEnterKeyPressed(row, $event)\"\n                (keyup)=\"onRowKeyUp(row, $event)\"\n                (keydown)=\"onRowEnterKeyDown(row, $event)\"\n                [adf-upload]=\"rowAllowsDrop(row)\"\n                [adf-upload-data]=\"row\"\n                [ngStyle]=\"rowStyle\"\n                [ngClass]=\"getRowStyle(row)\"\n                [attr.data-automation-id]=\"'datatable-row-' + idx\">\n                <!-- Actions (left) -->\n                <div *ngIf=\"actions && actionsPosition === 'left'\" role=\"gridcell\" class=\"adf-datatable-cell\">\n                    <button mat-icon-button [matMenuTriggerFor]=\"menu\" #actionsMenuTrigger=\"matMenuTrigger\"\n                            [ngClass]=\"getHideActionsWithoutHoverClass(actionsMenuTrigger)\"\n                            [title]=\"'ADF-DATATABLE.CONTENT-ACTIONS.TOOLTIP' | translate\"\n                            [attr.id]=\"'action_menu_left_' + idx\"\n                            [attr.data-automation-id]=\"'action_menu_' + idx\">\n                        <mat-icon>more_vert</mat-icon>\n                    </button>\n                    <mat-menu #menu=\"matMenu\">\n                        <button mat-menu-item *ngFor=\"let action of getRowActions(row)\"\n                                [attr.data-automation-id]=\"action.title\"\n                                [disabled]=\"action.disabled\"\n                                (click)=\"onExecuteRowAction(row, action)\">\n                            <mat-icon *ngIf=\"action.icon\">{{ action.icon }}</mat-icon>\n                            <span>{{ action.title | translate }}</span>\n                        </button>\n                    </mat-menu>\n                </div>\n\n                <div *ngIf=\"multiselect\" class=\"adf-datatable-cell adf-datatable-checkbox\">\n                    <mat-checkbox\n                        [checked]=\"row.isSelected\"\n                        [attr.aria-checked]=\"row.isSelected\"\n                        role=\"checkbox\"\n                        (change)=\"onCheckboxChange(row, $event)\"\n                        class=\"adf-checkbox-sr-only\">\n                        {{ 'ADF-DATATABLE.ACCESSIBILITY.SELECT_FILE' | translate }}\n                    </mat-checkbox>\n                </div>\n                <div *ngFor=\"let col of data.getColumns()\"\n                     role=\"gridcell\"\n                     class=\"adf-datatable-cell adf-datatable-cell--{{col.type || 'text'}} {{col.cssClass}}\"\n                     [attr.title]=\"col.title | translate\"\n                     [attr.data-automation-id]=\"getAutomationValue(row)\"\n                     [attr.aria-selected]=\"row.isSelected ? true : false\"\n                     [attr.aria-label]=\"col.title ? (col.title | translate) : null\"\n                     (click)=\"onRowClick(row, $event)\"\n                     (keydown.enter)=\"onEnterKeyPressed(row, $any($event))\"\n                     [adf-context-menu]=\"getContextMenuActions(row, col)\"\n                     [adf-context-menu-enabled]=\"contextMenu\"\n                     adf-drop-zone dropTarget=\"cell\" [dropColumn]=\"col\" [dropRow]=\"row\">\n                    <div *ngIf=\"!col.template\" class=\"adf-datatable-cell-container\">\n                        <ng-container [ngSwitch]=\"col.type\">\n                            <div *ngSwitchCase=\"'image'\" class=\"adf-cell-value\">\n                                <mat-icon *ngIf=\"isIconValue(row, col); else no_iconvalue\">{{ asIconValue(row, col) }}\n                                </mat-icon>\n                                <ng-template #no_iconvalue>\n                                    <mat-icon class=\"adf-datatable-selected\"\n                                              *ngIf=\"row.isSelected && !multiselect; else no_selected_row\" svgIcon=\"selected\">\n                                    </mat-icon>\n                                    <ng-template #no_selected_row>\n                                        <img class=\"adf-datatable-center-img-ie\"\n                                            [attr.aria-label]=\" (data.getValue(row, col) | fileType) === 'disable' ?\n                                                ('ADF-DATATABLE.ACCESSIBILITY.ICON_DISABLED' | translate) :\n                                                'ADF-DATATABLE.ACCESSIBILITY.ICON_TEXT' | translate:{\n                                                    type: 'ADF-DATATABLE.FILE_TYPE.' + (data.getValue(row, col) | fileType | uppercase) | translate\n                                                }\"\n                                            [attr.alt]=\" (data.getValue(row, col) | fileType) === 'disable' ?\n                                                ('ADF-DATATABLE.ACCESSIBILITY.ICON_DISABLED' | translate) :\n                                                'ADF-DATATABLE.ACCESSIBILITY.ICON_TEXT' | translate:{\n                                                        type: 'ADF-DATATABLE.FILE_TYPE.' + (data.getValue(row, col) | fileType | uppercase) | translate\n                                                }\"\n                                            src=\"{{ data.getValue(row, col) }}\"\n                                            (error)=\"onImageLoadingError($event, row)\">\n                                    </ng-template>\n                                </ng-template>\n                            </div>\n                            <div *ngSwitchCase=\"'icon'\" class=\"adf-cell-value\">\n                                <mat-icon>{{ data.getValue(row, col) }}</mat-icon>\n                            </div>\n                            <div *ngSwitchCase=\"'date'\" class=\"adf-cell-value\" [attr.tabindex]=\"data.getValue(row, col, resolverFn)? 0 : -1\"\n                                 [attr.data-automation-id]=\"'date_' + (data.getValue(row, col, resolverFn) | adfLocalizedDate: 'medium') \">\n                                <adf-date-cell class=\"adf-datatable-center-date-column-ie\"\n                                    [data]=\"data\"\n                                    [column]=\"col\"\n                                    [row]=\"row\"\n                                    [resolverFn]=\"resolverFn\"\n                                    [tooltip]=\"getCellTooltip(row, col)\">\n                                </adf-date-cell>\n                            </div>\n                            <div *ngSwitchCase=\"'location'\" [attr.tabindex]=\"data.getValue(row, col, resolverFn)? 0 : -1\"  class=\"adf-cell-value\"\n                                 [attr.data-automation-id]=\"'location' + data.getValue(row, col, resolverFn)\">\n                                <adf-location-cell\n                                    [data]=\"data\"\n                                    [column]=\"col\"\n                                    [row]=\"row\"\n                                    [resolverFn]=\"resolverFn\"\n                                    [tooltip]=\"getCellTooltip(row, col)\">\n                                </adf-location-cell>\n                            </div>\n                            <div *ngSwitchCase=\"'fileSize'\" [attr.tabindex]=\"data.getValue(row, col, resolverFn)? 0 : -1\" class=\"adf-cell-value\"\n                                 [attr.data-automation-id]=\"'fileSize_' + data.getValue(row, col, resolverFn)\">\n                                <adf-filesize-cell class=\"adf-datatable-center-size-column-ie\"\n                                    [data]=\"data\"\n                                    [column]=\"col\"\n                                    [row]=\"row\"\n                                    [resolverFn]=\"resolverFn\"\n                                    [tooltip]=\"getCellTooltip(row, col)\">\n                                </adf-filesize-cell>\n                            </div>\n                            <div *ngSwitchCase=\"'text'\" [attr.tabindex]=\"data.getValue(row, col, resolverFn)? 0 : -1\"  class=\"adf-cell-value\"\n                                 [attr.data-automation-id]=\"'text_' + data.getValue(row, col, resolverFn)\">\n                                <adf-datatable-cell\n                                    [copyContent]=\"col.copyContent\"\n                                    [data]=\"data\"\n                                    [column]=\"col\"\n                                    [row]=\"row\"\n                                    [resolverFn]=\"resolverFn\"\n                                    [tooltip]=\"getCellTooltip(row, col)\">\n                                </adf-datatable-cell>\n                            </div>\n                            <div *ngSwitchCase=\"'json'\" [attr.tabindex]=\"data.getValue(row, col, resolverFn)? 0 : -1\" class=\"adf-cell-value\">\n                                <adf-json-cell\n                                    [editable]=\"col.editable\"\n                                    [data]=\"data\"\n                                    [column]=\"col\"\n                                    [resolverFn]=\"resolverFn\"\n                                    [row]=\"row\">\n                                </adf-json-cell>\n                            </div>\n                            <span *ngSwitchDefault class=\"adf-cell-value\">\n                    <!-- empty cell for unknown column type -->\n                    </span>\n                        </ng-container>\n                    </div>\n                    <div *ngIf=\"col.template\" class=\"adf-datatable-cell-container\">\n                        <div class=\"adf-cell-value\" [attr.tabindex]=\"col.focus ? 0 : null\">\n                            <ng-container\n                                [ngTemplateOutlet]=\"col.template\"\n                                [ngTemplateOutletContext]=\"{ $implicit: { data: data, row: row, col: col }, value: data.getValue(row, col, resolverFn) }\">\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Actions (right) -->\n                <div *ngIf=\"actions && actionsPosition === 'right'\"\n                     role=\"gridcell\"\n                     class=\"adf-datatable-cell adf-datatable__actions-cell adf-datatable-center-actions-column-ie\">\n                    <button mat-icon-button [matMenuTriggerFor]=\"menu\" #actionsMenuTrigger=\"matMenuTrigger\"\n                            [ngClass]=\"getHideActionsWithoutHoverClass(actionsMenuTrigger)\"\n                            [attr.aria-label]=\"'ADF-DATATABLE.ACCESSIBILITY.ROW_OPTION_BUTTON' | translate\"\n                            [title]=\"'ADF-DATATABLE.CONTENT-ACTIONS.TOOLTIP' | translate\"\n                            [attr.id]=\"'action_menu_right_' + idx\"\n                            [attr.data-automation-id]=\"'action_menu_' + idx\">\n                        <mat-icon>more_vert</mat-icon>\n                    </button>\n                    <mat-menu #menu=\"matMenu\">\n                        <button mat-menu-item *ngFor=\"let action of getRowActions(row)\"\n                                [attr.data-automation-id]=\"action.title\"\n                                [attr.aria-label]=\"action.title | translate\"\n                                [disabled]=\"action.disabled\"\n                                (click)=\"onExecuteRowAction(row, action)\">\n                            <mat-icon *ngIf=\"action.icon\">{{ action.icon }}</mat-icon>\n                            <span>{{ action.title | translate }}</span>\n                        </button>\n                    </mat-menu>\n                </div>\n            </adf-datatable-row>\n            <div *ngIf=\"isEmpty()\"\n                 role=\"row\"\n                 [class.adf-datatable-row]=\"display === 'list'\"\n                 [class.adf-datatable-card-empty]=\"display === 'gallery'\">\n                <div class=\"adf-no-content-container adf-datatable-cell\" role=\"gridcell\">\n                    <ng-template *ngIf=\"noContentTemplate\"\n                                 ngFor [ngForOf]=\"[data]\"\n                                 [ngForTemplate]=\"noContentTemplate\">\n                    </ng-template>\n                    <ng-content select=\"adf-empty-list\"></ng-content>\n                </div>\n            </div>\n            <div *ngFor=\"let row of fakeRows\"\n                 class=\"adf-datatable-row adf-datatable-row-empty-card\">\n            </div>\n        </ng-container>\n        <div *ngIf=\"!loading && noPermission\"\n             role=\"row\"\n             [class.adf-datatable-row]=\"display === 'list'\"\n             [class.adf-datatable-card-permissions]=\"display === 'gallery'\"\n             class=\"adf-no-permission__row\">\n            <div class=\"adf-no-permission__cell adf-no-content-container adf-datatable-cell\">\n                <ng-template *ngIf=\"noPermissionTemplate\"\n                             ngFor [ngForOf]=\"[data]\"\n                             [ngForTemplate]=\"noPermissionTemplate\">\n                </ng-template>\n            </div>\n        </div>\n        <div *ngIf=\"loading\"\n             [class.adf-datatable-row]=\"display === 'list'\"\n             [class.adf-datatable-card-loading]=\"display === 'gallery'\">\n            <div class=\"adf-no-content-container adf-datatable-cell\">\n                <ng-template *ngIf=\"loadingTemplate\"\n                             ngFor [ngForOf]=\"[data]\"\n                             [ngForTemplate]=\"loadingTemplate\">\n                </ng-template>\n            </div>\n        </div>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-datatable' },
                    styles: [".adf-datatable{height:100%;overflow-y:scroll}.adf-datatable .adf-full-width{width:100%}.adf-datatable-card{border:1px solid var(--theme-fg-divider)}.adf-datatable-card .adf-datatable-body{align-content:flex-start;align-items:flex-start;display:flex;flex-flow:row wrap;justify-content:space-evenly;width:100%}.adf-datatable-card .adf-datatable-body .adf-datatable-row{display:flex;flex:0 1 24%;flex-direction:column;height:200px;margin:6px;max-width:288px!important;min-width:288px!important;overflow:hidden!important;padding:15px;position:relative;transition:all .3s ease;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);width:288px!important}.adf-datatable-card .adf-datatable-body .adf-datatable-row:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.adf-datatable-card .adf-datatable-body .adf-datatable-row-empty-card{height:0!important;margin-bottom:0;margin-top:0;padding-bottom:0;padding-top:0}.adf-datatable-card .adf-datatable-body .adf-is-selected{background:var(--adf-datatable-selected-color);padding-bottom:31px}.adf-datatable-card .adf-datatable-body .adf-datatable-card-permission{min-height:250px;width:100%}.adf-datatable-card .adf-datatable-body .adf-datatable-card-permission .adf-datatable-cell{height:240px!important}.adf-datatable-card .adf-datatable-body .adf-datatable-card-loading{min-height:250px;width:100%}.adf-datatable-card .adf-datatable-body .adf-datatable-card-loading .adf-datatable-cell{height:240px!important}.adf-datatable-card .adf-datatable-body .adf-datatable-card-empty{min-height:380px;width:100%}.adf-datatable-card .adf-datatable-body .adf-datatable-card-empty .adf-datatable-cell{height:370px!important}.adf-datatable-card .adf-datatable-body .adf-datatable-cell--image{margin-left:8px}.adf-datatable-card .adf-datatable-body .adf-datatable-cell{flex:0 1 24%;height:136px!important;outline:none;overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap}.adf-datatable-card .adf-datatable-body .adf-datatable-cell:before{color:var(--theme-text-color);content:attr(title);float:left;margin-left:10px;overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:140px}.adf-datatable-card .adf-datatable-body .adf-datatable-cell .adf-datatable-cell-value{display:block;overflow:hidden;text-overflow:ellipsis}.adf-datatable-card .adf-datatable-body .adf-datatable__actions-cell{height:42px!important;position:absolute;right:0;top:4px;width:42px!important}.adf-datatable-card .adf-datatable-body .adf-datatable-row:not(:hover) .adf-datatable-hide-actions-without-hover{display:none}.adf-datatable-card .adf-datatable-body .adf-image-table-cell{border-bottom:1px solid var(--theme-fg-divider);margin:8px;overflow:visible;padding:4px}.adf-datatable-card .adf-datatable-body .adf-image-table-cell .adf-datatable-cell-container{float:left;width:42px}.adf-datatable-card .adf-datatable-body .adf-image-table-cell:after{content:attr(filename);float:left;margin:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:140px}.adf-datatable-card .adf-datatable-body .adf-datatable-checkbox{margin:8px}.adf-datatable-card .adf-datatable-header{float:right;margin-right:18px}.adf-datatable-list{background-color:var(--theme-card-bg-color);border:1px solid var(--theme-border-color);box-sizing:border-box;display:flex;flex-direction:column;overflow-x:auto}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.adf-datatable-list .adf-datatable-center-size-column-ie{padding-top:17px}.adf-datatable-list .adf-datatable-center-actions-column-ie{padding-top:7px!important}.adf-datatable-list .adf-datatable-center-date-column-ie{position:relative!important}.adf-datatable-list .adf-datatable-center-date-column-ie .adf-datatable-cell-value{width:100%}.adf-datatable-list .adf-datatable-center-img-ie{height:56px;min-width:0;padding:0;width:24px}}.adf-datatable-list .adf-datatable-header{box-sizing:border-box;display:flex;flex-direction:column;min-width:100%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.adf-datatable-list .adf-datatable-cell{color:var(--theme-text-fg-color)}.adf-datatable-list .adf-datatable-row:focus,.adf-datatable-list .adf-datatable-row:hover{background-color:var(--theme-bg-hover-color)}.adf-datatable-list .adf-datatable-row:focus{outline:1px solid var(--theme-accent-color-a200);outline-offset:-1px}.adf-datatable-list .adf-datatable-row .adf-cell-value:focus,.adf-datatable-list .adf-datatable-row .adf-datatable-cell-header:focus{outline:1px solid var(--theme-accent-color-a200);outline-offset:-1px}.adf-datatable-list .adf-datatable-body{background-color:inherit;display:flex;flex-direction:column;min-width:100%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.adf-datatable-list .adf-datatable-body .adf-datatable-row{-webkit-touch-callout:none;-webkit-user-select:none;border-top:1px solid var(--theme-border-color);cursor:pointer;min-height:56px;transition-duration:.28s;transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);user-select:none}.adf-datatable-list .adf-datatable-body .adf-datatable-row.adf-is-selected,.adf-datatable-list .adf-datatable-body .adf-datatable-row.adf-is-selected:hover{background-color:var(--theme-selected-button-bg-color)}.adf-datatable-list .adf-datatable-body .adf-datatable-row:last-child{border-bottom:1px solid var(--theme-border-color)}.adf-datatable-list .adf-datatable-row{align-items:center;display:flex;padding-left:15px;padding-right:15px}.adf-datatable-list .adf-datatable-row .adf-datatable-checkbox{max-width:50px;width:50px}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.adf-datatable-list .adf-datatable-row .adf-datatable-checkbox{padding-top:15px}}.adf-datatable-list .adf-datatable-cell,.adf-datatable-list .adf-datatable-cell-header{box-sizing:border-box;min-width:50px;text-align:left}.adf-datatable-list .adf-datatable-cell--text,.adf-datatable-list .adf-datatable-cell-header--text{position:relative;text-align:left}.adf-datatable-list .adf-datatable-cell--date,.adf-datatable-list .adf-datatable-cell-header--date{text-align:left}.adf-datatable-list .adf-datatable-cell--number,.adf-datatable-list .adf-datatable-cell-header--number{text-align:right}.adf-datatable-list .adf-datatable-cell--icon,.adf-datatable-list .adf-datatable-cell--image,.adf-datatable-list .adf-datatable-cell-header--icon,.adf-datatable-list .adf-datatable-cell-header--image{min-width:50px;padding-left:24px;padding-right:24px;text-align:left;width:50px}.adf-datatable-list .adf-datatable-cell--fileSize,.adf-datatable-list .adf-datatable-cell-header--fileSize{min-width:50px}.adf-datatable-list .adf-datatable-cell-header{-webkit-touch-callout:none;-webkit-user-select:none;box-sizing:border-box;color:var(--theme-text-fg-color);cursor:pointer;font-size:12px;font-weight:700;letter-spacing:0;line-height:24px;min-height:56px!important;padding-bottom:8px;padding-top:12px!important;position:relative;text-overflow:ellipsis;user-select:none;vertical-align:bottom}.adf-datatable-list .adf-datatable-cell-header.adf-sortable{-webkit-touch-callout:none;-webkit-user-select:none;align-items:center;display:flex;user-select:none}.adf-datatable-list .adf-datatable-cell-header.adf-sortable:hover{cursor:pointer}.adf-datatable-list .adf-datatable-cell-header.adf-datatable__header--sorted-asc,.adf-datatable-list .adf-datatable-cell-header.adf-datatable__header--sorted-desc{color:var(--theme-text-fg-color)}.adf-datatable-list .adf-datatable-cell-header.adf-datatable__header--sorted-asc:before,.adf-datatable-list .adf-datatable-cell-header.adf-datatable__header--sorted-desc:before{-webkit-font-feature-settings:\"liga\";-webkit-font-smoothing:antialiased;content:\"\\e5d8\";display:inline-block;font-family:Material Icons;font-feature-settings:\"liga\";font-size:24px;font-size:16px;font-style:normal;font-weight:400;left:5px;letter-spacing:normal;line-height:1;position:relative;right:5px;text-transform:none;vertical-align:sub;word-wrap:normal}.adf-datatable-list .adf-datatable-cell-header.adf-datatable__header--sorted-desc:before{content:\"\\e5db\"}.adf-datatable-list .adf-datatable-cell-header.adf-datatable-cell--fileSize.adf-datatable__header--sorted-asc:before,.adf-datatable-list .adf-datatable-cell-header.adf-datatable-cell--fileSize.adf-datatable__header--sorted-desc:before{left:-3px;right:-3px}.adf-datatable-list .adf-datatable-cell-header.adf-datatable-checkbox{align-items:center;display:flex}.adf-datatable-list .adf-datatable-cell-header.adf-expand-cell-1,.adf-datatable-list .adf-datatable-cell.adf-expand-cell-1{flex-grow:1}.adf-datatable-list .adf-datatable-cell-header.adf-expand-cell-2,.adf-datatable-list .adf-datatable-cell.adf-expand-cell-2{flex-grow:2}.adf-datatable-list .adf-datatable-cell-header.adf-expand-cell-3,.adf-datatable-list .adf-datatable-cell.adf-expand-cell-3{flex-grow:3}.adf-datatable-list .adf-datatable-cell-header.adf-expand-cell-4,.adf-datatable-list .adf-datatable-cell.adf-expand-cell-4{flex-grow:4}.adf-datatable-list .adf-datatable-cell-header.adf-expand-cell-5,.adf-datatable-list .adf-datatable-cell.adf-expand-cell-5{flex-grow:5}.adf-datatable-list .adf-datatable-cell-header.adf-no-grow-cell,.adf-datatable-list .adf-datatable-cell.adf-no-grow-cell{flex-grow:0;min-width:100px}.adf-datatable-list .adf-datatable-cell,.adf-datatable-list .adf-datatable-cell-header{align-items:center;display:flex;flex:1;min-height:inherit;padding:0}.adf-datatable-list .adf-datatable-cell-header .adf-datatable-cell-container,.adf-datatable-list .adf-datatable-cell .adf-datatable-cell-container{align-items:center;display:flex;min-height:inherit;overflow:hidden;width:100%}.adf-datatable-list .adf-datatable-cell-header .adf-datatable-cell-value,.adf-datatable-list .adf-datatable-cell .adf-datatable-cell-value{display:block;padding:10px;word-break:break-word}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.adf-datatable-list .adf-datatable-cell-header .adf-datatable-cell-value,.adf-datatable-list .adf-datatable-cell .adf-datatable-cell-value{padding:17px 10px 10px}}.adf-datatable-list .adf-datatable-cell--fileSize .adf-datatable-cell-value,.adf-datatable-list .adf-datatable-cell-header--fileSize .adf-datatable-cell-value{padding:0 10px 0 0}.adf-datatable-list .adf-cell-value{align-items:center;display:flex;min-height:inherit;width:100%;word-break:break-all}.adf-datatable-list .adf-datatable-cell--image,.adf-datatable-list .adf-datatable__actions-cell{display:flex;max-width:50px}.adf-datatable-list .adf-datatable-row:not(:hover) .adf-datatable-hide-actions-without-hover{display:none}.adf-datatable-list .adf-datatable-cell--image{max-width:50px}.adf-datatable-list .adf-location-cell a{color:var(--theme-text-fg-color);text-decoration:none}.adf-datatable-list .adf-location-cell a:hover{color:var(--adf-datatable-cell-link-hover-color);text-decoration:underline}.adf-datatable-list .adf-sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.adf-datatable-list .adf-is-selected{background:var(--adf-datatable-selected-color)}.adf-datatable-list .adf-datatable-link{color:var(--theme-text-fg-color);text-decoration:none}.adf-datatable-list .adf-datatable-link:hover{color:var(--adf-datatable-cell-link-hover-color);text-decoration:underline}.adf-datatable-list .adf-dynamic-column .adf-datatable-link:hover{text-decoration:none}.adf-datatable-list .adf-dynamic-column .adf-datatable-link:hover .adf-datatable-cell-value{text-decoration:underline}.adf-datatable-list .adf-datatable-cell-header .adf-datatable-link .adf-datatable-cell-value,.adf-datatable-list .adf-datatable-cell .adf-datatable-link .adf-datatable-cell-value{padding:0 10px}.adf-datatable-list .adf-ellipsis-cell{overflow:hidden;padding:0 4px;position:sticky;text-overflow:ellipsis;white-space:nowrap}.adf-datatable-list .adf-ellipsis-cell.adf-datatable-cell-header,.adf-datatable-list .adf-ellipsis-cell .adf-datatable-content-cell{max-width:calc(100% - .1px);overflow:hidden;text-overflow:ellipsis}.adf-datatable-list .adf-ellipsis-cell.adf-datatable-cell-header .adf-datatable-cell-value,.adf-datatable-list .adf-ellipsis-cell .adf-datatable-content-cell .adf-datatable-cell-value{overflow:hidden;text-overflow:ellipsis}.adf-datatable-list .adf-ellipsis-cell .adf-datatable-content-cell{overflow:unset;position:absolute}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.adf-datatable-list .adf-ellipsis-cell .adf-cell-value{top:100%}}.adf-datatable-list .adf-ellipsis-cell>div:after{content:attr(title);display:block;height:0;overflow:hidden}.adf-datatable-list .adf-no-content-container{border:none!important;justify-content:center;padding:0!important;width:100%}.adf-datatable-list .adf-no-content-container>img{width:100%}.adf-datatable-list .adf-loading-content-container{padding:0!important;width:100%}.adf-datatable-list .adf-loading-content-container>img{width:100%}.adf-datatable-list .adf-no-permission__row:hover{background-color:inherit;cursor:default}.adf-datatable-list .adf-no-permission__cell{padding:0!important}.adf-datatable-list .adf-hidden{display:none}@media (max-width:768px){.adf-datatable-list .adf-desktop-only{display:none!important}}@media (max-device-width:768px){.adf-datatable-list .adf-desktop-only{display:none!important}}.adf-checkbox-sr-only .mat-checkbox-label{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.adf-sticky-header{border-top:0;height:100%}.adf-sticky-header .adf-datatable-header{border-bottom:1px solid var(--theme-border-color);border-top:1px solid var(--theme-border-color);display:block;margin-right:0}.adf-sticky-header .adf-datatable-body{display:block;flex:1;margin-top:-1px;overflow-y:scroll}.adf-upload__dragging>div{border-bottom:1px dashed var(--theme-accent-color-a200)!important;border-top:1px dashed var(--theme-accent-color-a200)!important}.adf-upload__dragging>div:first-child{border-left:1px dashed var(--theme-accent-color-a200)}.adf-upload__dragging>div:last-child{border-right:1px dashed var(--theme-accent-color-a200)!important}.adf-datatable--empty{align-items:center;display:flex;flex:1;flex-direction:column;height:100%;height:inherit;justify-content:center;min-height:0;overflow:hidden}.adf-datatable--empty .adf-datatable-body .adf-datatable-row{background-color:var(--theme-card-bg-color);border:none!important;height:100%}.adf-datatable--empty .adf-datatable-body .adf-datatable-row:focus,.adf-datatable--empty .adf-datatable-body .adf-datatable-row:hover{background-color:unset;cursor:default}.adf-datatable--empty--header-visible .adf-datatable-header{border:1px solid var(--theme-border-color)}.adf-datatable--empty--header-visible .adf-datatable-body{align-items:center;display:flex;flex:1;flex-direction:column;height:100%;justify-content:center;min-height:0;overflow:hidden}.adf-datatable--empty--header-visible .adf-datatable-body .adf-datatable-row{background-color:var(--theme-card-bg-color);border:none!important;height:100%}.adf-datatable--empty--header-visible .adf-datatable-body .adf-datatable-row:focus,.adf-datatable--empty--header-visible .adf-datatable-body .adf-datatable-row:hover{background-color:unset;cursor:default}"]
                },] }
    ];
    DataTableComponent.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.IterableDiffers }
    ]; };
    DataTableComponent.propDecorators = {
        rowsList: [{ type: i0.ViewChildren, args: [DataTableRowComponent,] }],
        columnList: [{ type: i0.ContentChild, args: [DataColumnListComponent,] }],
        data: [{ type: i0.Input }],
        display: [{ type: i0.Input }],
        rows: [{ type: i0.Input }],
        sorting: [{ type: i0.Input }],
        columns: [{ type: i0.Input }],
        selectionMode: [{ type: i0.Input }],
        multiselect: [{ type: i0.Input }],
        actions: [{ type: i0.Input }],
        actionsPosition: [{ type: i0.Input }],
        actionsVisibleOnHover: [{ type: i0.Input }],
        fallbackThumbnail: [{ type: i0.Input }],
        contextMenu: [{ type: i0.Input }],
        rowStyle: [{ type: i0.Input }],
        rowStyleClass: [{ type: i0.Input }],
        showHeader: [{ type: i0.Input }],
        stickyHeader: [{ type: i0.Input }],
        rowClick: [{ type: i0.Output }],
        rowDblClick: [{ type: i0.Output }],
        showRowContextMenu: [{ type: i0.Output }],
        showRowActionsMenu: [{ type: i0.Output }],
        executeRowAction: [{ type: i0.Output }],
        loading: [{ type: i0.Input }],
        noPermission: [{ type: i0.Input }],
        rowMenuCacheEnabled: [{ type: i0.Input }],
        resolverFn: [{ type: i0.Input }],
        allowFiltering: [{ type: i0.Input }],
        onKeydown: [{ type: i0.HostListener, args: ['keyup', ['$event'],] }]
    };

    var DateCellComponent = /** @class */ (function (_super) {
        __extends(DateCellComponent, _super);
        function DateCellComponent(userPreferenceService, alfrescoApiService, appConfig) {
            var _this = _super.call(this, alfrescoApiService) || this;
            _this.dateFormat = appConfig.get('dateValues.defaultDateFormat', DateCellComponent.DATE_FORMAT);
            if (userPreferenceService) {
                userPreferenceService
                    .select(exports.UserPreferenceValues.Locale)
                    .pipe(operators.takeUntil(_this.onDestroy$))
                    .subscribe(function (locale) { return _this.currentLocale = locale; });
            }
            return _this;
        }
        Object.defineProperty(DateCellComponent.prototype, "format", {
            get: function () {
                if (this.column) {
                    return this.column.format || this.dateFormat;
                }
                return this.dateFormat;
            },
            enumerable: false,
            configurable: true
        });
        return DateCellComponent;
    }(DataTableCellComponent));
    DateCellComponent.DATE_FORMAT = 'medium';
    DateCellComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-date-cell',
                    template: "\n        <ng-container>\n            <span\n                [attr.aria-label]=\"value$ | async | adfTimeAgo: currentLocale\"\n                title=\"{{ tooltip | adfLocalizedDate: 'medium' }}\"\n                class=\"adf-datatable-cell-value\"\n                *ngIf=\"format === 'timeAgo'; else standard_date\">\n                {{ value$ | async | adfTimeAgo: currentLocale }}\n            </span>\n        </ng-container>\n        <ng-template #standard_date>\n            <span\n                class=\"adf-datatable-cell-value\"\n                title=\"{{ tooltip | adfLocalizedDate: format }}\"\n                class=\"adf-datatable-cell-value\"\n                [attr.aria-label]=\"value$ | async | adfLocalizedDate: format\">\n                {{ value$ | async | adfLocalizedDate: format }}\n            </span>\n        </ng-template>\n    ",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-date-cell adf-datatable-content-cell' }
                },] }
    ];
    DateCellComponent.ctorParameters = function () { return [
        { type: UserPreferencesService },
        { type: AlfrescoApiService },
        { type: AppConfigService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EmptyListComponent = /** @class */ (function () {
        function EmptyListComponent() {
        }
        return EmptyListComponent;
    }());
    EmptyListComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-empty-list',
                    template: "<div class=\"adf-empty-list_template\">\n    <ng-content select=\"[adf-empty-list-header]\"></ng-content>\n    <ng-content select=\"[adf-empty-list-body]\"></ng-content>\n    <ng-content select=\"[adf-empty-list-footer]\"></ng-content>\n    <ng-content></ng-content>\n</div>",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-empty-list_template{margin-bottom:20px;margin-top:20px;text-align:center}"]
                },] }
    ];
    var EmptyListHeaderDirective = /** @class */ (function () {
        function EmptyListHeaderDirective() {
        }
        return EmptyListHeaderDirective;
    }());
    EmptyListHeaderDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-empty-list-header]' },] }
    ];
    var EmptyListBodyDirective = /** @class */ (function () {
        function EmptyListBodyDirective() {
        }
        return EmptyListBodyDirective;
    }());
    EmptyListBodyDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-empty-list-body]' },] }
    ];
    var EmptyListFooterDirective = /** @class */ (function () {
        function EmptyListFooterDirective() {
        }
        return EmptyListFooterDirective;
    }());
    EmptyListFooterDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-empty-list-footer]' },] }
    ];

    var FileSizeCellComponent = /** @class */ (function (_super) {
        __extends(FileSizeCellComponent, _super);
        function FileSizeCellComponent(alfrescoApiService) {
            return _super.call(this, alfrescoApiService) || this;
        }
        return FileSizeCellComponent;
    }(DataTableCellComponent));
    FileSizeCellComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-filesize-cell',
                    template: "\n        <ng-container *ngIf=\"(value$ | async | adfFileSize) as fileSize\">\n            <span\n                [title]=\"tooltip\"\n                [attr.aria-label]=\"fileSize\"\n                >{{ fileSize }}</span\n            >\n        </ng-container>\n    ",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-filesize-cell' }
                },] }
    ];
    FileSizeCellComponent.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };

    var LocationCellComponent = /** @class */ (function (_super) {
        __extends(LocationCellComponent, _super);
        function LocationCellComponent(alfrescoApiService) {
            return _super.call(this, alfrescoApiService) || this;
        }
        LocationCellComponent.prototype.ngOnInit = function () {
            if (this.column && this.column.key && this.row && this.data) {
                var path = this.data.getValue(this.row, this.column, this.resolverFn);
                if (path && path.name && path.elements) {
                    this.value$.next(path.name.split('/').pop());
                    if (!this.tooltip) {
                        this.tooltip = path.name;
                    }
                    var parent = path.elements[path.elements.length - 1];
                    this.link = [this.column.format, parent.id];
                }
            }
        };
        return LocationCellComponent;
    }(DataTableCellComponent));
    LocationCellComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-location-cell',
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    template: "\n        <ng-container>\n            <a href=\"\" [title]=\"tooltip\" [routerLink]=\"link\">\n                {{ value$ | async }}\n            </a>\n        </ng-container>\n    ",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-location-cell adf-datatable-content-cell' }
                },] }
    ];
    LocationCellComponent.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };
    LocationCellComponent.propDecorators = {
        link: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoadingContentTemplateDirective = /** @class */ (function () {
        function LoadingContentTemplateDirective(dataTable) {
            this.dataTable = dataTable;
        }
        LoadingContentTemplateDirective.prototype.ngAfterContentInit = function () {
            if (this.dataTable) {
                this.dataTable.loadingTemplate = this.template;
            }
        };
        return LoadingContentTemplateDirective;
    }());
    LoadingContentTemplateDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-loading-content-template, loading-content-template'
                },] }
    ];
    LoadingContentTemplateDirective.ctorParameters = function () { return [
        { type: DataTableComponent }
    ]; };
    LoadingContentTemplateDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NoContentTemplateDirective = /** @class */ (function () {
        function NoContentTemplateDirective(dataTable) {
            this.dataTable = dataTable;
        }
        NoContentTemplateDirective.prototype.ngAfterContentInit = function () {
            if (this.dataTable) {
                this.dataTable.noContentTemplate = this.template;
            }
        };
        return NoContentTemplateDirective;
    }());
    NoContentTemplateDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-no-content-template, no-content-template'
                },] }
    ];
    NoContentTemplateDirective.ctorParameters = function () { return [
        { type: DataTableComponent }
    ]; };
    NoContentTemplateDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NoPermissionTemplateDirective = /** @class */ (function () {
        function NoPermissionTemplateDirective(dataTable) {
            this.dataTable = dataTable;
        }
        NoPermissionTemplateDirective.prototype.ngAfterContentInit = function () {
            if (this.dataTable) {
                this.dataTable.noPermissionTemplate = this.template;
            }
        };
        return NoPermissionTemplateDirective;
    }());
    NoPermissionTemplateDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-no-permission-template, no-permission-template'
                },] }
    ];
    NoPermissionTemplateDirective.ctorParameters = function () { return [
        { type: DataTableComponent }
    ]; };
    NoPermissionTemplateDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var HeaderFilterTemplateDirective = /** @class */ (function () {
        function HeaderFilterTemplateDirective(dataTable) {
            this.dataTable = dataTable;
        }
        HeaderFilterTemplateDirective.prototype.ngAfterContentInit = function () {
            if (this.dataTable) {
                this.dataTable.headerFilterTemplate = this.template;
            }
        };
        return HeaderFilterTemplateDirective;
    }());
    HeaderFilterTemplateDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-header-filter-template'
                },] }
    ];
    HeaderFilterTemplateDirective.ctorParameters = function () { return [
        { type: DataTableComponent }
    ]; };
    HeaderFilterTemplateDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CustomEmptyContentTemplateDirective = /** @class */ (function () {
        function CustomEmptyContentTemplateDirective() {
        }
        return CustomEmptyContentTemplateDirective;
    }());
    CustomEmptyContentTemplateDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-custom-empty-content-template, empty-folder-content'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CustomLoadingContentTemplateDirective = /** @class */ (function () {
        function CustomLoadingContentTemplateDirective() {
        }
        return CustomLoadingContentTemplateDirective;
    }());
    CustomLoadingContentTemplateDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-custom-loading-content-template'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CustomNoPermissionTemplateDirective = /** @class */ (function () {
        function CustomNoPermissionTemplateDirective() {
        }
        return CustomNoPermissionTemplateDirective;
    }());
    CustomNoPermissionTemplateDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-custom-no-permission-template, no-permission-content'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EditJsonDialogComponent = /** @class */ (function () {
        function EditJsonDialogComponent(settings) {
            this.settings = settings;
            this.editable = false;
            this.title = 'JSON';
            this.value = '';
        }
        EditJsonDialogComponent.prototype.ngOnInit = function () {
            if (this.settings) {
                this.editable = this.settings.editable;
                this.value = this.settings.value || '';
                this.title = this.settings.title || 'JSON';
            }
        };
        return EditJsonDialogComponent;
    }());
    EditJsonDialogComponent.decorators = [
        { type: i0.Component, args: [{
                    template: "<h1 mat-dialog-title>{{ title | translate }}</h1>\n<mat-dialog-content>\n    <textarea [(ngModel)]=\"value\" [attr.readonly]=\"!editable ? true : null\"></textarea>\n</mat-dialog-content>\n\n<mat-dialog-actions align=\"end\">\n    <button mat-button mat-dialog-close cdkFocusInitial>\n        {{ 'CORE.DIALOG.EDIT_JSON.CLOSE' | translate }}\n    </button>\n    <button *ngIf=\"editable\" mat-button [mat-dialog-close]=\"value\">\n        {{ 'CORE.DIALOG.EDIT_JSON.UPDATE' | translate }}\n    </button>\n</mat-dialog-actions>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-edit-json-dialog' },
                    styles: [".adf-edit-json-dialog .mat-dialog-content{height:300px;overflow:hidden}.adf-edit-json-dialog textarea{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;height:100%;margin:0;padding:0;resize:none;width:100%}.adf-edit-json-dialog textarea:focus{outline:none}"]
                },] }
    ];
    EditJsonDialogComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: i0.Inject, args: [i4.MAT_DIALOG_DATA,] }] }
    ]; };
    EditJsonDialogComponent.propDecorators = {
        value: [{ type: i0.Input }]
    };

    var JsonCellComponent = /** @class */ (function (_super) {
        __extends(JsonCellComponent, _super);
        function JsonCellComponent(dialog, alfrescoApiService) {
            var _this = _super.call(this, alfrescoApiService) || this;
            _this.dialog = dialog;
            _this.editable = false;
            return _this;
        }
        JsonCellComponent.prototype.ngOnInit = function () {
            if (this.column && this.column.key && this.row && this.data) {
                this.value$.next(this.data.getValue(this.row, this.column, this.resolverFn));
            }
        };
        JsonCellComponent.prototype.view = function () {
            var rawValue = this.data.getValue(this.row, this.column, this.resolverFn);
            var value = typeof rawValue === 'object'
                ? JSON.stringify(rawValue || {}, null, 2)
                : rawValue;
            var settings = {
                title: this.column.title,
                editable: this.editable,
                value: value
            };
            this.dialog.open(EditJsonDialogComponent, {
                data: settings,
                minWidth: '50%',
                minHeight: '50%'
            }).afterClosed().subscribe(function () {
                if (typeof rawValue === 'object') {
                }
                else {
                }
            });
        };
        return JsonCellComponent;
    }(DataTableCellComponent));
    JsonCellComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-json-cell',
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    template: "\n        <ng-container *ngIf=\"value$ | async as value; else editEmpty\">\n            <button mat-button color=\"primary\" (click)=\"view()\">json</button>\n        </ng-container>\n\n        <ng-template #editEmpty>\n            <button *ngIf=\"editable\" mat-button color=\"primary\" (click)=\"view()\">json</button>\n        </ng-template>\n    ",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-datatable-content-cell' },
                    styles: [".adf-datatable-json-cell{white-space:pre-wrap;word-wrap:break-word}.adf-datatable-cell-value{position:relative}"]
                },] }
    ];
    JsonCellComponent.ctorParameters = function () { return [
        { type: i4.MatDialog },
        { type: AlfrescoApiService }
    ]; };
    JsonCellComponent.propDecorators = {
        editable: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    (function (NOTIFICATION_TYPE) {
        NOTIFICATION_TYPE["INFO"] = "info";
        NOTIFICATION_TYPE["WARN"] = "warning";
        NOTIFICATION_TYPE["ERROR"] = "error";
        NOTIFICATION_TYPE["RECURSIVE"] = "recursive";
    })(exports.NOTIFICATION_TYPE || (exports.NOTIFICATION_TYPE = {}));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var rootInitiator = {
        key: '*',
        displayName: 'SYSTEM'
    };
    function info(messages, initiator) {
        if (initiator === void 0) { initiator = rootInitiator; }
        return {
            type: exports.NOTIFICATION_TYPE.INFO,
            datetime: new Date(),
            initiator: initiator,
            messages: [].concat(messages)
        };
    }
    function warning(messages, initiator) {
        if (initiator === void 0) { initiator = rootInitiator; }
        return {
            type: exports.NOTIFICATION_TYPE.WARN,
            datetime: new Date(),
            initiator: initiator,
            messages: [].concat(messages)
        };
    }
    function error(messages, initiator) {
        if (initiator === void 0) { initiator = rootInitiator; }
        return {
            type: exports.NOTIFICATION_TYPE.ERROR,
            datetime: new Date(),
            initiator: initiator,
            messages: [].concat(messages)
        };
    }

    var INFO_SNACK_CLASS = 'adf-info-snackbar';
    var WARN_SNACK_CLASS = 'adf-warning-snackbar';
    var ERROR_SNACK_CLASS = 'adf-error-snackbar';
    var NotificationService = /** @class */ (function () {
        function NotificationService(snackBar, translationService, appConfigService) {
            this.snackBar = snackBar;
            this.translationService = translationService;
            this.appConfigService = appConfigService;
            this.DEFAULT_DURATION_MESSAGE = 5000;
            this.notifications$ = new rxjs.Subject();
            this.DEFAULT_DURATION_MESSAGE = this.appConfigService.get(exports.AppConfigValues.NOTIFY_DURATION) || this.DEFAULT_DURATION_MESSAGE;
        }
        NotificationService.prototype.openSnackMessage = function (message, config, interpolateArgs) {
            return this.dispatchNotification(message, null, config, interpolateArgs);
        };
        NotificationService.prototype.openSnackMessageAction = function (message, action, config, interpolateArgs) {
            return this.dispatchNotification(message, action, config, interpolateArgs);
        };
        NotificationService.prototype.showError = function (message, action, interpolateArgs) {
            return this.dispatchNotification(message, action, { panelClass: ERROR_SNACK_CLASS }, interpolateArgs);
        };
        NotificationService.prototype.showInfo = function (message, action, interpolateArgs) {
            return this.dispatchNotification(message, action, { panelClass: INFO_SNACK_CLASS }, interpolateArgs);
        };
        NotificationService.prototype.showWarning = function (message, action, interpolateArgs) {
            return this.dispatchNotification(message, action, { panelClass: WARN_SNACK_CLASS }, interpolateArgs);
        };
        NotificationService.prototype.dismissSnackMessageAction = function () {
            return this.snackBar.dismiss();
        };
        NotificationService.prototype.pushToNotificationHistory = function (notification) {
            this.notifications$.next(notification);
        };
        NotificationService.prototype.dispatchNotification = function (message, action, config, interpolateArgs) {
            var translatedMessage = this.translationService.instant(message, interpolateArgs);
            var translatedAction = this.translationService.instant(action, interpolateArgs);
            var createNotification = this.getNotificationCreator(config);
            this.notifications$.next(createNotification(translatedMessage));
            return this.snackBar.open(translatedMessage, translatedAction, Object.assign({ duration: (typeof config === 'number') ? config : this.DEFAULT_DURATION_MESSAGE, panelClass: INFO_SNACK_CLASS }, ((typeof config === 'object') ? config : {})));
        };
        NotificationService.prototype.getNotificationCreator = function (config) {
            var panelClass = null;
            if (typeof config === 'object') {
                panelClass = Array.isArray(config.panelClass) ? config.panelClass[0] : config.panelClass;
            }
            switch (panelClass) {
                case ERROR_SNACK_CLASS:
                    return error;
                case WARN_SNACK_CLASS:
                    return warning;
                default:
                    return info;
            }
        };
        return NotificationService;
    }());
    NotificationService.ɵprov = i0.ɵɵdefineInjectable({ factory: function NotificationService_Factory() { return new NotificationService(i0.ɵɵinject(i1$3.MatSnackBar), i0.ɵɵinject(TranslationService), i0.ɵɵinject(AppConfigService)); }, token: NotificationService, providedIn: "root" });
    NotificationService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    NotificationService.ctorParameters = function () { return [
        { type: i1$3.MatSnackBar },
        { type: TranslationService },
        { type: AppConfigService }
    ]; };

    var ClipboardService = /** @class */ (function () {
        function ClipboardService(document, logService, notificationService) {
            this.document = document;
            this.logService = logService;
            this.notificationService = notificationService;
        }
        ClipboardService.prototype.isTargetValid = function (target) {
            if (target instanceof HTMLInputElement || target instanceof HTMLTextAreaElement) {
                return !target.hasAttribute('disabled');
            }
            return false;
        };
        ClipboardService.prototype.copyToClipboard = function (target, message) {
            if (this.isTargetValid(target)) {
                try {
                    target.select();
                    target.setSelectionRange(0, target.value.length);
                    this.document.execCommand('copy');
                    this.notify(message);
                }
                catch (error) {
                    this.logService.error(error);
                }
            }
        };
        ClipboardService.prototype.copyContentToClipboard = function (content, message) {
            try {
                document.addEventListener('copy', function (e) {
                    e.clipboardData.setData('text/plain', (content));
                    e.preventDefault();
                    document.removeEventListener('copy', null);
                });
                document.execCommand('copy');
                this.notify(message);
            }
            catch (error) {
                this.logService.error(error);
            }
        };
        ClipboardService.prototype.notify = function (message) {
            if (message) {
                this.notificationService.openSnackMessage(message);
            }
        };
        return ClipboardService;
    }());
    ClipboardService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ClipboardService_Factory() { return new ClipboardService(i0.ɵɵinject(i1$1.DOCUMENT), i0.ɵɵinject(LogService), i0.ɵɵinject(NotificationService)); }, token: ClipboardService, providedIn: "root" });
    ClipboardService.decorators = [
        { type: i0.Injectable, args: [{ providedIn: 'root' },] }
    ];
    ClipboardService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: i0.Inject, args: [i1$1.DOCUMENT,] }] },
        { type: LogService },
        { type: NotificationService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ClipboardDirective = /** @class */ (function () {
        function ClipboardDirective(clipboardService, viewContainerRef, resolver) {
            this.clipboardService = clipboardService;
            this.viewContainerRef = viewContainerRef;
            this.resolver = resolver;
        }
        ClipboardDirective.prototype.handleClickEvent = function (event) {
            event.preventDefault();
            event.stopPropagation();
            this.copyToClipboard();
        };
        ClipboardDirective.prototype.showTooltip = function () {
            if (this.placeholder) {
                var componentFactory = this.resolver.resolveComponentFactory(ClipboardComponent);
                var componentRef = this.viewContainerRef.createComponent(componentFactory).instance;
                componentRef.placeholder = this.placeholder;
            }
        };
        ClipboardDirective.prototype.closeTooltip = function () {
            this.viewContainerRef.remove();
        };
        ClipboardDirective.prototype.copyToClipboard = function () {
            var isValidTarget = this.clipboardService.isTargetValid(this.target);
            if (isValidTarget) {
                this.clipboardService.copyToClipboard(this.target, this.message);
            }
            else {
                this.copyContentToClipboard(this.viewContainerRef.element.nativeElement.innerHTML);
            }
        };
        ClipboardDirective.prototype.copyContentToClipboard = function (content) {
            this.clipboardService.copyContentToClipboard(content, this.message);
        };
        return ClipboardDirective;
    }());
    ClipboardDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-clipboard]',
                    exportAs: 'adfClipboard'
                },] }
    ];
    ClipboardDirective.ctorParameters = function () { return [
        { type: ClipboardService },
        { type: i0.ViewContainerRef },
        { type: i0.ComponentFactoryResolver }
    ]; };
    ClipboardDirective.propDecorators = {
        placeholder: [{ type: i0.Input, args: ['adf-clipboard',] }],
        target: [{ type: i0.Input }],
        message: [{ type: i0.Input, args: ['clipboard-notification',] }],
        handleClickEvent: [{ type: i0.HostListener, args: ['click', ['$event'],] }],
        showTooltip: [{ type: i0.HostListener, args: ['mouseenter',] }],
        closeTooltip: [{ type: i0.HostListener, args: ['mouseleave',] }]
    };
    var ClipboardComponent = /** @class */ (function () {
        function ClipboardComponent() {
        }
        ClipboardComponent.prototype.ngOnInit = function () {
            this.placeholder = this.placeholder || 'CLIPBOARD.CLICK_TO_COPY';
        };
        return ClipboardComponent;
    }());
    ClipboardComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-copy-content-tooltip',
                    template: "<span class='adf-copy-tooltip'>{{ placeholder | translate }} </span>",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ClipboardModule = /** @class */ (function () {
        function ClipboardModule() {
        }
        return ClipboardModule;
    }());
    ClipboardModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        ClipboardDirective,
                        ClipboardComponent
                    ],
                    exports: [
                        ClipboardDirective
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DropZoneDirective = /** @class */ (function () {
        function DropZoneDirective(elementRef, ngZone) {
            this.ngZone = ngZone;
            this.dropTarget = 'cell';
            this.element = elementRef.nativeElement;
        }
        DropZoneDirective.prototype.ngOnInit = function () {
            var _this = this;
            this.ngZone.runOutsideAngular(function () {
                _this.element.addEventListener('dragenter', _this.onDragEnter.bind(_this));
                _this.element.addEventListener('dragover', _this.onDragOver.bind(_this));
                _this.element.addEventListener('drop', _this.onDrop.bind(_this));
            });
        };
        DropZoneDirective.prototype.ngOnDestroy = function () {
            this.element.removeEventListener('dragenter', this.onDragEnter);
            this.element.removeEventListener('dragover', this.onDragOver);
            this.element.removeEventListener('drop', this.onDrop);
        };
        DropZoneDirective.prototype.onDragEnter = function (event) {
            var domEvent = this.dispatchDomEvent(event, 'dragenter');
            if (domEvent.defaultPrevented) {
                event.dataTransfer.dropEffect = 'copy';
                event.preventDefault();
                event.stopPropagation();
            }
        };
        DropZoneDirective.prototype.onDragOver = function (event) {
            var domEvent = this.dispatchDomEvent(event, 'dragover');
            if (domEvent.defaultPrevented) {
                event.dataTransfer.dropEffect = 'copy';
                event.preventDefault();
                event.stopPropagation();
            }
        };
        DropZoneDirective.prototype.onDrop = function (event) {
            var domEvent = this.dispatchDomEvent(event, 'drop');
            if (domEvent.defaultPrevented) {
                event.preventDefault();
                event.stopPropagation();
            }
        };
        DropZoneDirective.prototype.dispatchDomEvent = function (originalEvent, eventName) {
            var domEvent = new CustomEvent(this.dropTarget + "-" + eventName, {
                detail: {
                    target: this.dropTarget,
                    event: originalEvent,
                    column: this.dropColumn,
                    row: this.dropRow
                },
                bubbles: true
            });
            this.element.dispatchEvent(domEvent);
            return domEvent;
        };
        return DropZoneDirective;
    }());
    DropZoneDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-drop-zone]'
                },] }
    ];
    DropZoneDirective.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.NgZone }
    ]; };
    DropZoneDirective.propDecorators = {
        dropTarget: [{ type: i0.Input }],
        dropRow: [{ type: i0.Input }],
        dropColumn: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DateColumnHeaderComponent = /** @class */ (function () {
        function DateColumnHeaderComponent(columnComponent) {
            this.columnComponent = columnComponent;
        }
        DateColumnHeaderComponent.prototype.ngAfterContentInit = function () {
            if (this.columnComponent) {
                this.columnComponent.header = this.header;
            }
        };
        return DateColumnHeaderComponent;
    }());
    DateColumnHeaderComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-data-column-header',
                    template: ''
                },] }
    ];
    DateColumnHeaderComponent.ctorParameters = function () { return [
        { type: DataColumnComponent }
    ]; };
    DateColumnHeaderComponent.propDecorators = {
        header: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataColumnModule = /** @class */ (function () {
        function DataColumnModule() {
        }
        return DataColumnModule;
    }());
    DataColumnModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule
                    ],
                    declarations: [
                        DataColumnComponent,
                        DataColumnListComponent,
                        DateColumnHeaderComponent
                    ],
                    exports: [
                        DataColumnComponent,
                        DataColumnListComponent,
                        DateColumnHeaderComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataTableModule = /** @class */ (function () {
        function DataTableModule() {
        }
        return DataTableModule;
    }());
    DataTableModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i2$2.RouterModule,
                        MaterialModule,
                        i1$1.CommonModule,
                        i1$2.TranslateModule,
                        DataColumnModule,
                        ContextMenuModule,
                        PipeModule,
                        DirectiveModule,
                        ClipboardModule
                    ],
                    declarations: [
                        DataTableComponent,
                        EmptyListComponent,
                        EmptyListHeaderDirective,
                        EmptyListBodyDirective,
                        EmptyListFooterDirective,
                        DataTableCellComponent,
                        DataTableRowComponent,
                        DateCellComponent,
                        FileSizeCellComponent,
                        LocationCellComponent,
                        JsonCellComponent,
                        NoContentTemplateDirective,
                        NoPermissionTemplateDirective,
                        LoadingContentTemplateDirective,
                        HeaderFilterTemplateDirective,
                        CustomEmptyContentTemplateDirective,
                        CustomLoadingContentTemplateDirective,
                        CustomNoPermissionTemplateDirective,
                        DropZoneDirective
                    ],
                    exports: [
                        DataTableComponent,
                        EmptyListComponent,
                        EmptyListHeaderDirective,
                        EmptyListBodyDirective,
                        EmptyListFooterDirective,
                        DataTableCellComponent,
                        DataTableRowComponent,
                        DateCellComponent,
                        FileSizeCellComponent,
                        LocationCellComponent,
                        JsonCellComponent,
                        NoContentTemplateDirective,
                        NoPermissionTemplateDirective,
                        LoadingContentTemplateDirective,
                        HeaderFilterTemplateDirective,
                        CustomEmptyContentTemplateDirective,
                        CustomLoadingContentTemplateDirective,
                        CustomNoPermissionTemplateDirective,
                        DropZoneDirective
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AboutModule = /** @class */ (function () {
        function AboutModule() {
        }
        return AboutModule;
    }());
    AboutModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        DataTableModule
                    ],
                    declarations: [
                        AboutApplicationModulesComponent,
                        AboutProductVersionComponent,
                        AboutGithubLinkComponent,
                        AboutServerSettingsComponent
                    ],
                    exports: [
                        AboutApplicationModulesComponent,
                        AboutProductVersionComponent,
                        AboutGithubLinkComponent,
                        AboutServerSettingsComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var ViewUtilService = /** @class */ (function () {
        function ViewUtilService(apiService, logService, translateService) {
            this.apiService = apiService;
            this.logService = logService;
            this.translateService = translateService;
            this.maxRetries = 5;
            this.mimeTypes = {
                text: ['text/plain', 'text/csv', 'text/xml', 'text/html', 'application/x-javascript'],
                pdf: ['application/pdf'],
                image: ['image/png', 'image/jpeg', 'image/gif', 'image/bmp', 'image/svg+xml'],
                media: ['video/mp4', 'video/webm', 'video/ogg', 'audio/mpeg', 'audio/ogg', 'audio/wav']
            };
            this.TRY_TIMEOUT = 10000;
            this.viewerTypeChange = new rxjs.Subject();
            this.urlFileContentChange = new rxjs.Subject();
        }
        Object.defineProperty(ViewUtilService.prototype, "renditionsApi", {
            get: function () {
                var _a;
                this._renditionsApi = (_a = this._renditionsApi) !== null && _a !== void 0 ? _a : new jsApi.RenditionsApi(this.apiService.getInstance());
                return this._renditionsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewUtilService.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewUtilService.prototype, "versionsApi", {
            get: function () {
                var _a;
                this._versionsApi = (_a = this._versionsApi) !== null && _a !== void 0 ? _a : new jsApi.VersionsApi(this.apiService.getInstance());
                return this._versionsApi;
            },
            enumerable: false,
            configurable: true
        });
        ViewUtilService.prototype.printFile = function (url, type) {
            var pwa = window.open(url, ViewUtilService.TARGET);
            if (pwa) {
                if (type === ViewUtilService.ContentGroup.IMAGE) {
                    pwa.onfocus = function () {
                        setTimeout(function () {
                            pwa.close();
                        }, 500);
                    };
                }
                pwa.onload = function () {
                    pwa.print();
                };
            }
        };
        ViewUtilService.prototype.printFileGeneric = function (objectId, mimeType) {
            var _this = this;
            var nodeId = objectId;
            var type = this.getViewerTypeByMimeType(mimeType);
            this.getRendition(nodeId, ViewUtilService.ContentGroup.PDF)
                .then(function (value) {
                var url = _this.getRenditionUrl(nodeId, type, (!!value));
                var printType = (type === ViewUtilService.ContentGroup.PDF
                    || type === ViewUtilService.ContentGroup.TEXT)
                    ? ViewUtilService.ContentGroup.PDF : type;
                _this.printFile(url, printType);
            })
                .catch(function (err) {
                _this.logService.error('Error with Printing');
                _this.logService.error(err);
            });
        };
        ViewUtilService.prototype.getRenditionUrl = function (nodeId, type, renditionExists) {
            return (renditionExists && type !== ViewUtilService.ContentGroup.IMAGE) ?
                this.contentApi.getRenditionUrl(nodeId, ViewUtilService.ContentGroup.PDF) :
                this.contentApi.getContentUrl(nodeId, false);
        };
        ViewUtilService.prototype.waitRendition = function (nodeId, renditionId, retries) {
            return __awaiter(this, void 0, void 0, function () {
                var rendition, status;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0: return [4 /*yield*/, this.renditionsApi.getRendition(nodeId, renditionId)];
                        case 1:
                            rendition = _c.sent();
                            if (!(this.maxRetries < retries)) return [3 /*break*/, 4];
                            status = rendition.entry.status.toString();
                            if (!(status === 'CREATED')) return [3 /*break*/, 2];
                            return [2 /*return*/, rendition];
                        case 2:
                            retries += 1;
                            return [4 /*yield*/, this.wait(1000)];
                        case 3:
                            _c.sent();
                            return [2 /*return*/, this.waitRendition(nodeId, renditionId, retries)];
                        case 4: return [2 /*return*/, Promise.resolve(null)];
                    }
                });
            });
        };
        ViewUtilService.prototype.getViewerTypeByMimeType = function (mimeType) {
            var e_1, _c;
            if (mimeType) {
                mimeType = mimeType.toLowerCase();
                var editorTypes = Object.keys(this.mimeTypes);
                try {
                    for (var editorTypes_1 = __values(editorTypes), editorTypes_1_1 = editorTypes_1.next(); !editorTypes_1_1.done; editorTypes_1_1 = editorTypes_1.next()) {
                        var type = editorTypes_1_1.value;
                        if (this.mimeTypes[type].indexOf(mimeType) >= 0) {
                            return type;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (editorTypes_1_1 && !editorTypes_1_1.done && (_c = editorTypes_1.return)) _c.call(editorTypes_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            return 'unknown';
        };
        ViewUtilService.prototype.wait = function (ms) {
            return new Promise(function (resolve) { return setTimeout(resolve, ms); });
        };
        ViewUtilService.prototype.getRendition = function (nodeId, renditionId) {
            return __awaiter(this, void 0, void 0, function () {
                var renditionPaging, rendition, status, err_1;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0: return [4 /*yield*/, this.renditionsApi.listRenditions(nodeId)];
                        case 1:
                            renditionPaging = _c.sent();
                            rendition = renditionPaging.list.entries.find(function (renditionEntry) { return renditionEntry.entry.id.toLowerCase() === renditionId; });
                            if (!rendition) return [3 /*break*/, 6];
                            status = rendition.entry.status.toString();
                            if (!(status === 'NOT_CREATED')) return [3 /*break*/, 6];
                            _c.label = 2;
                        case 2:
                            _c.trys.push([2, 5, , 6]);
                            return [4 /*yield*/, this.renditionsApi.createRendition(nodeId, { id: renditionId })];
                        case 3:
                            _c.sent();
                            return [4 /*yield*/, this.waitRendition(nodeId, renditionId, 0)];
                        case 4:
                            rendition = _c.sent();
                            return [3 /*break*/, 6];
                        case 5:
                            err_1 = _c.sent();
                            this.logService.error(err_1);
                            return [3 /*break*/, 6];
                        case 6: return [2 /*return*/, new Promise(function (resolve) { return resolve(rendition); })];
                    }
                });
            });
        };
        ViewUtilService.prototype.displayNodeRendition = function (nodeId, versionId) {
            return __awaiter(this, void 0, void 0, function () {
                var rendition, _c, renditionId, urlFileContent, err_2;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            _d.trys.push([0, 5, , 6]);
                            if (!versionId) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.resolveNodeRendition(nodeId, 'pdf', versionId)];
                        case 1:
                            _c = _d.sent();
                            return [3 /*break*/, 4];
                        case 2: return [4 /*yield*/, this.resolveNodeRendition(nodeId, 'pdf')];
                        case 3:
                            _c = _d.sent();
                            _d.label = 4;
                        case 4:
                            rendition = _c;
                            if (rendition) {
                                renditionId = rendition.entry.id;
                                if (renditionId === 'pdf') {
                                    this.viewerTypeChange.next('pdf');
                                }
                                else if (renditionId === 'imgpreview') {
                                    this.viewerTypeChange.next('image');
                                }
                                urlFileContent = versionId ? this.contentApi.getVersionRenditionUrl(nodeId, versionId, renditionId) :
                                    this.contentApi.getRenditionUrl(nodeId, renditionId);
                                this.urlFileContentChange.next(urlFileContent);
                            }
                            return [3 /*break*/, 6];
                        case 5:
                            err_2 = _d.sent();
                            this.logService.error(err_2);
                            return [3 /*break*/, 6];
                        case 6: return [2 /*return*/];
                    }
                });
            });
        };
        ViewUtilService.prototype.resolveNodeRendition = function (nodeId, renditionId, versionId) {
            return __awaiter(this, void 0, void 0, function () {
                var supportedRendition, _c, rendition, status, _d, e_2, err_3;
                var _this = this;
                return __generator(this, function (_e) {
                    switch (_e.label) {
                        case 0:
                            renditionId = renditionId.toLowerCase();
                            if (!versionId) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.versionsApi.listVersionRenditions(nodeId, versionId)];
                        case 1:
                            _c = _e.sent();
                            return [3 /*break*/, 4];
                        case 2: return [4 /*yield*/, this.renditionsApi.listRenditions(nodeId)];
                        case 3:
                            _c = _e.sent();
                            _e.label = 4;
                        case 4:
                            supportedRendition = _c;
                            rendition = supportedRendition.list.entries.find(function (renditionEntry) { return renditionEntry.entry.id.toLowerCase() === renditionId; });
                            if (!rendition) {
                                renditionId = 'imgpreview';
                                rendition = supportedRendition.list.entries.find(function (renditionEntry) { return renditionEntry.entry.id.toLowerCase() === renditionId; });
                            }
                            if (!rendition) return [3 /*break*/, 17];
                            status = rendition.entry.status.toString();
                            if (!(status === 'NOT_CREATED')) return [3 /*break*/, 17];
                            _e.label = 5;
                        case 5:
                            _e.trys.push([5, 16, , 17]);
                            if (!versionId) return [3 /*break*/, 7];
                            return [4 /*yield*/, this.versionsApi.createVersionRendition(nodeId, versionId, { id: renditionId }).then(function () {
                                    _this.viewerTypeChange.next('in_creation');
                                })];
                        case 6:
                            _e.sent();
                            return [3 /*break*/, 9];
                        case 7: return [4 /*yield*/, this.renditionsApi.createRendition(nodeId, { id: renditionId }).then(function () {
                                _this.viewerTypeChange.next('in_creation');
                            })];
                        case 8:
                            _e.sent();
                            _e.label = 9;
                        case 9:
                            _e.trys.push([9, 14, , 15]);
                            if (!versionId) return [3 /*break*/, 11];
                            return [4 /*yield*/, this.waitNodeRendition(nodeId, renditionId, versionId)];
                        case 10:
                            _d = _e.sent();
                            return [3 /*break*/, 13];
                        case 11: return [4 /*yield*/, this.waitNodeRendition(nodeId, renditionId)];
                        case 12:
                            _d = _e.sent();
                            _e.label = 13;
                        case 13:
                            rendition = _d;
                            return [3 /*break*/, 15];
                        case 14:
                            e_2 = _e.sent();
                            this.viewerTypeChange.next('error_in_creation');
                            rendition = null;
                            return [3 /*break*/, 15];
                        case 15: return [3 /*break*/, 17];
                        case 16:
                            err_3 = _e.sent();
                            this.logService.error(err_3);
                            return [3 /*break*/, 17];
                        case 17: return [2 /*return*/, rendition];
                    }
                });
            });
        };
        ViewUtilService.prototype.waitNodeRendition = function (nodeId, renditionId, versionId) {
            return __awaiter(this, void 0, void 0, function () {
                var currentRetry;
                var _this = this;
                return __generator(this, function (_c) {
                    currentRetry = 0;
                    return [2 /*return*/, new Promise(function (resolve, reject) {
                            var intervalId = setInterval(function () {
                                currentRetry++;
                                if (_this.maxRetries >= currentRetry) {
                                    if (versionId) {
                                        _this.versionsApi.getVersionRendition(nodeId, versionId, renditionId).then(function (rendition) {
                                            var status = rendition.entry.status.toString();
                                            if (status === 'CREATED') {
                                                _this.handleNodeRendition(nodeId, renditionId, versionId);
                                                clearInterval(intervalId);
                                                return resolve(rendition);
                                            }
                                        }, function () {
                                            return reject();
                                        });
                                    }
                                    else {
                                        _this.renditionsApi.getRendition(nodeId, renditionId).then(function (rendition) {
                                            var status = rendition.entry.status.toString();
                                            if (status === 'CREATED') {
                                                _this.handleNodeRendition(nodeId, renditionId);
                                                clearInterval(intervalId);
                                                return resolve(rendition);
                                            }
                                        }, function () {
                                            return reject();
                                        });
                                    }
                                }
                                else {
                                    clearInterval(intervalId);
                                    return reject();
                                }
                            }, _this.TRY_TIMEOUT);
                        })];
                });
            });
        };
        ViewUtilService.prototype.handleNodeRendition = function (nodeId, renditionId, versionId) {
            return __awaiter(this, void 0, void 0, function () {
                var urlFileContent;
                return __generator(this, function (_c) {
                    if (renditionId === 'pdf') {
                        this.viewerTypeChange.next('pdf');
                    }
                    else if (renditionId === 'imgpreview') {
                        this.viewerTypeChange.next('image');
                    }
                    urlFileContent = versionId ? this.contentApi.getVersionRenditionUrl(nodeId, versionId, renditionId) :
                        this.contentApi.getRenditionUrl(nodeId, renditionId);
                    this.urlFileContentChange.next(urlFileContent);
                    return [2 /*return*/];
                });
            });
        };
        ViewUtilService.prototype.generateMediaTracks = function (nodeId) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_c) {
                    return [2 /*return*/, this.isRenditionAvailable(nodeId, ViewUtilService.SUBTITLES_RENDITION_NAME)
                            .then(function (value) {
                            var tracks = [];
                            if (value) {
                                tracks.push({
                                    kind: 'subtitles',
                                    src: _this.contentApi.getRenditionUrl(nodeId, ViewUtilService.SUBTITLES_RENDITION_NAME),
                                    label: _this.translateService.instant('ADF_VIEWER.SUBTITLES')
                                });
                            }
                            return tracks;
                        })
                            .catch(function (err) {
                            _this.logService.error('Error while retrieving ' + ViewUtilService.SUBTITLES_RENDITION_NAME + ' rendition');
                            _this.logService.error(err);
                            return [];
                        })];
                });
            });
        };
        ViewUtilService.prototype.isRenditionAvailable = function (nodeId, renditionId) {
            var _a, _b;
            return __awaiter(this, void 0, void 0, function () {
                var renditionPaging, rendition;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0: return [4 /*yield*/, this.renditionsApi.listRenditions(nodeId)];
                        case 1:
                            renditionPaging = _c.sent();
                            rendition = renditionPaging.list.entries.find(function (renditionEntry) { return renditionEntry.entry.id.toLowerCase() === renditionId; });
                            return [2 /*return*/, ((_b = (_a = rendition === null || rendition === void 0 ? void 0 : rendition.entry) === null || _a === void 0 ? void 0 : _a.status) === null || _b === void 0 ? void 0 : _b.toString()) === 'CREATED' || false];
                    }
                });
            });
        };
        return ViewUtilService;
    }());
    ViewUtilService.TARGET = '_new';
    ViewUtilService.ContentGroup = {
        IMAGE: 'image',
        MEDIA: 'media',
        PDF: 'pdf',
        TEXT: 'text'
    };
    ViewUtilService.SUBTITLES_RENDITION_NAME = 'webvtt';
    ViewUtilService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ViewUtilService_Factory() { return new ViewUtilService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService), i0.ɵɵinject(TranslationService)); }, token: ViewUtilService, providedIn: "root" });
    ViewUtilService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    ViewUtilService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService },
        { type: TranslationService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ViewerMoreActionsComponent = /** @class */ (function () {
        function ViewerMoreActionsComponent() {
        }
        return ViewerMoreActionsComponent;
    }());
    ViewerMoreActionsComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-viewer-more-actions',
                    encapsulation: i0.ViewEncapsulation.None,
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    host: { class: 'adf-viewer-more-actions' },
                    template: "<ng-content></ng-content>"
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ViewerOpenWithComponent = /** @class */ (function () {
        function ViewerOpenWithComponent() {
        }
        return ViewerOpenWithComponent;
    }());
    ViewerOpenWithComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-viewer-open-with',
                    encapsulation: i0.ViewEncapsulation.None,
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    host: { class: 'adf-viewer-open-with' },
                    template: "<ng-content></ng-content>"
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ViewerSidebarComponent = /** @class */ (function () {
        function ViewerSidebarComponent() {
        }
        ViewerSidebarComponent.prototype.onKeyDown = function (event) {
            event.cancelBubble = true;
        };
        ViewerSidebarComponent.prototype.onKeyUp = function (event) {
            event.cancelBubble = true;
        };
        return ViewerSidebarComponent;
    }());
    ViewerSidebarComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-viewer-sidebar',
                    encapsulation: i0.ViewEncapsulation.None,
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    host: { class: 'adf-viewer-sidebar' },
                    template: "<ng-content></ng-content>"
                },] }
    ];
    ViewerSidebarComponent.propDecorators = {
        onKeyDown: [{ type: i0.HostListener, args: ['keydown', ['$event'],] }],
        onKeyUp: [{ type: i0.HostListener, args: ['keyup', ['$event'],] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ViewerToolbarComponent = /** @class */ (function () {
        function ViewerToolbarComponent() {
        }
        return ViewerToolbarComponent;
    }());
    ViewerToolbarComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-viewer-toolbar',
                    encapsulation: i0.ViewEncapsulation.None,
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    host: { class: 'adf-viewer-toolbar' },
                    template: "<ng-content></ng-content>"
                },] }
    ];

    var MIN_CANCELLABLE_FILE_SIZE = 1000000;
    var MAX_CANCELLABLE_FILE_PERCENTAGE = 50;
    var UploadService = /** @class */ (function () {
        function UploadService(apiService, appConfigService, discoveryApiService) {
            var _this = this;
            this.apiService = apiService;
            this.appConfigService = appConfigService;
            this.discoveryApiService = discoveryApiService;
            this.cache = {};
            this.totalComplete = 0;
            this.totalAborted = 0;
            this.totalError = 0;
            this.excludedFileList = [];
            this.excludedFoldersList = [];
            this.matchingOptions = null;
            this.folderMatchingOptions = null;
            this.activeTask = null;
            this.queue = [];
            this.queueChanged = new rxjs.Subject();
            this.fileUpload = new rxjs.Subject();
            this.fileUploadStarting = new rxjs.Subject();
            this.fileUploadCancelled = new rxjs.Subject();
            this.fileUploadProgress = new rxjs.Subject();
            this.fileUploadAborted = new rxjs.Subject();
            this.fileUploadError = new rxjs.Subject();
            this.fileUploadComplete = new rxjs.Subject();
            this.fileUploadDeleted = new rxjs.Subject();
            this.fileDeleted = new rxjs.Subject();
            this.discoveryApiService.ecmProductInfo$.pipe(operators.filter(function (info) { return !!info; }))
                .subscribe(function (_b) {
                var status = _b.status;
                _this.isThumbnailGenerationEnabled = status.isThumbnailGenerationEnabled;
            });
        }
        Object.defineProperty(UploadService.prototype, "uploadApi", {
            get: function () {
                var _a;
                this._uploadApi = (_a = this._uploadApi) !== null && _a !== void 0 ? _a : new jsApi.UploadApi(this.apiService.getInstance());
                return this._uploadApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(UploadService.prototype, "nodesApi", {
            get: function () {
                var _a;
                this._nodesApi = (_a = this._nodesApi) !== null && _a !== void 0 ? _a : new jsApi.NodesApi(this.apiService.getInstance());
                return this._nodesApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(UploadService.prototype, "versionsApi", {
            get: function () {
                var _a;
                this._versionsApi = (_a = this._versionsApi) !== null && _a !== void 0 ? _a : new jsApi.VersionsApi(this.apiService.getInstance());
                return this._versionsApi;
            },
            enumerable: false,
            configurable: true
        });
        UploadService.prototype.isUploading = function () {
            var finishedFileStates = [exports.FileUploadStatus.Complete, exports.FileUploadStatus.Cancelled, exports.FileUploadStatus.Aborted, exports.FileUploadStatus.Error, exports.FileUploadStatus.Deleted];
            return this.queue.reduce(function (stillUploading, currentFile) {
                return stillUploading || finishedFileStates.indexOf(currentFile.status) === -1;
            }, false);
        };
        UploadService.prototype.getQueue = function () {
            return this.queue;
        };
        UploadService.prototype.addToQueue = function () {
            var _this = this;
            var files = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                files[_i] = arguments[_i];
            }
            var allowedFiles = files.filter(function (currentFile) { return _this.filterElement(currentFile); });
            this.queue = this.queue.concat(allowedFiles);
            this.queueChanged.next(this.queue);
            return allowedFiles;
        };
        UploadService.prototype.filterElement = function (file) {
            this.excludedFileList = this.appConfigService.get('files.excluded');
            this.excludedFoldersList = this.appConfigService.get('folders.excluded');
            var isAllowed = true;
            if (this.excludedFileList) {
                this.matchingOptions = this.appConfigService.get('files.match-options');
                isAllowed = this.isFileNameAllowed(file);
            }
            if (isAllowed && this.excludedFoldersList) {
                this.folderMatchingOptions = this.appConfigService.get('folders.match-options');
                isAllowed = this.isParentFolderAllowed(file);
            }
            return isAllowed;
        };
        UploadService.prototype.isParentFolderAllowed = function (file) {
            var _this = this;
            var isAllowed = true;
            var currentFile = file.file;
            var fileRelativePath = currentFile.webkitRelativePath ? currentFile.webkitRelativePath : file.options.path;
            if (currentFile && fileRelativePath) {
                isAllowed =
                    this.excludedFoldersList.filter(function (folderToExclude) {
                        return fileRelativePath
                            .split('/')
                            .some(function (pathElement) {
                            var minimatch$1 = new minimatch.Minimatch(folderToExclude, _this.folderMatchingOptions);
                            return minimatch$1.match(pathElement);
                        });
                    }).length === 0;
            }
            return isAllowed;
        };
        UploadService.prototype.isFileNameAllowed = function (file) {
            var _this = this;
            return (this.excludedFileList.filter(function (pattern) {
                var minimatch$1 = new minimatch.Minimatch(pattern, _this.matchingOptions);
                return minimatch$1.match(file.name);
            }).length === 0);
        };
        UploadService.prototype.uploadFilesInTheQueue = function (successEmitter, errorEmitter) {
            var _this = this;
            if (!this.activeTask) {
                var file = this.queue.find(function (currentFile) { return currentFile.status === exports.FileUploadStatus.Pending; });
                if (file) {
                    this.onUploadStarting(file);
                    var promise = this.beginUpload(file, successEmitter, errorEmitter);
                    this.activeTask = promise;
                    this.cache[file.name] = promise;
                    var next_1 = function () {
                        _this.activeTask = null;
                        setTimeout(function () { return _this.uploadFilesInTheQueue(successEmitter, errorEmitter); }, 100);
                    };
                    promise.next = next_1;
                    promise.then(function () { return next_1(); }, function () { return next_1(); });
                }
            }
        };
        UploadService.prototype.cancelUpload = function () {
            var _this = this;
            var files = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                files[_i] = arguments[_i];
            }
            files.forEach(function (file) {
                var promise = _this.cache[file.name];
                if (promise) {
                    if (_this.isSaveToAbortFile(file)) {
                        promise.abort();
                    }
                    _this.abortedFile = file.name;
                    delete _this.cache[file.name];
                    promise.next();
                }
                else {
                    var performAction = _this.getAction(file);
                    performAction();
                }
            });
        };
        UploadService.prototype.clearQueue = function () {
            this.queue = [];
            this.totalComplete = 0;
            this.totalAborted = 0;
            this.totalError = 0;
        };
        UploadService.prototype.getUploadPromise = function (file) {
            var opts = {
                include: ['allowableOperations']
            };
            if (this.isThumbnailGenerationEnabled) {
                opts.renditions = 'doclib';
            }
            if (file.options && file.options.versioningEnabled !== undefined) {
                opts.versioningEnabled = file.options.versioningEnabled;
            }
            if (file.options.newVersion === true) {
                opts.overwrite = true;
                opts.majorVersion = file.options.majorVersion;
                opts.comment = file.options.comment;
                opts.name = file.name;
            }
            else {
                opts.autoRename = true;
            }
            if (file.options.nodeType) {
                opts.nodeType = file.options.nodeType;
            }
            if (file.id) {
                return this.nodesApi.updateNodeContent(file.id, file.file, opts);
            }
            else {
                var nodeBody = Object.assign({}, file.options);
                delete nodeBody['versioningEnabled'];
                return this.uploadApi.uploadFile(file.file, file.options.path, file.options.parentId, nodeBody, opts);
            }
        };
        UploadService.prototype.beginUpload = function (file, successEmitter, errorEmitter) {
            var _this = this;
            var promise = this.getUploadPromise(file);
            promise
                .on('progress', function (progress) {
                _this.onUploadProgress(file, progress);
            })
                .on('abort', function () {
                _this.onUploadAborted(file);
                if (successEmitter) {
                    successEmitter.emit({ value: 'File aborted' });
                }
            })
                .on('error', function (err) {
                _this.onUploadError(file, err);
                if (errorEmitter) {
                    errorEmitter.emit({ value: 'Error file uploaded' });
                }
            })
                .on('success', function (data) {
                if (_this.abortedFile === file.name) {
                    _this.onUploadAborted(file);
                    if (file.id === undefined) {
                        _this.deleteAbortedNode(data.entry.id);
                    }
                    else {
                        _this.deleteAbortedNodeVersion(data.entry.id, data.entry.properties['cm:versionLabel']);
                    }
                    if (successEmitter) {
                        successEmitter.emit({ value: 'File deleted' });
                    }
                }
                else {
                    _this.onUploadComplete(file, data);
                    if (successEmitter) {
                        successEmitter.emit({ value: data });
                    }
                }
            })
                .catch(function () {
            });
            return promise;
        };
        UploadService.prototype.onUploadStarting = function (file) {
            if (file) {
                file.status = exports.FileUploadStatus.Starting;
                var event = new FileUploadEvent(file, exports.FileUploadStatus.Starting);
                this.fileUpload.next(event);
                this.fileUploadStarting.next(event);
            }
        };
        UploadService.prototype.onUploadProgress = function (file, progress) {
            if (file) {
                file.progress = progress;
                file.status = exports.FileUploadStatus.Progress;
                var event = new FileUploadEvent(file, exports.FileUploadStatus.Progress);
                this.fileUpload.next(event);
                this.fileUploadProgress.next(event);
            }
        };
        UploadService.prototype.onUploadError = function (file, error) {
            if (file) {
                file.errorCode = (error || {}).status;
                file.status = exports.FileUploadStatus.Error;
                this.totalError++;
                var promise = this.cache[file.name];
                if (promise) {
                    delete this.cache[file.name];
                }
                var event = new FileUploadErrorEvent(file, error, this.totalError);
                this.fileUpload.next(event);
                this.fileUploadError.next(event);
            }
        };
        UploadService.prototype.onUploadComplete = function (file, data) {
            if (file) {
                file.status = exports.FileUploadStatus.Complete;
                file.data = data;
                this.totalComplete++;
                var promise = this.cache[file.name];
                if (promise) {
                    delete this.cache[file.name];
                }
                var event = new FileUploadCompleteEvent(file, this.totalComplete, data, this.totalAborted);
                this.fileUpload.next(event);
                this.fileUploadComplete.next(event);
            }
        };
        UploadService.prototype.onUploadAborted = function (file) {
            if (file) {
                file.status = exports.FileUploadStatus.Aborted;
                this.totalAborted++;
                var event = new FileUploadEvent(file, exports.FileUploadStatus.Aborted);
                this.fileUpload.next(event);
                this.fileUploadAborted.next(event);
            }
        };
        UploadService.prototype.onUploadCancelled = function (file) {
            if (file) {
                file.status = exports.FileUploadStatus.Cancelled;
                var event = new FileUploadEvent(file, exports.FileUploadStatus.Cancelled);
                this.fileUpload.next(event);
                this.fileUploadCancelled.next(event);
            }
        };
        UploadService.prototype.onUploadDeleted = function (file) {
            if (file) {
                file.status = exports.FileUploadStatus.Deleted;
                this.totalComplete--;
                var event = new FileUploadDeleteEvent(file, this.totalComplete);
                this.fileUpload.next(event);
                this.fileUploadDeleted.next(event);
            }
        };
        UploadService.prototype.getAction = function (file) {
            var _b;
            var _this = this;
            var actions = (_b = {},
                _b[exports.FileUploadStatus.Pending] = function () { return _this.onUploadCancelled(file); },
                _b[exports.FileUploadStatus.Deleted] = function () { return _this.onUploadDeleted(file); },
                _b[exports.FileUploadStatus.Error] = function () { return _this.onUploadError(file, null); },
                _b);
            return actions[file.status];
        };
        UploadService.prototype.deleteAbortedNode = function (nodeId) {
            var _this = this;
            this.nodesApi.deleteNode(nodeId, { permanent: true })
                .then(function () { return (_this.abortedFile = undefined); });
        };
        UploadService.prototype.deleteAbortedNodeVersion = function (nodeId, versionId) {
            var _this = this;
            this.versionsApi.deleteVersion(nodeId, versionId)
                .then(function () { return (_this.abortedFile = undefined); });
        };
        UploadService.prototype.isSaveToAbortFile = function (file) {
            return (file.size > MIN_CANCELLABLE_FILE_SIZE &&
                file.progress.percent < MAX_CANCELLABLE_FILE_PERCENTAGE);
        };
        return UploadService;
    }());
    UploadService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UploadService_Factory() { return new UploadService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(AppConfigService), i0.ɵɵinject(DiscoveryApiService)); }, token: UploadService, providedIn: "root" });
    UploadService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    UploadService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: AppConfigService },
        { type: DiscoveryApiService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var UserProcessModel = /** @class */ (function () {
        function UserProcessModel(input) {
            if (input) {
                this.id = input.id;
                this.email = input.email || null;
                this.firstName = input.firstName || null;
                this.lastName = input.lastName || null;
                this.pictureId = input.pictureId || null;
                this.externalId = input.externalId || null;
                this.userImage = input.userImage;
            }
        }
        return UserProcessModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CommentModel = /** @class */ (function () {
        function CommentModel(obj) {
            if (obj) {
                this.id = obj.id;
                this.message = obj.message;
                this.created = obj.created;
                this.createdBy = obj.createdBy;
                this.isSelected = obj.isSelected ? obj.isSelected : false;
            }
        }
        return CommentModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EcmCompanyModel = /** @class */ (function () {
        function EcmCompanyModel() {
        }
        return EcmCompanyModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var RedirectionModel = /** @class */ (function () {
        function RedirectionModel(obj) {
            if (obj) {
                this.provider = obj.provider;
                this.url = obj.url || null;
            }
        }
        return RedirectionModel;
    }());

    var PaginationModel = /** @class */ (function (_super) {
        __extends(PaginationModel, _super);
        function PaginationModel(input) {
            var _this = _super.call(this, input) || this;
            if (input) {
                _this.count = input.count;
                _this.hasMoreItems = input.hasMoreItems ? input.hasMoreItems : false;
                _this.merge = input.merge ? input.merge : false;
                _this.totalItems = input.totalItems;
                _this.skipCount = input.skipCount;
                _this.maxItems = input.maxItems;
            }
            return _this;
        }
        return PaginationModel;
    }(jsApi.Pagination));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var RequestPaginationModel = /** @class */ (function () {
        function RequestPaginationModel(input) {
            this.merge = false;
            if (input) {
                Object.assign(this, input);
            }
        }
        return RequestPaginationModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DecimalNumberModel = /** @class */ (function () {
        function DecimalNumberModel(obj) {
            if (obj) {
                this.minIntegerDigits = obj.minIntegerDigits;
                this.minFractionDigits = obj.minFractionDigits;
                this.maxFractionDigits = obj.maxFractionDigits;
            }
        }
        return DecimalNumberModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var BpmUserModel = /** @class */ (function () {
        function BpmUserModel(input) {
            if (input) {
                this.apps = input.apps;
                this.capabilities = input.capabilities;
                this.company = input.company;
                this.created = input.created;
                this.email = input.email;
                this.externalId = input.externalId;
                this.firstName = input.firstName;
                this.lastName = input.lastName;
                this.fullname = input.fullname;
                this.groups = input.groups;
                this.id = input.id;
                this.lastUpdate = input.lastUpdate;
                this.latestSyncTimeStamp = input.latestSyncTimeStamp;
                this.password = input.password;
                this.pictureId = input.pictureId;
                this.status = input.status;
                this.tenantId = input.tenantId;
                this.tenantName = input.tenantName;
                this.tenantPictureId = input.tenantPictureId;
                this.type = input.type;
            }
        }
        return BpmUserModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EcmUserModel = /** @class */ (function () {
        function EcmUserModel(obj) {
            this.id = obj && obj.id || null;
            this.firstName = obj && obj.firstName;
            this.lastName = obj && obj.lastName;
            this.description = obj && obj.description || null;
            this.avatarId = obj && obj.avatarId || null;
            this.email = obj && obj.email || null;
            this.skypeId = obj && obj.skypeId;
            this.googleId = obj && obj.googleId;
            this.instantMessageId = obj && obj.instantMessageId;
            this.jobTitle = obj && obj.jobTitle || null;
            this.location = obj && obj.location || null;
            this.company = obj && obj.company;
            this.mobile = obj && obj.mobile;
            this.telephone = obj && obj.telephone;
            this.statusUpdatedAt = obj && obj.statusUpdatedAt;
            this.userStatus = obj && obj.userStatus;
            this.enabled = obj && obj.enabled;
            this.emailNotificationsEnabled = obj && obj.emailNotificationsEnabled;
            this.aspectNames = obj && obj.aspectNames;
            this.properties = obj && obj.properties;
            this.capabilities = obj && obj.capabilities;
        }
        return EcmUserModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var IdentityRoleModel = /** @class */ (function () {
        function IdentityRoleModel(obj) {
            if (obj) {
                this.id = obj.id || null;
                this.name = obj.name || null;
                this.description = obj.description || null;
                this.clientRole = obj.clientRole || null;
                this.composite = obj.composite || null;
                this.containerId = obj.containerId || null;
                this.scopeParamRequired = obj.scopeParamRequired || null;
            }
        }
        return IdentityRoleModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    (function (SearchTextStateEnum) {
        SearchTextStateEnum["expanded"] = "expanded";
        SearchTextStateEnum["collapsed"] = "collapsed";
    })(exports.SearchTextStateEnum || (exports.SearchTextStateEnum = {}));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var ViewerComponent = /** @class */ (function () {
        function ViewerComponent(apiService, viewUtilService, logService, extensionService, contentService, uploadService, el, dialog, cdr) {
            this.apiService = apiService;
            this.viewUtilService = viewUtilService;
            this.logService = logService;
            this.extensionService = extensionService;
            this.contentService = contentService;
            this.uploadService = uploadService;
            this.el = el;
            this.dialog = dialog;
            this.cdr = cdr;
            this.urlFile = '';
            this.urlFileViewer = null;
            this.nodeId = null;
            this.versionId = null;
            this.sharedLinkId = null;
            this.overlayMode = false;
            this.showViewer = true;
            this.showToolbar = true;
            this.allowGoBack = true;
            this.allowDownload = true;
            this.allowPrint = false;
            this.allowFullScreen = true;
            this.allowNavigate = false;
            this.canNavigateBefore = true;
            this.canNavigateNext = true;
            this.allowLeftSidebar = false;
            this.allowRightSidebar = false;
            this.allowThumbnails = true;
            this.showRightSidebar = false;
            this.showLeftSidebar = false;
            this.sidebarRightTemplate = null;
            this.sidebarLeftTemplate = null;
            this.thumbnailsTemplate = null;
            this.maxRetries = 30;
            this.goBack = new i0.EventEmitter();
            this.print = new i0.EventEmitter();
            this.showViewerChange = new i0.EventEmitter();
            this.extensionChange = new i0.EventEmitter();
            this.navigateBefore = new i0.EventEmitter();
            this.navigateNext = new i0.EventEmitter();
            this.invalidSharedLink = new i0.EventEmitter();
            this.TRY_TIMEOUT = 10000;
            this.viewerType = 'unknown';
            this.isLoading = false;
            this.extensionTemplates = [];
            this.sidebarRightTemplateContext = { node: null };
            this.sidebarLeftTemplateContext = { node: null };
            this.readOnly = true;
            this.cacheTypeForContent = '';
            this.extensions = {
                image: ['png', 'jpg', 'jpeg', 'gif', 'bpm', 'svg'],
                media: ['wav', 'mp4', 'mp3', 'webm', 'ogg'],
                text: ['txt', 'xml', 'html', 'json', 'ts', 'css', 'md'],
                pdf: ['pdf']
            };
            this.mimeTypes = {
                text: ['text/plain', 'text/csv', 'text/xml', 'text/html', 'application/x-javascript'],
                pdf: ['application/pdf'],
                image: ['image/png', 'image/jpeg', 'image/gif', 'image/bmp', 'image/svg+xml'],
                media: ['video/mp4', 'video/webm', 'video/ogg', 'audio/mpeg', 'audio/mp3', 'audio/ogg', 'audio/wav']
            };
            this.onDestroy$ = new rxjs.Subject();
            this.shouldCloseViewer = true;
            this.keyDown$ = rxjs.fromEvent(document, 'keydown');
            viewUtilService.maxRetries = this.maxRetries;
        }
        Object.defineProperty(ViewerComponent.prototype, "viewerExtensions", {
            get: function () {
                return this.extensionService.getViewerExtensions();
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewerComponent.prototype, "externalExtensions", {
            get: function () {
                return this.viewerExtensions.map(function (ext) { return ext.fileExtension; });
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewerComponent.prototype, "externalViewer", {
            get: function () {
                if (!this._externalViewer) {
                    this._externalViewer = this.viewerExtensions.find(function (ext) { return ext.fileExtension === '*'; });
                }
                return this._externalViewer;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewerComponent.prototype, "sharedLinksApi", {
            get: function () {
                var _a;
                this._sharedLinksApi = (_a = this._sharedLinksApi) !== null && _a !== void 0 ? _a : new jsApi.SharedlinksApi(this.apiService.getInstance());
                return this._sharedLinksApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewerComponent.prototype, "versionsApi", {
            get: function () {
                var _a;
                this._versionsApi = (_a = this._versionsApi) !== null && _a !== void 0 ? _a : new jsApi.VersionsApi(this.apiService.getInstance());
                return this._versionsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewerComponent.prototype, "nodesApi", {
            get: function () {
                var _a;
                this._nodesApi = (_a = this._nodesApi) !== null && _a !== void 0 ? _a : new jsApi.NodesApi(this.apiService.getInstance());
                return this._nodesApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ViewerComponent.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        ViewerComponent.prototype.isSourceDefined = function () {
            return !!(this.urlFile || this.blobFile || this.nodeId || this.sharedLinkId);
        };
        ViewerComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.apiService.nodeUpdated.pipe(operators.filter(function (node) {
                return node && node.id === _this.nodeId &&
                    (node.name !== _this.fileName ||
                        _this.getNodeVersionProperty(_this.nodeEntry.entry) !== _this.getNodeVersionProperty(node));
            }), operators.takeUntil(this.onDestroy$)).subscribe(function (node) { return _this.onNodeUpdated(node); });
            this.viewUtilService.viewerTypeChange.pipe(operators.takeUntil(this.onDestroy$)).subscribe(function (type) {
                _this.viewerType = type;
            });
            this.viewUtilService.urlFileContentChange.pipe(operators.takeUntil(this.onDestroy$)).subscribe(function (content) {
                _this.urlFileContent = content;
            });
            this.closeOverlayManager();
            this.cacheTypeForContent = '';
        };
        ViewerComponent.prototype.getNodeVersionProperty = function (node) {
            var _a;
            return (_a = node === null || node === void 0 ? void 0 : node.properties['cm:versionLabel']) !== null && _a !== void 0 ? _a : '';
        };
        ViewerComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        ViewerComponent.prototype.onNodeUpdated = function (node) {
            var _this = this;
            if (node && node.id === this.nodeId) {
                this.cacheTypeForContent = 'no-cache';
                this.generateCacheBusterNumber();
                this.isLoading = true;
                this.setUpNodeFile(node).then(function () {
                    _this.isLoading = false;
                });
            }
        };
        ViewerComponent.prototype.ngOnChanges = function () {
            if (this.showViewer) {
                if (!this.isSourceDefined()) {
                    throw new Error('A content source attribute value is missing.');
                }
                this.isLoading = true;
                if (this.blobFile) {
                    this.setUpBlobData();
                    this.isLoading = false;
                }
                else if (this.urlFile) {
                    this.setUpUrlFile();
                    this.isLoading = false;
                }
                else if (this.nodeId) {
                    this.setupNode();
                }
                else if (this.sharedLinkId) {
                    this.setupSharedLink();
                }
            }
        };
        ViewerComponent.prototype.setupSharedLink = function () {
            var _this = this;
            this.allowGoBack = false;
            this.sharedLinksApi.getSharedLink(this.sharedLinkId).then(function (sharedLinkEntry) {
                _this.setUpSharedLinkFile(sharedLinkEntry);
                _this.isLoading = false;
            }, function () {
                _this.isLoading = false;
                _this.logService.error('This sharedLink does not exist');
                _this.invalidSharedLink.next();
            });
        };
        ViewerComponent.prototype.setupNode = function () {
            var _this = this;
            this.nodesApi.getNode(this.nodeId, { include: ['allowableOperations'] }).then(function (node) {
                _this.nodeEntry = node;
                if (_this.versionId) {
                    _this.versionsApi.getVersion(_this.nodeId, _this.versionId).then(function (version) {
                        _this.versionEntry = version;
                        _this.setUpNodeFile(node.entry, version.entry).then(function () {
                            _this.isLoading = false;
                        });
                    });
                }
                else {
                    _this.setUpNodeFile(node.entry).then(function () {
                        _this.isLoading = false;
                        _this.cdr.detectChanges();
                    });
                }
            }, function () {
                _this.isLoading = false;
                _this.logService.error('This node does not exist');
            });
        };
        ViewerComponent.prototype.setUpBlobData = function () {
            this.fileTitle = this.getDisplayName('Unknown');
            this.mimeType = this.blobFile.type;
            this.viewerType = this.getViewerTypeByMimeType(this.mimeType);
            this.allowDownload = false;
            this.extensionChange.emit(this.mimeType);
            this.scrollTop();
        };
        ViewerComponent.prototype.setUpUrlFile = function () {
            var filenameFromUrl = this.getFilenameFromUrl(this.urlFile);
            this.fileTitle = this.getDisplayName(filenameFromUrl);
            this.extension = this.getFileExtension(filenameFromUrl);
            this.urlFileContent = this.urlFile;
            this.fileName = this.displayName;
            this.viewerType = this.urlFileViewer || this.getViewerType(this.extension, this.mimeType);
            this.extensionChange.emit(this.extension);
            this.scrollTop();
        };
        ViewerComponent.prototype.setUpNodeFile = function (nodeData, versionData) {
            var _a, _b, _c, _d;
            return __awaiter(this, void 0, void 0, function () {
                var currentFileVersion;
                return __generator(this, function (_q) {
                    switch (_q.label) {
                        case 0:
                            this.readOnly = !this.contentService.hasAllowableOperations(nodeData, 'update');
                            if (versionData && versionData.content) {
                                this.mimeType = versionData.content.mimeType;
                            }
                            else if (nodeData.content) {
                                this.mimeType = nodeData.content.mimeType;
                            }
                            this.fileTitle = this.getDisplayName(versionData ? versionData.name : nodeData.name);
                            currentFileVersion = ((_b = (_a = this.nodeEntry) === null || _a === void 0 ? void 0 : _a.entry) === null || _b === void 0 ? void 0 : _b.properties) && this.nodeEntry.entry.properties['cm:versionLabel'] ?
                                encodeURI((_d = (_c = this.nodeEntry) === null || _c === void 0 ? void 0 : _c.entry) === null || _d === void 0 ? void 0 : _d.properties['cm:versionLabel']) : encodeURI('1.0');
                            this.urlFileContent = versionData ? this.contentApi.getVersionContentUrl(this.nodeId, versionData.id) :
                                this.contentApi.getContentUrl(this.nodeId);
                            this.urlFileContent = this.cacheBusterNumber ? this.urlFileContent + '&' + currentFileVersion + '&' + this.cacheBusterNumber :
                                this.urlFileContent + '&' + currentFileVersion;
                            this.extension = this.getFileExtension(versionData ? versionData.name : nodeData.name);
                            this.fileName = versionData ? versionData.name : nodeData.name;
                            this.viewerType = this.getViewerType(this.extension, this.mimeType);
                            if (!(this.viewerType === 'unknown')) return [3 /*break*/, 4];
                            if (!versionData) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.viewUtilService.displayNodeRendition(nodeData.id, versionData.id)];
                        case 1:
                            _q.sent();
                            return [3 /*break*/, 4];
                        case 2: return [4 /*yield*/, this.viewUtilService.displayNodeRendition(nodeData.id)];
                        case 3:
                            _q.sent();
                            _q.label = 4;
                        case 4:
                            this.extensionChange.emit(this.extension);
                            this.sidebarRightTemplateContext.node = nodeData;
                            this.sidebarLeftTemplateContext.node = nodeData;
                            this.scrollTop();
                            return [2 /*return*/];
                    }
                });
            });
        };
        ViewerComponent.prototype.getViewerType = function (extension, mimeType) {
            var viewerType = this.getViewerTypeByExtension(extension);
            if (viewerType === 'unknown') {
                viewerType = this.getViewerTypeByMimeType(mimeType);
            }
            return viewerType;
        };
        ViewerComponent.prototype.setUpSharedLinkFile = function (details) {
            this.mimeType = details.entry.content.mimeType;
            this.fileTitle = this.getDisplayName(details.entry.name);
            this.extension = this.getFileExtension(details.entry.name);
            this.fileName = details.entry.name;
            this.urlFileContent = this.contentApi.getSharedLinkContentUrl(this.sharedLinkId, false);
            this.viewerType = this.getViewerType(this.extension, this.mimeType);
            if (this.viewerType === 'unknown') {
                this.displaySharedLinkRendition(this.sharedLinkId);
            }
            this.extensionChange.emit(this.extension);
        };
        ViewerComponent.prototype.toggleSidebar = function () {
            var _this = this;
            this.showRightSidebar = !this.showRightSidebar;
            if (this.showRightSidebar && this.nodeId) {
                this.nodesApi.getNode(this.nodeId, { include: ['allowableOperations'] })
                    .then(function (nodeEntry) {
                    _this.sidebarRightTemplateContext.node = nodeEntry.entry;
                });
            }
        };
        ViewerComponent.prototype.toggleLeftSidebar = function () {
            var _this = this;
            this.showLeftSidebar = !this.showLeftSidebar;
            if (this.showRightSidebar && this.nodeId) {
                this.nodesApi.getNode(this.nodeId, { include: ['allowableOperations'] })
                    .then(function (nodeEntry) {
                    _this.sidebarLeftTemplateContext.node = nodeEntry.entry;
                });
            }
        };
        ViewerComponent.prototype.getDisplayName = function (name) {
            return this.displayName || name;
        };
        ViewerComponent.prototype.scrollTop = function () {
            window.scrollTo(0, 1);
        };
        ViewerComponent.prototype.getViewerTypeByMimeType = function (mimeType) {
            var e_1, _q;
            if (mimeType) {
                mimeType = mimeType.toLowerCase();
                var editorTypes = Object.keys(this.mimeTypes);
                try {
                    for (var editorTypes_1 = __values(editorTypes), editorTypes_1_1 = editorTypes_1.next(); !editorTypes_1_1.done; editorTypes_1_1 = editorTypes_1.next()) {
                        var type = editorTypes_1_1.value;
                        if (this.mimeTypes[type].indexOf(mimeType) >= 0) {
                            return type;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (editorTypes_1_1 && !editorTypes_1_1.done && (_q = editorTypes_1.return)) _q.call(editorTypes_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            return 'unknown';
        };
        ViewerComponent.prototype.getViewerTypeByExtension = function (extension) {
            if (extension) {
                extension = extension.toLowerCase();
            }
            if (this.isExternalViewer()) {
                return 'external';
            }
            if (this.isCustomViewerExtension(extension)) {
                return 'custom';
            }
            if (this.extensions.image.indexOf(extension) >= 0) {
                return 'image';
            }
            if (this.extensions.media.indexOf(extension) >= 0) {
                return 'media';
            }
            if (this.extensions.text.indexOf(extension) >= 0) {
                return 'text';
            }
            if (this.extensions.pdf.indexOf(extension) >= 0) {
                return 'pdf';
            }
            return 'unknown';
        };
        ViewerComponent.prototype.onBackButtonClick = function () {
            this.close();
        };
        ViewerComponent.prototype.onNavigateBeforeClick = function (event) {
            this.navigateBefore.next(event);
        };
        ViewerComponent.prototype.onNavigateNextClick = function (event) {
            this.navigateNext.next(event);
        };
        ViewerComponent.prototype.close = function () {
            if (this.otherMenu) {
                this.otherMenu.hidden = false;
            }
            this.showViewer = false;
            this.showViewerChange.emit(this.showViewer);
        };
        ViewerComponent.prototype.getFilenameFromUrl = function (url) {
            var anchor = url.indexOf('#');
            var query = url.indexOf('?');
            var end = Math.min(anchor > 0 ? anchor : url.length, query > 0 ? query : url.length);
            return url.substring(url.lastIndexOf('/', end) + 1, end);
        };
        ViewerComponent.prototype.getFileExtension = function (fileName) {
            if (fileName) {
                var match = fileName.match(/\.([^\./\?\#]+)($|\?|\#)/);
                return match ? match[1] : null;
            }
            return null;
        };
        ViewerComponent.prototype.isExternalViewer = function () {
            return !!this.viewerExtensions.find(function (ext) { return ext.fileExtension === '*'; });
        };
        ViewerComponent.prototype.isCustomViewerExtension = function (extension) {
            var extensions = this.externalExtensions || [];
            if (extension && extensions.length > 0) {
                extension = extension.toLowerCase();
                return extensions.flat().indexOf(extension) >= 0;
            }
            return false;
        };
        ViewerComponent.prototype.handleKeyboardEvent = function (event) {
            if (event && event.defaultPrevented) {
                return;
            }
            var key = event.keyCode;
            if (key === 37 && this.canNavigateBefore) {
                event.preventDefault();
                this.onNavigateBeforeClick(event);
            }
            if (key === 39 && this.canNavigateNext) {
                event.preventDefault();
                this.onNavigateNextClick(event);
            }
            if (key === 70 && event.ctrlKey) {
                event.preventDefault();
                this.enterFullScreen();
            }
        };
        ViewerComponent.prototype.printContent = function () {
            if (this.allowPrint) {
                var args = new BaseEvent();
                this.print.next(args);
                if (!args.defaultPrevented) {
                    this.viewUtilService.printFileGeneric(this.nodeId, this.mimeType);
                }
            }
        };
        ViewerComponent.prototype.enterFullScreen = function () {
            if (this.allowFullScreen) {
                var container = this.el.nativeElement.querySelector('.adf-viewer__fullscreen-container');
                if (container) {
                    if (container.requestFullscreen) {
                        container.requestFullscreen();
                    }
                    else if (container.webkitRequestFullscreen) {
                        container.webkitRequestFullscreen();
                    }
                    else if (container.mozRequestFullScreen) {
                        container.mozRequestFullScreen();
                    }
                    else if (container.msRequestFullscreen) {
                        container.msRequestFullscreen();
                    }
                }
            }
        };
        ViewerComponent.prototype.displaySharedLinkRendition = function (sharedId) {
            return __awaiter(this, void 0, void 0, function () {
                var rendition, error_1, rendition, error_2;
                return __generator(this, function (_q) {
                    switch (_q.label) {
                        case 0:
                            _q.trys.push([0, 2, , 7]);
                            return [4 /*yield*/, this.sharedLinksApi.getSharedLinkRendition(sharedId, 'pdf')];
                        case 1:
                            rendition = _q.sent();
                            if (rendition.entry.status.toString() === 'CREATED') {
                                this.viewerType = 'pdf';
                                this.urlFileContent = this.contentApi.getSharedLinkRenditionUrl(sharedId, 'pdf');
                            }
                            return [3 /*break*/, 7];
                        case 2:
                            error_1 = _q.sent();
                            this.logService.error(error_1);
                            _q.label = 3;
                        case 3:
                            _q.trys.push([3, 5, , 6]);
                            return [4 /*yield*/, this.sharedLinksApi.getSharedLinkRendition(sharedId, 'imgpreview')];
                        case 4:
                            rendition = _q.sent();
                            if (rendition.entry.status.toString() === 'CREATED') {
                                this.viewerType = 'image';
                                this.urlFileContent = this.contentApi.getSharedLinkRenditionUrl(sharedId, 'imgpreview');
                            }
                            return [3 /*break*/, 6];
                        case 5:
                            error_2 = _q.sent();
                            this.logService.error(error_2);
                            return [3 /*break*/, 6];
                        case 6: return [3 /*break*/, 7];
                        case 7: return [2 /*return*/];
                    }
                });
            });
        };
        ViewerComponent.prototype.checkExtensions = function (extensionAllowed) {
            var _this = this;
            if (typeof extensionAllowed === 'string') {
                return this.extension.toLowerCase() === extensionAllowed.toLowerCase();
            }
            else if (extensionAllowed.length > 0) {
                return extensionAllowed.find(function (currentExtension) {
                    return _this.extension.toLowerCase() === currentExtension.toLowerCase();
                });
            }
        };
        ViewerComponent.prototype.onSubmitFile = function (newImageBlob) {
            var _q;
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
            if (((_b = (_a = this === null || this === void 0 ? void 0 : this.nodeEntry) === null || _a === void 0 ? void 0 : _a.entry) === null || _b === void 0 ? void 0 : _b.id) && !this.readOnly) {
                var newImageFile = new File([newImageBlob], (_d = (_c = this === null || this === void 0 ? void 0 : this.nodeEntry) === null || _c === void 0 ? void 0 : _c.entry) === null || _d === void 0 ? void 0 : _d.name, { type: (_g = (_f = (_e = this === null || this === void 0 ? void 0 : this.nodeEntry) === null || _e === void 0 ? void 0 : _e.entry) === null || _f === void 0 ? void 0 : _f.content) === null || _g === void 0 ? void 0 : _g.mimeType });
                var newFile = new FileModel(newImageFile, {
                    majorVersion: false,
                    newVersion: true,
                    parentId: (_j = (_h = this === null || this === void 0 ? void 0 : this.nodeEntry) === null || _h === void 0 ? void 0 : _h.entry) === null || _j === void 0 ? void 0 : _j.parentId,
                    nodeType: (_m = (_l = (_k = this === null || this === void 0 ? void 0 : this.nodeEntry) === null || _k === void 0 ? void 0 : _k.entry) === null || _l === void 0 ? void 0 : _l.content) === null || _m === void 0 ? void 0 : _m.mimeType
                }, (_p = (_o = this === null || this === void 0 ? void 0 : this.nodeEntry) === null || _o === void 0 ? void 0 : _o.entry) === null || _p === void 0 ? void 0 : _p.id);
                (_q = this.uploadService).addToQueue.apply(_q, __spread([newFile]));
                this.uploadService.uploadFilesInTheQueue();
            }
        };
        ViewerComponent.prototype.onUnsupportedFile = function () {
            this.viewerType = 'unknown';
        };
        ViewerComponent.prototype.closeOverlayManager = function () {
            var _this = this;
            this.dialog.afterOpened.pipe(operators.skipWhile(function () { return !_this.overlayMode; }), operators.takeUntil(this.onDestroy$)).subscribe(function () { return _this.shouldCloseViewer = false; });
            this.dialog.afterAllClosed.pipe(operators.skipWhile(function () { return !_this.overlayMode; }), operators.takeUntil(this.onDestroy$)).subscribe(function () { return _this.shouldCloseViewer = true; });
            this.keyDown$.pipe(operators.skipWhile(function () { return !_this.overlayMode; }), operators.filter(function (e) { return e.keyCode === 27; }), operators.takeUntil(this.onDestroy$)).subscribe(function (event) {
                event.preventDefault();
                if (_this.shouldCloseViewer) {
                    _this.close();
                }
            });
        };
        ViewerComponent.prototype.generateCacheBusterNumber = function () {
            this.cacheBusterNumber = Date.now();
        };
        return ViewerComponent;
    }());
    ViewerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-viewer',
                    template: "<div *ngIf=\"showViewer\"\n     class=\"adf-viewer-container\"\n     [class.adf-viewer-overlay-container]=\"overlayMode\"\n     [class.adf-viewer-inline-container]=\"!overlayMode\">\n\n    <div class=\"adf-viewer-content\"\n         fxLayout=\"column\"\n         [cdkTrapFocus]=\"overlayMode\"\n         cdkTrapFocusAutoCapture>\n        <ng-content select=\"adf-viewer-toolbar\"></ng-content>\n        <ng-container *ngIf=\"showToolbar && !toolbar\">\n            <adf-toolbar id=\"adf-viewer-toolbar\" class=\"adf-viewer-toolbar\">\n                <adf-toolbar-title>\n\n                    <ng-container *ngIf=\"allowLeftSidebar\">\n                        <button mat-icon-button\n                                [attr.aria-expanded]=\"showLeftSidebar\"\n                                [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.INFO' | translate\"\n                                title=\"{{ 'ADF_VIEWER.ACTIONS.INFO' | translate }}\"\n                                data-automation-id=\"adf-toolbar-left-sidebar\"\n                                [color]=\"showLeftSidebar ? 'accent' : null\"\n                                (click)=\"toggleLeftSidebar()\">\n                            <mat-icon>info_outline</mat-icon>\n                        </button>\n                    </ng-container>\n\n                    <button *ngIf=\"allowGoBack\"\n                            class=\"adf-viewer-close-button\"\n                            data-automation-id=\"adf-toolbar-back\"\n                            [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.CLOSE' | translate\"\n                            mat-icon-button\n                            title=\"{{ 'ADF_VIEWER.ACTIONS.CLOSE' | translate }}\"\n                            (click)=\"onBackButtonClick()\">\n                        <mat-icon>close</mat-icon>\n                    </button>\n                </adf-toolbar-title>\n\n                <div fxFlex=\"1 1 auto\"\n                     class=\"adf-viewer__file-title\">\n                    <button *ngIf=\"allowNavigate && canNavigateBefore\"\n                            data-automation-id=\"adf-toolbar-pref-file\"\n                            mat-icon-button\n                            [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.PREV_FILE' | translate\"\n                            title=\"{{ 'ADF_VIEWER.ACTIONS.PREV_FILE' | translate }}\"\n                            (click)=\"onNavigateBeforeClick($event)\">\n                        <mat-icon>navigate_before</mat-icon>\n                    </button>\n                    <img class=\"adf-viewer__mimeicon\"\n                         [alt]=\"mimeType\"\n                         [src]=\"mimeType | adfMimeTypeIcon\"\n                         data-automation-id=\"adf-file-thumbnail\">\n                    <span class=\"adf-viewer__display-name\"\n                          id=\"adf-viewer-display-name\">{{ fileTitle }}</span>\n                    <button *ngIf=\"allowNavigate && canNavigateNext\"\n                            data-automation-id=\"adf-toolbar-next-file\"\n                            mat-icon-button\n                            [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.NEXT_FILE' | translate\"\n                            title=\"{{ 'ADF_VIEWER.ACTIONS.NEXT_FILE' | translate }}\"\n                            (click)=\"onNavigateNextClick($event)\">\n                        <mat-icon>navigate_next</mat-icon>\n                    </button>\n                </div>\n\n                <ng-content select=\"adf-viewer-toolbar-actions\"></ng-content>\n\n                <ng-container *ngIf=\"mnuOpenWith\"\n                              data-automation-id='adf-toolbar-custom-btn'>\n                    <button id=\"adf-viewer-openwith\"\n                            mat-button\n                            [matMenuTriggerFor]=\"mnuOpenWith\"\n                            data-automation-id=\"adf-toolbar-open-with\">\n                        <span>{{ 'ADF_VIEWER.ACTIONS.OPEN_WITH' | translate }}</span>\n                        <mat-icon>arrow_drop_down</mat-icon>\n                    </button>\n                    <mat-menu #mnuOpenWith=\"matMenu\"\n                              [overlapTrigger]=\"false\">\n                        <ng-content select=\"adf-viewer-open-with\"></ng-content>\n                    </mat-menu>\n                </ng-container>\n\n                <adf-toolbar-divider></adf-toolbar-divider>\n\n                <button id=\"adf-viewer-download\"\n                        *ngIf=\"allowDownload\"\n                        mat-icon-button\n                        [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.DOWNLOAD' | translate\"\n                        title=\"{{ 'ADF_VIEWER.ACTIONS.DOWNLOAD' | translate }}\"\n                        data-automation-id=\"adf-toolbar-download\"\n                        [adfNodeDownload]=\"nodeEntry\"\n                        [version]=\"versionEntry\">\n                    <mat-icon>file_download</mat-icon>\n                </button>\n\n                <button id=\"adf-viewer-print\"\n                        *ngIf=\"allowPrint\"\n                        mat-icon-button\n                        [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.PRINT' | translate\"\n                        title=\"{{ 'ADF_VIEWER.ACTIONS.PRINT' | translate }}\"\n                        data-automation-id=\"adf-toolbar-print\"\n                        (click)=\"printContent()\">\n                    <mat-icon>print</mat-icon>\n                </button>\n\n                <button id=\"adf-viewer-fullscreen\"\n                        *ngIf=\"viewerType !== 'media' && allowFullScreen\"\n                        mat-icon-button\n                        [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.FULLSCREEN' | translate\"\n                        title=\"{{ 'ADF_VIEWER.ACTIONS.FULLSCREEN' | translate }}\"\n                        data-automation-id=\"adf-toolbar-fullscreen\"\n                        (click)=\"enterFullScreen()\">\n                    <mat-icon>fullscreen</mat-icon>\n                </button>\n\n                <ng-container *ngIf=\"allowRightSidebar\">\n                    <adf-toolbar-divider></adf-toolbar-divider>\n\n                    <button mat-icon-button\n                            [attr.aria-expanded]=\"showRightSidebar\"\n                            [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.INFO' | translate\"\n                            title=\"{{ 'ADF_VIEWER.ACTIONS.INFO' | translate }}\"\n                            data-automation-id=\"adf-toolbar-sidebar\"\n                            [color]=\"showRightSidebar ? 'accent' : null\"\n                            (click)=\"toggleSidebar()\">\n                        <mat-icon>info_outline</mat-icon>\n                    </button>\n\n                </ng-container>\n\n                <ng-container *ngIf=\"mnuMoreActions\">\n                    <button id=\"adf-viewer-moreactions\"\n                            mat-icon-button\n                            [matMenuTriggerFor]=\"mnuMoreActions\"\n                            [attr.aria-label]=\"'ADF_VIEWER.ACTIONS.MORE_ACTIONS' | translate\"\n                            title=\"{{ 'ADF_VIEWER.ACTIONS.MORE_ACTIONS' | translate }}\"\n                            data-automation-id=\"adf-toolbar-more-actions\">\n                        <mat-icon>more_vert</mat-icon>\n                    </button>\n                    <mat-menu #mnuMoreActions=\"matMenu\"\n                              [overlapTrigger]=\"false\">\n                        <ng-content select=\"adf-viewer-more-actions\"></ng-content>\n                    </mat-menu>\n                </ng-container>\n\n            </adf-toolbar>\n        </ng-container>\n\n        <div fxLayout=\"row\"\n             fxFlex=\"1 1 auto\">\n            <ng-container *ngIf=\"allowRightSidebar && showRightSidebar\">\n                <div class=\"adf-viewer__sidebar\"\n                     [ngClass]=\"'adf-viewer__sidebar__right'\"\n                     fxFlexOrder=\"4\"\n                     id=\"adf-right-sidebar\">\n                    <ng-container *ngIf=\"sidebarRightTemplate\">\n                        <ng-container *ngTemplateOutlet=\"sidebarRightTemplate;context:sidebarRightTemplateContext\">\n                        </ng-container>\n                    </ng-container>\n                    <ng-content *ngIf=\"!sidebarRightTemplate\"\n                                select=\"adf-viewer-sidebar\"></ng-content>\n                </div>\n            </ng-container>\n\n            <ng-container *ngIf=\"allowLeftSidebar && showLeftSidebar\">\n                <div class=\"adf-viewer__sidebar\"\n                     [ngClass]=\"'adf-viewer__sidebar__left'\"\n                     fxFlexOrder=\"1\"\n                     id=\"adf-left-sidebar\">\n                    <ng-container *ngIf=\"sidebarLeftTemplate\">\n                        <ng-container *ngTemplateOutlet=\"sidebarLeftTemplate;context:sidebarLeftTemplateContext\">\n                        </ng-container>\n                    </ng-container>\n                    <ng-content *ngIf=\"!sidebarLeftTemplate\"\n                                select=\"adf-viewer-sidebar\"></ng-content>\n                </div>\n            </ng-container>\n\n            <div *ngIf=\"isLoading\"\n                 class=\"adf-viewer-main\"\n                 fxFlexOrder=\"1\"\n                 fxFlex=\"1 1 auto\">\n                <div class=\"adf-viewer-layout-content adf-viewer__fullscreen-container\">\n                    <div class=\"adf-viewer-content-container\">\n                        <ng-container *ngIf=\"isLoading\">\n                            <div class=\"adf-viewer__loading-screen\"\n                                 fxFlex=\"1 1 auto\">\n                                <h2>{{ 'ADF_VIEWER.LOADING' | translate }}</h2>\n                                <div>\n                                    <mat-spinner></mat-spinner>\n                                </div>\n                            </div>\n                        </ng-container>\n\n                    </div>\n                </div>\n            </div>\n\n            <div *ngIf=\"!isLoading\"\n                 class=\"adf-viewer-main\"\n                 fxFlexOrder=\"1\"\n                 fxFlex=\"1 1 auto\">\n                <div class=\"adf-viewer-layout-content adf-viewer__fullscreen-container\">\n                    <div class=\"adf-viewer-content-container\" [ngSwitch]=\"viewerType\">\n                        <ng-container *ngSwitchCase=\"'external'\">\n                            <adf-preview-extension\n                                *ngIf=\"!!externalViewer\"\n                                [id]=\"externalViewer.component\"\n                                [node]=\"nodeEntry?.entry\"\n                                [url]=\"urlFileContent\"\n                                [extension]=\"externalViewer.fileExtension\"\n                                [attr.data-automation-id]=\"externalViewer.component\">\n                            </adf-preview-extension>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase=\"'pdf'\">\n                            <adf-pdf-viewer (close)=\"onBackButtonClick()\"\n                                            [thumbnailsTemplate]=\"thumbnailsTemplate\"\n                                            [allowThumbnails]=\"allowThumbnails\"\n                                            [blobFile]=\"blobFile\"\n                                            [urlFile]=\"urlFileContent\"\n                                            [nameFile]=\"displayName\"\n                                            [cacheType]=\"cacheTypeForContent\"\n                                            (error)=\"onUnsupportedFile()\"></adf-pdf-viewer>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase=\"'image'\">\n                            <adf-img-viewer [urlFile]=\"urlFileContent\"\n                                            [nameFile]=\"displayName\"\n                                            [blobFile]=\"blobFile\"\n                                            [readOnly]=\"readOnly\"\n                                            (error)=\"onUnsupportedFile()\"\n                                            (submit)=\"onSubmitFile($event)\"\n                            ></adf-img-viewer>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase=\"'media'\">\n                            <adf-media-player id=\"adf-mdedia-player\"\n                                              [urlFile]=\"urlFileContent\"\n                                              [nodeId]=\"nodeEntry?.entry?.id\"\n                                              [mimeType]=\"mimeType\"\n                                              [blobFile]=\"blobFile\"\n                                              [nameFile]=\"displayName\"\n                                              (error)=\"onUnsupportedFile()\"></adf-media-player>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase=\"'text'\">\n                            <adf-txt-viewer [urlFile]=\"urlFileContent\"\n                                            [blobFile]=\"blobFile\"></adf-txt-viewer>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase=\"'in_creation'\">\n                            <div class=\"adf-viewer__loading-screen\"\n                                 fxFlex=\"1 1 auto\">\n                                <h2>{{ 'ADF_VIEWER.LOADING' | translate }}</h2>\n                                <div>\n                                    <mat-spinner></mat-spinner>\n                                </div>\n                            </div>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase=\"'custom'\">\n                            <ng-container *ngFor=\"let ext of viewerExtensions\">\n                                <adf-preview-extension *ngIf=\"checkExtensions(ext.fileExtension)\"\n                                                       [id]=\"ext.component\"\n                                                       [node]=\"nodeEntry.entry\"\n                                                       [url]=\"urlFileContent\"\n                                                       [extension]=\"extension\"\n                                                       [attr.data-automation-id]=\"ext.component\">\n                                </adf-preview-extension>\n                            </ng-container>\n\n                            <span class=\"adf-viewer-custom-content\"\n                                  *ngFor=\"let extensionTemplate of extensionTemplates\">\n                                <ng-template *ngIf=\"extensionTemplate.isVisible\"\n                                             [ngTemplateOutlet]=\"extensionTemplate.template\"\n                                             [ngTemplateOutletContext]=\"{ urlFileContent: urlFileContent, extension:extension }\">\n                                </ng-template>\n                            </span>\n                        </ng-container>\n\n                        <ng-container *ngSwitchDefault>\n                            <adf-viewer-unknown-format></adf-viewer-unknown-format>\n                        </ng-container>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n",
                    host: { 'class': 'adf-viewer' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-full-screen,.adf-viewer-container .adf-viewer-content,.adf-viewer-container .adf-viewer-layout,.adf-viewer-container .adf-viewer-layout-content,.adf-viewer-inline-container{background-color:var(--theme-card-bg-color);height:100%;width:100%}.adf-viewer{height:100%;position:absolute;width:100%}.adf-viewer .mat-toolbar{color:var(--theme-text-color)}.adf-viewer .mat-toolbar .adf-toolbar-title{width:auto}.adf-viewer-main{width:0}.adf-viewer__mimeicon{height:18px;vertical-align:middle;width:18px}.adf-viewer-toolbar .mat-toolbar{background-color:var(--theme-card-bg-bold-color)}.adf-viewer__file-title{text-align:center}.adf-viewer__display-name{color:var(--theme-text-fg-color);display:inline-block;font-size:16px;font-stretch:normal;font-style:normal;font-weight:400;letter-spacing:-.4px;line-height:1.5;max-width:400px;opacity:.87;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.adf-viewer-container .adf-viewer-layout-content{background-color:var(--theme-background-color);display:flex;flex:1;flex-direction:row;flex-wrap:wrap;overflow-x:hidden;overflow-y:hidden;position:relative;z-index:1}.adf-viewer-container .adf-viewer-layout-content>div{align-items:stretch;display:flex;flex-flow:row wrap;height:100%;margin:0 auto}.adf-viewer-container .adf-viewer-layout{display:flex;flex-direction:row;overflow-x:hidden;overflow-y:auto;position:relative}.adf-viewer-container .adf-viewer-content{flex:1}.adf-viewer-container .adf-viewer-content>div{height:0}.adf-viewer-overlay-container .adf-viewer-content{left:0;position:fixed;top:0;z-index:1000}.adf-viewer-content-container{display:flex;justify-content:center}.adf-viewer-custom-content{width:100vw}.adf-viewer-unknown-content,.adf-viewer__loading-screen{align-items:center;display:flex}.adf-viewer__loading-screen{flex-direction:column;height:85vh;justify-content:center}.adf-viewer__loading-screen .mat-spinner{margin:0 auto}.adf-viewer__sidebar{background-color:var(--theme-background-color);box-shadow:0 2px 4px 0 var(--theme-text-fg-shadow-color);display:block;overflow:auto;padding:0;width:350px}.adf-viewer__sidebar__right{border-left:1px solid var(--theme-border-color)}.adf-viewer__sidebar__left{border-right:1px solid var(--theme-border-color)}.adf-viewer__thumbnails{background:#e6e6e6;display:flex;flex-direction:column;padding:0;width:180px}.adf-viewer__thumbnails .adf-info-drawer-layout{background:#e6e6e6;display:flex;flex:1;flex-direction:column}.adf-viewer__thumbnails .adf-info-drawer-layout-header{margin-bottom:0}.adf-viewer__thumbnails .adf-info-drawer-layout-content{height:100%;overflow:hidden;padding:0}.adf-viewer__thumbnails .adf-info-drawer-content{height:100%}.adf-viewer__thumbnails .adf-info-drawer-layout-content>:last-child{height:100%;overflow:hidden}.adf-viewer__toolbar-page-scale{border:1px solid var(--theme-border-color);cursor:default;font-size:14px;height:24px;line-height:24px;margin-left:4px;margin-right:4px;text-align:center;width:79px}"]
                },] }
    ];
    ViewerComponent.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: ViewUtilService },
        { type: LogService },
        { type: i2.AppExtensionService },
        { type: ContentService },
        { type: UploadService },
        { type: i0.ElementRef },
        { type: i4.MatDialog },
        { type: i0.ChangeDetectorRef }
    ]; };
    ViewerComponent.propDecorators = {
        toolbar: [{ type: i0.ContentChild, args: [ViewerToolbarComponent,] }],
        sidebar: [{ type: i0.ContentChild, args: [ViewerSidebarComponent,] }],
        mnuOpenWith: [{ type: i0.ContentChild, args: [ViewerOpenWithComponent,] }],
        mnuMoreActions: [{ type: i0.ContentChild, args: [ViewerMoreActionsComponent,] }],
        urlFile: [{ type: i0.Input }],
        urlFileViewer: [{ type: i0.Input }],
        blobFile: [{ type: i0.Input }],
        nodeId: [{ type: i0.Input }],
        versionId: [{ type: i0.Input }],
        sharedLinkId: [{ type: i0.Input }],
        overlayMode: [{ type: i0.Input }],
        showViewer: [{ type: i0.Input }],
        showToolbar: [{ type: i0.Input }],
        displayName: [{ type: i0.Input }],
        allowGoBack: [{ type: i0.Input }],
        allowDownload: [{ type: i0.Input }],
        allowPrint: [{ type: i0.Input }],
        allowFullScreen: [{ type: i0.Input }],
        allowNavigate: [{ type: i0.Input }],
        canNavigateBefore: [{ type: i0.Input }],
        canNavigateNext: [{ type: i0.Input }],
        allowLeftSidebar: [{ type: i0.Input }],
        allowRightSidebar: [{ type: i0.Input }],
        allowThumbnails: [{ type: i0.Input }],
        showRightSidebar: [{ type: i0.Input }],
        showLeftSidebar: [{ type: i0.Input }],
        sidebarRightTemplate: [{ type: i0.Input }],
        sidebarLeftTemplate: [{ type: i0.Input }],
        thumbnailsTemplate: [{ type: i0.Input }],
        mimeType: [{ type: i0.Input }],
        fileName: [{ type: i0.Input }],
        maxRetries: [{ type: i0.Input }],
        goBack: [{ type: i0.Output }],
        print: [{ type: i0.Output }],
        showViewerChange: [{ type: i0.Output }],
        extensionChange: [{ type: i0.Output }],
        navigateBefore: [{ type: i0.Output }],
        navigateNext: [{ type: i0.Output }],
        invalidSharedLink: [{ type: i0.Output }],
        handleKeyboardEvent: [{ type: i0.HostListener, args: ['document:keyup', ['$event'],] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ImgViewerComponent = /** @class */ (function () {
        function ImgViewerComponent(appConfigService, contentService) {
            this.appConfigService = appConfigService;
            this.contentService = contentService;
            this.showToolbar = true;
            this.readOnly = true;
            this.error = new i0.EventEmitter();
            this.submit = new i0.EventEmitter();
            this.scale = 1.0;
            this.isEditing = false;
            this.initializeScaling();
        }
        Object.defineProperty(ImgViewerComponent.prototype, "currentScaleText", {
            get: function () {
                return Math.round(this.scale * 100) + '%';
            },
            enumerable: false,
            configurable: true
        });
        ImgViewerComponent.prototype.initializeScaling = function () {
            var scaling = this.appConfigService.get('adf-viewer.image-viewer-scaling', undefined) / 100;
            if (scaling) {
                this.scale = scaling;
            }
        };
        ImgViewerComponent.prototype.ngAfterViewInit = function () {
            var _this = this;
            this.cropper = new Cropper(this.imageElement.nativeElement, {
                autoCrop: false,
                dragMode: 'move',
                background: false,
                scalable: true,
                zoomOnWheel: false,
                toggleDragModeOnDblclick: false,
                viewMode: 1,
                checkCrossOrigin: false,
                ready: function () {
                    _this.updateCanvasContainer();
                }
            });
        };
        ImgViewerComponent.prototype.ngOnDestroy = function () {
            this.cropper.destroy();
        };
        ImgViewerComponent.prototype.onKeyDown = function (event) {
            switch (event.key) {
                case 'ArrowLeft':
                    event.preventDefault();
                    this.cropper.move(-3, 0);
                    break;
                case 'ArrowUp':
                    event.preventDefault();
                    this.cropper.move(0, -3);
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    this.cropper.move(3, 0);
                    break;
                case 'ArrowDown':
                    event.preventDefault();
                    this.cropper.move(0, 3);
                    break;
                case 'i':
                    this.zoomIn();
                    break;
                case 'o':
                    this.zoomOut();
                    break;
                case 'r':
                    this.rotateImage();
                    break;
                default:
            }
        };
        ImgViewerComponent.prototype.ngOnChanges = function (changes) {
            var blobFile = changes['blobFile'];
            if (blobFile && blobFile.currentValue) {
                this.urlFile = this.contentService.createTrustedUrl(this.blobFile);
                return;
            }
            if (!this.urlFile && !this.blobFile) {
                throw new Error('Attribute urlFile or blobFile is required');
            }
        };
        ImgViewerComponent.prototype.zoomIn = function () {
            this.cropper.zoom(0.2);
            this.scale = +((this.scale + 0.2).toFixed(1));
        };
        ImgViewerComponent.prototype.zoomOut = function () {
            if (this.scale > 0.2) {
                this.cropper.zoom(-0.2);
                this.scale = +((this.scale - 0.2).toFixed(1));
            }
        };
        ImgViewerComponent.prototype.rotateImage = function () {
            this.isEditing = true;
            this.cropper.rotate(-90);
        };
        ImgViewerComponent.prototype.cropImage = function () {
            this.isEditing = true;
            this.cropper.setDragMode('crop');
            this.cropper.crop();
        };
        ImgViewerComponent.prototype.save = function () {
            var _this = this;
            this.isEditing = false;
            this.cropper.setDragMode('move');
            this.cropper.getCroppedCanvas().toBlob(function (blob) {
                _this.submit.emit(blob);
                _this.cropper.replace(_this.cropper.getCroppedCanvas().toDataURL());
                _this.cropper.clear();
            });
        };
        ImgViewerComponent.prototype.reset = function () {
            this.isEditing = false;
            this.cropper.clear();
            this.cropper.reset();
            this.cropper.setDragMode('move');
            this.scale = 1.0;
            this.updateCanvasContainer();
        };
        ImgViewerComponent.prototype.updateCanvasContainer = function () {
            if (this.imageElement.nativeElement.width < this.cropper.getContainerData().width) {
                var width = this.imageElement.nativeElement.width;
                var height = this.imageElement.nativeElement.height;
                var top = (this.cropper.getContainerData().height - this.imageElement.nativeElement.height) / 2;
                var left = (this.cropper.getContainerData().width - this.imageElement.nativeElement.width) / 2;
                this.cropper.setCanvasData({
                    width: width,
                    height: height,
                    top: top,
                    left: left
                });
            }
        };
        ImgViewerComponent.prototype.onImageError = function () {
            this.error.emit();
        };
        return ImgViewerComponent;
    }());
    ImgViewerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-img-viewer',
                    template: "<div id=\"adf-image-container\" (keydown)=\"onKeyDown($event)\" class=\"adf-image-container\" tabindex=\"0\" role=\"img\" [attr.aria-label]=\"nameFile\" data-automation-id=\"adf-image-container\">\n    <img #image id=\"viewer-image\" [src]=\"urlFile\" [alt]=\"nameFile\" (error)=\"onImageError()\" />\n</div>\n\n<div class=\"adf-image-viewer__toolbar\" *ngIf=\"showToolbar\">\n    <adf-toolbar class=\"adf-main-toolbar\">\n        <button\n            id=\"viewer-zoom-out-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.ZOOM_OUT' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.ZOOM_OUT' | translate }}\"\n            mat-icon-button\n            (click)=\"zoomOut()\">\n            <mat-icon>zoom_out</mat-icon>\n        </button>\n\n        <div class=\"adf-viewer__toolbar-page-scale\" data-automation-id=\"adf-page-scale\">\n            {{ currentScaleText }}\n        </div>\n\n        <button\n            id=\"viewer-zoom-in-button\"\n            mat-icon-button\n            title=\"{{ 'ADF_VIEWER.ARIA.ZOOM_IN' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.ZOOM_IN' | translate }}\"\n            (click)=\"zoomIn()\">\n            <mat-icon>zoom_in</mat-icon>\n        </button>\n\n        <button\n            *ngIf=\"!readOnly\" id=\"viewer-rotate-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.ROTATE' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.ROTATE' | translate }}\"\n            mat-icon-button\n            (click)=\"rotateImage()\">\n            <mat-icon>rotate_left</mat-icon>\n        </button>\n        <button\n            *ngIf=\"!readOnly\" id=\"viewer-crop-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.CROP' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.CROP' | translate }}\"\n            mat-icon-button\n            (click)=\"cropImage()\">\n            <mat-icon>crop</mat-icon>\n        </button>\n\n        <button\n            id=\"viewer-reset-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.RESET' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.RESET' | translate }}\"\n            mat-icon-button\n            (click)=\"reset()\">\n            <mat-icon>zoom_out_map</mat-icon>\n        </button>\n\n    </adf-toolbar>\n\n    <adf-toolbar class=\"adf-secondary-toolbar\" *ngIf=\"!readOnly && isEditing\">\n        <button\n            id=\"viewer-cancel-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.CANCEL' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.CANCEL' | translate }}\"\n            mat-icon-button\n            (click)=\"reset()\">\n            <mat-icon>close</mat-icon>\n        </button>\n\n        <button\n            id=\"viewer-save-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.SAVE' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.SAVE' | translate }}\"\n            mat-icon-button\n            (click)=\"save()\">\n            <mat-icon>check</mat-icon>\n        </button>\n\n    </adf-toolbar>\n</div>\n",
                    host: { 'class': 'adf-image-viewer' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-image-viewer{width:100%}.adf-image-viewer .adf-image-container{align-items:center;display:flex;height:90vh;justify-content:center}.adf-image-viewer .adf-image-container:focus{outline:1px solid var(--theme-accent-color-a200);outline-offset:-1px}.adf-image-viewer .adf-image-container img{max-height:100%;max-width:100%}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.adf-image-viewer .adf-image-container img{height:100%}}.adf-image-viewer__toolbar{bottom:5px;left:50%;position:absolute;transform:translateX(-50%)}.adf-image-viewer__toolbar .adf-toolbar .mat-toolbar{background-color:var(--theme-card-bg-color);border-radius:2px;border-width:0;box-shadow:0 2px 2px 0 rgba(0,0,0,.24),0 0 2px 0 rgba(0,0,0,.12);max-height:48px}.adf-image-viewer__toolbar .adf-main-toolbar{display:inline-block}.adf-image-viewer__toolbar .adf-secondary-toolbar{display:inline-block;margin-left:10px}"]
                },] }
    ];
    ImgViewerComponent.ctorParameters = function () { return [
        { type: AppConfigService },
        { type: ContentService }
    ]; };
    ImgViewerComponent.propDecorators = {
        showToolbar: [{ type: i0.Input }],
        readOnly: [{ type: i0.Input }],
        urlFile: [{ type: i0.Input }],
        blobFile: [{ type: i0.Input }],
        nameFile: [{ type: i0.Input }],
        error: [{ type: i0.Output }],
        submit: [{ type: i0.Output }],
        imageElement: [{ type: i0.ViewChild, args: ['image', { static: false },] }],
        onKeyDown: [{ type: i0.HostListener, args: ['document:keydown', ['$event'],] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var MediaPlayerComponent = /** @class */ (function () {
        function MediaPlayerComponent(contentService, viewUtils) {
            this.contentService = contentService;
            this.viewUtils = viewUtils;
            this.tracks = [];
            this.error = new i0.EventEmitter();
        }
        MediaPlayerComponent.prototype.ngOnChanges = function (changes) {
            var _this = this;
            var blobFile = changes['blobFile'];
            var nodeId = changes['nodeId'];
            if (blobFile && blobFile.currentValue) {
                this.urlFile = this.contentService.createTrustedUrl(this.blobFile);
                return;
            }
            if (nodeId && nodeId.currentValue) {
                this.viewUtils.generateMediaTracks(this.nodeId).then(function (tracks) { return _this.tracks = tracks; });
            }
            if (!this.urlFile && !this.blobFile) {
                throw new Error('Attribute urlFile or blobFile is required');
            }
        };
        MediaPlayerComponent.prototype.onMediaPlayerError = function () {
            this.error.emit();
        };
        return MediaPlayerComponent;
    }());
    MediaPlayerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-media-player',
                    template: "<video controls [ngClass]=\"{'adf-audio-file': mimeType && mimeType.startsWith('audio')}\">\n    <source [src]=\"urlFile\" [type]=\"mimeType\" (error)=\"onMediaPlayerError()\"/>\n    <track *ngFor=\"let track of tracks\" [kind]=\"track.kind\" [label]=\"track.label\" [srclang]=\"track.srclang\" [src]=\"track.src\"/>\n</video>\n",
                    host: { 'class': 'adf-media-player' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-media-player{display:flex}.adf-media-player video{display:flex;flex:1;max-height:90vh;max-width:100%}.adf-media-player video.adf-audio-file::-webkit-media-text-track-container{transform:translateY(-50%)!important}"]
                },] }
    ];
    MediaPlayerComponent.ctorParameters = function () { return [
        { type: ContentService },
        { type: ViewUtilService }
    ]; };
    MediaPlayerComponent.propDecorators = {
        urlFile: [{ type: i0.Input }],
        blobFile: [{ type: i0.Input }],
        mimeType: [{ type: i0.Input }],
        nameFile: [{ type: i0.Input }],
        nodeId: [{ type: i0.Input }],
        tracks: [{ type: i0.Input }],
        error: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PdfPasswordDialogComponent = /** @class */ (function () {
        function PdfPasswordDialogComponent(dialogRef, data) {
            this.dialogRef = dialogRef;
            this.data = data;
        }
        PdfPasswordDialogComponent.prototype.ngOnInit = function () {
            this.passwordFormControl = new forms.FormControl('', [forms.Validators.required]);
        };
        PdfPasswordDialogComponent.prototype.isError = function () {
            return this.data.reason === pdfjsLib.PasswordResponses.INCORRECT_PASSWORD;
        };
        PdfPasswordDialogComponent.prototype.isValid = function () {
            return !this.passwordFormControl.hasError('required');
        };
        PdfPasswordDialogComponent.prototype.submit = function () {
            this.dialogRef.close(this.passwordFormControl.value);
        };
        return PdfPasswordDialogComponent;
    }());
    PdfPasswordDialogComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-pdf-viewer-password-dialog',
                    template: "<div mat-dialog-title>\n    <mat-icon>lock</mat-icon>\n</div>\n\n<mat-dialog-content>\n    <form (submit)=\"submit()\">\n        <mat-form-field class=\"adf-full-width\">\n            <input matInput\n                   data-automation-id='adf-password-dialog-input'\n                   type=\"password\"\n                   placeholder=\"{{ 'ADF_VIEWER.PDF_DIALOG.PLACEHOLDER' | translate }}\"\n                   [formControl]=\"passwordFormControl\" />\n        </mat-form-field>\n\n        <mat-error *ngIf=\"isError()\" data-automation-id='adf-password-dialog-error'>{{ 'ADF_VIEWER.PDF_DIALOG.ERROR' | translate }}</mat-error>\n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions class=\"adf-dialog-buttons\">\n    <span class=\"adf-fill-remaining-space\"></span>\n\n    <button mat-button mat-dialog-close data-automation-id='adf-password-dialog-close'>{{ 'ADF_VIEWER.PDF_DIALOG.CLOSE' | translate }}</button>\n\n    <button mat-button\n            data-automation-id='adf-password-dialog-submit'\n            class=\"adf-dialog-action-button\"\n            [disabled]=\"!isValid()\"\n            (click)=\"submit()\">\n        {{ 'ADF_VIEWER.PDF_DIALOG.SUBMIT' | translate }}\n    </button>\n</mat-dialog-actions>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-fill-remaining-space{flex:1 1 auto}.adf-full-width{width:100%}.adf-dialog-buttons button{text-transform:uppercase}.adf-dialog-action-button:enabled{color:var(--theme-primary-color)}"]
                },] }
    ];
    PdfPasswordDialogComponent.ctorParameters = function () { return [
        { type: i4.MatDialogRef },
        { type: undefined, decorators: [{ type: i0.Inject, args: [i4.MAT_DIALOG_DATA,] }] }
    ]; };

    var RenderingQueueServices = /** @class */ (function () {
        function RenderingQueueServices() {
            this.renderingStates = {
                INITIAL: 0,
                RUNNING: 1,
                PAUSED: 2,
                FINISHED: 3
            };
            this.CLEANUP_TIMEOUT = 30000;
            this.pdfViewer = null;
            this.pdfThumbnailViewer = null;
            this.onIdle = null;
            this.highestPriorityPage = null;
            this.idleTimeout = null;
            this.printing = false;
            this.isThumbnailViewEnabled = false;
        }
        RenderingQueueServices.prototype.setViewer = function (pdfViewer) {
            this.pdfViewer = pdfViewer;
        };
        RenderingQueueServices.prototype.setThumbnailViewer = function (pdfThumbnailViewer) {
            this.pdfThumbnailViewer = pdfThumbnailViewer;
        };
        RenderingQueueServices.prototype.isHighestPriority = function (view) {
            return this.highestPriorityPage === view.renderingId;
        };
        RenderingQueueServices.prototype.renderHighestPriority = function (currentlyVisiblePages) {
            if (this.idleTimeout) {
                clearTimeout(this.idleTimeout);
                this.idleTimeout = null;
            }
            if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {
                return;
            }
            if (this.pdfThumbnailViewer && this.isThumbnailViewEnabled) {
                if (this.pdfThumbnailViewer.forceRendering()) {
                    return;
                }
            }
            if (this.printing) {
                return;
            }
            if (this.onIdle) {
                this.idleTimeout = setTimeout(this.onIdle.bind(this), this.CLEANUP_TIMEOUT);
            }
        };
        RenderingQueueServices.prototype.getHighestPriority = function (visible, views, scrolledDown) {
            var visibleViews = visible.views;
            var numVisible = visibleViews.length;
            if (numVisible === 0) {
                return false;
            }
            for (var i = 0; i < numVisible; ++i) {
                var view = visibleViews[i].view;
                if (!this.isViewFinished(view)) {
                    return view;
                }
            }
            if (scrolledDown) {
                var nextPageIndex = visible.last.id;
                if (views[nextPageIndex] && !this.isViewFinished(views[nextPageIndex])) {
                    return views[nextPageIndex];
                }
            }
            else {
                var previousPageIndex = visible.first.id - 2;
                if (views[previousPageIndex] && !this.isViewFinished(views[previousPageIndex])) {
                    return views[previousPageIndex];
                }
            }
            return null;
        };
        RenderingQueueServices.prototype.isViewFinished = function (view) {
            return view.renderingState === this.renderingStates.FINISHED;
        };
        RenderingQueueServices.prototype.renderView = function (view) {
            var state = view.renderingState;
            switch (state) {
                case this.renderingStates.FINISHED:
                    return false;
                case this.renderingStates.PAUSED:
                    this.highestPriorityPage = view.renderingId;
                    view.resume();
                    break;
                case this.renderingStates.RUNNING:
                    this.highestPriorityPage = view.renderingId;
                    break;
                case this.renderingStates.INITIAL:
                    this.highestPriorityPage = view.renderingId;
                    var continueRendering = function () {
                        this.renderHighestPriority();
                    }.bind(this);
                    view.draw().then(continueRendering, continueRendering);
                    break;
                default:
                    break;
            }
            return true;
        };
        return RenderingQueueServices;
    }());
    RenderingQueueServices.decorators = [
        { type: i0.Injectable }
    ];

    var PdfViewerComponent = /** @class */ (function () {
        function PdfViewerComponent(dialog, renderingQueueServices, logService, appConfigService) {
            var _this = this;
            this.dialog = dialog;
            this.renderingQueueServices = renderingQueueServices;
            this.logService = logService;
            this.appConfigService = appConfigService;
            this.showToolbar = true;
            this.allowThumbnails = false;
            this.thumbnailsTemplate = null;
            this.cacheType = '';
            this.rendered = new i0.EventEmitter();
            this.error = new i0.EventEmitter();
            this.close = new i0.EventEmitter();
            this.currentScaleMode = 'auto';
            this.currentScale = 1;
            this.MAX_AUTO_SCALE = 1.25;
            this.DEFAULT_SCALE_DELTA = 1.1;
            this.MIN_SCALE = 0.25;
            this.MAX_SCALE = 10.0;
            this.isPanelDisabled = true;
            this.showThumbnails = false;
            this.pdfThumbnailsContext = { viewer: null };
            this.eventBus = new pdfjsViewer.EventBus();
            this.pdfjsDefaultOptions = {
                disableAutoFetch: true,
                disableStream: true
            };
            this.pdfjsWorkerDestroy$ = new rxjs.Subject();
            this.onDestroy$ = new rxjs.Subject();
            this.onPageChange = this.onPageChange.bind(this);
            this.onPagesLoaded = this.onPagesLoaded.bind(this);
            this.onPageRendered = this.onPageRendered.bind(this);
            this.randomPdfId = this.generateUuid();
            this.currentScale = this.getUserScaling();
            this.pdfjsWorkerDestroy$.pipe(operators.catchError(function () { return null; }), operators.delay(700)).subscribe(function () { return _this.destroyPdJsWorker(); });
        }
        Object.defineProperty(PdfViewerComponent.prototype, "currentScaleText", {
            get: function () {
                return Math.round(this.currentScale * 100) + '%';
            },
            enumerable: false,
            configurable: true
        });
        PdfViewerComponent.prototype.getUserScaling = function () {
            var scaleConfig = this.appConfigService.get('adf-viewer.pdf-viewer-scaling', undefined) / 100;
            if (scaleConfig) {
                return this.checkLimits(scaleConfig);
            }
            else {
                return 1;
            }
        };
        PdfViewerComponent.prototype.checkLimits = function (scaleConfig) {
            if (scaleConfig > this.MAX_SCALE) {
                return this.MAX_SCALE;
            }
            else if (scaleConfig < this.MIN_SCALE) {
                return this.MIN_SCALE;
            }
            else {
                return scaleConfig;
            }
        };
        PdfViewerComponent.prototype.ngOnChanges = function (changes) {
            var _this = this;
            var blobFile = changes['blobFile'];
            if (blobFile && blobFile.currentValue) {
                var reader_1 = new FileReader();
                reader_1.onload = function () { return __awaiter(_this, void 0, void 0, function () {
                    var pdfSource;
                    return __generator(this, function (_a) {
                        pdfSource = Object.assign(Object.assign({}, this.pdfjsDefaultOptions), { data: reader_1.result, withCredentials: this.appConfigService.get('auth.withCredentials', undefined) });
                        this.executePdf(pdfSource);
                        return [2 /*return*/];
                    });
                }); };
                reader_1.readAsArrayBuffer(blobFile.currentValue);
            }
            var urlFile = changes['urlFile'];
            if (urlFile && urlFile.currentValue) {
                var pdfSource = Object.assign(Object.assign({}, this.pdfjsDefaultOptions), { url: urlFile.currentValue, withCredentials: this.appConfigService.get('auth.withCredentials', undefined) });
                if (this.cacheType) {
                    pdfSource.httpHeaders = {
                        'Cache-Control': this.cacheType
                    };
                }
                this.executePdf(pdfSource);
            }
            if (!this.urlFile && !this.blobFile) {
                throw new Error('Attribute urlFile or blobFile is required');
            }
        };
        PdfViewerComponent.prototype.executePdf = function (pdfOptions) {
            var _this = this;
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'pdf.worker.min.js';
            this.loadingTask = pdfjsLib.getDocument(pdfOptions);
            this.loadingTask.onPassword = function (callback, reason) {
                _this.onPdfPassword(callback, reason);
            };
            this.loadingTask.onProgress = function (progressData) {
                var level = progressData.loaded / progressData.total;
                _this.loadingPercent = Math.round(level * 100);
            };
            this.loadingTask.promise.then(function (pdfDocument) {
                _this.totalPages = pdfDocument.numPages;
                _this.page = 1;
                _this.displayPage = 1;
                _this.initPDFViewer(pdfDocument);
                return pdfDocument.getPage(1);
            })
                .then(function () { return _this.scalePage('auto'); })
                .catch(function () { return _this.error.emit(); });
        };
        PdfViewerComponent.prototype.initPDFViewer = function (pdfDocument) {
            var viewer = this.getViewer();
            var container = this.getDocumentContainer();
            if (viewer && container) {
                this.pdfViewer = new pdfjsViewer.PDFViewer({
                    container: container,
                    viewer: viewer,
                    renderingQueue: this.renderingQueueServices,
                    eventBus: this.eventBus
                });
                this.eventBus.on('pagechanging', this.onPageChange);
                this.eventBus.on('pagesloaded', this.onPagesLoaded);
                this.eventBus.on('textlayerrendered', this.onPageRendered);
                this.renderingQueueServices.setViewer(this.pdfViewer);
                this.pdfViewer.setDocument(pdfDocument);
                this.pdfThumbnailsContext.viewer = this.pdfViewer;
            }
        };
        PdfViewerComponent.prototype.ngOnDestroy = function () {
            if (this.pdfViewer) {
                this.eventBus.off('pagechanging');
                this.eventBus.off('pagesloaded');
                this.eventBus.off('textlayerrendered');
            }
            if (this.loadingTask) {
                this.pdfjsWorkerDestroy$.next();
            }
            this.onDestroy$.next();
            this.pdfjsWorkerDestroy$.complete();
            this.onDestroy$.complete();
        };
        PdfViewerComponent.prototype.destroyPdJsWorker = function () {
            this.loadingTask.destroy();
            this.loadingTask = null;
        };
        PdfViewerComponent.prototype.toggleThumbnails = function () {
            this.showThumbnails = !this.showThumbnails;
        };
        PdfViewerComponent.prototype.scalePage = function (scaleMode) {
            this.currentScaleMode = scaleMode;
            var viewerContainer = document.getElementById(this.randomPdfId + "-viewer-main-container");
            var documentContainer = this.getDocumentContainer();
            if (this.pdfViewer && documentContainer) {
                var widthContainer = void 0;
                var heightContainer = void 0;
                if (viewerContainer && viewerContainer.clientWidth <= documentContainer.clientWidth) {
                    widthContainer = viewerContainer.clientWidth;
                    heightContainer = viewerContainer.clientHeight;
                }
                else {
                    widthContainer = documentContainer.clientWidth;
                    heightContainer = documentContainer.clientHeight;
                }
                var currentPage = this.pdfViewer._pages[this.pdfViewer._currentPageNumber - 1];
                var padding = 20;
                var pageWidthScale = (widthContainer - padding) / currentPage.width * currentPage.scale;
                var pageHeightScale = (heightContainer - padding) / currentPage.width * currentPage.scale;
                var scale = this.getUserScaling();
                if (!scale) {
                    switch (this.currentScaleMode) {
                        case 'page-actual':
                            scale = 1;
                            break;
                        case 'page-width':
                            scale = pageWidthScale;
                            break;
                        case 'page-height':
                            scale = pageHeightScale;
                            break;
                        case 'page-fit':
                            scale = Math.min(pageWidthScale, pageHeightScale);
                            break;
                        case 'auto':
                            var horizontalScale = void 0;
                            if (this.isLandscape) {
                                horizontalScale = Math.min(pageHeightScale, pageWidthScale);
                            }
                            else {
                                horizontalScale = pageWidthScale;
                            }
                            horizontalScale = Math.round(horizontalScale);
                            scale = Math.min(this.MAX_AUTO_SCALE, horizontalScale);
                            scale = this.checkPageFitInContainer(scale);
                            break;
                        default:
                            this.logService.error('pdfViewSetScale: \'' + scaleMode + '\' is an unknown zoom value.');
                            return;
                    }
                    this.setScaleUpdatePages(scale);
                }
                else {
                    this.currentScale = 0;
                    scale = this.checkPageFitInContainer(scale);
                    this.setScaleUpdatePages(scale);
                }
            }
        };
        PdfViewerComponent.prototype.getDocumentContainer = function () {
            return document.getElementById(this.randomPdfId + "-viewer-pdf-viewer");
        };
        PdfViewerComponent.prototype.getViewer = function () {
            return document.getElementById(this.randomPdfId + "-viewer-viewerPdf");
        };
        PdfViewerComponent.prototype.checkPageFitInContainer = function (scale) {
            var documentContainerSize = this.getDocumentContainer();
            var page = this.pdfViewer._pages[this.pdfViewer._currentPageNumber - 1];
            if (page.width > documentContainerSize.clientWidth) {
                scale = Math.fround((documentContainerSize.clientWidth - 20) / page.width);
                if (scale < this.MIN_SCALE) {
                    scale = this.MIN_SCALE;
                }
            }
            return scale;
        };
        PdfViewerComponent.prototype.setScaleUpdatePages = function (newScale) {
            if (this.pdfViewer) {
                if (!this.isSameScale(this.currentScale, newScale)) {
                    this.currentScale = newScale;
                    this.pdfViewer._pages.forEach(function (currentPage) {
                        currentPage.update(newScale);
                    });
                }
                this.pdfViewer.update();
            }
        };
        PdfViewerComponent.prototype.isSameScale = function (oldScale, newScale) {
            return (newScale === oldScale);
        };
        PdfViewerComponent.prototype.isLandscape = function (width, height) {
            return (width > height);
        };
        PdfViewerComponent.prototype.onResize = function () {
            this.scalePage(this.currentScaleMode);
        };
        PdfViewerComponent.prototype.pageFit = function () {
            if (this.currentScaleMode !== 'page-fit') {
                this.scalePage('page-fit');
            }
            else {
                this.scalePage('auto');
            }
        };
        PdfViewerComponent.prototype.zoomIn = function (ticks) {
            var newScale = this.currentScale;
            do {
                newScale = (newScale * this.DEFAULT_SCALE_DELTA).toFixed(2);
                newScale = Math.ceil(newScale * 10) / 10;
                newScale = Math.min(this.MAX_SCALE, newScale);
            } while (--ticks > 0 && newScale < this.MAX_SCALE);
            this.currentScaleMode = 'auto';
            this.setScaleUpdatePages(newScale);
        };
        PdfViewerComponent.prototype.zoomOut = function (ticks) {
            var newScale = this.currentScale;
            do {
                newScale = (newScale / this.DEFAULT_SCALE_DELTA).toFixed(2);
                newScale = Math.floor(newScale * 10) / 10;
                newScale = Math.max(this.MIN_SCALE, newScale);
            } while (--ticks > 0 && newScale > this.MIN_SCALE);
            this.currentScaleMode = 'auto';
            this.setScaleUpdatePages(newScale);
        };
        PdfViewerComponent.prototype.previousPage = function () {
            if (this.pdfViewer && this.page > 1) {
                this.page--;
                this.displayPage = this.page;
                this.pdfViewer.currentPageNumber = this.page;
            }
        };
        PdfViewerComponent.prototype.nextPage = function () {
            if (this.pdfViewer && this.page < this.totalPages) {
                this.page++;
                this.displayPage = this.page;
                this.pdfViewer.currentPageNumber = this.page;
            }
        };
        PdfViewerComponent.prototype.inputPage = function (page) {
            var pageInput = parseInt(page, 10);
            if (!isNaN(pageInput) && pageInput > 0 && pageInput <= this.totalPages) {
                this.page = pageInput;
                this.displayPage = this.page;
                this.pdfViewer.currentPageNumber = this.page;
            }
            else {
                this.displayPage = this.page;
            }
        };
        PdfViewerComponent.prototype.onPageChange = function (event) {
            if (event.source && event.source.container.id === this.randomPdfId + "-viewer-pdf-viewer") {
                this.page = event.pageNumber;
                this.displayPage = event.pageNumber;
            }
        };
        PdfViewerComponent.prototype.onPdfPassword = function (callback, reason) {
            var _this = this;
            this.dialog
                .open(PdfPasswordDialogComponent, {
                width: '400px',
                data: { reason: reason }
            })
                .afterClosed().subscribe(function (password) {
                if (password) {
                    callback(password);
                }
                else {
                    _this.close.emit();
                }
            });
        };
        PdfViewerComponent.prototype.onPageRendered = function () {
            this.rendered.emit();
        };
        PdfViewerComponent.prototype.onPagesLoaded = function () {
            this.isPanelDisabled = false;
        };
        PdfViewerComponent.prototype.handleKeyboardEvent = function (event) {
            var key = event.keyCode;
            if (key === 39) {
                this.nextPage();
            }
            else if (key === 37) {
                this.previousPage();
            }
        };
        PdfViewerComponent.prototype.generateUuid = function () {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        };
        return PdfViewerComponent;
    }());
    PdfViewerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-pdf-viewer',
                    template: "<div class=\"adf-pdf-viewer__container\">\n    <ng-container *ngIf=\"showThumbnails\">\n        <div class=\"adf-pdf-viewer__thumbnails\">\n            <div class=\"adf-thumbnails-template__container\">\n                <div class=\"adf-thumbnails-template__buttons\">\n                    <button\n                        mat-icon-button\n                        data-automation-id='adf-thumbnails-close'\n                        (click)=\"toggleThumbnails()\"\n                        [attr.aria-label]=\"'ADF_VIEWER.ARIA.THUMBNAILS_PANLEL_CLOSE' | translate\"\n                        title=\"{{ 'ADF_VIEWER.ACTIONS.CLOSE' | translate }}\">\n                        <mat-icon>close</mat-icon>\n                    </button>\n                </div>\n\n                <ng-container *ngIf=\"thumbnailsTemplate\">\n                    <ng-container *ngTemplateOutlet=\"thumbnailsTemplate;context:pdfThumbnailsContext\"></ng-container>\n                </ng-container>\n\n                <ng-container *ngIf=\"!thumbnailsTemplate\">\n                    <adf-pdf-thumbnails (close)=\"toggleThumbnails()\" [pdfViewer]=\"pdfViewer\"></adf-pdf-thumbnails>\n                </ng-container>\n            </div>\n        </div>\n    </ng-container>\n\n    <div class=\"adf-pdf-viewer__content\">\n        <div [id]=\"randomPdfId+'-viewer-pdf-viewer'\" class=\"adf-viewer-pdf-viewer\" (window:resize)=\"onResize()\">\n            <div [id]=\"randomPdfId+'-viewer-viewerPdf'\" class=\"adf-pdfViewer\" role=\"document\" tabindex=\"0\" aria-expanded=\"true\">\n                <div id=\"loader-container\" class=\"adf-loader-container\">\n                    <div class=\"adf-loader-item\">\n                        <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"adf-pdf-viewer__toolbar\" *ngIf=\"showToolbar\">\n    <adf-toolbar>\n\n        <ng-container *ngIf=\"allowThumbnails\">\n            <button mat-icon-button\n                    [attr.aria-label]=\"'ADF_VIEWER.ARIA.THUMBNAILS' | translate\"\n                    [attr.aria-expanded]=\"showThumbnails\"\n                    data-automation-id=\"adf-thumbnails-button\"\n                    [disabled]=\"isPanelDisabled\"\n                    (click)=\"toggleThumbnails()\">\n                <mat-icon>dashboard</mat-icon>\n            </button>\n            <adf-toolbar-divider></adf-toolbar-divider>\n        </ng-container>\n\n        <button\n            id=\"viewer-previous-page-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.PREVIOUS_PAGE' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.PREVIOUS_PAGE' | translate }}\"\n            mat-icon-button\n            (click)=\"previousPage()\">\n            <mat-icon>keyboard_arrow_up</mat-icon>\n        </button>\n\n        <button\n            id=\"viewer-next-page-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.NEXT_PAGE' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.NEXT_PAGE' | translate }}\"\n            mat-icon-button\n            (click)=\"nextPage()\">\n            <mat-icon>keyboard_arrow_down</mat-icon>\n        </button>\n\n        <div class=\"adf-pdf-viewer__toolbar-page-selector\">\n            <span>{{ 'ADF_VIEWER.PAGE_LABEL.SHOWING' | translate }}</span>\n            <input #page\n                   type=\"text\"\n                   data-automation-id=\"adf-page-selector\"\n                   pattern=\"-?[0-9]*(\\.[0-9]+)?\"\n                   value=\"{{ displayPage }}\"\n                   (keyup.enter)=\"inputPage(page.value)\">\n            <span>{{ 'ADF_VIEWER.PAGE_LABEL.OF' | translate }} {{ totalPages }}</span>\n        </div>\n\n        <div class=\"adf-viewer__toolbar-page-scale\" data-automation-id=\"adf-page-scale\">\n            {{ currentScaleText }}\n        </div>\n\n        <button\n            id=\"viewer-zoom-in-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.ZOOM_IN' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.ZOOM_IN' | translate }}\"\n            mat-icon-button\n            (click)=\"zoomIn()\">\n            <mat-icon>zoom_in</mat-icon>\n        </button>\n\n        <button\n            id=\"viewer-zoom-out-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.ZOOM_OUT' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.ZOOM_OUT' | translate }}\"\n            mat-icon-button\n            (click)=\"zoomOut()\">\n            <mat-icon>zoom_out</mat-icon>\n        </button>\n\n        <button\n            id=\"viewer-scale-page-button\"\n            title=\"{{ 'ADF_VIEWER.ARIA.FIT_PAGE' | translate }}\"\n            attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.FIT_PAGE' | translate }}\"\n            mat-icon-button\n            (click)=\"pageFit()\">\n            <mat-icon>zoom_out_map</mat-icon>\n        </button>\n\n    </adf-toolbar>\n</div>\n",
                    providers: [RenderingQueueServices],
                    host: { 'class': 'adf-pdf-viewer' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-pdf-viewer .textLayer>span{color:transparent;cursor:text;position:absolute;transform-origin:0 0;white-space:pre}.adf-pdf-viewer .textLayer .highlight{background-color:#b400aa;border-radius:4px;margin:-1px;padding:1px}.adf-pdf-viewer .textLayer .highlight.begin{border-radius:4px 0 0 4px}.adf-pdf-viewer .textLayer .highlight.end{border-radius:0 4px 4px 0}.adf-pdf-viewer .textLayer .highlight.middle{border-radius:0}.adf-pdf-viewer .textLayer .highlight.selected{background-color:#006400}.adf-pdf-viewer .textLayer ::selection{background:#00f}.adf-pdf-viewer .textLayer .endOfContent{-webkit-user-select:none;bottom:0;cursor:default;display:block;left:0;position:absolute;right:0;top:100%;user-select:none;z-index:-1}.adf-pdf-viewer .textLayer .endOfContent.active{top:0}.adf-pdf-viewer .annotationLayer section{position:absolute}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.pushButton>a,.adf-pdf-viewer .annotationLayer .linkAnnotation>a{font-size:1em;height:100%;left:0;position:absolute;top:0;width:100%}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover,.adf-pdf-viewer .annotationLayer .linkAnnotation>a:hover{background:#ff0;box-shadow:0 2px 10px #ff0;opacity:.2}.adf-pdf-viewer .annotationLayer .textAnnotation img{cursor:pointer;position:absolute}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input,.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.radioButton input,.adf-pdf-viewer .annotationLayer .choiceWidgetAnnotation select,.adf-pdf-viewer .annotationLayer .textWidgetAnnotation input,.adf-pdf-viewer .annotationLayer .textWidgetAnnotation textarea{background-color:rgba(0,54,255,.13);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}.adf-pdf-viewer .annotationLayer .choiceWidgetAnnotation select option{padding:0}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}.adf-pdf-viewer .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled],.adf-pdf-viewer .annotationLayer .choiceWidgetAnnotation select[disabled],.adf-pdf-viewer .annotationLayer .textWidgetAnnotation input[disabled],.adf-pdf-viewer .annotationLayer .textWidgetAnnotation textarea[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input:hover,.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.radioButton input:hover,.adf-pdf-viewer .annotationLayer .choiceWidgetAnnotation select:hover,.adf-pdf-viewer .annotationLayer .textWidgetAnnotation input:hover,.adf-pdf-viewer .annotationLayer .textWidgetAnnotation textarea:hover{border:1px solid #000}.adf-pdf-viewer .annotationLayer .choiceWidgetAnnotation select:focus,.adf-pdf-viewer .annotationLayer .textWidgetAnnotation input:focus,.adf-pdf-viewer .annotationLayer .textWidgetAnnotation textarea:focus{background:none;border:1px solid transparent}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{height:80%;left:45%;width:1px}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}.adf-pdf-viewer .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.adf-pdf-viewer .annotationLayer .textWidgetAnnotation input.comb:focus{width:115%}.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.checkBox input,.adf-pdf-viewer .annotationLayer .buttonWidgetAnnotation.radioButton input{-moz-appearance:none;-webkit-appearance:none;appearance:none;padding:0}.adf-pdf-viewer .annotationLayer .popupWrapper{position:absolute;width:20em}.adf-pdf-viewer .annotationLayer .popup{background-color:#ff9;border-radius:2px;box-shadow:0 2px 5px #888;cursor:pointer;font:message-box;font-size:9px;margin-left:5px;max-width:20em;padding:6px;position:absolute;word-wrap:break-word;z-index:200}.adf-pdf-viewer .annotationLayer .popup>*{font-size:9px}.adf-pdf-viewer .annotationLayer .popup h1{display:inline-block}.adf-pdf-viewer .annotationLayer .popup span{display:inline-block;margin-left:5px}.adf-pdf-viewer .annotationLayer .popup p{border-top:1px solid #333;margin-top:2px;padding-top:2px}.adf-pdf-viewer .annotationLayer .caretAnnotation,.adf-pdf-viewer .annotationLayer .circleAnnotation svg ellipse,.adf-pdf-viewer .annotationLayer .fileAttachmentAnnotation,.adf-pdf-viewer .annotationLayer .freeTextAnnotation,.adf-pdf-viewer .annotationLayer .highlightAnnotation,.adf-pdf-viewer .annotationLayer .inkAnnotation svg polyline,.adf-pdf-viewer .annotationLayer .lineAnnotation svg line,.adf-pdf-viewer .annotationLayer .polygonAnnotation svg polygon,.adf-pdf-viewer .annotationLayer .polylineAnnotation svg polyline,.adf-pdf-viewer .annotationLayer .squareAnnotation svg rect,.adf-pdf-viewer .annotationLayer .squigglyAnnotation,.adf-pdf-viewer .annotationLayer .stampAnnotation,.adf-pdf-viewer .annotationLayer .strikeoutAnnotation,.adf-pdf-viewer .annotationLayer .underlineAnnotation{cursor:pointer}.adf-pdf-viewer .pdfViewer .canvasWrapper{overflow:hidden}.adf-pdf-viewer .pdfViewer .page{background-clip:content-box;background-color:#fff;border:9px solid transparent;direction:ltr;height:1056px;margin:1px auto -8px;overflow:visible;position:relative;width:816px}.adf-pdf-viewer .pdfViewer.removePageBorders .page{border:none;margin:0 auto 10px}.adf-pdf-viewer .pdfViewer.singlePageView{display:inline-block}.adf-pdf-viewer .pdfViewer.singlePageView .page{border:none;margin:0}.adf-pdf-viewer .pdfViewer.scrollHorizontal,.adf-pdf-viewer .pdfViewer.scrollWrapped,.adf-pdf-viewer .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}.adf-pdf-viewer .pdfViewer.scrollHorizontal,.adf-pdf-viewer .spread{white-space:nowrap}.adf-pdf-viewer .pdfViewer.removePageBorders,.adf-pdf-viewer .pdfViewer.scrollHorizontal .spread,.adf-pdf-viewer .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}.adf-pdf-viewer .pdfViewer.scrollHorizontal .page,.adf-pdf-viewer .pdfViewer.scrollHorizontal .spread,.adf-pdf-viewer .pdfViewer.scrollWrapped .page,.adf-pdf-viewer .pdfViewer.scrollWrapped .spread,.adf-pdf-viewer .spread .page{display:inline-block;vertical-align:middle}.adf-pdf-viewer .pdfViewer.scrollHorizontal .page,.adf-pdf-viewer .pdfViewer.scrollWrapped .page,.adf-pdf-viewer .spread .page{margin-left:-3.5px;margin-right:-3.5px}.adf-pdf-viewer .pdfViewer.removePageBorders.scrollHorizontal .page,.adf-pdf-viewer .pdfViewer.removePageBorders.scrollWrapped .page,.adf-pdf-viewer .pdfViewer.removePageBorders .spread .page{margin-left:5px;margin-right:5px}.adf-pdf-viewer .pdfViewer .page canvas{display:block;margin:0}.adf-pdf-viewer .pdfViewer .page canvas[hidden]{display:none}.adf-pdf-viewer .pdfViewer .page .loadingIcon{bottom:0;display:block;left:0;position:absolute;right:0;top:0}.adf-pdf-viewer .pdfPresentationMode .pdfViewer{margin-left:0;margin-right:0}.adf-pdf-viewer .pdfPresentationMode .pdfViewer .page,.adf-pdf-viewer .pdfPresentationMode .pdfViewer .spread{display:block}.adf-pdf-viewer .pdfPresentationMode .pdfViewer .page,.adf-pdf-viewer .pdfPresentationMode .pdfViewer.removePageBorders .page{margin-left:auto;margin-right:auto}.adf-pdf-viewer .pdfPresentationMode:-webkit-full-screen .pdfViewer .page{border:0;margin-bottom:100%}.adf-pdf-viewer .pdfPresentationMode:fullscreen .pdfViewer .page{border:0;margin-bottom:100%}.adf-pdf-viewer .textLayer{border:1px solid grey;bottom:0;left:0;line-height:1;opacity:.2;overflow:hidden;position:absolute;right:0;top:0}.adf-pdf-viewer .textLayer>div{color:transparent;cursor:text;position:absolute;transform-origin:0 0;white-space:pre}.adf-pdf-viewer .textLayer .adf-highlight{background-color:#b400aa;border-radius:4px;margin:-1px;padding:1px}.adf-pdf-viewer .textLayer .adf-highlight.adf-begin{border-radius:4px 0 0 4px}.adf-pdf-viewer .textLayer .adf-highlight.adf-end{border-radius:0 4px 4px 0}.adf-pdf-viewer .textLayer .adf-highlight.adf-middle{border-radius:0}.adf-pdf-viewer .textLayer .adf-highlight.adf-selected{background-color:#006400}.adf-pdf-viewer .textLayer::selection{background:#00f}.adf-pdf-viewer .textLayer::-moz-selection{background:#00f}.adf-pdf-viewer .textLayer .adf-endOfContent{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;bottom:0;cursor:default;display:block;left:0;position:absolute;right:0;top:100%;user-select:none;z-index:-1}.adf-pdf-viewer .textLayer .adf-endOfContent.adf-active{top:0}.adf-pdf-viewer .adf-annotationLayer section{position:absolute}.adf-pdf-viewer .adf-annotationLayer .adf-linkAnnotation>a{background:url(\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\") 0 0 repeat;font-size:1em;height:100%;left:0;position:absolute;top:0;width:100%}.adf-pdf-viewer .adf-annotationLayer .adf-linkAnnotation>a:hover{background:#ff0;box-shadow:0 2px 10px #ff0;opacity:.2}.adf-pdf-viewer .adf-annotationLayer .adf-textAnnotation img{cursor:pointer;position:absolute}.adf-pdf-viewer .adf-annotationLayer .adf-popupWrapper{position:absolute;width:20em}.adf-pdf-viewer .adf-annotationLayer .adf-popup{background-color:#ff9;border-radius:2px;box-shadow:0 2px 5px #333;cursor:pointer;margin-left:5px;max-width:20em;padding:.6em;position:absolute;word-wrap:break-word;z-index:200}.adf-pdf-viewer .adf-annotationLayer .adf-popup h1{border-bottom:1px solid #000;font-size:1em;padding-bottom:.2em}.adf-pdf-viewer .adf-annotationLayer .adf-popup p{padding-top:.2em}.adf-pdf-viewer .adf-annotationLayer .adf-fileAttachmentAnnotation,.adf-pdf-viewer .adf-annotationLayer .adf-highlightAnnotation,.adf-pdf-viewer .adf-annotationLayer .adf-squigglyAnnotation,.adf-pdf-viewer .adf-annotationLayer .adf-strikeoutAnnotation,.adf-pdf-viewer .adf-annotationLayer .adf-underlineAnnotation{cursor:pointer}.adf-pdf-viewer .adf-pdfViewer .canvasWrapper{overflow:hidden}.adf-pdf-viewer .adf-pdfViewer .page{background-clip:content-box;background-color:#fff;border:9px solid transparent;direction:ltr;height:1056px;margin:1px auto -8px;overflow:visible;position:relative;width:816px}.adf-pdf-viewer .adf-pdfViewer .page canvas{display:block;margin:0}.adf-pdf-viewer .adf-pdfViewer .page .adf-loadingIcon{bottom:0;display:block;left:0;position:absolute;right:0;top:0}.adf-pdf-viewer .adf-pdfViewer .page *{margin:0;padding:0}.adf-pdf-viewer .adf-pdfViewer.adf-removePageBorders .adf-page{border:none;margin:0 auto 10px}.adf-pdf-viewer .adf-pdfViewer .adf-loadingIcon{animation:load8 1.1s linear infinite;border:1.1em solid rgba(3,0,2,.2);border-left-color:#030002;border-radius:50%;font-size:5px;height:100px;left:50%!important;margin-left:-50px;margin-top:-50px;text-indent:-9999em;top:50%!important;transform:translateZ(0);width:100px}.adf-pdf-viewer .adf-pdfViewer .adf-loadingIcon:after{border-radius:50%}.adf-pdf-viewer .adf-hidden,.adf-pdf-viewer [hidden]{display:none!important}@keyframes load8{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.adf-viewer-pdf-viewer{-webkit-overflow-scrolling:touch;bottom:0;left:0;outline:none;overflow:auto;position:absolute;right:0;top:0}html[dir=ltr] .adf-viewer-pdf-viewer{box-shadow:inset 1px 0 0 hsla(0,0%,100%,.05)}html[dir=rtl] .adf-viewer-pdf-viewer{box-shadow:inset -1px 0 0 hsla(0,0%,100%,.05)}", ".adf-pdf-viewer,.adf-viewer-content-container{height:100%;width:100%}.adf-pdf-viewer{margin:0}.adf-pdf-viewer .adf-loader-container{-moz-box-flex-direction:row;-webkit-box-flex-direction:row;display:flex;flex-direction:row;height:100%}.adf-pdf-viewer__thumbnails{background-color:rgba(0,0,0,.12);height:100%;position:relative;width:190px}.adf-pdf-viewer .adf-thumbnails-template__container{display:flex;flex-direction:column;height:100%}.adf-pdf-viewer .adf-thumbnails-template__buttons{align-items:flex-end;color:var(--theme-text-color);display:flex;height:45px;justify-content:flex-end}.adf-pdf-viewer__container{display:flex;height:100vh}.adf-pdf-viewer__content{flex:1 1 auto;position:relative}.adf-pdf-viewer .adf-loader-item{margin:auto;max-height:100px;max-width:300px}.adf-pdf-viewer__toolbar{bottom:5px;left:50%;position:absolute;transform:translateX(-50%)}.adf-pdf-viewer__toolbar .adf-toolbar .mat-toolbar{background-color:var(--theme-card-bg-color);border-radius:2px;border-width:0;box-shadow:0 2px 2px 0 rgba(0,0,0,.24),0 0 2px 0 rgba(0,0,0,.12);max-height:48px}.adf-pdf-viewer__toolbar-page-selector{font-size:14px;padding-left:10px;padding-right:10px}.adf-pdf-viewer__toolbar-page-selector>input{background-color:var(--theme-card-bg-color);border:1px solid var(--theme-border-color);color:inherit;font-size:14px;height:24px;line-height:24px;margin-right:4px;outline-color:grey;outline-width:1px;padding:5px;text-align:right;width:33px}"]
                },] }
    ];
    PdfViewerComponent.ctorParameters = function () { return [
        { type: i4.MatDialog },
        { type: RenderingQueueServices },
        { type: LogService },
        { type: AppConfigService }
    ]; };
    PdfViewerComponent.propDecorators = {
        urlFile: [{ type: i0.Input }],
        blobFile: [{ type: i0.Input }],
        nameFile: [{ type: i0.Input }],
        showToolbar: [{ type: i0.Input }],
        allowThumbnails: [{ type: i0.Input }],
        thumbnailsTemplate: [{ type: i0.Input }],
        cacheType: [{ type: i0.Input }],
        rendered: [{ type: i0.Output }],
        error: [{ type: i0.Output }],
        close: [{ type: i0.Output }],
        handleKeyboardEvent: [{ type: i0.HostListener, args: ['document:keydown', ['$event'],] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PdfThumbComponent = /** @class */ (function () {
        function PdfThumbComponent(sanitizer, element) {
            this.sanitizer = sanitizer;
            this.element = element;
            this.page = null;
        }
        PdfThumbComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.image$ = this.page.getPage().then(function (page) { return _this.getThumb(page); });
        };
        PdfThumbComponent.prototype.focus = function () {
            this.element.nativeElement.focus();
        };
        PdfThumbComponent.prototype.getThumb = function (page) {
            var _this = this;
            var viewport = page.getViewport({ scale: 1 });
            var canvas = this.getCanvas();
            var scale = Math.min((canvas.height / viewport.height), (canvas.width / viewport.width));
            return page.render({
                canvasContext: canvas.getContext('2d'),
                viewport: page.getViewport({ scale: scale })
            }).promise.then(function () {
                var imageSource = canvas.toDataURL();
                return _this.sanitizer.bypassSecurityTrustUrl(imageSource);
            });
        };
        PdfThumbComponent.prototype.getCanvas = function () {
            var canvas = document.createElement('canvas');
            canvas.width = this.page.getWidth();
            canvas.height = this.page.getHeight();
            return canvas;
        };
        return PdfThumbComponent;
    }());
    PdfThumbComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-pdf-thumb',
                    template: "<ng-container *ngIf=\"image$ | async as image\">\n    <img [src]=\"image\" [alt]=\"'ADF_VIEWER.SIDEBAR.THUMBNAILS.PAGE' | translate: { pageNum: page.id }\"\n        title=\"{{ 'ADF_VIEWER.SIDEBAR.THUMBNAILS.PAGE' | translate: { pageNum: page.id } }}\"\n        [attr.aria-label]=\"'ADF_VIEWER.SIDEBAR.THUMBNAILS.PAGE' | translate: { pageNum: page.id }\">\n</ng-container>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { tabindex: '0' }
                },] }
    ];
    PdfThumbComponent.ctorParameters = function () { return [
        { type: i3.DomSanitizer },
        { type: i0.ElementRef }
    ]; };
    PdfThumbComponent.propDecorators = {
        page: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PdfThumbListComponent = /** @class */ (function () {
        function PdfThumbListComponent(element, document) {
            this.element = element;
            this.document = document;
            this.close = new i0.EventEmitter();
            this.virtualHeight = 0;
            this.translateY = 0;
            this.renderItems = [];
            this.width = 91;
            this.currentHeight = 0;
            this.items = [];
            this.margin = 15;
            this.itemHeight = 114 + this.margin;
            this.previouslyFocusedElement = null;
            this.calculateItems = this.calculateItems.bind(this);
            this.onPageChange = this.onPageChange.bind(this);
        }
        PdfThumbListComponent.prototype.onKeydown = function (event) {
            var keyCode = event.keyCode;
            if (keyCode === keycodes.UP_ARROW && this.canSelectPreviousItem()) {
                this.pdfViewer.currentPageNumber -= 1;
            }
            if (keyCode === keycodes.DOWN_ARROW && this.canSelectNextItem()) {
                this.pdfViewer.currentPageNumber += 1;
            }
            if (keyCode === keycodes.ESCAPE) {
                this.close.emit();
            }
            this.keyManager.setFocusOrigin('keyboard');
            event.preventDefault();
        };
        PdfThumbListComponent.prototype.onResize = function () {
            this.calculateItems();
        };
        PdfThumbListComponent.prototype.ngOnInit = function () {
            this.pdfViewer.eventBus.on('pagechanging', this.onPageChange);
            this.element.nativeElement.addEventListener('scroll', this.calculateItems, true);
            this.setHeight(this.pdfViewer.currentPageNumber);
            this.items = this.getPages();
            this.calculateItems();
            this.previouslyFocusedElement = this.document.activeElement;
        };
        PdfThumbListComponent.prototype.ngAfterViewInit = function () {
            var _this = this;
            this.keyManager = new a11y.FocusKeyManager(this.thumbsList);
            this.thumbsList.changes
                .pipe(operators.delay(0))
                .subscribe(function () { return _this.keyManager.setActiveItem(_this.getPageIndex(_this.pdfViewer.currentPageNumber)); });
            setTimeout(function () {
                _this.scrollInto(_this.pdfViewer.currentPageNumber);
                _this.keyManager.setActiveItem(_this.getPageIndex(_this.pdfViewer.currentPageNumber));
            }, 0);
        };
        PdfThumbListComponent.prototype.ngOnDestroy = function () {
            this.element.nativeElement.removeEventListener('scroll', this.calculateItems, true);
            this.pdfViewer.eventBus.on('pagechanging', this.onPageChange);
            if (this.previouslyFocusedElement) {
                this.previouslyFocusedElement.focus();
                this.previouslyFocusedElement = null;
            }
        };
        PdfThumbListComponent.prototype.trackByFn = function (_, item) {
            return item.id;
        };
        PdfThumbListComponent.prototype.isSelected = function (pageNumber) {
            return this.pdfViewer.currentPageNumber === pageNumber;
        };
        PdfThumbListComponent.prototype.goTo = function (pageNumber) {
            this.pdfViewer.currentPageNumber = pageNumber;
        };
        PdfThumbListComponent.prototype.scrollInto = function (pageNumber) {
            if (this.items.length) {
                var index = this.items.findIndex(function (element) { return element.id === pageNumber; });
                if (index < 0 || index >= this.items.length) {
                    return;
                }
                this.element.nativeElement.scrollTop = index * this.itemHeight;
                this.calculateItems();
            }
        };
        PdfThumbListComponent.prototype.getPages = function () {
            var _this = this;
            return this.pdfViewer._pages.map(function (page) { return ({
                id: page.id,
                getWidth: function () {
                    return _this.width;
                },
                getHeight: function () {
                    return _this.currentHeight;
                },
                getPage: function () { return _this.pdfViewer.pdfDocument.getPage(page.id); }
            }); });
        };
        PdfThumbListComponent.prototype.setHeight = function (id) {
            var _this = this;
            var height = this.pdfViewer.pdfDocument.getPage(id).then(function (page) { return _this.calculateHeight(page); });
            return height;
        };
        PdfThumbListComponent.prototype.calculateHeight = function (page) {
            var viewport = page.getViewport({ scale: 1 });
            var pageRatio = viewport.width / viewport.height;
            var height = Math.floor(this.width / pageRatio);
            this.currentHeight = height;
            this.itemHeight = height + this.margin;
        };
        PdfThumbListComponent.prototype.calculateItems = function () {
            var _a = this.getContainerSetup(), element = _a.element, viewPort = _a.viewPort, itemsInView = _a.itemsInView;
            var indexByScrollTop = element.scrollTop / viewPort * this.items.length / itemsInView;
            var start = Math.floor(indexByScrollTop);
            var end = Math.ceil(indexByScrollTop) + (itemsInView);
            this.translateY = this.itemHeight * Math.ceil(start);
            this.virtualHeight = this.itemHeight * this.items.length - this.translateY;
            this.renderItems = this.items.slice(start, end);
        };
        PdfThumbListComponent.prototype.getContainerSetup = function () {
            var element = this.element.nativeElement;
            var elementRec = element.getBoundingClientRect();
            var itemsInView = Math.ceil(elementRec.height / this.itemHeight);
            var viewPort = (this.itemHeight * this.items.length) / itemsInView;
            return {
                element: element,
                viewPort: viewPort,
                itemsInView: itemsInView
            };
        };
        PdfThumbListComponent.prototype.onPageChange = function (event) {
            var index = this.renderItems.findIndex(function (element) { return element.id === event.pageNumber; });
            if (index < 0) {
                this.scrollInto(event.pageNumber);
            }
            if (index >= this.renderItems.length - 1) {
                this.element.nativeElement.scrollTop += this.itemHeight;
            }
            this.keyManager.setActiveItem(this.getPageIndex(event.pageNumber));
        };
        PdfThumbListComponent.prototype.getPageIndex = function (pageNumber) {
            var thumbsListArray = this.thumbsList.toArray();
            return thumbsListArray.findIndex(function (el) { return el.page.id === pageNumber; });
        };
        PdfThumbListComponent.prototype.canSelectNextItem = function () {
            return this.pdfViewer.currentPageNumber !== this.pdfViewer.pagesCount;
        };
        PdfThumbListComponent.prototype.canSelectPreviousItem = function () {
            return this.pdfViewer.currentPageNumber !== 1;
        };
        return PdfThumbListComponent;
    }());
    PdfThumbListComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-pdf-thumbnails',
                    template: "<div class=\"adf-pdf-thumbnails__content\"\n    data-automation-id='adf-thumbnails-content'\n    [style.height.px]=\"virtualHeight\"\n    [style.transform]=\"'translate(-50%, ' + translateY + 'px)'\">\n    <adf-pdf-thumb *ngFor=\"let page of renderItems; trackBy: trackByFn\"\n        class=\"adf-pdf-thumbnails__thumb\"\n        [id]=\"page.id\"\n        [ngClass]=\"{'adf-pdf-thumbnails__thumb--selected' : isSelected(page.id)}\"\n        [page]=\"page\"\n        (click)=\"goTo(page.id)\">\n    </adf-pdf-thumb>\n</div>\n",
                    host: { class: 'adf-pdf-thumbnails' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-pdf-thumbnails{display:block;height:100%;overflow:hidden;overflow-y:auto;position:relative}.adf-pdf-thumbnails__content{height:0;left:50%;position:absolute;top:5px}.adf-pdf-thumbnails__thumb{background:var(--theme-background-color);cursor:pointer;display:block;margin-bottom:15px;width:91px}.adf-pdf-thumbnails__thumb:hover{box-shadow:0 0 5px 0 var(--theme-text-bold-color)}.adf-pdf-thumbnails__thumb--selected{border:2px solid var(--theme-accent-color-a200)}"]
                },] }
    ];
    PdfThumbListComponent.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: undefined, decorators: [{ type: i0.Inject, args: [i1$1.DOCUMENT,] }] }
    ]; };
    PdfThumbListComponent.propDecorators = {
        pdfViewer: [{ type: i0.Input }],
        close: [{ type: i0.Output }],
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }],
        thumbsList: [{ type: i0.ViewChildren, args: [PdfThumbComponent,] }],
        onKeydown: [{ type: i0.HostListener, args: ['keydown', ['$event'],] }],
        onResize: [{ type: i0.HostListener, args: ['window:resize',] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var TxtViewerComponent = /** @class */ (function () {
        function TxtViewerComponent(http, appConfigService) {
            this.http = http;
            this.appConfigService = appConfigService;
        }
        TxtViewerComponent.prototype.ngOnChanges = function (changes) {
            var blobFile = changes['blobFile'];
            if (blobFile && blobFile.currentValue) {
                return this.readBlob(blobFile.currentValue);
            }
            var urlFile = changes['urlFile'];
            if (urlFile && urlFile.currentValue) {
                return this.getUrlContent(urlFile.currentValue);
            }
            if (!this.urlFile && !this.blobFile) {
                throw new Error('Attribute urlFile or blobFile is required');
            }
            return Promise.resolve();
        };
        TxtViewerComponent.prototype.getUrlContent = function (url) {
            var _this = this;
            var withCredentialsMode = this.appConfigService.get('auth.withCredentials', false);
            return new Promise(function (resolve, reject) {
                _this.http.get(url, { responseType: 'text', withCredentials: withCredentialsMode }).subscribe(function (res) {
                    _this.content = res;
                    resolve();
                }, function (event) {
                    reject(event);
                });
            });
        };
        TxtViewerComponent.prototype.readBlob = function (blob) {
            var _this = this;
            return new Promise(function (resolve, reject) {
                var reader = new FileReader();
                reader.onload = function () {
                    _this.content = reader.result;
                    resolve();
                };
                reader.onerror = function (error) {
                    reject(error);
                };
                reader.readAsText(blob);
            });
        };
        return TxtViewerComponent;
    }());
    TxtViewerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-txt-viewer',
                    template: "<pre class=\"adf-txt-viewer-content\">\n    {{content}}\n</pre>\n",
                    host: { 'class': 'adf-txt-viewer' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-txt-viewer{background-color:var(--theme-background-color);height:100%;overflow:auto;width:100%}"]
                },] }
    ];
    TxtViewerComponent.ctorParameters = function () { return [
        { type: i1.HttpClient },
        { type: AppConfigService }
    ]; };
    TxtViewerComponent.propDecorators = {
        urlFile: [{ type: i0.Input }],
        blobFile: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var UnknownFormatComponent = /** @class */ (function () {
        function UnknownFormatComponent() {
        }
        return UnknownFormatComponent;
    }());
    UnknownFormatComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-viewer-unknown-format',
                    template: "<div class=\"adf-viewer__unknown-format-view\">\n    <div>\n        <mat-icon class=\"icon\">error</mat-icon>\n        <div class=\"adf-viewer__unknown-label\">{{ 'ADF_VIEWER.UNKNOWN_FORMAT' | translate }}</div>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-viewer__unknown-format-view{color:var(--theme-text-fg-color);display:flex;flex:1;flex-direction:column;height:90vh;justify-content:center;text-align:center}"]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ViewerToolbarActionsComponent = /** @class */ (function () {
        function ViewerToolbarActionsComponent() {
        }
        return ViewerToolbarActionsComponent;
    }());
    ViewerToolbarActionsComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-viewer-toolbar-actions',
                    encapsulation: i0.ViewEncapsulation.None,
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    host: { class: 'adf-viewer-toolbar-actions' },
                    template: "<ng-content></ng-content>"
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ViewerExtensionDirective = /** @class */ (function () {
        function ViewerExtensionDirective(viewerComponent) {
            this.viewerComponent = viewerComponent;
            this.onDestroy$ = new rxjs.Subject();
        }
        ViewerExtensionDirective.prototype.ngAfterContentInit = function () {
            var _this = this;
            this.templateModel = { template: this.template, isVisible: false };
            this.viewerComponent.extensionTemplates.push(this.templateModel);
            this.viewerComponent.extensionChange
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (fileExtension) {
                _this.templateModel.isVisible = _this.isVisible(fileExtension);
            });
            if (this.supportedExtensions instanceof Array) {
                this.supportedExtensions.forEach(function (extension) {
                    _this.viewerComponent.externalExtensions.push(extension);
                });
            }
        };
        ViewerExtensionDirective.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        ViewerExtensionDirective.prototype.isVisible = function (fileExtension) {
            var supportedExtension;
            if (this.supportedExtensions && (this.supportedExtensions instanceof Array)) {
                supportedExtension = this.supportedExtensions.find(function (extension) {
                    return extension.toLowerCase() === fileExtension;
                });
            }
            return !!supportedExtension;
        };
        return ViewerExtensionDirective;
    }());
    ViewerExtensionDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-viewer-extension'
                },] }
    ];
    ViewerExtensionDirective.ctorParameters = function () { return [
        { type: ViewerComponent }
    ]; };
    ViewerExtensionDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }],
        urlFileContent: [{ type: i0.Input }],
        extension: [{ type: i0.Input }],
        supportedExtensions: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ToolbarDividerComponent = /** @class */ (function () {
        function ToolbarDividerComponent() {
        }
        return ToolbarDividerComponent;
    }());
    ToolbarDividerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-toolbar-divider',
                    template: '<div></div>',
                    host: { 'class': 'adf-toolbar-divider' },
                    encapsulation: i0.ViewEncapsulation.None,
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    styles: ["\n        .adf-toolbar-divider > div {\n            height: 24px;\n            width: 1px;\n            background: rgba(0, 0, 0, 0.26);\n            margin-left: 5px;\n            margin-right: 5px;\n        }\n    "]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ToolbarTitleComponent = /** @class */ (function () {
        function ToolbarTitleComponent() {
        }
        return ToolbarTitleComponent;
    }());
    ToolbarTitleComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-toolbar-title',
                    template: '<ng-content></ng-content>',
                    host: { 'class': 'adf-toolbar-title' }
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ToolbarComponent = /** @class */ (function () {
        function ToolbarComponent() {
            this.title = '';
        }
        return ToolbarComponent;
    }());
    ToolbarComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-toolbar',
                    template: "<mat-toolbar [color]=\"color\">\n    <span class=\"adf-toolbar-title\" *ngIf=\"title\">{{ title | translate }}</span>\n    <ng-content select=\"adf-toolbar-title\"></ng-content>\n    <ng-content></ng-content>\n</mat-toolbar>\n",
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { 'class': 'adf-toolbar' },
                    styles: [".adf-toolbar--spacer{flex:1 1 auto}.adf-toolbar-title{display:flex;overflow:hidden;width:100%}.adf-toolbar .mat-toolbar{border:1px solid var(--theme-border-color);color:var(--theme-text-color);min-height:48px}.adf-toolbar .mat-toolbar-row{font-size:14px;height:48px;white-space:normal}.adf-toolbar .mat-toolbar-single-row{height:64px;padding:0 16px}.adf-toolbar.adf-toolbar--inline .mat-toolbar{background-color:inherit;border:none!important;padding:0}"]
                },] }
    ];
    ToolbarComponent.propDecorators = {
        title: [{ type: i0.Input }],
        color: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ToolbarModule = /** @class */ (function () {
        function ToolbarModule() {
        }
        return ToolbarModule;
    }());
    ToolbarModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        ToolbarComponent,
                        ToolbarTitleComponent,
                        ToolbarDividerComponent
                    ],
                    exports: [
                        ToolbarComponent,
                        ToolbarTitleComponent,
                        ToolbarDividerComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ViewerModule = /** @class */ (function () {
        function ViewerModule() {
        }
        return ViewerModule;
    }());
    ViewerModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        ToolbarModule,
                        PipeModule,
                        flexLayout.FlexLayoutModule,
                        DirectiveModule,
                        a11y.A11yModule,
                        i2.ExtensionsModule
                    ],
                    declarations: [
                        PdfPasswordDialogComponent,
                        ViewerComponent,
                        ImgViewerComponent,
                        TxtViewerComponent,
                        MediaPlayerComponent,
                        PdfViewerComponent,
                        PdfThumbComponent,
                        PdfThumbListComponent,
                        ViewerExtensionDirective,
                        UnknownFormatComponent,
                        ViewerToolbarComponent,
                        ViewerSidebarComponent,
                        ViewerOpenWithComponent,
                        ViewerMoreActionsComponent,
                        ViewerToolbarActionsComponent
                    ],
                    exports: [
                        ViewerComponent,
                        ImgViewerComponent,
                        TxtViewerComponent,
                        MediaPlayerComponent,
                        PdfViewerComponent,
                        PdfPasswordDialogComponent,
                        PdfThumbComponent,
                        PdfThumbListComponent,
                        ViewerExtensionDirective,
                        UnknownFormatComponent,
                        ViewerToolbarComponent,
                        ViewerSidebarComponent,
                        ViewerOpenWithComponent,
                        ViewerMoreActionsComponent,
                        ViewerToolbarActionsComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var BpmUserService = /** @class */ (function () {
        function BpmUserService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(BpmUserService.prototype, "profileApi", {
            get: function () {
                var _a;
                this._profileApi = (_a = this._profileApi) !== null && _a !== void 0 ? _a : new jsApi.UserProfileApi(this.apiService.getInstance());
                return this._profileApi;
            },
            enumerable: false,
            configurable: true
        });
        BpmUserService.prototype.getCurrentUserInfo = function () {
            var _this = this;
            return rxjs.from(this.profileApi.getProfile())
                .pipe(operators.map(function (userRepresentation) {
                return new BpmUserModel(userRepresentation);
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        BpmUserService.prototype.getCurrentUserProfileImage = function () {
            return this.profileApi.getProfilePictureUrl();
        };
        BpmUserService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return BpmUserService;
    }());
    BpmUserService.ɵprov = i0.ɵɵdefineInjectable({ factory: function BpmUserService_Factory() { return new BpmUserService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: BpmUserService, providedIn: "root" });
    BpmUserService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    BpmUserService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var EcmUserService = /** @class */ (function () {
        function EcmUserService(apiService, contentService) {
            this.apiService = apiService;
            this.contentService = contentService;
        }
        Object.defineProperty(EcmUserService.prototype, "peopleApi", {
            get: function () {
                var _a;
                this._peopleApi = (_a = this._peopleApi) !== null && _a !== void 0 ? _a : new jsApi.PeopleApi(this.apiService.getInstance());
                return this._peopleApi;
            },
            enumerable: false,
            configurable: true
        });
        EcmUserService.prototype.getUserInfo = function (userName) {
            return rxjs.from(this.peopleApi.getPerson(userName))
                .pipe(operators.map(function (personEntry) { return new EcmUserModel(personEntry.entry); }));
        };
        EcmUserService.prototype.getCurrentUserInfo = function () {
            return this.getUserInfo('-me-');
        };
        EcmUserService.prototype.getUserProfileImage = function (avatarId) {
            return this.contentService.getContentUrl(avatarId);
        };
        return EcmUserService;
    }());
    EcmUserService.ɵprov = i0.ɵɵdefineInjectable({ factory: function EcmUserService_Factory() { return new EcmUserService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(ContentService)); }, token: EcmUserService, providedIn: "root" });
    EcmUserService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    EcmUserService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: ContentService }
    ]; };

    var JSON_TYPE = ['application/json'];
    var OAuth2Service = /** @class */ (function () {
        function OAuth2Service(alfrescoApiService) {
            this.alfrescoApiService = alfrescoApiService;
        }
        Object.defineProperty(OAuth2Service.prototype, "apiClient", {
            get: function () {
                return this.alfrescoApiService.getInstance().oauth2Auth;
            },
            enumerable: false,
            configurable: true
        });
        OAuth2Service.prototype.request = function (opts) {
            return rxjs.from(this.apiClient.callCustomApi(opts.url, opts.httpMethod, opts.pathParams, opts.queryParams, {}, {}, opts.bodyParam, JSON_TYPE, JSON_TYPE, Object));
        };
        OAuth2Service.prototype.get = function (opts) {
            return this.request(Object.assign(Object.assign({}, opts), { httpMethod: 'GET' }));
        };
        OAuth2Service.prototype.put = function (opts) {
            return this.request(Object.assign(Object.assign({}, opts), { httpMethod: 'PUT' }));
        };
        OAuth2Service.prototype.post = function (opts) {
            return this.request(Object.assign(Object.assign({}, opts), { httpMethod: 'POST' }));
        };
        OAuth2Service.prototype.delete = function (opts) {
            return this.request(Object.assign(Object.assign({}, opts), { httpMethod: 'DELETE' }));
        };
        return OAuth2Service;
    }());
    OAuth2Service.ɵprov = i0.ɵɵdefineInjectable({ factory: function OAuth2Service_Factory() { return new OAuth2Service(i0.ɵɵinject(AlfrescoApiService)); }, token: OAuth2Service, providedIn: "root" });
    OAuth2Service.decorators = [
        { type: i0.Injectable, args: [{ providedIn: 'root' },] }
    ];
    OAuth2Service.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };

    var IdentityUserService = /** @class */ (function () {
        function IdentityUserService(jwtHelperService, oAuth2Service, appConfigService) {
            this.jwtHelperService = jwtHelperService;
            this.oAuth2Service = oAuth2Service;
            this.appConfigService = appConfigService;
        }
        Object.defineProperty(IdentityUserService.prototype, "identityHost", {
            get: function () {
                return "" + this.appConfigService.get('identityHost');
            },
            enumerable: false,
            configurable: true
        });
        IdentityUserService.prototype.buildUserUrl = function () {
            return this.identityHost + "/users";
        };
        IdentityUserService.prototype.getCurrentUserInfo = function () {
            var familyName = this.jwtHelperService.getValueFromLocalAccessToken(JwtHelperService.FAMILY_NAME);
            var givenName = this.jwtHelperService.getValueFromLocalAccessToken(JwtHelperService.GIVEN_NAME);
            var email = this.jwtHelperService.getValueFromLocalAccessToken(JwtHelperService.USER_EMAIL);
            var username = this.jwtHelperService.getValueFromLocalAccessToken(JwtHelperService.USER_PREFERRED_USERNAME);
            return { firstName: givenName, lastName: familyName, email: email, username: username };
        };
        IdentityUserService.prototype.findUsersByName = function (search) {
            if (search === '') {
                return rxjs.of([]);
            }
            var url = this.buildUserUrl();
            var queryParams = { search: search };
            return this.oAuth2Service.get({ url: url, queryParams: queryParams });
        };
        IdentityUserService.prototype.findUserByUsername = function (username) {
            if (username === '') {
                return rxjs.of([]);
            }
            var url = this.buildUserUrl();
            var queryParams = { username: username };
            return this.oAuth2Service.get({ url: url, queryParams: queryParams });
        };
        IdentityUserService.prototype.findUserByEmail = function (email) {
            if (email === '') {
                return rxjs.of([]);
            }
            var url = this.buildUserUrl();
            var queryParams = { email: email };
            return this.oAuth2Service.get({ url: url, queryParams: queryParams });
        };
        IdentityUserService.prototype.findUserById = function (id) {
            if (id === '') {
                return rxjs.of([]);
            }
            var url = this.buildUserUrl() + '/' + id;
            return this.oAuth2Service.get({ url: url });
        };
        IdentityUserService.prototype.getClientRoles = function (userId, clientId) {
            var url = this.identityHost + "/users/" + userId + "/role-mappings/clients/" + clientId + "/composite";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityUserService.prototype.checkUserHasClientApp = function (userId, clientId) {
            return this.getClientRoles(userId, clientId).pipe(operators.map(function (clientRoles) { return clientRoles.length > 0; }));
        };
        IdentityUserService.prototype.checkUserHasAnyClientAppRole = function (userId, clientId, roleNames) {
            return this.getClientRoles(userId, clientId).pipe(operators.map(function (clientRoles) {
                var hasRole = false;
                if (clientRoles.length > 0) {
                    roleNames.forEach(function (roleName) {
                        var role = clientRoles.find(function (_a) {
                            var name = _a.name;
                            return name === roleName;
                        });
                        if (role) {
                            hasRole = true;
                            return;
                        }
                    });
                }
                return hasRole;
            }));
        };
        IdentityUserService.prototype.getClientIdByApplicationName = function (applicationName) {
            var url = this.identityHost + "/clients";
            var queryParams = { clientId: applicationName };
            return this.oAuth2Service
                .get({ url: url, queryParams: queryParams })
                .pipe(operators.map(function (response) { return response && response.length > 0 ? response[0].id : ''; }));
        };
        IdentityUserService.prototype.checkUserHasApplicationAccess = function (userId, applicationName) {
            var _this = this;
            return this.getClientIdByApplicationName(applicationName).pipe(operators.switchMap(function (clientId) {
                return _this.checkUserHasClientApp(userId, clientId);
            }));
        };
        IdentityUserService.prototype.checkUserHasAnyApplicationRole = function (userId, applicationName, roleNames) {
            var _this = this;
            return this.getClientIdByApplicationName(applicationName).pipe(operators.switchMap(function (clientId) {
                return _this.checkUserHasAnyClientAppRole(userId, clientId, roleNames);
            }));
        };
        IdentityUserService.prototype.getUsers = function () {
            var url = this.buildUserUrl();
            return this.oAuth2Service.get({ url: url });
        };
        IdentityUserService.prototype.getUserRoles = function (userId) {
            var url = this.identityHost + "/users/" + userId + "/role-mappings/realm/composite";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityUserService.prototype.getUsersByRolesWithCurrentUser = function (roleNames) {
            return __awaiter(this, void 0, void 0, function () {
                var filteredUsers, users, i, hasAnyRole;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            filteredUsers = [];
                            if (!(roleNames && roleNames.length > 0)) return [3 /*break*/, 5];
                            return [4 /*yield*/, this.getUsers().toPromise()];
                        case 1:
                            users = _a.sent();
                            i = 0;
                            _a.label = 2;
                        case 2:
                            if (!(i < users.length)) return [3 /*break*/, 5];
                            return [4 /*yield*/, this.userHasAnyRole(users[i].id, roleNames)];
                        case 3:
                            hasAnyRole = _a.sent();
                            if (hasAnyRole) {
                                filteredUsers.push(users[i]);
                            }
                            _a.label = 4;
                        case 4:
                            i++;
                            return [3 /*break*/, 2];
                        case 5: return [2 /*return*/, filteredUsers];
                    }
                });
            });
        };
        IdentityUserService.prototype.getUsersByRolesWithoutCurrentUser = function (roleNames) {
            return __awaiter(this, void 0, void 0, function () {
                var filteredUsers, currentUser_1, users, i, hasAnyRole;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            filteredUsers = [];
                            if (!(roleNames && roleNames.length > 0)) return [3 /*break*/, 5];
                            currentUser_1 = this.getCurrentUserInfo();
                            return [4 /*yield*/, this.getUsers().toPromise()];
                        case 1:
                            users = _a.sent();
                            users = users.filter(function (_a) {
                                var username = _a.username;
                                return username !== currentUser_1.username;
                            });
                            i = 0;
                            _a.label = 2;
                        case 2:
                            if (!(i < users.length)) return [3 /*break*/, 5];
                            return [4 /*yield*/, this.userHasAnyRole(users[i].id, roleNames)];
                        case 3:
                            hasAnyRole = _a.sent();
                            if (hasAnyRole) {
                                filteredUsers.push(users[i]);
                            }
                            _a.label = 4;
                        case 4:
                            i++;
                            return [3 /*break*/, 2];
                        case 5: return [2 /*return*/, filteredUsers];
                    }
                });
            });
        };
        IdentityUserService.prototype.userHasAnyRole = function (userId, roleNames) {
            return __awaiter(this, void 0, void 0, function () {
                var userRoles, hasAnyRole;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, this.getUserRoles(userId).toPromise()];
                        case 1:
                            userRoles = _a.sent();
                            hasAnyRole = roleNames.some(function (roleName) {
                                var filteredRoles = userRoles.filter(function (userRole) {
                                    return userRole.name.toLocaleLowerCase() === roleName.toLocaleLowerCase();
                                });
                                return filteredRoles.length > 0;
                            });
                            return [2 /*return*/, hasAnyRole];
                    }
                });
            });
        };
        IdentityUserService.prototype.checkUserHasRole = function (userId, roleNames) {
            return this.getUserRoles(userId).pipe(operators.map(function (userRoles) {
                var hasRole = false;
                if (userRoles && userRoles.length > 0) {
                    roleNames.forEach(function (roleName) {
                        var role = userRoles.find(function (_a) {
                            var name = _a.name;
                            return roleName === name;
                        });
                        if (role) {
                            hasRole = true;
                            return;
                        }
                    });
                }
                return hasRole;
            }));
        };
        IdentityUserService.prototype.queryUsers = function (requestQuery) {
            var _this = this;
            var url = this.buildUserUrl();
            var queryParams = { first: requestQuery.first, max: requestQuery.max };
            return this.getTotalUsersCount().pipe(operators.switchMap(function (totalCount) { return _this.oAuth2Service.get({ url: url, queryParams: queryParams }).pipe(operators.map(function (response) {
                return {
                    entries: response,
                    pagination: {
                        skipCount: requestQuery.first,
                        maxItems: requestQuery.max,
                        count: totalCount,
                        hasMoreItems: false,
                        totalItems: totalCount
                    }
                };
            })); }));
        };
        IdentityUserService.prototype.getTotalUsersCount = function () {
            var url = this.buildUserUrl() + "/count";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityUserService.prototype.createUser = function (newUser) {
            var url = this.buildUserUrl();
            var bodyParam = JSON.stringify(newUser);
            return this.oAuth2Service.post({ url: url, bodyParam: bodyParam });
        };
        IdentityUserService.prototype.updateUser = function (userId, updatedUser) {
            var url = this.buildUserUrl() + '/' + userId;
            var bodyParam = JSON.stringify(updatedUser);
            return this.oAuth2Service.put({ url: url, bodyParam: bodyParam });
        };
        IdentityUserService.prototype.deleteUser = function (userId) {
            var url = this.buildUserUrl() + '/' + userId;
            return this.oAuth2Service.delete({ url: url });
        };
        IdentityUserService.prototype.changePassword = function (userId, newPassword) {
            var url = this.buildUserUrl() + '/' + userId + '/reset-password';
            var bodyParam = JSON.stringify(newPassword);
            return this.oAuth2Service.put({ url: url, bodyParam: bodyParam });
        };
        IdentityUserService.prototype.getInvolvedGroups = function (userId) {
            var url = this.buildUserUrl() + '/' + userId + '/groups/';
            var pathParams = { id: userId };
            return this.oAuth2Service.get({ url: url, pathParams: pathParams });
        };
        IdentityUserService.prototype.joinGroup = function (joinGroupRequest) {
            var url = this.buildUserUrl() + '/' + joinGroupRequest.userId + '/groups/' + joinGroupRequest.groupId;
            var bodyParam = JSON.stringify(joinGroupRequest);
            return this.oAuth2Service.put({ url: url, bodyParam: bodyParam });
        };
        IdentityUserService.prototype.leaveGroup = function (userId, groupId) {
            var url = this.buildUserUrl() + '/' + userId + '/groups/' + groupId;
            return this.oAuth2Service.delete({ url: url });
        };
        IdentityUserService.prototype.getAvailableRoles = function (userId) {
            var url = this.buildUserUrl() + '/' + userId + '/role-mappings/realm/available';
            return this.oAuth2Service.get({ url: url });
        };
        IdentityUserService.prototype.getAssignedRoles = function (userId) {
            var url = this.buildUserUrl() + '/' + userId + '/role-mappings/realm';
            var pathParams = { id: userId };
            return this.oAuth2Service.get({ url: url, pathParams: pathParams });
        };
        IdentityUserService.prototype.getEffectiveRoles = function (userId) {
            var url = this.buildUserUrl() + '/' + userId + '/role-mappings/realm/composite';
            var pathParams = { id: userId };
            return this.oAuth2Service.get({ url: url, pathParams: pathParams });
        };
        IdentityUserService.prototype.assignRoles = function (userId, roles) {
            var url = this.buildUserUrl() + '/' + userId + '/role-mappings/realm';
            var bodyParam = JSON.stringify(roles);
            return this.oAuth2Service.post({ url: url, bodyParam: bodyParam });
        };
        IdentityUserService.prototype.removeRoles = function (userId, removedRoles) {
            var url = this.buildUserUrl() + '/' + userId + '/role-mappings/realm';
            var bodyParam = JSON.stringify(removedRoles);
            return this.oAuth2Service.delete({ url: url, bodyParam: bodyParam });
        };
        return IdentityUserService;
    }());
    IdentityUserService.ɵprov = i0.ɵɵdefineInjectable({ factory: function IdentityUserService_Factory() { return new IdentityUserService(i0.ɵɵinject(JwtHelperService), i0.ɵɵinject(OAuth2Service), i0.ɵɵinject(AppConfigService)); }, token: IdentityUserService, providedIn: "root" });
    IdentityUserService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    IdentityUserService.ctorParameters = function () { return [
        { type: JwtHelperService },
        { type: OAuth2Service },
        { type: AppConfigService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var UserInfoComponent = /** @class */ (function () {
        function UserInfoComponent(ecmUserService, bpmUserService, identityUserService, authService) {
            this.ecmUserService = ecmUserService;
            this.bpmUserService = bpmUserService;
            this.identityUserService = identityUserService;
            this.authService = authService;
            this.ecmBackgroundImage = './assets/images/ecm-background.png';
            this.bpmBackgroundImage = './assets/images/bpm-background.png';
            this.menuPositionX = 'after';
            this.menuPositionY = 'below';
            this.showName = true;
            this.namePosition = 'right';
            this.destroy$ = new rxjs.Subject();
        }
        UserInfoComponent.prototype.ngOnInit = function () {
            this.getUserInfo();
        };
        UserInfoComponent.prototype.ngOnDestroy = function () {
            this.destroy$.next(true);
            this.destroy$.complete();
        };
        UserInfoComponent.prototype.getUserInfo = function () {
            if (this.authService.isOauth()) {
                this.loadIdentityUserInfo();
                this.mode = 'SSO';
                if (this.authService.isEcmLoggedIn()) {
                    this.loadEcmUserInfo();
                }
            }
            else if (this.isAllLoggedIn()) {
                this.loadEcmUserInfo();
                this.loadBpmUserInfo();
                this.mode = 'ALL';
            }
            else if (this.isEcmLoggedIn()) {
                this.loadEcmUserInfo();
                this.mode = 'CONTENT';
            }
            else if (this.isBpmLoggedIn()) {
                this.loadBpmUserInfo();
                this.mode = 'PROCESS';
            }
        };
        UserInfoComponent.prototype.onKeyPress = function (event) {
            this.closeUserModal(event);
        };
        UserInfoComponent.prototype.closeUserModal = function ($event) {
            if ($event.keyCode === 27) {
                this.trigger.closeMenu();
            }
        };
        Object.defineProperty(UserInfoComponent.prototype, "isLoggedIn", {
            get: function () {
                if (this.authService.isKerberosEnabled()) {
                    return true;
                }
                return this.authService.isLoggedIn();
            },
            enumerable: false,
            configurable: true
        });
        UserInfoComponent.prototype.loadEcmUserInfo = function () {
            this.ecmUser$ = this.ecmUserService.getCurrentUserInfo();
        };
        UserInfoComponent.prototype.loadBpmUserInfo = function () {
            this.bpmUser$ = this.bpmUserService.getCurrentUserInfo();
        };
        UserInfoComponent.prototype.loadIdentityUserInfo = function () {
            this.identityUser$ = rxjs.of(this.identityUserService.getCurrentUserInfo());
        };
        UserInfoComponent.prototype.isAllLoggedIn = function () {
            return (this.authService.isEcmLoggedIn() && this.authService.isBpmLoggedIn()) || (this.authService.isALLProvider() && this.authService.isKerberosEnabled());
        };
        UserInfoComponent.prototype.isBpmLoggedIn = function () {
            return this.authService.isBpmLoggedIn() || (this.authService.isECMProvider() && this.authService.isKerberosEnabled());
        };
        UserInfoComponent.prototype.isEcmLoggedIn = function () {
            return this.authService.isEcmLoggedIn() || (this.authService.isECMProvider() && this.authService.isKerberosEnabled());
        };
        UserInfoComponent.prototype.stopClosing = function (event) {
            event.stopPropagation();
        };
        UserInfoComponent.prototype.getEcmAvatar = function (avatarId) {
            return this.ecmUserService.getUserProfileImage(avatarId);
        };
        UserInfoComponent.prototype.getBpmUserImage = function () {
            return this.bpmUserService.getCurrentUserProfileImage();
        };
        Object.defineProperty(UserInfoComponent.prototype, "showOnRight", {
            get: function () {
                return this.namePosition === 'right';
            },
            enumerable: false,
            configurable: true
        });
        return UserInfoComponent;
    }());
    UserInfoComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-userinfo',
                    template: "<div id=\"userinfo_container\" [class.adf-userinfo-name-right]=\"showOnRight\" (keyup)=\"onKeyPress($event)\"\n     class=\"adf-userinfo-container\" *ngIf=\"isLoggedIn\">\n\n    <ng-container *ngIf=\"showName\">\n        <span *ngIf=\"identityUser$ | async as identityUser; else showBpmAndEcmUserFullNames\"\n              id=\"adf-userinfo-identity-name-display\"\n              class=\"adf-userinfo-name\">{{identityUser | fullName}}</span>\n        <ng-template #showBpmAndEcmUserFullNames>\n            <span *ngIf=\"ecmUser$ | async as ecmUser; else showBpmUserFullName\" id=\"adf-userinfo-ecm-name-display\"\n                  class=\"adf-userinfo-name\">{{ecmUser | fullName}}</span>\n            <ng-template #showBpmUserFullName>\n                <span *ngIf=\"bpmUser$ | async as bpmUser\" id=\"adf-userinfo-bpm-name-display\"\n                      class=\"adf-userinfo-name\">{{bpmUser | fullName}}</span>\n            </ng-template>\n        </ng-template>\n    </ng-container>\n\n    <button mat-button [matMenuTriggerFor]=\"menu\" class=\"adf-userinfo-menu_button\"\n            data-automation-id=\"adf-user-profile\">\n        <div class=\"adf-userinfo-button-profile\" id=\"user-profile\">\n            <div *ngIf=\"identityUser$ | async as identityUser; else showBpmAndEcmUserImage\" id=\"identity-user-image\">\n                <div *ngIf=\"(ecmUser$ | async)?.avatarId as avatarId; else initialTemplate\">\n                    <div class=\"adf-userinfo-profile-container\">\n                        <img id=\"logged-user-img\" [src]=\"getEcmAvatar(avatarId)\" alt=\"user-info-profile-button\"\n                             class=\"adf-userinfo-profile-image\"/>\n                    </div>\n                </div>\n                <ng-template #initialTemplate>\n                    <div [innerHTML]=\"identityUser | usernameInitials:'adf-userinfo-pic'\"></div>\n                </ng-template>\n            </div>\n            <ng-template #showBpmAndEcmUserImage>\n                <div *ngIf=\"ecmUser$ | async as ecmUser; else showBpmUserImage\" id=\"ecm-user-image\">\n                    <div *ngIf=\"ecmUser.avatarId; else initialTemplate\" class=\"adf-userinfo-profile-container\">\n                        <img id=\"logged-user-img\" [src]=\"getEcmAvatar(ecmUser.avatarId)\" alt=\"user-info-profile-button\"\n                             class=\"adf-userinfo-profile-image\"/>\n                    </div>\n                    <ng-template #initialTemplate>\n                        <div [outerHTML]=\"ecmUser | usernameInitials:'adf-userinfo-pic'\"></div>\n                    </ng-template>\n                </div>\n                <ng-template #showBpmUserImage>\n                    <div *ngIf=\"bpmUser$ | async as bpmUser\" id=\"bpm-user-image\">\n                        <div *ngIf=\"bpmUser.pictureId; else initialTemplate\" class=\"adf-userinfo-profile-container\">\n                            <img id=\"logged-user-img\" [src]=\"getBpmUserImage()\" alt=\"user-info-profile-button\"\n                                 class=\"adf-userinfo-profile-image\"/>\n                        </div>\n                        <ng-template #initialTemplate>\n                            <div [outerHTML]=\"bpmUser | usernameInitials:'adf-userinfo-pic'\"></div>\n                        </ng-template>\n                    </div>\n                </ng-template>\n            </ng-template>\n        </div>\n    </button>\n    <mat-menu #menu=\"matMenu\" id=\"user-profile-lists\" [xPosition]=\"menuPositionX\" [yPosition]=\"menuPositionY\"\n              [overlapTrigger]=\"false\" class=\"adf-userinfo-menu\">\n        <mat-tab-group id=\"tab-group-env\" (click)=\"stopClosing($event)\" selectedIndex=\"0\"\n                       class=\"adf-userinfo-tab\" [class.adf-hide-tab]=\"!(bpmUser$ | async) || !(ecmUser$ | async)\">\n            <mat-tab id=\"ecm-panel\" label=\"{{ 'USER_PROFILE.TAB.CS' | translate }}\"\n                     *ngIf=\"mode==='CONTENT' || mode==='ALL'\">\n                <mat-card class=\"adf-userinfo-card\" *ngIf=\"ecmUser$ | async as ecmUser\">\n                    <mat-card-header class=\"adf-userinfo-card-header\"\n                                     [style.background-image]=\"'url(' + ecmBackgroundImage + ')'\">\n                        <div *ngIf=\"ecmUser.avatarId; else initialTemplate\"\n                             class=\"adf-userinfo-profile-container adf-hide-small\">\n                            <img class=\"adf-userinfo-profile-picture\" id=\"ecm-user-detail-image\"\n                                 alt=\"ecm-profile-image\" [src]=\"getEcmAvatar(ecmUser.avatarId)\"/>\n                        </div>\n                        <ng-template #initialTemplate>\n                            <div\n                                [outerHTML]=\"ecmUser | usernameInitials:'adf-userinfo-profile-initials adf-hide-small'\"></div>\n                        </ng-template>\n\n                        <div class=\"adf-userinfo-title\" id=\"ecm-username\">{{ecmUser | fullName}}</div>\n                    </mat-card-header>\n                    <mat-card-content>\n                        <div class=\"adf-userinfo-supporting-text\">\n                            <div class=\"adf-userinfo-detail\">\n                                <span id=\"ecm-full-name\"\n                                      class=\"adf-userinfo__detail-title\">{{ecmUser | fullName}}</span>\n                                <span class=\"adf-userinfo__detail-profile\" id=\"ecm-email\"> {{ecmUser.email}} </span>\n                            </div>\n                            <div class=\"adf-userinfo-detail\">\n                                    <span class=\"adf-userinfo__secondary-info\" id=\"ecm-job-title-label\">\n                                        {{ 'USER_PROFILE.LABELS.ECM.JOB_TITLE' | translate }}\n                                        <span id=\"ecm-job-title\"\n                                              class=\"adf-userinfo__detail-profile\"> {{ ecmUser.jobTitle ? ecmUser.jobTitle : 'N/A' }} </span>\n                                    </span>\n                            </div>\n                        </div>\n                    </mat-card-content>\n                </mat-card>\n            </mat-tab>\n            <mat-tab id=\"bpm-panel\" label=\"{{ 'USER_PROFILE.TAB.PS' | translate }}\"\n                     *ngIf=\"mode==='PROCESS' || mode==='ALL'\">\n                <mat-card class=\"adf-userinfo-card\" *ngIf=\"bpmUser$ | async as bpmUser\">\n                    <mat-card-header class=\"adf-userinfo-card-header\"\n                                     [style.background-image]=\"'url(' + bpmBackgroundImage + ')'\">\n                        <img *ngIf=\"bpmUser.pictureId; else initialTemplate\"\n                             class=\"adf-userinfo-profile-picture adf-hide-small\" id=\"bpm-user-detail-image\"\n                             alt=\"bpm-profile-image\" [src]=\"getBpmUserImage()\"/>\n                        <ng-template #initialTemplate>\n                            <div\n                                [outerHTML]=\"bpmUser | usernameInitials:'adf-userinfo-profile-initials adf-hide-small'\"></div>\n                        </ng-template>\n                        <div class=\"adf-userinfo-title\" id=\"bpm-username\">{{bpmUser | fullName}}</div>\n                    </mat-card-header>\n                    <mat-card-content>\n                        <div class=\"adf-userinfo-supporting-text\">\n                            <div class=\"adf-userinfo-detail\">\n                                <span id=\"bpm-full-name\"\n                                      class=\"adf-userinfo__detail-title\">{{ bpmUser | fullName }}</span>\n                                <span class=\"adf-userinfo__detail-profile\" id=\"bpm-email\"> {{bpmUser.email}} </span>\n                            </div>\n                            <div class=\"adf-userinfo-detail\">\n                                <span id=\"bpm-tenant\" class=\"adf-userinfo__secondary-info\">\n                                    {{ 'USER_PROFILE.LABELS.BPM.TENANT' | translate }}\n                                    <span\n                                        class=\"adf-userinfo__detail-profile\">{{ bpmUser.tenantName ? bpmUser.tenantName : '' }}</span>\n                                </span>\n                            </div>\n                        </div>\n                    </mat-card-content>\n                </mat-card>\n            </mat-tab>\n            <mat-tab id=\"identity-panel\" *ngIf=\"mode==='SSO'\">\n                <mat-card class=\"adf-userinfo-card\" *ngIf=\"identityUser$ | async as identityUser\">\n                    <mat-card-header class=\"adf-userinfo-card-header\"\n                                     [style.background-image]=\"'url(' + bpmBackgroundImage + ')'\">\n                        <div *ngIf=\"ecmUser$ | async as ecmUser\">\n                            <div *ngIf=\"ecmUser.avatarId; else initialTemplate\"\n                                 class=\"adf-userinfo-profile-container adf-hide-small\">\n                                <img class=\"adf-userinfo-profile-picture\" id=\"ecm-user-detail-image\"\n                                     alt=\"ecm-profile-image\" [src]=\"getEcmAvatar(ecmUser.avatarId)\"/>\n                            </div>\n                        </div>\n                        <ng-template #initialTemplate>\n                            <div\n                                [outerHTML]=\"identityUser | usernameInitials:'adf-userinfo-profile-initials adf-hide-small'\"></div>\n                        </ng-template>\n                        <div class=\"adf-userinfo-title\" id=\"identity-username\">{{identityUser | fullName}}</div>\n                    </mat-card-header>\n                    <mat-card-content>\n                        <div class=\"adf-userinfo-supporting-text\">\n                            <div class=\"adf-userinfo-detail\">\n                                <span id=\"identity-full-name\"\n                                      class=\"adf-userinfo__detail-title\">{{identityUser | fullName}}</span>\n                                <span class=\"adf-userinfo__detail-profile\"\n                                      id=\"identity-email\"> {{identityUser.email}} </span>\n                            </div>\n                        </div>\n                    </mat-card-content>\n                </mat-card>\n            </mat-tab>\n        </mat-tab-group>\n    </mat-menu>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-userinfo-container{align-items:center;display:flex;padding:0 5px}.adf-userinfo-name-right{flex-direction:row-reverse}.adf-userinfo-name{padding:0 5px}@media screen and (max-width:959px){.adf-userinfo-name{display:none}}.adf-userinfo-pic{border-radius:100px;display:inline-block;font-size:18px;font-weight:bolder;line-height:40px;text-transform:uppercase}.adf-userinfo-pic,.adf-userinfo-profile-image{background:var(--adf-user-info-color);height:40px;text-align:center;vertical-align:middle;width:40px}.adf-userinfo-profile-image{border-radius:90%;cursor:pointer;margin-left:0;margin-right:0}.adf-userinfo-profile-container{display:inline-block}.adf-userinfo-menu_button.mat-button{border-radius:90%;height:40px;margin-right:0;min-width:40px;padding:0}.adf-userinfo-tab .mat-tab-header{align-self:center;min-width:250px;width:100%}.adf-userinfo-tab .mat-tab-label{flex:auto;font-size:14px;font-weight:500;line-height:48px;text-align:center;text-transform:uppercase}.adf-userinfo-card-header{align-items:center;box-sizing:border-box;display:flex;height:100px;justify-content:stretch;line-height:normal}.adf-userinfo-card.mat-card{padding:0}.adf-userinfo-supporting-text{column-count:2;display:flex;font-size:14px;font-weight:400;justify-content:space-between;letter-spacing:0;line-height:18px;overflow:hidden;padding:32px}@media screen and (max-width:599px){.adf-userinfo-supporting-text{padding:10px}}.adf-userinfo-title{font-size:21px}.adf-userinfo__detail-profile{align-items:flex-start;display:block;font-size:14px;font-weight:400;letter-spacing:0;line-height:18px;margin:0;padding:0}.adf-userinfo__detail-title{align-items:flex-start;font-size:16px;font-weight:400;letter-spacing:.04em;line-height:20px;text-overflow:ellipsis}.adf-userinfo__secondary-info{align-items:flex-end;font-size:14px;font-weight:400;letter-spacing:0;line-height:18px}.adf-userinfo-profile-initials,.adf-userinfo-profile-picture{background:var(--adf-user-info-color);background-size:cover;border-radius:50%;height:80px;margin-left:0;margin-right:8px;width:80px}.adf-userinfo-profile-initials{display:flex;font-size:35px;font-weight:400;justify-content:space-around;letter-spacing:0;line-height:78px;overflow:hidden;text-transform:uppercase}.adf-userinfo-button-profile{border:0;display:inline-block;vertical-align:middle}.adf-userinfo-detail{text-align:left}.adf-hide-tab .mat-tab-label-active{display:none!important}@media only screen and (min-device-width:480px){.mat-menu-panel.adf-userinfo-menu{max-height:450px;min-width:450px;overflow:auto;padding:0}}.mat-menu-panel.adf-userinfo-menu .mat-menu-content{padding:0}"]
                },] }
    ];
    UserInfoComponent.ctorParameters = function () { return [
        { type: EcmUserService },
        { type: BpmUserService },
        { type: IdentityUserService },
        { type: AuthenticationService }
    ]; };
    UserInfoComponent.propDecorators = {
        trigger: [{ type: i0.ViewChild, args: [menu.MatMenuTrigger,] }],
        ecmBackgroundImage: [{ type: i0.Input }],
        bpmBackgroundImage: [{ type: i0.Input }],
        menuPositionX: [{ type: i0.Input }],
        menuPositionY: [{ type: i0.Input }],
        showName: [{ type: i0.Input }],
        namePosition: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var UserInfoModule = /** @class */ (function () {
        function UserInfoModule() {
        }
        return UserInfoModule;
    }());
    UserInfoModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        PipeModule
                    ],
                    declarations: [
                        UserInfoComponent
                    ],
                    exports: [
                        UserInfoComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var HostSettingsComponent = /** @class */ (function () {
        function HostSettingsComponent(formBuilder, storageService, alfrescoApiService, appConfig) {
            this.formBuilder = formBuilder;
            this.storageService = storageService;
            this.alfrescoApiService = alfrescoApiService;
            this.appConfig = appConfig;
            this.HOST_REGEX = '^(http|https):\/\/.*[^/]$';
            this.providers = ['BPM', 'ECM', 'ALL'];
            this.showSelectProviders = true;
            this.error = new i0.EventEmitter();
            this.cancel = new i0.EventEmitter();
            this.success = new i0.EventEmitter();
        }
        HostSettingsComponent.prototype.ngOnInit = function () {
            var _this = this;
            if (this.providers.length === 1) {
                this.showSelectProviders = false;
            }
            var providerSelected = this.appConfig.get(exports.AppConfigValues.PROVIDERS);
            var authType = this.appConfig.get(exports.AppConfigValues.AUTHTYPE, 'BASIC');
            this.form = this.formBuilder.group({
                providersControl: [providerSelected, forms.Validators.required],
                authType: authType
            });
            this.addFormGroups();
            if (authType === 'OAUTH') {
                this.addOAuthFormGroup();
                this.addIdentityHostFormControl();
            }
            this.form.get('authType').valueChanges.subscribe(function (value) {
                if (value === 'BASIC') {
                    _this.form.removeControl('oauthConfig');
                    _this.form.removeControl('identityHost');
                }
                else {
                    _this.addOAuthFormGroup();
                    _this.addIdentityHostFormControl();
                }
            });
            this.providersControl.valueChanges.subscribe(function () {
                _this.removeFormGroups();
                _this.addFormGroups();
            });
        };
        HostSettingsComponent.prototype.removeFormGroups = function () {
            this.form.removeControl('bpmHost');
            this.form.removeControl('ecmHost');
        };
        HostSettingsComponent.prototype.addFormGroups = function () {
            this.addBPMFormControl();
            this.addECMFormControl();
        };
        HostSettingsComponent.prototype.addOAuthFormGroup = function () {
            var oauthFormGroup = this.createOAuthFormGroup();
            this.form.addControl('oauthConfig', oauthFormGroup);
        };
        HostSettingsComponent.prototype.addBPMFormControl = function () {
            if ((this.isBPM() || this.isALL() || this.isOAUTH()) && !this.bpmHost) {
                var bpmFormControl = this.createBPMFormControl();
                this.form.addControl('bpmHost', bpmFormControl);
            }
        };
        HostSettingsComponent.prototype.addIdentityHostFormControl = function () {
            var identityHostFormControl = this.createIdentityFormControl();
            this.form.addControl('identityHost', identityHostFormControl);
        };
        HostSettingsComponent.prototype.addECMFormControl = function () {
            if ((this.isECM() || this.isALL()) && !this.ecmHost) {
                var ecmFormControl = this.createECMFormControl();
                this.form.addControl('ecmHost', ecmFormControl);
            }
        };
        HostSettingsComponent.prototype.createOAuthFormGroup = function () {
            var oauth = this.appConfig.get(exports.AppConfigValues.OAUTHCONFIG, {});
            return this.formBuilder.group({
                host: [oauth.host, [forms.Validators.required, forms.Validators.pattern(this.HOST_REGEX)]],
                clientId: [oauth.clientId, forms.Validators.required],
                redirectUri: [oauth.redirectUri, forms.Validators.required],
                redirectUriLogout: [oauth.redirectUriLogout],
                scope: [oauth.scope, forms.Validators.required],
                secret: oauth.secret,
                silentLogin: oauth.silentLogin,
                implicitFlow: oauth.implicitFlow,
                publicUrls: [oauth.publicUrls]
            });
        };
        HostSettingsComponent.prototype.createBPMFormControl = function () {
            return new forms.FormControl(this.appConfig.get(exports.AppConfigValues.BPMHOST), [forms.Validators.required, forms.Validators.pattern(this.HOST_REGEX)]);
        };
        HostSettingsComponent.prototype.createIdentityFormControl = function () {
            return new forms.FormControl(this.appConfig.get(exports.AppConfigValues.IDENTITY_HOST), [forms.Validators.required, forms.Validators.pattern(this.HOST_REGEX)]);
        };
        HostSettingsComponent.prototype.createECMFormControl = function () {
            return new forms.FormControl(this.appConfig.get(exports.AppConfigValues.ECMHOST), [forms.Validators.required, forms.Validators.pattern(this.HOST_REGEX)]);
        };
        HostSettingsComponent.prototype.onCancel = function () {
            this.cancel.emit(true);
        };
        HostSettingsComponent.prototype.onSubmit = function (values) {
            this.storageService.setItem(exports.AppConfigValues.PROVIDERS, values.providersControl);
            if (this.isBPM()) {
                this.saveBPMValues(values);
            }
            else if (this.isECM()) {
                this.saveECMValues(values);
            }
            else if (this.isALL()) {
                this.saveECMValues(values);
                this.saveBPMValues(values);
            }
            if (this.isOAUTH()) {
                this.saveOAuthValues(values);
            }
            this.storageService.setItem(exports.AppConfigValues.AUTHTYPE, values.authType);
            this.alfrescoApiService.reset();
            this.alfrescoApiService.getInstance().invalidateSession();
            this.success.emit(true);
        };
        HostSettingsComponent.prototype.keyDownFunction = function (event) {
            if (event.keyCode === keycodes.ENTER && this.form.valid) {
                this.onSubmit(this.form.value);
            }
        };
        HostSettingsComponent.prototype.saveOAuthValues = function (values) {
            if (values.oauthConfig.publicUrls && (typeof values.oauthConfig.publicUrls === 'string')) {
                values.oauthConfig.publicUrls = values.oauthConfig.publicUrls.split(',');
            }
            this.storageService.setItem(exports.AppConfigValues.OAUTHCONFIG, JSON.stringify(values.oauthConfig));
            this.storageService.setItem(exports.AppConfigValues.IDENTITY_HOST, values.identityHost);
        };
        HostSettingsComponent.prototype.saveBPMValues = function (values) {
            this.storageService.setItem(exports.AppConfigValues.BPMHOST, values.bpmHost);
        };
        HostSettingsComponent.prototype.saveECMValues = function (values) {
            this.storageService.setItem(exports.AppConfigValues.ECMHOST, values.ecmHost);
        };
        HostSettingsComponent.prototype.isBPM = function () {
            return this.providersControl.value === 'BPM';
        };
        HostSettingsComponent.prototype.isECM = function () {
            return this.providersControl.value === 'ECM';
        };
        HostSettingsComponent.prototype.isALL = function () {
            return this.providersControl.value === 'ALL';
        };
        HostSettingsComponent.prototype.isOAUTH = function () {
            return this.form.get('authType').value === 'OAUTH';
        };
        Object.defineProperty(HostSettingsComponent.prototype, "providersControl", {
            get: function () {
                return this.form.get('providersControl');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "bpmHost", {
            get: function () {
                return this.form.get('bpmHost');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "ecmHost", {
            get: function () {
                return this.form.get('ecmHost');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "host", {
            get: function () {
                return this.oauthConfig.get('host');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "identityHost", {
            get: function () {
                return this.form.get('identityHost');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "clientId", {
            get: function () {
                return this.oauthConfig.get('clientId');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "scope", {
            get: function () {
                return this.oauthConfig.get('scope');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "secretId", {
            get: function () {
                return this.oauthConfig.get('secretId');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "implicitFlow", {
            get: function () {
                return this.oauthConfig.get('implicitFlow');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "silentLogin", {
            get: function () {
                return this.oauthConfig.get('silentLogin');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "redirectUri", {
            get: function () {
                return this.oauthConfig.get('redirectUri');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "publicUrls", {
            get: function () {
                return this.oauthConfig.get('publicUrls');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "redirectUriLogout", {
            get: function () {
                return this.oauthConfig.get('redirectUriLogout');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(HostSettingsComponent.prototype, "oauthConfig", {
            get: function () {
                return this.form.get('oauthConfig');
            },
            enumerable: false,
            configurable: true
        });
        return HostSettingsComponent;
    }());
    HostSettingsComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-host-settings',
                    template: "<div class=\"adf-setting-container\">\n    <mat-toolbar color=\"primary\" class=\"adf-setting-toolbar\">\n        <h3>{{'CORE.HOST_SETTINGS.TITLE' | translate}}</h3>\n    </mat-toolbar>\n    <mat-card class=\"adf-setting-card\">\n        <form id=\"host-form\" [formGroup]=\"form\" (submit)=\"onSubmit(form.value)\" (keydown)=\"keyDownFunction($event)\">\n\n            <mat-form-field *ngIf=\"showSelectProviders\">\n                <mat-select  id=\"adf-provider-selector\" placeholder=\"Provider\" [formControl]=\"providersControl\">\n                    <mat-option *ngFor=\"let provider of providers\" [value]=\"provider\">\n                        {{ provider }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n            <div class=\"adf-authentication-type\">\n                <div> {{'CORE.HOST_SETTINGS.TYPE-AUTH' | translate }} : </div>\n                <mat-radio-group formControlName=\"authType\" >\n                <mat-radio-button value=\"BASIC\">{{'CORE.HOST_SETTINGS.BASIC' | translate }}\n                </mat-radio-button>\n                <mat-radio-button value=\"OAUTH\">{{'CORE.HOST_SETTINGS.SSO' | translate }}\n                </mat-radio-button>\n            </mat-radio-group>\n            </div>\n\n            <ng-container *ngIf=\"isALL() || isECM()\">\n                <mat-card-content>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{'CORE.HOST_SETTINGS.CS-HOST' | translate }}</mat-label>\n                        <input matInput [formControl]=\"ecmHost\" data-automation-id=\"ecmHost\" type=\"text\"\n                               id=\"ecmHost\" placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"ecmHost.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"ecmHost.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                    <p>\n                </mat-card-content>\n            </ng-container>\n\n            <ng-container *ngIf=\"isALL() || isBPM()\">\n                <mat-card-content>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{'CORE.HOST_SETTINGS.BP-HOST' | translate }}</mat-label>\n                        <input matInput [formControl]=\"bpmHost\" data-automation-id=\"bpmHost\" type=\"text\"\n                               id=\"bpmHost\" placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"bpmHost.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"bpmHost.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                </mat-card-content>\n            </ng-container>\n\n            <ng-container *ngIf=\"isOAUTH()\">\n                <mat-card-content>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>Identity Host</mat-label>\n                        <input matInput name=\"identityHost\" id=\"identityHost\" formControlName=\"identityHost\"\n                                placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"identityHost.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"identityHost.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                </mat-card-content>\n            </ng-container>\n\n            <ng-container *ngIf=\"isOAUTH()\">\n                <div formGroupName=\"oauthConfig\">\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>Auth Host</mat-label>\n                        <input matInput name=\"host\" id=\"oauthHost\" formControlName=\"host\"\n                               placeholder=\"http(s)://host|ip:port(/path)\">\n                        <mat-error *ngIf=\"host.hasError('pattern')\">\n                            {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                        </mat-error>\n                        <mat-error *ngIf=\"host.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.CLIENT'| translate }}</mat-label>\n                        <input matInput name=\"clientId\" id=\"clientId\" formControlName=\"clientId\"\n                               placeholder=\"Client Id\">\n                        <mat-error *ngIf=\"clientId.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.SCOPE'| translate }}</mat-label>\n                        <input matInput name=\"{{ 'CORE.HOST_SETTINGS.SCOPE'| translate }}\"\n                               formControlName=\"scope\" placeholder=\"Scope Id\">\n                        <mat-error *ngIf=\"scope.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n\n                    <label for=\"silentLogin\">{{ 'CORE.HOST_SETTINGS.SILENT'| translate }}</label>\n                    <mat-slide-toggle class=\"adf-full-width\" name=\"silentLogin\" [color]=\"'primary'\"\n                                      formControlName=\"silentLogin\">\n                    </mat-slide-toggle>\n\n                    <label for=\"implicitFlow\">{{ 'CORE.HOST_SETTINGS.IMPLICIT-FLOW'| translate }}</label>\n                    <mat-slide-toggle class=\"adf-full-width\" name=\"implicitFlow\" [color]=\"'primary'\"\n                                      formControlName=\"implicitFlow\">\n                    </mat-slide-toggle>\n\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.REDIRECT'| translate }}</mat-label>\n                        <input matInput placeholder=\"{{ 'CORE.HOST_SETTINGS.REDIRECT'| translate }}\"\n                               name=\"redirectUri\" formControlName=\"redirectUri\">\n                        <mat-error *ngIf=\"redirectUri.hasError('required')\">\n                            {{ 'CORE.HOST_SETTINGS.REQUIRED'| translate }}\n                        </mat-error>\n                    </mat-form-field>\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.REDIRECT_LOGOUT'| translate }}</mat-label>\n                        <input id=\"logout-url\" matInput placeholder=\"{{ 'CORE.HOST_SETTINGS.REDIRECT_LOGOUT'| translate }}\"\n                               name=\"redirectUriLogout\" formControlName=\"redirectUriLogout\">\n                    </mat-form-field>\n\n                    <mat-form-field class=\"adf-full-width\">\n                        <mat-label>{{ 'CORE.HOST_SETTINGS.PUBLIC_URLS'| translate }}</mat-label>\n                        <input id=\"public-url\" matInput placeholder=\"{{ 'CORE.HOST_SETTINGS.PUBLIC_URLS'| translate }}\"\n                               name=\"publicUrls\" formControlName=\"publicUrls\">\n                    </mat-form-field>\n\n                </div>\n            </ng-container>\n            <mat-card-actions class=\"adf-actions\">\n                <button mat-button (click)=\"onCancel()\" color=\"primary\">\n                    {{'CORE.HOST_SETTINGS.BACK' | translate }}\n                </button>\n                <button type=\"submit\" id=\"host-button\" class=\"adf-login-button\" mat-raised-button\n                        color=\"primary\" data-automation-id=\"host-button\"\n                        [disabled]=\"!form.valid\">\n                    {{'CORE.HOST_SETTINGS.APPLY' | translate }}\n                </button>\n            </mat-card-actions>\n        </form>\n    </mat-card>\n</div>\n",
                    host: {
                        'class': 'adf-host-settings'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-host-settings{align-items:center;display:flex;min-height:100%}.adf-host-settings .adf-authentication-type{margin-bottom:20px;margin-top:10px}.adf-host-settings .adf-setting-container{border-collapse:collapse;border-spacing:0;display:table;margin:0 auto;width:800px}.adf-host-settings .adf-setting-card-padding{display:table-cell;margin:0;vertical-align:middle;width:50%}.adf-host-settings .adf-settings-link-icon{margin-right:10px;position:relative;top:6px}.adf-host-settings .adf-settings-actions{display:flex;justify-content:flex-end}.adf-host-settings .adf-full-width{width:100%}"]
                },] }
    ];
    HostSettingsComponent.ctorParameters = function () { return [
        { type: forms.FormBuilder },
        { type: StorageService },
        { type: AlfrescoApiService },
        { type: AppConfigService }
    ]; };
    HostSettingsComponent.propDecorators = {
        providers: [{ type: i0.Input }],
        error: [{ type: i0.Output }],
        cancel: [{ type: i0.Output }],
        success: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var HostSettingsModule = /** @class */ (function () {
        function HostSettingsModule() {
        }
        return HostSettingsModule;
    }());
    HostSettingsModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule
                    ],
                    declarations: [
                        HostSettingsComponent
                    ],
                    exports: [
                        HostSettingsComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PaginationComponent = /** @class */ (function () {
        function PaginationComponent(elementRef, renderer, cdr, userPreferencesService, translate) {
            this.elementRef = elementRef;
            this.renderer = renderer;
            this.cdr = cdr;
            this.userPreferencesService = userPreferencesService;
            this.translate = translate;
            this._isEmpty = true;
            this._hasItems = false;
            this.change = new i0.EventEmitter();
            this.changePageNumber = new i0.EventEmitter();
            this.changePageSize = new i0.EventEmitter();
            this.nextPage = new i0.EventEmitter();
            this.prevPage = new i0.EventEmitter();
            this.onDestroy$ = new rxjs.Subject();
        }
        Object.defineProperty(PaginationComponent.prototype, "pagination", {
            get: function () {
                return this._pagination;
            },
            set: function (value) {
                value = value || PaginationComponent.DEFAULT_PAGINATION;
                this._pagination = value;
                this._hasItems = value && value.count > 0;
                this._isEmpty = !this.hasItems;
                if (this._isEmpty) {
                    this.renderer.addClass(this.elementRef.nativeElement, 'adf-pagination__empty');
                }
                else {
                    this.renderer.removeClass(this.elementRef.nativeElement, 'adf-pagination__empty');
                }
                this.cdr.detectChanges();
            },
            enumerable: false,
            configurable: true
        });
        PaginationComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select(exports.UserPreferenceValues.PaginationSize)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (maxItems) {
                _this.pagination = Object.assign(Object.assign(Object.assign({}, PaginationComponent.DEFAULT_PAGINATION), _this.pagination), { maxItems: maxItems });
            });
            if (!this.supportedPageSizes) {
                this.supportedPageSizes = this.userPreferencesService.supportedPageSizes;
            }
            if (this.target) {
                this.target.pagination
                    .pipe(operators.takeUntil(this.onDestroy$))
                    .subscribe(function (pagination) {
                    if (pagination.count === 0 && !_this.isFirstPage) {
                        _this.goPrevious();
                    }
                    _this.pagination = Object.assign({}, pagination);
                });
            }
            if (!this.pagination) {
                this.pagination = Object.assign({}, PaginationComponent.DEFAULT_PAGINATION);
            }
        };
        Object.defineProperty(PaginationComponent.prototype, "lastPage", {
            get: function () {
                var _a = this.pagination, maxItems = _a.maxItems, totalItems = _a.totalItems;
                return (totalItems && maxItems)
                    ? Math.ceil(totalItems / maxItems)
                    : 1;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "current", {
            get: function () {
                var _a = this.pagination, maxItems = _a.maxItems, skipCount = _a.skipCount;
                return (skipCount && maxItems)
                    ? Math.floor(skipCount / maxItems) + 1
                    : 1;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "isLastPage", {
            get: function () {
                if (!this.pagination.totalItems && this.pagination.hasMoreItems) {
                    return false;
                }
                return this.current === this.lastPage;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "isFirstPage", {
            get: function () {
                return this.current === 1;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "next", {
            get: function () {
                return this.isLastPage ? this.current : this.current + 1;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "previous", {
            get: function () {
                return this.isFirstPage ? 1 : this.current - 1;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "hasItems", {
            get: function () {
                return this._hasItems;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "isEmpty", {
            get: function () {
                return this._isEmpty;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "range", {
            get: function () {
                var _a = this.pagination, skipCount = _a.skipCount, maxItems = _a.maxItems, totalItems = _a.totalItems;
                var start = 0;
                if (totalItems || totalItems !== 0) {
                    start = skipCount + 1;
                }
                var end = this.isLastPage ? totalItems : skipCount + maxItems;
                return [start, end];
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "pages", {
            get: function () {
                return Array(this.lastPage)
                    .fill('n')
                    .map(function (_, index) { return (index + 1); });
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PaginationComponent.prototype, "itemRangeText", {
            get: function () {
                var rangeString = this.range.join('-');
                var translation = this.translate.instant('CORE.PAGINATION.ITEMS_RANGE', {
                    range: rangeString,
                    total: this.pagination.totalItems
                });
                if (!this.pagination.totalItems) {
                    translation = translation.substr(0, translation.indexOf(rangeString) + rangeString.length);
                }
                return translation;
            },
            enumerable: false,
            configurable: true
        });
        PaginationComponent.prototype.goNext = function () {
            if (this.hasItems) {
                var maxItems = this.pagination.maxItems;
                var skipCount = (this.next - 1) * maxItems;
                this.pagination = Object.assign(Object.assign({}, this.pagination), { skipCount: skipCount });
                this.handlePaginationEvent('NEXT_PAGE');
            }
        };
        PaginationComponent.prototype.goPrevious = function () {
            if (this.hasItems) {
                var maxItems = this.pagination.maxItems;
                var skipCount = (this.previous - 1) * maxItems;
                this.pagination = Object.assign(Object.assign({}, this.pagination), { skipCount: skipCount });
                this.handlePaginationEvent('PREV_PAGE');
            }
        };
        PaginationComponent.prototype.onChangePageNumber = function (pageNumber) {
            if (this.hasItems) {
                var maxItems = this.pagination.maxItems;
                var skipCount = (pageNumber - 1) * maxItems;
                this.pagination = Object.assign(Object.assign({}, this.pagination), { skipCount: skipCount });
                this.handlePaginationEvent('CHANGE_PAGE_NUMBER');
            }
        };
        PaginationComponent.prototype.onChangePageSize = function (maxItems) {
            this.pagination = Object.assign(Object.assign({}, this.pagination), { skipCount: 0, maxItems: maxItems });
            this.userPreferencesService.paginationSize = maxItems;
            this.handlePaginationEvent('CHANGE_PAGE_SIZE');
        };
        PaginationComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        PaginationComponent.prototype.handlePaginationEvent = function (action) {
            var paginationModel = Object.assign({}, this.pagination);
            if (action === 'NEXT_PAGE') {
                this.nextPage.emit(paginationModel);
            }
            if (action === 'PREV_PAGE') {
                this.prevPage.emit(paginationModel);
            }
            if (action === 'CHANGE_PAGE_NUMBER') {
                this.changePageNumber.emit(paginationModel);
            }
            if (action === 'CHANGE_PAGE_SIZE') {
                this.changePageSize.emit(paginationModel);
            }
            this.change.emit(paginationModel);
            if (this.target) {
                this.target.updatePagination(paginationModel);
            }
        };
        return PaginationComponent;
    }());
    PaginationComponent.DEFAULT_PAGINATION = {
        skipCount: 0,
        maxItems: 25,
        totalItems: 0,
        count: 0,
        hasMoreItems: false
    };
    PaginationComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-pagination',
                    host: { 'class': 'adf-pagination' },
                    template: "<ng-container *ngIf=\"hasItems\">\n    <div class=\"adf-pagination__block adf-pagination__range-block\">\n        <span class=\"adf-pagination__range\">\n            {{ itemRangeText }}\n        </span>\n    </div>\n\n    <div class=\"adf-pagination__block adf-pagination__perpage-block\">\n        <span>\n            {{ 'CORE.PAGINATION.ITEMS_PER_PAGE' | translate }}\n        </span>\n\n        <span class=\"adf-pagination__max-items\">\n            {{ pagination.maxItems }}\n        </span>\n\n        <button\n            mat-icon-button\n            [attr.aria-label]=\"'CORE.PAGINATION.ARIA.ITEMS_PER_PAGE' | translate\"\n            [matMenuTriggerFor]=\"pageSizeMenu\">\n            <mat-icon>arrow_drop_down</mat-icon>\n        </button>\n\n        <mat-menu #pageSizeMenu=\"matMenu\" class=\"adf-pagination__page-selector\">\n            <button\n                mat-menu-item\n                *ngFor=\"let pageSize of supportedPageSizes\"\n                (click)=\"onChangePageSize(pageSize)\">\n                {{ pageSize }}\n            </button>\n        </mat-menu>\n    </div>\n\n    <div class=\"adf-pagination__block adf-pagination__actualinfo-block\">\n        <span class=\"adf-pagination__current-page\">\n            {{ 'CORE.PAGINATION.CURRENT_PAGE' | translate: { number: current } }}\n        </span>\n\n        <button\n            mat-icon-button\n            data-automation-id=\"page-selector\"\n            [attr.aria-label]=\"'CORE.PAGINATION.ARIA.CURRENT_PAGE' | translate\"\n            [matMenuTriggerFor]=\"pagesMenu\"\n            *ngIf=\"pages.length > 1\">\n            <mat-icon>arrow_drop_down</mat-icon>\n        </button>\n\n        <div *ngIf=\"pagination.totalItems\">\n            <span class=\"adf-pagination__total-pages\">\n                {{ 'CORE.PAGINATION.TOTAL_PAGES' | translate: { total: pages.length } }}\n            </span>\n        </div>\n\n        <mat-menu #pagesMenu=\"matMenu\" class=\"adf-pagination__page-selector\">\n            <button\n                mat-menu-item\n                *ngFor=\"let pageNumber of pages\"\n                (click)=\"onChangePageNumber(pageNumber)\">\n                {{ pageNumber }}\n            </button>\n        </mat-menu>\n    </div>\n\n    <div class=\"adf-pagination__block adf-pagination__controls-block\">\n        <button\n            class=\"adf-pagination__previous-button\"\n            mat-icon-button\n            [attr.aria-label]=\"'CORE.PAGINATION.ARIA.PREVIOUS_PAGE' | translate\"\n            [disabled]=\"isFirstPage\"\n            (click)=\"goPrevious()\">\n            <mat-icon>keyboard_arrow_left</mat-icon>\n        </button>\n\n        <button\n            class=\"adf-pagination__next-button\"\n            mat-icon-button\n            [attr.aria-label]=\"'CORE.PAGINATION.ARIA.NEXT_PAGE' | translate\"\n            [disabled]=\"isLastPage\"\n            (click)=\"goNext()\">\n            <mat-icon>keyboard_arrow_right</mat-icon>\n        </button>\n    </div>\n</ng-container>\n",
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-pagination{border-top:none;color:var(--theme-text-fg-color);display:flex;height:48px;line-height:20px}.adf-pagination__block{align-items:center;border-right:none;display:flex;padding:0 8px}.adf-pagination__block:first-child{flex:1 1 auto;padding-left:24px}.adf-pagination__block:last-child{border-right-width:0}@media (max-width:599.9px){.adf-pagination{flex-wrap:wrap;justify-content:space-between;padding:0 16px}.adf-pagination__perpage-block,.adf-pagination__range-block{display:none}.adf-pagination__actualinfo-block{border-right:none}.adf-pagination__controls-block{padding-right:0}}.adf-pagination__max-items{margin-left:10px}.adf-pagination__current-page,.adf-pagination__max-items{margin-right:5px}.adf-pagination__current-page,.adf-pagination__current-page+button,.adf-pagination__max-items,.adf-pagination__max-items+button{color:var(--theme-text-fg-color)}.adf-pagination__current-page+button,.adf-pagination__max-items+button{margin-left:-10px}.adf-pagination__next-button,.adf-pagination__previous-button{margin:0 5px}.adf-pagination__page-selector{max-height:250px!important}.adf-pagination.adf-pagination__empty{border-top:none;height:48px}.adf-pagination button[mat-icon-button]{height:32px;line-height:32px;width:32px}"]
                },] }
    ];
    PaginationComponent.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.Renderer2 },
        { type: i0.ChangeDetectorRef },
        { type: UserPreferencesService },
        { type: i1$2.TranslateService }
    ]; };
    PaginationComponent.propDecorators = {
        target: [{ type: i0.Input }],
        supportedPageSizes: [{ type: i0.Input }],
        pagination: [{ type: i0.Input }],
        change: [{ type: i0.Output }],
        changePageNumber: [{ type: i0.Output }],
        changePageSize: [{ type: i0.Output }],
        nextPage: [{ type: i0.Output }],
        prevPage: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var InfinitePaginationComponent = /** @class */ (function () {
        function InfinitePaginationComponent(cdr, userPreferencesService) {
            this.cdr = cdr;
            this.userPreferencesService = userPreferencesService;
            this.onDestroy$ = new rxjs.Subject();
            this.isLoading = false;
            this.loadMore = new i0.EventEmitter();
            this.pagination = InfinitePaginationComponent.DEFAULT_PAGINATION;
            this.requestPaginationModel = {
                skipCount: 0,
                merge: true
            };
        }
        Object.defineProperty(InfinitePaginationComponent.prototype, "target", {
            get: function () {
                return this._target;
            },
            set: function (target) {
                var _this = this;
                if (target) {
                    this._target = target;
                    target.pagination
                        .pipe(operators.takeUntil(this.onDestroy$))
                        .subscribe(function (pagination) {
                        _this.isLoading = false;
                        _this.pagination = pagination;
                        if (!_this.pagination.hasMoreItems) {
                            _this.pagination.hasMoreItems = false;
                        }
                        _this.cdr.detectChanges();
                    });
                }
            },
            enumerable: false,
            configurable: true
        });
        InfinitePaginationComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select(exports.UserPreferenceValues.PaginationSize)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (pageSize) {
                _this.pageSize = _this.pageSize || pageSize;
                _this.requestPaginationModel.maxItems = _this.pageSize;
            });
        };
        InfinitePaginationComponent.prototype.onLoadMore = function () {
            this.requestPaginationModel.skipCount = 0;
            this.requestPaginationModel.merge = false;
            this.requestPaginationModel.maxItems += this.pageSize;
            this.loadMore.next(this.requestPaginationModel);
            if (this._target) {
                this.isLoading = true;
                this._target.updatePagination(this.requestPaginationModel);
            }
        };
        InfinitePaginationComponent.prototype.reset = function () {
            this.pagination.skipCount = 0;
            this.pagination.maxItems = this.pageSize;
            if (this._target) {
                this._target.updatePagination(this.pagination);
            }
        };
        InfinitePaginationComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        return InfinitePaginationComponent;
    }());
    InfinitePaginationComponent.DEFAULT_PAGINATION = new jsApi.Pagination({
        skipCount: 0,
        maxItems: 25,
        totalItems: 0
    });
    InfinitePaginationComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-infinite-pagination',
                    host: { 'class': 'infinite-adf-pagination' },
                    template: "<div *ngIf=\"pagination?.hasMoreItems || isLoading\" class=\"adf-infinite-pagination\">\n\n    <button mat-button\n        *ngIf=\"!isLoading\"\n        class=\"adf-infinite-pagination-load-more\"\n        (click)=\"onLoadMore()\"\n        data-automation-id=\"adf-infinite-pagination-button\">\n            <ng-content></ng-content>\n    </button>\n\n    <mat-progress-bar *ngIf=\"isLoading\"\n        mode=\"indeterminate\"\n        class=\"adf-infinite-pagination-spinner\"\n        data-automation-id=\"adf-infinite-pagination-spinner\"></mat-progress-bar>\n</div>\n",
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-infinite-pagination{display:flex;justify-content:space-around;min-height:56px}.adf-infinite-pagination-load-more{margin-bottom:10px;margin-top:10px}"]
                },] }
    ];
    InfinitePaginationComponent.ctorParameters = function () { return [
        { type: i0.ChangeDetectorRef },
        { type: UserPreferencesService }
    ]; };
    InfinitePaginationComponent.propDecorators = {
        target: [{ type: i0.Input }],
        pageSize: [{ type: i0.Input }],
        isLoading: [{ type: i0.Input, args: ['loading',] }],
        loadMore: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PaginationModule = /** @class */ (function () {
        function PaginationModule() {
        }
        return PaginationModule;
    }());
    PaginationModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        InfinitePaginationComponent,
                        PaginationComponent
                    ],
                    exports: [
                        InfinitePaginationComponent,
                        PaginationComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginErrorEvent = /** @class */ (function () {
        function LoginErrorEvent(err) {
            this.err = err;
        }
        return LoginErrorEvent;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginSubmitEvent = /** @class */ (function () {
        function LoginSubmitEvent(_values) {
            this._defaultPrevented = false;
            this._values = _values;
        }
        Object.defineProperty(LoginSubmitEvent.prototype, "values", {
            get: function () {
                return this._values;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(LoginSubmitEvent.prototype, "defaultPrevented", {
            get: function () {
                return this._defaultPrevented;
            },
            enumerable: false,
            configurable: true
        });
        LoginSubmitEvent.prototype.preventDefault = function () {
            this._defaultPrevented = true;
        };
        return LoginSubmitEvent;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginSuccessEvent = /** @class */ (function () {
        function LoginSuccessEvent(token, username, password) {
            this.token = token;
            this.username = username;
            this.password = password;
        }
        return LoginSuccessEvent;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginSteps;
    (function (LoginSteps) {
        LoginSteps[LoginSteps["Landing"] = 0] = "Landing";
        LoginSteps[LoginSteps["Checking"] = 1] = "Checking";
        LoginSteps[LoginSteps["Welcome"] = 2] = "Welcome";
    })(LoginSteps || (LoginSteps = {}));
    var LoginComponent = /** @class */ (function () {
        function LoginComponent(_fb, authService, translateService, logService, router, appConfig, userPreferences, route, sanitizer, alfrescoApiService) {
            this._fb = _fb;
            this.authService = authService;
            this.translateService = translateService;
            this.logService = logService;
            this.router = router;
            this.appConfig = appConfig;
            this.userPreferences = userPreferences;
            this.route = route;
            this.sanitizer = sanitizer;
            this.alfrescoApiService = alfrescoApiService;
            this.isPasswordShow = false;
            this.showRememberMe = true;
            this.showLoginActions = true;
            this.needHelpLink = '';
            this.registerLink = '';
            this.logoImageUrl = './assets/images/alfresco-logo.svg';
            this.backgroundImageUrl = './assets/images/background.svg';
            this.copyrightText = '\u00A9 2016 Alfresco Software, Inc. All Rights Reserved.';
            this.successRoute = null;
            this.success = new i0.EventEmitter();
            this.error = new i0.EventEmitter();
            this.executeSubmit = new i0.EventEmitter();
            this.implicitFlow = false;
            this.isError = false;
            this.actualLoginStep = LoginSteps.Landing;
            this.LoginSteps = LoginSteps;
            this.rememberMe = true;
            this.minLength = 2;
            this.onDestroy$ = new rxjs.Subject();
        }
        LoginComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.initFormError();
            this.initFormFieldsDefault();
            this.initFormFieldsMessages();
            this.successRoute = this.appConfig.get('successRoute', this.successRoute);
            if (this.authService.isLoggedIn()) {
                this.router.navigate([this.successRoute]);
            }
            else {
                if (this.authService.isOauth()) {
                    var oauth = this.appConfig.get(exports.AppConfigValues.OAUTHCONFIG, null);
                    if (oauth && oauth.silentLogin) {
                        this.redirectToImplicitLogin();
                    }
                    else if (oauth && oauth.implicitFlow) {
                        this.implicitFlow = true;
                    }
                }
                this.route.queryParams.subscribe(function (params) {
                    var url = params['redirectUrl'];
                    var provider = _this.appConfig.get(exports.AppConfigValues.PROVIDERS);
                    _this.authService.setRedirect({ provider: provider, url: url });
                });
            }
            if (this.fieldsValidation) {
                this.form = this._fb.group(this.fieldsValidation);
            }
            this.form.valueChanges
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (data) { return _this.onValueChanged(data); });
        };
        LoginComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        LoginComponent.prototype.submit = function () {
            this.onSubmit(this.form.value);
        };
        LoginComponent.prototype.redirectToImplicitLogin = function () {
            this.alfrescoApiService.getInstance().oauth2Auth.implicitLogin();
        };
        LoginComponent.prototype.onSubmit = function (values) {
            this.disableError();
            var args = new LoginSubmitEvent({
                controls: { username: this.form.controls.username }
            });
            this.executeSubmit.emit(args);
            if (!args.defaultPrevented) {
                this.performLogin(values);
            }
        };
        LoginComponent.prototype.implicitLogin = function () {
            if (this.authService.isLoggedIn()) {
                this.router.navigate([this.successRoute]);
            }
            this.authService.ssoImplicitLogin();
        };
        LoginComponent.prototype.onValueChanged = function (data) {
            this.disableError();
            for (var field in this.formError) {
                if (field) {
                    this.formError[field] = '';
                    var hasError = (this.form.controls[field].errors && data[field] !== '') ||
                        (this.form.controls[field].dirty &&
                            !this.form.controls[field].valid);
                    if (hasError) {
                        for (var key in this.form.controls[field].errors) {
                            if (key) {
                                var message = this._message[field][key];
                                if (message && message.value) {
                                    var translated = this.translateService.instant(message.value, message.params);
                                    this.formError[field] += translated;
                                }
                            }
                        }
                    }
                }
            }
        };
        LoginComponent.prototype.performLogin = function (values) {
            var _this = this;
            this.actualLoginStep = LoginSteps.Checking;
            this.authService
                .login(values.username, values.password, this.rememberMe)
                .subscribe(function (token) {
                var redirectUrl = _this.authService.getRedirect();
                _this.actualLoginStep = LoginSteps.Welcome;
                _this.userPreferences.setStoragePrefix(values.username);
                values.password = null;
                _this.success.emit(new LoginSuccessEvent(token, values.username, null));
                if (redirectUrl) {
                    _this.authService.setRedirect(null);
                    _this.router.navigateByUrl(redirectUrl);
                }
                else if (_this.successRoute) {
                    _this.router.navigate([_this.successRoute]);
                }
            }, function (err) {
                _this.actualLoginStep = LoginSteps.Landing;
                _this.displayErrorMessage(err);
                _this.isError = true;
                _this.error.emit(new LoginErrorEvent(err));
            }, function () { return _this.logService.info('Login done'); });
        };
        LoginComponent.prototype.displayErrorMessage = function (err) {
            if (err.error &&
                err.error.crossDomain &&
                err.error.message.indexOf('Access-Control-Allow-Origin') !== -1) {
                this.errorMsg = err.error.message;
            }
            else if (err.status === 403 &&
                err.message.indexOf('Invalid CSRF-token') !== -1) {
                this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-CSRF';
            }
            else if (err.status === 403 &&
                err.message.indexOf('The system is currently in read-only mode') !==
                    -1) {
                this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ECM-LICENSE';
            }
            else {
                this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-CREDENTIALS';
            }
        };
        LoginComponent.prototype.addCustomFormError = function (field, msg) {
            this.formError[field] += msg;
        };
        LoginComponent.prototype.addCustomValidationError = function (field, ruleId, msg, params) {
            this._message[field][ruleId] = {
                value: msg,
                params: params
            };
        };
        LoginComponent.prototype.toggleShowPassword = function (event) {
            event.stopPropagation();
            this.isPasswordShow = !this.isPasswordShow;
        };
        LoginComponent.prototype.isErrorStyle = function (field) {
            return !field.valid && field.dirty && !field.pristine;
        };
        LoginComponent.prototype.trimUsername = function (event) {
            event.target.value = event.target.value.trim();
        };
        LoginComponent.prototype.getBackgroundUrlImageUrl = function () {
            return this.sanitizer.bypassSecurityTrustStyle("url(" + this.backgroundImageUrl + ")");
        };
        LoginComponent.prototype.initFormError = function () {
            this.formError = {
                username: '',
                password: ''
            };
        };
        LoginComponent.prototype.initFormFieldsMessages = function () {
            this._message = {
                username: {
                    required: {
                        value: 'LOGIN.MESSAGES.USERNAME-REQUIRED'
                    },
                    minlength: {
                        value: 'LOGIN.MESSAGES.USERNAME-MIN',
                        params: {
                            minLength: this.minLength
                        }
                    }
                },
                password: {
                    required: {
                        value: 'LOGIN.MESSAGES.PASSWORD-REQUIRED'
                    }
                }
            };
        };
        LoginComponent.prototype.initFormFieldsDefault = function () {
            this.form = this._fb.group({
                username: ['', forms.Validators.compose([forms.Validators.required, forms.Validators.minLength(this.minLength)])],
                password: ['', forms.Validators.required]
            });
        };
        LoginComponent.prototype.disableError = function () {
            this.isError = false;
            this.initFormError();
        };
        return LoginComponent;
    }());
    LoginComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-login',
                    template: "<div class=\"adf-login-content\" [style.background-image]=\"getBackgroundUrlImageUrl()\">\n    <div class=\"adf-ie11FixerParent\">\n        <div class=\"adf-ie11FixerChild\">\n\n            <mat-card class=\"adf-login-card-wide\">\n                <form id=\"adf-login-form\" [formGroup]=\"form\" (submit)=\"onSubmit(form.value)\" autocomplete=\"off\">\n                    <mat-card-header>\n                        <mat-card-title>\n                            <div class=\"adf-alfresco-logo\">\n                                <!--HEADER TEMPLATE-->\n                                <ng-template *ngIf=\"headerTemplate\"\n                                             ngFor [ngForOf]=\"[data]\"\n                                             [ngForTemplate]=\"headerTemplate\">\n                                </ng-template>\n                                <img *ngIf=\"!headerTemplate\" id=\"adf-login-img-logo\" class=\"adf-img-logo\" [src]=\"logoImageUrl\"\n                                     alt=\"{{'LOGIN.LOGO' | translate }}\">\n                            </div>\n                        </mat-card-title>\n                    </mat-card-header>\n\n                    <mat-card-content class=\"adf-login-controls\">\n\n                        <!--ERRORS AREA-->\n                        <div class=\"adf-error-container\">\n                            <div *ngIf=\"isError\" id=\"login-error\" data-automation-id=\"login-error\"\n                                 class=\"adf-error  adf-error-message\">\n                                <mat-icon class=\"adf-error-icon\">warning</mat-icon>\n                                <span class=\"adf-login-error-message\">{{errorMsg | translate }}</span>\n                            </div>\n                        </div>\n\n                        <div *ngIf=\"!implicitFlow\">\n\n                            <!--USERNAME FIELD-->\n                            <div class=\"adf-login__field\"\n                                 [ngClass]=\"{'adf-is-invalid': isErrorStyle(form.controls.username)}\">\n                                <mat-form-field class=\"adf-full-width\" floatPlaceholder=\"never\" color=\"primary\">\n                                    <input matInput placeholder=\"{{'LOGIN.LABEL.USERNAME' | translate }}\"\n                                           type=\"text\"\n                                           class=\"adf-full-width\"\n                                           formControlName=\"username\"\n                                           autocapitalize=\"none\"\n                                           id=\"username\"\n                                           data-automation-id=\"username\"\n                                           (blur)=\"trimUsername($event)\">\n                                </mat-form-field>\n\n                                <span class=\"adf-login-validation\" for=\"username\" *ngIf=\"formError['username']\">\n                                <span id=\"username-error\" class=\"adf-login-error\" data-automation-id=\"username-error\">{{formError['username'] | translate }}</span>\n                            </span>\n                            </div>\n\n                            <!--PASSWORD FIELD-->\n                            <div class=\"adf-login__field\">\n                                <mat-form-field class=\"adf-full-width\" floatPlaceholder=\"never\" color=\"primary\">\n                                    <input matInput placeholder=\"{{'LOGIN.LABEL.PASSWORD' | translate }}\"\n                                           [type]=\"isPasswordShow ? 'text' : 'password'\"\n                                           formControlName=\"password\"\n                                           id=\"password\"\n                                           data-automation-id=\"password\">\n                                        <button\n                                            matSuffix\n                                            mat-icon-button\n                                            type=\"button\"\n                                            [attr.aria-label]=\"(isPasswordShow ?\n                                                    'LOGIN.ARIA-LABEL.HIDE-PASSWORD':\n                                                    'LOGIN.ARIA-LABEL.SHOW-PASSWORD'\n                                                ) | translate\"\n                                            (click)=\"toggleShowPassword($event)\"\n                                            (keyup.enter)=\"toggleShowPassword($event)\"\n                                            [attr.data-automation-id]=\"isPasswordShow ? 'hide_password':'show_password'\">\n                                           <mat-icon class=\"adf-login-password-icon\">\n                                               {{ isPasswordShow ? 'visibility':'visibility_off' }}\n                                            </mat-icon>\n                                       </button>\n                                </mat-form-field>\n                                <span class=\"adf-login-validation\" for=\"password\" *ngIf=\"formError['password']\">\n                                <span id=\"password-required\" class=\"adf-login-error\"\n                                      data-automation-id=\"password-required\">{{formError['password'] | translate }}</span>\n                            </span>\n                            </div>\n\n                            <!--CUSTOM CONTENT-->\n                            <ng-content></ng-content>\n\n                            <br>\n                            <button type=\"submit\" id=\"login-button\"\n                                    class=\"adf-login-button\"\n                                    mat-raised-button color=\"accent\"\n                                    [class.adf-isChecking]=\"actualLoginStep === LoginSteps.Checking\"\n                                    [class.adf-isWelcome]=\"actualLoginStep === LoginSteps.Welcome\"\n                                    data-automation-id=\"login-button\" [disabled]=\"!form.valid\"\n                                    [attr.aria-label]=\"'LOGIN.BUTTON.LOGIN' | translate\">\n\n                                <span *ngIf=\"actualLoginStep === LoginSteps.Landing\" class=\"adf-login-button-label\">{{ 'LOGIN.BUTTON.LOGIN' | translate }}</span>\n\n                                <div *ngIf=\"actualLoginStep === LoginSteps.Checking\"\n                                     class=\"adf-interactive-login-label\">\n                                    <span\n                                        class=\"adf-login-button-label\">{{ 'LOGIN.BUTTON.CHECKING' | translate }}</span>\n                                    <div class=\"adf-login-spinner-container\">\n                                        <mat-spinner id=\"checking-spinner\" class=\"adf-login-checking-spinner\"\n                                                     [diameter]=\"25\"></mat-spinner>\n                                    </div>\n                                </div>\n\n\n                                <div *ngIf=\"actualLoginStep === LoginSteps.Welcome\" class=\"adf-interactive-login-label\">\n                                    <span class=\"adf-login-button-label\">{{ 'LOGIN.BUTTON.WELCOME' | translate }}</span>\n                                    <mat-icon class=\"adf-welcome-icon\">done</mat-icon>\n                                </div>\n\n                            </button>\n                            <div *ngIf=\"showRememberMe\" class=\"adf-login__remember-me\">\n                                <mat-checkbox id=\"adf-login-remember\" color=\"primary\" class=\"adf-login-remember-me\"\n                                              [checked]=\"rememberMe\"\n                                              (change)=\"rememberMe = !rememberMe\">{{ 'LOGIN.LABEL.REMEMBER' | translate }}\n                                </mat-checkbox>\n                            </div>\n                        </div>\n\n                        <div *ngIf=\"implicitFlow\">\n                            <button type=\"button\" (click)=\"implicitLogin()\" id=\"login-button-sso\"\n                                    [attr.aria-label]=\"'LOGIN.BUTTON.SSO' | translate\"\n                                    class=\"adf-login-button\"\n                                    mat-raised-button color=\"primary\"\n                                    data-automation-id=\"login-button-sso\">\n                                <span  class=\"adf-login-button-label\">{{ 'LOGIN.BUTTON.SSO' | translate }}</span>\n                            </button>\n                        </div>\n\n                    </mat-card-content>\n\n                    <mat-card-actions *ngIf=\"footerTemplate || showLoginActions\">\n\n                        <div class=\"adf-login-action-container\">\n                            <!--FOOTER TEMPLATE-->\n                            <ng-template *ngIf=\"footerTemplate\"\n                                         ngFor [ngForOf]=\"[data]\"\n                                         [ngForTemplate]=\"footerTemplate\">\n                            </ng-template>\n                            <div class=\"adf-login-action\" *ngIf=\"!footerTemplate && showLoginActions\">\n                                <div id=\"adf-login-action-left\" class=\"adf-login-action-left\">\n                                    <a href=\"{{needHelpLink}}\">{{'LOGIN.ACTION.HELP' | translate }}</a>\n                                </div>\n                                <div id=\"adf-login-action-right\" class=\"adf-login-action-right\">\n                                    <a href=\"{{registerLink}}\">{{'LOGIN.ACTION.REGISTER' | translate }}</a>\n                                </div>\n                            </div>\n                        </div>\n                    </mat-card-actions>\n\n                </form>\n            </mat-card>\n\n            <div class=\"adf-copyright\" data-automation-id=\"login-copyright\">\n                {{ copyrightText }}\n            </div>\n\n        </div>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-login' },
                    styles: [".adf-login{display:flex;flex:1;flex-direction:column;height:100%;min-height:0;overflow:hidden}.adf-login-content{background-position:50%;background-size:cover;display:flex;flex-direction:column;justify-content:center;min-height:100%;min-width:320px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.adf-login-content{display:table;height:100%;width:100%}}.adf-login-content .adf-ie11FixerParent{margin-top:16px;min-width:320px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.adf-login-content .adf-ie11FixerParent{display:table-cell;padding-top:16px;vertical-align:middle;width:100%}}.adf-login-content .adf-ie11FixerChild{align-items:center;display:flex;flex-direction:column;justify-content:center;width:100%}.adf-login-content .adf-show{display:block!important}.adf-login-content .adf-hide{display:none!important}.adf-login-content .adf-icon-inline{display:block;left:82%;overflow:hidden;position:absolute;top:31%;width:30px}.adf-login-content .adf-login-card-wide{background-color:var(--theme-dialog-bg-color);border-radius:8px;box-shadow:0 2px 2px 0 rgba(0,0,0,.24),0 0 2px 0 rgba(0,0,0,.12);box-sizing:border-box;min-width:320px;padding:21px 64px 34px;width:450px}@media (max-width:482px){.adf-login-content .adf-login-card-wide{width:calc(100% - 32px)}}.adf-login-content .adf-error-container{height:45px}.adf-login-content .adf-error-message{box-orient:horizontal;color:var(--theme-warn-color);display:flex;flex-direction:row;font-size:13px;justify-content:flex-start;margin-bottom:4px;padding:0}.adf-login-content .adf-error-message .adf-error-icon{margin-right:10px}.adf-login-content .mat-card-header-text{margin:0 auto}.adf-login-content .adf-img-logo{display:block;margin-left:auto;margin-right:auto}.adf-login-content .adf-alfresco-logo{padding:24px 16px}.adf-login-content .adf-alfresco-logo img{max-height:58px}.adf-login-content .adf-login-button{box-shadow:none;height:36px;line-height:38px;width:100%}.adf-login-content .adf-login-button-label{color:var(--theme-accent-color-default-contrast)}.adf-login-content .adf-login-button.adf-isChecking{background-color:#e0f7fa}.adf-login-content .adf-login-button.adf-isChecking .adf-login-button-label{color:var(--theme-primary-color)}.adf-login-content .adf-login-button.adf-isWelcome{background-color:var(--theme-primary-color);color:var(--theme-primary-color-default-contrast)}.adf-login-content .adf-login-button.adf-isWelcome .adf-welcome-icon{margin:5px 0 0 10px}.adf-login-content .adf-interactive-login-label{box-orient:horizontal;box-pack:center;display:flex;flex-direction:row;justify-content:center}.adf-login-content .adf-login-spinner-container{margin-left:15px;margin-top:5px}.adf-login-content .adf-login-checking-spinner>svg>circle{stroke-width:16%!important}.adf-login-content .adf-login-controls{overflow:visible;padding:0 0 26px;width:100%}.adf-login-content .adf-login-action{box-orient:horizontal;box-pack:space-between;display:flex;flex-direction:row;justify-content:space-between;margin-top:20px}.adf-login-content .adf-login-action-left a,.adf-login-content .adf-login-action-right a{text-decoration:none}.adf-login-content .adf-is-active{background-color:transparent;color:var(--theme-warn-color);font-size:12px;font-weight:400;line-height:1.33}.adf-login-content .adf-copyright{font-size:12px;min-width:320px;opacity:.54;padding:16px 0;text-align:center}.adf-login-content .mat-form-field .adf-login-password-icon.mat-icon{color:var(--theme-text-fg-color)}.adf-login-content .adf-login__field .mat-form-field-wrapper{font-size:16px;margin:1em 0 0}.adf-login-content .adf-login__field input:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px var(--theme-dialog-bg-color) inset;-webkit-text-fill-color:var(--theme-text-fg-color)!important}.adf-login-content .adf-login-validation{background-color:transparent;color:var(--theme-warn-color);font-size:12px}.adf-login-content .adf-login-error{color:var(--theme-warn-color);display:block;font-size:12px;margin-top:-12px;position:absolute}.adf-login-content .adf-full-width{width:100%}.adf-login-content .adf-login__remember-me{padding-top:22px}.adf-login-content .adf-login__remember-me .mat-checkbox-label{opacity:.87}.adf-login-content .adf-login__field{display:block;margin-left:auto;margin-right:auto;padding-bottom:18px}.adf-login-content .adf-login-remember-me{color:var(--theme-text-fg-color)!important}.adf-login-content .adf-login-action-container{border-top:1px solid rgba(0,0,0,.1);margin-top:23px}"]
                },] }
    ];
    LoginComponent.ctorParameters = function () { return [
        { type: forms.FormBuilder },
        { type: AuthenticationService },
        { type: TranslationService },
        { type: LogService },
        { type: i2$2.Router },
        { type: AppConfigService },
        { type: UserPreferencesService },
        { type: i2$2.ActivatedRoute },
        { type: i3.DomSanitizer },
        { type: AlfrescoApiService }
    ]; };
    LoginComponent.propDecorators = {
        showRememberMe: [{ type: i0.Input }],
        showLoginActions: [{ type: i0.Input }],
        needHelpLink: [{ type: i0.Input }],
        registerLink: [{ type: i0.Input }],
        logoImageUrl: [{ type: i0.Input }],
        backgroundImageUrl: [{ type: i0.Input }],
        copyrightText: [{ type: i0.Input }],
        fieldsValidation: [{ type: i0.Input }],
        successRoute: [{ type: i0.Input }],
        success: [{ type: i0.Output }],
        error: [{ type: i0.Output }],
        executeSubmit: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginHeaderDirective = /** @class */ (function () {
        function LoginHeaderDirective(alfrescoLoginComponent) {
            this.alfrescoLoginComponent = alfrescoLoginComponent;
        }
        LoginHeaderDirective.prototype.ngAfterContentInit = function () {
            this.alfrescoLoginComponent.headerTemplate = this.template;
        };
        return LoginHeaderDirective;
    }());
    LoginHeaderDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-login-header, login-header'
                },] }
    ];
    LoginHeaderDirective.ctorParameters = function () { return [
        { type: LoginComponent }
    ]; };
    LoginHeaderDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginFooterDirective = /** @class */ (function () {
        function LoginFooterDirective(alfrescoLoginComponent) {
            this.alfrescoLoginComponent = alfrescoLoginComponent;
        }
        LoginFooterDirective.prototype.ngAfterContentInit = function () {
            this.alfrescoLoginComponent.footerTemplate = this.template;
        };
        return LoginFooterDirective;
    }());
    LoginFooterDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-login-footer, login-footer'
                },] }
    ];
    LoginFooterDirective.ctorParameters = function () { return [
        { type: LoginComponent }
    ]; };
    LoginFooterDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginDialogComponent = /** @class */ (function () {
        function LoginDialogComponent(data) {
            this.data = data;
            this.buttonActionName = '';
            this.buttonActionName = data.actionName ? "LOGIN.DIALOG." + data.actionName.toUpperCase() : 'LOGIN.DIALOG.CHOOSE';
        }
        LoginDialogComponent.prototype.close = function () {
            this.data.logged.complete();
        };
        LoginDialogComponent.prototype.submitForm = function () {
            this.loginPanel.submitForm();
        };
        LoginDialogComponent.prototype.onLoginSuccess = function (event) {
            this.data.logged.next(event);
            this.close();
        };
        LoginDialogComponent.prototype.isFormValid = function () {
            return this.loginPanel ? this.loginPanel.isValid() : false;
        };
        return LoginDialogComponent;
    }());
    LoginDialogComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-login-dialog',
                    template: "<header\n    mat-dialog-title\n    data-automation-id=\"login-dialog-title\">{{data?.title}}\n</header>\n\n<mat-dialog-content class=\"adf-login-dialog-content\">\n    <adf-login-dialog-panel #adfLoginPanel\n                            (success)=\"onLoginSuccess($event)\">\n    </adf-login-dialog-panel>\n</mat-dialog-content>\n\n<mat-dialog-actions align=\"end\">\n    <button\n        mat-button\n        (click)=\"close()\"\n        data-automation-id=\"login-dialog-actions-cancel\">{{ 'LOGIN.DIALOG.CANCEL' | translate }}\n    </button>\n\n    <button mat-button\n        class=\"choose-action\"\n        data-automation-id=\"login-dialog-actions-perform\"\n        [disabled]=\"!isFormValid()\"\n        (click)=\"submitForm()\">{{ buttonActionName | translate}}\n    </button>\n</mat-dialog-actions>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-login-dialog-content adf-login .adf-login-content .adf-login-card-wide{box-shadow:none;padding:0}"]
                },] }
    ];
    LoginDialogComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: i0.Inject, args: [i4.MAT_DIALOG_DATA,] }] }
    ]; };
    LoginDialogComponent.propDecorators = {
        loginPanel: [{ type: i0.ViewChild, args: ['adfLoginPanel', { static: true },] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginDialogPanelComponent = /** @class */ (function () {
        function LoginDialogPanelComponent() {
            this.success = new i0.EventEmitter();
        }
        LoginDialogPanelComponent.prototype.submitForm = function () {
            this.login.submit();
        };
        LoginDialogPanelComponent.prototype.onLoginSuccess = function (event) {
            this.success.emit(event);
        };
        LoginDialogPanelComponent.prototype.isValid = function () {
            return this.login && this.login.form ? this.login.form.valid : false;
        };
        return LoginDialogPanelComponent;
    }());
    LoginDialogPanelComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-login-dialog-panel',
                    template: "<div>\n    <adf-login #adfLogin\n               class=\"adf-panel-login-dialog-component\"\n               [showRememberMe]=\"false\"\n               [showLoginActions]=\"false\"\n               [backgroundImageUrl]=\"''\"\n               (success)=\"onLoginSuccess($event)\">\n        <adf-login-header><ng-template></ng-template></adf-login-header>\n        <adf-login-footer><ng-template></ng-template></adf-login-footer>\n    </adf-login>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-panel-login-dialog-component .adf-login-content .adf-copyright,.adf-panel-login-dialog-component .adf-login-content .adf-login-button,.adf-panel-login-dialog-component .adf-login-content .adf-login__remember-me,.adf-panel-login-dialog-component .adf-login-content .mat-card-actions{display:none}"]
                },] }
    ];
    LoginDialogPanelComponent.propDecorators = {
        success: [{ type: i0.Output }],
        login: [{ type: i0.ViewChild, args: ['adfLogin', { static: true },] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LoginModule = /** @class */ (function () {
        function LoginModule() {
        }
        return LoginModule;
    }());
    LoginModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i2$2.RouterModule,
                        MaterialModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        i1$1.CommonModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        LoginComponent,
                        LoginFooterDirective,
                        LoginHeaderDirective,
                        LoginDialogComponent,
                        LoginDialogPanelComponent
                    ],
                    exports: [
                        LoginComponent,
                        LoginFooterDirective,
                        LoginHeaderDirective,
                        LoginDialogComponent,
                        LoginDialogPanelComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var LanguageService = /** @class */ (function () {
        function LanguageService(appConfigService, userPreferencesService) {
            this.userPreferencesService = userPreferencesService;
            this.languages = new rxjs.BehaviorSubject([
                { 'key': 'de', 'label': 'Deutsch' },
                { 'key': 'en', 'label': 'English' },
                { 'key': 'es', 'label': 'Español' },
                { 'key': 'fr', 'label': 'Français' },
                { 'key': 'it', 'label': 'Italiano' },
                { 'key': 'ja', 'label': '日本語' },
                { 'key': 'nb', 'label': 'Bokmål' },
                { 'key': 'nl', 'label': 'Nederlands' },
                { 'key': 'pt-BR', 'label': 'Português (Brasil)' },
                { 'key': 'ru', 'label': 'Русский' },
                { 'key': 'zh-CN', 'label': '中文简体' },
                { 'key': 'cs', 'label': 'Čeština' },
                { 'key': 'da', 'label': 'Dansk' },
                { 'key': 'fi', 'label': 'Suomi' },
                { 'key': 'pl', 'label': 'Polski' },
                { 'key': 'sv', 'label': 'Svenska' },
                { 'key': 'ar', 'label': 'العربية', direction: 'rtl' }
            ]);
            this.languages$ = this.languages.asObservable();
            var customLanguages = appConfigService.get(exports.AppConfigValues.APP_CONFIG_LANGUAGES_KEY);
            this.setLanguages(customLanguages);
        }
        LanguageService.prototype.changeLanguage = function (language) {
            this.userPreferencesService.locale = language.key;
            this.userPreferencesService.set('textOrientation', language.direction || 'ltr');
        };
        LanguageService.prototype.setLanguages = function (items) {
            if (items && items.length > 0) {
                this.languages.next(items);
            }
        };
        return LanguageService;
    }());
    LanguageService.ɵprov = i0.ɵɵdefineInjectable({ factory: function LanguageService_Factory() { return new LanguageService(i0.ɵɵinject(AppConfigService), i0.ɵɵinject(UserPreferencesService)); }, token: LanguageService, providedIn: "root" });
    LanguageService.decorators = [
        { type: i0.Injectable, args: [{ providedIn: 'root' },] }
    ];
    LanguageService.ctorParameters = function () { return [
        { type: AppConfigService },
        { type: UserPreferencesService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LanguageMenuComponent = /** @class */ (function () {
        function LanguageMenuComponent(languageService) {
            this.languageService = languageService;
            this.languages$ = languageService.languages$;
        }
        LanguageMenuComponent.prototype.changeLanguage = function (language) {
            this.languageService.changeLanguage(language);
        };
        return LanguageMenuComponent;
    }());
    LanguageMenuComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-language-menu',
                    template: "\n        <button\n            mat-menu-item\n            *ngFor=\"let language of languages$ | async\"\n            (click)=\"changeLanguage(language)\">{{language.label}}</button>\n    "
                },] }
    ];
    LanguageMenuComponent.ctorParameters = function () { return [
        { type: LanguageService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LanguagePickerComponent = /** @class */ (function () {
        function LanguagePickerComponent() {
        }
        return LanguagePickerComponent;
    }());
    LanguagePickerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-picker-button',
                    template: "\n        <button mat-menu-item [matMenuTriggerFor]=\"langMenu\">\n            <mat-icon>language</mat-icon>\n            {{ 'ADF.LANGUAGE' | translate }}\n        </button>\n        <mat-menu #langMenu=\"matMenu\">\n            <adf-language-menu></adf-language-menu>\n        </mat-menu>\n    "
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LanguageMenuModule = /** @class */ (function () {
        function LanguageMenuModule() {
        }
        return LanguageMenuModule;
    }());
    LanguageMenuModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        LanguageMenuComponent,
                        LanguagePickerComponent
                    ],
                    exports: [
                        LanguageMenuComponent,
                        LanguagePickerComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var InfoDrawerLayoutComponent = /** @class */ (function () {
        function InfoDrawerLayoutComponent() {
            this.showHeader = true;
        }
        return InfoDrawerLayoutComponent;
    }());
    InfoDrawerLayoutComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-info-drawer-layout',
                    template: "<div *ngIf=\"showHeader\" class=\"adf-info-drawer-layout-header\">\n    <div class=\"adf-info-drawer-layout-header-title\">\n        <ng-content select=\"[info-drawer-title]\"></ng-content>\n    </div>\n    <div class=\"adf-info-drawer-layout-header-buttons\">\n        <ng-content select=\"[info-drawer-buttons]\"></ng-content>\n    </div>\n</div>\n<div class=\"adf-info-drawer-layout-content\">\n    <ng-content select=\"[info-drawer-content]\"></ng-content>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { 'class': 'adf-info-drawer-layout' },
                    styles: [".adf-info-drawer{overflow:hidden}.adf-info-drawer,.adf-info-drawer-layout{display:flex;flex:1;flex-direction:column;height:100%;min-height:0}.adf-info-drawer-layout{background-color:var(--theme-background-color);box-shadow:0 2px 4px 0 rgba(0,0,0,.27);overflow:hidden;overflow:auto;width:100%}.adf-info-drawer-layout .mat-tab-label{color:var(--theme-accent-color);font-weight:700;opacity:1;text-align:left;text-transform:uppercase}.adf-info-drawer-layout .mat-tab-label-active{color:var(--theme-primary-color)}.adf-info-drawer-layout-header{display:flex;justify-content:space-between;margin-bottom:40px;padding:13px 0 0 23px}.adf-info-drawer-layout-header-buttons{padding-right:18px}.adf-info-drawer-layout-header-buttons mat-icon{cursor:pointer}.adf-info-drawer-layout-header-title{color:var(--theme-text-color);font-size:20px;height:32px;letter-spacing:-.5px;line-height:1.6;text-align:left;width:197px}.adf-info-drawer-layout-header-title>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.adf-info-drawer-layout-content{padding:10px}.adf-info-drawer-layout-content>*{display:block;margin-bottom:20px}.adf-info-drawer-layout-content>:last-child{margin-bottom:0}.adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content .adf-manage-versions-empty,.adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content .adf-manage-versions-no-permission{color:var(--theme-text-color);display:flex;flex-direction:column;margin:0;padding:24px;text-align:center}.adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content .adf-manage-versions-empty-icon,.adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content .adf-manage-versions-no-permission-icon{display:block;font-size:48px;height:48px;margin:0 auto 24px;width:48px}"]
                },] }
    ];
    InfoDrawerLayoutComponent.propDecorators = {
        showHeader: [{ type: i0.Input }]
    };
    var InfoDrawerTitleDirective = /** @class */ (function () {
        function InfoDrawerTitleDirective() {
        }
        return InfoDrawerTitleDirective;
    }());
    InfoDrawerTitleDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-info-drawer-title], [info-drawer-title]' },] }
    ];
    var InfoDrawerButtonsDirective = /** @class */ (function () {
        function InfoDrawerButtonsDirective() {
        }
        return InfoDrawerButtonsDirective;
    }());
    InfoDrawerButtonsDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-info-drawer-buttons], [info-drawer-buttons]' },] }
    ];
    var InfoDrawerContentDirective = /** @class */ (function () {
        function InfoDrawerContentDirective() {
        }
        return InfoDrawerContentDirective;
    }());
    InfoDrawerContentDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-info-drawer-content], [info-drawer-content]' },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var InfoDrawerTabComponent = /** @class */ (function () {
        function InfoDrawerTabComponent() {
            this.label = '';
            this.icon = null;
        }
        return InfoDrawerTabComponent;
    }());
    InfoDrawerTabComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-info-drawer-tab',
                    template: '<ng-template><ng-content></ng-content></ng-template>',
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    InfoDrawerTabComponent.propDecorators = {
        label: [{ type: i0.Input }],
        icon: [{ type: i0.Input }],
        content: [{ type: i0.ViewChild, args: [i0.TemplateRef, { static: true },] }]
    };
    var InfoDrawerComponent = /** @class */ (function () {
        function InfoDrawerComponent() {
            this.title = null;
            this.selectedIndex = 0;
            this.showHeader = true;
            this.currentTab = new i0.EventEmitter();
        }
        InfoDrawerComponent.prototype.onKeyDown = function (event) {
            event.cancelBubble = true;
        };
        InfoDrawerComponent.prototype.onKeyUp = function (event) {
            event.cancelBubble = true;
        };
        InfoDrawerComponent.prototype.showTabLayout = function () {
            return this.contentBlocks.length > 0;
        };
        InfoDrawerComponent.prototype.onTabChange = function (event) {
            this.currentTab.emit(event.index);
        };
        return InfoDrawerComponent;
    }());
    InfoDrawerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-info-drawer',
                    template: "<adf-info-drawer-layout [showHeader]=\"showHeader\">\n    <div role=\"heading\" aria-level=\"1\" *ngIf=\"title\" info-drawer-title>{{ title | translate }}</div>\n    <ng-content *ngIf=\"!title\" info-drawer-title select=\"[info-drawer-title]\"></ng-content>\n\n    <ng-content info-drawer-buttons select=\"[info-drawer-buttons]\"></ng-content>\n\n    <ng-container info-drawer-content *ngIf=\"showTabLayout(); then tabLayout else singleLayout\"></ng-container>\n\n    <ng-template #tabLayout>\n        <mat-tab-group [(selectedIndex)]=\"selectedIndex\" class=\"adf-info-drawer-tabs\" (selectedTabChange)=\"onTabChange($event)\">\n            <mat-tab *ngFor=\"let contentBlock of contentBlocks\"\n                [label]=\"contentBlock.label | translate\"\n                class=\"adf-info-drawer-tab\">\n\n                <ng-template mat-tab-label>\n                    <mat-icon *ngIf=\"contentBlock.icon\">{{ contentBlock.icon }}</mat-icon>\n                    <span *ngIf=\"contentBlock.label\">{{ contentBlock.label | translate }}</span>\n                </ng-template>\n\n                <ng-container *ngTemplateOutlet=\"contentBlock.content\"></ng-container>\n            </mat-tab>\n        </mat-tab-group>\n    </ng-template>\n\n    <ng-template #singleLayout>\n        <ng-content select=\"[info-drawer-content]\"></ng-content>\n    </ng-template>\n</adf-info-drawer-layout>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { 'class': 'adf-info-drawer' },
                    styles: [".adf-info-drawer{display:block}.adf-info-drawer .mat-tab-label{min-width:0}.adf-info-drawer .adf-info-drawer-layout-content{padding:0}.adf-info-drawer .adf-info-drawer-layout-content>:not(.adf-info-drawer-tabs){padding:10px}.adf-info-drawer .adf-info-drawer-layout-content>:not(.adf-info-drawer-tabs)>*{display:block;margin-bottom:20px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content>*{display:block;margin-bottom:20px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content>:last-child{margin-bottom:0}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-label{flex-grow:1}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-label .mat-icon+span{padding-left:5px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-ink-bar{height:4px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body{padding:10px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content{overflow:initial}"]
                },] }
    ];
    InfoDrawerComponent.propDecorators = {
        title: [{ type: i0.Input }],
        selectedIndex: [{ type: i0.Input }],
        showHeader: [{ type: i0.Input }],
        currentTab: [{ type: i0.Output }],
        contentBlocks: [{ type: i0.ContentChildren, args: [InfoDrawerTabComponent,] }],
        onKeyDown: [{ type: i0.HostListener, args: ['keydown', ['$event'],] }],
        onKeyUp: [{ type: i0.HostListener, args: ['keyup', ['$event'],] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var InfoDrawerModule = /** @class */ (function () {
        function InfoDrawerModule() {
        }
        return InfoDrawerModule;
    }());
    InfoDrawerModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        InfoDrawerLayoutComponent,
                        InfoDrawerTabComponent,
                        InfoDrawerComponent,
                        InfoDrawerTitleDirective,
                        InfoDrawerButtonsDirective,
                        InfoDrawerContentDirective
                    ],
                    exports: [
                        InfoDrawerLayoutComponent,
                        InfoDrawerTabComponent,
                        InfoDrawerComponent,
                        InfoDrawerTitleDirective,
                        InfoDrawerButtonsDirective,
                        InfoDrawerContentDirective
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DataTableSchema = /** @class */ (function () {
        function DataTableSchema(appConfigService, presetKey, presetsModel) {
            this.appConfigService = appConfigService;
            this.presetKey = presetKey;
            this.presetsModel = presetsModel;
            this.layoutPresets = {};
        }
        DataTableSchema.prototype.createDatatableSchema = function () {
            this.loadLayoutPresets();
            if (!this.columns || this.columns.length === 0) {
                this.columns = this.mergeJsonAndHtmlSchema();
            }
        };
        DataTableSchema.prototype.loadLayoutPresets = function () {
            var externalSettings = this.appConfigService.get(this.presetKey, null);
            if (externalSettings) {
                this.layoutPresets = Object.assign({}, this.presetsModel, externalSettings);
            }
            else {
                this.layoutPresets = this.presetsModel;
            }
        };
        DataTableSchema.prototype.mergeJsonAndHtmlSchema = function () {
            var customSchemaColumns = this.getSchemaFromConfig(this.presetColumn).concat(this.getSchemaFromHtml(this.columnList));
            if (customSchemaColumns.length === 0) {
                customSchemaColumns = this.getDefaultLayoutPreset();
            }
            return customSchemaColumns;
        };
        DataTableSchema.prototype.getSchemaFromHtml = function (columnList) {
            var schema = [];
            if (columnList && columnList.columns && columnList.columns.length > 0) {
                schema = columnList.columns.map(function (c) { return c; });
            }
            return schema;
        };
        DataTableSchema.prototype.getSchemaFromConfig = function (presetColumn) {
            return presetColumn ? (this.layoutPresets[presetColumn]).map(function (col) { return new ObjectDataColumn(col); }) : [];
        };
        DataTableSchema.prototype.getDefaultLayoutPreset = function () {
            return (this.layoutPresets['default']).map(function (col) { return new ObjectDataColumn(col); });
        };
        DataTableSchema.prototype.setPresetKey = function (presetKey) {
            this.presetKey = presetKey;
        };
        DataTableSchema.prototype.setPresetsModel = function (presetsModel) {
            this.presetsModel = presetsModel;
        };
        return DataTableSchema;
    }());
    DataTableSchema.decorators = [
        { type: i0.Directive }
    ];
    DataTableSchema.ctorParameters = function () { return [
        { type: AppConfigService },
        { type: String },
        { type: undefined }
    ]; };
    DataTableSchema.propDecorators = {
        columnList: [{ type: i0.ContentChild, args: [DataColumnListComponent,] }],
        presetColumn: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    function transformKeyToObject(key, value) {
        var objectLevels = key.split('.').reverse();
        return objectLevels.reduce(function (previousValue, currentValue) {
            var _a;
            return _a = {}, _a[currentValue] = previousValue, _a;
        }, value);
    }
    var CardViewUpdateService = /** @class */ (function () {
        function CardViewUpdateService() {
            this.itemUpdated$ = new rxjs.Subject();
            this.itemClicked$ = new rxjs.Subject();
            this.updateItem$ = new rxjs.Subject();
            this.updatedAspect$ = new rxjs.Subject();
        }
        CardViewUpdateService.prototype.update = function (property, newValue) {
            this.itemUpdated$.next({
                target: property,
                changed: transformKeyToObject(property.key, newValue)
            });
        };
        CardViewUpdateService.prototype.clicked = function (property) {
            this.itemClicked$.next({
                target: property
            });
        };
        CardViewUpdateService.prototype.updateElement = function (notification) {
            this.updateItem$.next(notification);
        };
        CardViewUpdateService.prototype.updateNodeAspect = function (node) {
            this.updatedAspect$.next(node);
        };
        return CardViewUpdateService;
    }());
    CardViewUpdateService.ɵprov = i0.ɵɵdefineInjectable({ factory: function CardViewUpdateService_Factory() { return new CardViewUpdateService(); }, token: CardViewUpdateService, providedIn: "root" });
    CardViewUpdateService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var BaseCardView = /** @class */ (function () {
        function BaseCardView(cardViewUpdateService) {
            var _this = this;
            this.cardViewUpdateService = cardViewUpdateService;
            this.destroy$ = new rxjs.Subject();
            this.cardViewUpdateService.updateItem$
                .pipe(operators.takeUntil(this.destroy$))
                .subscribe(function (itemModel) {
                if (_this.property.key === itemModel.key) {
                    _this.property.value = itemModel.value;
                }
            });
        }
        BaseCardView.prototype.ngOnDestroy = function () {
            this.destroy$.next(true);
            this.destroy$.complete();
        };
        return BaseCardView;
    }());
    BaseCardView.decorators = [
        { type: i0.Directive }
    ];
    BaseCardView.ctorParameters = function () { return [
        { type: CardViewUpdateService }
    ]; };
    BaseCardView.propDecorators = {
        property: [{ type: i0.Input }]
    };

    var DEFAULT_SEPARATOR = ', ';
    var templateTypes = {
        clickableTemplate: 'clickableTemplate',
        multilineTemplate: 'multilineTemplate',
        chipsTemplate: 'chipsTemplate',
        emptyTemplate: 'emptyTemplate',
        defaultTemplate: 'defaultTemplate'
    };
    var CardViewTextItemComponent = /** @class */ (function (_super) {
        __extends(CardViewTextItemComponent, _super);
        function CardViewTextItemComponent(cardViewUpdateService, clipboardService, translateService, cd) {
            var _this = _super.call(this, cardViewUpdateService) || this;
            _this.clipboardService = clipboardService;
            _this.translateService = translateService;
            _this.cd = cd;
            _this.editable = false;
            _this.displayEmpty = true;
            _this.copyToClipboardAction = true;
            _this.useChipsForMultiValueProperty = true;
            _this.multiValueSeparator = DEFAULT_SEPARATOR;
            _this.textInput = new forms.FormControl();
            _this.onDestroy$ = new rxjs.Subject();
            return _this;
        }
        CardViewTextItemComponent.prototype.ngOnChanges = function (changes) {
            var _this = this;
            if (changes.property && changes.property.firstChange) {
                this.textInput.valueChanges
                    .pipe(operators.filter(function (textInputValue) { return textInputValue !== _this.editedValue && textInputValue !== null; }), operators.debounceTime(50), operators.takeUntil(this.onDestroy$))
                    .subscribe(function (textInputValue) {
                    _this.editedValue = textInputValue;
                    _this.update();
                });
            }
            this.resetValue();
            this.setTemplateType();
            if (changes.editable) {
                this.isEditable ? this.textInput.enable() : this.textInput.disable();
            }
        };
        CardViewTextItemComponent.prototype.setTemplateType = function () {
            if (this.showProperty || this.isEditable) {
                if (this.isClickable) {
                    this.templateType = templateTypes.clickableTemplate;
                }
                else if (this.isChipViewEnabled) {
                    this.templateType = templateTypes.chipsTemplate;
                }
                else {
                    this.templateType = templateTypes.defaultTemplate;
                }
            }
            else {
                this.templateType = templateTypes.emptyTemplate;
            }
        };
        CardViewTextItemComponent.prototype.resetValue = function () {
            if (this.isChipViewEnabled) {
                this.editedValue = this.property.value ? Array.from(this.property.value) : [];
            }
            else {
                this.editedValue = this.property.displayValue;
                this.textInput.setValue(this.editedValue);
            }
            this.resetErrorMessages();
        };
        CardViewTextItemComponent.prototype.resetErrorMessages = function () {
            this.errors = [];
        };
        CardViewTextItemComponent.prototype.update = function () {
            if (this.property.isValid(this.editedValue)) {
                this.property.value = this.prepareValueForUpload(this.property, this.editedValue);
                this.cardViewUpdateService.update(Object.assign({}, this.property), this.property.value);
                this.resetErrorMessages();
            }
            else {
                this.errors = this.property.getValidationErrors(this.editedValue);
            }
        };
        CardViewTextItemComponent.prototype.prepareValueForUpload = function (property, value) {
            if (property.multivalued && typeof value === 'string') {
                var listOfValues = value.split(this.multiValueSeparator.trim()).map(function (item) { return item.trim(); });
                return listOfValues;
            }
            return value;
        };
        CardViewTextItemComponent.prototype.removeValueFromList = function (itemIndex) {
            if (Array.isArray(this.editedValue)) {
                this.editedValue.splice(itemIndex, 1);
                this.update();
                this.cd.detectChanges();
            }
        };
        CardViewTextItemComponent.prototype.addValueToList = function (newListItem) {
            var chipInput = newListItem.input;
            var chipValue = newListItem.value.trim() || '';
            if (typeof this.editedValue !== 'string') {
                if (chipValue) {
                    this.editedValue.push(chipValue);
                    this.update();
                }
                if (chipInput) {
                    chipInput.value = '';
                }
            }
        };
        CardViewTextItemComponent.prototype.clicked = function () {
            if (typeof this.property.clickCallBack === 'function') {
                this.property.clickCallBack();
            }
            else {
                this.cardViewUpdateService.clicked(this.property);
            }
        };
        CardViewTextItemComponent.prototype.clearValue = function () {
            this.editedValue = '';
            this.textInput.setValue('');
            this.update();
        };
        CardViewTextItemComponent.prototype.copyToClipboard = function (valueToCopy) {
            if (this.copyToClipboard) {
                var clipboardMessage = this.translateService.instant('CORE.METADATA.ACCESSIBILITY.COPY_TO_CLIPBOARD_MESSAGE');
                this.clipboardService.copyContentToClipboard(valueToCopy, clipboardMessage);
            }
        };
        CardViewTextItemComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        Object.defineProperty(CardViewTextItemComponent.prototype, "showProperty", {
            get: function () {
                return this.displayEmpty || !this.property.isEmpty();
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(CardViewTextItemComponent.prototype, "showClickableIcon", {
            get: function () {
                return this.hasIcon && this.editable;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(CardViewTextItemComponent.prototype, "isEditable", {
            get: function () {
                return this.editable && this.property.editable;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(CardViewTextItemComponent.prototype, "isClickable", {
            get: function () {
                return this.property.clickable;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(CardViewTextItemComponent.prototype, "hasIcon", {
            get: function () {
                return !!this.property.icon;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(CardViewTextItemComponent.prototype, "hasErrors", {
            get: function () {
                var _a, _b;
                return (_b = (!!((_a = this.errors) === null || _a === void 0 ? void 0 : _a.length))) !== null && _b !== void 0 ? _b : false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(CardViewTextItemComponent.prototype, "isChipViewEnabled", {
            get: function () {
                return this.property.multivalued && this.useChipsForMultiValueProperty;
            },
            enumerable: false,
            configurable: true
        });
        return CardViewTextItemComponent;
    }(BaseCardView));
    CardViewTextItemComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view-textitem',
                    template: "<div [ngSwitch]=\"templateType\">\n    <div class=\"adf-property-label\"\n         [attr.data-automation-id]=\"'card-textitem-label-' + property.key\"\n         *ngIf=\"showProperty || isEditable\">\n        {{ property.label | translate }}\n    </div>\n\n    <div *ngSwitchDefault>\n        <mat-form-field class=\"adf-property-field adf-card-textitem-field\"\n                        [ngClass]=\"{ 'adf-property-read-only': !isEditable }\"\n                        [floatLabel]=\"'never'\">\n            <input matInput\n                   *ngIf=\"!property.multiline\"\n                   class=\"adf-property-value\"\n                   [placeholder]=\"property.default\"\n                   [formControl]=\"textInput\"\n                   (dblclick)=\"copyToClipboard(property.displayValue)\"\n                   matTooltipShowDelay=\"1000\"\n                   [matTooltip]=\"'CORE.METADATA.ACTIONS.COPY_TO_CLIPBOARD' | translate\"\n                   [matTooltipDisabled]=\"isEditable\"\n                   [attr.data-automation-id]=\"'card-textitem-value-' + property.key\">\n            <textarea matInput\n                      *ngIf=\"property.multiline\"\n                      [matTextareaAutosize]=\"true\"\n                      [matAutosizeMaxRows]=\"1\"\n                      [matAutosizeMaxRows]=\"5\"\n                      class=\"adf-property-value\"\n                      [placeholder]=\"property.default\"\n                      [formControl]=\"textInput\"\n                      [attr.data-automation-id]=\"'card-textitem-value-' + property.key\"></textarea>\n            <button mat-button\n                    matSuffix\n                    class=\"adf-property-clear-value\"\n                    *ngIf=\"isEditable\"\n                    mat-icon-button\n                    aria-label=\"Clear\"\n                    (click)=\"clearValue()\">\n                <mat-icon>cancel</mat-icon>\n            </button>\n            <mat-icon matSuffix\n                      *ngIf=\"isEditable\"\n                      [attr.title]=\"'CORE.METADATA.ACTIONS.EDIT' | translate\"\n                      class=\"adf-textitem-edit-icon\">mode_edit</mat-icon>\n\n        </mat-form-field>\n    </div>\n\n    <mat-error [attr.data-automation-id]=\"'card-textitem-error-' + property.key\"\n               class=\"adf-textitem-editable-error\"\n               *ngIf=\"isEditable && hasErrors\">\n        <ul>\n            <li *ngFor=\"let error of errors\">{{ error.message | translate: error }}</li>\n        </ul>\n    </mat-error>\n\n    <div *ngSwitchCase=\"'chipsTemplate'\"\n         class=\"adf-property-field adf-textitem-chip-list-container\">\n        <mat-chip-list #chipList\n                       class=\"adf-textitem-chip-list\">\n            <mat-chip *ngFor=\"let propertyValue of editedValue; let idx = index\"\n                      [removable]=\"isEditable\"\n                      (removed)=\"removeValueFromList(idx)\">\n                {{ propertyValue }}\n                <mat-icon *ngIf=\"isEditable\"\n                          matChipRemove>cancel</mat-icon>\n            </mat-chip>\n        </mat-chip-list>\n\n        <mat-form-field *ngIf=\"isEditable\"\n                        class=\"adf-property-field adf-textitem-chip-list-input\"\n                        [ngClass]=\"{ 'adf-property-read-only': !isEditable }\"\n                        [floatLabel]=\"'never'\">\n            <input matInput\n                   class=\"adf-property-value\"\n                   [placeholder]=\"editedValue ? '' : property.default | translate\"\n                   [matChipInputFor]=\"chipList\"\n                   [matChipInputAddOnBlur]=\"true\"\n                   (matChipInputTokenEnd)=\"addValueToList($event)\"\n                   [attr.data-automation-id]=\"'card-textitem-editchipinput-' + property.key\">\n            <mat-icon matSuffix\n                      class=\"adf-textitem-edit-icon\">mode_edit</mat-icon>\n        </mat-form-field>\n    </div>\n\n    <div *ngSwitchCase=\"'clickableTemplate'\"\n         role=\"button\"\n         class=\"adf-textitem-clickable\"\n         [ngClass]=\"{ 'adf-property-read-only': !isEditable }\"\n         [attr.data-automation-id]=\"'card-textitem-toggle-' + property.key\"\n         (click)=\"clicked()\"\n         fxLayout=\"row\"\n         fxLayoutAlign=\"space-between center\">\n        <mat-form-field class=\"adf-property-field adf-card-textitem-field\"\n                        [floatLabel]=\"'never'\">\n            <input matInput\n                   [type]=property.inputType\n                   class=\"adf-property-value\"\n                   [ngClass]=\"{ 'adf-textitem-clickable-value': !isEditable }\"\n                   [placeholder]=\"property.default\"\n                   [(ngModel)]=\"editedValue\"\n                   (blur)=\"update()\"\n                   (keydown.enter)=\"update()\"\n                   [disabled]=\"!isEditable\"\n                   [attr.data-automation-id]=\"'card-textitem-value-' + property.key\">\n            <button mat-icon-button\n                    matSuffix\n                    fxFlex=\"0 0 auto\"\n                    *ngIf=\"showClickableIcon\"\n                    class=\"adf-textitem-action\"\n                    [attr.title]=\"'CORE.METADATA.ACTIONS.EDIT' | translate\"\n                    [attr.data-automation-id]=\"'card-textitem-clickable-icon-' + property.key\">\n                <mat-icon class=\"adf-textitem-icon\">{{ property?.icon }}</mat-icon>\n            </button>\n        </mat-form-field>\n\n    </div>\n\n    <div *ngSwitchCase=\"'emptyTemplate'\">\n        <span class=\"adf-textitem-default-value\">{{ property.default | translate }}</span>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-textitem-edit-icon.mat-icon{color:var(--adf-card-view-text-color);font-size:16px;height:16px;width:16px}.adf-textitem-action.mat-icon-button{color:var(--adf-card-view-text-color);height:20px;line-height:20px;width:20px}.adf-textitem-action:focus,.adf-textitem-action:hover{color:var(--theme-text-fg-color)}.adf-update-icon{padding-left:13px}.adf-textitem-readonly{cursor:pointer!important}.adf-textitem-readonly:focus .adf-textitem-action,.adf-textitem-readonly:hover .adf-textitem-action{color:var(--theme-text-fg-color)}.adf-textitem-chip-list-container{margin-bottom:25px!important;margin-top:6px}.adf-textitem-chip-list-container .mat-form-field-label{margin-top:6px}.adf-textitem-clickable{cursor:pointer!important;padding-top:3px}.adf-textitem-clickable .adf-textitem-edit-icon.mat-icon{line-height:16px}.adf-textitem-clickable:hover .adf-textitem-action{color:var(--theme-text-fg-color)}.adf-textitem-clickable-value{color:var(--theme-primary-color)!important;cursor:pointer!important}.adf-textitem-editable-controls{align-items:center;display:flex}.adf-textitem-editable-controls mat-icon:not(.adf-button-disabled):hover{color:var(--theme-text-fg-color);cursor:pointer!important}.adf-textitem-editable-controls mat-form-field{width:100%}.adf-textitem-editable-controls input:focus,.adf-textitem-editable-controls textarea:focus{border:1px solid var(--theme-accent-color-a200)}.adf-textitem-editable-error{font-size:12px;padding-top:4px}.adf-textitem-editable-error ul{list-style-type:none;margin:0;padding:0}.adf-textitem-editable-error ul li{margin:0;padding:0}.adf-textitem-default-value{color:var(--theme-text-color)}.adf-textitem-editable .mat-form-field-wrapper{margin:0;padding-bottom:0}.adf-textitem-editable .mat-form-field-underline{display:none}.adf-textitem-editable .mat-form-field-infix{border-top:none;padding:0}.adf-textitem-editable .mat-form-field-label-wrapper{padding-top:2em;position:static}.adf-textitem-editable .mat-form-field-label{top:4px}.adf-textitem-editable .mat-input-element{font-family:inherit;padding-top:6px;position:relative}.adf-textitem-editable .mat-input-element:focus{left:-6px;padding:5px;top:0}.adf-textitem-editable input.mat-input-element{margin-bottom:2px}.adf-textitem-editable input.mat-input-element:focus{margin-bottom:-8px}.adf-textitem-scroll{display:block;overflow-x:auto;white-space:nowrap}.adf-textitem-scroll::-webkit-scrollbar{height:5px}.adf-textitem-scroll:hover::-webkit-scrollbar-thumb{background-color:var(--adf-card-view-text-color);border-radius:2px;display:block}.adf-textitem-multiline{display:block}.adf-property-field .adf-property-clear-value{display:none}.adf-property-field.adf-card-textitem-field:hover .adf-textitem-edit-icon{display:none}.adf-property-field.adf-card-textitem-field:hover .adf-property-clear-value{color:var(--adf-card-view-text-color);display:inline}.adf-property-field.adf-card-textitem-field:hover .adf-property-clear-value:hover{color:var(--theme-text-fg-color)}"]
                },] }
    ];
    CardViewTextItemComponent.ctorParameters = function () { return [
        { type: CardViewUpdateService },
        { type: ClipboardService },
        { type: TranslationService },
        { type: i0.ChangeDetectorRef }
    ]; };
    CardViewTextItemComponent.propDecorators = {
        editable: [{ type: i0.Input }],
        displayEmpty: [{ type: i0.Input }],
        copyToClipboardAction: [{ type: i0.Input }],
        useChipsForMultiValueProperty: [{ type: i0.Input }],
        multiValueSeparator: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewComponent = /** @class */ (function () {
        function CardViewComponent() {
            this.displayEmpty = true;
            this.displayNoneOption = true;
            this.displayClearAction = true;
            this.copyToClipboardAction = true;
            this.useChipsForMultiValueProperty = true;
            this.multiValueSeparator = DEFAULT_SEPARATOR;
        }
        return CardViewComponent;
    }());
    CardViewComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view',
                    template: "<div class=\"adf-property-list\">\n    <div *ngFor=\"let property of properties\">\n        <div [attr.data-automation-id]=\"'header-'+property.key\" class=\"adf-property\">\n            <adf-card-view-item-dispatcher\n                [property]=\"property\"\n                [editable]=\"editable\"\n                [displayEmpty]=\"displayEmpty\"\n                [displayNoneOption]=\"property['displayNoneOption'] !== undefined ? property['displayNoneOption'] : displayNoneOption\"\n                [displayClearAction]=\"displayClearAction\"\n                [copyToClipboardAction]=\"copyToClipboardAction\"\n                [useChipsForMultiValueProperty]=\"useChipsForMultiValueProperty\"\n                [multiValueSeparator]=\"multiValueSeparator\">\n            </adf-card-view-item-dispatcher>\n        </div>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-property-list .adf-property{margin-bottom:20px}.adf-property-list .adf-property .adf-property-value-padding-top{margin-top:6px}.adf-property-list .adf-property .adf-property-field{margin-bottom:-25px;width:100%}.adf-property-list .adf-property .adf-property-field .mat-form-field-infix{border-top-width:0}.adf-property-list .adf-property .adf-property-field .mat-form-field-label{margin-top:6px}.adf-property-list .adf-property .adf-property-field .adf-property-read-only .mat-form-field-underline,.adf-property-list .adf-property .adf-property-read-only .mat-form-field-underline{display:none}.adf-property-list .adf-property .adf-property-label{color:var(--theme-text-color);font-size:12px;word-wrap:break-word}.adf-property-list .adf-property .adf-property-value,.adf-property-list .adf-property .mat-form-field-label{color:var(--theme-text-bold-color);font-size:14px}"]
                },] }
    ];
    CardViewComponent.propDecorators = {
        properties: [{ type: i0.Input }],
        editable: [{ type: i0.Input }],
        displayEmpty: [{ type: i0.Input }],
        displayNoneOption: [{ type: i0.Input }],
        displayClearAction: [{ type: i0.Input }],
        copyToClipboardAction: [{ type: i0.Input }],
        useChipsForMultiValueProperty: [{ type: i0.Input }],
        multiValueSeparator: [{ type: i0.Input }]
    };

    var CardViewBoolItemComponent = /** @class */ (function (_super) {
        __extends(CardViewBoolItemComponent, _super);
        function CardViewBoolItemComponent(cardViewUpdateService) {
            return _super.call(this, cardViewUpdateService) || this;
        }
        CardViewBoolItemComponent.prototype.isEditable = function () {
            return this.editable && this.property.editable;
        };
        CardViewBoolItemComponent.prototype.changed = function (change) {
            this.cardViewUpdateService.update(Object.assign({}, this.property), change.checked);
            this.property.value = change.checked;
        };
        return CardViewBoolItemComponent;
    }(BaseCardView));
    CardViewBoolItemComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view-boolitem',
                    template: "<ng-container *ngIf=\"!property.isEmpty() || isEditable()\">\n    <div class=\"adf-property-value\">\n        <mat-checkbox [attr.data-automation-id]=\"'card-boolean-' + property.key\"\n                      [attr.title]=\"'CORE.METADATA.ACTIONS.TOGGLE' | translate\"\n                      [checked]=\"property.displayValue\"\n                      [disabled]=\"!isEditable()\"\n                      color=\"primary\"\n                      (change)=\"changed($event)\">\n            <div [attr.data-automation-id]=\"'card-boolean-label-' + property.key\"\n                 class=\"adf-property-label\">{{ property.label | translate }}</div>\n        </mat-checkbox>\n    </div>\n</ng-container>\n"
                },] }
    ];
    CardViewBoolItemComponent.ctorParameters = function () { return [
        { type: CardViewUpdateService }
    ]; };
    CardViewBoolItemComponent.propDecorators = {
        editable: [{ type: i0.Input }]
    };

    var ɵ0 = MOMENT_DATE_FORMATS, ɵ1 = moment$2.MAT_MOMENT_DATETIME_FORMATS;
    var CardViewDateItemComponent = /** @class */ (function (_super) {
        __extends(CardViewDateItemComponent, _super);
        function CardViewDateItemComponent(cardViewUpdateService, dateAdapter, userPreferencesService, appConfig, clipboardService, translateService) {
            var _this = _super.call(this, cardViewUpdateService) || this;
            _this.dateAdapter = dateAdapter;
            _this.userPreferencesService = userPreferencesService;
            _this.appConfig = appConfig;
            _this.clipboardService = clipboardService;
            _this.translateService = translateService;
            _this.editable = false;
            _this.displayEmpty = true;
            _this.displayClearAction = true;
            _this.onDestroy$ = new rxjs.Subject();
            _this.dateFormat = _this.appConfig.get('dateValues.defaultDateFormat');
            return _this;
        }
        CardViewDateItemComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select(exports.UserPreferenceValues.Locale)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (locale) {
                _this.dateAdapter.setLocale(locale);
                _this.property.locale = locale;
            });
            this.dateAdapter.overrideDisplayFormat = 'MMM DD';
            if (this.property.value) {
                this.valueDate = moment$1(this.property.value, this.dateFormat);
            }
            else if (this.property.multivalued && !this.property.value) {
                this.property.value = [];
            }
        };
        CardViewDateItemComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        CardViewDateItemComponent.prototype.showProperty = function () {
            return this.displayEmpty || !this.property.isEmpty();
        };
        CardViewDateItemComponent.prototype.showClearAction = function () {
            return this.displayClearAction && (!this.property.isEmpty() || !!this.property.default);
        };
        CardViewDateItemComponent.prototype.isEditable = function () {
            return this.editable && this.property.editable;
        };
        CardViewDateItemComponent.prototype.showDatePicker = function () {
            this.datepicker.open();
        };
        CardViewDateItemComponent.prototype.onDateChanged = function (newDateValue) {
            if (newDateValue) {
                var momentDate = moment$1(newDateValue.value, this.dateFormat, true);
                if (momentDate.isValid()) {
                    this.valueDate = momentDate;
                    this.property.value = momentDate.toDate();
                    this.update();
                }
            }
        };
        CardViewDateItemComponent.prototype.onDateClear = function () {
            this.valueDate = null;
            this.cardViewUpdateService.update(Object.assign({}, this.property), null);
            this.property.value = null;
            this.property.default = null;
        };
        CardViewDateItemComponent.prototype.copyToClipboard = function (valueToCopy) {
            var clipboardMessage = this.translateService.instant('CORE.METADATA.ACCESSIBILITY.COPY_TO_CLIPBOARD_MESSAGE');
            this.clipboardService.copyContentToClipboard(valueToCopy, clipboardMessage);
        };
        CardViewDateItemComponent.prototype.addDateToList = function (newDateValue) {
            if (newDateValue) {
                var momentDate = moment$1(newDateValue.value, this.dateFormat, true);
                if (momentDate.isValid()) {
                    this.property.value.push(momentDate.toDate());
                    this.update();
                }
            }
        };
        CardViewDateItemComponent.prototype.removeValueFromList = function (itemIndex) {
            this.property.value.splice(itemIndex, 1);
            this.update();
        };
        CardViewDateItemComponent.prototype.update = function () {
            this.cardViewUpdateService.update(Object.assign({}, this.property), this.property.value);
        };
        return CardViewDateItemComponent;
    }(BaseCardView));
    CardViewDateItemComponent.decorators = [
        { type: i0.Component, args: [{
                    providers: [
                        { provide: core.DateAdapter, useClass: MomentDateAdapter },
                        { provide: core.MAT_DATE_FORMATS, useValue: ɵ0 },
                        { provide: core$1.DatetimeAdapter, useClass: moment$2.MomentDatetimeAdapter },
                        { provide: core$1.MAT_DATETIME_FORMATS, useValue: ɵ1 }
                    ],
                    selector: 'adf-card-view-dateitem',
                    template: "<div class=\"adf-property-label\"\n     [attr.data-automation-id]=\"'card-dateitem-label-' + property.key\"\n     *ngIf=\"showProperty() || isEditable()\">\n    {{ property.label | translate }}\n</div>\n\n<div class=\"adf-property-value adf-property-value-padding-top\">\n    <span *ngIf=\"!isEditable() && !property.multivalued\"\n          [attr.data-automation-id]=\"'card-' + property.type + '-value-' + property.key\">\n        <span *ngIf=\"showProperty()\"\n              [attr.data-automation-id]=\"'card-dateitem-' + property.key\"\n              (dblclick)=\"copyToClipboard(property.displayValue)\"\n              matTooltipShowDelay=\"1000\"\n              [matTooltip]=\"'CORE.METADATA.ACTIONS.COPY_TO_CLIPBOARD' | translate\">{{ property.displayValue}}</span>\n    </span>\n    <div *ngIf=\"isEditable() && !property.multivalued\"\n         class=\"adf-dateitem-editable\">\n        <div class=\"adf-dateitem-editable-controls\">\n            <span class=\"adf-datepicker-toggle\"\n                  [attr.data-automation-id]=\"'datepicker-label-toggle-' + property.key\"\n                  (click)=\"showDatePicker()\">\n                <span *ngIf=\"showProperty(); else elseEmptyValueBlock\"\n                      [attr.data-automation-id]=\"'card-' + property.type + '-value-' + property.key\">\n                    {{ property.displayValue }}</span>\n            </span>\n\n            <mat-icon *ngIf=\"showClearAction()\"\n                      class=\"adf-date-reset-icon\"\n                      (click)=\"onDateClear()\"\n                      [attr.title]=\"'CORE.METADATA.ACTIONS.CLEAR' | translate\"\n                      [attr.data-automation-id]=\"'datepicker-date-clear-' + property.key\">\n                clear\n            </mat-icon>\n\n            <mat-datetimepicker-toggle [attr.tabindex]=\"-1\"\n                                       [attr.title]=\"'CORE.METADATA.ACTIONS.EDIT' | translate\"\n                                       [attr.data-automation-id]=\"'datepickertoggle-' + property.key\"\n                                       [for]=\"datetimePicker\">\n            </mat-datetimepicker-toggle>\n        </div>\n\n        <input class=\"adf-invisible-date-input\"\n               [attr.tabIndex]=\"-1\"\n               [matDatetimepicker]=\"datetimePicker\"\n               [value]=\"valueDate\"\n               (dateChange)=\"onDateChanged($event)\">\n\n        <mat-datetimepicker #datetimePicker\n                            [type]=\"$any(property).type\"\n                            [timeInterval]=\"5\"\n                            [attr.data-automation-id]=\"'datepicker-' + property.key\"\n                            [startAt]=\"valueDate\">\n        </mat-datetimepicker>\n    </div>\n    <ng-template #elseEmptyValueBlock>\n        {{ property.default | translate }}\n    </ng-template>\n\n    <div *ngIf=\"property.multivalued\"\n         class=\"adf-property-field adf-dateitem-chip-list-container adf-dateitem-editable\">\n        <mat-chip-list #chipList\n                       class=\"adf-textitem-chip-list\">\n            <mat-chip *ngFor=\"let propertyValue of property.displayValue; let idx = index\"\n                      [removable]=\"isEditable()\"\n                      (removed)=\"removeValueFromList(idx)\">\n                {{ propertyValue }}\n                <mat-icon *ngIf=\"isEditable()\"\n                          matChipRemove>cancel</mat-icon>\n            </mat-chip>\n        </mat-chip-list>\n\n        <mat-form-field *ngIf=\"isEditable()\"\n                        class=\"adf-property-field adf-dateitem-editable-controls\"\n                        [floatLabel]=\"'never'\"\n                        (click)=\"showDatePicker()\">\n            <input matInput\n                   class=\"adf-invisible-date-input\"\n                   [attr.tabIndex]=\"-1\"\n                   [matDatetimepicker]=\"datetimePicker\"\n                   (dateChange)=\"addDateToList($event)\">\n            <mat-datetimepicker-toggle [attr.tabindex]=\"-1\"\n                                       matSuffix\n                                       [attr.title]=\"'CORE.METADATA.ACTIONS.EDIT' | translate\"\n                                       [attr.data-automation-id]=\"'datepickertoggle-' + property.key\"\n                                       [for]=\"datetimePicker\">\n            </mat-datetimepicker-toggle>\n\n            <mat-datetimepicker #datetimePicker\n                                [type]=\"$any(property).type\"\n                                [timeInterval]=\"5\"\n                                [attr.data-automation-id]=\"'datepicker-' + property.key\"\n                                [startAt]=\"valueDate\">\n            </mat-datetimepicker>\n        </mat-form-field>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-invisible-date-input{border:none;float:right;height:2px;margin:0;opacity:0;overflow:hidden;padding:0;width:0}.adf-dateitem-chip-list-container.adf-property-field{border-bottom:0;cursor:pointer;margin-bottom:-7px!important}.adf-dateitem-chip-list-container.adf-property-field .adf-dateitem-editable-controls{margin-top:15px}.adf-dateitem-chip-list-container.adf-property-field .mat-datetimepicker-toggle{position:absolute;right:0;top:-20px}.adf-dateitem-editable{border-bottom:1px solid var(--adf-card-view-datetime-border-color);cursor:pointer;padding-bottom:6px}.adf-dateitem-editable-controls{align-items:center;display:flex;justify-content:space-between}.adf-dateitem-editable-controls button.mat-icon-button{height:20px;line-height:20px;width:20px}.adf-dateitem-editable-controls mat-icon{height:16px;opacity:.5;width:16px}.adf-dateitem-editable-controls:hover mat-icon{opacity:1}.adf-dateitem-editable-controls .adf-datepicker-toggle{flex:1 0 auto}.adf-dateitem-editable-controls mat-icon.adf-date-reset-icon{font-size:16px;height:16px;line-height:10px;opacity:.3;padding-left:8px;position:relative;top:4px;width:16px}.adf-dateitem-editable-controls:hover mat-icon.adf-date-reset-icon{opacity:1}"]
                },] }
    ];
    CardViewDateItemComponent.ctorParameters = function () { return [
        { type: CardViewUpdateService },
        { type: core.DateAdapter },
        { type: UserPreferencesService },
        { type: AppConfigService },
        { type: ClipboardService },
        { type: TranslationService }
    ]; };
    CardViewDateItemComponent.propDecorators = {
        property: [{ type: i0.Input }],
        editable: [{ type: i0.Input }],
        displayEmpty: [{ type: i0.Input }],
        displayClearAction: [{ type: i0.Input }],
        datepicker: [{ type: i0.ViewChild, args: ['datetimePicker',] }]
    };

    var CardViewMapItemComponent = /** @class */ (function (_super) {
        __extends(CardViewMapItemComponent, _super);
        function CardViewMapItemComponent(cardViewUpdateService) {
            var _this = _super.call(this, cardViewUpdateService) || this;
            _this.displayEmpty = true;
            return _this;
        }
        CardViewMapItemComponent.prototype.showProperty = function () {
            return this.displayEmpty || !this.property.isEmpty();
        };
        CardViewMapItemComponent.prototype.isClickable = function () {
            return this.property.clickable;
        };
        CardViewMapItemComponent.prototype.clicked = function () {
            this.cardViewUpdateService.clicked(this.property);
        };
        return CardViewMapItemComponent;
    }(BaseCardView));
    CardViewMapItemComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view-mapitem',
                    template: "<div [attr.data-automation-id]=\"'card-mapitem-label-' + property.key\"\n     class=\"adf-property-label\"\n     *ngIf=\"showProperty()\">{{ property.label | translate }}</div>\n<div class=\"adf-property-value adf-map-item-padding\">\n    <div>\n        <span *ngIf=\"!isClickable(); else clickableTemplate\"\n              [attr.data-automation-id]=\"'card-mapitem-value-' + property.key\">\n            <span *ngIf=\"showProperty();\">{{ property.displayValue }}</span>\n        </span>\n    </div>\n    <ng-template #clickableTemplate>\n        <span class=\"adf-mapitem-clickable-value\"\n              (click)=\"clicked()\"\n              [attr.data-automation-id]=\"'card-mapitem-value-' + property.key\">\n            <span *ngIf=\"showProperty(); else emptyValueTemplate\">{{ property.displayValue }}</span>\n        </span>\n    </ng-template>\n    <ng-template #emptyValueTemplate>\n        {{ property.default | translate }}\n    </ng-template>\n</div>\n",
                    styles: [".adf-mapitem-clickable-value{cursor:pointer!important}.adf-map-item-padding{padding-top:6px}"]
                },] }
    ];
    CardViewMapItemComponent.ctorParameters = function () { return [
        { type: CardViewUpdateService }
    ]; };
    CardViewMapItemComponent.propDecorators = {
        property: [{ type: i0.Input }],
        displayEmpty: [{ type: i0.Input }]
    };

    var CardViewSelectItemComponent = /** @class */ (function (_super) {
        __extends(CardViewSelectItemComponent, _super);
        function CardViewSelectItemComponent(cardViewUpdateService, appConfig) {
            var _this = _super.call(this, cardViewUpdateService) || this;
            _this.appConfig = appConfig;
            _this.editable = false;
            _this.displayNoneOption = true;
            _this.displayEmpty = true;
            _this.filter$ = new rxjs.BehaviorSubject('');
            _this.showInputFilter = false;
            _this.onDestroy$ = new rxjs.Subject();
            _this.list$ = null;
            return _this;
        }
        CardViewSelectItemComponent.prototype.ngOnChanges = function () {
            this.value = this.property.value;
        };
        CardViewSelectItemComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.getOptions()
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (options) {
                _this.showInputFilter = options.length > _this.optionsLimit;
            });
            this.list$ = this.getList();
        };
        CardViewSelectItemComponent.prototype.onFilterInputChange = function (value) {
            this.filter$.next(value.toString());
        };
        CardViewSelectItemComponent.prototype.isEditable = function () {
            return this.editable && this.property.editable;
        };
        CardViewSelectItemComponent.prototype.getOptions = function () {
            return this.options$ || this.property.options$;
        };
        CardViewSelectItemComponent.prototype.getList = function () {
            return rxjs.combineLatest([this.getOptions(), this.filter$])
                .pipe(operators.map(function (_a) {
                var _b = __read(_a, 2), items = _b[0], filter = _b[1];
                return items.filter(function (item) { return filter ? item.label.toLowerCase().includes(filter.toLowerCase())
                    : true; });
            }), operators.takeUntil(this.onDestroy$));
        };
        CardViewSelectItemComponent.prototype.onChange = function (event) {
            var selectedOption = event.value !== undefined ? event.value : null;
            this.cardViewUpdateService.update(Object.assign({}, this.property), selectedOption);
            this.property.value = selectedOption;
        };
        CardViewSelectItemComponent.prototype.showNoneOption = function () {
            return this.displayNoneOption;
        };
        Object.defineProperty(CardViewSelectItemComponent.prototype, "showProperty", {
            get: function () {
                return this.displayEmpty || !this.property.isEmpty();
            },
            enumerable: false,
            configurable: true
        });
        CardViewSelectItemComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next();
            this.onDestroy$.complete();
        };
        Object.defineProperty(CardViewSelectItemComponent.prototype, "optionsLimit", {
            get: function () {
                return this.appConfig.get('content-metadata.selectFilterLimit', CardViewSelectItemComponent.HIDE_FILTER_LIMIT);
            },
            enumerable: false,
            configurable: true
        });
        return CardViewSelectItemComponent;
    }(BaseCardView));
    CardViewSelectItemComponent.HIDE_FILTER_LIMIT = 5;
    CardViewSelectItemComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view-selectitem',
                    template: "<ng-container *ngIf=\"!property.isEmpty() || isEditable()\">\n    <div [attr.data-automation-id]=\"'card-select-label-' + property.key\"\n        class=\"adf-property-label\">{{ property.label | translate }}</div>\n    <div class=\"adf-property-field\">\n        <div *ngIf=\"!isEditable()\"\n            class=\"adf-select-item-padding adf-property-value\"\n            [attr.data-automation-id]=\"'select-readonly-value-' + property.key\"\n            data-automation-class=\"read-only-value\">{{ (property.displayValue | async) | translate }}</div>\n        <div *ngIf=\"isEditable()\">\n            <mat-form-field class=\"adf-select-item-padding-editable adf-property-value\">\n                <mat-select [(value)]=\"value\"\n                            panelClass=\"adf-select-filter\"\n                            (selectionChange)=\"onChange($event)\"\n                            data-automation-class=\"select-box\">\n\n                    <adf-select-filter-input *ngIf=\"showInputFilter\" (change)=\"onFilterInputChange($event)\"></adf-select-filter-input>\n\n                    <mat-option *ngIf=\"showNoneOption()\">{{ 'CORE.CARDVIEW.NONE' | translate }}</mat-option>\n                    <mat-option *ngFor=\"let option of list$ | async\"\n                                [value]=\"option.key\">\n                        {{ option.label | translate }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n    </div>\n</ng-container>\n",
                    styles: [".mat-form-field-type-mat-select{width:100%}.adf-select-item-padding{padding-bottom:20px;padding-top:6px}.adf-select-item-padding-editable{padding-bottom:6px;padding-top:6px}"]
                },] }
    ];
    CardViewSelectItemComponent.ctorParameters = function () { return [
        { type: CardViewUpdateService },
        { type: AppConfigService }
    ]; };
    CardViewSelectItemComponent.propDecorators = {
        editable: [{ type: i0.Input }],
        options$: [{ type: i0.Input }],
        displayNoneOption: [{ type: i0.Input }],
        displayEmpty: [{ type: i0.Input }]
    };

    var CardViewKeyValuePairsItemComponent = /** @class */ (function (_super) {
        __extends(CardViewKeyValuePairsItemComponent, _super);
        function CardViewKeyValuePairsItemComponent(cardViewUpdateService) {
            var _this = _super.call(this, cardViewUpdateService) || this;
            _this.editable = false;
            return _this;
        }
        CardViewKeyValuePairsItemComponent.prototype.ngOnChanges = function () {
            this.values = this.property.value || [];
            this.matTableValues = new table.MatTableDataSource(this.values);
        };
        CardViewKeyValuePairsItemComponent.prototype.isEditable = function () {
            return this.editable && this.property.editable;
        };
        CardViewKeyValuePairsItemComponent.prototype.add = function () {
            this.values.push({ name: '', value: '' });
        };
        CardViewKeyValuePairsItemComponent.prototype.remove = function (index) {
            this.values.splice(index, 1);
            this.save(true);
        };
        CardViewKeyValuePairsItemComponent.prototype.onBlur = function (value) {
            if (value.length) {
                this.save();
            }
        };
        CardViewKeyValuePairsItemComponent.prototype.save = function (remove) {
            var validValues = this.values.filter(function (i) { return i.name.length && i.value.length; });
            if (remove || validValues.length) {
                this.cardViewUpdateService.update(Object.assign({}, this.property), validValues);
                this.property.value = validValues;
            }
        };
        return CardViewKeyValuePairsItemComponent;
    }(BaseCardView));
    CardViewKeyValuePairsItemComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view-boolitem',
                    template: "<div [attr.data-automation-id]=\"'card-key-value-pairs-label-' + property.key\"\n     class=\"adf-property-label\">{{ property.label | translate }}</div>\n<div class=\"adf-property-field\">\n\n    <div *ngIf=\"!isEditable()\"\n         class=\"adf-card-view__key-value-pairs__read-only adf-property-value\">\n        <mat-table #table\n                   [dataSource]=\"matTableValues\"\n                   class=\"mat-elevation-z8\">\n            <ng-container matColumnDef=\"name\">\n                <mat-header-cell *matHeaderCellDef>{{ 'CORE.CARDVIEW.KEYVALUEPAIRS.NAME' | translate }}\n                </mat-header-cell>\n                <mat-cell *matCellDef=\"let item\">{{item.name}}</mat-cell>\n            </ng-container>\n            <ng-container matColumnDef=\"value\">\n                <mat-header-cell *matHeaderCellDef>{{ 'CORE.CARDVIEW.KEYVALUEPAIRS.VALUE' | translate }}\n                </mat-header-cell>\n                <mat-cell *matCellDef=\"let item\">{{item.value}}</mat-cell>\n            </ng-container>\n\n            <mat-header-row *matHeaderRowDef=\"['name', 'value']\"></mat-header-row>\n            <mat-row *matRowDef=\"let row; columns: ['name', 'value'];\"></mat-row>\n        </mat-table>\n    </div>\n\n\n    <div class=\"adf-card-view__key-value-pairs adf-property-value\"\n         *ngIf=\"isEditable() && values && values.length\">\n        <div class=\"adf-card-view__key-value-pairs__row\">\n            <div class=\"adf-card-view__key-value-pairs__col\">{{ 'CORE.CARDVIEW.KEYVALUEPAIRS.NAME' | translate }}</div>\n            <div class=\"adf-card-view__key-value-pairs__col\">{{ 'CORE.CARDVIEW.KEYVALUEPAIRS.VALUE' | translate }}</div>\n        </div>\n\n        <div class=\"adf-card-view__key-value-pairs__row\"\n             *ngFor=\"let item of values; let i = index\">\n            <div class=\"adf-card-view__key-value-pairs__col\">\n                <mat-form-field>\n                    <input matInput\n                           placeholder=\"{{ 'CORE.CARDVIEW.KEYVALUEPAIRS.NAME' | translate }}\"\n                           (blur)=\"onBlur(item.value)\"\n                           [attr.data-automation-id]=\"'card-'+ property.key +'-name-input-' + i\"\n                           [(ngModel)]=\"values[i].name\">\n                </mat-form-field>\n            </div>\n            <div class=\"adf-card-view__key-value-pairs__col\">\n                <mat-form-field>\n                    <input matInput\n                           placeholder=\"{{ 'CORE.CARDVIEW.KEYVALUEPAIRS.VALUE' | translate }}\"\n                           (blur)=\"onBlur(item.value)\"\n                           [attr.data-automation-id]=\"'card-'+ property.key +'-value-input-' + i\"\n                           [(ngModel)]=\"values[i].value\">\n                    <button matSuffix\n                            mat-icon-button\n                            (click)=\"remove(i)\"\n                            class=\"adf-card-view__key-value-pairs__remove-btn\">\n                        <mat-icon>close</mat-icon>\n                    </button>\n                </mat-form-field>\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"isEditable()\"\n         class=\"adf-property-value adf-card-view__key-value-pairs__add-btn-container\">\n        <button (click)=\"add()\"\n                mat-button\n                class=\"adf-card-view__key-value-pairs__add-btn\"\n                [attr.data-automation-id]=\"'card-key-value-pairs-button-' + property.key\">\n            {{ 'CORE.CARDVIEW.KEYVALUEPAIRS.ADD' | translate }}\n            <mat-icon>add</mat-icon>\n        </button>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-card-view__key-value-pairs__row{display:flex;justify-content:center}.adf-card-view__key-value-pairs__col{width:50%}.adf-card-view__key-value-pairs__col .mat-form-field{font-size:14px;width:100%}.adf-card-view__key-value-pairs__col .mat-form-field-appearance-legacy .mat-form-field-label{color:var(--adf-card-view-label-color)!important}.adf-card-view__key-value-pairs__add-btn-container{display:flex;justify-content:center}.adf-card-view__key-value-pairs__add-btn.mat-button{margin-bottom:20px}.adf-card-view__key-value-pairs__read-only{padding-bottom:20px}.adf-card-view__key-value-pairs__read-only .mat-table{box-shadow:none}.adf-card-view__key-value-pairs__read-only .mat-header-row,.adf-card-view__key-value-pairs__read-only .mat-row{padding:0}"]
                },] }
    ];
    CardViewKeyValuePairsItemComponent.ctorParameters = function () { return [
        { type: CardViewUpdateService }
    ]; };
    CardViewKeyValuePairsItemComponent.propDecorators = {
        editable: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    function getType(type) {
        return function () { return type; };
    }

    var DynamicComponentResolver = /** @class */ (function () {
        function DynamicComponentResolver() {
        }
        DynamicComponentResolver.fromType = function (type) {
            return getType(type);
        };
        return DynamicComponentResolver;
    }());
    var DynamicComponentMapper = /** @class */ (function () {
        function DynamicComponentMapper() {
            this.defaultValue = undefined;
            this.types = {};
        }
        DynamicComponentMapper.prototype.getComponentTypeResolver = function (type, defaultValue) {
            if (defaultValue === void 0) { defaultValue = this.defaultValue; }
            if (type) {
                return this.types[type] || DynamicComponentResolver.fromType(defaultValue);
            }
            return DynamicComponentResolver.fromType(defaultValue);
        };
        DynamicComponentMapper.prototype.setComponentTypeResolver = function (type, resolver, override) {
            if (override === void 0) { override = true; }
            if (!type) {
                throw new Error("type is null or not defined");
            }
            if (!resolver) {
                throw new Error("resolver is null or not defined");
            }
            var existing = this.types[type];
            if (existing && !override) {
                throw new Error("already mapped, use override option if you intend replacing existing mapping.");
            }
            this.types[type] = resolver;
        };
        DynamicComponentMapper.prototype.register = function (components, override) {
            var e_1, _a;
            if (override === void 0) { override = false; }
            if (components) {
                try {
                    for (var _b = __values(Object.keys(components)), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var type = _c.value;
                        this.setComponentTypeResolver(type, components[type], override);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        };
        DynamicComponentMapper.prototype.resolveComponentType = function (model, defaultValue) {
            if (defaultValue === void 0) { defaultValue = this.defaultValue; }
            if (model) {
                var resolver = this.getComponentTypeResolver(model.type, defaultValue);
                return resolver(model);
            }
            return defaultValue;
        };
        return DynamicComponentMapper;
    }());

    var CardViewArrayItemComponent = /** @class */ (function (_super) {
        __extends(CardViewArrayItemComponent, _super);
        function CardViewArrayItemComponent(cardViewUpdateService) {
            return _super.call(this, cardViewUpdateService) || this;
        }
        CardViewArrayItemComponent.prototype.clicked = function () {
            if (this.isClickable()) {
                this.cardViewUpdateService.clicked(this.property);
            }
        };
        CardViewArrayItemComponent.prototype.showClickableIcon = function () {
            return this.hasIcon() && this.isClickable();
        };
        CardViewArrayItemComponent.prototype.hasIcon = function () {
            return !!this.property.icon;
        };
        CardViewArrayItemComponent.prototype.displayCount = function () {
            return this.property.noOfItemsToDisplay ? this.property.noOfItemsToDisplay : 0;
        };
        CardViewArrayItemComponent.prototype.isClickable = function () {
            return !!this.property.clickable;
        };
        return CardViewArrayItemComponent;
    }(BaseCardView));
    CardViewArrayItemComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view-arrayitem',
                    template: "<div [attr.data-automation-id]=\"'card-array-label-' + property.key\" class=\"adf-property-label\">{{ property.label | translate }}</div>\n<div class=\"adf-property-value adf-card-view-array-item-container\" (click)=\"clicked()\">\n    <ng-container *ngIf=\"(property.displayValue | async) as items; else elseEmptyValueBlock\">\n        <mat-chip-list *ngIf=\"items.length > 0; else elseEmptyValueBlock\" data-automation-id=\"card-arrayitem-chip-list-container\">\n            <ng-container *ngIf=\"displayCount() > 0; else withOutDisplayCount\" >\n                <mat-chip\n                    *ngFor=\"let item of items.slice(0, displayCount())\"\n                    (click)=\"clicked()\"\n                    [attr.data-automation-id]=\"'card-arrayitem-chip-' + item.value\">\n                    <mat-icon *ngIf=\"item?.icon\" class=\"adf-array-item-icon\">{{item.icon}}</mat-icon>\n                    <span>{{item?.value}}</span>\n                </mat-chip>\n                <mat-chip\n                    *ngIf=\"items.length > displayCount()\"\n                    data-automation-id=\"card-arrayitem-more-chip\"\n                    [matMenuTriggerFor]=\"menu\">\n                    <span>{{items.length - displayCount()}} {{'CORE.CARDVIEW.MORE' | translate}}</span>\n                </mat-chip>\n            </ng-container>\n            <ng-template #withOutDisplayCount>\n                <mat-chip\n                    *ngFor=\"let item of items\"\n                    (click)=\"clicked()\"\n                    [attr.data-automation-id]=\"'card-arrayitem-chip-' + item.value\">\n                    <mat-icon *ngIf=\"item?.icon\" class=\"adf-array-item-icon\">{{item.icon}}</mat-icon>\n                    <span>{{item?.value}}</span>\n                </mat-chip>\n            </ng-template>\n        </mat-chip-list>\n        <mat-menu #menu=\"matMenu\">\n            <mat-card class=\"adf-array-item-more-chip-container\">\n                <mat-card-content>\n                    <mat-chip-list>\n                        <mat-chip (click)=\"clicked()\"\n                            *ngFor=\"let item of items.slice(displayCount(), items.length)\"\n                            [attr.data-automation-id]=\"'card-arrayitem-chip-' + item.value\">\n                        <mat-icon *ngIf=\"item?.icon\" class=\"adf-array-item-icon\">{{item.icon}}</mat-icon>\n                        <span>{{item?.value}}</span>\n                        </mat-chip>\n                    </mat-chip-list>\n                </mat-card-content>\n            </mat-card>\n        </mat-menu>\n    </ng-container>\n    <ng-template #elseEmptyValueBlock>\n        <span class=\"adf-card-array-item-default\" data-automation-id=\"card-arrayitem-default\">{{ property?.default | translate }}</span>\n    </ng-template>\n    <button mat-icon-button *ngIf=\"showClickableIcon()\"\n        class=\"adf-array-item-action\"\n        [attr.aria-label]=\"'CORE.METADATA.ACTIONS.EDIT' | translate\"\n        [attr.title]=\"'CORE.METADATA.ACTIONS.EDIT' | translate\"\n        [attr.data-automation-id]=\"'card-array-item-clickable-icon-' + property.key\">\n        <mat-icon class=\"adf-array-item-icon\">{{property.icon}}</mat-icon>\n    </button>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-array-item-icon{font-size:16px;padding-top:8px}.adf-array-item-action{color:var(--adf-card-view-text-color)}.adf-array-item-action:focus,.adf-array-item-action:hover{color:var(--theme-text-fg-color)}.adf-card-array-item-default{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.adf-array-item-more-chip-container.mat-card{box-shadow:none;max-height:300px;overflow-y:auto}.adf-array-item-more-chip-container .mat-chip{cursor:pointer}.adf-property-value .mat-chip-list{cursor:pointer;padding-top:6px;width:100%}.adf-property-value .mat-chip{cursor:pointer}.adf-card-view-array-item-container{align-items:center;box-sizing:border-box;display:flex;flex-direction:row;place-content:center space-between}"]
                },] }
    ];
    CardViewArrayItemComponent.ctorParameters = function () { return [
        { type: CardViewUpdateService }
    ]; };

    var CardItemTypeService = /** @class */ (function (_super) {
        __extends(CardItemTypeService, _super);
        function CardItemTypeService() {
            var _this = _super.apply(this, __spread(arguments)) || this;
            _this.defaultValue = CardViewTextItemComponent;
            _this.types = {
                'text': DynamicComponentResolver.fromType(CardViewTextItemComponent),
                'select': DynamicComponentResolver.fromType(CardViewSelectItemComponent),
                'int': DynamicComponentResolver.fromType(CardViewTextItemComponent),
                'float': DynamicComponentResolver.fromType(CardViewTextItemComponent),
                'date': DynamicComponentResolver.fromType(CardViewDateItemComponent),
                'datetime': DynamicComponentResolver.fromType(CardViewDateItemComponent),
                'bool': DynamicComponentResolver.fromType(CardViewBoolItemComponent),
                'map': DynamicComponentResolver.fromType(CardViewMapItemComponent),
                'keyvaluepairs': DynamicComponentResolver.fromType(CardViewKeyValuePairsItemComponent),
                'array': DynamicComponentResolver.fromType(CardViewArrayItemComponent)
            };
            return _this;
        }
        return CardItemTypeService;
    }(DynamicComponentMapper));
    CardItemTypeService.ɵprov = i0.ɵɵdefineInjectable({ factory: function CardItemTypeService_Factory() { return new CardItemTypeService(); }, token: CardItemTypeService, providedIn: "root" });
    CardItemTypeService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewContentProxyDirective = /** @class */ (function () {
        function CardViewContentProxyDirective(viewContainerRef) {
            this.viewContainerRef = viewContainerRef;
        }
        return CardViewContentProxyDirective;
    }());
    CardViewContentProxyDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-card-view-content-proxy]'
                },] }
    ];
    CardViewContentProxyDirective.ctorParameters = function () { return [
        { type: i0.ViewContainerRef }
    ]; };

    var CardViewItemDispatcherComponent = /** @class */ (function () {
        function CardViewItemDispatcherComponent(cardItemTypeService, resolver) {
            var _this = this;
            this.cardItemTypeService = cardItemTypeService;
            this.resolver = resolver;
            this.displayEmpty = true;
            this.displayNoneOption = true;
            this.displayClearAction = true;
            this.copyToClipboardAction = true;
            this.useChipsForMultiValueProperty = true;
            this.multiValueSeparator = DEFAULT_SEPARATOR;
            this.loaded = false;
            this.componentReference = null;
            var dynamicLifeCycleMethods = [
                'ngOnInit',
                'ngDoCheck',
                'ngAfterContentInit',
                'ngAfterContentChecked',
                'ngAfterViewInit',
                'ngAfterViewChecked',
                'ngOnDestroy'
            ];
            dynamicLifeCycleMethods.forEach(function (method) {
                _this[method] = _this.proxy.bind(_this, method);
            });
        }
        CardViewItemDispatcherComponent.prototype.ngOnChanges = function (changes) {
            var _this = this;
            if (!this.loaded) {
                this.loadComponent();
                this.loaded = true;
            }
            Object.keys(changes)
                .map(function (changeName) { return [changeName, changes[changeName]]; })
                .forEach(function (_a) {
                var _b = __read(_a, 2), inputParamName = _b[0], simpleChange = _b[1];
                _this.componentReference.instance[inputParamName] = simpleChange.currentValue;
            });
            this.proxy('ngOnChanges', changes);
        };
        CardViewItemDispatcherComponent.prototype.loadComponent = function () {
            var factoryClass = this.cardItemTypeService.resolveComponentType(this.property);
            var factory = this.resolver.resolveComponentFactory(factoryClass);
            this.componentReference = this.content.viewContainerRef.createComponent(factory);
            this.componentReference.instance.editable = this.editable;
            this.componentReference.instance.property = this.property;
            this.componentReference.instance.displayEmpty = this.displayEmpty;
            this.componentReference.instance.displayNoneOption = this.displayNoneOption;
            this.componentReference.instance.displayClearAction = this.displayClearAction;
            this.componentReference.instance.copyToClipboardAction = this.copyToClipboardAction;
            this.componentReference.instance.useChipsForMultiValueProperty = this.useChipsForMultiValueProperty;
            this.componentReference.instance.multiValueSeparator = this.multiValueSeparator;
        };
        CardViewItemDispatcherComponent.prototype.proxy = function (methodName) {
            var args = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                args[_i - 1] = arguments[_i];
            }
            if (this.componentReference.instance[methodName]) {
                this.componentReference.instance[methodName].apply(this.componentReference.instance, args);
            }
        };
        return CardViewItemDispatcherComponent;
    }());
    CardViewItemDispatcherComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-card-view-item-dispatcher',
                    template: '<ng-template adf-card-view-content-proxy></ng-template>'
                },] }
    ];
    CardViewItemDispatcherComponent.ctorParameters = function () { return [
        { type: CardItemTypeService },
        { type: i0.ComponentFactoryResolver }
    ]; };
    CardViewItemDispatcherComponent.propDecorators = {
        property: [{ type: i0.Input }],
        editable: [{ type: i0.Input }],
        displayEmpty: [{ type: i0.Input }],
        displayNoneOption: [{ type: i0.Input }],
        displayClearAction: [{ type: i0.Input }],
        copyToClipboardAction: [{ type: i0.Input }],
        useChipsForMultiValueProperty: [{ type: i0.Input }],
        multiValueSeparator: [{ type: i0.Input }],
        content: [{ type: i0.ViewChild, args: [CardViewContentProxyDirective, { static: true },] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SelectFilterInputComponent = /** @class */ (function () {
        function SelectFilterInputComponent(matSelect) {
            this.matSelect = matSelect;
            this.change = new i0.EventEmitter();
            this.term = '';
            this.onDestroy$ = new rxjs.Subject();
        }
        SelectFilterInputComponent.prototype.onModelChange = function (value) {
            this.change.next(value);
        };
        SelectFilterInputComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.change
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (val) { return _this.term = val; });
            this.matSelect.openedChange
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (isOpened) {
                if (isOpened) {
                    _this.selectFilterInput.nativeElement.focus();
                }
                else {
                    _this.change.next('');
                }
            });
        };
        SelectFilterInputComponent.prototype.reset = function (event) {
            if (event) {
                event.stopPropagation();
            }
            this.change.next('');
            this.selectFilterInput.nativeElement.focus();
        };
        SelectFilterInputComponent.prototype.handleKeydown = function ($event) {
            if (this.term) {
                if ($event.keyCode === keycodes.ESCAPE) {
                    event.stopPropagation();
                    this.change.next('');
                }
                if ($event.target.tagName === 'INPUT' && $event.keyCode === keycodes.TAB) {
                    event.stopPropagation();
                }
            }
        };
        SelectFilterInputComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next();
            this.onDestroy$.complete();
        };
        return SelectFilterInputComponent;
    }());
    SelectFilterInputComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-select-filter-input',
                    template: "\n<div class=\"adf-select-filter-input-container\">\n    <mat-form-field>\n        <input matInput\n            autocomplete=\"off\"\n            (keydown)=\"handleKeydown($event)\"\n            [placeholder]=\"'SELECT_FILTER.INPUT.PLACEHOLDER' | translate\"\n            #selectFilterInput\n            [ngModel]=\"term\"\n            (ngModelChange)=\"onModelChange($event)\"\n            [attr.aria-label]=\"'SELECT_FILTER.INPUT.ARIA_LABEL' | translate\"\n            (change)=\"$event.stopPropagation()\"\n        />\n\n        <button mat-button\n            matSuffix\n            mat-icon-button\n            [attr.aria-label]=\"'SELECT_FILTER.BUTTON.ARIA_LABEL' | translate\"\n            *ngIf=\"term\"\n            (keydown.enter)=\"reset($event)\"\n            (click)=\"reset()\">\n            <mat-icon>close</mat-icon>\n        </button>\n    </mat-form-field>\n</div>\n",
                    host: { 'class': 'adf-select-filter-input' },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-select-filter-input{display:flex;height:4em}.adf-select-filter-input .adf-select-filter-input-container{background:var(--theme-card-bg-color);color:var(--theme-text-bold-color);display:flex;font-size:14px;height:4em;line-height:3em;padding:5px 16px 0;position:absolute;top:0;width:100%;z-index:100}.adf-select-filter-input .mat-form-field{width:100%}.mat-select-panel.adf-select-filter{max-height:calc(256px + 4em);overflow-x:hidden!important;transform:none!important}"]
                },] }
    ];
    SelectFilterInputComponent.ctorParameters = function () { return [
        { type: select.MatSelect, decorators: [{ type: i0.Inject, args: [select.MatSelect,] }] }
    ]; };
    SelectFilterInputComponent.propDecorators = {
        selectFilterInput: [{ type: i0.ViewChild, args: ['selectFilterInput', { read: i0.ElementRef, static: false },] }],
        change: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewItemIntValidator = /** @class */ (function () {
        function CardViewItemIntValidator() {
            this.message = 'CORE.CARDVIEW.VALIDATORS.INT_VALIDATION_ERROR';
        }
        CardViewItemIntValidator.prototype.isValid = function (value) {
            if (Array.isArray(value)) {
                return value.every(this.isIntegerNumber);
            }
            return value === '' || !isNaN(value) && this.isIntegerNumber(value);
        };
        CardViewItemIntValidator.prototype.isIntegerNumber = function (value) {
            var parsedNumber = Number(value);
            return (parsedNumber | 0) === parsedNumber;
        };
        return CardViewItemIntValidator;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewItemFloatValidator = /** @class */ (function () {
        function CardViewItemFloatValidator() {
            this.message = 'CORE.CARDVIEW.VALIDATORS.FLOAT_VALIDATION_ERROR';
        }
        CardViewItemFloatValidator.prototype.isValid = function (value) {
            if (Array.isArray(value)) {
                return value.every(this.isDecimalNumber);
            }
            return value === '' || this.isDecimalNumber(value);
        };
        CardViewItemFloatValidator.prototype.isDecimalNumber = function (value) {
            return !isNaN(parseFloat(value)) && isFinite(value);
        };
        return CardViewItemFloatValidator;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewItemMatchValidator = /** @class */ (function () {
        function CardViewItemMatchValidator(expression, flags) {
            this.expression = expression;
            this.flags = flags;
            this.message = 'CORE.CARDVIEW.VALIDATORS.MATCH_VALIDATION_ERROR';
        }
        CardViewItemMatchValidator.prototype.isValid = function (value) {
            var regex = new RegExp(this.expression, this.flags);
            return value === '' || regex.test(value);
        };
        return CardViewItemMatchValidator;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewItemMinMaxValidator = /** @class */ (function () {
        function CardViewItemMinMaxValidator(minValue, maxValue) {
            this.minValue = minValue;
            this.maxValue = maxValue;
            this.message = 'CORE.CARDVIEW.VALIDATORS.MINMAX_VALIDATION_ERROR';
            this.intValidator = new CardViewItemIntValidator();
        }
        CardViewItemMinMaxValidator.prototype.isValid = function (value) {
            return this.intValidator.isValid(value) && (value >= this.minValue && value <= this.maxValue);
        };
        return CardViewItemMinMaxValidator;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewItemLengthValidator = /** @class */ (function () {
        function CardViewItemLengthValidator(minLength, maxLength) {
            this.minLength = minLength;
            this.maxLength = maxLength;
            this.message = 'CORE.CARDVIEW.VALIDATORS.LENGTH_VALIDATION_ERROR';
        }
        CardViewItemLengthValidator.prototype.isValid = function (value) {
            if (value === void 0) { value = ''; }
            var stringLength = value.length;
            return stringLength >= this.minLength && stringLength <= this.maxLength;
        };
        return CardViewItemLengthValidator;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ɵ0$1 = function (parameters) { return new CardViewItemMinMaxValidator(parameters.minValue, parameters.maxValue); }, ɵ1$1 = function (parameters) { return new CardViewItemMatchValidator(parameters.expression); }, ɵ2 = function (parameters) { return new CardViewItemLengthValidator(parameters.minLength, parameters.maxLength); };
    var validators = {
        minmax: ɵ0$1,
        regex: ɵ1$1,
        length: ɵ2
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var CardViewBaseItemModel = /** @class */ (function () {
        function CardViewBaseItemModel(cardViewItemProperties) {
            var e_1, _c;
            var _a, _b;
            this.label = cardViewItemProperties.label || '';
            this.value = cardViewItemProperties.value && cardViewItemProperties.value.displayName || cardViewItemProperties.value;
            this.key = cardViewItemProperties.key;
            this.default = cardViewItemProperties.default;
            this.editable = !!cardViewItemProperties.editable;
            this.clickable = !!cardViewItemProperties.clickable;
            this.icon = cardViewItemProperties.icon || '';
            this.hint = cardViewItemProperties.hint || '';
            this.validators = cardViewItemProperties.validators || [];
            this.data = cardViewItemProperties.data || null;
            this.multivalued = !!cardViewItemProperties.multivalued;
            if ((_b = (_a = cardViewItemProperties === null || cardViewItemProperties === void 0 ? void 0 : cardViewItemProperties.constraints) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) {
                try {
                    for (var _d = __values(cardViewItemProperties.constraints), _e = _d.next(); !_e.done; _e = _d.next()) {
                        var constraint = _e.value;
                        if (constraint.type !== 'LIST') {
                            this.validators.push(validators[constraint.type.toLowerCase()](constraint.parameters));
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_e && !_e.done && (_c = _d.return)) _c.call(_d);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        }
        CardViewBaseItemModel.prototype.isEmpty = function () {
            return this.value === undefined || this.value === null || this.value.length === 0;
        };
        CardViewBaseItemModel.prototype.isValid = function (newValue) {
            if (!this.validators.length) {
                return true;
            }
            return this.validators
                .map(function (validator) { return validator.isValid(newValue); })
                .reduce(function (isValidUntilNow, isValid) { return isValidUntilNow && isValid; }, true);
        };
        CardViewBaseItemModel.prototype.getValidationErrors = function (value) {
            if (!this.validators.length) {
                return [];
            }
            return this.validators.filter(function (validator) { return !validator.isValid(value); }).map(function (validator) { return validator; });
        };
        return CardViewBaseItemModel;
    }());

    var CardViewBoolItemModel = /** @class */ (function (_super) {
        __extends(CardViewBoolItemModel, _super);
        function CardViewBoolItemModel(cardViewBoolItemProperties) {
            var _this = _super.call(this, cardViewBoolItemProperties) || this;
            _this.type = 'bool';
            _this.value = false;
            if (cardViewBoolItemProperties.value !== undefined) {
                _this.value = !!JSON.parse(cardViewBoolItemProperties.value);
            }
            return _this;
        }
        Object.defineProperty(CardViewBoolItemModel.prototype, "displayValue", {
            get: function () {
                if (this.isEmpty()) {
                    return this.default;
                }
                else {
                    return this.value;
                }
            },
            enumerable: false,
            configurable: true
        });
        return CardViewBoolItemModel;
    }(CardViewBaseItemModel));

    var CardViewDateItemModel = /** @class */ (function (_super) {
        __extends(CardViewDateItemModel, _super);
        function CardViewDateItemModel(cardViewDateItemProperties) {
            var _this = _super.call(this, cardViewDateItemProperties) || this;
            _this.type = 'date';
            if (cardViewDateItemProperties.format) {
                _this.format = cardViewDateItemProperties.format;
            }
            if (cardViewDateItemProperties.locale) {
                _this.locale = cardViewDateItemProperties.locale;
            }
            return _this;
        }
        Object.defineProperty(CardViewDateItemModel.prototype, "displayValue", {
            get: function () {
                var _this = this;
                if (this.multivalued) {
                    if (this.value) {
                        return this.value.map(function (date) { return _this.transformDate(date); });
                    }
                    else {
                        return this.default ? [this.default] : [];
                    }
                }
                else {
                    return this.value ? this.transformDate(this.value) : this.default;
                }
            },
            enumerable: false,
            configurable: true
        });
        CardViewDateItemModel.prototype.transformDate = function (value) {
            this.localizedDatePipe = new LocalizedDatePipe();
            return this.localizedDatePipe.transform(value, this.format, this.locale);
        };
        return CardViewDateItemModel;
    }(CardViewBaseItemModel));

    var CardViewDatetimeItemModel = /** @class */ (function (_super) {
        __extends(CardViewDatetimeItemModel, _super);
        function CardViewDatetimeItemModel(cardViewDateItemProperties) {
            var _this = _super.call(this, cardViewDateItemProperties) || this;
            _this.type = 'datetime';
            _this.format = 'MMM d, y, H:mm';
            if (cardViewDateItemProperties.format) {
                _this.format = cardViewDateItemProperties.format;
            }
            return _this;
        }
        return CardViewDatetimeItemModel;
    }(CardViewDateItemModel));

    var CardViewTextItemModel = /** @class */ (function (_super) {
        __extends(CardViewTextItemModel, _super);
        function CardViewTextItemModel(cardViewTextItemProperties) {
            var _this = _super.call(this, cardViewTextItemProperties) || this;
            _this.type = 'text';
            _this.inputType = 'text';
            _this.multiline = !!cardViewTextItemProperties.multiline;
            _this.pipes = cardViewTextItemProperties.pipes || [];
            _this.clickCallBack = cardViewTextItemProperties.clickCallBack ? cardViewTextItemProperties.clickCallBack : null;
            if (_this.default && _this.isEmpty()) {
                _this.value = _this.default;
            }
            return _this;
        }
        Object.defineProperty(CardViewTextItemModel.prototype, "displayValue", {
            get: function () {
                return this.applyPipes(this.value);
            },
            enumerable: false,
            configurable: true
        });
        CardViewTextItemModel.prototype.applyPipes = function (displayValue) {
            if (this.pipes.length) {
                displayValue = this.pipes.reduce(function (accumulator, _a) {
                    var pipe = _a.pipe, _b = _a.params, params = _b === void 0 ? [] : _b;
                    return pipe.transform.apply(pipe, __spread([accumulator], params));
                }, displayValue);
            }
            return displayValue;
        };
        return CardViewTextItemModel;
    }(CardViewBaseItemModel));

    var CardViewFloatItemModel = /** @class */ (function (_super) {
        __extends(CardViewFloatItemModel, _super);
        function CardViewFloatItemModel(cardViewTextItemProperties) {
            var _this = _super.call(this, cardViewTextItemProperties) || this;
            _this.type = 'float';
            _this.inputType = 'number';
            _this.validators.push(new CardViewItemFloatValidator());
            if (cardViewTextItemProperties.value && !cardViewTextItemProperties.multivalued) {
                _this.value = parseFloat(cardViewTextItemProperties.value);
            }
            return _this;
        }
        Object.defineProperty(CardViewFloatItemModel.prototype, "displayValue", {
            get: function () {
                return this.applyPipes(this.value);
            },
            enumerable: false,
            configurable: true
        });
        return CardViewFloatItemModel;
    }(CardViewTextItemModel));

    var CardViewIntItemModel = /** @class */ (function (_super) {
        __extends(CardViewIntItemModel, _super);
        function CardViewIntItemModel(cardViewTextItemProperties) {
            var _this = _super.call(this, cardViewTextItemProperties) || this;
            _this.type = 'int';
            _this.inputType = 'number';
            _this.validators.push(new CardViewItemIntValidator());
            if (cardViewTextItemProperties.value && !cardViewTextItemProperties.multivalued) {
                _this.value = parseInt(cardViewTextItemProperties.value, 10);
            }
            return _this;
        }
        Object.defineProperty(CardViewIntItemModel.prototype, "displayValue", {
            get: function () {
                return this.applyPipes(this.value);
            },
            enumerable: false,
            configurable: true
        });
        return CardViewIntItemModel;
    }(CardViewTextItemModel));

    var CardViewMapItemModel = /** @class */ (function (_super) {
        __extends(CardViewMapItemModel, _super);
        function CardViewMapItemModel() {
            var _this = _super.apply(this, __spread(arguments)) || this;
            _this.type = 'map';
            return _this;
        }
        Object.defineProperty(CardViewMapItemModel.prototype, "displayValue", {
            get: function () {
                if (this.value && this.value.size > 0) {
                    return this.value.values().next().value;
                }
                else {
                    return this.default;
                }
            },
            enumerable: false,
            configurable: true
        });
        return CardViewMapItemModel;
    }(CardViewBaseItemModel));

    var CardViewKeyValuePairsItemModel = /** @class */ (function (_super) {
        __extends(CardViewKeyValuePairsItemModel, _super);
        function CardViewKeyValuePairsItemModel(cardViewKeyValuePairsItemProperties) {
            var _this = _super.call(this, cardViewKeyValuePairsItemProperties) || this;
            _this.type = 'keyvaluepairs';
            return _this;
        }
        Object.defineProperty(CardViewKeyValuePairsItemModel.prototype, "displayValue", {
            get: function () {
                return this.value;
            },
            enumerable: false,
            configurable: true
        });
        return CardViewKeyValuePairsItemModel;
    }(CardViewBaseItemModel));

    var CardViewSelectItemModel = /** @class */ (function (_super) {
        __extends(CardViewSelectItemModel, _super);
        function CardViewSelectItemModel(cardViewSelectItemProperties) {
            var _this = _super.call(this, cardViewSelectItemProperties) || this;
            _this.type = 'select';
            _this.valueFetch$ = null;
            _this.displayNoneOption = cardViewSelectItemProperties.displayNoneOption !== undefined ? cardViewSelectItemProperties.displayNoneOption : true;
            _this.options$ = cardViewSelectItemProperties.options$;
            _this.valueFetch$ = _this.options$.pipe(operators.switchMap(function (options) {
                var option = options.find(function (o) { var _a; return o.key === ((_a = _this.value) === null || _a === void 0 ? void 0 : _a.toString()); });
                return rxjs.of(option ? option.label : '');
            }));
            return _this;
        }
        Object.defineProperty(CardViewSelectItemModel.prototype, "displayValue", {
            get: function () {
                return this.valueFetch$;
            },
            enumerable: false,
            configurable: true
        });
        CardViewSelectItemModel.prototype.setValue = function (value) {
            this.value = value;
        };
        return CardViewSelectItemModel;
    }(CardViewBaseItemModel));

    var CardViewArrayItemModel = /** @class */ (function (_super) {
        __extends(CardViewArrayItemModel, _super);
        function CardViewArrayItemModel(cardViewArrayItemProperties) {
            var _this = _super.call(this, cardViewArrayItemProperties) || this;
            _this.type = 'array';
            _this.noOfItemsToDisplay = cardViewArrayItemProperties.noOfItemsToDisplay;
            return _this;
        }
        Object.defineProperty(CardViewArrayItemModel.prototype, "displayValue", {
            get: function () {
                return this.value;
            },
            enumerable: false,
            configurable: true
        });
        return CardViewArrayItemModel;
    }(CardViewBaseItemModel));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CardViewModule = /** @class */ (function () {
        function CardViewModule() {
        }
        return CardViewModule;
    }());
    CardViewModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        flexLayout.FlexLayoutModule,
                        i1$2.TranslateModule,
                        datepicker.MatDatepickerModule,
                        core.MatNativeDateModule,
                        checkbox.MatCheckboxModule,
                        input.MatInputModule,
                        table.MatTableModule,
                        i2$1.MatIconModule,
                        select.MatSelectModule,
                        button.MatButtonModule,
                        chips.MatChipsModule,
                        menu.MatMenuModule,
                        card.MatCardModule,
                        core$1.MatDatetimepickerModule,
                        core$1.MatNativeDatetimeModule,
                        slideToggle.MatSlideToggleModule,
                        tooltip.MatTooltipModule
                    ],
                    declarations: [
                        CardViewComponent,
                        CardViewBoolItemComponent,
                        CardViewDateItemComponent,
                        CardViewMapItemComponent,
                        CardViewTextItemComponent,
                        CardViewKeyValuePairsItemComponent,
                        CardViewSelectItemComponent,
                        CardViewItemDispatcherComponent,
                        CardViewContentProxyDirective,
                        CardViewArrayItemComponent,
                        SelectFilterInputComponent
                    ],
                    exports: [
                        CardViewComponent,
                        CardViewBoolItemComponent,
                        CardViewDateItemComponent,
                        CardViewMapItemComponent,
                        CardViewTextItemComponent,
                        CardViewSelectItemComponent,
                        CardViewKeyValuePairsItemComponent,
                        CardViewArrayItemComponent,
                        SelectFilterInputComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var DebugAppConfigService = /** @class */ (function (_super) {
        __extends(DebugAppConfigService, _super);
        function DebugAppConfigService(storage, http, extensionService) {
            var _this = _super.call(this, http, extensionService) || this;
            _this.storage = storage;
            return _this;
        }
        DebugAppConfigService.prototype.get = function (key, defaultValue) {
            if (key === exports.AppConfigValues.OAUTHCONFIG) {
                return (JSON.parse(this.storage.getItem(key)) || _super.prototype.get.call(this, key, defaultValue));
            }
            else if (key === exports.AppConfigValues.APPLICATION) {
                return undefined;
            }
            else {
                return (this.storage.getItem(key) || _super.prototype.get.call(this, key, defaultValue));
            }
        };
        return DebugAppConfigService;
    }(AppConfigService));
    DebugAppConfigService.decorators = [
        { type: i0.Injectable }
    ];
    DebugAppConfigService.ctorParameters = function () { return [
        { type: StorageService },
        { type: i1.HttpClient },
        { type: i2.ExtensionService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AppConfigPipe = /** @class */ (function () {
        function AppConfigPipe(config) {
            this.config = config;
        }
        AppConfigPipe.prototype.transform = function (value, fallback) {
            return this.config.get(value, fallback);
        };
        return AppConfigPipe;
    }());
    AppConfigPipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'adfAppConfig'
                },] }
    ];
    AppConfigPipe.ctorParameters = function () { return [
        { type: AppConfigService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AppConfigModule = /** @class */ (function () {
        function AppConfigModule() {
        }
        return AppConfigModule;
    }());
    AppConfigModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1.HttpClientModule
                    ],
                    declarations: [
                        AppConfigPipe
                    ],
                    exports: [
                        AppConfigPipe
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var FormDefinitionModel = /** @class */ (function (_super) {
        __extends(FormDefinitionModel, _super);
        function FormDefinitionModel(id, name, lastUpdatedByFullName, lastUpdated, metadata) {
            var _this = _super.call(this) || this;
            _this.reusable = false;
            _this.newVersion = false;
            _this.formImageBase64 = '';
            _this.formRepresentation = {
                id: id,
                name: name,
                description: '',
                version: 1,
                lastUpdatedBy: 1,
                lastUpdatedByFullName: lastUpdatedByFullName,
                lastUpdated: lastUpdated,
                stencilSetId: 0,
                referenceId: null,
                formDefinition: {
                    fields: [{
                            name: 'Label',
                            type: 'container',
                            fieldType: 'ContainerRepresentation',
                            numberOfColumns: 2,
                            required: false,
                            readOnly: false,
                            sizeX: 2,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            fields: { '1': _this.metadataToFields(metadata) }
                        }],
                    gridsterForm: false,
                    javascriptEvents: [],
                    metadata: {},
                    outcomes: [],
                    className: '',
                    style: '',
                    tabs: [],
                    variables: []
                }
            };
            return _this;
        }
        FormDefinitionModel.prototype.metadataToFields = function (metadata) {
            var fields = [];
            if (metadata) {
                metadata.forEach(function (property) {
                    if (property) {
                        var field = {
                            type: 'text',
                            id: property.name,
                            name: property.name,
                            required: false,
                            readOnly: false,
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            colspan: 1,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            layout: {
                                colspan: 1,
                                row: -1,
                                column: -1
                            }
                        };
                        fields.push(field);
                    }
                });
            }
            return fields;
        };
        return FormDefinitionModel;
    }(jsApi.FormSaveRepresentation));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormFieldTypes = /** @class */ (function () {
        function FormFieldTypes() {
        }
        FormFieldTypes.isReadOnlyType = function (type) {
            return FormFieldTypes.READONLY_TYPES.includes(type);
        };
        FormFieldTypes.isContainerType = function (type) {
            return type === FormFieldTypes.CONTAINER || type === FormFieldTypes.GROUP;
        };
        return FormFieldTypes;
    }());
    FormFieldTypes.CONTAINER = 'container';
    FormFieldTypes.GROUP = 'group';
    FormFieldTypes.DYNAMIC_TABLE = 'dynamic-table';
    FormFieldTypes.TEXT = 'text';
    FormFieldTypes.MULTILINE_TEXT = 'multi-line-text';
    FormFieldTypes.DROPDOWN = 'dropdown';
    FormFieldTypes.HYPERLINK = 'hyperlink';
    FormFieldTypes.RADIO_BUTTONS = 'radio-buttons';
    FormFieldTypes.DISPLAY_VALUE = 'readonly';
    FormFieldTypes.READONLY_TEXT = 'readonly-text';
    FormFieldTypes.UPLOAD = 'upload';
    FormFieldTypes.TYPEAHEAD = 'typeahead';
    FormFieldTypes.FUNCTIONAL_GROUP = 'functional-group';
    FormFieldTypes.PEOPLE = 'people';
    FormFieldTypes.BOOLEAN = 'boolean';
    FormFieldTypes.NUMBER = 'integer';
    FormFieldTypes.DATE = 'date';
    FormFieldTypes.AMOUNT = 'amount';
    FormFieldTypes.DOCUMENT = 'document';
    FormFieldTypes.DATETIME = 'datetime';
    FormFieldTypes.ATTACH_FOLDER = 'select-folder';
    FormFieldTypes.FILE_VIEWER = 'file-viewer';
    FormFieldTypes.READONLY_TYPES = [
        FormFieldTypes.HYPERLINK,
        FormFieldTypes.DISPLAY_VALUE,
        FormFieldTypes.READONLY_TEXT,
        FormFieldTypes.GROUP
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormWidgetModel = /** @class */ (function () {
        function FormWidgetModel(form, json) {
            this.form = form;
            this.json = json;
            if (json) {
                this.fieldType = json.fieldType;
                this.id = json.id;
                this.name = json.name;
                this.type = json.type;
                this.tab = json.tab;
                this.field = json.field;
            }
        }
        return FormWidgetModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var WidgetVisibilityModel = /** @class */ (function () {
        function WidgetVisibilityModel(json) {
            this.json = json;
            if (json) {
                this.operator = json.operator;
                this.nextCondition = new WidgetVisibilityModel(json.nextCondition);
                this.nextConditionOperator = json.nextConditionOperator;
                this.rightRestResponseId = json.rightRestResponseId;
                this.rightFormFieldId = json.rightFormFieldId;
                this.leftFormFieldId = json.leftFormFieldId;
                this.leftRestResponseId = json.leftRestResponseId;
            }
            else {
                this.json = {};
            }
        }
        Object.defineProperty(WidgetVisibilityModel.prototype, "leftType", {
            get: function () {
                if (this.leftFormFieldId) {
                    return WidgetTypeEnum.field;
                }
                else if (this.leftRestResponseId) {
                    return WidgetTypeEnum.variable;
                }
                else if (!!this.json.leftType) {
                    return this.json.leftType;
                }
                return null;
            },
            set: function (leftType) {
                this.json.leftType = leftType;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(WidgetVisibilityModel.prototype, "leftValue", {
            get: function () {
                if (this.json.leftValue) {
                    return this.json.leftValue;
                }
                else if (this.leftFormFieldId) {
                    return this.leftFormFieldId;
                }
                else {
                    return this.leftRestResponseId;
                }
            },
            set: function (leftValue) {
                this.json.leftValue = leftValue;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(WidgetVisibilityModel.prototype, "rightType", {
            get: function () {
                if (!!this.json.rightType) {
                    return this.json.rightType;
                }
                else if (this.json.rightValue) {
                    return WidgetTypeEnum.value;
                }
                else if (this.rightRestResponseId) {
                    return WidgetTypeEnum.variable;
                }
                else if (this.rightFormFieldId) {
                    return WidgetTypeEnum.field;
                }
                return null;
            },
            set: function (rightType) {
                this.json.rightType = rightType;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(WidgetVisibilityModel.prototype, "rightValue", {
            get: function () {
                if (this.json.rightValue) {
                    return this.json.rightValue;
                }
                else if (this.rightFormFieldId) {
                    return this.rightFormFieldId;
                }
                else {
                    return this.rightRestResponseId;
                }
            },
            set: function (rightValue) {
                this.json.rightValue = rightValue;
            },
            enumerable: false,
            configurable: true
        });
        return WidgetVisibilityModel;
    }());
    var WidgetTypeEnum;
    (function (WidgetTypeEnum) {
        WidgetTypeEnum["field"] = "field";
        WidgetTypeEnum["variable"] = "variable";
        WidgetTypeEnum["value"] = "value";
    })(WidgetTypeEnum || (WidgetTypeEnum = {}));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ContainerColumnModel = /** @class */ (function () {
        function ContainerColumnModel() {
            this.size = 12;
            this.fields = [];
            this.colspan = 1;
            this.rowspan = 1;
        }
        ContainerColumnModel.prototype.hasFields = function () {
            return this.fields && this.fields.length > 0;
        };
        return ContainerColumnModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ErrorMessageModel = /** @class */ (function () {
        function ErrorMessageModel(obj) {
            this.message = '';
            this.attributes = null;
            this.message = obj && obj.message ? obj.message : '';
            this.attributes = new Map();
        }
        ErrorMessageModel.prototype.isActive = function () {
            return !!this.message;
        };
        ErrorMessageModel.prototype.getAttributesAsJsonObj = function () {
            var result = {};
            if (this.attributes.size > 0) {
                var obj_1 = Object.create(null);
                this.attributes.forEach(function (value, key) {
                    obj_1[key] = value;
                });
                result = JSON.stringify(obj_1);
            }
            return result;
        };
        return ErrorMessageModel;
    }());

    var RequiredFieldValidator = /** @class */ (function () {
        function RequiredFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.TEXT,
                FormFieldTypes.MULTILINE_TEXT,
                FormFieldTypes.NUMBER,
                FormFieldTypes.BOOLEAN,
                FormFieldTypes.TYPEAHEAD,
                FormFieldTypes.DROPDOWN,
                FormFieldTypes.PEOPLE,
                FormFieldTypes.FUNCTIONAL_GROUP,
                FormFieldTypes.RADIO_BUTTONS,
                FormFieldTypes.UPLOAD,
                FormFieldTypes.AMOUNT,
                FormFieldTypes.DYNAMIC_TABLE,
                FormFieldTypes.DATE,
                FormFieldTypes.DATETIME,
                FormFieldTypes.ATTACH_FOLDER
            ];
        }
        RequiredFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 &&
                field.required;
        };
        RequiredFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.isVisible) {
                if (field.type === FormFieldTypes.DROPDOWN) {
                    if (field.hasMultipleValues) {
                        return Array.isArray(field.value) && !!field.value.length;
                    }
                    if (field.hasEmptyValue && field.emptyOption) {
                        if (field.value === field.emptyOption.id) {
                            return false;
                        }
                    }
                }
                if (field.type === FormFieldTypes.RADIO_BUTTONS) {
                    var option = field.options.find(function (opt) { return opt.id === field.value; });
                    return !!option;
                }
                if (field.type === FormFieldTypes.UPLOAD) {
                    return field.value && field.value.length > 0;
                }
                if (field.type === FormFieldTypes.DYNAMIC_TABLE) {
                    return field.value && field.value instanceof Array && field.value.length > 0;
                }
                if (field.type === FormFieldTypes.BOOLEAN) {
                    return !!field.value;
                }
                if (field.value === null || field.value === undefined || field.value === '') {
                    return false;
                }
            }
            return true;
        };
        return RequiredFieldValidator;
    }());
    var NumberFieldValidator = /** @class */ (function () {
        function NumberFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.NUMBER,
                FormFieldTypes.AMOUNT
            ];
        }
        NumberFieldValidator.isNumber = function (value) {
            if (value === null || value === undefined || value === '') {
                return false;
            }
            return !isNaN(+value);
        };
        NumberFieldValidator.prototype.isSupported = function (field) {
            return field && this.supportedTypes.indexOf(field.type) > -1;
        };
        NumberFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.isVisible) {
                if (field.value === null ||
                    field.value === undefined ||
                    field.value === '') {
                    return true;
                }
                var valueStr = '' + field.value;
                var pattern = new RegExp(/^-?\d+$/);
                if (field.enableFractions) {
                    pattern = new RegExp(/^-?[0-9]+(\.[0-9]{1,2})?$/);
                }
                if (valueStr.match(pattern)) {
                    return true;
                }
                field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_NUMBER';
                return false;
            }
            return true;
        };
        return NumberFieldValidator;
    }());
    var DateFieldValidator = /** @class */ (function () {
        function DateFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.DATE
            ];
        }
        DateFieldValidator.isValidDate = function (inputDate, dateFormat) {
            if (dateFormat === void 0) { dateFormat = 'D-M-YYYY'; }
            if (inputDate) {
                var d = moment$1(inputDate, dateFormat, true);
                return d.isValid();
            }
            return false;
        };
        DateFieldValidator.prototype.isSupported = function (field) {
            return field && this.supportedTypes.indexOf(field.type) > -1;
        };
        DateFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.value && field.isVisible) {
                if (DateFieldValidator.isValidDate(field.value, field.dateDisplayFormat)) {
                    return true;
                }
                field.validationSummary.message = field.dateDisplayFormat;
                return false;
            }
            return true;
        };
        return DateFieldValidator;
    }());
    var DateTimeFieldValidator = /** @class */ (function () {
        function DateTimeFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.DATETIME
            ];
        }
        DateTimeFieldValidator.isValidDate = function (inputDate, dateFormat) {
            if (dateFormat === void 0) { dateFormat = 'YYYY-MM-DD HH:mm'; }
            if (inputDate) {
                var d = moment$1(inputDate, dateFormat, true);
                return d.isValid();
            }
            return false;
        };
        DateTimeFieldValidator.prototype.isSupported = function (field) {
            return field && this.supportedTypes.indexOf(field.type) > -1;
        };
        DateTimeFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.value && field.isVisible) {
                if (DateFieldValidator.isValidDate(field.value, field.dateDisplayFormat)) {
                    return true;
                }
                field.validationSummary.message = field.dateDisplayFormat;
                return false;
            }
            return true;
        };
        return DateTimeFieldValidator;
    }());
    var BoundaryDateFieldValidator = /** @class */ (function () {
        function BoundaryDateFieldValidator() {
            this.DATE_FORMAT_CLOUD = 'YYYY-MM-DD';
            this.DATE_FORMAT = 'DD-MM-YYYY';
            this.supportedTypes = [
                FormFieldTypes.DATE
            ];
        }
        BoundaryDateFieldValidator.prototype.validate = function (field) {
            var isValid = true;
            if (this.isSupported(field) && field.value && field.isVisible) {
                var dateFormat = field.dateDisplayFormat;
                if (!DateFieldValidator.isValidDate(field.value, dateFormat)) {
                    field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_DATE';
                    isValid = false;
                }
                else {
                    isValid = this.checkDate(field, dateFormat);
                }
            }
            return isValid;
        };
        BoundaryDateFieldValidator.prototype.extractDateFormat = function (date) {
            var brokenDownDate = date.split('-');
            return brokenDownDate[0].length === 4 ? this.DATE_FORMAT_CLOUD : this.DATE_FORMAT;
        };
        return BoundaryDateFieldValidator;
    }());
    var MinDateFieldValidator = /** @class */ (function (_super) {
        __extends(MinDateFieldValidator, _super);
        function MinDateFieldValidator() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        MinDateFieldValidator.prototype.checkDate = function (field, dateFormat) {
            var isValid = true;
            var fieldValueData;
            if (typeof field.value === 'string') {
                fieldValueData = moment$1(field.value.split('T')[0], dateFormat);
            }
            else {
                fieldValueData = field.value;
            }
            var minValueDateFormat = this.extractDateFormat(field.minValue);
            var min = moment$1(field.minValue, minValueDateFormat);
            if (fieldValueData.isBefore(min)) {
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_LESS_THAN";
                field.validationSummary.attributes.set('minValue', min.format(field.dateDisplayFormat).toLocaleUpperCase());
                isValid = false;
            }
            return isValid;
        };
        MinDateFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 && !!field.minValue;
        };
        return MinDateFieldValidator;
    }(BoundaryDateFieldValidator));
    var MaxDateFieldValidator = /** @class */ (function (_super) {
        __extends(MaxDateFieldValidator, _super);
        function MaxDateFieldValidator() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        MaxDateFieldValidator.prototype.checkDate = function (field, dateFormat) {
            var isValid = true;
            var fieldValueData;
            if (typeof field.value === 'string') {
                fieldValueData = moment$1(field.value.split('T')[0], dateFormat);
            }
            else {
                fieldValueData = field.value;
            }
            var maxValueDateFormat = this.extractDateFormat(field.maxValue);
            var max = moment$1(field.maxValue, maxValueDateFormat);
            if (fieldValueData.isAfter(max)) {
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_GREATER_THAN";
                field.validationSummary.attributes.set('maxValue', max.format(field.dateDisplayFormat).toLocaleUpperCase());
                isValid = false;
            }
            return isValid;
        };
        MaxDateFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 && !!field.maxValue;
        };
        return MaxDateFieldValidator;
    }(BoundaryDateFieldValidator));
    var MinDateTimeFieldValidator = /** @class */ (function () {
        function MinDateTimeFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.DATETIME
            ];
            this.MIN_DATETIME_FORMAT = 'YYYY-MM-DD hh:mm AZ';
        }
        MinDateTimeFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 && !!field.minValue;
        };
        MinDateTimeFieldValidator.prototype.validate = function (field) {
            var isValid = true;
            if (this.isSupported(field) && field.value && field.isVisible) {
                var dateFormat = field.dateDisplayFormat;
                if (!DateFieldValidator.isValidDate(field.value, dateFormat)) {
                    field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_DATE';
                    isValid = false;
                }
                else {
                    isValid = this.checkDateTime(field, dateFormat);
                }
            }
            return isValid;
        };
        MinDateTimeFieldValidator.prototype.checkDateTime = function (field, dateFormat) {
            var isValid = true;
            var fieldValueDate;
            if (typeof field.value === 'string') {
                fieldValueDate = moment$1(field.value, dateFormat);
            }
            else {
                fieldValueDate = field.value;
            }
            var min = moment$1(field.minValue, this.MIN_DATETIME_FORMAT);
            if (fieldValueDate.isBefore(min)) {
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_LESS_THAN";
                field.validationSummary.attributes.set('minValue', min.format(field.dateDisplayFormat).replace(':', '-'));
                isValid = false;
            }
            return isValid;
        };
        return MinDateTimeFieldValidator;
    }());
    var MaxDateTimeFieldValidator = /** @class */ (function () {
        function MaxDateTimeFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.DATETIME
            ];
            this.MAX_DATETIME_FORMAT = 'YYYY-MM-DD hh:mm AZ';
        }
        MaxDateTimeFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 && !!field.maxValue;
        };
        MaxDateTimeFieldValidator.prototype.validate = function (field) {
            var isValid = true;
            if (this.isSupported(field) && field.value && field.isVisible) {
                var dateFormat = field.dateDisplayFormat;
                if (!DateFieldValidator.isValidDate(field.value, dateFormat)) {
                    field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_DATE';
                    isValid = false;
                }
                else {
                    isValid = this.checkDateTime(field, dateFormat);
                }
            }
            return isValid;
        };
        MaxDateTimeFieldValidator.prototype.checkDateTime = function (field, dateFormat) {
            var isValid = true;
            var fieldValueDate;
            if (typeof field.value === 'string') {
                fieldValueDate = moment$1(field.value, dateFormat);
            }
            else {
                fieldValueDate = field.value;
            }
            var max = moment$1(field.maxValue, this.MAX_DATETIME_FORMAT);
            if (fieldValueDate.isAfter(max)) {
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_GREATER_THAN";
                field.validationSummary.attributes.set('maxValue', max.format(field.dateDisplayFormat).replace(':', '-'));
                isValid = false;
            }
            return isValid;
        };
        return MaxDateTimeFieldValidator;
    }());
    var MinLengthFieldValidator = /** @class */ (function () {
        function MinLengthFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.TEXT,
                FormFieldTypes.MULTILINE_TEXT
            ];
        }
        MinLengthFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 &&
                field.minLength > 0;
        };
        MinLengthFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.value && field.isVisible) {
                if (field.value.length >= field.minLength) {
                    return true;
                }
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.AT_LEAST_LONG";
                field.validationSummary.attributes.set('minLength', field.minLength.toLocaleString());
                return false;
            }
            return true;
        };
        return MinLengthFieldValidator;
    }());
    var MaxLengthFieldValidator = /** @class */ (function () {
        function MaxLengthFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.TEXT,
                FormFieldTypes.MULTILINE_TEXT
            ];
        }
        MaxLengthFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 &&
                field.maxLength > 0;
        };
        MaxLengthFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.value && field.isVisible) {
                if (field.value.length <= field.maxLength) {
                    return true;
                }
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NO_LONGER_THAN";
                field.validationSummary.attributes.set('maxLength', field.maxLength.toLocaleString());
                return false;
            }
            return true;
        };
        return MaxLengthFieldValidator;
    }());
    var MinValueFieldValidator = /** @class */ (function () {
        function MinValueFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.NUMBER,
                FormFieldTypes.AMOUNT
            ];
        }
        MinValueFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 &&
                NumberFieldValidator.isNumber(field.minValue);
        };
        MinValueFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.value && field.isVisible) {
                var value = +field.value;
                var minValue = +field.minValue;
                if (value >= minValue) {
                    return true;
                }
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_LESS_THAN";
                field.validationSummary.attributes.set('minValue', field.minValue.toLocaleString());
                return false;
            }
            return true;
        };
        return MinValueFieldValidator;
    }());
    var MaxValueFieldValidator = /** @class */ (function () {
        function MaxValueFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.NUMBER,
                FormFieldTypes.AMOUNT
            ];
        }
        MaxValueFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 &&
                NumberFieldValidator.isNumber(field.maxValue);
        };
        MaxValueFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.value && field.isVisible) {
                var value = +field.value;
                var maxValue = +field.maxValue;
                if (value <= maxValue) {
                    return true;
                }
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_GREATER_THAN";
                field.validationSummary.attributes.set('maxValue', field.maxValue.toLocaleString());
                return false;
            }
            return true;
        };
        return MaxValueFieldValidator;
    }());
    var RegExFieldValidator = /** @class */ (function () {
        function RegExFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.TEXT,
                FormFieldTypes.MULTILINE_TEXT
            ];
        }
        RegExFieldValidator.prototype.isSupported = function (field) {
            return field &&
                this.supportedTypes.indexOf(field.type) > -1 && !!field.regexPattern;
        };
        RegExFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.value && field.isVisible) {
                if (field.value.length > 0 && field.value.match(new RegExp('^' + field.regexPattern + '$'))) {
                    return true;
                }
                field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_VALUE';
                return false;
            }
            return true;
        };
        return RegExFieldValidator;
    }());
    var FixedValueFieldValidator = /** @class */ (function () {
        function FixedValueFieldValidator() {
            this.supportedTypes = [
                FormFieldTypes.TYPEAHEAD
            ];
        }
        FixedValueFieldValidator.prototype.isSupported = function (field) {
            return field && this.supportedTypes.indexOf(field.type) > -1;
        };
        FixedValueFieldValidator.prototype.hasValidNameOrValidId = function (field) {
            return this.hasValidName(field) || this.hasValidId(field);
        };
        FixedValueFieldValidator.prototype.hasValidName = function (field) {
            return field.options.find(function (item) { return item.name && item.name.toLocaleLowerCase() === field.value.toLocaleLowerCase(); }) ? true : false;
        };
        FixedValueFieldValidator.prototype.hasValidId = function (field) {
            return field.options.find(function (item) { return item.id === field.value; }) ? true : false;
        };
        FixedValueFieldValidator.prototype.hasStringValue = function (field) {
            return field.value && typeof field.value === 'string';
        };
        FixedValueFieldValidator.prototype.hasOptions = function (field) {
            return field.options && field.options.length > 0;
        };
        FixedValueFieldValidator.prototype.validate = function (field) {
            if (this.isSupported(field) && field.isVisible) {
                if (this.hasStringValue(field) && this.hasOptions(field) && !this.hasValidNameOrValidId(field)) {
                    field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_VALUE';
                    return false;
                }
            }
            return true;
        };
        return FixedValueFieldValidator;
    }());
    var FORM_FIELD_VALIDATORS = [
        new RequiredFieldValidator(),
        new NumberFieldValidator(),
        new MinLengthFieldValidator(),
        new MaxLengthFieldValidator(),
        new MinValueFieldValidator(),
        new MaxValueFieldValidator(),
        new RegExFieldValidator(),
        new DateFieldValidator(),
        new DateTimeFieldValidator(),
        new MinDateFieldValidator(),
        new MaxDateFieldValidator(),
        new FixedValueFieldValidator(),
        new MinDateTimeFieldValidator(),
        new MaxDateTimeFieldValidator()
    ];

    var FormFieldModel = /** @class */ (function (_super) {
        __extends(FormFieldModel, _super);
        function FormFieldModel(form, json) {
            var _this = this;
            var _a;
            _this = _super.call(this, form, json) || this;
            _this._readOnly = false;
            _this._isValid = true;
            _this._required = false;
            _this.defaultDateFormat = 'D-M-YYYY';
            _this.defaultDateTimeFormat = 'D-M-YYYY hh:mm A';
            _this.rowspan = 1;
            _this.colspan = 1;
            _this.placeholder = null;
            _this.tooltip = null;
            _this.minLength = 0;
            _this.maxLength = 0;
            _this.options = [];
            _this.params = {};
            _this.isVisible = true;
            _this.visibilityCondition = null;
            _this.enableFractions = false;
            _this.currency = null;
            _this.dateDisplayFormat = _this.defaultDateFormat;
            _this.selectionType = null;
            _this.numberOfColumns = 1;
            _this.fields = [];
            _this.columns = [];
            if (json) {
                _this.fieldType = json.fieldType;
                _this.id = json.id;
                _this.name = json.name;
                _this.type = json.type;
                _this.roles = json.roles;
                _this._required = json.required;
                _this._readOnly = json.readOnly || json.type === 'readonly';
                _this.overrideId = json.overrideId;
                _this.tab = json.tab;
                _this.restUrl = json.restUrl;
                _this.restResponsePath = json.restResponsePath;
                _this.restIdProperty = json.restIdProperty;
                _this.restLabelProperty = json.restLabelProperty;
                _this.colspan = json.colspan;
                _this.rowspan = json.rowspan;
                _this.minLength = json.minLength || 0;
                _this.maxLength = json.maxLength || 0;
                _this.minValue = json.minValue;
                _this.maxValue = json.maxValue;
                _this.regexPattern = json.regexPattern;
                _this.options = json.options || [];
                _this.hasEmptyValue = json.hasEmptyValue;
                _this.className = json.className;
                _this.optionType = json.optionType;
                _this.params = json.params || {};
                _this.hyperlinkUrl = json.hyperlinkUrl;
                _this.displayText = json.displayText;
                _this.visibilityCondition = json.visibilityCondition ? new WidgetVisibilityModel(json.visibilityCondition) : undefined;
                _this.enableFractions = json.enableFractions;
                _this.currency = json.currency;
                _this.dateDisplayFormat = json.dateDisplayFormat || _this.getDefaultDateFormat(json);
                _this._value = _this.parseValue(json);
                _this.validationSummary = new ErrorMessageModel();
                _this.tooltip = json.tooltip;
                _this.selectionType = json.selectionType;
                _this.rule = json.rule;
                if (json.placeholder && json.placeholder !== '' && json.placeholder !== 'null') {
                    _this.placeholder = json.placeholder;
                }
                if (FormFieldTypes.isReadOnlyType(_this.type)) {
                    if (_this.params && _this.params.field) {
                        var valueFound = false;
                        if (form.processVariables) {
                            var processVariable = _this.getProcessVariableValue(_this.params.field, form);
                            if (processVariable) {
                                valueFound = true;
                                _this.value = processVariable;
                            }
                        }
                        if (!valueFound && _this.params.responseVariable) {
                            var defaultValue = form.getFormVariableValue(_this.params.field.name);
                            if (defaultValue) {
                                valueFound = true;
                                _this.value = defaultValue;
                            }
                        }
                    }
                }
                if (FormFieldTypes.isContainerType(_this.type)) {
                    _this.containerFactory(json, form);
                }
            }
            var emptyOption = Array.isArray(_this.options) ? _this.options.find(function (_b) {
                var id = _b.id;
                return id === 'empty';
            }) : undefined;
            if (_this.hasEmptyValue === undefined) {
                _this.hasEmptyValue = (_a = json === null || json === void 0 ? void 0 : json.hasEmptyValue) !== null && _a !== void 0 ? _a : !!emptyOption;
            }
            if (_this.options && _this.options.length > 0 && _this.hasEmptyValue) {
                _this.emptyOption = emptyOption;
            }
            _this.updateForm();
            return _this;
        }
        Object.defineProperty(FormFieldModel.prototype, "value", {
            get: function () {
                return this._value;
            },
            set: function (v) {
                this._value = v;
                this.updateForm();
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormFieldModel.prototype, "readOnly", {
            get: function () {
                if (this.form && this.form.readOnly) {
                    return true;
                }
                return this._readOnly;
            },
            set: function (readOnly) {
                this._readOnly = readOnly;
                this.updateForm();
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormFieldModel.prototype, "required", {
            get: function () {
                return this._required;
            },
            set: function (value) {
                this._required = value;
                this.updateForm();
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormFieldModel.prototype, "isValid", {
            get: function () {
                return this._isValid;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormFieldModel.prototype, "hasMultipleValues", {
            get: function () {
                return this.selectionType === 'multiple';
            },
            enumerable: false,
            configurable: true
        });
        FormFieldModel.prototype.markAsInvalid = function () {
            this._isValid = false;
        };
        FormFieldModel.prototype.validate = function () {
            var e_1, _b;
            this.validationSummary = new ErrorMessageModel();
            if (!this.readOnly) {
                var validators = this.form.fieldValidators || [];
                try {
                    for (var validators_1 = __values(validators), validators_1_1 = validators_1.next(); !validators_1_1.done; validators_1_1 = validators_1.next()) {
                        var validator = validators_1_1.value;
                        if (!validator.validate(this)) {
                            this._isValid = false;
                            return this._isValid;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (validators_1_1 && !validators_1_1.done && (_b = validators_1.return)) _b.call(validators_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            this._isValid = true;
            return this._isValid;
        };
        FormFieldModel.prototype.getDefaultDateFormat = function (jsonField) {
            var originalType = jsonField.type;
            if (FormFieldTypes.isReadOnlyType(jsonField.type) &&
                jsonField.params &&
                jsonField.params.field) {
                originalType = jsonField.params.field.type;
            }
            return originalType === FormFieldTypes.DATETIME ? this.defaultDateTimeFormat : this.defaultDateFormat;
        };
        FormFieldModel.prototype.isTypeaheadFieldType = function (type) {
            return type === 'typeahead';
        };
        FormFieldModel.prototype.getFieldNameWithLabel = function (name) {
            return name + '_LABEL';
        };
        FormFieldModel.prototype.getProcessVariableValue = function (field, form) {
            var fieldName = field.name;
            if (this.isTypeaheadFieldType(field.type)) {
                fieldName = this.getFieldNameWithLabel(field.id);
            }
            return form.getProcessVariableValue(fieldName);
        };
        FormFieldModel.prototype.containerFactory = function (json, form) {
            var _this = this;
            this.numberOfColumns = json.numberOfColumns || 1;
            this.fields = json.fields;
            this.rowspan = 1;
            this.colspan = 1;
            if (json.fields) {
                for (var currentField in json.fields) {
                    if (json.fields.hasOwnProperty(currentField)) {
                        var col = new ContainerColumnModel();
                        var fields = (json.fields[currentField] || []).map(function (field) { return new FormFieldModel(form, field); });
                        col.fields = fields;
                        col.rowspan = json.fields[currentField].length;
                        col.fields.forEach(function (colFields) {
                            _this.colspan = colFields.colspan > _this.colspan ? colFields.colspan : _this.colspan;
                        });
                        this.rowspan = this.rowspan < col.rowspan ? col.rowspan : this.rowspan;
                        this.columns.push(col);
                    }
                }
            }
        };
        FormFieldModel.prototype.parseValue = function (json) {
            var value = json.hasOwnProperty('value') && json.value !== undefined ? json.value : null;
            if (json.type === FormFieldTypes.DROPDOWN) {
                if (json.options) {
                    var options = json.options || [];
                    if (options.length > 0) {
                        if (json.hasEmptyValue) {
                            var emptyOption = json.options[0];
                            if (value === '' || value === emptyOption.id || value === emptyOption.name) {
                                value = emptyOption.id;
                            }
                        }
                        else {
                            if ((value === null || value === void 0 ? void 0 : value.id) && (value === null || value === void 0 ? void 0 : value.name)) {
                                value = value.id;
                            }
                        }
                    }
                }
                if (this.hasMultipleValues) {
                    value = Array.isArray(json.value) ? json.value : [];
                }
            }
            if (json.type === FormFieldTypes.RADIO_BUTTONS) {
                var entry = this.options.filter(function (opt) { return opt.id === value || opt.name === value || (value && (opt.id === value.id || opt.name === value.name)); });
                if (entry.length > 0) {
                    value = entry[0].id;
                }
            }
            if (this.isDateField(json) || this.isDateTimeField(json)) {
                if (value) {
                    var dateValue = void 0;
                    if (NumberFieldValidator.isNumber(value)) {
                        dateValue = moment$1(value);
                    }
                    else {
                        dateValue = this.isDateTimeField(json) ? moment$1(value, 'YYYY-MM-DD hh:mm A') : moment$1(value.split('T')[0], 'YYYY-M-D');
                    }
                    if (dateValue && dateValue.isValid()) {
                        value = dateValue.format(this.dateDisplayFormat);
                    }
                }
            }
            if (this.isCheckboxField(json)) {
                value = json.value === 'true' || json.value === true;
            }
            return value;
        };
        FormFieldModel.prototype.updateForm = function () {
            var _this = this;
            if (!this.form) {
                return;
            }
            switch (this.type) {
                case FormFieldTypes.DROPDOWN:
                    if (Array.isArray(this.value)) {
                        this.form.values[this.id] = this.value;
                        break;
                    }
                    if (typeof this.value === 'string') {
                        if (this.value === 'empty' || this.value === '') {
                            this.form.values[this.id] = {};
                            break;
                        }
                        var entry = this.options.filter(function (opt) { return opt.id === _this.value; });
                        if (entry.length > 0) {
                            this.setFormFieldValueOption(entry[0]);
                        }
                    }
                    break;
                case FormFieldTypes.RADIO_BUTTONS:
                    var radioButton = this.options.filter(function (opt) { return opt.id === _this.value; });
                    if (radioButton.length > 0) {
                        this.setFormFieldValueOption(radioButton[0]);
                    }
                    break;
                case FormFieldTypes.UPLOAD:
                    this.form.hasUpload = true;
                    if (this.value && this.value.length > 0) {
                        this.form.values[this.id] = Array.isArray(this.value) ? this.value.map(function (elem) { return elem.id; }).join(',') : [this.value];
                    }
                    else {
                        this.form.values[this.id] = null;
                    }
                    break;
                case FormFieldTypes.TYPEAHEAD:
                    var typeAheadEntry = this.options.filter(function (opt) { return opt.id === _this.value || opt.name === _this.value; });
                    if (typeAheadEntry.length > 0) {
                        this.form.values[this.id] = typeAheadEntry[0];
                    }
                    else if (this.options.length > 0) {
                        this.form.values[this.id] = null;
                    }
                    break;
                case FormFieldTypes.DATE:
                    if (typeof this.value === 'string' && this.value === 'today') {
                        this.value = moment$1(new Date()).format(this.dateDisplayFormat);
                    }
                    var dateValue = moment$1(this.value, this.dateDisplayFormat, true);
                    if (dateValue && dateValue.isValid()) {
                        this.form.values[this.id] = dateValue.format('YYYY-MM-DD') + "T00:00:00.000Z";
                    }
                    else {
                        this.form.values[this.id] = null;
                        this._value = this.value;
                    }
                    break;
                case FormFieldTypes.DATETIME:
                    if (typeof this.value === 'string' && this.value === 'now') {
                        this.value = moment$1(new Date()).format(this.dateDisplayFormat);
                    }
                    var dateTimeValue = moment$1(this.value, this.dateDisplayFormat, true).utc();
                    if (dateTimeValue && dateTimeValue.isValid()) {
                        this.form.values[this.id] = dateTimeValue.format('YYYY-MM-DDTHH:mm:ss') + ".000Z";
                    }
                    else {
                        this.form.values[this.id] = null;
                        this._value = this.value;
                    }
                    break;
                case FormFieldTypes.NUMBER:
                    this.form.values[this.id] = this.enableFractions ? parseFloat(this.value) : parseInt(this.value, 10);
                    break;
                case FormFieldTypes.AMOUNT:
                    this.form.values[this.id] = this.enableFractions ? parseFloat(this.value) : parseInt(this.value, 10);
                    break;
                case FormFieldTypes.BOOLEAN:
                    this.form.values[this.id] = (this.value !== null && this.value !== undefined) ? this.value : false;
                    break;
                case FormFieldTypes.PEOPLE:
                    this.form.values[this.id] = this.value ? this.value : null;
                    break;
                case FormFieldTypes.FUNCTIONAL_GROUP:
                    this.form.values[this.id] = this.value ? this.value : null;
                    break;
                default:
                    if (!FormFieldTypes.isReadOnlyType(this.type) && !this.isInvalidFieldType(this.type)) {
                        this.form.values[this.id] = this.value;
                    }
            }
            this.form.onFormFieldChanged(this);
        };
        FormFieldModel.prototype.isInvalidFieldType = function (type) {
            return type === 'container';
        };
        FormFieldModel.prototype.getOptionName = function () {
            var _this = this;
            var option = this.options.find(function (opt) { return opt.id === _this.value; });
            return option ? option.name : null;
        };
        FormFieldModel.prototype.hasOptions = function () {
            return this.options && this.options.length > 0;
        };
        FormFieldModel.prototype.isDateField = function (json) {
            return (json.params &&
                json.params.field &&
                json.params.field.type === FormFieldTypes.DATE) ||
                json.type === FormFieldTypes.DATE;
        };
        FormFieldModel.prototype.isDateTimeField = function (json) {
            return (json.params &&
                json.params.field &&
                json.params.field.type === FormFieldTypes.DATETIME) ||
                json.type === FormFieldTypes.DATETIME;
        };
        FormFieldModel.prototype.isCheckboxField = function (json) {
            return (json.params &&
                json.params.field &&
                json.params.field.type === FormFieldTypes.BOOLEAN) ||
                json.type === FormFieldTypes.BOOLEAN;
        };
        FormFieldModel.prototype.setFormFieldValueOption = function (option) {
            if (this.optionType === 'rest' && !!this.restUrl) {
                var restEntry = {};
                var restIdProperty = this.restIdProperty || 'id';
                var restLabelProperty = this.restLabelProperty || 'name';
                restEntry[restIdProperty] = option.id;
                restEntry[restLabelProperty] = option.name;
                this.form.values[this.id] = restEntry;
            }
            else {
                this.form.values[this.id] = option;
            }
        };
        return FormFieldModel;
    }(FormWidgetModel));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormEvent = /** @class */ (function () {
        function FormEvent(form) {
            this.isDefaultPrevented = false;
            this.form = form;
        }
        Object.defineProperty(FormEvent.prototype, "defaultPrevented", {
            get: function () {
                return this.isDefaultPrevented;
            },
            enumerable: false,
            configurable: true
        });
        FormEvent.prototype.preventDefault = function () {
            this.isDefaultPrevented = true;
        };
        return FormEvent;
    }());

    var FormFieldEvent = /** @class */ (function (_super) {
        __extends(FormFieldEvent, _super);
        function FormFieldEvent(form, field) {
            var _this = _super.call(this, form) || this;
            _this.field = field;
            return _this;
        }
        return FormFieldEvent;
    }(FormEvent));

    var ValidateFormFieldEvent = /** @class */ (function (_super) {
        __extends(ValidateFormFieldEvent, _super);
        function ValidateFormFieldEvent(form, field) {
            var _this = _super.call(this, form, field) || this;
            _this.isValid = true;
            return _this;
        }
        return ValidateFormFieldEvent;
    }(FormFieldEvent));

    var ValidateFormEvent = /** @class */ (function (_super) {
        __extends(ValidateFormEvent, _super);
        function ValidateFormEvent(form) {
            var _this = _super.call(this, form) || this;
            _this.isValid = true;
            _this.errorsField = [];
            return _this;
        }
        return ValidateFormEvent;
    }(FormEvent));

    var ContainerModel = /** @class */ (function (_super) {
        __extends(ContainerModel, _super);
        function ContainerModel(field) {
            var _this = _super.call(this, field.form, field.json) || this;
            if (field) {
                _this.field = field;
            }
            return _this;
        }
        Object.defineProperty(ContainerModel.prototype, "isVisible", {
            get: function () {
                return this.field.isVisible;
            },
            enumerable: false,
            configurable: true
        });
        return ContainerModel;
    }(FormWidgetModel));

    var TabModel = /** @class */ (function (_super) {
        __extends(TabModel, _super);
        function TabModel(form, json) {
            var _this = _super.call(this, form, json) || this;
            _this.isVisible = true;
            _this.fields = [];
            if (json) {
                _this.title = json.title;
                _this.visibilityCondition = new WidgetVisibilityModel(json.visibilityCondition);
            }
            return _this;
        }
        TabModel.prototype.hasContent = function () {
            return this.fields && this.fields.length > 0;
        };
        return TabModel;
    }(FormWidgetModel));

    var FormOutcomeModel = /** @class */ (function (_super) {
        __extends(FormOutcomeModel, _super);
        function FormOutcomeModel(form, json) {
            var _this = _super.call(this, form, json) || this;
            _this.isSystem = false;
            _this.isSelected = false;
            _this.isVisible = true;
            if (json) {
                _this.isSystem = json.isSystem ? true : false;
                _this.isSelected = form && json.name === form.selectedOutcome ? true : false;
                _this.visibilityCondition = new WidgetVisibilityModel(json.visibilityCondition);
            }
            return _this;
        }
        return FormOutcomeModel;
    }(FormWidgetModel));
    FormOutcomeModel.SAVE_ACTION = 'SAVE';
    FormOutcomeModel.COMPLETE_ACTION = 'COMPLETE';
    FormOutcomeModel.START_PROCESS_ACTION = 'START PROCESS';

    var FormModel = /** @class */ (function () {
        function FormModel(json, formValues, readOnly, formService, enableFixedSpace) {
            var _this = this;
            if (readOnly === void 0) { readOnly = false; }
            this.formService = formService;
            this.taskName = FormModel.UNSET_TASK_NAME;
            this.values = {};
            this.tabs = [];
            this.fields = [];
            this.outcomes = [];
            this.fieldValidators = __spread(FORM_FIELD_VALIDATORS);
            this.customFieldTemplates = {};
            this.readOnly = false;
            this.isValid = true;
            this.processVariables = [];
            this.variables = [];
            this.readOnly = readOnly;
            this.json = json;
            if (json) {
                this.id = json.id;
                this.name = json.name;
                this.taskId = json.taskId;
                this.taskName = json.taskName || json.name || FormModel.UNSET_TASK_NAME;
                this.processDefinitionId = json.processDefinitionId;
                this.customFieldTemplates = json.customFieldTemplates || {};
                this.selectedOutcome = json.selectedOutcome;
                this.className = json.className || '';
                this.variables = json.variables || [];
                this.processVariables = json.processVariables || [];
                this.enableFixedSpace = enableFixedSpace ? true : false;
                var tabCache_1 = {};
                this.tabs = (json.tabs || []).map(function (tabJson) {
                    var model = new TabModel(_this, tabJson);
                    tabCache_1[model.id] = model;
                    return model;
                });
                this.fields = this.parseRootFields(json);
                if (formValues) {
                    this.loadData(formValues);
                }
                for (var i = 0; i < this.fields.length; i++) {
                    var field = this.fields[i];
                    if (field.tab) {
                        var tab = tabCache_1[field.tab];
                        if (tab) {
                            tab.fields.push(field);
                        }
                    }
                }
                this.parseOutcomes();
            }
            this.validateForm();
        }
        FormModel.prototype.onFormFieldChanged = function (field) {
            this.validateField(field);
            if (this.formService) {
                this.formService.formFieldValueChanged.next(new FormFieldEvent(this, field));
            }
        };
        FormModel.prototype.validateForm = function () {
            var validateFormEvent = new ValidateFormEvent(this);
            var errorsField = [];
            var fields = this.getFormFields();
            for (var i = 0; i < fields.length; i++) {
                if (!fields[i].validate()) {
                    errorsField.push(fields[i]);
                }
            }
            this.isValid = errorsField.length <= 0;
            if (this.formService) {
                validateFormEvent.isValid = this.isValid;
                validateFormEvent.errorsField = errorsField;
                this.formService.validateForm.next(validateFormEvent);
            }
        };
        FormModel.prototype.validateField = function (field) {
            if (!field) {
                return;
            }
            var validateFieldEvent = new ValidateFormFieldEvent(this, field);
            if (this.formService) {
                this.formService.validateFormField.next(validateFieldEvent);
            }
            if (!validateFieldEvent.isValid) {
                this.markAsInvalid();
                return;
            }
            if (validateFieldEvent.defaultPrevented) {
                return;
            }
            if (!field.validate()) {
                this.markAsInvalid();
            }
            this.validateForm();
        };
        FormModel.prototype.parseRootFields = function (json) {
            var e_1, _a;
            var fields = [];
            if (json.fields) {
                fields = json.fields;
            }
            else if (json.formDefinition && json.formDefinition.fields) {
                fields = json.formDefinition.fields;
            }
            var formWidgetModel = [];
            try {
                for (var fields_1 = __values(fields), fields_1_1 = fields_1.next(); !fields_1_1.done; fields_1_1 = fields_1.next()) {
                    var field = fields_1_1.value;
                    if (field.type === FormFieldTypes.DISPLAY_VALUE) {
                        if (field.params) {
                            var originalField = field.params['field'];
                            if (originalField.type === FormFieldTypes.DYNAMIC_TABLE) {
                                formWidgetModel.push(new ContainerModel(new FormFieldModel(this, field)));
                            }
                        }
                    }
                    else {
                        formWidgetModel.push(new ContainerModel(new FormFieldModel(this, field)));
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (fields_1_1 && !fields_1_1.done && (_a = fields_1.return)) _a.call(fields_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return formWidgetModel;
        };
        FormModel.prototype.loadData = function (formValues) {
            var e_2, _a;
            try {
                for (var _b = __values(this.getFormFields()), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var field = _c.value;
                    var variableId = "variables." + field.name;
                    if (this.isDefined(formValues[variableId]) || this.isDefined(formValues[field.id])) {
                        field.json.value = formValues[variableId] || formValues[field.id];
                        field.value = field.parseValue(field.json);
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
        };
        FormModel.prototype.isDefined = function (value) {
            return value !== undefined && value !== null;
        };
        FormModel.prototype.getFormVariable = function (identifier) {
            if (identifier) {
                return this.variables.find(function (variable) { return variable.name === identifier ||
                    variable.id === identifier; });
            }
            return undefined;
        };
        FormModel.prototype.getFormVariableValue = function (identifier) {
            var variable = this.getFormVariable(identifier);
            if (variable && variable.hasOwnProperty('value')) {
                return this.parseValue(variable.type, variable.value);
            }
            return undefined;
        };
        FormModel.prototype.getProcessVariableValue = function (name) {
            if (this.processVariables) {
                var names_1 = ["variables." + name, name];
                var variable = this.processVariables.find(function (entry) { return names_1.includes(entry.name); });
                if (variable) {
                    return this.parseValue(variable.type, variable.value);
                }
            }
            return undefined;
        };
        FormModel.prototype.parseValue = function (type, value) {
            if (type && value) {
                switch (type) {
                    case 'date':
                        return value
                            ? value + "T00:00:00.000Z"
                            : undefined;
                    case 'boolean':
                        return typeof value === 'string'
                            ? JSON.parse(value)
                            : value;
                    default:
                        return value;
                }
            }
            return value;
        };
        FormModel.prototype.hasTabs = function () {
            return this.tabs && this.tabs.length > 0;
        };
        FormModel.prototype.hasFields = function () {
            return this.fields && this.fields.length > 0;
        };
        FormModel.prototype.hasOutcomes = function () {
            return this.outcomes && this.outcomes.length > 0;
        };
        FormModel.prototype.getFieldById = function (fieldId) {
            return this.getFormFields().find(function (field) { return field.id === fieldId; });
        };
        FormModel.prototype.getFormFields = function () {
            var formFieldModel = [];
            for (var i = 0; i < this.fields.length; i++) {
                var field = this.fields[i];
                if (field instanceof ContainerModel) {
                    var container = field;
                    formFieldModel.push(container.field);
                    container.field.columns.forEach(function (column) {
                        formFieldModel.push.apply(formFieldModel, __spread(column.fields));
                    });
                }
            }
            return formFieldModel;
        };
        FormModel.prototype.markAsInvalid = function () {
            this.isValid = false;
        };
        FormModel.prototype.parseOutcomes = function () {
            var _this = this;
            if (this.json.fields) {
                var saveOutcome = new FormOutcomeModel(this, {
                    id: FormModel.SAVE_OUTCOME,
                    name: 'SAVE',
                    isSystem: true
                });
                var completeOutcome = new FormOutcomeModel(this, {
                    id: FormModel.COMPLETE_OUTCOME,
                    name: 'COMPLETE',
                    isSystem: true
                });
                var startProcessOutcome = new FormOutcomeModel(this, {
                    id: FormModel.START_PROCESS_OUTCOME,
                    name: 'START PROCESS',
                    isSystem: true
                });
                var customOutcomes = (this.json.outcomes || []).map(function (obj) { return new FormOutcomeModel(_this, obj); });
                this.outcomes = [saveOutcome].concat(customOutcomes.length > 0
                    ? customOutcomes
                    : [completeOutcome, startProcessOutcome]);
            }
        };
        FormModel.prototype.addValuesNotPresent = function (valuesToSetIfNotPresent) {
            var _this = this;
            this.getFormFields().forEach(function (field) {
                if (valuesToSetIfNotPresent[field.id] && (!_this.values[field.id] || _this.isValidDropDown(field.id))) {
                    _this.values[field.id] = valuesToSetIfNotPresent[field.id];
                    field.json.value = _this.values[field.id];
                    field.value = field.parseValue(field.json);
                }
            });
        };
        FormModel.prototype.isValidDropDown = function (key) {
            var field = this.getFieldById(key);
            if (field.type === FormFieldTypes.DROPDOWN) {
                if (field.hasMultipleValues) {
                    return Array.isArray(this.values[key]);
                }
                return typeof this.values[key] === 'string' ? this.values[key] === 'empty' : Object.keys(this.values[key]).length === 0;
            }
            return false;
        };
        FormModel.prototype.setNodeIdValueForViewersLinkedToUploadWidget = function (linkedUploadWidgetContentSelected) {
            var _this = this;
            var subscribedViewers = this.getFormFields().filter(function (field) { return linkedUploadWidgetContentSelected.uploadWidgetId === field.params['uploadWidget']; });
            subscribedViewers.forEach(function (viewer) {
                _this.values[viewer.id] = linkedUploadWidgetContentSelected.id;
                viewer.json.value = _this.values[viewer.id];
                viewer.value = viewer.parseValue(viewer.json);
            });
        };
        return FormModel;
    }());
    FormModel.UNSET_TASK_NAME = 'Nameless task';
    FormModel.SAVE_OUTCOME = '$save';
    FormModel.COMPLETE_OUTCOME = '$complete';
    FormModel.START_PROCESS_OUTCOME = '$startProcess';

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormOutcomeEvent = /** @class */ (function () {
        function FormOutcomeEvent(outcome) {
            this._defaultPrevented = false;
            this._outcome = outcome;
        }
        Object.defineProperty(FormOutcomeEvent.prototype, "outcome", {
            get: function () {
                return this._outcome;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormOutcomeEvent.prototype, "defaultPrevented", {
            get: function () {
                return this._defaultPrevented;
            },
            enumerable: false,
            configurable: true
        });
        FormOutcomeEvent.prototype.preventDefault = function () {
            this._defaultPrevented = true;
        };
        return FormOutcomeEvent;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ContentLinkModel = /** @class */ (function () {
        function ContentLinkModel(obj) {
            this.contentAvailable = obj && obj.contentAvailable;
            this.created = obj && obj.created;
            this.createdBy = obj && obj.createdBy || {};
            this.id = obj && obj.id;
            this.link = obj && obj.link;
            this.mimeType = obj && obj.mimeType;
            this.name = obj && obj.name;
            this.previewStatus = obj && obj.previewStatus;
            this.relatedContent = obj && obj.relatedContent;
            this.simpleType = obj && obj.simpleType;
            this.thumbnailStatus = obj && obj.thumbnailStatus;
            this.nodeId = obj && obj.nodeId;
        }
        ContentLinkModel.prototype.hasPreviewStatus = function () {
            return this.previewStatus === 'supported';
        };
        ContentLinkModel.prototype.isTypeImage = function () {
            return this.simpleType === 'image';
        };
        ContentLinkModel.prototype.isTypePdf = function () {
            return this.simpleType === 'pdf';
        };
        ContentLinkModel.prototype.isTypeDoc = function () {
            return this.simpleType === 'word' || this.simpleType === 'content';
        };
        ContentLinkModel.prototype.isThumbnailReady = function () {
            return this.thumbnailStatus === 'created';
        };
        ContentLinkModel.prototype.isThumbnailSupported = function () {
            return this.isTypeImage() || ((this.isTypePdf() || this.isTypeDoc()) && this.isThumbnailReady());
        };
        return ContentLinkModel;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var UploadWidgetContentLinkModel = /** @class */ (function (_super) {
        __extends(UploadWidgetContentLinkModel, _super);
        function UploadWidgetContentLinkModel(obj, uploadWidgetId) {
            var _this = _super.call(this, obj) || this;
            _this.uploadWidgetId = uploadWidgetId;
            return _this;
        }
        return UploadWidgetContentLinkModel;
    }(ContentLinkModel));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var EcmModelService = /** @class */ (function () {
        function EcmModelService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(EcmModelService.prototype, "customModelApi", {
            get: function () {
                var _a;
                this._customModelApi = (_a = this._customModelApi) !== null && _a !== void 0 ? _a : new jsApi.CustomModelApi(this.apiService.getInstance());
                return this._customModelApi;
            },
            enumerable: false,
            configurable: true
        });
        EcmModelService.prototype.createEcmTypeForActivitiForm = function (formName, form) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.searchActivitiEcmModel().subscribe(function (model) {
                    if (!model) {
                        _this.createActivitiEcmModel(formName, form).subscribe(function (typeForm) {
                            observer.next(typeForm);
                            observer.complete();
                        });
                    }
                    else {
                        _this.saveFomType(formName, form).subscribe(function (typeForm) {
                            observer.next(typeForm);
                            observer.complete();
                        });
                    }
                }, function (err) { return _this.handleError(err); });
            });
        };
        EcmModelService.prototype.searchActivitiEcmModel = function () {
            return this.getEcmModels().pipe(operators.map(function (ecmModels) {
                return ecmModels.list.entries.find(function (model) { return model.entry.name === EcmModelService.MODEL_NAME; });
            }));
        };
        EcmModelService.prototype.createActivitiEcmModel = function (formName, form) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.createEcmModel(EcmModelService.MODEL_NAME, EcmModelService.MODEL_NAMESPACE).subscribe(function (model) {
                    _this.logService.info('model created', model);
                    _this.activeEcmModel(EcmModelService.MODEL_NAME).subscribe(function (modelActive) {
                        _this.logService.info('model active', modelActive);
                        _this.createEcmTypeWithProperties(formName, form).subscribe(function (typeCreated) {
                            observer.next(typeCreated);
                            observer.complete();
                        });
                    }, function (err) { return _this.handleError(err); });
                }, function (err) { return _this.handleError(err); });
            });
        };
        EcmModelService.prototype.saveFomType = function (formName, form) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.searchEcmType(formName, EcmModelService.MODEL_NAME).subscribe(function (ecmType) {
                    _this.logService.info('custom types', ecmType);
                    if (!ecmType) {
                        _this.createEcmTypeWithProperties(formName, form).subscribe(function (typeCreated) {
                            observer.next(typeCreated);
                            observer.complete();
                        });
                    }
                    else {
                        observer.next(ecmType);
                        observer.complete();
                    }
                }, function (err) { return _this.handleError(err); });
            });
        };
        EcmModelService.prototype.createEcmTypeWithProperties = function (formName, form) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.createEcmType(formName, EcmModelService.MODEL_NAME, EcmModelService.TYPE_MODEL).subscribe(function (typeCreated) {
                    _this.logService.info('type Created', typeCreated);
                    _this.addPropertyToAType(EcmModelService.MODEL_NAME, formName, form).subscribe(function (propertyAdded) {
                        _this.logService.info('property Added', propertyAdded);
                        observer.next(typeCreated);
                        observer.complete();
                    }, function (err) { return _this.handleError(err); });
                }, function (err) { return _this.handleError(err); });
            });
        };
        EcmModelService.prototype.searchEcmType = function (typeName, modelName) {
            return this.getEcmType(modelName).pipe(operators.map(function (customTypes) {
                return customTypes.list.entries.find(function (type) { return type.entry.prefixedName === typeName || type.entry.title === typeName; });
            }));
        };
        EcmModelService.prototype.activeEcmModel = function (modelName) {
            var _this = this;
            return rxjs.from(this.customModelApi.activateCustomModel(modelName))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        EcmModelService.prototype.createEcmModel = function (modelName, nameSpace) {
            var _this = this;
            return rxjs.from(this.customModelApi.createCustomModel('DRAFT', '', modelName, modelName, nameSpace))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        EcmModelService.prototype.getEcmModels = function () {
            var _this = this;
            return rxjs.from(this.customModelApi.getAllCustomModel())
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        EcmModelService.prototype.getEcmType = function (modelName) {
            var _this = this;
            return rxjs.from(this.customModelApi.getAllCustomType(modelName))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        EcmModelService.prototype.createEcmType = function (typeName, modelName, parentType) {
            var _this = this;
            var name = this.cleanNameType(typeName);
            return rxjs.from(this.customModelApi.createCustomType(modelName, name, parentType, typeName, ''))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        EcmModelService.prototype.addPropertyToAType = function (modelName, typeName, formFields) {
            var _this = this;
            var name = this.cleanNameType(typeName);
            var properties = [];
            if (formFields && formFields.values) {
                for (var key in formFields.values) {
                    if (key) {
                        properties.push({
                            name: key,
                            title: key,
                            description: key,
                            dataType: 'd:text',
                            multiValued: false,
                            mandatory: false,
                            mandatoryEnforced: false
                        });
                    }
                }
            }
            return rxjs.from(this.customModelApi.addPropertyToType(modelName, name, properties))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        EcmModelService.prototype.cleanNameType = function (name) {
            var cleanName = name;
            if (name.indexOf(':') !== -1) {
                cleanName = name.split(':')[1];
            }
            return cleanName.replace(/[^a-zA-Z ]/g, '');
        };
        EcmModelService.prototype.toJson = function (res) {
            if (res) {
                return res || {};
            }
            return {};
        };
        EcmModelService.prototype.handleError = function (err) {
            this.logService.error(err);
        };
        return EcmModelService;
    }());
    EcmModelService.MODEL_NAMESPACE = 'activitiForms';
    EcmModelService.MODEL_NAME = 'activitiFormsModel';
    EcmModelService.TYPE_MODEL = 'cm:folder';
    EcmModelService.ɵprov = i0.ɵɵdefineInjectable({ factory: function EcmModelService_Factory() { return new EcmModelService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: EcmModelService, providedIn: "root" });
    EcmModelService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    EcmModelService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var FormService = /** @class */ (function () {
        function FormService(ecmModelService, apiService, logService) {
            this.ecmModelService = ecmModelService;
            this.apiService = apiService;
            this.logService = logService;
            this.formLoaded = new rxjs.Subject();
            this.formDataRefreshed = new rxjs.Subject();
            this.formFieldValueChanged = new rxjs.Subject();
            this.formEvents = new rxjs.Subject();
            this.taskCompleted = new rxjs.Subject();
            this.taskCompletedError = new rxjs.Subject();
            this.taskSaved = new rxjs.Subject();
            this.taskSavedError = new rxjs.Subject();
            this.formContentClicked = new rxjs.Subject();
            this.validateForm = new rxjs.Subject();
            this.validateFormField = new rxjs.Subject();
            this.validateDynamicTableRow = new rxjs.Subject();
            this.executeOutcome = new rxjs.Subject();
            this.updateFormValuesRequested = new rxjs.Subject();
        }
        Object.defineProperty(FormService.prototype, "taskFormsApi", {
            get: function () {
                var _a;
                this._taskFormsApi = (_a = this._taskFormsApi) !== null && _a !== void 0 ? _a : new jsApi.TaskFormsApi(this.apiService.getInstance());
                return this._taskFormsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "taskApi", {
            get: function () {
                var _a;
                this._taskApi = (_a = this._taskApi) !== null && _a !== void 0 ? _a : new jsApi.TasksApi(this.apiService.getInstance());
                return this._taskApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "modelsApi", {
            get: function () {
                var _a;
                this._modelsApi = (_a = this._modelsApi) !== null && _a !== void 0 ? _a : new jsApi.ModelsApi(this.apiService.getInstance());
                return this._modelsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "editorApi", {
            get: function () {
                var _a;
                this._editorApi = (_a = this._editorApi) !== null && _a !== void 0 ? _a : new jsApi.FormModelsApi(this.apiService.getInstance());
                return this._editorApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "processDefinitionsApi", {
            get: function () {
                var _a;
                this._processDefinitionsApi = (_a = this._processDefinitionsApi) !== null && _a !== void 0 ? _a : new jsApi.ProcessDefinitionsApi(this.apiService.getInstance());
                return this._processDefinitionsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "processInstanceVariablesApi", {
            get: function () {
                var _a;
                this._processInstanceVariablesApi = (_a = this._processInstanceVariablesApi) !== null && _a !== void 0 ? _a : new jsApi.ProcessInstanceVariablesApi(this.apiService.getInstance());
                return this._processInstanceVariablesApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "processInstancesApi", {
            get: function () {
                var _a;
                this._processInstancesApi = (_a = this._processInstancesApi) !== null && _a !== void 0 ? _a : new jsApi.ProcessInstancesApi(this.apiService.getInstance());
                return this._processInstancesApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "groupsApi", {
            get: function () {
                var _a;
                this._groupsApi = (_a = this._groupsApi) !== null && _a !== void 0 ? _a : new jsApi.ActivitiGroupsApi(this.apiService.getInstance());
                return this._groupsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(FormService.prototype, "usersApi", {
            get: function () {
                var _a;
                this._usersApi = (_a = this._usersApi) !== null && _a !== void 0 ? _a : new jsApi.UsersApi(this.apiService.getInstance());
                return this._usersApi;
            },
            enumerable: false,
            configurable: true
        });
        FormService.prototype.parseForm = function (json, data, readOnly, fixedSpace) {
            if (readOnly === void 0) { readOnly = false; }
            if (json) {
                var form = new FormModel(json, data, readOnly, this, fixedSpace);
                if (!json.fields) {
                    form.outcomes = [
                        new FormOutcomeModel(form, {
                            id: '$save',
                            name: FormOutcomeModel.SAVE_ACTION,
                            isSystem: true
                        })
                    ];
                }
                return form;
            }
            return null;
        };
        FormService.prototype.createFormFromANode = function (formName) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.createForm(formName).subscribe(function (form) {
                    _this.ecmModelService.searchEcmType(formName, EcmModelService.MODEL_NAME).subscribe(function (customType) {
                        var formDefinitionModel = new FormDefinitionModel(form.id, form.name, form.lastUpdatedByFullName, form.lastUpdated, customType.entry.properties);
                        rxjs.from(_this.editorApi.saveForm(form.id, formDefinitionModel)).subscribe(function (formData) {
                            observer.next(formData);
                            observer.complete();
                        }, function (err) { return _this.handleError(err); });
                    }, function (err) { return _this.handleError(err); });
                }, function (err) { return _this.handleError(err); });
            });
        };
        FormService.prototype.createForm = function (formName) {
            var dataModel = {
                name: formName,
                description: '',
                modelType: 2,
                stencilSet: 0
            };
            return rxjs.from(this.modelsApi.createModel(dataModel));
        };
        FormService.prototype.saveForm = function (formId, formModel) {
            return rxjs.from(this.editorApi.saveForm(formId, formModel));
        };
        FormService.prototype.searchFrom = function (name) {
            var _this = this;
            var opts = {
                'modelType': 2
            };
            return rxjs.from(this.modelsApi.getModels(opts))
                .pipe(operators.map(function (forms) {
                return forms.data.find(function (formData) { return formData.name === name; });
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getForms = function () {
            var _this = this;
            var opts = {
                'modelType': 2
            };
            return rxjs.from(this.modelsApi.getModels(opts))
                .pipe(operators.map(this.toJsonArray), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getProcessDefinitions = function () {
            var _this = this;
            return rxjs.from(this.processDefinitionsApi.getProcessDefinitions({}))
                .pipe(operators.map(this.toJsonArray), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getProcessVariablesById = function (processInstanceId) {
            var _this = this;
            return rxjs.from(this.processInstanceVariablesApi.getProcessInstanceVariables(processInstanceId))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getTasks = function () {
            var _this = this;
            return rxjs.from(this.taskApi.listTasks({}))
                .pipe(operators.map(this.toJsonArray), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getTask = function (taskId) {
            var _this = this;
            return rxjs.from(this.taskApi.getTask(taskId))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.saveTaskForm = function (taskId, formValues) {
            var _this = this;
            var saveFormRepresentation = { values: formValues };
            return rxjs.from(this.taskFormsApi.saveTaskForm(taskId, saveFormRepresentation))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.completeTaskForm = function (taskId, formValues, outcome) {
            var _this = this;
            var completeFormRepresentation = { values: formValues };
            if (outcome) {
                completeFormRepresentation.outcome = outcome;
            }
            return rxjs.from(this.taskFormsApi.completeTaskForm(taskId, completeFormRepresentation))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getTaskForm = function (taskId) {
            var _this = this;
            return rxjs.from(this.taskFormsApi.getTaskForm(taskId))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getFormDefinitionById = function (formId) {
            var _this = this;
            return rxjs.from(this.editorApi.getForm(formId))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getFormDefinitionByName = function (name) {
            var _this = this;
            var opts = {
                'filter': 'myReusableForms',
                'filterText': name,
                'modelType': 2
            };
            return rxjs.from(this.modelsApi.getModels(opts))
                .pipe(operators.map(this.getFormId), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getStartFormInstance = function (processId) {
            var _this = this;
            return rxjs.from(this.processInstancesApi.getProcessInstanceStartForm(processId))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getProcessInstance = function (processId) {
            var _this = this;
            return rxjs.from(this.processInstancesApi.getProcessInstance(processId))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getStartFormDefinition = function (processId) {
            var _this = this;
            return rxjs.from(this.processDefinitionsApi.getProcessDefinitionStartForm(processId))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getRestFieldValues = function (taskId, field) {
            var _this = this;
            return rxjs.from(this.taskFormsApi.getRestFieldValues(taskId, field))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getRestFieldValuesByProcessId = function (processDefinitionId, field) {
            var _this = this;
            return rxjs.from(this.processDefinitionsApi.getRestFieldValues(processDefinitionId, field))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getRestFieldValuesColumnByProcessId = function (processDefinitionId, field, column) {
            var _this = this;
            return rxjs.from(this.processDefinitionsApi.getRestTableFieldValues(processDefinitionId, field, column))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getRestFieldValuesColumn = function (taskId, field, column) {
            var _this = this;
            return rxjs.from(this.taskFormsApi.getRestFieldColumnValues(taskId, field, column))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getUserProfileImageApi = function (userId) {
            return this.usersApi.getUserProfilePictureUrl(userId);
        };
        FormService.prototype.getWorkflowUsers = function (filter, groupId) {
            var _this = this;
            var option = { filter: filter };
            if (groupId) {
                option.groupId = groupId;
            }
            return rxjs.from(this.usersApi.getUsers(option))
                .pipe(operators.switchMap(function (response) { return response.data || []; }), operators.map(function (user) {
                user.userImage = _this.getUserProfileImageApi(user.id.toString());
                return rxjs.of(user);
            }), operators.combineAll(), operators.defaultIfEmpty([]), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getWorkflowGroups = function (filter, groupId) {
            var _this = this;
            var option = { filter: filter };
            if (groupId) {
                option.groupId = groupId;
            }
            return rxjs.from(this.groupsApi.getGroups(option))
                .pipe(operators.map(function (response) { return response.data || []; }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        FormService.prototype.getFormId = function (form) {
            var result = null;
            if (form && form.data && form.data.length > 0) {
                result = form.data[0].id;
            }
            return result;
        };
        FormService.prototype.toJson = function (res) {
            if (res) {
                return res || {};
            }
            return {};
        };
        FormService.prototype.toJsonArray = function (res) {
            if (res) {
                return res.data || [];
            }
            return [];
        };
        FormService.prototype.handleError = function (error) {
            var errMsg = FormService.UNKNOWN_ERROR_MESSAGE;
            if (error) {
                errMsg = (error.message) ? error.message :
                    error.status ? error.status + " - " + error.statusText : FormService.GENERIC_ERROR_MESSAGE;
            }
            this.logService.error(errMsg);
            return rxjs.throwError(errMsg);
        };
        return FormService;
    }());
    FormService.UNKNOWN_ERROR_MESSAGE = 'Unknown error';
    FormService.GENERIC_ERROR_MESSAGE = 'Server error';
    FormService.ɵprov = i0.ɵɵdefineInjectable({ factory: function FormService_Factory() { return new FormService(i0.ɵɵinject(EcmModelService), i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: FormService, providedIn: "root" });
    FormService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    FormService.ctorParameters = function () { return [
        { type: EcmModelService },
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var WidgetComponent = /** @class */ (function () {
        function WidgetComponent(formService) {
            this.formService = formService;
            this.readOnly = false;
            this.fieldChanged = new i0.EventEmitter();
        }
        WidgetComponent.prototype.hasField = function () {
            return !!this.field;
        };
        WidgetComponent.prototype.isRequired = function () {
            if (this.field && this.field.required) {
                return true;
            }
            return null;
        };
        WidgetComponent.prototype.isValid = function () {
            return !!this.field.validationSummary;
        };
        WidgetComponent.prototype.hasValue = function () {
            return this.field &&
                this.field.value !== null &&
                this.field.value !== undefined;
        };
        WidgetComponent.prototype.isInvalidFieldRequired = function () {
            return !this.field.isValid && !this.field.validationSummary && this.isRequired();
        };
        WidgetComponent.prototype.ngAfterViewInit = function () {
            this.fieldChanged.emit(this.field);
        };
        WidgetComponent.prototype.checkVisibility = function (field) {
            this.fieldChanged.emit(field);
        };
        WidgetComponent.prototype.onFieldChanged = function (field) {
            this.fieldChanged.emit(field);
        };
        WidgetComponent.prototype.event = function (event) {
            this.formService.formEvents.next(event);
        };
        return WidgetComponent;
    }());
    WidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'base-widget',
                    template: '',
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    WidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };
    WidgetComponent.propDecorators = {
        readOnly: [{ type: i0.Input }],
        field: [{ type: i0.Input }],
        fieldChanged: [{ type: i0.Output }]
    };

    var ContainerWidgetComponentModel = /** @class */ (function (_super) {
        __extends(ContainerWidgetComponentModel, _super);
        function ContainerWidgetComponentModel(field) {
            var _this = _super.call(this, field) || this;
            _this.columns = [];
            _this.isExpanded = true;
            _this.rowspan = 1;
            _this.colspan = 1;
            if (_this.field) {
                _this.columns = _this.field.columns || [];
                _this.isExpanded = !_this.isCollapsedByDefault();
                _this.colspan = field.colspan;
                _this.rowspan = field.rowspan;
            }
            return _this;
        }
        ContainerWidgetComponentModel.prototype.isGroup = function () {
            return this.type === FormFieldTypes.GROUP;
        };
        ContainerWidgetComponentModel.prototype.isCollapsible = function () {
            var allowCollapse = false;
            if (this.isGroup() && this.field.params['allowCollapse']) {
                allowCollapse = this.field.params['allowCollapse'];
            }
            return allowCollapse;
        };
        ContainerWidgetComponentModel.prototype.isCollapsedByDefault = function () {
            var collapseByDefault = false;
            if (this.isCollapsible() && this.field.params['collapseByDefault']) {
                collapseByDefault = this.field.params['collapseByDefault'];
            }
            return collapseByDefault;
        };
        return ContainerWidgetComponentModel;
    }(ContainerModel));

    var ContainerWidgetComponent = /** @class */ (function (_super) {
        __extends(ContainerWidgetComponent, _super);
        function ContainerWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            return _this;
        }
        ContainerWidgetComponent.prototype.onExpanderClicked = function () {
            if (this.content && this.content.isCollapsible()) {
                this.content.isExpanded = !this.content.isExpanded;
            }
        };
        ContainerWidgetComponent.prototype.ngOnInit = function () {
            if (this.field) {
                this.content = new ContainerWidgetComponentModel(this.field);
                this.getNumberOfColumnsFromTheBiggestBetweenJsonAndColumnsLengthOrOne();
                this.fields = this.getFields();
            }
        };
        ContainerWidgetComponent.prototype.getNumberOfColumnsFromTheBiggestBetweenJsonAndColumnsLengthOrOne = function () {
            var _a, _b, _c, _d;
            this.numberOfColumns = (((_a = this.content.json) === null || _a === void 0 ? void 0 : _a.numberOfColumns) || 1) > (((_b = this.content.columns) === null || _b === void 0 ? void 0 : _b.length) || 1) ?
                (((_c = this.content.json) === null || _c === void 0 ? void 0 : _c.numberOfColumns) || 1) :
                (((_d = this.content.columns) === null || _d === void 0 ? void 0 : _d.length) || 1);
        };
        ContainerWidgetComponent.prototype.getFields = function () {
            var _a;
            var serialisedFormFields = [];
            var maxColumnFieldsSize = this.getMaxColumnFieldSize();
            var _loop_1 = function (rowIndex) {
                (_a = this_1.content) === null || _a === void 0 ? void 0 : _a.columns.flatMap(function (currentColumn) {
                    var _a;
                    if (!!(currentColumn === null || currentColumn === void 0 ? void 0 : currentColumn.fields[rowIndex])) {
                        serialisedFormFields.push(currentColumn === null || currentColumn === void 0 ? void 0 : currentColumn.fields[rowIndex]);
                    }
                    else {
                        var firstRowElementColSpan = (_a = currentColumn === null || currentColumn === void 0 ? void 0 : currentColumn.fields[0]) === null || _a === void 0 ? void 0 : _a.colspan;
                        if (!!firstRowElementColSpan && rowIndex > 0) {
                            for (var i = 0; i < firstRowElementColSpan; i++) {
                                serialisedFormFields.push(null);
                            }
                        }
                    }
                });
            };
            var this_1 = this;
            for (var rowIndex = 0; rowIndex < maxColumnFieldsSize; rowIndex++) {
                _loop_1(rowIndex);
            }
            return serialisedFormFields;
        };
        ContainerWidgetComponent.prototype.getMaxColumnFieldSize = function () {
            var _a, _b, _c, _d, _e, _f;
            var maxFieldSize = 0;
            if (((_b = (_a = this.content) === null || _a === void 0 ? void 0 : _a.columns) === null || _b === void 0 ? void 0 : _b.length) > 0) {
                maxFieldSize = (_f = (_e = (_d = (_c = this.content) === null || _c === void 0 ? void 0 : _c.columns) === null || _d === void 0 ? void 0 : _d.reduce(function (prevColumn, currentColumn) {
                    var _a;
                    return currentColumn.fields.length > ((_a = prevColumn === null || prevColumn === void 0 ? void 0 : prevColumn.fields) === null || _a === void 0 ? void 0 : _a.length) ? currentColumn : prevColumn;
                })) === null || _e === void 0 ? void 0 : _e.fields) === null || _f === void 0 ? void 0 : _f.length;
            }
            return maxFieldSize;
        };
        ContainerWidgetComponent.prototype.getColumnWith = function (field) {
            var colspan = field ? field.colspan : 1;
            return (100 / this.content.json.numberOfColumns) * colspan + '';
        };
        return ContainerWidgetComponent;
    }(WidgetComponent));
    ContainerWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'container-widget',
                    template: "<div [hidden]=\"!content?.isGroup()\" class=\"adf-container-widget__header\">\n    <h4 class=\"adf-container-widget__header-text\" id=\"container-header\"\n        [class.adf-collapsible]=\"content?.isCollapsible()\">\n        <button *ngIf=\"content?.isCollapsible()\"\n                mat-icon-button\n                class=\"mdl-button--icon\"\n                (click)=\"onExpanderClicked()\">\n            <mat-icon>{{ content?.isExpanded ? 'expand_more' : 'expand_less' }}</mat-icon>\n        </button>\n        <span (click)=\"onExpanderClicked()\" id=\"container-header-label\">{{content.name | translate }}</span>\n    </h4>\n</div>\n\n<div *ngIf=\"field?.form?.enableFixedSpace else fixingTemplate\">\n    <div class=\"adf-grid-list\" [ngStyle]=\"{ 'grid-template-columns': 'repeat('+numberOfColumns+', 1fr)'}\"\n        *ngIf=\"content?.isExpanded\">\n        <div class=\"adf-grid-list-item\" *ngFor=\"let field of fields\"\n            [ngStyle]=\"{'grid-area': 'auto / auto / span '+(field?.rowspan || 1)+' / span '+(field?.colspan || 1)}\">\n            <adf-form-field *ngIf=\"field\" [field]=\"field\"></adf-form-field>\n        </div>\n    </div>\n</div>\n\n<ng-template #fixingTemplate>\n    <section class=\"adf-grid-list-column-view\" *ngIf=\"content?.isExpanded\">\n        <div class=\"adf-grid-list-single-column\" *ngFor=\"let column of content?.columns\" [style.width.%]=\"getColumnWith(field)\">\n            <div class=\"adf-grid-list-column-view-item\" *ngFor=\"let field of column?.fields\">\n                <adf-form-field *ngIf=\"field\" [field]=\"field\"></adf-form-field>\n            </div>\n        </div>\n    </section>\n</ng-template>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-hidden{display:none}.adf-container-widget__header-text{-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;border-bottom:1px solid rgba(0,0,0,.87);cursor:default;padding-bottom:10px;user-select:none}.adf-container-widget__header-text.adf-collapsible{cursor:pointer}.adf-field-list{height:100%;list-style-type:none;padding:0;width:100%}container-widget .adf-grid-list-column-view{align-items:flex-start;display:flex;margin-right:-1%}container-widget .adf-grid-list-single-column{align-items:flex-start;display:flex;flex:1 1 auto;flex-direction:column}container-widget .adf-grid-list-column-view-item{box-sizing:border-box;flex-grow:1;padding-left:1%;padding-right:1%;width:100%}container-widget .adf-grid-list{display:grid}container-widget .adf-grid-list-item{box-sizing:border-box;padding-left:3px;padding-right:3px}@media screen and (max-width:959px){container-widget .adf-grid-list-item{flex:1 0 100%}container-widget .adf-grid-list--column-view{flex-direction:column}container-widget .adf-grid-list-single-column{width:90%!important}container-widget .adf-grid-list-column-view-item{flex:1 0 auto}}container-widget .mat-form-field,container-widget mat-form-field{width:100%}container-widget .mat-input-placeholder{top:1.8em!important}container-widget .mat-focused label{background-color:.3s cubic-bezier(.55,0,.55,.2);color:var(--theme-primary-color);transform:scaleX(1);transition:transform .15s linear}container-widget .mat-focused .mat-form-field-prefix{color:var(--theme-primary-color)}container-widget .mat-grid-tile{overflow:visible;width:80%}container-widget adf-form-field{width:100%}"]
                },] }
    ];
    ContainerWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var TabsWidgetComponent = /** @class */ (function () {
        function TabsWidgetComponent() {
            this.tabs = [];
            this.formTabChanged = new i0.EventEmitter();
            this.visibleTabs = [];
        }
        TabsWidgetComponent.prototype.hasTabs = function () {
            return this.tabs && this.tabs.length > 0;
        };
        TabsWidgetComponent.prototype.ngAfterContentChecked = function () {
            this.filterVisibleTabs();
        };
        TabsWidgetComponent.prototype.filterVisibleTabs = function () {
            this.visibleTabs = this.tabs.filter(function (tab) {
                return tab.isVisible;
            });
        };
        TabsWidgetComponent.prototype.tabChanged = function (field) {
            this.formTabChanged.emit(field);
        };
        return TabsWidgetComponent;
    }());
    TabsWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'tabs-widget',
                    template: "<div *ngIf=\"hasTabs()\" class=\"alfresco-tabs-widget\">\n    <mat-tab-group>\n        <mat-tab *ngFor=\"let tab of visibleTabs\" [label]=\"tab.title | translate\">\n            <div *ngFor=\"let field of tab.fields\">\n                <adf-form-field [field]=\"field.field\"></adf-form-field>\n             </div>\n        </mat-tab>\n    </mat-tab-group>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    TabsWidgetComponent.propDecorators = {
        tabs: [{ type: i0.Input }],
        formTabChanged: [{ type: i0.Output }]
    };

    var UnknownWidgetComponent = /** @class */ (function (_super) {
        __extends(UnknownWidgetComponent, _super);
        function UnknownWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            return _this;
        }
        return UnknownWidgetComponent;
    }(WidgetComponent));
    UnknownWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'unknown-widget',
                    template: "\n            <mat-list class=\"adf-unknown-widget\">\n                <mat-list-item>\n                     <mat-icon class=\"mat-24\">error_outline</mat-icon>\n                     <span class=\"adf-unknown-text\">Unknown type: {{field.type}}</span>\n                </mat-list-item>\n            </mat-list>\n\n    ",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-unknown-text{color:red;margin-left:10px}.adf-unknown-widget{margin:42px}"]
                },] }
    ];
    UnknownWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    var ADF_AMOUNT_SETTINGS = new i0.InjectionToken('adf-amount-settings');
    var AmountWidgetComponent = /** @class */ (function (_super) {
        __extends(AmountWidgetComponent, _super);
        function AmountWidgetComponent(formService, settings) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.settings = settings;
            _this.showPlaceholder = true;
            _this.currency = AmountWidgetComponent.DEFAULT_CURRENCY;
            return _this;
        }
        Object.defineProperty(AmountWidgetComponent.prototype, "placeholder", {
            get: function () {
                return this.showPlaceholder ? this.field.placeholder : '';
            },
            enumerable: false,
            configurable: true
        });
        AmountWidgetComponent.prototype.ngOnInit = function () {
            if (this.field) {
                if (this.field.currency) {
                    this.currency = this.field.currency;
                }
                if (this.field.readOnly) {
                    this.showPlaceholder = this.settings && this.settings.showReadonlyPlaceholder;
                }
            }
        };
        return AmountWidgetComponent;
    }(WidgetComponent));
    AmountWidgetComponent.DEFAULT_CURRENCY = '$';
    AmountWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'amount-widget',
                    template: "<div class=\"adf-amount-widget__container adf-amount-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\"\n     [class.adf-readonly]=\"field.readOnly\">\n    <label class=\"adf-label\"\n           [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n    <mat-form-field class=\"adf-amount-widget__input\">\n        <span matPrefix class=\"adf-amount-widget__prefix-spacing\">{{ currency }} &nbsp;</span>\n        <input matInput\n               [matTooltip]=\"field.tooltip\"\n               matTooltipPosition=\"above\"\n               matTooltipShowDelay=\"1000\"\n               class=\"adf-input\"\n               type=\"text\"\n               [id]=\"field.id\"\n               [required]=\"isRequired()\"\n               [placeholder]=\"placeholder\"\n               [value]=\"field.value\"\n               [(ngModel)]=\"field.value\"\n               (ngModelChange)=\"onFieldChanged(field)\"\n               [disabled]=\"field.readOnly\">\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\"\n                  required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-amount-widget{margin-top:15px;width:100%}.adf-amount-widget__input{margin-top:-15px}.adf-amount-widget__input .mat-focused{transition:none}.adf-amount-widget__input:not(.mat-focused):not(.mat-form-field-invalid) .adf-amount-widget__prefix-spacing{color:var(--theme-secondary-text-color)}"]
                },] }
    ];
    AmountWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: undefined, decorators: [{ type: i0.Inject, args: [ADF_AMOUNT_SETTINGS,] }, { type: i0.Optional }] }
    ]; };

    var CheckboxWidgetComponent = /** @class */ (function (_super) {
        __extends(CheckboxWidgetComponent, _super);
        function CheckboxWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            return _this;
        }
        return CheckboxWidgetComponent;
    }(WidgetComponent));
    CheckboxWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'checkbox-widget',
                    template: "<div [ngClass]=\"field.className\"\n     [class.adf-invalid]=\"!field.isValid\">\n    <mat-checkbox\n        [id]=\"field.id\"\n        color=\"primary\"\n        [required]=\"field.required\"\n        [disabled]=\"field.readOnly || readOnly\"\n        [(ngModel)]=\"field.value\"\n        (ngModelChange)=\"onFieldChanged(field)\"\n        [matTooltip]=\"field.tooltip\"\n        matTooltipPosition=\"right\"\n        matTooltipShowDelay=\"1000\">\n        {{field.name | translate }}\n        <span *ngIf=\"field.required\" >*</span>\n    </mat-checkbox>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    CheckboxWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    var ɵ0$2 = MOMENT_DATE_FORMATS;
    var DateWidgetComponent = /** @class */ (function (_super) {
        __extends(DateWidgetComponent, _super);
        function DateWidgetComponent(formService, dateAdapter, userPreferencesService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.dateAdapter = dateAdapter;
            _this.userPreferencesService = userPreferencesService;
            _this.DATE_FORMAT = 'DD-MM-YYYY';
            _this.onDestroy$ = new rxjs.Subject();
            return _this;
        }
        DateWidgetComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select(exports.UserPreferenceValues.Locale)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (locale) { return _this.dateAdapter.setLocale(locale); });
            var momentDateAdapter = this.dateAdapter;
            momentDateAdapter.overrideDisplayFormat = this.field.dateDisplayFormat;
            if (this.field) {
                if (this.field.minValue) {
                    this.minDate = moment$1(this.field.minValue, this.DATE_FORMAT);
                }
                if (this.field.maxValue) {
                    this.maxDate = moment$1(this.field.maxValue, this.DATE_FORMAT);
                }
            }
        };
        DateWidgetComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        DateWidgetComponent.prototype.onDateChanged = function (newDateValue) {
            var date = moment$1(newDateValue, this.field.dateDisplayFormat, true);
            if (date.isValid()) {
                this.field.value = date.format(this.field.dateDisplayFormat);
            }
            else {
                this.field.value = newDateValue;
            }
            this.onFieldChanged(this.field);
        };
        return DateWidgetComponent;
    }(WidgetComponent));
    DateWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'date-widget',
                    providers: [
                        { provide: core.DateAdapter, useClass: MomentDateAdapter },
                        { provide: core.MAT_DATE_FORMATS, useValue: ɵ0$2 }
                    ],
                    template: "<div class=\"{{field.className}}\" id=\"data-widget\" [class.adf-invalid]=\"!field.isValid\">\n    <mat-form-field class=\"adf-date-widget\">\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }} ({{field.dateDisplayFormat}})<span *ngIf=\"isRequired()\">*</span></label>\n        <input matInput\n               [id]=\"field.id\"\n               [value]=\"field.value\"\n               [required]=\"isRequired()\"\n               [disabled]=\"field.readOnly\"\n               (change)=\"onDateChanged($any($event).srcElement.value)\"\n               [placeholder]=\"field.placeholder\">\n        <mat-datepicker-toggle  matSuffix [for]=\"datePicker\" [disabled]=\"field.readOnly\" ></mat-datepicker-toggle>\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n    <mat-datepicker #datePicker [touchUi]=\"true\" [startAt]=\"field.value | adfMomentDate: field.dateDisplayFormat\" [disabled]=\"field.readOnly\"></mat-datepicker>\n    <input\n        type=\"hidden\"\n        [matDatepicker]=\"datePicker\"\n        [value]=\"field.value | adfMomentDate: field.dateDisplayFormat\"\n        [min]=\"minDate\"\n        [max]=\"maxDate\"\n        [disabled]=\"field.readOnly\"\n        (dateInput)=\"onDateChanged($any($event).targetElement.value)\">\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-date-widget .mat-form-field-suffix{top:26px}.adf-date-widget .mat-form-field-label-wrapper{top:20px}"]
                },] }
    ];
    DateWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: core.DateAdapter },
        { type: UserPreferencesService }
    ]; };

    var DisplayTextWidgetComponent = /** @class */ (function (_super) {
        __extends(DisplayTextWidgetComponent, _super);
        function DisplayTextWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            return _this;
        }
        return DisplayTextWidgetComponent;
    }(WidgetComponent));
    DisplayTextWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'display-text-widget',
                    template: "<div [matTooltip]=\"field.tooltip\" matTooltipPosition=\"above\" matTooltipShowDelay=\"1000\"\n    class=\"adf-display-text-widget {{field.className}}\">{{field.value | translate}}</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-display-text-widget{white-space:pre-wrap}"]
                },] }
    ];
    DisplayTextWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    var DocumentWidgetComponent = /** @class */ (function (_super) {
        __extends(DocumentWidgetComponent, _super);
        function DocumentWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.fileId = null;
            _this.hasFile = false;
            return _this;
        }
        DocumentWidgetComponent.prototype.ngOnInit = function () {
            if (this.field) {
                var file = this.field.value;
                if (file) {
                    this.fileId = file.id;
                    this.hasFile = true;
                }
                else {
                    this.fileId = null;
                    this.hasFile = false;
                }
            }
        };
        return DocumentWidgetComponent;
    }(WidgetComponent));
    DocumentWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-form-document-widget',
                    template: "<div class=\"adf-form-document-widget {{field.className}}\">\n    <ng-container *ngIf=\"hasFile\">\n        <adf-content [id]=\"fileId\" [showDocumentContent]=\"true\"></adf-content>\n    </ng-container>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    DocumentWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    var DropdownWidgetComponent = /** @class */ (function (_super) {
        __extends(DropdownWidgetComponent, _super);
        function DropdownWidgetComponent(formService, logService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.logService = logService;
            return _this;
        }
        DropdownWidgetComponent.prototype.ngOnInit = function () {
            if (this.field && this.field.restUrl) {
                if (this.field.form.taskId) {
                    this.getValuesByTaskId();
                }
                else {
                    this.getValuesByProcessDefinitionId();
                }
            }
        };
        DropdownWidgetComponent.prototype.getValuesByTaskId = function () {
            var _this = this;
            this.formService
                .getRestFieldValues(this.field.form.taskId, this.field.id)
                .subscribe(function (formFieldOption) {
                var options = [];
                if (_this.field.emptyOption) {
                    options.push(_this.field.emptyOption);
                }
                _this.field.options = options.concat((formFieldOption || []));
                _this.field.updateForm();
            }, function (err) { return _this.handleError(err); });
        };
        DropdownWidgetComponent.prototype.getValuesByProcessDefinitionId = function () {
            var _this = this;
            this.formService
                .getRestFieldValuesByProcessId(this.field.form.processDefinitionId, this.field.id)
                .subscribe(function (formFieldOption) {
                var options = [];
                if (_this.field.emptyOption) {
                    options.push(_this.field.emptyOption);
                }
                _this.field.options = options.concat((formFieldOption || []));
                _this.field.updateForm();
            }, function (err) { return _this.handleError(err); });
        };
        DropdownWidgetComponent.prototype.getOptionValue = function (option, fieldValue) {
            var optionValue = '';
            if (option.id === 'empty' || option.name !== fieldValue) {
                optionValue = option.id;
            }
            else {
                optionValue = option.name;
            }
            return optionValue;
        };
        DropdownWidgetComponent.prototype.handleError = function (error) {
            this.logService.error(error);
        };
        DropdownWidgetComponent.prototype.isReadOnlyType = function () {
            return this.field.type === 'readonly';
        };
        return DropdownWidgetComponent;
    }(WidgetComponent));
    DropdownWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'dropdown-widget',
                    template: "<div class=\"adf-dropdown-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n    <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n    <mat-form-field>\n        <mat-select class=\"adf-select\"\n                    [id]=\"field.id\"\n                    [(ngModel)]=\"field.value\"\n                    [disabled]=\"field.readOnly\"\n                    (ngModelChange)=\"onFieldChanged(field)\">\n            <mat-option *ngFor=\"let opt of field.options\"\n                        [value]=\"getOptionValue(opt, field.value)\"\n                        [id]=\"opt.id\">{{opt.name}}\n            </mat-option>\n            <mat-option id=\"readonlyOption\" *ngIf=\"isReadOnlyType()\" [value]=\"field.value\">{{field.value}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget class=\"adf-dropdown-required-message\" *ngIf=\"isInvalidFieldRequired()\"\n                  required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-dropdown-widget{width:100%}.adf-dropdown-widget .adf-select{padding-top:0!important;width:100%}.adf-dropdown-widget .mat-select-value-text{font-size:14px}.adf-dropdown-widget-select{width:100%}"]
                },] }
    ];
    DropdownWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: LogService }
    ]; };

    var WidgetVisibilityService = /** @class */ (function () {
        function WidgetVisibilityService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(WidgetVisibilityService.prototype, "taskFormsApi", {
            get: function () {
                var _a;
                this._taskFormsApi = (_a = this._taskFormsApi) !== null && _a !== void 0 ? _a : new jsApi.TaskFormsApi(this.apiService.getInstance());
                return this._taskFormsApi;
            },
            enumerable: false,
            configurable: true
        });
        WidgetVisibilityService.prototype.refreshVisibility = function (form, processVarList) {
            var _this = this;
            this.form = form;
            if (processVarList) {
                this.processVarList = processVarList;
            }
            if (form && form.tabs && form.tabs.length > 0) {
                form.tabs.map(function (tabModel) { return _this.refreshEntityVisibility(tabModel); });
            }
            if (form && form.outcomes && form.outcomes.length > 0) {
                form.outcomes.map(function (outcomeModel) { return _this.refreshOutcomeVisibility(outcomeModel); });
            }
            if (form) {
                form.getFormFields().map(function (field) { return _this.refreshEntityVisibility(field); });
            }
        };
        WidgetVisibilityService.prototype.refreshEntityVisibility = function (element) {
            var visible = this.evaluateVisibility(element.form, element.visibilityCondition);
            element.isVisible = visible && this.isParentTabVisible(this.form, element);
        };
        WidgetVisibilityService.prototype.refreshOutcomeVisibility = function (element) {
            element.isVisible = this.evaluateVisibility(element.form, element.visibilityCondition);
        };
        WidgetVisibilityService.prototype.evaluateVisibility = function (form, visibilityObj) {
            var isLeftFieldPresent = visibilityObj && (visibilityObj.leftType || visibilityObj.leftValue);
            if (!isLeftFieldPresent || isLeftFieldPresent === 'null') {
                return true;
            }
            else {
                return this.isFieldVisible(form, visibilityObj);
            }
        };
        WidgetVisibilityService.prototype.isFieldVisible = function (form, visibilityObj, accumulator, result) {
            var _this = this;
            if (accumulator === void 0) { accumulator = []; }
            if (result === void 0) { result = false; }
            var leftValue = this.getLeftValue(form, visibilityObj);
            var rightValue = this.getRightValue(form, visibilityObj);
            var actualResult = this.evaluateCondition(leftValue, rightValue, visibilityObj.operator);
            accumulator.push({ value: actualResult, operator: visibilityObj.nextConditionOperator });
            if (this.isValidCondition(visibilityObj.nextCondition)) {
                result = this.isFieldVisible(form, visibilityObj.nextCondition, accumulator);
            }
            else if (accumulator[0] !== undefined) {
                result = Function('"use strict";return (' +
                    accumulator.map(function (expression) { return _this.transformToLiteralExpression(expression); }).join('') +
                    ')')();
            }
            else {
                result = actualResult;
            }
            return !!result;
        };
        WidgetVisibilityService.prototype.transformToLiteralExpression = function (currentExpression) {
            var currentTransformedValue = !!currentExpression.value ? 'true' : 'false';
            return currentTransformedValue.concat(this.transformToLiteralOperator(currentExpression.operator));
        };
        WidgetVisibilityService.prototype.transformToLiteralOperator = function (currentOperator) {
            switch (currentOperator) {
                case 'and':
                    return '&&';
                case 'or':
                    return '||';
                case 'and-not':
                    return '&& !';
                case 'or-not':
                    return '|| !';
                default:
                    return '';
            }
        };
        WidgetVisibilityService.prototype.getLeftValue = function (form, visibilityObj) {
            var leftValue = '';
            if (visibilityObj.leftType && visibilityObj.leftType === WidgetTypeEnum.variable) {
                leftValue = this.getVariableValue(form, visibilityObj.leftValue, this.processVarList);
            }
            else if (visibilityObj.leftType && visibilityObj.leftType === WidgetTypeEnum.field) {
                leftValue = this.getFormValue(form, visibilityObj.leftValue);
                if (leftValue === undefined || leftValue === '') {
                    var variableValue = this.getVariableValue(form, visibilityObj.leftValue, this.processVarList);
                    leftValue = !this.isInvalidValue(variableValue) ? variableValue : leftValue;
                }
            }
            return leftValue;
        };
        WidgetVisibilityService.prototype.getRightValue = function (form, visibilityObj) {
            var valueFound = '';
            if (visibilityObj.rightType === WidgetTypeEnum.variable) {
                valueFound = this.getVariableValue(form, visibilityObj.rightValue, this.processVarList);
            }
            else if (visibilityObj.rightType === WidgetTypeEnum.field) {
                valueFound = this.getFormValue(form, visibilityObj.rightValue);
            }
            else {
                if (moment$1(visibilityObj.rightValue, 'YYYY-MM-DD', true).isValid()) {
                    valueFound = visibilityObj.rightValue + 'T00:00:00.000Z';
                }
                else {
                    valueFound = visibilityObj.rightValue;
                }
            }
            return valueFound;
        };
        WidgetVisibilityService.prototype.getFormValue = function (form, fieldId) {
            var formField = this.getFormFieldById(form, fieldId);
            var value = undefined;
            if (this.isFormFieldValid(formField)) {
                value = this.getFieldValue(form.values, fieldId);
                if (this.isInvalidValue(value)) {
                    value = this.searchValueInForm(formField, fieldId);
                }
            }
            return value;
        };
        WidgetVisibilityService.prototype.isFormFieldValid = function (formField) {
            return formField && formField.isValid;
        };
        WidgetVisibilityService.prototype.getFieldValue = function (valueList, fieldId) {
            var labelFilterByName, valueFound;
            if (fieldId && fieldId.indexOf('_LABEL') > 0) {
                labelFilterByName = fieldId.substring(0, fieldId.length - 6);
                if (valueList[labelFilterByName]) {
                    if (Array.isArray(valueList[labelFilterByName])) {
                        valueFound = valueList[labelFilterByName].map(function (_b) {
                            var name = _b.name;
                            return name;
                        });
                    }
                    else {
                        valueFound = valueList[labelFilterByName].name;
                    }
                }
            }
            else if (valueList[fieldId] && valueList[fieldId].id) {
                valueFound = valueList[fieldId].id;
            }
            else if (valueList[fieldId] && Array.isArray(valueList[fieldId])) {
                valueFound = valueList[fieldId].map(function (_b) {
                    var id = _b.id;
                    return id;
                });
            }
            else {
                valueFound = valueList[fieldId];
            }
            return valueFound;
        };
        WidgetVisibilityService.prototype.isInvalidValue = function (value) {
            return value === undefined || value === null;
        };
        WidgetVisibilityService.prototype.getFormFieldById = function (form, fieldId) {
            var _this = this;
            return form.getFormFields().find(function (formField) { return _this.isSearchedField(formField, fieldId); });
        };
        WidgetVisibilityService.prototype.searchValueInForm = function (formField, fieldId) {
            var fieldValue = '';
            if (formField) {
                fieldValue = this.getObjectValue(formField, fieldId);
                if (!fieldValue) {
                    if (formField.value && formField.value.id) {
                        fieldValue = formField.value.id;
                    }
                    else if (!this.isInvalidValue(formField.value)) {
                        fieldValue = formField.value;
                    }
                }
            }
            return fieldValue;
        };
        WidgetVisibilityService.prototype.isParentTabVisible = function (form, currentFormField) {
            var _this = this;
            var containers = this.getFormTabContainers(form);
            var isVisible = true;
            containers.map(function (container) {
                if (!!_this.getCurrentFieldFromTabById(container, currentFormField.id)) {
                    var currentTab = form.tabs.find(function (tab) { return tab.id === container.tab; });
                    if (!!currentTab) {
                        isVisible = currentTab.isVisible;
                    }
                }
            });
            return isVisible;
        };
        WidgetVisibilityService.prototype.getCurrentFieldFromTabById = function (container, fieldId) {
            var e_1, _b;
            var tabFields = Object.keys(container.field.fields).map(function (key) { return container.field.fields[key]; });
            var currentField;
            try {
                for (var tabFields_1 = __values(tabFields), tabFields_1_1 = tabFields_1.next(); !tabFields_1_1.done; tabFields_1_1 = tabFields_1.next()) {
                    var tabField = tabFields_1_1.value;
                    currentField = tabField.find(function (tab) { return tab.id === fieldId; });
                    if (currentField) {
                        return currentField;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (tabFields_1_1 && !tabFields_1_1.done && (_b = tabFields_1.return)) _b.call(tabFields_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        };
        WidgetVisibilityService.prototype.getFormTabContainers = function (form) {
            if (!!form) {
                return form.fields.filter(function (field) { return field.type === 'container' && field.tab; });
            }
            return [];
        };
        WidgetVisibilityService.prototype.getObjectValue = function (field, fieldId) {
            var value = '';
            if (field.value && field.value.name) {
                value = field.value.name;
            }
            else if (field.options) {
                var option = field.options.find(function (opt) { return opt.id === field.value; });
                if (option) {
                    value = this.getValueFromOption(fieldId, option);
                }
            }
            return value;
        };
        WidgetVisibilityService.prototype.getValueFromOption = function (fieldId, option) {
            var optionValue = '';
            if (fieldId && fieldId.indexOf('_LABEL') > 0) {
                optionValue = option.name;
            }
            else {
                optionValue = option.id;
            }
            return optionValue;
        };
        WidgetVisibilityService.prototype.isSearchedField = function (field, fieldId) {
            var fieldToFind = (fieldId === null || fieldId === void 0 ? void 0 : fieldId.indexOf('_LABEL')) > 0 ? fieldId.replace('_LABEL', '') : fieldId;
            return (field.id && fieldToFind) ? field.id.toUpperCase() === fieldToFind.toUpperCase() : false;
        };
        WidgetVisibilityService.prototype.getVariableValue = function (form, name, processVarList) {
            var processVariableValue = this.getProcessVariableValue(name, processVarList);
            var variableDefaultValue = form.getFormVariableValue(name);
            return (processVariableValue === undefined) ? variableDefaultValue : processVariableValue;
        };
        WidgetVisibilityService.prototype.getProcessVariableValue = function (name, processVarList) {
            if (processVarList) {
                var processVariable = processVarList.find(function (variable) { return variable.id === name ||
                    variable.id === "variables." + name; });
                if (processVariable) {
                    return processVariable.value;
                }
            }
            return undefined;
        };
        WidgetVisibilityService.prototype.evaluateCondition = function (leftValue, rightValue, operator) {
            switch (operator) {
                case '==':
                    return leftValue + '' === rightValue + '';
                case '<':
                    return leftValue < rightValue;
                case '!=':
                    return leftValue + '' !== rightValue + '';
                case '>':
                    return leftValue > rightValue;
                case '>=':
                    return leftValue >= rightValue;
                case '<=':
                    return leftValue <= rightValue;
                case 'empty':
                    return leftValue ? leftValue === '' : true;
                case '!empty':
                    return leftValue ? leftValue !== '' : false;
                case 'contains':
                    return this.contains(leftValue, rightValue);
                case '!contains':
                    return !this.contains(leftValue, rightValue);
                default:
                    this.logService.error("Invalid operator: " + operator);
                    return undefined;
            }
        };
        WidgetVisibilityService.prototype.contains = function (leftValue, rightValue) {
            return Array.isArray(leftValue) && Array.isArray(rightValue) && rightValue.every(function (element) { return leftValue.includes(element); });
        };
        WidgetVisibilityService.prototype.cleanProcessVariable = function () {
            this.processVarList = [];
        };
        WidgetVisibilityService.prototype.getTaskProcessVariable = function (taskId) {
            var _this = this;
            return rxjs.from(this.taskFormsApi.getTaskFormVariables(taskId))
                .pipe(operators.map(function (res) {
                var jsonRes = _this.toJson(res);
                _this.processVarList = jsonRes;
                return jsonRes;
            }), operators.catchError(function () { return _this.handleError(); }));
        };
        WidgetVisibilityService.prototype.toJson = function (res) {
            return res || {};
        };
        WidgetVisibilityService.prototype.isValidCondition = function (condition) {
            return !!(condition && condition.operator);
        };
        WidgetVisibilityService.prototype.handleError = function () {
            this.logService.error('Error while performing a call');
            return rxjs.throwError('Error while performing a call - Server error');
        };
        return WidgetVisibilityService;
    }());
    WidgetVisibilityService.ɵprov = i0.ɵɵdefineInjectable({ factory: function WidgetVisibilityService_Factory() { return new WidgetVisibilityService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: WidgetVisibilityService, providedIn: "root" });
    WidgetVisibilityService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    WidgetVisibilityService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var ValidateDynamicTableRowEvent = /** @class */ (function (_super) {
        __extends(ValidateDynamicTableRowEvent, _super);
        function ValidateDynamicTableRowEvent(form, field, row, summary) {
            var _this = _super.call(this, form, field) || this;
            _this.row = row;
            _this.summary = summary;
            _this.isValid = true;
            return _this;
        }
        return ValidateDynamicTableRowEvent;
    }(FormFieldEvent));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DateCellValidator = /** @class */ (function () {
        function DateCellValidator() {
            this.supportedTypes = [
                'Date'
            ];
        }
        DateCellValidator.prototype.isSupported = function (column) {
            return column && column.editable && this.supportedTypes.indexOf(column.type) > -1;
        };
        DateCellValidator.prototype.validate = function (row, column, summary) {
            if (this.isSupported(column)) {
                var value = row.value[column.id];
                if (!value && !column.required) {
                    return true;
                }
                var dateValue = moment$1(value, 'YYYY-MM-DDTHH:mm:ss.SSSSZ', true);
                if (!dateValue.isValid()) {
                    if (summary) {
                        summary.isValid = false;
                        summary.message = "Invalid '" + column.name + "' format.";
                    }
                    return false;
                }
            }
            return true;
        };
        return DateCellValidator;
    }());

    var DynamicRowValidationSummary = /** @class */ (function (_super) {
        __extends(DynamicRowValidationSummary, _super);
        function DynamicRowValidationSummary(json) {
            var _this = _super.call(this, json) || this;
            _this.isValid = json.isValid;
            return _this;
        }
        return DynamicRowValidationSummary;
    }(ErrorMessageModel));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NumberCellValidator = /** @class */ (function () {
        function NumberCellValidator() {
            this.supportedTypes = [
                'Number',
                'Amount'
            ];
        }
        NumberCellValidator.prototype.isSupported = function (column) {
            return column && column.required && this.supportedTypes.indexOf(column.type) > -1;
        };
        NumberCellValidator.prototype.isNumber = function (value) {
            if (value === null || value === undefined || value === '') {
                return false;
            }
            return !isNaN(+value);
        };
        NumberCellValidator.prototype.validate = function (row, column, summary) {
            if (this.isSupported(column)) {
                var value = row.value[column.id];
                if (value === null ||
                    value === undefined ||
                    value === '' ||
                    this.isNumber(value)) {
                    return true;
                }
                if (summary) {
                    summary.isValid = false;
                    summary.message = "Field '" + column.name + "' must be a number.";
                }
                return false;
            }
            return true;
        };
        return NumberCellValidator;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var RequiredCellValidator = /** @class */ (function () {
        function RequiredCellValidator() {
            this.supportedTypes = [
                'String',
                'Number',
                'Amount',
                'Date',
                'Dropdown'
            ];
        }
        RequiredCellValidator.prototype.isSupported = function (column) {
            return column && column.required && this.supportedTypes.indexOf(column.type) > -1;
        };
        RequiredCellValidator.prototype.validate = function (row, column, summary) {
            if (this.isSupported(column)) {
                var value = row.value[column.id];
                if (column.required) {
                    if (value === null || value === undefined || value === '') {
                        if (summary) {
                            summary.isValid = false;
                            summary.message = "Field '" + column.name + "' is required.";
                        }
                        return false;
                    }
                }
            }
            return true;
        };
        return RequiredCellValidator;
    }());

    var DynamicTableModel = /** @class */ (function (_super) {
        __extends(DynamicTableModel, _super);
        function DynamicTableModel(field, formService) {
            var _this = _super.call(this, field.form, field.json) || this;
            _this.formService = formService;
            _this.columns = [];
            _this.visibleColumns = [];
            _this.rows = [];
            _this._validators = [];
            _this.field = field;
            if (field.json) {
                var columns = _this.getColumns(field);
                if (columns) {
                    _this.columns = columns;
                    _this.visibleColumns = _this.columns.filter(function (col) { return col.visible; });
                }
                if (field.json.value) {
                    _this.rows = field.json.value.map(function (obj) { return ({ selected: false, value: obj }); });
                }
            }
            _this._validators = [
                new RequiredCellValidator(),
                new DateCellValidator(),
                new NumberCellValidator()
            ];
            return _this;
        }
        Object.defineProperty(DynamicTableModel.prototype, "selectedRow", {
            get: function () {
                return this._selectedRow;
            },
            set: function (value) {
                if (this._selectedRow && this._selectedRow === value) {
                    this._selectedRow.selected = false;
                    this._selectedRow = null;
                    return;
                }
                this.rows.forEach(function (row) { return row.selected = false; });
                this._selectedRow = value;
                if (value) {
                    this._selectedRow.selected = true;
                }
            },
            enumerable: false,
            configurable: true
        });
        DynamicTableModel.prototype.getColumns = function (field) {
            if (field && field.json) {
                var definitions = field.json.columnDefinitions;
                if (!definitions && field.json.params && field.json.params.field) {
                    definitions = field.json.params.field.columnDefinitions;
                }
                if (definitions) {
                    return definitions.map(function (obj) { return obj; });
                }
            }
            return null;
        };
        DynamicTableModel.prototype.flushValue = function () {
            if (this.field) {
                this.field.value = this.rows.map(function (r) { return r.value; });
                this.field.updateForm();
            }
        };
        DynamicTableModel.prototype.moveRow = function (row, offset) {
            var oldIndex = this.rows.indexOf(row);
            if (oldIndex > -1) {
                var newIndex = (oldIndex + offset);
                if (newIndex < 0) {
                    newIndex = 0;
                }
                else if (newIndex >= this.rows.length) {
                    newIndex = this.rows.length;
                }
                var arr = this.rows.slice();
                arr.splice(oldIndex, 1);
                arr.splice(newIndex, 0, row);
                this.rows = arr;
                this.flushValue();
            }
        };
        DynamicTableModel.prototype.deleteRow = function (row) {
            if (row) {
                if (this.selectedRow === row) {
                    this.selectedRow = null;
                }
                var idx = this.rows.indexOf(row);
                if (idx > -1) {
                    this.rows.splice(idx, 1);
                    this.flushValue();
                }
            }
        };
        DynamicTableModel.prototype.addRow = function (row) {
            if (row) {
                this.rows.push(row);
            }
        };
        DynamicTableModel.prototype.validateRow = function (row) {
            var e_1, _a, e_2, _b;
            var summary = new DynamicRowValidationSummary({
                isValid: true,
                message: null
            });
            var event = new ValidateDynamicTableRowEvent(this.form, this.field, row, summary);
            this.formService.validateDynamicTableRow.next(event);
            if (event.defaultPrevented || !summary.isValid) {
                return summary;
            }
            if (row) {
                try {
                    for (var _c = __values(this.columns), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var col = _d.value;
                        try {
                            for (var _e = (e_2 = void 0, __values(this._validators)), _f = _e.next(); !_f.done; _f = _e.next()) {
                                var validator = _f.value;
                                if (!validator.validate(row, col, summary)) {
                                    return summary;
                                }
                            }
                        }
                        catch (e_2_1) { e_2 = { error: e_2_1 }; }
                        finally {
                            try {
                                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                            }
                            finally { if (e_2) throw e_2.error; }
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            return summary;
        };
        DynamicTableModel.prototype.getCellValue = function (row, column) {
            var rowValue = row.value[column.id];
            if (column.type === 'Dropdown') {
                if (rowValue) {
                    return rowValue.name;
                }
            }
            if (column.type === 'Boolean') {
                return !!rowValue;
            }
            if (column.type === 'Date') {
                if (rowValue) {
                    return moment$1(rowValue.split('T')[0], 'YYYY-MM-DD').format('DD-MM-YYYY');
                }
            }
            return rowValue || '';
        };
        DynamicTableModel.prototype.getDisplayText = function (column) {
            var columnName = column.name;
            if (column.type === 'Amount') {
                var currency = column.amountCurrency || '$';
                columnName = column.name + " (" + currency + ")";
            }
            return columnName;
        };
        return DynamicTableModel;
    }(FormWidgetModel));

    var DynamicTableWidgetComponent = /** @class */ (function (_super) {
        __extends(DynamicTableWidgetComponent, _super);
        function DynamicTableWidgetComponent(formService, elementRef, visibilityService, logService, cd) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.elementRef = elementRef;
            _this.visibilityService = visibilityService;
            _this.logService = logService;
            _this.cd = cd;
            _this.ERROR_MODEL_NOT_FOUND = 'Table model not found';
            _this.editMode = false;
            _this.editRow = null;
            _this.selectArrayCode = [32, 0, 13];
            return _this;
        }
        DynamicTableWidgetComponent.prototype.ngOnInit = function () {
            if (this.field) {
                this.content = new DynamicTableModel(this.field, this.formService);
                this.visibilityService.refreshVisibility(this.field.form);
            }
        };
        DynamicTableWidgetComponent.prototype.forceFocusOnAddButton = function () {
            if (this.content) {
                this.cd.detectChanges();
                var buttonAddRow = this.elementRef.nativeElement.querySelector('#' + this.content.id + '-add-row');
                if (this.isDynamicTableReady(buttonAddRow)) {
                    buttonAddRow.focus();
                }
            }
        };
        DynamicTableWidgetComponent.prototype.isDynamicTableReady = function (buttonAddRow) {
            return this.field && !this.editMode && buttonAddRow;
        };
        DynamicTableWidgetComponent.prototype.isValid = function () {
            var valid = true;
            if (this.content && this.content.field) {
                valid = this.content.field.isValid;
            }
            return valid;
        };
        DynamicTableWidgetComponent.prototype.onRowClicked = function (row) {
            if (this.content) {
                this.content.selectedRow = row;
            }
        };
        DynamicTableWidgetComponent.prototype.onKeyPressed = function ($event, row) {
            if (this.content && this.isEnterOrSpacePressed($event.keyCode)) {
                this.content.selectedRow = row;
            }
        };
        DynamicTableWidgetComponent.prototype.isEnterOrSpacePressed = function (keyCode) {
            return this.selectArrayCode.indexOf(keyCode) !== -1;
        };
        DynamicTableWidgetComponent.prototype.hasSelection = function () {
            return !!(this.content && this.content.selectedRow);
        };
        DynamicTableWidgetComponent.prototype.moveSelectionUp = function () {
            if (this.content && !this.readOnly) {
                this.content.moveRow(this.content.selectedRow, -1);
                return true;
            }
            return false;
        };
        DynamicTableWidgetComponent.prototype.moveSelectionDown = function () {
            if (this.content && !this.readOnly) {
                this.content.moveRow(this.content.selectedRow, 1);
                return true;
            }
            return false;
        };
        DynamicTableWidgetComponent.prototype.deleteSelection = function () {
            if (this.content && !this.readOnly) {
                this.content.deleteRow(this.content.selectedRow);
                return true;
            }
            return false;
        };
        DynamicTableWidgetComponent.prototype.addNewRow = function () {
            if (this.content && !this.readOnly) {
                this.editRow = {
                    isNew: true,
                    selected: false,
                    value: {}
                };
                this.editMode = true;
                return true;
            }
            return false;
        };
        DynamicTableWidgetComponent.prototype.editSelection = function () {
            if (this.content && !this.readOnly) {
                this.editRow = this.copyRow(this.content.selectedRow);
                this.editMode = true;
                return true;
            }
            return false;
        };
        DynamicTableWidgetComponent.prototype.getCellValue = function (row, column) {
            if (this.content) {
                var cellValue = this.content.getCellValue(row, column);
                if (column.type === 'Amount') {
                    return (column.amountCurrency || '$') + ' ' + (cellValue || 0);
                }
                return cellValue;
            }
            return null;
        };
        DynamicTableWidgetComponent.prototype.onSaveChanges = function () {
            if (this.content) {
                if (this.editRow.isNew) {
                    var row = this.copyRow(this.editRow);
                    this.content.selectedRow = null;
                    this.content.addRow(row);
                    this.editRow.isNew = false;
                }
                else {
                    this.content.selectedRow.value = this.copyObject(this.editRow.value);
                }
                this.content.flushValue();
            }
            else {
                this.logService.error(this.ERROR_MODEL_NOT_FOUND);
            }
            this.editMode = false;
            this.forceFocusOnAddButton();
        };
        DynamicTableWidgetComponent.prototype.onCancelChanges = function () {
            this.editMode = false;
            this.editRow = null;
            this.forceFocusOnAddButton();
        };
        DynamicTableWidgetComponent.prototype.copyRow = function (row) {
            return {
                value: this.copyObject(row.value)
            };
        };
        DynamicTableWidgetComponent.prototype.copyObject = function (obj) {
            var _this = this;
            var result = obj;
            if (typeof obj === 'object' && obj !== null && obj !== undefined) {
                result = Object.assign({}, obj);
                Object.keys(obj).forEach(function (key) {
                    if (typeof obj[key] === 'object') {
                        result[key] = _this.copyObject(obj[key]);
                    }
                });
            }
            return result;
        };
        return DynamicTableWidgetComponent;
    }(WidgetComponent));
    DynamicTableWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'dynamic-table-widget',
                    template: "<div class=\"adf-dynamic-table-scrolling {{field.className}}\"\n    [class.adf-invalid]=\"!isValid()\">\n    <div class=\"adf-label\">{{content.name | translate }}<span *ngIf=\"isRequired()\">*</span></div>\n\n    <div *ngIf=\"!editMode\">\n        <div class=\"adf-table-container\">\n            <table class=\"adf-full-width adf-dynamic-table\" id=\"dynamic-table-{{content.id}}\">\n                <thead>\n                    <tr>\n                        <th *ngFor=\"let column of content.visibleColumns\">\n                            {{column.name}}\n                        </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor=\"let row of content.rows; let idx = index\" tabindex=\"0\" id=\"{{content.id}}-row-{{idx}}\"\n                        [class.adf-dynamic-table-widget__row-selected]=\"row.selected\" (keyup)=\"onKeyPressed($event, row)\">\n                        <td *ngFor=\"let column of content.visibleColumns\"\n                            (click)=\"onRowClicked(row)\">\n                            <span *ngIf=\"column.type !== 'Boolean' else checkbox\">\n                                {{ getCellValue(row, column) }}\n                            </span>\n                            <ng-template #checkbox>\n                                <mat-checkbox disabled [checked]=\"getCellValue(row, column)\">\n                                </mat-checkbox>\n                            </ng-template>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <div *ngIf=\"!readOnly\">\n            <button mat-button\n                    [disabled]=\"!hasSelection()\"\n                    (click)=\"moveSelectionUp()\">\n                <mat-icon>arrow_upward</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]=\"!hasSelection()\"\n                    (click)=\"moveSelectionDown()\">\n                <mat-icon>arrow_downward</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]=\"field.readOnly\"\n                    id=\"{{content.id}}-add-row\"\n                    (click)=\"addNewRow()\">\n                <mat-icon>add_circle_outline</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]=\"!hasSelection()\"\n                    (click)=\"deleteSelection()\">\n                <mat-icon>remove_circle_outline</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]=\"!hasSelection()\"\n                    (click)=\"editSelection()\">\n                <mat-icon>edit</mat-icon>\n            </button>\n        </div>\n     </div>\n\n     <row-editor *ngIf=\"editMode\"\n        [table]=\"content\"\n        [row]=\"editRow\"\n        (save)=\"onSaveChanges()\"\n        (cancel)=\"onCancelChanges()\">\n     </row-editor>\n    <error-widget [error]=\"field.validationSummary\" ></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: ["dynamic-table-widget .adf-label{height:auto;width:auto}.adf-dynamic-table-scrolling{overflow:auto}.adf-dynamic-table{border:1px solid var(--theme-border-color);border-collapse:unset;border-spacing:0;font-size:14px;position:relative;white-space:nowrap;width:100%}.adf-dynamic-table thead{padding-bottom:3px}.adf-dynamic-table tbody tr{height:56px;position:relative;transition-duration:.28s;transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.adf-dynamic-table tbody tr:hover{background-color:#eee}.adf-dynamic-table tbody tr.adf-is-selected,.adf-dynamic-table tbody tr.adf-is-selected:hover{background-color:#e0f7fa}.adf-dynamic-table tbody tr:focus{outline:1px solid #448aff;outline-offset:-1px}.adf-dynamic-table td,.adf-dynamic-table th{padding:0 18px 12px;text-align:center}.adf-dynamic-table td:first-of-type,.adf-dynamic-table th:first-of-type{padding-left:24px}.adf-dynamic-table td:last-of-type,.adf-dynamic-table th:last-of-type{padding-right:24px}.adf-dynamic-table td{border-bottom:1px solid var(--theme-border-color);border-top:1px solid var(--theme-border-color);cursor:default;padding-top:12px;vertical-align:middle}.adf-dynamic-table td,.adf-dynamic-table th{-webkit-touch-callout:none;-webkit-user-select:none;box-sizing:border-box;color:var(--theme-text-fg-color);height:56px;position:relative;user-select:none}.adf-dynamic-table th{cursor:pointer;font-size:12px;font-weight:700;letter-spacing:0;line-height:24px;padding-bottom:8px;text-overflow:ellipsis;vertical-align:bottom}.adf-dynamic-table th.adf-sortable{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.adf-dynamic-table th.adf-sortable:hover{cursor:pointer}.adf-dynamic-table th.adf-dynamic-table__header--sorted-asc,.adf-dynamic-table th.adf-dynamic-table__header--sorted-desc{color:var(--theme-text-fg-color)}.adf-dynamic-table th.adf-dynamic-table__header--sorted-asc:before,.adf-dynamic-table th.adf-dynamic-table__header--sorted-desc:before{-webkit-font-feature-settings:\"liga\";-webkit-font-smoothing:antialiased;content:\"\\e5d8\";display:inline-block;font-family:Material Icons;font-feature-settings:\"liga\";font-size:24px;font-size:16px;font-style:normal;font-weight:400;letter-spacing:normal;line-height:1;margin-right:5px;text-transform:none;vertical-align:sub;word-wrap:normal}.adf-dynamic-table th.adf-dynamic-table__header--sorted-asc:hover,.adf-dynamic-table th.adf-dynamic-table__header--sorted-desc:hover{cursor:pointer}.adf-dynamic-table th.adf-dynamic-table__header--sorted-asc:hover:before,.adf-dynamic-table th.adf-dynamic-table__header--sorted-desc:hover:before{color:var(--theme-disabled-text-color)}.adf-dynamic-table th.adf-dynamic-table__header--sorted-desc:before{content:\"\\e5db\"}.adf-dynamic-table .adf-dynamic-table-cell{cursor:default;text-align:left}.adf-dynamic-table .adf-dynamic-table-cell--text{text-align:left}.adf-dynamic-table .adf-dynamic-table-cell--number{text-align:right}.adf-dynamic-table .adf-dynamic-table-cell--image{text-align:left}.adf-dynamic-table .adf-dynamic-table-cell--image img{height:24px;width:24px}.adf-dynamic-table .adf-full-width{width:100%}"]
                },] }
    ];
    DynamicTableWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: i0.ElementRef },
        { type: WidgetVisibilityService },
        { type: LogService },
        { type: i0.ChangeDetectorRef }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var BooleanEditorComponent = /** @class */ (function () {
        function BooleanEditorComponent() {
        }
        BooleanEditorComponent.prototype.onValueChanged = function (row, column, event) {
            var value = event.checked;
            row.value[column.id] = value;
        };
        return BooleanEditorComponent;
    }());
    BooleanEditorComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-boolean-editor',
                    template: " <label [attr.for]=\"column.id\">\n    <mat-checkbox\n        color=\"primary\"\n        [id]=\"column.id\"\n        [checked]=\"table.getCellValue(row, column)\"\n        [required]=\"column.required\"\n        [disabled]=\"!column.editable\"\n        (change)=\"onValueChanged(row, column, $event)\">\n    <span class=\"adf-checkbox-label\">{{column.name}}</span>\n    </mat-checkbox>\n</label>\n",
                    styles: [".adf-checkbox-label{cursor:pointer;font-size:16px;line-height:24px;margin:0;position:relative}"]
                },] }
    ];
    BooleanEditorComponent.propDecorators = {
        table: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        column: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ɵ0$3 = MOMENT_DATE_FORMATS;
    var DateEditorComponent = /** @class */ (function () {
        function DateEditorComponent(dateAdapter, userPreferencesService) {
            this.dateAdapter = dateAdapter;
            this.userPreferencesService = userPreferencesService;
            this.DATE_FORMAT = 'DD-MM-YYYY';
            this.onDestroy$ = new rxjs.Subject();
        }
        DateEditorComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select(exports.UserPreferenceValues.Locale)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (locale) { return _this.dateAdapter.setLocale(locale); });
            var momentDateAdapter = this.dateAdapter;
            momentDateAdapter.overrideDisplayFormat = this.DATE_FORMAT;
            this.value = moment$1(this.table.getCellValue(this.row, this.column), this.DATE_FORMAT);
        };
        DateEditorComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        DateEditorComponent.prototype.onDateChanged = function (newDateValue) {
            if (newDateValue && newDateValue.value) {
                var momentDate = moment$1(newDateValue.value, this.DATE_FORMAT, true);
                if (!momentDate.isValid()) {
                    this.row.value[this.column.id] = newDateValue.value;
                }
                else {
                    this.row.value[this.column.id] = momentDate.format('YYYY-MM-DD') + "T00:00:00.000Z";
                    this.table.flushValue();
                }
            }
            else {
                this.row.value[this.column.id] = '';
            }
        };
        return DateEditorComponent;
    }());
    DateEditorComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-date-editor',
                    template: "<div>\n    <mat-form-field class=\"adf-date-editor\">\n        <label [attr.for]=\"column.id\">{{column.name}} ({{DATE_FORMAT}})</label>\n        <input matInput\n            id=\"dateInput\"\n            type=\"text\"\n            [matDatepicker]=\"datePicker\"\n            [value]=\"value\"\n            [id]=\"column.id\"\n            [required]=\"column.required\"\n            [disabled]=\"!column.editable\"\n            (focusout)=\"onDateChanged($any($event).srcElement)\"\n            (dateChange)=\"onDateChanged($event)\">\n        <mat-datepicker-toggle  *ngIf=\"column.editable\" matSuffix [for]=\"datePicker\" class=\"adf-date-editor-button\" ></mat-datepicker-toggle>\n    </mat-form-field>\n    <mat-datepicker #datePicker [touchUi]=\"true\"></mat-datepicker>\n</div>\n",
                    providers: [
                        { provide: core.DateAdapter, useClass: MomentDateAdapter },
                        { provide: core.MAT_DATE_FORMATS, useValue: ɵ0$3 }
                    ],
                    styles: [".adf-date-editor{width:100%}.adf-date-editor-button{position:relative;top:25px}"]
                },] }
    ];
    DateEditorComponent.ctorParameters = function () { return [
        { type: core.DateAdapter },
        { type: UserPreferencesService }
    ]; };
    DateEditorComponent.propDecorators = {
        table: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        column: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ɵ0$4 = MOMENT_DATE_FORMATS, ɵ1$2 = moment$2.MAT_MOMENT_DATETIME_FORMATS;
    var DateTimeEditorComponent = /** @class */ (function () {
        function DateTimeEditorComponent(dateAdapter, userPreferencesService) {
            this.dateAdapter = dateAdapter;
            this.userPreferencesService = userPreferencesService;
            this.DATE_TIME_FORMAT = 'DD/MM/YYYY HH:mm';
            this.onDestroy$ = new rxjs.Subject();
        }
        DateTimeEditorComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select(exports.UserPreferenceValues.Locale)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (locale) { return _this.dateAdapter.setLocale(locale); });
            var momentDateAdapter = this.dateAdapter;
            momentDateAdapter.overrideDisplayFormat = this.DATE_TIME_FORMAT;
            this.value = moment$1(this.table.getCellValue(this.row, this.column), this.DATE_TIME_FORMAT);
        };
        DateTimeEditorComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        DateTimeEditorComponent.prototype.onDateChanged = function (newDateValue) {
            if (newDateValue && newDateValue.value) {
                var newValue = moment$1(newDateValue.value, this.DATE_TIME_FORMAT);
                this.row.value[this.column.id] = newDateValue.value.format(this.DATE_TIME_FORMAT);
                this.value = newValue;
                this.table.flushValue();
            }
            else if (newDateValue) {
                var newValue = moment$1(newDateValue, this.DATE_TIME_FORMAT);
                this.value = newValue;
                this.row.value[this.column.id] = newDateValue;
                this.table.flushValue();
            }
            else {
                this.row.value[this.column.id] = '';
            }
        };
        return DateTimeEditorComponent;
    }());
    DateTimeEditorComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-datetime-editor',
                    template: "<div>\n    <mat-form-field class=\"adf-date-editor\">\n        <label [attr.for]=\"column.id\">{{column.name}} {{DATE_TIME_FORMAT}}</label>\n        <input matInput\n            [matDatetimepicker]=\"datetimePicker\"\n            [(ngModel)]=\"value\"\n            [id]=\"column.id\"\n            [required]=\"column.required\"\n            [disabled]=\"!column.editable\"\n            (focusout)=\"onDateChanged($any($event).srcElement.value)\"\n            (dateChange)=\"onDateChanged($event)\">\n            <mat-datetimepicker-toggle\n                matSuffix\n                [for]=\"datetimePicker\"\n                class=\"adf-date-editor-button\">\n            </mat-datetimepicker-toggle>\n    </mat-form-field>\n    <mat-datetimepicker\n        #datetimePicker\n        type=\"datetime\"\n        [openOnFocus]=\"true\"\n        [timeInterval]=\"5\">\n    </mat-datetimepicker>\n</div>\n",
                    providers: [
                        { provide: core.DateAdapter, useClass: MomentDateAdapter },
                        { provide: core.MAT_DATE_FORMATS, useValue: ɵ0$4 },
                        { provide: core$1.DatetimeAdapter, useClass: moment$2.MomentDatetimeAdapter },
                        { provide: core$1.MAT_DATETIME_FORMATS, useValue: ɵ1$2 }
                    ],
                    styles: [".adf-date-editor{width:100%}.adf-date-editor-button{position:relative;top:25px}"]
                },] }
    ];
    DateTimeEditorComponent.ctorParameters = function () { return [
        { type: core.DateAdapter },
        { type: UserPreferencesService }
    ]; };
    DateTimeEditorComponent.propDecorators = {
        table: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        column: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DropdownEditorComponent = /** @class */ (function () {
        function DropdownEditorComponent(formService, logService) {
            this.formService = formService;
            this.logService = logService;
            this.value = null;
            this.options = [];
        }
        DropdownEditorComponent.prototype.ngOnInit = function () {
            var field = this.table.field;
            if (field) {
                if (this.column.optionType === 'rest') {
                    if (this.table.form && this.table.form.taskId) {
                        this.getValuesByTaskId(field);
                    }
                    else {
                        this.getValuesByProcessDefinitionId(field);
                    }
                }
                else {
                    this.options = this.column.options || [];
                    this.value = this.table.getCellValue(this.row, this.column);
                }
            }
        };
        DropdownEditorComponent.prototype.getValuesByTaskId = function (field) {
            var _this = this;
            this.formService
                .getRestFieldValuesColumn(field.form.taskId, field.id, this.column.id)
                .subscribe(function (dynamicTableColumnOption) {
                _this.column.options = dynamicTableColumnOption || [];
                _this.options = _this.column.options;
                _this.value = _this.table.getCellValue(_this.row, _this.column);
            }, function (err) { return _this.handleError(err); });
        };
        DropdownEditorComponent.prototype.getValuesByProcessDefinitionId = function (field) {
            var _this = this;
            this.formService
                .getRestFieldValuesColumnByProcessId(field.form.processDefinitionId, field.id, this.column.id)
                .subscribe(function (dynamicTableColumnOption) {
                _this.column.options = dynamicTableColumnOption || [];
                _this.options = _this.column.options;
                _this.value = _this.table.getCellValue(_this.row, _this.column);
            }, function (err) { return _this.handleError(err); });
        };
        DropdownEditorComponent.prototype.onValueChanged = function (row, column, event) {
            var value = event.value;
            value = column.options.find(function (opt) { return opt.name === value; });
            row.value[column.id] = value;
        };
        DropdownEditorComponent.prototype.handleError = function (error) {
            this.logService.error(error);
        };
        return DropdownEditorComponent;
    }());
    DropdownEditorComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-dropdown-editor',
                    template: "<div class=\"dropdown-editor\">\n    <label [attr.for]=\"column.id\">{{column.name}}</label>\n    <mat-form-field>\n        <mat-select\n            floatPlaceholder=\"never\"\n            class=\"adf-dropdown-editor-select\"\n            [id]=\"column.id\"\n            [(ngModel)]=\"value\"\n            [required]=\"column.required\"\n            [disabled]=\"!column.editable\"\n            (selectionChange)=\"onValueChanged(row, column, $event)\">\n            <mat-option></mat-option>\n            <mat-option *ngFor=\"let opt of options\" [value]=\"opt.name\" [id]=\"opt.id\">{{opt.name}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n",
                    styles: [".adf-dropdown-editor-select{width:100%}"]
                },] }
    ];
    DropdownEditorComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: LogService }
    ]; };
    DropdownEditorComponent.propDecorators = {
        table: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        column: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var RowEditorComponent = /** @class */ (function () {
        function RowEditorComponent() {
            this.save = new i0.EventEmitter();
            this.cancel = new i0.EventEmitter();
            this.validationSummary = new DynamicRowValidationSummary({ isValid: true, message: '' });
        }
        RowEditorComponent.prototype.onCancelChanges = function () {
            this.cancel.emit({
                table: this.table,
                row: this.row,
                column: this.column
            });
        };
        RowEditorComponent.prototype.onSaveChanges = function () {
            this.validate();
            if (this.isValid()) {
                this.save.emit({
                    table: this.table,
                    row: this.row,
                    column: this.column
                });
            }
        };
        RowEditorComponent.prototype.isValid = function () {
            return this.validationSummary && this.validationSummary.isValid;
        };
        RowEditorComponent.prototype.validate = function () {
            this.validationSummary = this.table.validateRow(this.row);
        };
        return RowEditorComponent;
    }());
    RowEditorComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'row-editor',
                    template: "<div class=\"row-editor mdl-shadow--2dp\"\n     [class.row-editor__invalid]=\"!validationSummary.isValid\">\n    <div class=\"mdl-grid\" *ngFor=\"let column of table.columns\">\n        <div class=\"mdl-cell mdl-cell--6-col\" [ngSwitch]=\"column.type\">\n            <div *ngSwitchCase=\"'Dropdown'\">\n                <adf-dropdown-editor\n                    [table]=\"table\"\n                    [row]=\"row\"\n                    [column]=\"column\">\n                </adf-dropdown-editor>\n            </div>\n            <div *ngSwitchCase=\"'Date'\">\n                <adf-date-editor\n                    [table]=\"table\"\n                    [row]=\"row\"\n                    [column]=\"column\">\n                </adf-date-editor>\n            </div>\n            <div *ngSwitchCase=\"'Datetime'\">\n                <adf-datetime-editor\n                    [table]=\"table\"\n                    [row]=\"row\"\n                    [column]=\"column\">\n                </adf-datetime-editor>\n            </div>\n            <div *ngSwitchCase=\"'Boolean'\">\n                <adf-boolean-editor\n                    [table]=\"table\"\n                    [row]=\"row\"\n                    [column]=\"column\">\n                </adf-boolean-editor>\n            </div>\n            <div *ngSwitchCase=\"'Amount'\">\n                <adf-amount-editor\n                    [table]=\"table\"\n                    [row]=\"row\"\n                    [column]=\"column\">\n                </adf-amount-editor>\n            </div>\n            <div *ngSwitchDefault>\n                <adf-text-editor\n                    [table]=\"table\"\n                    [row]=\"row\"\n                    [column]=\"column\">\n                </adf-text-editor>\n            </div>\n        </div>\n    </div>\n    <error-widget [error]=\"validationSummary\"></error-widget>\n    <div>\n        <button mat-button (click)=\"onCancelChanges()\">Cancel</button>\n        <button mat-button (click)=\"onSaveChanges()\">Save</button>\n    </div>\n</div>\n",
                    styles: [".row-editor{padding:8px}.row-editor__validation-summary{visibility:hidden}.row-editor__invalid .row-editor__validation-summary{color:#d50000;padding:8px 16px;visibility:visible}"]
                },] }
    ];
    RowEditorComponent.ctorParameters = function () { return []; };
    RowEditorComponent.propDecorators = {
        table: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        column: [{ type: i0.Input }],
        save: [{ type: i0.Output }],
        cancel: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var TextEditorComponent = /** @class */ (function () {
        function TextEditorComponent() {
        }
        TextEditorComponent.prototype.ngOnInit = function () {
            this.displayName = this.table.getDisplayText(this.column);
        };
        TextEditorComponent.prototype.onValueChanged = function (row, column, event) {
            var value = event.target.value;
            row.value[column.id] = value;
        };
        return TextEditorComponent;
    }());
    TextEditorComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-text-editor',
                    template: "<div class=\"adf-text-editor\">\n    <mat-form-field>\n    <label [attr.for]=\"column.id\">{{displayName}}</label>\n    <input matInput\n        type=\"text\"\n        [value]=\"table.getCellValue(row, column)\"\n        (keyup)=\"onValueChanged(row, column, $event)\"\n        [required]=\"column.required\"\n        [disabled]=\"!column.editable\"\n        [id]=\"column.id\">\n    </mat-form-field>\n</div>\n",
                    styles: [".adf-text-editor{width:100%}"]
                },] }
    ];
    TextEditorComponent.propDecorators = {
        table: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        column: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AmountEditorComponent = /** @class */ (function () {
        function AmountEditorComponent() {
        }
        AmountEditorComponent.prototype.ngOnInit = function () {
            this.displayName = this.table.getDisplayText(this.column);
        };
        AmountEditorComponent.prototype.onValueChanged = function (row, column, event) {
            var value = Number(event.target.value);
            row.value[column.id] = value;
        };
        return AmountEditorComponent;
    }());
    AmountEditorComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-amount-editor',
                    template: "<div class=\"adf-amount-editor\">\n    <mat-form-field>\n    <label [attr.for]=\"column.id\">{{displayName}}</label>\n    <input matInput\n        type=\"number\"\n        [value]=\"table.getCellValue(row, column)\"\n        (keyup)=\"onValueChanged(row, column, $event)\"\n        [required]=\"column.required\"\n        [disabled]=\"!column.editable\"\n        [id]=\"column.id\">\n    </mat-form-field>\n</div>\n",
                    styles: [".adf-text-editor{width:100%}"]
                },] }
    ];
    AmountEditorComponent.propDecorators = {
        table: [{ type: i0.Input }],
        row: [{ type: i0.Input }],
        column: [{ type: i0.Input }]
    };

    var ErrorWidgetComponent = /** @class */ (function (_super) {
        __extends(ErrorWidgetComponent, _super);
        function ErrorWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.translateParameters = null;
            _this._subscriptAnimationState = '';
            return _this;
        }
        ErrorWidgetComponent.prototype.ngOnChanges = function (changes) {
            if (changes['required']) {
                this.required = changes.required.currentValue;
                this._subscriptAnimationState = 'enter';
            }
            if (changes['error'] && changes['error'].currentValue) {
                if (changes.error.currentValue.isActive()) {
                    this.error = changes.error.currentValue;
                    this.translateParameters = this.error.getAttributesAsJsonObj();
                    this._subscriptAnimationState = 'enter';
                }
            }
        };
        return ErrorWidgetComponent;
    }(WidgetComponent));
    ErrorWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'error-widget',
                    template: "<div class=\"adf-error-text-container\">\n    <div *ngIf=\"error?.isActive()\" [@transitionMessages]=\"_subscriptAnimationState\">\n        <div class=\"adf-error-text\">{{error.message | translate:translateParameters}}</div>\n        <mat-icon class=\"adf-error-icon\">warning</mat-icon>\n    </div>\n    <div *ngIf=\"required\" [@transitionMessages]=\"_subscriptAnimationState\">\n            <div class=\"adf-error-text\">{{required}}</div>\n    </div>\n</div>\n",
                    animations: [
                        animations.trigger('transitionMessages', [
                            animations.state('enter', animations.style({ opacity: 1, transform: 'translateY(0%)' })),
                            animations.transition('void => enter', [
                                animations.style({ opacity: 0, transform: 'translateY(-100%)' }),
                                animations.animate('300ms cubic-bezier(0.55, 0, 0.55, 0.2)')
                            ])
                        ])
                    ],
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-error-text{width:85%}"]
                },] }
    ];
    ErrorWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };
    ErrorWidgetComponent.propDecorators = {
        error: [{ type: i0.Input }],
        required: [{ type: i0.Input }]
    };

    var FunctionalGroupWidgetComponent = /** @class */ (function (_super) {
        __extends(FunctionalGroupWidgetComponent, _super);
        function FunctionalGroupWidgetComponent(formService, elementRef) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.elementRef = elementRef;
            _this.minTermLength = 1;
            _this.searchTerm = new forms.FormControl();
            _this.groups$ = rxjs.merge(_this.searchTerm.valueChanges).pipe(operators.tap(function (search) {
                var isValid = typeof search !== 'string';
                var empty = search === '';
                _this.updateOption(isValid ? search : null);
                _this.validateGroup(isValid, empty);
            }), operators.filter(function (group) { return typeof group === 'string' && group.length >= _this.minTermLength; }), operators.debounceTime(300), operators.switchMap(function (searchTerm) { return _this.formService.getWorkflowGroups(searchTerm, _this.groupId)
                .pipe(operators.catchError(function () { return rxjs.of([]); })); }));
            return _this;
        }
        FunctionalGroupWidgetComponent.prototype.ngOnInit = function () {
            var _a;
            if (this.field) {
                if (this.field.readOnly) {
                    this.searchTerm.disable();
                }
                var params = this.field.params;
                if (params && params.restrictWithGroup) {
                    var restrictWithGroup = params.restrictWithGroup;
                    this.groupId = restrictWithGroup.id;
                }
                if ((_a = this.field.value) === null || _a === void 0 ? void 0 : _a.name) {
                    this.searchTerm.setValue(this.field.value.name);
                }
            }
        };
        FunctionalGroupWidgetComponent.prototype.updateOption = function (option) {
            if (option) {
                this.field.value = option;
            }
            else {
                this.field.value = null;
            }
            this.field.updateForm();
        };
        FunctionalGroupWidgetComponent.prototype.validateGroup = function (valid, empty) {
            var isEmpty = !this.field.required && (empty || valid);
            var hasValue = this.field.required && valid;
            if (hasValue || isEmpty) {
                this.field.validationSummary.message = '';
                this.field.validate();
                this.field.form.validateForm();
            }
            else {
                this.field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_VALUE';
                this.field.markAsInvalid();
                this.field.form.markAsInvalid();
            }
        };
        FunctionalGroupWidgetComponent.prototype.getDisplayName = function (model) {
            if (model) {
                return typeof model === 'string' ? model : model.name;
            }
            return '';
        };
        return FunctionalGroupWidgetComponent;
    }(WidgetComponent));
    FunctionalGroupWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'functional-group-widget',
                    template: "<div class=\"adf-group-widget {{field.className}}\"\n     [class.is-dirty]=\"!!field.value\"\n     [class.adf-invalid]=\"!field.isValid\"\n     [class.adf-readonly]=\"field.readOnly\"\n     id=\"functional-group-div\">\n\n    <mat-form-field>\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n        <input matInput\n               class=\"adf-input\"\n               type=\"text\"\n               data-automation-id=\"adf-group-search-input\"\n               [id]=\"field.id\"\n               [formControl]=\"searchTerm\"\n               [placeholder]=\"field.placeholder\"\n               [matAutocomplete]=\"auto\">\n        <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"updateOption($event.option.value)\" [displayWith]=\"getDisplayName\">\n            <mat-option *ngFor=\"let item of groups$ | async; let i = index\"\n                        id=\"adf-group-widget-user-{{i}}\"\n                       [id]=\"field.id +'-'+item.id\"\n                       [value]=\"item\">\n                <span id=\"adf-group-label-name\">{{item.name}}</span>\n            </mat-option>\n        </mat-autocomplete>\n\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-group-widget{width:100%}"]
                },] }
    ];
    FunctionalGroupWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: i0.ElementRef }
    ]; };

    var HyperlinkWidgetComponent = /** @class */ (function (_super) {
        __extends(HyperlinkWidgetComponent, _super);
        function HyperlinkWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.linkUrl = '#';
            _this.linkText = null;
            return _this;
        }
        HyperlinkWidgetComponent.prototype.ngOnInit = function () {
            if (this.field) {
                this.linkUrl = this.getHyperlinkUrl(this.field);
                this.linkText = this.getHyperlinkText(this.field);
            }
        };
        HyperlinkWidgetComponent.prototype.getHyperlinkUrl = function (field) {
            var value = field.value || field.hyperlinkUrl;
            if (value && !/^https?:\/\//i.test(value)) {
                value = "" + HyperlinkWidgetComponent.DEFAULT_HYPERLINK_SCHEME + value;
            }
            return value || HyperlinkWidgetComponent.DEFAULT_HYPERLINK_URL;
        };
        HyperlinkWidgetComponent.prototype.getHyperlinkText = function (field) {
            if (field) {
                return field.displayText || field.hyperlinkUrl || field.value;
            }
            return null;
        };
        return HyperlinkWidgetComponent;
    }(WidgetComponent));
    HyperlinkWidgetComponent.DEFAULT_HYPERLINK_URL = '#';
    HyperlinkWidgetComponent.DEFAULT_HYPERLINK_SCHEME = 'http://';
    HyperlinkWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'hyperlink-widget',
                    template: "<div class=\"adf-hyperlink-widget {{field.className}}\">\n    <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span\n            *ngIf=\"isRequired()\">*</span></label>\n    <div [matTooltip]=\"field.tooltip\" matTooltipPosition=\"above\" matTooltipShowDelay=\"1000\">\n        <a [href]=\"linkUrl\" target=\"_blank\" rel=\"nofollow\">{{linkText}}</a>\n    </div>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-hyperlink-widget{border-top:.84375em solid transparent;padding:.4375em 0}.adf-hyperlink-widget a{color:var(--theme-primary-color)}"]
                },] }
    ];
    HyperlinkWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    var MultilineTextWidgetComponentComponent = /** @class */ (function (_super) {
        __extends(MultilineTextWidgetComponentComponent, _super);
        function MultilineTextWidgetComponentComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            return _this;
        }
        return MultilineTextWidgetComponentComponent;
    }(WidgetComponent));
    MultilineTextWidgetComponentComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'multiline-text-widget',
                    template: "<div class=\"adf-multiline-text-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n    <mat-form-field floatPlaceholder=\"never\">\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n        <textarea matInput class=\"adf-input\"\n                  [matTextareaAutosize]=\"true\"\n                  type=\"text\"\n                  rows=\"3\"\n                  [id]=\"field.id\"\n                  [required]=\"isRequired()\"\n                  [(ngModel)]=\"field.value\"\n                  (ngModelChange)=\"onFieldChanged(field)\"\n                  [disabled]=\"field.readOnly || readOnly\"\n                  [placeholder]=\"field.placeholder\"\n                  [matTooltip]=\"field.tooltip\"\n                  matTooltipPosition=\"above\"\n                  matTooltipShowDelay=\"1000\">\n        </textarea>\n    </mat-form-field>\n    <div *ngIf=\"field.maxLength > 0\" class=\"adf-multiline-word-counter\">\n        <span>{{field?.value?.length || 0}}/{{field.maxLength}}</span>\n    </div>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget class=\"adf-multiline-required-message\" *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-multiline-text-widget{width:100%}.adf-multiline-text-widget .mat-form-field-label-wrapper{top:20px}.adf-multiline-word-counter{float:right;font-size:12px;line-height:14px;margin-top:-20px!important;min-height:24px;min-width:1px;opacity:1;overflow:hidden;padding-left:0;padding-right:2px;padding-top:5px;text-align:right;transition:all .3s cubic-bezier(.55,0,.55,.2)}.adf-multiline-required-message{display:flex}"]
                },] }
    ];
    MultilineTextWidgetComponentComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    var NumberWidgetComponent = /** @class */ (function (_super) {
        __extends(NumberWidgetComponent, _super);
        function NumberWidgetComponent(formService, decimalNumberPipe) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.decimalNumberPipe = decimalNumberPipe;
            return _this;
        }
        NumberWidgetComponent.prototype.ngOnInit = function () {
            if (this.field.readOnly) {
                this.displayValue = this.decimalNumberPipe.transform(this.field.value);
            }
            else {
                this.displayValue = this.field.value;
            }
        };
        return NumberWidgetComponent;
    }(WidgetComponent));
    NumberWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'number-widget',
                    template: "<div class=\"adf-textfield adf-number-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n    <mat-form-field>\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n        <input matInput\n               class=\"adf-input\"\n               type=\"text\"\n               pattern=\"-?[0-9]*(\\.[0-9]+)?\"\n               [id]=\"field.id\"\n               [required]=\"isRequired()\"\n               [value]=\"displayValue\"\n               [(ngModel)]=\"field.value\"\n               (ngModelChange)=\"onFieldChanged(field)\"\n               [disabled]=\"field.readOnly\"\n               [placeholder]=\"field.placeholder\"\n               [matTooltip]=\"field.tooltip\"\n               matTooltipPosition=\"above\"\n               matTooltipShowDelay=\"1000\">\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\" ></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-number-widget{width:100%}.adf-number-widget .mat-form-field-label-wrapper{top:20px}"]
                },] }
    ];
    NumberWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: DecimalNumberPipe }
    ]; };

    var PeopleProcessService = /** @class */ (function () {
        function PeopleProcessService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(PeopleProcessService.prototype, "taskActionsApi", {
            get: function () {
                var _a;
                this._taskActionsApi = (_a = this._taskActionsApi) !== null && _a !== void 0 ? _a : new jsApi.TaskActionsApi(this.apiService.getInstance());
                return this._taskActionsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(PeopleProcessService.prototype, "userApi", {
            get: function () {
                var _a;
                this._userApi = (_a = this._userApi) !== null && _a !== void 0 ? _a : new jsApi.UsersApi(this.apiService.getInstance());
                return this._userApi;
            },
            enumerable: false,
            configurable: true
        });
        PeopleProcessService.prototype.getWorkflowUsers = function (taskId, searchWord) {
            var _this = this;
            var option = { excludeTaskId: taskId, filter: searchWord };
            return rxjs.from(this.getWorkflowUserApi(option))
                .pipe(operators.map(function (response) { return response.data || []; }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        PeopleProcessService.prototype.getUserImage = function (user) {
            return this.getUserProfileImageApi(user.id.toString());
        };
        PeopleProcessService.prototype.involveUserWithTask = function (taskId, idToInvolve) {
            var _this = this;
            var node = { userId: idToInvolve };
            return rxjs.from(this.involveUserToTaskApi(taskId, node))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        PeopleProcessService.prototype.removeInvolvedUser = function (taskId, idToRemove) {
            var _this = this;
            var node = { userId: idToRemove };
            return rxjs.from(this.removeInvolvedUserFromTaskApi(taskId, node))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        PeopleProcessService.prototype.getWorkflowUserApi = function (options) {
            return this.userApi.getUsers(options);
        };
        PeopleProcessService.prototype.involveUserToTaskApi = function (taskId, node) {
            return this.taskActionsApi.involveUser(taskId, node);
        };
        PeopleProcessService.prototype.removeInvolvedUserFromTaskApi = function (taskId, node) {
            return this.taskActionsApi.removeInvolvedUser(taskId, node);
        };
        PeopleProcessService.prototype.getUserProfileImageApi = function (userId) {
            return this.userApi.getUserProfilePictureUrl(userId);
        };
        PeopleProcessService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return PeopleProcessService;
    }());
    PeopleProcessService.ɵprov = i0.ɵɵdefineInjectable({ factory: function PeopleProcessService_Factory() { return new PeopleProcessService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: PeopleProcessService, providedIn: "root" });
    PeopleProcessService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    PeopleProcessService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var PeopleWidgetComponent = /** @class */ (function (_super) {
        __extends(PeopleWidgetComponent, _super);
        function PeopleWidgetComponent(formService, peopleProcessService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.peopleProcessService = peopleProcessService;
            _this.peopleSelected = new i0.EventEmitter();
            _this.searchTerm = new forms.FormControl();
            _this.searchTerms$ = _this.searchTerm.valueChanges;
            _this.users$ = _this.searchTerms$.pipe(operators.tap(function (searchInput) {
                if (typeof searchInput === 'string') {
                    _this.onItemSelect();
                }
            }), operators.distinctUntilChanged(), operators.switchMap(function (searchTerm) {
                var value = searchTerm.email ? _this.getDisplayName(searchTerm) : searchTerm;
                return _this.formService.getWorkflowUsers(value, _this.groupId)
                    .pipe(operators.catchError(function () { return rxjs.of([]); }));
            }), operators.map(function (list) {
                var value = _this.searchTerm.value.email ? _this.getDisplayName(_this.searchTerm.value) : _this.searchTerm.value;
                _this.checkUserAndValidateForm(list, value);
                return list;
            }));
            return _this;
        }
        PeopleWidgetComponent.prototype.ngOnInit = function () {
            if (this.field) {
                if (this.field.value) {
                    this.searchTerm.setValue(this.field.value);
                }
                if (this.field.readOnly) {
                    this.searchTerm.disable();
                }
                var params = this.field.params;
                if (params && params.restrictWithGroup) {
                    var restrictWithGroup = params.restrictWithGroup;
                    this.groupId = restrictWithGroup.id;
                }
            }
        };
        PeopleWidgetComponent.prototype.checkUserAndValidateForm = function (list, value) {
            var isValidUser = this.isValidUser(list, value);
            if (isValidUser || value === '') {
                this.field.validationSummary.message = '';
                this.field.validate();
                this.field.form.validateForm();
            }
            else {
                this.field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_VALUE';
                this.field.markAsInvalid();
                this.field.form.markAsInvalid();
            }
        };
        PeopleWidgetComponent.prototype.isValidUser = function (users, name) {
            var _this = this;
            if (users) {
                return !!users.find(function (user) {
                    var selectedUser = _this.getDisplayName(user).toLocaleLowerCase() === name.toLocaleLowerCase();
                    if (selectedUser) {
                        _this.peopleSelected.emit(user && user.id || undefined);
                    }
                    return selectedUser;
                });
            }
            return false;
        };
        PeopleWidgetComponent.prototype.getDisplayName = function (model) {
            if (model) {
                var displayName = (model.firstName || '') + " " + (model.lastName || '');
                return displayName.trim();
            }
            return '';
        };
        PeopleWidgetComponent.prototype.onItemSelect = function (item) {
            if (item) {
                this.field.value = item;
            }
            else {
                this.field.value = null;
            }
        };
        return PeopleWidgetComponent;
    }(WidgetComponent));
    PeopleWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'people-widget',
                    template: "<div class=\"adf-people-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\"\n     [class.adf-readonly]=\"field.readOnly\"\n     id=\"people-widget-content\">\n    <mat-form-field>\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n        <input #inputValue\n               matInput\n               class=\"adf-input\"\n               data-automation-id=\"adf-people-search-input\"\n               type=\"text\"\n               [id]=\"field.id\"\n               [formControl]=\"searchTerm\"\n               [placeholder]=\"field.placeholder\"\n               [matAutocomplete]=\"auto\"\n               [matTooltip]=\"field.tooltip\"\n               matTooltipPosition=\"above\"\n               matTooltipShowDelay=\"1000\">\n        <mat-autocomplete class=\"adf-people-widget-list\"\n                          #auto=\"matAutocomplete\"\n                          (optionSelected)=\"onItemSelect($event.option.value)\"\n                          [displayWith]=\"getDisplayName\">\n            <mat-option *ngFor=\"let user of users$ | async; let i = index\" [value]=\"user\">\n                <div class=\"adf-people-widget-row\" id=\"adf-people-widget-user-{{i}}\">\n                    <div [outerHTML]=\"user | usernameInitials:'adf-people-widget-pic'\"></div>\n                    <div *ngIf=\"user.pictureId\" class=\"adf-people-widget-image-row\">\n                        <img id=\"adf-people-widget-pic-{{i}}\" class=\"adf-people-widget-image\"\n                             [alt]=\"getDisplayName(user)\" [src]=\"peopleProcessService.getUserImage(user)\"/>\n                    </div>\n                    <span class=\"adf-people-label-name\">{{getDisplayName(user)}}</span>\n                </div>\n            </mat-option>\n        </mat-autocomplete>\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-people-widget{width:100%}.adf-people-widget .mat-form-field-label-wrapper{top:10px}.adf-people-widget-list{margin:5px 0;padding:10px 0}.adf-people-widget-row{align-items:center;display:flex}.adf-people-widget-pic{align-items:center;background:var(--theme-primary-color);border-radius:100px;color:var(--theme-text-fg-color);display:flex;font-size:18px;font-weight:bolder;height:40px;justify-content:center;text-transform:uppercase;width:40px}.adf-people-widget-image{background:var(--theme-dialog-bg-color);border-radius:100px;display:inline-block;height:40px;left:21px;margin-left:-44px;padding:0;vertical-align:middle;width:40px}.adf-people-widget-image-row{display:inline-block}.adf-people-label-name{padding-left:10px}"]
                },] }
    ];
    PeopleWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: PeopleProcessService }
    ]; };
    PeopleWidgetComponent.propDecorators = {
        input: [{ type: i0.ViewChild, args: ['inputValue', { static: true },] }],
        peopleSelected: [{ type: i0.Output }]
    };

    var RadioButtonsWidgetComponent = /** @class */ (function (_super) {
        __extends(RadioButtonsWidgetComponent, _super);
        function RadioButtonsWidgetComponent(formService, logService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.logService = logService;
            return _this;
        }
        RadioButtonsWidgetComponent.prototype.ngOnInit = function () {
            if (this.field && this.field.restUrl) {
                if (this.field.form.taskId) {
                    this.getOptionsByTaskId();
                }
                else {
                    this.getOptionsByProcessDefinitionId();
                }
            }
        };
        RadioButtonsWidgetComponent.prototype.getOptionsByTaskId = function () {
            var _this = this;
            this.formService
                .getRestFieldValues(this.field.form.taskId, this.field.id)
                .subscribe(function (formFieldOption) {
                _this.field.options = formFieldOption || [];
                _this.field.updateForm();
            }, function (err) { return _this.handleError(err); });
        };
        RadioButtonsWidgetComponent.prototype.getOptionsByProcessDefinitionId = function () {
            var _this = this;
            this.formService
                .getRestFieldValuesByProcessId(this.field.form.processDefinitionId, this.field.id)
                .subscribe(function (formFieldOption) {
                _this.field.options = formFieldOption || [];
                _this.field.updateForm();
            }, function (err) { return _this.handleError(err); });
        };
        RadioButtonsWidgetComponent.prototype.onOptionClick = function (optionSelected) {
            this.field.value = optionSelected;
            this.fieldChanged.emit(this.field);
        };
        RadioButtonsWidgetComponent.prototype.handleError = function (error) {
            this.logService.error(error);
        };
        return RadioButtonsWidgetComponent;
    }(WidgetComponent));
    RadioButtonsWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'radio-buttons-widget',
                    template: "<div class=\"adf-radio-buttons-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\" [id]=\"field.id\">\n    <div class=\"adf-radio-button-container\">\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n        <mat-radio-group class=\"adf-radio-group\" [(ngModel)]=\"field.value\" [disabled]=\"field.readOnly\">\n            <mat-radio-button\n                [matTooltip]=\"field.tooltip\"\n                matTooltipPosition=\"above\"\n                matTooltipShowDelay=\"1000\"\n                [id]=\"field.id + '-' + opt.id\"\n                [name]=\"field.id\"\n                [value]=\"opt.id\"\n                [checked]=\"field.value === opt.id\"\n                (change)=\"onOptionClick(opt.id)\"\n                color=\"primary\"\n                class=\"adf-radio-button\" *ngFor=\"let opt of field.options\" >\n                {{opt.name}}\n            </mat-radio-button>\n        </mat-radio-group>\n    </div>\n    <error-widget [error]=\"field.validationSummary\" ></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-radio-button-container{display:flex;flex-direction:column;margin-bottom:15px}.adf-radio-group{display:inline-flex;flex-direction:column;margin-left:5px;margin-top:15px}.adf-radio-button{margin:5px}"]
                },] }
    ];
    RadioButtonsWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: LogService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR = {
        provide: forms.NG_VALUE_ACCESSOR,
        useExisting: i0.forwardRef(function () { return InputMaskDirective; }),
        multi: true
    };
    var InputMaskDirective = /** @class */ (function () {
        function InputMaskDirective(el, render) {
            this.el = el;
            this.render = render;
            this.translationMask = {
                '0': { pattern: /\d/ },
                '9': { pattern: /\d/, optional: true },
                '#': { pattern: /\d/, recursive: true },
                'A': { pattern: /[a-zA-Z0-9]/ },
                'S': { pattern: /[a-zA-Z]/ }
            };
            this.byPassKeys = [9, 16, 17, 18, 36, 37, 38, 39, 40, 91];
            this.invalidCharacters = [];
            this._onChange = function (_) {
            };
            this._onTouched = function () {
            };
        }
        InputMaskDirective.prototype.onTextInput = function (event) {
            if (this.inputMask && this.inputMask.mask) {
                this.maskValue(this.el.nativeElement.value, this.el.nativeElement.selectionStart, this.inputMask.mask, this.inputMask.isReversed, event.keyCode);
            }
            else {
                this._onChange(this.el.nativeElement.value);
            }
        };
        InputMaskDirective.prototype.ngOnChanges = function (changes) {
            if (changes['inputMask'] && changes['inputMask'].currentValue['mask']) {
                this.inputMask = changes['inputMask'].currentValue;
            }
        };
        InputMaskDirective.prototype.writeValue = function (value) {
            this.el.nativeElement.value = value;
        };
        InputMaskDirective.prototype.registerOnChange = function (fn) {
            this._onChange = fn;
        };
        InputMaskDirective.prototype.registerOnTouched = function (fn) {
            this._onTouched = fn;
        };
        InputMaskDirective.prototype.maskValue = function (actualValue, startCaret, maskToApply, isMaskReversed, keyCode) {
            if (this.byPassKeys.indexOf(keyCode) === -1) {
                var value = this.getMasked(false, actualValue, maskToApply, isMaskReversed);
                var calculatedCaret = this.calculateCaretPosition(startCaret, actualValue, keyCode);
                this.render.setAttribute(this.el.nativeElement, 'value', value);
                this.el.nativeElement.value = value;
                this.setValue(value);
                this._onChange(value);
                this.setCaretPosition(calculatedCaret);
            }
        };
        InputMaskDirective.prototype.setCaretPosition = function (caretPosition) {
            this.el.nativeElement.moveStart = caretPosition;
            this.el.nativeElement.moveEnd = caretPosition;
        };
        InputMaskDirective.prototype.calculateCaretPosition = function (caretPosition, newValue, keyCode) {
            var newValueLength = newValue.length;
            var oldValue = this.getValue() || '';
            var oldValueLength = oldValue.length;
            if (keyCode === 8 && oldValue !== newValue) {
                caretPosition = caretPosition - (newValue.slice(0, caretPosition).length - oldValue.slice(0, caretPosition).length);
            }
            else if (oldValue !== newValue) {
                if (caretPosition >= oldValueLength) {
                    caretPosition = newValueLength;
                }
                else {
                    caretPosition = caretPosition + (newValue.slice(0, caretPosition).length - oldValue.slice(0, caretPosition).length);
                }
            }
            return caretPosition;
        };
        InputMaskDirective.prototype.getMasked = function (skipMaskChars, val, mask, isReversed) {
            if (isReversed === void 0) { isReversed = false; }
            var buf = [];
            var value = val;
            var maskIndex = 0;
            var maskLen = mask.length;
            var valueIndex = 0;
            var valueLength = value.length;
            var offset = 1;
            var addMethod = 'push';
            var resetPos = -1;
            var lastMaskChar;
            var lastUntranslatedMaskChar;
            var check;
            if (isReversed) {
                addMethod = 'unshift';
                offset = -1;
                lastMaskChar = 0;
                maskIndex = maskLen - 1;
                valueIndex = valueLength - 1;
            }
            else {
                lastMaskChar = maskLen - 1;
            }
            check = this.isToCheck(isReversed, maskIndex, maskLen, valueIndex, valueLength);
            while (check) {
                var maskDigit = mask.charAt(maskIndex), valDigit = value.charAt(valueIndex), translation = this.translationMask[maskDigit];
                if (translation) {
                    if (valDigit.match(translation.pattern)) {
                        buf[addMethod](valDigit);
                        if (translation.recursive) {
                            if (resetPos === -1) {
                                resetPos = maskIndex;
                            }
                            else if (maskIndex === lastMaskChar) {
                                maskIndex = resetPos - offset;
                            }
                            if (lastMaskChar === resetPos) {
                                maskIndex -= offset;
                            }
                        }
                        maskIndex += offset;
                    }
                    else if (valDigit === lastUntranslatedMaskChar) {
                        lastUntranslatedMaskChar = undefined;
                    }
                    else if (translation.optional) {
                        maskIndex += offset;
                        valueIndex -= offset;
                    }
                    else {
                        this.invalidCharacters.push({
                            index: valueIndex,
                            digit: valDigit,
                            translated: translation.pattern
                        });
                    }
                    valueIndex += offset;
                }
                else {
                    if (!skipMaskChars) {
                        buf[addMethod](maskDigit);
                    }
                    if (valDigit === maskDigit) {
                        valueIndex += offset;
                    }
                    else {
                        lastUntranslatedMaskChar = maskDigit;
                    }
                    maskIndex += offset;
                }
                check = this.isToCheck(isReversed, maskIndex, maskLen, valueIndex, valueLength);
            }
            var lastMaskCharDigit = mask.charAt(lastMaskChar);
            if (maskLen === valueLength + 1 && !this.translationMask[lastMaskCharDigit]) {
                buf.push(lastMaskCharDigit);
            }
            return buf.join('');
        };
        InputMaskDirective.prototype.isToCheck = function (isReversed, maskIndex, maskLen, valueIndex, valueLength) {
            var check = false;
            if (isReversed) {
                check = (maskIndex > -1) && (valueIndex > -1);
            }
            else {
                check = (maskIndex < maskLen) && (valueIndex < valueLength);
            }
            return check;
        };
        InputMaskDirective.prototype.setValue = function (value) {
            this.value = value;
        };
        InputMaskDirective.prototype.getValue = function () {
            return this.value;
        };
        return InputMaskDirective;
    }());
    InputMaskDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: '[adf-text-mask], [textMask]',
                    providers: [CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR]
                },] }
    ];
    InputMaskDirective.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.Renderer2 }
    ]; };
    InputMaskDirective.propDecorators = {
        inputMask: [{ type: i0.Input, args: ['textMask',] }],
        onTextInput: [{ type: i0.HostListener, args: ['input', ['$event'],] }, { type: i0.HostListener, args: ['keyup', ['$event'],] }]
    };

    var TextWidgetComponent = /** @class */ (function (_super) {
        __extends(TextWidgetComponent, _super);
        function TextWidgetComponent(formService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            return _this;
        }
        TextWidgetComponent.prototype.ngOnInit = function () {
            if (this.field.params) {
                this.mask = this.field.params['inputMask'];
                this.placeholder = this.field.params['inputMask'] && this.field.params['inputMaskPlaceholder'] ? this.field.params['inputMaskPlaceholder'] : this.field.placeholder;
                this.isMaskReversed = this.field.params['inputMaskReversed'] ? this.field.params['inputMaskReversed'] : false;
            }
        };
        return TextWidgetComponent;
    }(WidgetComponent));
    TextWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'text-widget',
                    template: "<div class=\"adf-textfield adf-text-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n    <mat-form-field>\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n        <input matInput\n               class=\"adf-input\"\n               type=\"text\"\n               [id]=\"field.id\"\n               [required]=\"isRequired()\"\n               [value]=\"field.value\"\n               [(ngModel)]=\"field.value\"\n               (ngModelChange)=\"onFieldChanged(field)\"\n               [disabled]=\"field.readOnly || readOnly\"\n               [textMask]=\"{mask: mask, isReversed: isMaskReversed}\"\n               [placeholder]=\"placeholder\"\n               [matTooltip]=\"field.tooltip\"\n                matTooltipPosition=\"above\"\n                matTooltipShowDelay=\"1000\">\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-text-widget{width:100%}.adf-text-widget .mat-form-field-label-wrapper{top:20px}"]
                },] }
    ];
    TextWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    var TypeaheadWidgetComponent = /** @class */ (function (_super) {
        __extends(TypeaheadWidgetComponent, _super);
        function TypeaheadWidgetComponent(formService, logService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.logService = logService;
            _this.minTermLength = 1;
            _this.options = [];
            return _this;
        }
        TypeaheadWidgetComponent.prototype.ngOnInit = function () {
            if (this.field.form.taskId && this.field.restUrl) {
                this.getValuesByTaskId();
            }
            else if (this.field.form.processDefinitionId && this.field.restUrl) {
                this.getValuesByProcessDefinitionId();
            }
            if (this.isReadOnlyType()) {
                this.value = this.field.value;
            }
        };
        TypeaheadWidgetComponent.prototype.getValuesByTaskId = function () {
            var _this = this;
            this.formService
                .getRestFieldValues(this.field.form.taskId, this.field.id)
                .subscribe(function (formFieldOption) {
                var options = formFieldOption || [];
                _this.field.options = options;
                var fieldValue = _this.field.value;
                if (fieldValue) {
                    var toSelect = options.find(function (item) { return item.id === fieldValue || item.name.toLocaleLowerCase() === fieldValue.toLocaleLowerCase(); });
                    if (toSelect) {
                        _this.value = toSelect.name;
                    }
                }
                _this.onFieldChanged(_this.field);
                _this.field.updateForm();
            }, function (err) { return _this.handleError(err); });
        };
        TypeaheadWidgetComponent.prototype.getValuesByProcessDefinitionId = function () {
            var _this = this;
            this.formService
                .getRestFieldValuesByProcessId(this.field.form.processDefinitionId, this.field.id)
                .subscribe(function (formFieldOption) {
                var options = formFieldOption || [];
                _this.field.options = options;
                var fieldValue = _this.field.value;
                if (fieldValue) {
                    var toSelect = options.find(function (item) { return item.id === fieldValue; });
                    if (toSelect) {
                        _this.value = toSelect.name;
                    }
                }
                _this.onFieldChanged(_this.field);
                _this.field.updateForm();
            }, function (err) { return _this.handleError(err); });
        };
        TypeaheadWidgetComponent.prototype.getOptions = function () {
            var val = this.value.trim().toLocaleLowerCase();
            return this.field.options.filter(function (item) {
                var name = item.name.toLocaleLowerCase();
                return name.indexOf(val) > -1;
            });
        };
        TypeaheadWidgetComponent.prototype.isValidOptionName = function (optionName) {
            var option = this.field.options.find(function (item) { return item.name && item.name.toLocaleLowerCase() === optionName.toLocaleLowerCase(); });
            return option ? true : false;
        };
        TypeaheadWidgetComponent.prototype.onKeyUp = function (event) {
            if (this.value && this.value.trim().length >= this.minTermLength && this.oldValue !== this.value) {
                if (event.keyCode !== keycodes.ESCAPE && event.keyCode !== keycodes.ENTER) {
                    if (this.value.length >= this.minTermLength) {
                        this.options = this.getOptions();
                        this.oldValue = this.value;
                        if (this.isValidOptionName(this.value)) {
                            this.field.value = this.options[0].id;
                        }
                    }
                }
            }
            if (this.isValueDefined() && this.value.trim().length === 0) {
                this.oldValue = this.value;
                this.options = [];
            }
        };
        TypeaheadWidgetComponent.prototype.onItemSelect = function (item) {
            if (item) {
                this.field.value = item.id;
                this.value = item.name;
                this.onFieldChanged(this.field);
            }
        };
        TypeaheadWidgetComponent.prototype.validate = function () {
            this.field.value = this.value;
        };
        TypeaheadWidgetComponent.prototype.isValueDefined = function () {
            return this.value !== null && this.value !== undefined;
        };
        TypeaheadWidgetComponent.prototype.handleError = function (error) {
            this.logService.error(error);
        };
        TypeaheadWidgetComponent.prototype.isReadOnlyType = function () {
            return this.field.type === 'readonly' ? true : false;
        };
        return TypeaheadWidgetComponent;
    }(WidgetComponent));
    TypeaheadWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'typeahead-widget',
                    template: "<div class=\"adf-typeahead-widget-container\">\n    <div class=\"adf-typeahead-widget {{field.className}}\"\n        [class.is-dirty]=\"value\"\n        [class.adf-invalid]=\"!field.isValid\"\n        [class.adf-readonly]=\"field.readOnly\"\n        id=\"typehead-div\">\n        <mat-form-field>\n            <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}</label>\n            <input matInput class=\"adf-input\"\n                   type=\"text\"\n                   [id]=\"field.id\"\n                   [(ngModel)]=\"value\"\n                   (ngModelChange)=\"validate()\"\n                   (keyup)=\"onKeyUp($event)\"\n                   [disabled]=\"field.readOnly\"\n                   data-automation-id=\"adf-typeahed-search-input\"\n                   placeholder=\"{{field.placeholder}}\"\n                   [matAutocomplete]=\"auto\">\n            <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"onItemSelect($event.option.value)\">\n                <mat-option *ngFor=\"let item of options; let i = index\" id=\"adf-typeahed-widget-user-{{i}}\" [value]=\"item\">\n                    <span id=\"adf-typeahed-label-name\">{{item.name}}</span>\n                </mat-option>\n            </mat-autocomplete>\n        </mat-form-field>\n\n        <error-widget [error]=\"field.validationSummary\"></error-widget>\n        <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n    </div>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-typeahead-widget-container{display:block;position:relative}.adf-typeahead-widget{width:100%}"]
                },] }
    ];
    TypeaheadWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: LogService }
    ]; };

    var ProcessContentService = /** @class */ (function () {
        function ProcessContentService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(ProcessContentService.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ActivitiContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        ProcessContentService.prototype.createTemporaryRawRelatedContent = function (file) {
            var _this = this;
            return rxjs.from(this.contentApi.createTemporaryRawRelatedContent(file))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.getFileContent = function (contentId) {
            var _this = this;
            return rxjs.from(this.contentApi.getContent(contentId))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.getFileRawContent = function (contentId) {
            var _this = this;
            return rxjs.from(this.contentApi.getRawContent(contentId))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.getContentPreview = function (contentId) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.contentApi.getRawContent(contentId).then(function (result) {
                    observer.next(result);
                    observer.complete();
                }, function () {
                    _this.contentApi.getRawContent(contentId).then(function (data) {
                        observer.next(data);
                        observer.complete();
                    }, function (err) {
                        observer.error(err);
                        observer.complete();
                    });
                });
            });
        };
        ProcessContentService.prototype.getFileRawContentUrl = function (contentId) {
            return this.contentApi.getRawContentUrl(contentId);
        };
        ProcessContentService.prototype.getContentThumbnail = function (contentId) {
            var _this = this;
            return rxjs.from(this.contentApi.getRawContent(contentId, 'thumbnail'))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.getTaskRelatedContent = function (taskId, opts) {
            var _this = this;
            return rxjs.from(this.contentApi.getRelatedContentForTask(taskId, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.getProcessRelatedContent = function (processId, opts) {
            var _this = this;
            return rxjs.from(this.contentApi.getRelatedContentForProcessInstance(processId, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.deleteRelatedContent = function (contentId) {
            var _this = this;
            return rxjs.from(this.contentApi.deleteContent(contentId))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.createProcessRelatedContent = function (processInstanceId, content, opts) {
            var _this = this;
            return rxjs.from(this.contentApi.createRelatedContentOnProcessInstance(processInstanceId, content, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.createTaskRelatedContent = function (taskId, file, opts) {
            var _this = this;
            return rxjs.from(this.contentApi.createRelatedContentOnTask(taskId, file, opts))
                .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ProcessContentService.prototype.toJson = function (res) {
            if (res) {
                return res || {};
            }
            return {};
        };
        ProcessContentService.prototype.toJsonArray = function (res) {
            if (res) {
                return res.data || [];
            }
            return [];
        };
        ProcessContentService.prototype.handleError = function (error) {
            var errMsg = ProcessContentService.UNKNOWN_ERROR_MESSAGE;
            if (error) {
                errMsg = (error.message) ? error.message :
                    error.status ? error.status + " - " + error.statusText : ProcessContentService.GENERIC_ERROR_MESSAGE;
            }
            this.logService.error(errMsg);
            return rxjs.throwError(errMsg);
        };
        return ProcessContentService;
    }());
    ProcessContentService.UNKNOWN_ERROR_MESSAGE = 'Unknown error';
    ProcessContentService.GENERIC_ERROR_MESSAGE = 'Server error';
    ProcessContentService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ProcessContentService_Factory() { return new ProcessContentService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: ProcessContentService, providedIn: "root" });
    ProcessContentService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    ProcessContentService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var UploadWidgetComponent = /** @class */ (function (_super) {
        __extends(UploadWidgetComponent, _super);
        function UploadWidgetComponent(formService, logService, thumbnailService, processContentService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.logService = logService;
            _this.thumbnailService = thumbnailService;
            _this.processContentService = processContentService;
            _this.multipleOption = '';
            return _this;
        }
        UploadWidgetComponent.prototype.ngOnInit = function () {
            if (this.field &&
                this.field.value &&
                this.field.value.length > 0) {
                this.hasFile = true;
            }
            this.getMultipleFileParam();
        };
        UploadWidgetComponent.prototype.removeFile = function (file) {
            if (this.field) {
                this.removeElementFromList(file);
            }
        };
        UploadWidgetComponent.prototype.onFileChanged = function (event) {
            var _this = this;
            var files = event.target.files;
            var filesSaved = [];
            if (this.field.json.value) {
                filesSaved = __spread(this.field.json.value);
            }
            if (files && files.length > 0) {
                rxjs.from(files)
                    .pipe(operators.mergeMap(function (file) { return _this.uploadRawContent(file); }))
                    .subscribe(function (res) { return filesSaved.push(res); }, function () { return _this.logService.error('Error uploading file. See console output for more details.'); }, function () {
                    _this.field.value = filesSaved;
                    _this.field.json.value = filesSaved;
                    _this.hasFile = true;
                });
            }
        };
        UploadWidgetComponent.prototype.uploadRawContent = function (file) {
            var _this = this;
            return this.processContentService.createTemporaryRawRelatedContent(file)
                .pipe(operators.map(function (response) {
                _this.logService.info(response);
                response.contentBlob = file;
                return response;
            }));
        };
        UploadWidgetComponent.prototype.getMultipleFileParam = function () {
            if (this.field &&
                this.field.params &&
                this.field.params.multiple) {
                this.multipleOption = this.field.params.multiple ? 'multiple' : '';
            }
        };
        UploadWidgetComponent.prototype.removeElementFromList = function (file) {
            var index = this.field.value.indexOf(file);
            if (index !== -1) {
                this.field.value.splice(index, 1);
                this.field.json.value = this.field.value;
                this.field.updateForm();
            }
            this.hasFile = this.field.value.length > 0;
            if (!this.hasFile) {
                this.field.value = null;
                this.field.json.value = null;
            }
        };
        UploadWidgetComponent.prototype.getIcon = function (mimeType) {
            return this.thumbnailService.getMimeTypeIcon(mimeType);
        };
        UploadWidgetComponent.prototype.fileClicked = function (contentLinkModel) {
            var _this = this;
            var file = new ContentLinkModel(contentLinkModel);
            var fetch = this.processContentService.getContentPreview(file.id);
            if (file.isTypeImage() || file.isTypePdf()) {
                fetch = this.processContentService.getFileRawContent(file.id);
            }
            fetch.subscribe(function (blob) {
                file.contentBlob = blob;
                _this.formService.formContentClicked.next(file);
            }, function () {
                _this.logService.error('Unable to send event for file ' + file.name);
            });
        };
        return UploadWidgetComponent;
    }(WidgetComponent));
    UploadWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'upload-widget',
                    template: "<div class=\"adf-upload-widget {{field.className}}\"\n     [class.adf-invalid]=\"!field.isValid\"\n     [class.adf-readonly]=\"field.readOnly\">\n    <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n    <div class=\"adf-upload-widget-container\">\n        <div>\n            <mat-list *ngIf=\"hasFile\">\n                <mat-list-item class=\"adf-upload-files-row\" *ngFor=\"let file of field.value\">\n                    <img mat-list-icon class=\"adf-upload-widget__icon\"\n                         [id]=\"'file-'+file.id+'-icon'\"\n                         [src]=\"getIcon(file.mimeType)\"\n                         [alt]=\"mimeTypeIcon\"\n                         (click)=\"fileClicked(file)\"\n                         (keyup.enter)=\"fileClicked(file)\"\n                         role=\"button\"\n                         tabindex=\"0\"/>\n                    <span matLine id=\"{{'file-'+file.id}}\" (click)=\"fileClicked(file)\" (keyup.enter)=\"fileClicked(file)\"\n                          role=\"button\" tabindex=\"0\" class=\"adf-file\">{{file.name}}</span>\n                    <button *ngIf=\"!field.readOnly\" mat-icon-button [id]=\"'file-'+file.id+'-remove'\"\n                            (click)=\"removeFile(file);\" (keyup.enter)=\"removeFile(file);\">\n                        <mat-icon class=\"mat-24\">highlight_off</mat-icon>\n                    </button>\n                </mat-list-item>\n            </mat-list>\n        </div>\n\n        <div *ngIf=\"(!hasFile || multipleOption) && !field.readOnly\">\n            <button mat-raised-button color=\"primary\" (click)=\"uploadFiles.click()\">\n                {{ 'FORM.FIELD.UPLOAD' | translate }}<mat-icon>file_upload</mat-icon>\n                <input #uploadFiles\n                       [multiple]=\"multipleOption\"\n                       type=\"file\"\n                       [id]=\"field.id\"\n                       (change)=\"onFileChanged($event)\"/>\n            </button>\n        </div>\n    </div>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-upload-widget-container{margin-bottom:15px}.adf-upload-widget-container input{display:none}.adf-upload-widget{border-top:.84375em solid transparent;padding:.4375em 0;width:100%;word-break:break-all}.adf-upload-widget__icon{cursor:pointer;float:left;padding:6px}.adf-upload-widget__reset{margin-top:-2px}.adf-upload-files-row .mat-line{margin-bottom:0}"]
                },] }
    ];
    UploadWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: LogService },
        { type: ThumbnailService },
        { type: ProcessContentService }
    ]; };
    UploadWidgetComponent.propDecorators = {
        fileInput: [{ type: i0.ViewChild, args: ['uploadFiles',] }]
    };

    var ɵ0$5 = MOMENT_DATE_FORMATS, ɵ1$3 = moment$2.MAT_MOMENT_DATETIME_FORMATS;
    var DateTimeWidgetComponent = /** @class */ (function (_super) {
        __extends(DateTimeWidgetComponent, _super);
        function DateTimeWidgetComponent(formService, dateAdapter, userPreferencesService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.dateAdapter = dateAdapter;
            _this.userPreferencesService = userPreferencesService;
            _this.onDestroy$ = new rxjs.Subject();
            return _this;
        }
        DateTimeWidgetComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select(exports.UserPreferenceValues.Locale)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (locale) { return _this.dateAdapter.setLocale(locale); });
            var momentDateAdapter = this.dateAdapter;
            momentDateAdapter.overrideDisplayFormat = this.field.dateDisplayFormat;
            if (this.field) {
                if (this.field.minValue) {
                    this.minDate = moment$1(this.field.minValue, 'YYYY-MM-DDTHH:mm:ssZ');
                }
                if (this.field.maxValue) {
                    this.maxDate = moment$1(this.field.maxValue, 'YYYY-MM-DDTHH:mm:ssZ');
                }
            }
        };
        DateTimeWidgetComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        DateTimeWidgetComponent.prototype.onDateChanged = function (newDateValue) {
            var date = moment$1(newDateValue, this.field.dateDisplayFormat, true);
            if (date.isValid()) {
                this.field.value = date.format(this.field.dateDisplayFormat);
            }
            else {
                this.field.value = newDateValue;
            }
            this.onFieldChanged(this.field);
        };
        return DateTimeWidgetComponent;
    }(WidgetComponent));
    DateTimeWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    providers: [
                        { provide: core.DateAdapter, useClass: MomentDateAdapter },
                        { provide: core.MAT_DATE_FORMATS, useValue: ɵ0$5 },
                        { provide: core$1.DatetimeAdapter, useClass: moment$2.MomentDatetimeAdapter },
                        { provide: core$1.MAT_DATETIME_FORMATS, useValue: ɵ1$3 }
                    ],
                    selector: 'date-time-widget',
                    template: "<div class=\"{{field.className}}\" id=\"data-time-widget\" [class.adf-invalid]=\"!field.isValid\">\n    <mat-form-field class=\"adf-date-time-widget\">\n        <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }} ({{field.dateDisplayFormat}})<span *ngIf=\"isRequired()\">*</span></label>\n        <input matInput\n               [id]=\"field.id\"\n               [value]=\"field.value\"\n               [required]=\"isRequired()\"\n               [disabled]=\"field.readOnly\"\n               (change)=\"onDateChanged($any($event).srcElement.value)\"\n               [placeholder]=\"field.placeholder\"\n               [matTooltip]=\"field.tooltip\"\n               matTooltipPosition=\"above\"\n               matTooltipShowDelay=\"1000\"\n               (focus)=\"datetimePicker.open()\">\n        <mat-datetimepicker-toggle matSuffix [for]=\"datetimePicker\" [disabled]=\"field.readOnly\"></mat-datetimepicker-toggle>\n    </mat-form-field>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n    <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n    <mat-datetimepicker #datetimePicker type=\"datetime\" [touchUi]=\"true\" [timeInterval]=\"5\" [disabled]=\"field.readOnly\"></mat-datetimepicker>\n        <input\n            type=\"hidden\"\n            [matDatetimepicker]=\"datetimePicker\"\n            [value]=\"field.value | adfMomentDate: field.dateDisplayFormat\"\n            [min]=\"minDate\"\n            [max]=\"maxDate\"\n            [disabled]=\"field.readOnly\"\n            (dateInput)=\"onDateChanged($any($event).targetElement.value)\">\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-date-time-widget .mat-form-field-suffix{top:26px}.adf-date-time-widget .mat-form-field-label-wrapper{top:20px}"]
                },] }
    ];
    DateTimeWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: core.DateAdapter },
        { type: UserPreferencesService }
    ]; };

    var JsonWidgetComponent = /** @class */ (function (_super) {
        __extends(JsonWidgetComponent, _super);
        function JsonWidgetComponent(formService, dialog) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.dialog = dialog;
            return _this;
        }
        JsonWidgetComponent.prototype.view = function () {
            var rawValue = this.field.value;
            var value = typeof rawValue === 'object'
                ? JSON.stringify(rawValue || {}, null, 2)
                : rawValue;
            var settings = {
                title: this.field.name,
                editable: false,
                value: value
            };
            this.dialog
                .open(EditJsonDialogComponent, {
                data: settings,
                minWidth: '50%',
                minHeight: '50%'
            });
        };
        return JsonWidgetComponent;
    }(WidgetComponent));
    JsonWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    template: "\n        <button mat-raised-button color=\"primary\" (click)=\"view()\">json</button>\n    ",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    JsonWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: i4.MatDialog }
    ]; };

    var UploadFolderWidgetComponent = /** @class */ (function (_super) {
        __extends(UploadFolderWidgetComponent, _super);
        function UploadFolderWidgetComponent(formService, logService, thumbnailService, processContentService) {
            var _this = _super.call(this, formService) || this;
            _this.formService = formService;
            _this.logService = logService;
            _this.thumbnailService = thumbnailService;
            _this.processContentService = processContentService;
            _this.multipleOption = '';
            return _this;
        }
        UploadFolderWidgetComponent.prototype.ngOnInit = function () {
            if (this.field &&
                this.field.value &&
                this.field.value.length > 0) {
                this.hasFile = true;
            }
            this.getMultipleFileParam();
        };
        UploadFolderWidgetComponent.prototype.removeFile = function (file) {
            if (this.field) {
                this.removeElementFromList(file);
            }
        };
        UploadFolderWidgetComponent.prototype.onFileChanged = function (event) {
            var _this = this;
            var files = event.target.files;
            var filesSaved = [];
            if (this.field.json.value) {
                filesSaved = __spread(this.field.json.value);
            }
            if (files && files.length > 0) {
                rxjs.from(files)
                    .pipe(operators.mergeMap(function (file) { return _this.uploadRawContent(file); }))
                    .subscribe(function (res) {
                    filesSaved.push(res);
                }, function () {
                    _this.logService.error('Error uploading file. See console output for more details.');
                }, function () {
                    _this.field.value = filesSaved;
                    _this.field.json.value = filesSaved;
                });
                this.hasFile = true;
            }
        };
        UploadFolderWidgetComponent.prototype.uploadRawContent = function (file) {
            var _this = this;
            return this.processContentService.createTemporaryRawRelatedContent(file).pipe(operators.map(function (response) {
                _this.logService.info(response);
                return response;
            }));
        };
        UploadFolderWidgetComponent.prototype.getMultipleFileParam = function () {
            if (this.field &&
                this.field.params &&
                this.field.params.multiple) {
                this.multipleOption = this.field.params.multiple ? 'multiple' : '';
            }
        };
        UploadFolderWidgetComponent.prototype.removeElementFromList = function (file) {
            var index = this.field.value.indexOf(file);
            if (index !== -1) {
                this.field.value.splice(index, 1);
                this.field.json.value = this.field.value;
                this.field.updateForm();
            }
            this.hasFile = this.field.value.length > 0;
            this.resetFormValueWithNoFiles();
        };
        UploadFolderWidgetComponent.prototype.resetFormValueWithNoFiles = function () {
            if (this.field.value.length === 0) {
                this.field.value = [];
                this.field.json.value = [];
            }
        };
        UploadFolderWidgetComponent.prototype.getIcon = function (mimeType) {
            return this.thumbnailService.getMimeTypeIcon(mimeType);
        };
        UploadFolderWidgetComponent.prototype.fileClicked = function (contentLinkModel) {
            var _this = this;
            var file = new ContentLinkModel(contentLinkModel);
            var fetch = this.processContentService.getContentPreview(file.id);
            if (file.isTypeImage() || file.isTypePdf()) {
                fetch = this.processContentService.getFileRawContent(file.id);
            }
            fetch.subscribe(function (blob) {
                file.contentBlob = blob;
                _this.formService.formContentClicked.next(file);
            }, function () {
                _this.logService.error('Unable to send event for file ' + file.name);
            });
        };
        return UploadFolderWidgetComponent;
    }(WidgetComponent));
    UploadFolderWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'upload-folder-widget',
                    template: "<div class=\"adf-upload-folder-widget {{field.className}}\"\n    [class.adf-invalid]=\"!field.isValid\"\n    [class.adf-readonly]=\"field.readOnly\">\n<label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span *ngIf=\"isRequired()\">*</span></label>\n    <div class=\"adf-upload-widget-container\">\n    </div>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-upload-folder-widget{border-top:.84375em solid transparent;padding:.4375em 0;width:100%;word-break:break-all}"]
                },] }
    ];
    UploadFolderWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: LogService },
        { type: ThumbnailService },
        { type: ProcessContentService }
    ]; };
    UploadFolderWidgetComponent.propDecorators = {
        fileInput: [{ type: i0.ViewChild, args: ['uploadFiles',] }]
    };

    var FileViewerWidgetComponent = /** @class */ (function (_super) {
        __extends(FileViewerWidgetComponent, _super);
        function FileViewerWidgetComponent(formService) {
            return _super.call(this, formService) || this;
        }
        return FileViewerWidgetComponent;
    }(WidgetComponent));
    FileViewerWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'file-viewer-widget',
                    template: "<div class=\"adf-file-viewer-widget {{field.className}}\" [class.adf-invalid]=\"!field.isValid\"\n    [class.adf-readonly]=\"field.readOnly\">\n    <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name | translate }}<span\n            *ngIf=\"isRequired()\">*</span></label>\n    <adf-viewer [overlayMode]=\"false\" [nodeId]=\"field.value\" [showViewer]=\"field.value\" [allowGoBack]=\"false\"></adf-viewer>\n    <error-widget [error]=\"field.validationSummary\"></error-widget>\n</div>\n",
                    host: {
                        '(click)': 'event($event)',
                        '(blur)': 'event($event)',
                        '(change)': 'event($event)',
                        '(focus)': 'event($event)',
                        '(focusin)': 'event($event)',
                        '(focusout)': 'event($event)',
                        '(input)': 'event($event)',
                        '(invalid)': 'event($event)',
                        '(select)': 'event($event)'
                    },
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: ["file-viewer-widget,file-viewer-widget .adf-file-viewer-widget{height:100%;width:100%}file-viewer-widget .adf-file-viewer-widget adf-viewer.adf-viewer{position:relative}file-viewer-widget .adf-file-viewer-widget adf-viewer.adf-viewer .adf-viewer-container .adf-viewer-content>div{height:90vh}"]
                },] }
    ];
    FileViewerWidgetComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var WIDGET_DIRECTIVES = [
        UnknownWidgetComponent,
        TabsWidgetComponent,
        ContainerWidgetComponent,
        TextWidgetComponent,
        NumberWidgetComponent,
        CheckboxWidgetComponent,
        MultilineTextWidgetComponentComponent,
        DropdownWidgetComponent,
        HyperlinkWidgetComponent,
        RadioButtonsWidgetComponent,
        DisplayTextWidgetComponent,
        UploadWidgetComponent,
        TypeaheadWidgetComponent,
        FunctionalGroupWidgetComponent,
        PeopleWidgetComponent,
        DateWidgetComponent,
        AmountWidgetComponent,
        DynamicTableWidgetComponent,
        DateEditorComponent,
        DropdownEditorComponent,
        BooleanEditorComponent,
        TextEditorComponent,
        RowEditorComponent,
        ErrorWidgetComponent,
        DocumentWidgetComponent,
        DateTimeWidgetComponent,
        DateTimeEditorComponent,
        JsonWidgetComponent,
        AmountEditorComponent,
        UploadFolderWidgetComponent,
        FileViewerWidgetComponent
    ];
    var MASK_DIRECTIVE = [
        InputMaskDirective
    ];

    var FormRenderingService = /** @class */ (function (_super) {
        __extends(FormRenderingService, _super);
        function FormRenderingService() {
            var _this = _super.apply(this, __spread(arguments)) || this;
            _this.defaultValue = UnknownWidgetComponent;
            _this.types = {
                'text': DynamicComponentResolver.fromType(TextWidgetComponent),
                'string': DynamicComponentResolver.fromType(TextWidgetComponent),
                'integer': DynamicComponentResolver.fromType(NumberWidgetComponent),
                'multi-line-text': DynamicComponentResolver.fromType(MultilineTextWidgetComponentComponent),
                'boolean': DynamicComponentResolver.fromType(CheckboxWidgetComponent),
                'dropdown': DynamicComponentResolver.fromType(DropdownWidgetComponent),
                'date': DynamicComponentResolver.fromType(DateWidgetComponent),
                'amount': DynamicComponentResolver.fromType(AmountWidgetComponent),
                'radio-buttons': DynamicComponentResolver.fromType(RadioButtonsWidgetComponent),
                'hyperlink': DynamicComponentResolver.fromType(HyperlinkWidgetComponent),
                'readonly-text': DynamicComponentResolver.fromType(DisplayTextWidgetComponent),
                'json': DynamicComponentResolver.fromType(JsonWidgetComponent),
                'readonly': DynamicComponentResolver.fromType(TextWidgetComponent),
                'typeahead': DynamicComponentResolver.fromType(TypeaheadWidgetComponent),
                'people': DynamicComponentResolver.fromType(PeopleWidgetComponent),
                'functional-group': DynamicComponentResolver.fromType(FunctionalGroupWidgetComponent),
                'dynamic-table': DynamicComponentResolver.fromType(DynamicTableWidgetComponent),
                'container': DynamicComponentResolver.fromType(ContainerWidgetComponent),
                'group': DynamicComponentResolver.fromType(ContainerWidgetComponent),
                'document': DynamicComponentResolver.fromType(DocumentWidgetComponent),
                'upload': DynamicComponentResolver.fromType(UploadWidgetComponent),
                'datetime': DynamicComponentResolver.fromType(DateTimeWidgetComponent),
                'file-viewer': DynamicComponentResolver.fromType(FileViewerWidgetComponent)
            };
            return _this;
        }
        return FormRenderingService;
    }(DynamicComponentMapper));
    FormRenderingService.ɵprov = i0.ɵɵdefineInjectable({ factory: function FormRenderingService_Factory() { return new FormRenderingService(); }, token: FormRenderingService, providedIn: "root" });
    FormRenderingService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormFieldComponent = /** @class */ (function () {
        function FormFieldComponent(formRenderingService, componentFactoryResolver, visibilityService, compiler) {
            this.formRenderingService = formRenderingService;
            this.componentFactoryResolver = componentFactoryResolver;
            this.visibilityService = visibilityService;
            this.compiler = compiler;
            this.field = null;
            this.focus = false;
        }
        FormFieldComponent.prototype.ngOnInit = function () {
            var _this = this;
            var w = window;
            if (w.adf === undefined) {
                w.adf = {};
            }
            var originalField = this.getField();
            if (originalField) {
                var customTemplate = this.field.form.customFieldTemplates[originalField.type];
                if (customTemplate && this.hasController(originalField.type)) {
                    var factory = this.getComponentFactorySync(originalField.type, customTemplate);
                    this.componentRef = this.container.createComponent(factory);
                    var instance = this.componentRef.instance;
                    if (instance) {
                        instance.field = originalField;
                    }
                }
                else {
                    var componentType = this.formRenderingService.resolveComponentType(originalField);
                    if (componentType) {
                        var factory = this.componentFactoryResolver.resolveComponentFactory(componentType);
                        this.componentRef = this.container.createComponent(factory);
                        var instance = this.componentRef.instance;
                        instance.field = this.field;
                        instance.fieldChanged.subscribe(function (field) {
                            if (field && _this.field.form) {
                                _this.visibilityService.refreshVisibility(field.form);
                                field.form.onFormFieldChanged(field);
                            }
                        });
                    }
                }
            }
        };
        FormFieldComponent.prototype.ngOnDestroy = function () {
            if (this.componentRef) {
                this.componentRef.destroy();
                this.componentRef = null;
            }
        };
        FormFieldComponent.prototype.getField = function () {
            if (this.field && this.field.params) {
                var wrappedField = this.field.params.field;
                if (wrappedField && wrappedField.type) {
                    return wrappedField;
                }
            }
            return this.field;
        };
        FormFieldComponent.prototype.hasController = function (type) {
            return (adf && adf.components && adf.components[type]);
        };
        FormFieldComponent.prototype.getComponentFactorySync = function (type, template) {
            var componentInfo = adf.components[type];
            if (componentInfo.factory) {
                return componentInfo.factory;
            }
            var metadata = {
                selector: "runtime-component-" + type,
                template: template
            };
            var factory = this.createComponentFactorySync(this.compiler, metadata, componentInfo.class);
            componentInfo.factory = factory;
            return factory;
        };
        FormFieldComponent.prototype.createComponentFactorySync = function (compiler, metadata, componentClass) {
            var cmpClass = componentClass || /** @class */ (function () {
                function RuntimeComponent() {
                }
                return RuntimeComponent;
            }());
            var decoratedCmp = i0.Component(metadata)(cmpClass);
            var moduleClass = /** @class */ (function () {
                function RuntimeComponentModule() {
                }
                return RuntimeComponentModule;
            }());
            var decoratedNgModule = i0.NgModule({ imports: [], declarations: [decoratedCmp] })(moduleClass);
            var module = compiler.compileModuleAndAllComponentsSync(decoratedNgModule);
            return module.componentFactories.find(function (x) { return x.componentType === decoratedCmp; });
        };
        FormFieldComponent.prototype.focusToggle = function () {
            var _this = this;
            setTimeout(function () {
                _this.focus = !_this.focus;
            });
        };
        return FormFieldComponent;
    }());
    FormFieldComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-form-field',
                    template: "\n        <div [id]=\"'field-'+field?.id+'-container'\"\n            [hidden]=\"!field?.isVisible\"\n            [class.adf-focus]=\"focus\"\n            (focusin)=\"focusToggle()\"\n            (focusout)=\"focusToggle()\">\n            <div #container></div>\n        </div>\n    ",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    FormFieldComponent.ctorParameters = function () { return [
        { type: FormRenderingService },
        { type: i0.ComponentFactoryResolver },
        { type: WidgetVisibilityService },
        { type: i0.Compiler }
    ]; };
    FormFieldComponent.propDecorators = {
        container: [{ type: i0.ViewChild, args: ['container', { read: i0.ViewContainerRef, static: true },] }],
        field: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormBaseComponent = /** @class */ (function () {
        function FormBaseComponent() {
            this.showTitle = true;
            this.showCompleteButton = true;
            this.disableCompleteButton = false;
            this.disableSaveButton = false;
            this.disableStartProcessButton = false;
            this.showSaveButton = true;
            this.readOnly = false;
            this.showRefreshButton = true;
            this.showValidationIcon = true;
            this.formError = new i0.EventEmitter();
            this.executeOutcome = new i0.EventEmitter();
            this.error = new i0.EventEmitter();
        }
        FormBaseComponent.prototype.getParsedFormDefinition = function () {
            return this;
        };
        FormBaseComponent.prototype.hasForm = function () {
            return !!this.form;
        };
        FormBaseComponent.prototype.isTitleEnabled = function () {
            var titleEnabled = false;
            if (this.showTitle && this.form) {
                titleEnabled = true;
            }
            return titleEnabled;
        };
        FormBaseComponent.prototype.getColorForOutcome = function (outcomeName) {
            return outcomeName === FormBaseComponent.COMPLETE_OUTCOME_NAME ? FormBaseComponent.COMPLETE_BUTTON_COLOR : null;
        };
        FormBaseComponent.prototype.isOutcomeButtonEnabled = function (outcome) {
            if (this.form.readOnly) {
                return false;
            }
            if (outcome) {
                if (outcome.name === FormOutcomeModel.SAVE_ACTION) {
                    return !this.disableSaveButton;
                }
                if (outcome.name === FormOutcomeModel.COMPLETE_ACTION) {
                    return this.disableCompleteButton ? false : this.form.isValid;
                }
                if (outcome.name === FormOutcomeModel.START_PROCESS_ACTION) {
                    return this.disableStartProcessButton ? false : this.form.isValid;
                }
                return this.form.isValid;
            }
            return false;
        };
        FormBaseComponent.prototype.isOutcomeButtonVisible = function (outcome, isFormReadOnly) {
            if (outcome && outcome.name) {
                if (outcome.name === FormOutcomeModel.COMPLETE_ACTION) {
                    return this.showCompleteButton;
                }
                if (isFormReadOnly) {
                    return outcome.isSelected;
                }
                if (outcome.name === FormOutcomeModel.SAVE_ACTION) {
                    return this.showSaveButton;
                }
                if (outcome.name === FormOutcomeModel.START_PROCESS_ACTION) {
                    return false;
                }
                return true;
            }
            return false;
        };
        FormBaseComponent.prototype.onOutcomeClicked = function (outcome) {
            if (!this.readOnly && outcome && this.form) {
                if (!this.onExecuteOutcome(outcome)) {
                    return false;
                }
                if (outcome.isSystem) {
                    if (outcome.id === FormBaseComponent.SAVE_OUTCOME_ID) {
                        this.saveTaskForm();
                        return true;
                    }
                    if (outcome.id === FormBaseComponent.COMPLETE_OUTCOME_ID) {
                        this.completeTaskForm();
                        return true;
                    }
                    if (outcome.id === FormBaseComponent.START_PROCESS_OUTCOME_ID) {
                        this.completeTaskForm();
                        return true;
                    }
                    if (outcome.id === FormBaseComponent.CUSTOM_OUTCOME_ID) {
                        this.onTaskSaved(this.form);
                        this.storeFormAsMetadata();
                        return true;
                    }
                }
                else {
                    if (outcome.name) {
                        this.onTaskSaved(this.form);
                        this.completeTaskForm(outcome.name);
                        return true;
                    }
                }
            }
            return false;
        };
        FormBaseComponent.prototype.handleError = function (err) {
            this.error.emit(err);
        };
        return FormBaseComponent;
    }());
    FormBaseComponent.SAVE_OUTCOME_ID = '$save';
    FormBaseComponent.COMPLETE_OUTCOME_ID = '$complete';
    FormBaseComponent.START_PROCESS_OUTCOME_ID = '$startProcess';
    FormBaseComponent.CUSTOM_OUTCOME_ID = '$custom';
    FormBaseComponent.COMPLETE_BUTTON_COLOR = 'primary';
    FormBaseComponent.COMPLETE_OUTCOME_NAME = 'COMPLETE';
    FormBaseComponent.decorators = [
        { type: i0.Directive }
    ];
    FormBaseComponent.propDecorators = {
        path: [{ type: i0.Input }],
        nameNode: [{ type: i0.Input }],
        showTitle: [{ type: i0.Input }],
        showCompleteButton: [{ type: i0.Input }],
        disableCompleteButton: [{ type: i0.Input }],
        disableSaveButton: [{ type: i0.Input }],
        disableStartProcessButton: [{ type: i0.Input }],
        showSaveButton: [{ type: i0.Input }],
        readOnly: [{ type: i0.Input }],
        showRefreshButton: [{ type: i0.Input }],
        showValidationIcon: [{ type: i0.Input }],
        fieldValidators: [{ type: i0.Input }],
        formError: [{ type: i0.Output }],
        executeOutcome: [{ type: i0.Output }],
        error: [{ type: i0.Output }]
    };

    var FormListComponent = /** @class */ (function () {
        function FormListComponent(formService) {
            this.formService = formService;
            this.forms = [];
        }
        FormListComponent.prototype.ngOnChanges = function () {
            this.getForms();
        };
        FormListComponent.prototype.isEmpty = function () {
            return this.forms && this.forms.length === 0;
        };
        FormListComponent.prototype.getForms = function () {
            var _this = this;
            this.formService.getForms().subscribe(function (forms) {
                var _a;
                (_a = _this.forms).push.apply(_a, __spread(forms));
            });
        };
        return FormListComponent;
    }());
    FormListComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-form-list',
                    template: "<adf-datatable *ngIf=\"!isEmpty()\"\n    [rows]=\"forms\">\n    <data-columns>\n        <data-column key=\"name\" type=\"text\" title=\"Name\" class=\"adf-ellipsis-cell\" [sortable]=\"true\"></data-column>\n        <data-column key=\"lastUpdatedByFullName\" type=\"text\" title=\"User\" class=\"adf-ellipsis-cell\" [sortable]=\"true\"></data-column>\n        <data-column key=\"lastUpdated\" type=\"date\" format=\"shortDate\" title=\"Date\"></data-column>\n    </data-columns>\n</adf-datatable>\n",
                    encapsulation: i0.ViewEncapsulation.None
                },] }
    ];
    FormListComponent.ctorParameters = function () { return [
        { type: FormService }
    ]; };
    FormListComponent.propDecorators = {
        forms: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ContentWidgetComponent = /** @class */ (function () {
        function ContentWidgetComponent(formService, logService, contentService, processContentService) {
            this.formService = formService;
            this.logService = logService;
            this.contentService = contentService;
            this.processContentService = processContentService;
            this.showDocumentContent = true;
            this.contentClick = new i0.EventEmitter();
            this.thumbnailLoaded = new i0.EventEmitter();
            this.contentLoaded = new i0.EventEmitter();
            this.error = new i0.EventEmitter();
        }
        ContentWidgetComponent.prototype.ngOnChanges = function (changes) {
            var contentId = changes['id'];
            if (contentId && contentId.currentValue) {
                this.loadContent(contentId.currentValue);
            }
        };
        ContentWidgetComponent.prototype.loadContent = function (id) {
            var _this = this;
            this.processContentService
                .getFileContent(id)
                .subscribe(function (response) {
                _this.content = new ContentLinkModel(response);
                _this.contentLoaded.emit(_this.content);
                _this.loadThumbnailUrl(_this.content);
            }, function (error) {
                _this.error.emit(error);
            });
        };
        ContentWidgetComponent.prototype.loadThumbnailUrl = function (content) {
            var _this = this;
            if (this.content.isThumbnailSupported()) {
                var observable = void 0;
                if (this.content.isTypeImage()) {
                    observable = this.processContentService.getFileRawContent(content.id);
                }
                else {
                    observable = this.processContentService.getContentThumbnail(content.id);
                }
                if (observable) {
                    observable.subscribe(function (response) {
                        _this.content.thumbnailUrl = _this.contentService.createTrustedUrl(response);
                        _this.thumbnailLoaded.emit(_this.content.thumbnailUrl);
                    }, function (error) {
                        _this.error.emit(error);
                    });
                }
            }
        };
        ContentWidgetComponent.prototype.openViewer = function (content) {
            var _this = this;
            var fetch = this.processContentService.getContentPreview(content.id);
            if (content.isTypeImage() || content.isTypePdf()) {
                fetch = this.processContentService.getFileRawContent(content.id);
            }
            fetch.subscribe(function (blob) {
                content.contentBlob = blob;
                _this.contentClick.emit(content);
                _this.logService.info('Content clicked' + content.id);
                _this.formService.formContentClicked.next(content);
            }, function (error) {
                _this.error.emit(error);
            });
        };
        ContentWidgetComponent.prototype.download = function (content) {
            var _this = this;
            this.processContentService.getFileRawContent(content.id).subscribe(function (blob) { return _this.contentService.downloadBlob(blob, content.name); }, function (error) {
                _this.error.emit(error);
            });
        };
        return ContentWidgetComponent;
    }());
    ContentWidgetComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-content',
                    template: "<mat-card class=\"adf-content-container\" *ngIf=\"content\">\n    <mat-card-content *ngIf=\"showDocumentContent\">\n        <div *ngIf=\"content.isThumbnailSupported()\" >\n            <img id=\"thumbnailPreview\" class=\"adf-img-upload-widget\" [src]=\"content.thumbnailUrl\" alt=\"{{content.name}}\">\n        </div>\n        <div *ngIf=\"!content.isThumbnailSupported()\">\n            <mat-icon>image</mat-icon>\n            <div id=\"unsupported-thumbnail\" class=\"adf-content-widget-preview-text\">{{ 'FORM.PREVIEW.IMAGE_NOT_AVAILABLE' | translate }}\n            </div>\n        </div>\n        <div class=\"mdl-card__supporting-text upload-widget__content-text\">{{content.name | translate }}</div>\n    </mat-card-content>\n\n    <mat-card-actions>\n        <button mat-icon-button id=\"view\" (click)=\"openViewer(content)\">\n            <mat-icon class=\"mat-24\">zoom_in</mat-icon>\n        </button>\n        <button mat-icon-button id=\"download\" (click)=\"download(content)\">\n            <mat-icon class=\"mat-24\">file_download</mat-icon>\n        </button>\n    </mat-card-actions>\n</mat-card>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-img-upload-widget{background-color:#fff;border:1px solid hsla(0,0%,45.9%,.57);box-shadow:1px 1px 2px #ddd;height:100%;width:100%}.adf-content-widget-preview-text{text-align:center;word-break:break-all;word-wrap:break-word}"]
                },] }
    ];
    ContentWidgetComponent.ctorParameters = function () { return [
        { type: FormService },
        { type: LogService },
        { type: ContentService },
        { type: ProcessContentService }
    ]; };
    ContentWidgetComponent.propDecorators = {
        id: [{ type: i0.Input }],
        showDocumentContent: [{ type: i0.Input }],
        contentClick: [{ type: i0.Output }],
        thumbnailLoaded: [{ type: i0.Output }],
        contentLoaded: [{ type: i0.Output }],
        error: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var StartFormCustomButtonDirective = /** @class */ (function () {
        function StartFormCustomButtonDirective() {
        }
        return StartFormCustomButtonDirective;
    }());
    StartFormCustomButtonDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-form-custom-button], [form-custom-button]' },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var FormRendererComponent = /** @class */ (function () {
        function FormRendererComponent() {
            this.showDebugButton = false;
        }
        return FormRendererComponent;
    }());
    FormRendererComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-form-renderer',
                    template: "<div class=\"{{formDefinition.className}}\" [ngClass]=\"{'adf-readonly-form': formDefinition.readOnly }\">\n    <div *ngIf=\"formDefinition.hasTabs()\">\n        <tabs-widget [tabs]=\"formDefinition.tabs\"></tabs-widget>\n    </div>\n\n    <div *ngIf=\"!formDefinition.hasTabs() && formDefinition.hasFields()\">\n        <div *ngFor=\"let field of formDefinition.fields\">\n            <adf-form-field [field]=\"field.field\"></adf-form-field>\n        </div>\n    </div>\n</div>\n<!--\nFor debugging and data visualisation purposes,\nwill be removed during future revisions\n-->\n<div *ngIf=\"showDebugButton\" class=\"adf-form-debug-container\">\n    <mat-slide-toggle [(ngModel)]=\"debugMode\">Debug mode</mat-slide-toggle>\n    <div *ngIf=\"debugMode\">\n        <h4>Values</h4>\n        <pre>{{formDefinition.values | json}}</pre>\n\n        <h4>Form</h4>\n        <pre>{{formDefinition.json | json}}</pre>\n    </div>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-form-container{max-height:100%!important;max-width:100%!important}.adf-form-container .mat-card{overflow:hidden;padding:16px 24px}.adf-form-container .mat-card-header-text{margin:0!important}.adf-form-container .mat-tab-body-content{overflow:hidden}.adf-form-container .mat-tab-label{color:rgba(0,0,0,.54);font-size:var(--theme-subheading-2-font-size);letter-spacing:-.4px;line-height:var(--theme-headline-line-height);text-align:left;text-transform:uppercase}.adf-form-container .mat-ink-bar{height:4px}.adf-form-container .mat-form-field-wrapper{margin:0 12px 0 0}.adf-form-title{font-size:var(--theme-title-font-size);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.adf-form-debug-container{padding:10px}.adf-form-debug-container .adf-debug-toggle-text{cursor:pointer;padding-left:15px}.adf-form-debug-container .adf-debug-toggle-text:hover{font-weight:700}.adf-form-reload-button{position:absolute;right:12px;top:30px}.adf-form-validation-button{color:var(--theme-accent-color);position:absolute;right:50px;top:39px}.adf-form-validation-button .adf-invalid-color{color:var(--theme-warn-color)}.adf-form-hide-button{display:none!important}.adf-task-title{text-align:center}.adf-label{font-size:var(--theme-caption-font-size);height:16px;line-height:var(--theme-headline-line-height);text-align:left;white-space:nowrap;width:32px}.adf-form-mat-card-actions{float:right;padding-bottom:25px!important;padding-right:25px!important}.adf-form-mat-card-actions .mat-button{border-radius:5px;height:36px}.adf-form-mat-card-actions .mat-button-wrapper{font-size:var(--theme-body-2-font-size);font-weight:700;height:20px;opacity:.54;width:58px}form-field{width:100%}form-field .mat-input-element{font-size:var(--theme-body-2-font-size);line-height:normal;padding-top:8px}"]
                },] }
    ];
    FormRendererComponent.propDecorators = {
        showDebugButton: [{ type: i0.Input }],
        formDefinition: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var ActivitiContentService = /** @class */ (function () {
        function ActivitiContentService(apiService, logService, sitesService) {
            this.apiService = apiService;
            this.logService = logService;
            this.sitesService = sitesService;
        }
        Object.defineProperty(ActivitiContentService.prototype, "integrationAlfrescoOnPremiseApi", {
            get: function () {
                var _a;
                this._integrationAlfrescoOnPremiseApi = (_a = this._integrationAlfrescoOnPremiseApi) !== null && _a !== void 0 ? _a : new jsApi.IntegrationAlfrescoOnPremiseApi(this.apiService.getInstance());
                return this._integrationAlfrescoOnPremiseApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ActivitiContentService.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ActivitiContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        ActivitiContentService.prototype.getAlfrescoNodes = function (accountId, folderId) {
            var _this = this;
            var accountShortId = accountId.replace('alfresco-', '');
            return rxjs.from(this.integrationAlfrescoOnPremiseApi.getContentInFolder(accountShortId, folderId))
                .pipe(operators.map(this.toJsonArray), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ActivitiContentService.prototype.getAlfrescoRepositories = function (tenantId, includeAccount) {
            var _this = this;
            var opts = {
                tenantId: tenantId,
                includeAccounts: includeAccount ? includeAccount : true
            };
            return rxjs.from(this.integrationAlfrescoOnPremiseApi.getRepositories(opts))
                .pipe(operators.map(this.toJsonArray), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ActivitiContentService.prototype.linkAlfrescoNode = function (accountId, node, siteId) {
            var _this = this;
            return rxjs.from(this.contentApi.createTemporaryRelatedContent({
                link: true,
                name: node.title,
                simpleType: node.simpleType,
                source: accountId,
                sourceId: node.id + '@' + siteId
            }))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ActivitiContentService.prototype.applyAlfrescoNode = function (node, siteId, accountId) {
            var _this = this;
            var _a;
            var currentSideId = siteId ? siteId : this.sitesService.getSiteNameFromNodePath(node);
            var params = {
                source: accountId,
                mimeType: (_a = node === null || node === void 0 ? void 0 : node.content) === null || _a === void 0 ? void 0 : _a.mimeType,
                sourceId: node.id + ';' + node.properties['cm:versionLabel'] + '@' + currentSideId,
                name: node.name,
                link: node.isLink
            };
            return rxjs.from(this.contentApi.createTemporaryRelatedContent(params))
                .pipe(operators.map(this.toJson), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        ActivitiContentService.prototype.toJson = function (res) {
            if (res) {
                return res || {};
            }
            return {};
        };
        ActivitiContentService.prototype.toJsonArray = function (res) {
            if (res) {
                return res.data || [];
            }
            return [];
        };
        ActivitiContentService.prototype.handleError = function (error) {
            var errMsg = ActivitiContentService.UNKNOWN_ERROR_MESSAGE;
            if (error) {
                errMsg = (error.message) ? error.message :
                    error.status ? error.status + " - " + error.statusText : ActivitiContentService.GENERIC_ERROR_MESSAGE;
            }
            this.logService.error(errMsg);
            return rxjs.throwError(errMsg);
        };
        return ActivitiContentService;
    }());
    ActivitiContentService.UNKNOWN_ERROR_MESSAGE = 'Unknown error';
    ActivitiContentService.GENERIC_ERROR_MESSAGE = 'Server error';
    ActivitiContentService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ActivitiContentService_Factory() { return new ActivitiContentService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService), i0.ɵɵinject(SitesService)); }, token: ActivitiContentService, providedIn: "root" });
    ActivitiContentService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    ActivitiContentService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService },
        { type: SitesService }
    ]; };

    var NodeService = /** @class */ (function () {
        function NodeService(nodesApiService) {
            this.nodesApiService = nodesApiService;
        }
        NodeService.prototype.getNodeMetadata = function (nodeId) {
            return this.nodesApiService.getNodeMetadata(nodeId);
        };
        NodeService.prototype.createNodeMetadata = function (nodeType, nameSpace, data, path, name) {
            return this.nodesApiService.createNodeMetadata(nodeType, nameSpace, data, path, name);
        };
        NodeService.prototype.createNode = function (name, nodeType, properties, path) {
            return this.nodesApiService.createNodeInsideRoot(name, nodeType, properties, path);
        };
        return NodeService;
    }());
    NodeService.ɵprov = i0.ɵɵdefineInjectable({ factory: function NodeService_Factory() { return new NodeService(i0.ɵɵinject(NodesApiService)); }, token: NodeService, providedIn: "root" });
    NodeService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    NodeService.ctorParameters = function () { return [
        { type: NodesApiService }
    ]; };

    var FormErrorEvent = /** @class */ (function (_super) {
        __extends(FormErrorEvent, _super);
        function FormErrorEvent(form, error) {
            var _this = _super.call(this, form) || this;
            _this.error = error;
            return _this;
        }
        return FormErrorEvent;
    }(FormEvent));

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EditJsonDialogModule = /** @class */ (function () {
        function EditJsonDialogModule() {
        }
        return EditJsonDialogModule;
    }());
    EditJsonDialogModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        i1$2.TranslateModule,
                        i4.MatDialogModule,
                        button.MatButtonModule
                    ],
                    declarations: [
                        EditJsonDialogComponent
                    ],
                    exports: [
                        EditJsonDialogComponent
                    ]
                },] }
    ];

    var FormBaseModule = /** @class */ (function () {
        function FormBaseModule() {
        }
        return FormBaseModule;
    }());
    FormBaseModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        a11y.A11yModule,
                        flexLayout.FlexLayoutModule,
                        DataTableModule,
                        i1.HttpClientModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        DataColumnModule,
                        PipeModule,
                        core$1.MatDatetimepickerModule,
                        core$1.MatNativeDatetimeModule,
                        EditJsonDialogModule,
                        ViewerModule
                    ],
                    declarations: __spread([
                        ContentWidgetComponent,
                        FormFieldComponent,
                        FormListComponent,
                        FormRendererComponent,
                        StartFormCustomButtonDirective
                    ], WIDGET_DIRECTIVES, MASK_DIRECTIVE, [
                        WidgetComponent
                    ]),
                    exports: __spread([
                        ContentWidgetComponent,
                        FormFieldComponent,
                        FormListComponent,
                        FormRendererComponent,
                        StartFormCustomButtonDirective
                    ], WIDGET_DIRECTIVES)
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var HeaderLayoutComponent = /** @class */ (function () {
        function HeaderLayoutComponent() {
            this.redirectUrl = '/';
            this.showSidenavToggle = true;
            this.clicked = new i0.EventEmitter();
            this.expandedSidenav = true;
            this.position = 'start';
        }
        HeaderLayoutComponent.prototype.toggleMenu = function () {
            this.clicked.emit(true);
            this.expandedSidenav = !this.expandedSidenav;
        };
        HeaderLayoutComponent.prototype.ngOnInit = function () {
            if (!this.logo) {
                this.logo = './assets/images/logo.png';
            }
        };
        return HeaderLayoutComponent;
    }());
    HeaderLayoutComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-layout-header',
                    template: "<mat-toolbar\n    [color]=\"color\"\n    [style.background-color]=\"color\"\n    role=\"heading\"\n    aria-level=\"1\">\n    <button\n        *ngIf=\"showSidenavToggle && position === 'start'\"\n        id=\"adf-sidebar-toggle-start\"\n        data-automation-id=\"adf-menu-icon\"\n        class=\"mat-icon-button adf-menu-icon\"\n        mat-icon-button\n        (click)=\"toggleMenu()\"\n        [attr.aria-expanded]=\"expandedSidenav\"\n        [attr.aria-label]=\"'CORE.HEADER.ACCESSIBILITY.SIDEBAR_TOGGLE_BUTTON_ARIA_LABEL' | translate\">\n        <mat-icon\n            class=\"mat-icon material-icon\"\n            role=\"img\"\n            aria-hidden=\"true\">menu</mat-icon>\n    </button>\n\n    <a [routerLink]=\"redirectUrl\" title=\"{{ tooltip }}\">\n        <img\n            src=\"{{ logo }}\"\n            class=\"adf-app-logo\"\n            alt=\"{{ 'CORE.HEADER.LOGO_ARIA' | translate }}\"\n        />\n    </a>\n\n    <span\n        role=\"link\"\n        [attr.aria-label]=\"title | translate\"\n        [routerLink]=\"redirectUrl\"\n        fxFlex=\"1 1 auto\"\n        fxShow\n        fxHide.lt-sm=\"true\"\n        class=\"adf-app-title\"\n        >{{ title }}</span>\n    <ng-content></ng-content>\n\n    <button\n        *ngIf=\"showSidenavToggle && position === 'end'\"\n        id=\"adf-sidebar-toggle-end\"\n        data-automation-id=\"adf-menu-icon\"\n        class=\"mat-icon-button adf-menu-icon\"\n        mat-icon-button\n        (click)=\"toggleMenu()\"\n        [attr.aria-expanded]=\"expandedSidenav\"\n        [attr.aria-label]=\"'CORE.HEADER.ACCESSIBILITY.SIDEBAR_TOGGLE_BUTTON_ARIA_LABEL' | translate\">\n    >\n        <mat-icon\n            class=\"mat-icon material-icon\"\n            role=\"img\"\n            aria-hidden=\"true\">menu</mat-icon>\n    </button>\n</mat-toolbar>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-layout-header' },
                    styles: ["adf-layout-header .mat-toolbar-single-row{background-color:var(--adf-header-background-color);color:var(--adf-header-text-color)!important;padding:0 24px;position:relative}adf-layout-header .mat-toolbar-single-row .adf-menu-icon{margin-right:0;position:relative}adf-layout-header .mat-toolbar-single-row .adf-menu-icon .mat-icon{font-size:29px;padding:0 5px 0 0}adf-layout-header .mat-toolbar-single-row .adf-app-logo{height:28px;margin-top:-3px;position:relative;vertical-align:middle}adf-layout-header .mat-toolbar-single-row .adf-app-title{cursor:pointer;font-weight:100;letter-spacing:-.3px}adf-layout-header .mat-toolbar-single-row .adf-toolbar--spacer{flex:1 1 auto}adf-layout-header .mat-toolbar-single-row .adf-toolbar-divider{margin:0 5px}adf-layout-header .mat-toolbar-single-row .adf-toolbar-divider>div{background-color:var(--theme-card-bg-color)}adf-layout-header .mat-toolbar-single-row .adf-header-delimiter{background-color:var(--theme-primary-color-default-contrast);height:24px;width:2px}adf-layout-header .mat-toolbar-single-row .adf-userinfo-container{flex-direction:row;padding:0}@media screen and (max-width:599px){adf-layout-header .mat-toolbar-single-row .adf-app-logo,adf-layout-header .mat-toolbar-single-row .adf-app-title{display:none}}[dir=rtl] adf-layout-header .mat-toolbar-single-row .adf-menu-icon{margin-right:-11px}[dir=rtl] adf-layout-header .mat-toolbar-single-row .adf-app-logo{margin-right:6px}[dir=rtl] adf-layout-header .mat-toolbar-single-row .adf-app-title{margin-right:6px}[dir=rtl] adf-layout-header .mat-toolbar-single-row .adf-header-delimiter{margin-left:16px}[dir=rtl] adf-layout-header .mat-toolbar-single-row .adf-userinfo-container{margin-left:16px}[dir=rtl] adf-layout-header .mat-toolbar-single-row .adf-userinfo-name{padding-left:8px}[dir=ltr] adf-layout-header .mat-toolbar-single-row .adf-menu-icon{margin-left:-11px}[dir=ltr] adf-layout-header .mat-toolbar-single-row .adf-app-logo{margin-left:6px}[dir=ltr] adf-layout-header .mat-toolbar-single-row .adf-app-title{margin-left:6px}[dir=ltr] adf-layout-header .mat-toolbar-single-row .adf-header-delimiter{margin-right:16px}[dir=ltr] adf-layout-header .mat-toolbar-single-row .adf-userinfo-container{margin-right:16px}[dir=ltr] adf-layout-header .mat-toolbar-single-row .adf-userinfo-name{padding-right:8px}"]
                },] }
    ];
    HeaderLayoutComponent.propDecorators = {
        title: [{ type: i0.Input }],
        logo: [{ type: i0.Input }],
        redirectUrl: [{ type: i0.Input }],
        tooltip: [{ type: i0.Input }],
        color: [{ type: i0.Input }],
        showSidenavToggle: [{ type: i0.Input }],
        clicked: [{ type: i0.Output }],
        expandedSidenav: [{ type: i0.Input }],
        position: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var sidenavAnimation = animations.trigger('sidenavAnimation', [
        animations.state('expanded', animations.style({ width: '{{ width }}px' }), { params: { width: 0 } }),
        animations.state('compact', animations.style({ width: '{{ width }}px' }), { params: { width: 0 } }),
        animations.transition('compact <=> expanded', animations.animate('0.4s cubic-bezier(0.25, 0.8, 0.25, 1)'))
    ]);
    var contentAnimation = animations.trigger('contentAnimationLeft', [
        animations.state('expanded', animations.style({
            'margin-left': '{{ margin-left }}px',
            'margin-right': '{{ margin-right }}px'
        }), { params: { 'margin-left': 0, 'margin-right': 0 } }),
        animations.state('compact', animations.style({
            'margin-left': '{{ margin-left }}px',
            'margin-right': '{{ margin-right }}px'
        }), { params: { 'margin-left': 0, 'margin-right': 0 } }),
        animations.transition('expanded <=> compact', animations.animate('400ms cubic-bezier(0.25, 0.8, 0.25, 1)'))
    ]);

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LayoutContainerComponent = /** @class */ (function () {
        function LayoutContainerComponent() {
            this.hideSidenav = false;
            this.expandedSidenav = true;
            this.position = 'start';
            this.direction = 'ltr';
            this.SIDENAV_STATES = { MOBILE: {}, EXPANDED: {}, COMPACT: {} };
            this.CONTENT_STATES = { MOBILE: {}, EXPANDED: {}, COMPACT: {} };
            this.onMediaQueryChange = this.onMediaQueryChange.bind(this);
        }
        LayoutContainerComponent.prototype.ngOnInit = function () {
            this.SIDENAV_STATES.MOBILE = { value: 'expanded', params: { width: this.sidenavMax } };
            this.SIDENAV_STATES.EXPANDED = { value: 'expanded', params: { width: this.sidenavMax } };
            this.SIDENAV_STATES.COMPACT = { value: 'compact', params: { width: this.sidenavMin } };
            this.CONTENT_STATES.MOBILE = { value: 'expanded' };
            this.mediaQueryList.addListener(this.onMediaQueryChange);
            if (this.isMobileScreenSize) {
                this.sidenavAnimationState = this.SIDENAV_STATES.MOBILE;
                this.contentAnimationState = this.CONTENT_STATES.MOBILE;
            }
            else if (this.expandedSidenav) {
                this.sidenavAnimationState = this.SIDENAV_STATES.EXPANDED;
                this.contentAnimationState = this.toggledContentAnimation;
            }
            else {
                this.sidenavAnimationState = this.SIDENAV_STATES.COMPACT;
                this.contentAnimationState = this.toggledContentAnimation;
            }
        };
        LayoutContainerComponent.prototype.ngOnDestroy = function () {
            this.mediaQueryList.removeListener(this.onMediaQueryChange);
        };
        LayoutContainerComponent.prototype.ngOnChanges = function (changes) {
            if (changes && changes.direction) {
                this.contentAnimationState = this.toggledContentAnimation;
            }
        };
        LayoutContainerComponent.prototype.toggleMenu = function () {
            if (this.isMobileScreenSize) {
                this.sidenav.toggle();
            }
            else {
                this.sidenavAnimationState = this.toggledSidenavAnimation;
                this.contentAnimationState = this.toggledContentAnimation;
            }
        };
        Object.defineProperty(LayoutContainerComponent.prototype, "isMobileScreenSize", {
            get: function () {
                return this.mediaQueryList.matches;
            },
            enumerable: false,
            configurable: true
        });
        LayoutContainerComponent.prototype.getContentAnimationState = function () {
            return this.contentAnimationState;
        };
        Object.defineProperty(LayoutContainerComponent.prototype, "toggledSidenavAnimation", {
            get: function () {
                return this.sidenavAnimationState === this.SIDENAV_STATES.EXPANDED
                    ? this.SIDENAV_STATES.COMPACT
                    : this.SIDENAV_STATES.EXPANDED;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(LayoutContainerComponent.prototype, "toggledContentAnimation", {
            get: function () {
                if (this.isMobileScreenSize) {
                    return this.CONTENT_STATES.MOBILE;
                }
                if (this.sidenavAnimationState === this.SIDENAV_STATES.EXPANDED) {
                    if (this.position === 'start' && this.direction === 'ltr') {
                        return { value: 'compact', params: { 'margin-left': this.sidenavMax } };
                    }
                    if (this.position === 'start' && this.direction === 'rtl') {
                        return { value: 'compact', params: { 'margin-right': this.sidenavMax } };
                    }
                    if (this.position === 'end' && this.direction === 'ltr') {
                        return { value: 'compact', params: { 'margin-right': this.sidenavMax } };
                    }
                    if (this.position === 'end' && this.direction === 'rtl') {
                        return { value: 'compact', params: { 'margin-left': this.sidenavMax } };
                    }
                }
                else {
                    if (this.position === 'start' && this.direction === 'ltr') {
                        return { value: 'expanded', params: { 'margin-left': this.sidenavMin } };
                    }
                    if (this.position === 'start' && this.direction === 'rtl') {
                        return { value: 'expanded', params: { 'margin-right': this.sidenavMin } };
                    }
                    if (this.position === 'end' && this.direction === 'ltr') {
                        return { value: 'expanded', params: { 'margin-right': this.sidenavMin } };
                    }
                    if (this.position === 'end' && this.direction === 'rtl') {
                        return { value: 'expanded', params: { 'margin-left': this.sidenavMin } };
                    }
                }
            },
            enumerable: false,
            configurable: true
        });
        LayoutContainerComponent.prototype.onMediaQueryChange = function () {
            this.sidenavAnimationState = this.SIDENAV_STATES.EXPANDED;
            this.contentAnimationState = this.toggledContentAnimation;
        };
        return LayoutContainerComponent;
    }());
    LayoutContainerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-layout-container',
                    template: "<mat-sidenav-container>\n    <mat-sidenav\n        [position]=\"position\"\n        [disableClose]=\"!isMobileScreenSize\"\n        [ngClass]=\"{ 'adf-sidenav--hidden': hideSidenav }\"\n        [@sidenavAnimation]=\"sidenavAnimationState\"\n        [opened]=\"!isMobileScreenSize\"\n        [mode]=\"isMobileScreenSize ? 'over' : 'side'\">\n        <ng-content sidenav select=\"[app-layout-navigation]\"></ng-content>\n    </mat-sidenav>\n\n    <div>\n        <div class=\"adf-container-full-width\" [@contentAnimationLeft]=\"getContentAnimationState()\">\n            <ng-content select=\"[app-layout-content]\"></ng-content>\n        </div>\n    </div>\n</mat-sidenav-container>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    animations: [sidenavAnimation, contentAnimation],
                    styles: ["adf-layout-container{display:block;height:100%;overflow:hidden;width:100%}.adf-container-full-width{width:inherit}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.adf-container-full-width{width:100%}}.adf-sidenav--hidden{opacity:0!important;transform:unset!important;visibility:hidden!important;width:0!important}.mat-sidenav-container{display:block;height:100%;overflow:hidden;width:100%}.mat-sidenav{background-color:var(--theme-background-color);border-right:1px solid var(--theme-border-color);overflow:hidden}.mat-drawer-transition .mat-drawer-content,mat-sidenav-content.mat-sidenav-content{margin-left:0!important;transform:unset!important;transition-duration:unset!important;transition-property:unset!important;transition-timing-function:unset!important}mat-sidenav-content>div{display:flex;height:100%}mat-sidenav-content>div>div{flex:auto}"]
                },] }
    ];
    LayoutContainerComponent.ctorParameters = function () { return []; };
    LayoutContainerComponent.propDecorators = {
        sidenavMin: [{ type: i0.Input }],
        sidenavMax: [{ type: i0.Input }],
        mediaQueryList: [{ type: i0.Input }],
        hideSidenav: [{ type: i0.Input }],
        expandedSidenav: [{ type: i0.Input }],
        position: [{ type: i0.Input }],
        direction: [{ type: i0.Input }],
        sidenav: [{ type: i0.ViewChild, args: [sidenav.MatSidenav, { static: true },] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SidebarActionMenuComponent = /** @class */ (function () {
        function SidebarActionMenuComponent() {
            this.width = 272;
        }
        SidebarActionMenuComponent.prototype.isExpanded = function () {
            return this.expanded;
        };
        return SidebarActionMenuComponent;
    }());
    SidebarActionMenuComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-sidebar-action-menu',
                    template: "<div class=\"adf-sidebar-action-menu\">\n    <button *ngIf=\"isExpanded()\" mat-raised-button class=\"adf-sidebar-action-menu-button\" data-automation-id=\"create-button\" [matMenuTriggerFor]=\"adfSidebarMenu\">\n        <span *ngIf=\"title\" class=\"adf-sidebar-action-menu-text\">{{ title }}</span>\n        <ng-content select=\"[adf-sidebar-menu-title-icon], [sidebar-menu-title-icon]\"></ng-content>\n    </button>\n\n    <div *ngIf=\"!isExpanded()\" class=\"adf-sidebar-action-menu-icon\" [matMenuTriggerFor]=\"adfSidebarMenu\">\n        <ng-content select=\"[adf-sidebar-menu-expand-icon], [sidebar-menu-expand-icon]\"></ng-content>\n    </div>\n\n    <mat-menu #adfSidebarMenu=\"matMenu\" class=\"adf-sidebar-action-menu-panel\" [overlapTrigger]=\"false\" yPosition=\"below\">\n        <div class=\"adf-sidebar-action-menu-options\" [style.width.px]=\"width\">\n            <ng-content select=\"[adf-sidebar-menu-options], [sidebar-menu-options]\"></ng-content>\n        </div>\n    </mat-menu>\n</div>\n",
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { 'class': 'adf-sidebar-action-menu' },
                    styles: [".adf-sidebar-action-menu .mat-raised-button{background-color:var(--theme-primary-color);border-radius:4px;box-shadow:none!important;color:var(--theme-primary-color-default-contrast)!important;display:block;font-weight:700;height:37.5px;width:100%}.adf-sidebar-action-menu .mat-raised-button mat-icon{color:var(--theme-primary-color-default-contrast)!important;height:25px;width:24px}.adf-sidebar-action-menu-text{height:20px;text-align:left;width:100%}.adf-sidebar-action-menu-icon{color:var(--theme-text-color);cursor:pointer;margin:18px 0 0 20px}.adf-sidebar-action-menu-icon:hover{color:var(--theme-primary-color)}.adf-sidebar-action-menu-options{letter-spacing:-.4px;text-align:left}.adf-sidebar-action-menu-options .mat-menu-item{color:var(--theme-text-bold-color);font-size:14px;letter-spacing:-.4px;line-height:1.5;text-align:left}.adf-sidebar-action-menu-options .mat-menu-item:hover{color:var(--theme-primary-color);opacity:inherit}.adf-sidebar-action-menu-panel{border-radius:2px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);margin-top:7.5px}"]
                },] }
    ];
    SidebarActionMenuComponent.propDecorators = {
        title: [{ type: i0.Input }],
        expanded: [{ type: i0.Input }],
        width: [{ type: i0.Input }]
    };
    var SidebarMenuDirective = /** @class */ (function () {
        function SidebarMenuDirective() {
        }
        return SidebarMenuDirective;
    }());
    SidebarMenuDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-sidebar-menu-options], [sidebar-menu-options]' },] }
    ];
    var SidebarMenuTitleIconDirective = /** @class */ (function () {
        function SidebarMenuTitleIconDirective() {
        }
        return SidebarMenuTitleIconDirective;
    }());
    SidebarMenuTitleIconDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-sidebar-menu-title-icon], [sidebar-menu-title-icon]' },] }
    ];
    var SidebarMenuExpandIconDirective = /** @class */ (function () {
        function SidebarMenuExpandIconDirective() {
        }
        return SidebarMenuExpandIconDirective;
    }());
    SidebarMenuExpandIconDirective.decorators = [
        { type: i0.Directive, args: [{ selector: '[adf-sidebar-menu-expand-icon], [sidebar-menu-expand-icon]' },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SidenavLayoutContentDirective = /** @class */ (function () {
        function SidenavLayoutContentDirective() {
        }
        return SidenavLayoutContentDirective;
    }());
    SidenavLayoutContentDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-sidenav-layout-content'
                },] }
    ];
    SidenavLayoutContentDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SidenavLayoutHeaderDirective = /** @class */ (function () {
        function SidenavLayoutHeaderDirective() {
        }
        return SidenavLayoutHeaderDirective;
    }());
    SidenavLayoutHeaderDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-sidenav-layout-header'
                },] }
    ];
    SidenavLayoutHeaderDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SidenavLayoutNavigationDirective = /** @class */ (function () {
        function SidenavLayoutNavigationDirective() {
        }
        return SidenavLayoutNavigationDirective;
    }());
    SidenavLayoutNavigationDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: 'adf-sidenav-layout-navigation'
                },] }
    ];
    SidenavLayoutNavigationDirective.propDecorators = {
        template: [{ type: i0.ContentChild, args: [i0.TemplateRef,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SidenavLayoutComponent = /** @class */ (function () {
        function SidenavLayoutComponent(mediaMatcher, userPreferencesService) {
            var _this = this;
            this.mediaMatcher = mediaMatcher;
            this.userPreferencesService = userPreferencesService;
            this.dir = 'ltr';
            this.position = 'start';
            this.hideSidenav = false;
            this.expandedSidenav = true;
            this.expanded = new i0.EventEmitter();
            this.templateContext = {
                toggleMenu: function () { },
                isMenuMinimized: function () { return _this.isMenuMinimized; }
            };
            this.onDestroy$ = new rxjs.Subject();
            this.onMediaQueryChange = this.onMediaQueryChange.bind(this);
        }
        SidenavLayoutComponent.prototype.ngOnInit = function () {
            var _this = this;
            var initialMenuState = !this.expandedSidenav;
            this.menuOpenStateSubject = new rxjs.BehaviorSubject(initialMenuState);
            this.menuOpenState$ = this.menuOpenStateSubject.asObservable();
            var stepOver = this.stepOver || SidenavLayoutComponent.STEP_OVER;
            this.isMenuMinimized = initialMenuState;
            this.mediaQueryList = this.mediaMatcher.matchMedia("(max-width: " + stepOver + "px)");
            this.mediaQueryList.addListener(this.onMediaQueryChange);
            this.userPreferencesService
                .select('textOrientation')
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (direction) {
                _this.dir = direction;
            });
        };
        SidenavLayoutComponent.prototype.ngAfterViewInit = function () {
            this.templateContext.toggleMenu = this.toggleMenu.bind(this);
        };
        SidenavLayoutComponent.prototype.ngOnDestroy = function () {
            this.mediaQueryList.removeListener(this.onMediaQueryChange);
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        SidenavLayoutComponent.prototype.toggleMenu = function () {
            if (!this.mediaQueryList.matches) {
                this.isMenuMinimized = !this.isMenuMinimized;
            }
            else {
                this.isMenuMinimized = false;
            }
            this.container.toggleMenu();
            this.expanded.emit(!this.isMenuMinimized);
        };
        Object.defineProperty(SidenavLayoutComponent.prototype, "isMenuMinimized", {
            get: function () {
                return this._isMenuMinimized;
            },
            set: function (menuState) {
                this._isMenuMinimized = menuState;
                this.menuOpenStateSubject.next(!menuState);
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(SidenavLayoutComponent.prototype, "isHeaderInside", {
            get: function () {
                return this.mediaQueryList.matches;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(SidenavLayoutComponent.prototype, "headerTemplate", {
            get: function () {
                return this.headerDirective && this.headerDirective.template || this.emptyTemplate;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(SidenavLayoutComponent.prototype, "navigationTemplate", {
            get: function () {
                return this.navigationDirective && this.navigationDirective.template || this.emptyTemplate;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(SidenavLayoutComponent.prototype, "contentTemplate", {
            get: function () {
                return this.contentDirective && this.contentDirective.template || this.emptyTemplate;
            },
            enumerable: false,
            configurable: true
        });
        SidenavLayoutComponent.prototype.onMediaQueryChange = function () {
            this.isMenuMinimized = false;
            this.expanded.emit(!this.isMenuMinimized);
        };
        return SidenavLayoutComponent;
    }());
    SidenavLayoutComponent.STEP_OVER = 600;
    SidenavLayoutComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-sidenav-layout',
                    template: "<div class=\"adf-sidenav-layout-full-space\">\n    <ng-container *ngIf=\"!isHeaderInside\">\n        <ng-container class=\"adf-sidenav-layout-outer-header\"\n                      *ngTemplateOutlet=\"headerTemplate; context:templateContext\"></ng-container>\n    </ng-container>\n\n    <adf-layout-container #container\n                          [direction]=\"dir\"\n                          [position]=\"position\"\n                          [sidenavMin]=\"sidenavMin\"\n                          [sidenavMax]=\"sidenavMax\"\n                          [mediaQueryList]=\"mediaQueryList\"\n                          [hideSidenav]=\"hideSidenav\"\n                          [expandedSidenav]=\"expandedSidenav\"\n                          data-automation-id=\"adf-layout-container\"\n                          class=\"adf-layout__content\">\n\n        <ng-container app-layout-navigation\n                      *ngTemplateOutlet=\"navigationTemplate; context:templateContext\"></ng-container>\n\n        <ng-container app-layout-content>\n            <ng-container *ngIf=\"isHeaderInside\">\n                <ng-container *ngTemplateOutlet=\"headerTemplate; context:templateContext\"></ng-container>\n            </ng-container>\n            <ng-container *ngTemplateOutlet=\"contentTemplate; context:templateContext\"></ng-container>\n        </ng-container>\n    </adf-layout-container>\n\n    <ng-template #emptyTemplate></ng-template>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-sidenav-layout' },
                    styles: [".adf-sidenav-layout,.adf-sidenav-layout-full-space{display:flex;flex:1;flex-direction:column;height:100%;min-height:0;overflow:hidden;width:100%}.adf-sidenav-layout .adf-layout__content{flex:1 1 auto}.adf-sidenav-layout router-outlet{flex:0 0}@media (max-width:599.9px){.adf-sidenav-layout .mat-drawer{max-width:300px!important;width:calc(-50px + 100vw)!important}}.adf-sidenav-layout .mat-drawer-content{display:flex;flex:1;flex-direction:column;height:100%;min-height:0;overflow:hidden;overflow:auto;position:unset}"]
                },] }
    ];
    SidenavLayoutComponent.ctorParameters = function () { return [
        { type: layout.MediaMatcher },
        { type: UserPreferencesService }
    ]; };
    SidenavLayoutComponent.propDecorators = {
        position: [{ type: i0.Input }],
        sidenavMin: [{ type: i0.Input }],
        sidenavMax: [{ type: i0.Input }],
        stepOver: [{ type: i0.Input }],
        hideSidenav: [{ type: i0.Input }],
        expandedSidenav: [{ type: i0.Input }],
        expanded: [{ type: i0.Output }],
        headerDirective: [{ type: i0.ContentChild, args: [SidenavLayoutHeaderDirective,] }],
        navigationDirective: [{ type: i0.ContentChild, args: [SidenavLayoutNavigationDirective,] }],
        contentDirective: [{ type: i0.ContentChild, args: [SidenavLayoutContentDirective,] }],
        container: [{ type: i0.ViewChild, args: ['container', { static: true },] }],
        emptyTemplate: [{ type: i0.ViewChild, args: ['emptyTemplate', { static: true },] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SidenavLayoutModule = /** @class */ (function () {
        function SidenavLayoutModule() {
        }
        return SidenavLayoutModule;
    }());
    SidenavLayoutModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i2$2.RouterModule,
                        i1$2.TranslateModule
                    ],
                    exports: [
                        SidenavLayoutHeaderDirective,
                        SidenavLayoutContentDirective,
                        SidenavLayoutNavigationDirective,
                        SidenavLayoutComponent,
                        LayoutContainerComponent,
                        SidebarActionMenuComponent,
                        SidebarMenuDirective,
                        SidebarMenuExpandIconDirective,
                        SidebarMenuTitleIconDirective,
                        HeaderLayoutComponent
                    ],
                    declarations: [
                        SidenavLayoutHeaderDirective,
                        SidenavLayoutContentDirective,
                        SidenavLayoutNavigationDirective,
                        SidenavLayoutComponent,
                        LayoutContainerComponent,
                        SidebarActionMenuComponent,
                        SidebarMenuDirective,
                        SidebarMenuExpandIconDirective,
                        SidebarMenuTitleIconDirective,
                        HeaderLayoutComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CommentListComponent = /** @class */ (function () {
        function CommentListComponent(peopleProcessService, ecmUserService, userPreferenceService) {
            this.peopleProcessService = peopleProcessService;
            this.ecmUserService = ecmUserService;
            this.userPreferenceService = userPreferenceService;
            this.clickRow = new i0.EventEmitter();
            this.onDestroy$ = new rxjs.Subject();
        }
        CommentListComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferenceService
                .select(exports.UserPreferenceValues.Locale)
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (locale) { return _this.currentLocale = locale; });
        };
        CommentListComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        CommentListComponent.prototype.selectComment = function (comment) {
            if (this.selectedComment) {
                this.selectedComment.isSelected = false;
            }
            comment.isSelected = true;
            this.selectedComment = comment;
            this.clickRow.emit(this.selectedComment);
        };
        CommentListComponent.prototype.getUserShortName = function (user) {
            var shortName = '';
            if (user) {
                if (user.firstName) {
                    shortName = user.firstName[0].toUpperCase();
                }
                if (user.lastName) {
                    shortName += user.lastName[0].toUpperCase();
                }
            }
            return shortName;
        };
        CommentListComponent.prototype.isPictureDefined = function (user) {
            return user.pictureId || user.avatarId;
        };
        CommentListComponent.prototype.getUserImage = function (user) {
            if (this.isAContentUsers(user)) {
                return this.ecmUserService.getUserProfileImage(user.avatarId);
            }
            else {
                return this.peopleProcessService.getUserImage(user);
            }
        };
        CommentListComponent.prototype.isAContentUsers = function (user) {
            return user.avatarId;
        };
        return CommentListComponent;
    }());
    CommentListComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-comment-list',
                    template: " <mat-list class=\"adf-comment-list\">\n    <mat-list-item *ngFor=\"let comment of comments\"\n                  (click)=\"selectComment(comment)\"\n                  class=\"adf-comment-list-item\"\n                  [class.adf-is-selected]=\"comment.isSelected\"\n                  id=\"adf-comment-{{comment?.id}}\">\n        <div id=\"comment-user-icon\" class=\"adf-comment-img-container\">\n            <div\n                *ngIf=\"!isPictureDefined(comment.createdBy)\"\n                class=\"adf-comment-user-icon\">\n                {{getUserShortName(comment.createdBy)}}\n            </div>\n            <div>\n                <img [alt]=\"comment.createdBy\" *ngIf=\"isPictureDefined(comment.createdBy)\"\n                      class=\"adf-people-img\"\n                     [src]=\"getUserImage(comment.createdBy)\" />\n            </div>\n        </div>\n        <div class=\"adf-comment-contents\">\n            <div matLine id=\"comment-user\" class=\"adf-comment-user-name\">\n                {{comment.createdBy?.firstName}} {{comment.createdBy?.lastName}}\n            </div>\n            <div matLine id=\"comment-message\" class=\"adf-comment-message\" [innerHTML]=\"comment.message\"></div>\n            <div matLine id=\"comment-time\" class=\"adf-comment-message-time\">\n                {{ comment.created | adfTimeAgo: currentLocale }}\n            </div>\n        </div>\n    </mat-list-item>\n</mat-list>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-is-selected{background:var(--adf-comment-list-primary-color)}.adf-comment-img-container{align-self:flex-start;display:flex;float:left;height:100%;padding-top:18px;width:40px}.adf-comment-list-item{background-position:50%;display:table-row-group;height:100%!important;overflow:hidden;padding-top:12px;transition:background .8s;white-space:normal}.adf-comment-list-item:hover{background:var(--adf-comment-list-primary-color) radial-gradient(circle,transparent 1%,var(--adf-comment-list-primary-color) 0) 50%/15000%}.adf-comment-list-item:active{background-color:var(--adf-comment-list-ripple-color);background-size:100%;transition:background 0s}.adf-comment-user-icon{background-color:var(--theme-primary-color);background-size:cover;border-radius:50%;color:var(--theme-primary-color-default-contrast);font-size:16px;height:20px;padding:10px 5px;text-align:center;width:30px}.adf-comment-user-name{float:left;font-size:14px;font-weight:600;padding:2px 10px;width:90%}.adf-comment-message{font-size:14px;font-style:italic;letter-spacing:-.2px;line-height:1.43;white-space:normal!important;width:calc(100% - 10px)}.adf-comment-message,.adf-comment-message-time{color:var(--theme-foreground-text-color);float:left;padding:2px 10px}.adf-comment-message-time{font-size:12px!important;width:90%}.adf-comment-contents{padding-bottom:12px;padding-left:5px;padding-top:12px;width:calc(100% - 10px)}.adf-people-img{border-radius:90%;height:40px;vertical-align:middle;width:40px}"]
                },] }
    ];
    CommentListComponent.ctorParameters = function () { return [
        { type: PeopleProcessService },
        { type: EcmUserService },
        { type: UserPreferencesService }
    ]; };
    CommentListComponent.propDecorators = {
        comments: [{ type: i0.Input }],
        clickRow: [{ type: i0.Output }]
    };

    var CommentProcessService = /** @class */ (function () {
        function CommentProcessService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(CommentProcessService.prototype, "commentsApi", {
            get: function () {
                var _a;
                this._commentsApi = (_a = this._commentsApi) !== null && _a !== void 0 ? _a : new jsApi.ActivitiCommentsApi(this.apiService.getInstance());
                return this._commentsApi;
            },
            enumerable: false,
            configurable: true
        });
        CommentProcessService.prototype.addTaskComment = function (taskId, message) {
            var _this = this;
            return rxjs.from(this.commentsApi.addTaskComment({ message: message }, taskId))
                .pipe(operators.map(function (response) {
                return new CommentModel({
                    id: response.id,
                    message: response.message,
                    created: response.created,
                    createdBy: response.createdBy
                });
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        CommentProcessService.prototype.getTaskComments = function (taskId) {
            var _this = this;
            return rxjs.from(this.commentsApi.getTaskComments(taskId))
                .pipe(operators.map(function (response) {
                var comments = [];
                response.data.forEach(function (comment) {
                    var user = new UserProcessModel(comment.createdBy);
                    comments.push(new CommentModel({
                        id: comment.id,
                        message: comment.message,
                        created: comment.created,
                        createdBy: user
                    }));
                });
                return comments;
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        CommentProcessService.prototype.getProcessInstanceComments = function (processInstanceId) {
            var _this = this;
            return rxjs.from(this.commentsApi.getProcessInstanceComments(processInstanceId))
                .pipe(operators.map(function (response) {
                var comments = [];
                response.data.forEach(function (comment) {
                    var user = new UserProcessModel(comment.createdBy);
                    comments.push(new CommentModel({
                        id: comment.id,
                        message: comment.message,
                        created: comment.created,
                        createdBy: user
                    }));
                });
                return comments;
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        CommentProcessService.prototype.addProcessInstanceComment = function (processInstanceId, message) {
            var _this = this;
            return rxjs.from(this.commentsApi.addProcessInstanceComment({ message: message }, processInstanceId)).pipe(operators.map(function (response) {
                return new CommentModel({
                    id: response.id,
                    message: response.message,
                    created: response.created,
                    createdBy: response.createdBy
                });
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        CommentProcessService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return CommentProcessService;
    }());
    CommentProcessService.ɵprov = i0.ɵɵdefineInjectable({ factory: function CommentProcessService_Factory() { return new CommentProcessService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: CommentProcessService, providedIn: "root" });
    CommentProcessService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    CommentProcessService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var CommentContentService = /** @class */ (function () {
        function CommentContentService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(CommentContentService.prototype, "commentsApi", {
            get: function () {
                var _a;
                this._commentsApi = (_a = this._commentsApi) !== null && _a !== void 0 ? _a : new jsApi.CommentsApi(this.apiService.getInstance());
                return this._commentsApi;
            },
            enumerable: false,
            configurable: true
        });
        CommentContentService.prototype.addNodeComment = function (nodeId, message) {
            var _this = this;
            return rxjs.from(this.commentsApi.createComment(nodeId, { content: message }))
                .pipe(operators.map(function (response) {
                return new CommentModel({
                    id: response.entry.id,
                    message: response.entry.content,
                    created: response.entry.createdAt,
                    createdBy: response.entry.createdBy
                });
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        CommentContentService.prototype.getNodeComments = function (nodeId) {
            var _this = this;
            return rxjs.from(this.commentsApi.listComments(nodeId))
                .pipe(operators.map(function (response) {
                var comments = [];
                response.list.entries.forEach(function (comment) {
                    comments.push(new CommentModel({
                        id: comment.entry.id,
                        message: comment.entry.content,
                        created: comment.entry.createdAt,
                        createdBy: comment.entry.createdBy
                    }));
                });
                return comments;
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        CommentContentService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return CommentContentService;
    }());
    CommentContentService.ɵprov = i0.ɵɵdefineInjectable({ factory: function CommentContentService_Factory() { return new CommentContentService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: CommentContentService, providedIn: "root" });
    CommentContentService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    CommentContentService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CommentsComponent = /** @class */ (function () {
        function CommentsComponent(commentProcessService, commentContentService) {
            var _this = this;
            this.commentProcessService = commentProcessService;
            this.commentContentService = commentContentService;
            this.readOnly = false;
            this.error = new i0.EventEmitter();
            this.comments = [];
            this.beingAdded = false;
            this.comment$ = new rxjs.Observable(function (observer) { return _this.commentObserver = observer; })
                .pipe(operators.share());
            this.comment$.subscribe(function (comment) {
                _this.comments.push(comment);
            });
        }
        CommentsComponent.prototype.ngOnChanges = function (changes) {
            this.taskId = null;
            this.nodeId = null;
            this.taskId = changes['taskId'] ? changes['taskId'].currentValue : null;
            this.nodeId = changes['nodeId'] ? changes['nodeId'].currentValue : null;
            if (this.taskId || this.nodeId) {
                this.getComments();
            }
            else {
                this.resetComments();
            }
        };
        CommentsComponent.prototype.getComments = function () {
            var _this = this;
            this.resetComments();
            if (this.isATask()) {
                this.commentProcessService.getTaskComments(this.taskId).subscribe(function (comments) {
                    if (comments && comments instanceof Array) {
                        comments = comments.sort(function (comment1, comment2) {
                            var date1 = new Date(comment1.created);
                            var date2 = new Date(comment2.created);
                            return date1 > date2 ? -1 : date1 < date2 ? 1 : 0;
                        });
                        comments.forEach(function (currentComment) {
                            _this.commentObserver.next(currentComment);
                        });
                    }
                }, function (err) {
                    _this.error.emit(err);
                });
            }
            if (this.isANode()) {
                this.commentContentService.getNodeComments(this.nodeId).subscribe(function (comments) {
                    if (comments && comments instanceof Array) {
                        comments = comments.sort(function (comment1, comment2) {
                            var date1 = new Date(comment1.created);
                            var date2 = new Date(comment2.created);
                            return date1 > date2 ? -1 : date1 < date2 ? 1 : 0;
                        });
                        comments.forEach(function (comment) {
                            _this.commentObserver.next(comment);
                        });
                    }
                }, function (err) {
                    _this.error.emit(err);
                });
            }
        };
        CommentsComponent.prototype.resetComments = function () {
            this.comments = [];
        };
        CommentsComponent.prototype.add = function () {
            var _this = this;
            if (this.message && this.message.trim() && !this.beingAdded) {
                var comment = this.sanitize(this.message);
                this.beingAdded = true;
                if (this.isATask()) {
                    this.commentProcessService.addTaskComment(this.taskId, comment)
                        .subscribe(function (res) {
                        _this.comments.unshift(res);
                        _this.message = '';
                        _this.beingAdded = false;
                    }, function (err) {
                        _this.error.emit(err);
                        _this.beingAdded = false;
                    });
                }
                if (this.isANode()) {
                    this.commentContentService.addNodeComment(this.nodeId, comment)
                        .subscribe(function (res) {
                        _this.comments.unshift(res);
                        _this.message = '';
                        _this.beingAdded = false;
                    }, function (err) {
                        _this.error.emit(err);
                        _this.beingAdded = false;
                    });
                }
            }
        };
        CommentsComponent.prototype.clear = function (event) {
            event.stopPropagation();
            this.message = '';
        };
        CommentsComponent.prototype.isReadOnly = function () {
            return this.readOnly;
        };
        CommentsComponent.prototype.isATask = function () {
            return !!this.taskId;
        };
        CommentsComponent.prototype.isANode = function () {
            return !!this.nodeId;
        };
        CommentsComponent.prototype.sanitize = function (input) {
            return input.replace(/<[^>]+>/g, '')
                .replace(/^\s+|\s+$|\s+(?=\s)/g, '')
                .replace(/\r?\n/g, '<br/>');
        };
        return CommentsComponent;
    }());
    CommentsComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-comments',
                    template: "<div class=\"adf-comments-container\">\n    <div id=\"comment-header\" class=\"adf-comments-header\" role=\"heading\">\n        {{'COMMENTS.HEADER' | translate: { count: comments?.length} }}\n    </div>\n    <div class=\"adf-comments-input-container\" *ngIf=\"!isReadOnly()\">\n            <mat-form-field class=\"adf-full-width\">\n                <textarea (keydown.escape)=\"clear($event)\" matInput id=\"comment-input\" placeholder=\"{{'COMMENTS.ADD' | translate}}\" [(ngModel)]=\"message\"></textarea>\n            </mat-form-field>\n\n            <div class=\"adf-comments-input-actions\">\n                <button mat-button\n                    class=\"adf-comments-input-add\"\n                    data-automation-id=\"comments-input-add\"\n                    color=\"primary\"\n                    (click)=\"add()\"\n                    [disabled]=\"!message\">\n                    {{ 'COMMENTS.ADD' | translate }}\n                </button>\n            </div>\n    </div>\n\n    <div *ngIf=\"comments.length > 0\">\n        <adf-comment-list [comments]=\"comments\">\n        </adf-comment-list>\n    </div>\n</div>",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-comments-container{height:100%;overflow:auto;width:100%}.adf-comments-header{border-bottom:1px solid var(--theme-fg-divider);font-size:14px;font-weight:600;padding:10px 20px}.adf-comments-input-container{border-bottom:1px solid var(--theme-fg-divider);padding:8px 15px 0;width:calc(100% - 30px)}.adf-comments-input-container textarea{resize:vertical}.adf-comments-input-actions{display:flex;justify-content:flex-end;margin-bottom:10px}.adf-full-width{width:100%}adf-comment-list{float:left;height:calc(100% - 101px);overflow:auto;width:100%}"]
                },] }
    ];
    CommentsComponent.ctorParameters = function () { return [
        { type: CommentProcessService },
        { type: CommentContentService }
    ]; };
    CommentsComponent.propDecorators = {
        taskId: [{ type: i0.Input }],
        nodeId: [{ type: i0.Input }],
        readOnly: [{ type: i0.Input }],
        error: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CommentsModule = /** @class */ (function () {
        function CommentsModule() {
        }
        return CommentsModule;
    }());
    CommentsModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        PipeModule,
                        DataColumnModule,
                        DataTableModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        MaterialModule,
                        i1$1.CommonModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        CommentListComponent,
                        CommentsComponent
                    ],
                    exports: [
                        CommentListComponent,
                        CommentsComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ButtonsMenuComponent = /** @class */ (function () {
        function ButtonsMenuComponent() {
        }
        ButtonsMenuComponent.prototype.ngAfterContentInit = function () {
            this.isMenuEmpty = this.buttons.length <= 0;
        };
        ButtonsMenuComponent.prototype.isMobile = function () {
            return !!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        };
        return ButtonsMenuComponent;
    }());
    ButtonsMenuComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-buttons-action-menu',
                    template: "<div id=\"adf-buttons-menu\" class=\"adf-buttons-menu\" *ngIf=\"!isMenuEmpty\">\n    <div *ngIf=\"isMobile()\">\n        <button mat-icon-button [matMenuTriggerFor]=\"editReportMenu\">\n            <mat-icon>more_vert</mat-icon>\n        </button>\n        <mat-menu #editReportMenu=\"matMenu\" class=\"adf-buttons-menu-mobile\">\n            <ng-content *ngTemplateOutlet=\"desktop\">\n            </ng-content>\n        </mat-menu>\n    </div>\n\n    <div *ngIf=\"!isMobile()\" class=\"adf-buttons-menu-desktop\">\n        <ng-content *ngTemplateOutlet=\"desktop\">\n        </ng-content>\n    </div>\n</div>\n\n<ng-template #desktop>\n    <ng-content></ng-content>\n</ng-template>",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-buttons-menu{margin-right:10px}.adf-buttons-menu div{display:flex}.adf-buttons-menu-mobile{margin-right:10px}.adf-buttons-menu-desktop{display:flex}.adf-buttons-menu-desktop button{color:#000;padding:0}.adf-buttons-menu-desktop button>span{display:none}.adf-buttons-menu-desktop button>mat-icon.mat-icon.material-icons{color:#000;margin:0 10px}"]
                },] }
    ];
    ButtonsMenuComponent.propDecorators = {
        buttons: [{ type: i0.ContentChildren, args: [menu.MatMenuItem,] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ButtonsMenuModule = /** @class */ (function () {
        function ButtonsMenuModule() {
        }
        return ButtonsMenuModule;
    }());
    ButtonsMenuModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        flexLayout.FlexLayoutModule
                    ],
                    declarations: [
                        ButtonsMenuComponent
                    ],
                    exports: [
                        ButtonsMenuComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SortingPickerComponent = /** @class */ (function () {
        function SortingPickerComponent() {
            this.options = [];
            this.ascending = true;
            this.valueChange = new i0.EventEmitter();
            this.sortingChange = new i0.EventEmitter();
        }
        SortingPickerComponent.prototype.onOptionChanged = function (event) {
            this.selected = event.value;
            this.valueChange.emit(this.selected);
        };
        SortingPickerComponent.prototype.toggleSortDirection = function () {
            this.ascending = !this.ascending;
            this.sortingChange.emit(this.ascending);
        };
        return SortingPickerComponent;
    }());
    SortingPickerComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-sorting-picker',
                    template: "<mat-form-field floatLabel=\"always\">\n    <mat-label>{{'CORE.SEARCH.SORT_BY' | translate}}</mat-label>\n    <mat-select [(value)]=\"selected\" (selectionChange)=\"onOptionChanged($event)\">\n        <mat-option *ngFor=\"let option of options\" [value]=\"option.key\">\n            {{ option.label | translate }}\n        </mat-option>\n    </mat-select>\n</mat-form-field>\n\n<button *ngIf=\"selected\" mat-icon-button (click)=\"toggleSortDirection()\" aria-label=\"'CORE.SEARCH.TOGGLE_ASC_DESC_ORDER' | translate\">\n    <mat-icon *ngIf=\"ascending\">arrow_upward</mat-icon>\n    <mat-icon *ngIf=\"!ascending\">arrow_downward</mat-icon>\n</button>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-sorting-picker' }
                },] }
    ];
    SortingPickerComponent.propDecorators = {
        options: [{ type: i0.Input }],
        selected: [{ type: i0.Input }],
        ascending: [{ type: i0.Input }],
        valueChange: [{ type: i0.Output }],
        sortingChange: [{ type: i0.Output }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SortingPickerModule = /** @class */ (function () {
        function SortingPickerModule() {
        }
        return SortingPickerModule;
    }());
    SortingPickerModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule
                    ],
                    declarations: [
                        SortingPickerComponent
                    ],
                    exports: [
                        SortingPickerComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ErrorContentComponent = /** @class */ (function () {
        function ErrorContentComponent(route, translateService) {
            this.route = route;
            this.translateService = translateService;
            this.errorCode = ErrorContentComponent.UNKNOWN_ERROR;
        }
        ErrorContentComponent.prototype.ngOnInit = function () {
            var _this = this;
            if (this.route) {
                this.route.params.subscribe(function (params) {
                    var code = params['id'] || _this.errorCode;
                    var errorHasTranslation = _this.checkErrorExists(code);
                    _this.errorCodeTranslated = errorHasTranslation ? code : ErrorContentComponent.UNKNOWN_ERROR;
                });
            }
        };
        ErrorContentComponent.prototype.checkErrorExists = function (errorCode) {
            var errorMessage = this.translateService.instant('ERROR_CONTENT.' + errorCode);
            return errorMessage !== ('ERROR_CONTENT.' + errorCode);
        };
        return ErrorContentComponent;
    }());
    ErrorContentComponent.UNKNOWN_ERROR = 'UNKNOWN';
    ErrorContentComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-error-content',
                    template: "<div class=\"adf-error-content\">\n    <p class=\"adf-error-content-code\">\n        {{ errorCodeTranslated }}\n    </p>\n    <div class=\"adf-error-content-shadow\"></div>\n    <p class=\"adf-error-content-title\">\n        {{ 'ERROR_CONTENT.' + errorCodeTranslated + '.TITLE' | translate }}\n    </p>\n    <p class=\"adf-error-content-description\">\n        {{ 'ERROR_CONTENT.' + errorCodeTranslated + '.DESCRIPTION' | translate }}\n    </p>\n    <ng-content select=\"[adf-error-content-actions]\"></ng-content>\n</div>\n",
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-error-content' },
                    styles: [".adf-error-content{align-items:center;color:var(--theme-text-color);display:flex;flex-direction:column}.adf-error-content-code{font-size:110px;font-weight:300;margin-bottom:45px;margin-top:200px}.adf-error-content-shadow{box-shadow:0 10px 15px 0 rgba(0,0,0,.39);height:3px;opacity:.54;width:170px}.adf-error-content-title{font-size:46px;font-weight:400;margin-bottom:10px;margin-top:40px}.adf-error-content-description{font-size:24px;font-weight:400;line-height:30px;margin-bottom:60px;min-width:250px;text-align:center;width:50%}@media screen and (max-width:959px){.adf-error-content-code{font-size:50px;margin-bottom:25px;margin-top:100px}.adf-error-content-shadow{width:100px}.adf-error-content-title{font-size:24px}.adf-error-content-description{font-size:17px}}"]
                },] }
    ];
    ErrorContentComponent.ctorParameters = function () { return [
        { type: i2$2.ActivatedRoute },
        { type: TranslationService }
    ]; };
    ErrorContentComponent.propDecorators = {
        errorCode: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EmptyContentComponent = /** @class */ (function () {
        function EmptyContentComponent() {
            this.icon = 'cake';
            this.title = '';
            this.subtitle = '';
        }
        return EmptyContentComponent;
    }());
    EmptyContentComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-empty-content',
                    template: "<div class=\"adf-empty-content\" [title]=\"title | translate\">\n    <adf-icon class=\"adf-empty-content__icon\" [value]=\"icon\"></adf-icon>\n    <div class=\"adf-empty-content__title\">{{ title | translate }}</div>\n    <div class=\"adf-empty-content__subtitle\">{{ subtitle | translate }}</div>\n    <ng-content></ng-content>\n</div>\n",
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    encapsulation: i0.ViewEncapsulation.None,
                    host: { class: 'adf-empty-content' },
                    styles: [".adf-empty-content{align-items:center;color:var(--theme-text-color);display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.adf-empty-content__icon .mat-icon{font-size:var(--theme-display-3-font-size);height:var(--theme-display-3-font-size)!important;width:var(--theme-display-3-font-size)!important}.adf-empty-content__title{font-size:18px;font-weight:600;line-height:0;margin:10px 0;text-align:center;white-space:normal}.adf-empty-content__subtitle,.adf-empty-content__text{font-size:14px;font-weight:300;line-height:inherit;text-align:center;white-space:normal}.adf-empty-content .adf-icon{opacity:.6}"]
                },] }
    ];
    EmptyContentComponent.propDecorators = {
        icon: [{ type: i0.Input }],
        title: [{ type: i0.Input }],
        subtitle: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var IconComponent = /** @class */ (function () {
        function IconComponent() {
            this._value = '';
            this._isCustom = false;
        }
        Object.defineProperty(IconComponent.prototype, "value", {
            get: function () {
                return this._value;
            },
            set: function (value) {
                this._value = value || 'settings';
                this._isCustom = this._value.includes(':');
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(IconComponent.prototype, "isCustom", {
            get: function () {
                return this._isCustom;
            },
            enumerable: false,
            configurable: true
        });
        return IconComponent;
    }());
    IconComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-icon',
                    template: "<ng-container *ngIf=\"isCustom; else: default\">\n  <mat-icon [color]=\"color\" [svgIcon]=\"value\"></mat-icon>\n</ng-container>\n\n<ng-template #default>\n  <mat-icon [color]=\"color\">{{ value }}</mat-icon>\n</ng-template>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    changeDetection: i0.ChangeDetectionStrategy.OnPush,
                    host: { class: 'adf-icon' },
                    styles: [".adf-icon{display:inline-flex;vertical-align:middle}"]
                },] }
    ];
    IconComponent.propDecorators = {
        color: [{ type: i0.Input }],
        value: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var IconModule = /** @class */ (function () {
        function IconModule() {
        }
        return IconModule;
    }());
    IconModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        i2$1.MatIconModule
                    ],
                    declarations: [
                        IconComponent
                    ],
                    exports: [
                        IconComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var TemplateModule = /** @class */ (function () {
        function TemplateModule() {
        }
        return TemplateModule;
    }());
    TemplateModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        IconModule
                    ],
                    declarations: [
                        ErrorContentComponent,
                        EmptyContentComponent
                    ],
                    exports: [
                        ErrorContentComponent,
                        EmptyContentComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    var AuthGuardBase = /** @class */ (function () {
        function AuthGuardBase(authenticationService, router, appConfigService, dialog, storageService) {
            this.authenticationService = authenticationService;
            this.router = router;
            this.appConfigService = appConfigService;
            this.dialog = dialog;
            this.storageService = storageService;
        }
        Object.defineProperty(AuthGuardBase.prototype, "withCredentials", {
            get: function () {
                return this.appConfigService.get('auth.withCredentials', false);
            },
            enumerable: false,
            configurable: true
        });
        AuthGuardBase.prototype.canActivate = function (route, state) {
            if (this.authenticationService.isLoggedIn() && this.authenticationService.isOauth() && this.isLoginFragmentPresent()) {
                return this.redirectSSOSuccessURL();
            }
            return this.checkLogin(route, state.url);
        };
        AuthGuardBase.prototype.canActivateChild = function (route, state) {
            return this.canActivate(route, state);
        };
        AuthGuardBase.prototype.redirectSSOSuccessURL = function () {
            return __awaiter(this, void 0, void 0, function () {
                var redirectFragment;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            redirectFragment = this.storageService.getItem('loginFragment');
                            if (!(redirectFragment && this.getLoginRoute() !== redirectFragment)) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.navigate(redirectFragment)];
                        case 1:
                            _a.sent();
                            this.storageService.removeItem('loginFragment');
                            return [2 /*return*/, false];
                        case 2: return [2 /*return*/, true];
                    }
                });
            });
        };
        AuthGuardBase.prototype.isLoginFragmentPresent = function () {
            return !!this.storageService.getItem('loginFragment');
        };
        AuthGuardBase.prototype.redirectToUrl = function (url) {
            return __awaiter(this, void 0, void 0, function () {
                var urlToRedirect;
                return __generator(this, function (_a) {
                    urlToRedirect = "/" + this.getLoginRoute();
                    if (!this.authenticationService.isOauth()) {
                        this.authenticationService.setRedirect({
                            provider: this.getProvider(),
                            url: url
                        });
                        urlToRedirect = urlToRedirect + "?redirectUrl=" + url;
                        return [2 /*return*/, this.navigate(urlToRedirect)];
                    }
                    else if (this.getOauthConfig().silentLogin && !this.authenticationService.isPublicUrl()) {
                        this.authenticationService.ssoImplicitLogin();
                    }
                    else {
                        return [2 /*return*/, this.navigate(urlToRedirect)];
                    }
                    return [2 /*return*/, false];
                });
            });
        };
        AuthGuardBase.prototype.navigate = function (url) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this.dialog.closeAll();
                            return [4 /*yield*/, this.router.navigateByUrl(this.router.parseUrl(url))];
                        case 1:
                            _a.sent();
                            return [2 /*return*/, false];
                    }
                });
            });
        };
        AuthGuardBase.prototype.getOauthConfig = function () {
            return (this.appConfigService &&
                this.appConfigService.get(exports.AppConfigValues.OAUTHCONFIG, null));
        };
        AuthGuardBase.prototype.getLoginRoute = function () {
            return (this.appConfigService &&
                this.appConfigService.get(exports.AppConfigValues.LOGIN_ROUTE, 'login'));
        };
        AuthGuardBase.prototype.getProvider = function () {
            return (this.appConfigService &&
                this.appConfigService.get(exports.AppConfigValues.PROVIDERS, 'ALL'));
        };
        AuthGuardBase.prototype.isOAuthWithoutSilentLogin = function () {
            var oauth = this.appConfigService.get(exports.AppConfigValues.OAUTHCONFIG, null);
            return (this.authenticationService.isOauth() && !!oauth && !oauth.silentLogin);
        };
        AuthGuardBase.prototype.isSilentLogin = function () {
            var oauth = this.appConfigService.get(exports.AppConfigValues.OAUTHCONFIG, null);
            return this.authenticationService.isOauth() && oauth && oauth.silentLogin;
        };
        return AuthGuardBase;
    }());

    var AuthGuard = /** @class */ (function (_super) {
        __extends(AuthGuard, _super);
        function AuthGuard(jwtHelperService, authenticationService, router, appConfigService, dialog, storageService) {
            var _this = _super.call(this, authenticationService, router, appConfigService, dialog, storageService) || this;
            _this.jwtHelperService = jwtHelperService;
            _this.ticketChangeBind = _this.ticketChange.bind(_this);
            window.addEventListener('storage', _this.ticketChangeBind);
            return _this;
        }
        AuthGuard.prototype.ticketChange = function (event) {
            if (event.key.includes('ticket-ECM') && event.newValue !== event.oldValue) {
                this.ticketChangeRedirect(event);
            }
            if (event.key.includes('ticket-BPM') && event.newValue !== event.oldValue) {
                this.ticketChangeRedirect(event);
            }
            if (event.key.endsWith(JwtHelperService.USER_ACCESS_TOKEN) &&
                this.jwtHelperService.getValueFromToken(event.newValue, JwtHelperService.USER_PREFERRED_USERNAME) !==
                    this.jwtHelperService.getValueFromToken(event.oldValue, JwtHelperService.USER_PREFERRED_USERNAME)) {
                this.ticketChangeRedirect(event);
            }
        };
        AuthGuard.prototype.ticketChangeRedirect = function (event) {
            if (event.newValue) {
                this.navigate(this.router.url);
            }
            else {
                window.location.reload();
            }
        };
        AuthGuard.prototype.checkLogin = function (_, redirectUrl) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    if (this.authenticationService.isLoggedIn() || this.withCredentials) {
                        return [2 /*return*/, true];
                    }
                    return [2 /*return*/, this.redirectToUrl(redirectUrl)];
                });
            });
        };
        return AuthGuard;
    }(AuthGuardBase));
    AuthGuard.ɵprov = i0.ɵɵdefineInjectable({ factory: function AuthGuard_Factory() { return new AuthGuard(i0.ɵɵinject(JwtHelperService), i0.ɵɵinject(AuthenticationService), i0.ɵɵinject(i2$2.Router), i0.ɵɵinject(AppConfigService), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(StorageService)); }, token: AuthGuard, providedIn: "root" });
    AuthGuard.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AuthGuard.ctorParameters = function () { return [
        { type: JwtHelperService },
        { type: AuthenticationService },
        { type: i2$2.Router },
        { type: AppConfigService },
        { type: i4.MatDialog },
        { type: StorageService }
    ]; };

    var AuthGuardEcm = /** @class */ (function (_super) {
        __extends(AuthGuardEcm, _super);
        function AuthGuardEcm(authenticationService, router, appConfigService, dialog, storageService) {
            return _super.call(this, authenticationService, router, appConfigService, dialog, storageService) || this;
        }
        AuthGuardEcm.prototype.checkLogin = function (_, redirectUrl) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    if (this.authenticationService.isEcmLoggedIn() || this.withCredentials) {
                        return [2 /*return*/, true];
                    }
                    return [2 /*return*/, this.redirectToUrl(redirectUrl)];
                });
            });
        };
        return AuthGuardEcm;
    }(AuthGuardBase));
    AuthGuardEcm.ɵprov = i0.ɵɵdefineInjectable({ factory: function AuthGuardEcm_Factory() { return new AuthGuardEcm(i0.ɵɵinject(AuthenticationService), i0.ɵɵinject(i2$2.Router), i0.ɵɵinject(AppConfigService), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(StorageService)); }, token: AuthGuardEcm, providedIn: "root" });
    AuthGuardEcm.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AuthGuardEcm.ctorParameters = function () { return [
        { type: AuthenticationService },
        { type: i2$2.Router },
        { type: AppConfigService },
        { type: i4.MatDialog },
        { type: StorageService }
    ]; };

    var AuthGuardBpm = /** @class */ (function (_super) {
        __extends(AuthGuardBpm, _super);
        function AuthGuardBpm(authenticationService, router, appConfigService, dialog, storageService) {
            return _super.call(this, authenticationService, router, appConfigService, dialog, storageService) || this;
        }
        AuthGuardBpm.prototype.checkLogin = function (_, redirectUrl) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    if (this.authenticationService.isBpmLoggedIn() || this.withCredentials) {
                        return [2 /*return*/, true];
                    }
                    return [2 /*return*/, this.redirectToUrl(redirectUrl)];
                });
            });
        };
        return AuthGuardBpm;
    }(AuthGuardBase));
    AuthGuardBpm.ɵprov = i0.ɵɵdefineInjectable({ factory: function AuthGuardBpm_Factory() { return new AuthGuardBpm(i0.ɵɵinject(AuthenticationService), i0.ɵɵinject(i2$2.Router), i0.ɵɵinject(AppConfigService), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(StorageService)); }, token: AuthGuardBpm, providedIn: "root" });
    AuthGuardBpm.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AuthGuardBpm.ctorParameters = function () { return [
        { type: AuthenticationService },
        { type: i2$2.Router },
        { type: AppConfigService },
        { type: i4.MatDialog },
        { type: StorageService }
    ]; };

    (function (ContentGroups) {
        ContentGroups["ALFRESCO_ADMINISTRATORS"] = "ALFRESCO_ADMINISTRATORS";
    })(exports.ContentGroups || (exports.ContentGroups = {}));
    var PeopleContentService = /** @class */ (function () {
        function PeopleContentService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
            this.hasContentAdminRole = false;
            this.hasCheckedIsContentAdmin = false;
        }
        Object.defineProperty(PeopleContentService.prototype, "peopleApi", {
            get: function () {
                var _a;
                this._peopleApi = (_a = this._peopleApi) !== null && _a !== void 0 ? _a : new jsApi.PeopleApi(this.apiService.getInstance());
                return this._peopleApi;
            },
            enumerable: false,
            configurable: true
        });
        PeopleContentService.prototype.getPerson = function (personId) {
            var _this = this;
            var promise = this.peopleApi.getPerson(personId);
            return rxjs.from(promise).pipe(operators.catchError(function (error) { return _this.handleError(error); }));
        };
        PeopleContentService.prototype.getCurrentPerson = function () {
            return this.getPerson('-me-');
        };
        PeopleContentService.prototype.listPeople = function (requestQuery) {
            var _this = this;
            var requestQueryParams = { skipCount: requestQuery === null || requestQuery === void 0 ? void 0 : requestQuery.skipCount, maxItems: requestQuery === null || requestQuery === void 0 ? void 0 : requestQuery.maxItems };
            var orderBy = this.buildOrderArray(requestQuery === null || requestQuery === void 0 ? void 0 : requestQuery.sorting);
            if (orderBy.length) {
                requestQueryParams['orderBy'] = orderBy;
            }
            var promise = this.peopleApi.listPeople(requestQueryParams);
            return rxjs.from(promise).pipe(operators.map(function (response) {
                return {
                    pagination: response.list.pagination,
                    entries: response.list.entries.map(function (person) { return person.entry; })
                };
            }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        PeopleContentService.prototype.createPerson = function (newPerson, opts) {
            var _this = this;
            return rxjs.from(this.peopleApi.createPerson(newPerson, opts)).pipe(operators.map(function (res) { return res === null || res === void 0 ? void 0 : res.entry; }), operators.catchError(function (error) { return _this.handleError(error); }));
        };
        PeopleContentService.prototype.isContentAdmin = function () {
            var _a, _b;
            return __awaiter(this, void 0, void 0, function () {
                var user;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!!this.hasCheckedIsContentAdmin) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.getCurrentPerson().toPromise()];
                        case 1:
                            user = _c.sent();
                            this.hasContentAdminRole = (_b = (_a = user === null || user === void 0 ? void 0 : user.entry) === null || _a === void 0 ? void 0 : _a.capabilities) === null || _b === void 0 ? void 0 : _b.isAdmin;
                            this.hasCheckedIsContentAdmin = true;
                            _c.label = 2;
                        case 2: return [2 /*return*/, this.hasContentAdminRole];
                    }
                });
            });
        };
        PeopleContentService.prototype.buildOrderArray = function (sorting) {
            return (sorting === null || sorting === void 0 ? void 0 : sorting.orderBy) && (sorting === null || sorting === void 0 ? void 0 : sorting.direction) ? [sorting.orderBy + " " + sorting.direction.toUpperCase()] : [];
        };
        PeopleContentService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return PeopleContentService;
    }());
    PeopleContentService.ɵprov = i0.ɵɵdefineInjectable({ factory: function PeopleContentService_Factory() { return new PeopleContentService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: PeopleContentService, providedIn: "root" });
    PeopleContentService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    PeopleContentService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var AuthGuardSsoRoleService = /** @class */ (function () {
        function AuthGuardSsoRoleService(jwtHelperService, router, dialog, peopleContentService) {
            this.jwtHelperService = jwtHelperService;
            this.router = router;
            this.dialog = dialog;
            this.peopleContentService = peopleContentService;
        }
        AuthGuardSsoRoleService.prototype.canActivate = function (route) {
            return __awaiter(this, void 0, void 0, function () {
                var hasRole, hasRealmRole, hasClientRole, rolesToCheck, excludedRoles, isContentAdmin, _a, clientRoleName, rolesToCheck;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            hasRealmRole = false;
                            hasClientRole = true;
                            if (!route.data) return [3 /*break*/, 5];
                            if (!route.data['roles']) return [3 /*break*/, 4];
                            rolesToCheck = route.data['roles'];
                            excludedRoles = route.data['excludedRoles'] || [];
                            if (!(rolesToCheck.includes(exports.ContentGroups.ALFRESCO_ADMINISTRATORS) || excludedRoles.includes(exports.ContentGroups.ALFRESCO_ADMINISTRATORS))) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.peopleContentService.isContentAdmin()];
                        case 1:
                            _a = _b.sent();
                            return [3 /*break*/, 3];
                        case 2:
                            _a = false;
                            _b.label = 3;
                        case 3:
                            isContentAdmin = _a;
                            hasRealmRole = excludedRoles.length ? this.checkAccessWithExcludedRoles(rolesToCheck, excludedRoles, isContentAdmin) : this.hasRoles(rolesToCheck, isContentAdmin);
                            _b.label = 4;
                        case 4:
                            if (route.data['clientRoles']) {
                                clientRoleName = route.params[route.data['clientRoles']];
                                rolesToCheck = route.data['roles'];
                                hasClientRole = this.jwtHelperService.hasRealmRolesForClientRole(clientRoleName, rolesToCheck);
                            }
                            _b.label = 5;
                        case 5:
                            hasRole = hasRealmRole && hasClientRole;
                            if (!hasRole && route.data && route.data['redirectUrl']) {
                                this.router.navigate(['/' + route.data['redirectUrl']]);
                            }
                            if (!hasRole) {
                                this.dialog.closeAll();
                            }
                            return [2 /*return*/, hasRole];
                    }
                });
            });
        };
        AuthGuardSsoRoleService.prototype.checkAccessWithExcludedRoles = function (rolesToCheck, excludedRoles, isContentAdmin) {
            return this.hasRoles(rolesToCheck, isContentAdmin) && !this.hasRoles(excludedRoles, isContentAdmin);
        };
        AuthGuardSsoRoleService.prototype.hasRoles = function (rolesToCheck, isContentAdmin) {
            return rolesToCheck.includes(exports.ContentGroups.ALFRESCO_ADMINISTRATORS) ? this.jwtHelperService.hasRealmRoles(rolesToCheck) || isContentAdmin : this.jwtHelperService.hasRealmRoles(rolesToCheck);
        };
        return AuthGuardSsoRoleService;
    }());
    AuthGuardSsoRoleService.ɵprov = i0.ɵɵdefineInjectable({ factory: function AuthGuardSsoRoleService_Factory() { return new AuthGuardSsoRoleService(i0.ɵɵinject(JwtHelperService), i0.ɵɵinject(i2$2.Router), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(PeopleContentService)); }, token: AuthGuardSsoRoleService, providedIn: "root" });
    AuthGuardSsoRoleService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AuthGuardSsoRoleService.ctorParameters = function () { return [
        { type: JwtHelperService },
        { type: i2$2.Router },
        { type: i4.MatDialog },
        { type: PeopleContentService }
    ]; };

    var AppsProcessService = /** @class */ (function () {
        function AppsProcessService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
        }
        Object.defineProperty(AppsProcessService.prototype, "appsApi", {
            get: function () {
                var _a;
                this._appsApi = (_a = this._appsApi) !== null && _a !== void 0 ? _a : new jsApi.RuntimeAppDefinitionsApi(this.apiService.getInstance());
                return this._appsApi;
            },
            enumerable: false,
            configurable: true
        });
        AppsProcessService.prototype.getDeployedApplications = function () {
            var _this = this;
            return rxjs.from(this.appsApi.getAppDefinitions())
                .pipe(operators.map(function (response) { return response.data; }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        AppsProcessService.prototype.getDeployedApplicationsByName = function (name) {
            var _this = this;
            return rxjs.from(this.appsApi.getAppDefinitions())
                .pipe(operators.map(function (response) { return response.data.find(function (app) { return app.name === name; }); }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        AppsProcessService.prototype.getApplicationDetailsById = function (appId) {
            var _this = this;
            return rxjs.from(this.appsApi.getAppDefinitions())
                .pipe(operators.map(function (response) { return response.data.find(function (app) { return app.id === appId; }); }), operators.catchError(function (err) { return _this.handleError(err); }));
        };
        AppsProcessService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return AppsProcessService;
    }());
    AppsProcessService.ɵprov = i0.ɵɵdefineInjectable({ factory: function AppsProcessService_Factory() { return new AppsProcessService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(LogService)); }, token: AppsProcessService, providedIn: "root" });
    AppsProcessService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    AppsProcessService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: LogService }
    ]; };

    var PageTitleService = /** @class */ (function () {
        function PageTitleService(titleService, appConfig, translationService) {
            var _this = this;
            this.titleService = titleService;
            this.appConfig = appConfig;
            this.translationService = translationService;
            this.originalTitle = '';
            this.translatedTitle = '';
            translationService.translate.onLangChange.subscribe(function () { return _this.onLanguageChanged(); });
            translationService.translate.onTranslationChange.subscribe(function () { return _this.onLanguageChanged(); });
        }
        PageTitleService.prototype.setTitle = function (value) {
            if (value === void 0) { value = ''; }
            this.originalTitle = value;
            this.translatedTitle = this.translationService.instant(value);
            this.updateTitle();
        };
        PageTitleService.prototype.onLanguageChanged = function () {
            this.translatedTitle = this.translationService.instant(this.originalTitle);
            this.updateTitle();
        };
        PageTitleService.prototype.updateTitle = function () {
            var name = this.appConfig.get('application.name') || 'Alfresco ADF Application';
            var title = this.translatedTitle ? this.translatedTitle + " - " + name : "" + name;
            this.titleService.setTitle(title);
        };
        return PageTitleService;
    }());
    PageTitleService.ɵprov = i0.ɵɵdefineInjectable({ factory: function PageTitleService_Factory() { return new PageTitleService(i0.ɵɵinject(i3.Title), i0.ɵɵinject(AppConfigService), i0.ɵɵinject(TranslationService)); }, token: PageTitleService, providedIn: "root" });
    PageTitleService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    PageTitleService.ctorParameters = function () { return [
        { type: i3.Title },
        { type: AppConfigService },
        { type: TranslationService }
    ]; };

    var RenditionsService = /** @class */ (function () {
        function RenditionsService(apiService) {
            this.apiService = apiService;
        }
        Object.defineProperty(RenditionsService.prototype, "renditionsApi", {
            get: function () {
                var _a;
                this._renditionsApi = (_a = this._renditionsApi) !== null && _a !== void 0 ? _a : new jsApi.RenditionsApi(this.apiService.getInstance());
                return this._renditionsApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(RenditionsService.prototype, "contentApi", {
            get: function () {
                var _a;
                this._contentApi = (_a = this._contentApi) !== null && _a !== void 0 ? _a : new jsApi.ContentApi(this.apiService.getInstance());
                return this._contentApi;
            },
            enumerable: false,
            configurable: true
        });
        RenditionsService.prototype.getAvailableRenditionForNode = function (nodeId) {
            return rxjs.from(this.renditionsApi.listRenditions(nodeId)).pipe(operators.map(function (availableRenditions) {
                var renditionsAvailable = availableRenditions.list.entries.filter(function (rendition) { return (rendition.entry.id === 'pdf' || rendition.entry.id === 'imgpreview'); });
                var existingRendition = renditionsAvailable.find(function (rend) { return rend.entry.status === 'CREATED'; });
                return existingRendition ? existingRendition : renditionsAvailable[0];
            }));
        };
        RenditionsService.prototype.generateRenditionForNode = function (nodeId) {
            var _this = this;
            return this.getAvailableRenditionForNode(nodeId).pipe(operators.map(function (rendition) {
                if (rendition.entry.status !== 'CREATED') {
                    return rxjs.from(_this.renditionsApi.createRendition(nodeId, { id: rendition.entry.id }));
                }
                else {
                    return rxjs.empty();
                }
            }));
        };
        RenditionsService.prototype.isRenditionAvailable = function (nodeId, encoding) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.getRendition(nodeId, encoding).subscribe(function (res) {
                    var isAvailable = true;
                    if (res.entry.status.toString() === 'NOT_CREATED') {
                        isAvailable = false;
                    }
                    observer.next(isAvailable);
                    observer.complete();
                }, function () {
                    observer.next(false);
                    observer.complete();
                });
            });
        };
        RenditionsService.prototype.isConversionPossible = function (nodeId, encoding) {
            var _this = this;
            return new rxjs.Observable(function (observer) {
                _this.getRendition(nodeId, encoding).subscribe(function () {
                    observer.next(true);
                    observer.complete();
                }, function () {
                    observer.next(false);
                    observer.complete();
                });
            });
        };
        RenditionsService.prototype.getRenditionUrl = function (nodeId, encoding) {
            return this.contentApi.getRenditionUrl(nodeId, encoding);
        };
        RenditionsService.prototype.getRendition = function (nodeId, encoding) {
            return rxjs.from(this.renditionsApi.getRendition(nodeId, encoding));
        };
        RenditionsService.prototype.getRenditionsListByNodeId = function (nodeId) {
            return rxjs.from(this.renditionsApi.listRenditions(nodeId));
        };
        RenditionsService.prototype.createRendition = function (nodeId, encoding) {
            return rxjs.from(this.renditionsApi.createRendition(nodeId, { id: encoding }));
        };
        RenditionsService.prototype.convert = function (nodeId, encoding, pollingInterval, retries) {
            var _this = this;
            if (pollingInterval === void 0) { pollingInterval = 1000; }
            if (retries === void 0) { retries = 5; }
            return this.createRendition(nodeId, encoding)
                .pipe(operators.concatMap(function () { return _this.pollRendition(nodeId, encoding, pollingInterval, retries); }));
        };
        RenditionsService.prototype.pollRendition = function (nodeId, encoding, intervalSize, retries) {
            var _this = this;
            if (intervalSize === void 0) { intervalSize = 1000; }
            if (retries === void 0) { retries = 5; }
            var attempts = 0;
            return rxjs.interval(intervalSize)
                .pipe(operators.switchMap(function () { return _this.getRendition(nodeId, encoding); }), operators.takeWhile(function (renditionEntry) {
                attempts += 1;
                if (attempts > retries) {
                    return false;
                }
                return (renditionEntry.entry.status.toString() !== 'CREATED');
            }));
        };
        return RenditionsService;
    }());
    RenditionsService.ɵprov = i0.ɵɵdefineInjectable({ factory: function RenditionsService_Factory() { return new RenditionsService(i0.ɵɵinject(AlfrescoApiService)); }, token: RenditionsService, providedIn: "root" });
    RenditionsService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    RenditionsService.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ComponentTranslationModel = /** @class */ (function () {
        function ComponentTranslationModel(obj) {
            this.name = obj && obj.name;
            this.path = obj && obj.path;
            this.json = obj && obj.json || [];
        }
        return ComponentTranslationModel;
    }());

    var TranslateLoaderService = /** @class */ (function () {
        function TranslateLoaderService(http) {
            this.http = http;
            this.prefix = 'i18n';
            this.suffix = '.json';
            this.providers = [];
            this.queue = [];
            this.defaultLang = 'en';
        }
        TranslateLoaderService.prototype.setDefaultLang = function (value) {
            this.defaultLang = value || 'en';
        };
        TranslateLoaderService.prototype.registerProvider = function (name, path) {
            var registered = this.providers.find(function (provider) { return provider.name === name; });
            if (registered) {
                registered.path = path;
            }
            else {
                this.providers.push(new ComponentTranslationModel({ name: name, path: path }));
            }
        };
        TranslateLoaderService.prototype.providerRegistered = function (name) {
            return this.providers.find(function (x) { return x.name === name; }) ? true : false;
        };
        TranslateLoaderService.prototype.fetchLanguageFile = function (lang, component, fallbackUrl) {
            var _this = this;
            var translationUrl = fallbackUrl || component.path + "/" + this.prefix + "/" + lang + this.suffix + "?v=" + Date.now();
            return this.http.get(translationUrl).pipe(operators.map(function (res) {
                component.json[lang] = res;
            }), operators.retry(3), operators.catchError(function () {
                if (!fallbackUrl && lang.includes('-')) {
                    var _a = __read(lang.split('-'), 1), langId = _a[0];
                    if (langId && langId !== _this.defaultLang) {
                        var url = component.path + "/" + _this.prefix + "/" + langId + _this.suffix + "?v=" + Date.now();
                        return _this.fetchLanguageFile(lang, component, url);
                    }
                }
                return rxjs.throwError("Failed to load " + translationUrl);
            }));
        };
        TranslateLoaderService.prototype.getComponentToFetch = function (lang) {
            var _this = this;
            var observableBatch = [];
            if (!this.queue[lang]) {
                this.queue[lang] = [];
            }
            this.providers.forEach(function (component) {
                if (!_this.isComponentInQueue(lang, component.name)) {
                    _this.queue[lang].push(component.name);
                    observableBatch.push(_this.fetchLanguageFile(lang, component));
                }
            });
            return observableBatch;
        };
        TranslateLoaderService.prototype.init = function (lang) {
            if (this.queue[lang] === undefined) {
                this.queue[lang] = [];
            }
        };
        TranslateLoaderService.prototype.isComponentInQueue = function (lang, name) {
            return (this.queue[lang] || []).find(function (x) { return x === name; }) ? true : false;
        };
        TranslateLoaderService.prototype.getFullTranslationJSON = function (lang) {
            var result = {};
            this.providers
                .slice(0)
                .sort(function (a, b) {
                if (a.name === 'app') {
                    return 1;
                }
                if (b.name === 'app') {
                    return -1;
                }
                return a.name.localeCompare(b.name);
            })
                .forEach(function (model) {
                if (model.json && model.json[lang]) {
                    result = ObjectUtils.merge(result, model.json[lang]);
                }
            });
            return result;
        };
        TranslateLoaderService.prototype.getTranslation = function (lang) {
            var _this = this;
            var hasFailures = false;
            var batch = __spread(this.getComponentToFetch(lang).map(function (observable) {
                return observable.pipe(operators.catchError(function (error) {
                    hasFailures = true;
                    return rxjs.of(error);
                }));
            }));
            return new rxjs.Observable(function (observer) {
                if (batch.length > 0) {
                    rxjs.forkJoin(batch).subscribe(function () {
                        var fullTranslation = _this.getFullTranslationJSON(lang);
                        if (fullTranslation) {
                            observer.next(fullTranslation);
                        }
                        if (hasFailures) {
                            observer.error('Failed to load some resources');
                        }
                        else {
                            observer.complete();
                        }
                    }, function () {
                        observer.error('Failed to load some resources');
                    });
                }
                else {
                    var fullTranslation = _this.getFullTranslationJSON(lang);
                    if (fullTranslation) {
                        observer.next(fullTranslation);
                        observer.complete();
                    }
                }
            });
        };
        return TranslateLoaderService;
    }());
    TranslateLoaderService.ɵprov = i0.ɵɵdefineInjectable({ factory: function TranslateLoaderService_Factory() { return new TranslateLoaderService(i0.ɵɵinject(i1.HttpClient)); }, token: TranslateLoaderService, providedIn: "root" });
    TranslateLoaderService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    TranslateLoaderService.ctorParameters = function () { return [
        { type: i1.HttpClient }
    ]; };

    var DeletedNodesApiService = /** @class */ (function () {
        function DeletedNodesApiService(apiService, preferences) {
            this.apiService = apiService;
            this.preferences = preferences;
        }
        Object.defineProperty(DeletedNodesApiService.prototype, "nodesApi", {
            get: function () {
                var _a;
                this._nodesApi = (_a = this._nodesApi) !== null && _a !== void 0 ? _a : new jsApi.NodesApi(this.apiService.getInstance());
                return this._nodesApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(DeletedNodesApiService.prototype, "trashcanApi", {
            get: function () {
                var _a;
                this._trashcanApi = (_a = this._trashcanApi) !== null && _a !== void 0 ? _a : new jsApi.TrashcanApi(this.apiService.getInstance());
                return this._trashcanApi;
            },
            enumerable: false,
            configurable: true
        });
        DeletedNodesApiService.prototype.getDeletedNodes = function (options) {
            var defaultOptions = {
                include: ['path', 'properties'],
                maxItems: this.preferences.paginationSize,
                skipCount: 0
            };
            var queryOptions = Object.assign(defaultOptions, options);
            var promise = this.trashcanApi.listDeletedNodes(queryOptions);
            return rxjs.from(promise).pipe(operators.catchError(function (err) { return rxjs.of(err); }));
        };
        return DeletedNodesApiService;
    }());
    DeletedNodesApiService.ɵprov = i0.ɵɵdefineInjectable({ factory: function DeletedNodesApiService_Factory() { return new DeletedNodesApiService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(UserPreferencesService)); }, token: DeletedNodesApiService, providedIn: "root" });
    DeletedNodesApiService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    DeletedNodesApiService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: UserPreferencesService }
    ]; };

    var FavoritesApiService = /** @class */ (function () {
        function FavoritesApiService(apiService, preferences) {
            this.apiService = apiService;
            this.preferences = preferences;
        }
        Object.defineProperty(FavoritesApiService.prototype, "favoritesApi", {
            get: function () {
                var _a;
                this._favoritesApi = (_a = this._favoritesApi) !== null && _a !== void 0 ? _a : new jsApi.FavoritesApi(this.apiService.getInstance());
                return this._favoritesApi;
            },
            enumerable: false,
            configurable: true
        });
        FavoritesApiService.remapEntry = function (_c) {
            var entry = _c.entry;
            entry.properties = {
                'cm:title': entry.title,
                'cm:description': entry.description
            };
            return { entry: entry };
        };
        FavoritesApiService.prototype.remapFavoritesData = function (data) {
            if (data === void 0) { data = {}; }
            var _a, _b;
            var pagination = (((_a = data === null || data === void 0 ? void 0 : data.list) === null || _a === void 0 ? void 0 : _a.pagination) || {});
            var entries = this
                .remapFavoriteEntries(((_b = data === null || data === void 0 ? void 0 : data.list) === null || _b === void 0 ? void 0 : _b.entries) || []);
            return {
                list: { entries: entries, pagination: pagination }
            };
        };
        FavoritesApiService.prototype.remapFavoriteEntries = function (entries) {
            return entries
                .map(function (_c) {
                var target = _c.entry.target;
                return ({
                    entry: target.file || target.folder
                });
            })
                .filter(function (_c) {
                var entry = _c.entry;
                return (!!entry);
            })
                .map(FavoritesApiService.remapEntry);
        };
        FavoritesApiService.prototype.getFavorites = function (personId, options) {
            var defaultOptions = {
                maxItems: this.preferences.paginationSize,
                skipCount: 0,
                where: '(EXISTS(target/file) OR EXISTS(target/folder))',
                include: ['properties', 'allowableOperations']
            };
            var queryOptions = Object.assign(defaultOptions, options);
            var promise = this.favoritesApi
                .listFavorites(personId, queryOptions)
                .then(this.remapFavoritesData);
            return rxjs.from(promise).pipe(operators.catchError(function (err) { return rxjs.of(err); }));
        };
        return FavoritesApiService;
    }());
    FavoritesApiService.ɵprov = i0.ɵɵdefineInjectable({ factory: function FavoritesApiService_Factory() { return new FavoritesApiService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(UserPreferencesService)); }, token: FavoritesApiService, providedIn: "root" });
    FavoritesApiService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    FavoritesApiService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: UserPreferencesService }
    ]; };

    var SearchConfigurationService = /** @class */ (function () {
        function SearchConfigurationService() {
        }
        SearchConfigurationService.prototype.generateQueryBody = function (searchTerm, maxResults, skipCount) {
            var defaultQueryBody = {
                query: {
                    query: searchTerm ? "'" + searchTerm + "*' OR name:'" + searchTerm + "*'" : searchTerm
                },
                include: ['path', 'allowableOperations'],
                paging: {
                    maxItems: maxResults,
                    skipCount: skipCount
                },
                filterQueries: [
                    { query: "TYPE:'cm:folder' OR TYPE:'cm:content'" },
                    { query: 'NOT cm:creator:System' }
                ]
            };
            return defaultQueryBody;
        };
        return SearchConfigurationService;
    }());
    SearchConfigurationService.ɵprov = i0.ɵɵdefineInjectable({ factory: function SearchConfigurationService_Factory() { return new SearchConfigurationService(); }, token: SearchConfigurationService, providedIn: "root" });
    SearchConfigurationService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    SearchConfigurationService.ctorParameters = function () { return []; };

    var SearchService = /** @class */ (function () {
        function SearchService(apiService, searchConfigurationService) {
            this.apiService = apiService;
            this.searchConfigurationService = searchConfigurationService;
            this.dataLoaded = new rxjs.Subject();
        }
        Object.defineProperty(SearchService.prototype, "queriesApi", {
            get: function () {
                var _a;
                this._queriesApi = (_a = this._queriesApi) !== null && _a !== void 0 ? _a : new jsApi.QueriesApi(this.apiService.getInstance());
                return this._queriesApi;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(SearchService.prototype, "searchApi", {
            get: function () {
                var _a;
                this._searchApi = (_a = this._searchApi) !== null && _a !== void 0 ? _a : new jsApi.SearchApi(this.apiService.getInstance());
                return this._searchApi;
            },
            enumerable: false,
            configurable: true
        });
        SearchService.prototype.getNodeQueryResults = function (term, options) {
            var _this = this;
            var promise = this.queriesApi.findNodes(term, options);
            promise.then(function (nodePaging) {
                _this.dataLoaded.next(nodePaging);
            }).catch(function (err) { return _this.handleError(err); });
            return rxjs.from(promise);
        };
        SearchService.prototype.search = function (searchTerm, maxResults, skipCount) {
            var _this = this;
            var searchQuery = Object.assign(this.searchConfigurationService.generateQueryBody(searchTerm, maxResults, skipCount));
            var promise = this.searchApi.search(searchQuery);
            promise.then(function (nodePaging) {
                _this.dataLoaded.next(nodePaging);
            }).catch(function (err) { return _this.handleError(err); });
            return rxjs.from(promise);
        };
        SearchService.prototype.searchByQueryBody = function (queryBody) {
            var _this = this;
            var promise = this.searchApi.search(queryBody);
            promise.then(function (nodePaging) {
                _this.dataLoaded.next(nodePaging);
            }).catch(function (err) { return _this.handleError(err); });
            return rxjs.from(promise);
        };
        SearchService.prototype.handleError = function (error) {
            return rxjs.throwError(error || 'Server error');
        };
        return SearchService;
    }());
    SearchService.ɵprov = i0.ɵɵdefineInjectable({ factory: function SearchService_Factory() { return new SearchService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(SearchConfigurationService)); }, token: SearchService, providedIn: "root" });
    SearchService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    SearchService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: SearchConfigurationService }
    ]; };

    var SharedLinksApiService = /** @class */ (function () {
        function SharedLinksApiService(apiService, preferences) {
            this.apiService = apiService;
            this.preferences = preferences;
            this.error = new rxjs.Subject();
        }
        Object.defineProperty(SharedLinksApiService.prototype, "sharedLinksApi", {
            get: function () {
                var _a;
                this._sharedLinksApi = (_a = this._sharedLinksApi) !== null && _a !== void 0 ? _a : new jsApi.SharedlinksApi(this.apiService.getInstance());
                return this._sharedLinksApi;
            },
            enumerable: false,
            configurable: true
        });
        SharedLinksApiService.prototype.getSharedLinks = function (options) {
            if (options === void 0) { options = {}; }
            var defaultOptions = {
                maxItems: this.preferences.paginationSize,
                skipCount: 0,
                include: ['properties', 'allowableOperations']
            };
            var queryOptions = Object.assign({}, defaultOptions, options);
            var promise = this.sharedLinksApi.listSharedLinks(queryOptions);
            return rxjs.from(promise).pipe(operators.catchError(function (err) { return rxjs.of(err); }));
        };
        SharedLinksApiService.prototype.createSharedLinks = function (nodeId, options) {
            if (options === void 0) { options = {}; }
            var promise = this.sharedLinksApi.createSharedLink({ nodeId: nodeId }, options);
            return rxjs.from(promise).pipe(operators.catchError(function (err) { return rxjs.of(err); }));
        };
        SharedLinksApiService.prototype.deleteSharedLink = function (sharedId) {
            var promise = this.sharedLinksApi.deleteSharedLink(sharedId);
            return rxjs.from(promise).pipe(operators.catchError(function (err) { return rxjs.of(err); }));
        };
        return SharedLinksApiService;
    }());
    SharedLinksApiService.ɵprov = i0.ɵɵdefineInjectable({ factory: function SharedLinksApiService_Factory() { return new SharedLinksApiService(i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(UserPreferencesService)); }, token: SharedLinksApiService, providedIn: "root" });
    SharedLinksApiService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    SharedLinksApiService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: UserPreferencesService }
    ]; };

    var LoginDialogService = /** @class */ (function () {
        function LoginDialogService(dialog) {
            this.dialog = dialog;
        }
        LoginDialogService.prototype.openLogin = function (actionName, title) {
            var logged = new rxjs.Subject();
            logged.subscribe({
                complete: this.close.bind(this)
            });
            var data = {
                title: title,
                actionName: actionName,
                logged: logged
            };
            this.openLoginDialog(data, 'adf-login-dialog', '630px');
            return logged;
        };
        LoginDialogService.prototype.openLoginDialog = function (data, currentPanelClass, chosenWidth) {
            this.dialog.open(LoginDialogComponent, { data: data, panelClass: currentPanelClass, width: chosenWidth });
        };
        LoginDialogService.prototype.close = function () {
            this.dialog.closeAll();
        };
        return LoginDialogService;
    }());
    LoginDialogService.ɵprov = i0.ɵɵdefineInjectable({ factory: function LoginDialogService_Factory() { return new LoginDialogService(i0.ɵɵinject(i4.MatDialog)); }, token: LoginDialogService, providedIn: "root" });
    LoginDialogService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    LoginDialogService.ctorParameters = function () { return [
        { type: i4.MatDialog }
    ]; };

    var ExternalAlfrescoApiService = /** @class */ (function () {
        function ExternalAlfrescoApiService() {
            this.nodeUpdated = new rxjs.Subject();
            this.alfrescoApiInitialized = new rxjs.ReplaySubject(1);
        }
        ExternalAlfrescoApiService.prototype.getInstance = function () {
            return this.alfrescoApi;
        };
        Object.defineProperty(ExternalAlfrescoApiService.prototype, "contentApi", {
            get: function () {
                return this.getInstance().content;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ExternalAlfrescoApiService.prototype, "nodesApi", {
            get: function () {
                var _a;
                this._nodesApi = (_a = this._nodesApi) !== null && _a !== void 0 ? _a : new jsApi.NodesApi(this.getInstance());
                return this._nodesApi;
            },
            enumerable: false,
            configurable: true
        });
        ExternalAlfrescoApiService.prototype.init = function (ecmHost, contextRoot) {
            var domainPrefix = this.createPrefixFromHost(ecmHost);
            var config = {
                provider: 'ECM',
                hostEcm: ecmHost,
                authType: 'BASIC',
                contextRoot: contextRoot,
                domainPrefix: domainPrefix
            };
            this.initAlfrescoApi(config);
            this.alfrescoApiInitialized.next(true);
        };
        ExternalAlfrescoApiService.prototype.initAlfrescoApi = function (config) {
            if (this.alfrescoApi) {
                this.alfrescoApi.configureJsApi(config);
            }
            else {
                this.alfrescoApi = new jsApi.AlfrescoApiCompatibility(config);
            }
        };
        ExternalAlfrescoApiService.prototype.createPrefixFromHost = function (url) {
            var match = url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
            var result = null;
            if (match != null && match.length > 2 && typeof match[2] === 'string' && match[2].length > 0) {
                result = match[2];
            }
            return result;
        };
        return ExternalAlfrescoApiService;
    }());
    ExternalAlfrescoApiService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ExternalAlfrescoApiService_Factory() { return new ExternalAlfrescoApiService(); }, token: ExternalAlfrescoApiService, providedIn: "root" });
    ExternalAlfrescoApiService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];

    var LockService = /** @class */ (function () {
        function LockService(alfrescoApiService) {
            this.alfrescoApiService = alfrescoApiService;
        }
        LockService.prototype.isLocked = function (node) {
            var isLocked = false;
            if (this.hasLockConfigured(node)) {
                if (this.isReadOnlyLock(node)) {
                    isLocked = !this.isLockExpired(node);
                }
                else if (this.isLockOwnerAllowed(node)) {
                    isLocked = this.alfrescoApiService.getInstance().getEcmUsername() !== node.properties['cm:lockOwner'].id;
                    if (this.isLockExpired(node)) {
                        isLocked = false;
                    }
                }
            }
            return isLocked;
        };
        LockService.prototype.hasLockConfigured = function (node) {
            return node.isFile && node.isLocked && node.properties['cm:lockType'];
        };
        LockService.prototype.isReadOnlyLock = function (node) {
            return node.properties['cm:lockType'] === 'READ_ONLY_LOCK' && node.properties['cm:lockLifetime'] === 'PERSISTENT';
        };
        LockService.prototype.isLockOwnerAllowed = function (node) {
            return node.properties['cm:lockType'] === 'WRITE_LOCK' && node.properties['cm:lockLifetime'] === 'PERSISTENT';
        };
        LockService.prototype.getLockExpiryTime = function (node) {
            if (node.properties['cm:expiryDate']) {
                return moment$1(node.properties['cm:expiryDate'], 'yyyy-MM-ddThh:mm:ssZ');
            }
            return undefined;
        };
        LockService.prototype.isLockExpired = function (node) {
            var expiryLockTime = this.getLockExpiryTime(node);
            if (expiryLockTime) {
                return moment$1().isAfter(expiryLockTime);
            }
            return false;
        };
        return LockService;
    }());
    LockService.ɵprov = i0.ɵɵdefineInjectable({ factory: function LockService_Factory() { return new LockService(i0.ɵɵinject(AlfrescoApiService)); }, token: LockService, providedIn: "root" });
    LockService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    LockService.ctorParameters = function () { return [
        { type: AlfrescoApiService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DemoForm = /** @class */ (function () {
        function DemoForm() {
            this.easyForm = {
                'formRepresentation': {
                    'id': 1001,
                    'name': 'ISSUE_FORM',
                    'tabs': [],
                    'fields': [
                        {
                            'fieldType': 'ContainerRepresentation',
                            'id': '1498212398417',
                            'name': 'Label',
                            'type': 'container',
                            'value': null,
                            'required': false,
                            'readOnly': false,
                            'overrideId': false,
                            'colspan': 1,
                            'placeholder': null,
                            'minLength': 0,
                            'maxLength': 0,
                            'minValue': null,
                            'maxValue': null,
                            'regexPattern': null,
                            'optionType': null,
                            'hasEmptyValue': false,
                            'options': null,
                            'restUrl': null,
                            'restResponsePath': null,
                            'restIdProperty': null,
                            'restLabelProperty': null,
                            'tab': null,
                            'className': null,
                            'dateDisplayFormat': null,
                            'sizeX': 2,
                            'sizeY': 1,
                            'row': -1,
                            'col': -1,
                            'numberOfColumns': 2,
                            'fields': {
                                '1': [
                                    {
                                        'fieldType': 'RestFieldRepresentation',
                                        'id': 'label',
                                        'name': 'Label',
                                        'type': 'dropdown',
                                        'value': 'Choose one...',
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': true,
                                        'options': [
                                            {
                                                'id': 'empty',
                                                'name': 'Choose one...'
                                            },
                                            {
                                                'id': 'option_1',
                                                'name': 'test1'
                                            },
                                            {
                                                'id': 'option_2',
                                                'name': 'test2'
                                            },
                                            {
                                                'id': 'option_3',
                                                'name': 'test3'
                                            }
                                        ],
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': null,
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'endpoint': null,
                                        'requestHeaders': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'Date',
                                        'name': 'Date',
                                        'type': 'date',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label5',
                                        'name': 'Label5',
                                        'type': 'boolean',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label6',
                                        'name': 'Label6',
                                        'type': 'boolean',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label4',
                                        'name': 'Label4',
                                        'type': 'integer',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'RestFieldRepresentation',
                                        'id': 'label12',
                                        'name': 'Label12',
                                        'type': 'radio-buttons',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': [
                                            {
                                                'id': 'option_1',
                                                'name': 'Option 1'
                                            },
                                            {
                                                'id': 'option_2',
                                                'name': 'Option 2'
                                            }
                                        ],
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'endpoint': null,
                                        'requestHeaders': null
                                    }
                                ]
                            }
                        }
                    ],
                    'outcomes': [],
                    'javascriptEvents': [],
                    'className': '',
                    'style': '',
                    'customFieldTemplates': {},
                    'metadata': {},
                    'variables': [
                        {
                            'id': 'bfca9766-7bc1-45cc-8ecf-cdad551e36e2',
                            'name': 'name1',
                            'type': 'string',
                            'value': ''
                        },
                        {
                            'id': '3ed9f28a-dbae-463f-b991-47ef06658bb6',
                            'name': 'name2',
                            'type': 'string',
                            'value': ''
                        },
                        {
                            'id': 'a7710978-1e9c-4b54-a19c-c6267d2b19a2',
                            'name': 'input02',
                            'type': 'integer'
                        }
                    ],
                    'customFieldsValueInfo': {},
                    'gridsterForm': false,
                    'globalDateFormat': 'D-M-YYYY'
                }
            };
            this.formDefinition = {
                'formRepresentation': {
                    'id': 3003,
                    'name': 'demo-01',
                    'taskId': '7501',
                    'taskName': 'Demo Form 01',
                    'tabs': [
                        {
                            'id': 'tab1',
                            'title': 'Text',
                            'visibilityCondition': null
                        },
                        {
                            'id': 'tab2',
                            'title': 'Misc',
                            'visibilityCondition': null
                        }
                    ],
                    'fields': [
                        {
                            'fieldType': 'ContainerRepresentation',
                            'id': '1488274019966',
                            'name': 'Label',
                            'type': 'container',
                            'value': null,
                            'required': false,
                            'readOnly': false,
                            'overrideId': false,
                            'colspan': 1,
                            'placeholder': null,
                            'minLength': 0,
                            'maxLength': 0,
                            'minValue': null,
                            'maxValue': null,
                            'regexPattern': null,
                            'optionType': null,
                            'hasEmptyValue': null,
                            'options': null,
                            'restUrl': null,
                            'restResponsePath': null,
                            'restIdProperty': null,
                            'restLabelProperty': null,
                            'tab': null,
                            'className': null,
                            'dateDisplayFormat': null,
                            'layout': null,
                            'sizeX': 2,
                            'sizeY': 1,
                            'row': -1,
                            'col': -1,
                            'visibilityCondition': null,
                            'numberOfColumns': 2,
                            'fields': {
                                '1': [],
                                '2': []
                            }
                        },
                        {
                            'fieldType': 'ContainerRepresentation',
                            'id': 'section4',
                            'name': 'Section 4',
                            'type': 'group',
                            'value': null,
                            'required': false,
                            'readOnly': false,
                            'overrideId': false,
                            'colspan': 1,
                            'placeholder': null,
                            'minLength': 0,
                            'maxLength': 0,
                            'minValue': null,
                            'maxValue': null,
                            'regexPattern': null,
                            'optionType': null,
                            'hasEmptyValue': null,
                            'options': null,
                            'restUrl': null,
                            'restResponsePath': null,
                            'restIdProperty': null,
                            'restLabelProperty': null,
                            'tab': 'tab2',
                            'className': null,
                            'dateDisplayFormat': null,
                            'layout': {
                                'row': -1,
                                'column': -1,
                                'colspan': 2
                            },
                            'sizeX': 2,
                            'sizeY': 1,
                            'row': -1,
                            'col': -1,
                            'visibilityCondition': null,
                            'numberOfColumns': 2,
                            'fields': {
                                '1': [
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label8',
                                        'name': 'Label8',
                                        'type': 'people',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab2',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label13',
                                        'name': 'Label13',
                                        'type': 'functional-group',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab2',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label18',
                                        'name': 'Label18',
                                        'type': 'readonly',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab2',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label19',
                                        'name': 'Label19',
                                        'type': 'readonly-text',
                                        'value': 'Display text as part of the form',
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab2',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    }
                                ],
                                '2': [
                                    {
                                        'fieldType': 'HyperlinkRepresentation',
                                        'id': 'label15',
                                        'name': 'Label15',
                                        'type': 'hyperlink',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab2',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'hyperlinkUrl': 'www.google.com',
                                        'displayText': null
                                    },
                                    {
                                        'fieldType': 'AttachFileFieldRepresentation',
                                        'id': 'label16',
                                        'name': 'Label16',
                                        'type': 'upload',
                                        'value': [],
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab2',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1,
                                            'fileSource': {
                                                'serviceId': 'all-file-sources',
                                                'name': 'All file sources'
                                            }
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'metaDataColumnDefinitions': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label17',
                                        'name': 'Label17',
                                        'type': 'select-folder',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab2',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1,
                                            'folderSource': {
                                                'serviceId': 'alfresco-1',
                                                'name': 'Alfresco 5.2 Local',
                                                'metaDataAllowed': true
                                            }
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    }
                                ]
                            }
                        },
                        {
                            'fieldType': 'DynamicTableRepresentation',
                            'id': 'label14',
                            'name': 'Label14',
                            'type': 'dynamic-table',
                            'value': null,
                            'required': false,
                            'readOnly': false,
                            'overrideId': false,
                            'colspan': 1,
                            'placeholder': null,
                            'minLength': 0,
                            'maxLength': 0,
                            'minValue': null,
                            'maxValue': null,
                            'regexPattern': null,
                            'optionType': null,
                            'hasEmptyValue': null,
                            'options': null,
                            'restUrl': null,
                            'restResponsePath': null,
                            'restIdProperty': null,
                            'restLabelProperty': null,
                            'tab': 'tab2',
                            'className': null,
                            'params': {
                                'existingColspan': 1,
                                'maxColspan': 1
                            },
                            'dateDisplayFormat': null,
                            'layout': {
                                'row': -1,
                                'column': -1,
                                'colspan': 2
                            },
                            'sizeX': 2,
                            'sizeY': 2,
                            'row': -1,
                            'col': -1,
                            'visibilityCondition': null,
                            'columnDefinitions': [
                                {
                                    'id': 'id',
                                    'name': 'id',
                                    'type': 'String',
                                    'value': null,
                                    'optionType': null,
                                    'options': null,
                                    'restResponsePath': null,
                                    'restUrl': null,
                                    'restIdProperty': null,
                                    'restLabelProperty': null,
                                    'amountCurrency': null,
                                    'amountEnableFractions': false,
                                    'required': true,
                                    'editable': true,
                                    'sortable': true,
                                    'visible': true,
                                    'endpoint': null,
                                    'requestHeaders': null
                                },
                                {
                                    'id': 'name',
                                    'name': 'name',
                                    'type': 'String',
                                    'value': null,
                                    'optionType': null,
                                    'options': null,
                                    'restResponsePath': null,
                                    'restUrl': null,
                                    'restIdProperty': null,
                                    'restLabelProperty': null,
                                    'amountCurrency': null,
                                    'amountEnableFractions': false,
                                    'required': true,
                                    'editable': true,
                                    'sortable': true,
                                    'visible': true,
                                    'endpoint': null,
                                    'requestHeaders': null
                                }
                            ]
                        },
                        {
                            'fieldType': 'ContainerRepresentation',
                            'id': 'section1',
                            'name': 'Section 1',
                            'type': 'group',
                            'value': null,
                            'required': false,
                            'readOnly': false,
                            'overrideId': false,
                            'colspan': 1,
                            'placeholder': null,
                            'minLength': 0,
                            'maxLength': 0,
                            'minValue': null,
                            'maxValue': null,
                            'regexPattern': null,
                            'optionType': null,
                            'hasEmptyValue': null,
                            'options': null,
                            'restUrl': null,
                            'restResponsePath': null,
                            'restIdProperty': null,
                            'restLabelProperty': null,
                            'tab': 'tab1',
                            'className': null,
                            'dateDisplayFormat': null,
                            'layout': {
                                'row': -1,
                                'column': -1,
                                'colspan': 2
                            },
                            'sizeX': 2,
                            'sizeY': 1,
                            'row': -1,
                            'col': -1,
                            'visibilityCondition': null,
                            'numberOfColumns': 2,
                            'fields': {
                                '1': [
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label1',
                                        'name': 'Label1',
                                        'type': 'text',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label3',
                                        'name': 'Label3',
                                        'type': 'text',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    }
                                ],
                                '2': [
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label2',
                                        'name': 'Label2',
                                        'type': 'multi-line-text',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 2,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    }
                                ]
                            }
                        },
                        {
                            'fieldType': 'ContainerRepresentation',
                            'id': 'section2',
                            'name': 'Section 2',
                            'type': 'group',
                            'value': null,
                            'required': false,
                            'readOnly': false,
                            'overrideId': false,
                            'colspan': 1,
                            'placeholder': null,
                            'minLength': 0,
                            'maxLength': 0,
                            'minValue': null,
                            'maxValue': null,
                            'regexPattern': null,
                            'optionType': null,
                            'hasEmptyValue': null,
                            'options': null,
                            'restUrl': null,
                            'restResponsePath': null,
                            'restIdProperty': null,
                            'restLabelProperty': null,
                            'tab': 'tab1',
                            'className': null,
                            'dateDisplayFormat': null,
                            'layout': {
                                'row': -1,
                                'column': -1,
                                'colspan': 2
                            },
                            'sizeX': 2,
                            'sizeY': 1,
                            'row': -1,
                            'col': -1,
                            'visibilityCondition': null,
                            'numberOfColumns': 2,
                            'fields': {
                                '1': [
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label4',
                                        'name': 'Label4',
                                        'type': 'integer',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label7',
                                        'name': 'Label7',
                                        'type': 'date',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    }
                                ],
                                '2': [
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label5',
                                        'name': 'Label5',
                                        'type': 'boolean',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'FormFieldRepresentation',
                                        'id': 'label6',
                                        'name': 'Label6',
                                        'type': 'boolean',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null
                                    },
                                    {
                                        'fieldType': 'AmountFieldRepresentation',
                                        'id': 'label11',
                                        'name': 'Label11',
                                        'type': 'amount',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': '10',
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'enableFractions': false,
                                        'currency': null
                                    }
                                ]
                            }
                        },
                        {
                            'fieldType': 'ContainerRepresentation',
                            'id': 'section3',
                            'name': 'Section 3',
                            'type': 'group',
                            'value': null,
                            'required': false,
                            'readOnly': false,
                            'overrideId': false,
                            'colspan': 1,
                            'placeholder': null,
                            'minLength': 0,
                            'maxLength': 0,
                            'minValue': null,
                            'maxValue': null,
                            'regexPattern': null,
                            'optionType': null,
                            'hasEmptyValue': null,
                            'options': null,
                            'restUrl': null,
                            'restResponsePath': null,
                            'restIdProperty': null,
                            'restLabelProperty': null,
                            'tab': 'tab1',
                            'className': null,
                            'dateDisplayFormat': null,
                            'layout': {
                                'row': -1,
                                'column': -1,
                                'colspan': 2
                            },
                            'sizeX': 2,
                            'sizeY': 1,
                            'row': -1,
                            'col': -1,
                            'visibilityCondition': null,
                            'numberOfColumns': 2,
                            'fields': {
                                '1': [
                                    {
                                        'fieldType': 'RestFieldRepresentation',
                                        'id': 'label9',
                                        'name': 'Label9',
                                        'type': 'dropdown',
                                        'value': 'Choose one...',
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': true,
                                        'options': [
                                            {
                                                'id': 'empty',
                                                'name': 'Choose one...'
                                            }
                                        ],
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'endpoint': null,
                                        'requestHeaders': null
                                    },
                                    {
                                        'fieldType': 'RestFieldRepresentation',
                                        'id': 'label12',
                                        'name': 'Label12',
                                        'type': 'radio-buttons',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': [
                                            {
                                                'id': 'option_1',
                                                'name': 'Option 1'
                                            },
                                            {
                                                'id': 'option_2',
                                                'name': 'Option 2'
                                            }
                                        ],
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 2
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'endpoint': null,
                                        'requestHeaders': null
                                    }
                                ],
                                '2': [
                                    {
                                        'fieldType': 'RestFieldRepresentation',
                                        'id': 'label10',
                                        'name': 'Label10',
                                        'type': 'typeahead',
                                        'value': null,
                                        'required': false,
                                        'readOnly': false,
                                        'overrideId': false,
                                        'colspan': 1,
                                        'placeholder': null,
                                        'minLength': 0,
                                        'maxLength': 0,
                                        'minValue': null,
                                        'maxValue': null,
                                        'regexPattern': null,
                                        'optionType': null,
                                        'hasEmptyValue': null,
                                        'options': null,
                                        'restUrl': null,
                                        'restResponsePath': null,
                                        'restIdProperty': null,
                                        'restLabelProperty': null,
                                        'tab': 'tab1',
                                        'className': null,
                                        'params': {
                                            'existingColspan': 1,
                                            'maxColspan': 1
                                        },
                                        'dateDisplayFormat': null,
                                        'layout': {
                                            'row': -1,
                                            'column': -1,
                                            'colspan': 1
                                        },
                                        'sizeX': 1,
                                        'sizeY': 1,
                                        'row': -1,
                                        'col': -1,
                                        'visibilityCondition': null,
                                        'endpoint': null,
                                        'requestHeaders': null
                                    }
                                ]
                            }
                        }
                    ],
                    'outcomes': [],
                    'javascriptEvents': [],
                    'className': '',
                    'style': '',
                    'customFieldTemplates': {},
                    'metadata': {},
                    'variables': [
                        {
                            'id': 'bfca9766-7bc1-45cc-8ecf-cdad551e36e2',
                            'name': 'name1',
                            'type': 'string',
                            'value': ''
                        },
                        {
                            'id': '3ed9f28a-dbae-463f-b991-47ef06658bb6',
                            'name': 'name2',
                            'type': 'string',
                            'value': ''
                        },
                        {
                            'id': 'a7710978-1e9c-4b54-a19c-c6267d2b19a2',
                            'name': 'input02',
                            'type': 'integer'
                        }
                    ],
                    'gridsterForm': false,
                    'globalDateFormat': 'D-M-YYYY'
                }
            };
            this.simpleFormDefinition = {
                'formRepresentation': {
                    'id': 1001,
                    'name': 'SIMPLE_FORM_EXAMPLE',
                    'description': '',
                    'version': 1,
                    'lastUpdatedBy': 2,
                    'lastUpdatedByFullName': 'Test01 01Test',
                    'lastUpdated': '2018-02-26T17:44:04.543+0000',
                    'stencilSetId': 0,
                    'referenceId': null,
                    'taskId': '9999',
                    'formDefinition': {
                        'tabs': [],
                        'fields': [
                            {
                                'fieldType': 'ContainerRepresentation',
                                'id': '1519666726245',
                                'name': 'Label',
                                'type': 'container',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'dateDisplayFormat': null,
                                'layout': null,
                                'sizeX': 2,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null,
                                'numberOfColumns': 2,
                                'fields': {
                                    '1': [
                                        {
                                            'fieldType': 'RestFieldRepresentation',
                                            'id': 'typeaheadField',
                                            'name': 'TypeaheadField',
                                            'type': 'typeahead',
                                            'value': null,
                                            'required': false,
                                            'readOnly': false,
                                            'overrideId': false,
                                            'colspan': 1,
                                            'placeholder': null,
                                            'minLength': 0,
                                            'maxLength': 0,
                                            'minValue': null,
                                            'maxValue': null,
                                            'regexPattern': null,
                                            'optionType': null,
                                            'hasEmptyValue': null,
                                            'options': null,
                                            'restUrl': 'https://jsonplaceholder.typicode.com/users',
                                            'restResponsePath': null,
                                            'restIdProperty': 'id',
                                            'restLabelProperty': 'name',
                                            'tab': null,
                                            'className': null,
                                            'params': {
                                                'existingColspan': 1,
                                                'maxColspan': 2
                                            },
                                            'dateDisplayFormat': null,
                                            'layout': {
                                                'row': -1,
                                                'column': -1,
                                                'colspan': 1
                                            },
                                            'sizeX': 1,
                                            'sizeY': 1,
                                            'row': -1,
                                            'col': -1,
                                            'visibilityCondition': null,
                                            'endpoint': null,
                                            'requestHeaders': null
                                        }
                                    ],
                                    '2': [
                                        {
                                            'fieldType': 'RestFieldRepresentation',
                                            'id': 'radioButton',
                                            'name': 'RadioButtons',
                                            'type': 'radio-buttons',
                                            'value': null,
                                            'required': false,
                                            'readOnly': false,
                                            'overrideId': false,
                                            'colspan': 1,
                                            'placeholder': null,
                                            'minLength': 0,
                                            'maxLength': 0,
                                            'minValue': null,
                                            'maxValue': null,
                                            'regexPattern': null,
                                            'optionType': null,
                                            'hasEmptyValue': null,
                                            'options': [
                                                {
                                                    'id': 'option_1',
                                                    'name': 'Option 1'
                                                },
                                                {
                                                    'id': 'option_2',
                                                    'name': 'Option 2'
                                                },
                                                {
                                                    'id': 'option_3',
                                                    'name': 'Option 3'
                                                }
                                            ],
                                            'restUrl': null,
                                            'restResponsePath': null,
                                            'restIdProperty': null,
                                            'restLabelProperty': null,
                                            'tab': null,
                                            'className': null,
                                            'params': {
                                                'existingColspan': 1,
                                                'maxColspan': 1
                                            },
                                            'dateDisplayFormat': null,
                                            'layout': {
                                                'row': -1,
                                                'column': -1,
                                                'colspan': 1
                                            },
                                            'sizeX': 1,
                                            'sizeY': 2,
                                            'row': -1,
                                            'col': -1,
                                            'visibilityCondition': null,
                                            'endpoint': null,
                                            'requestHeaders': null
                                        }
                                    ]
                                }
                            },
                            {
                                'fieldType': 'ContainerRepresentation',
                                'id': '1519666735185',
                                'name': 'Label',
                                'type': 'container',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'dateDisplayFormat': null,
                                'layout': null,
                                'sizeX': 2,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null,
                                'numberOfColumns': 2,
                                'fields': {
                                    '1': [
                                        {
                                            'fieldType': 'RestFieldRepresentation',
                                            'id': 'selectBox',
                                            'name': 'SelectBox',
                                            'type': 'dropdown',
                                            'value': 'Choose one...',
                                            'required': false,
                                            'readOnly': false,
                                            'overrideId': false,
                                            'colspan': 1,
                                            'placeholder': null,
                                            'minLength': 0,
                                            'maxLength': 0,
                                            'minValue': null,
                                            'maxValue': null,
                                            'regexPattern': null,
                                            'optionType': 'manual',
                                            'hasEmptyValue': true,
                                            'options': [
                                                {
                                                    'id': 'empty',
                                                    'name': 'Choose one...'
                                                },
                                                {
                                                    'id': 'option_1',
                                                    'name': '1'
                                                },
                                                {
                                                    'id': 'option_2',
                                                    'name': '2'
                                                },
                                                {
                                                    'id': 'option_3',
                                                    'name': '3'
                                                }
                                            ],
                                            'restUrl': null,
                                            'restResponsePath': null,
                                            'restIdProperty': null,
                                            'restLabelProperty': null,
                                            'tab': null,
                                            'className': null,
                                            'params': {
                                                'existingColspan': 1,
                                                'maxColspan': 2
                                            },
                                            'dateDisplayFormat': null,
                                            'layout': {
                                                'row': -1,
                                                'column': -1,
                                                'colspan': 1
                                            },
                                            'sizeX': 1,
                                            'sizeY': 1,
                                            'row': -1,
                                            'col': -1,
                                            'visibilityCondition': null,
                                            'endpoint': null,
                                            'requestHeaders': null
                                        }
                                    ],
                                    '2': []
                                }
                            }
                        ],
                        'outcomes': [],
                        'javascriptEvents': [],
                        'className': '',
                        'style': '',
                        'customFieldTemplates': {},
                        'metadata': {},
                        'variables': [
                            {
                                'id': 'bfca9766-7bc1-45cc-8ecf-cdad551e36e2',
                                'name': 'name1',
                                'type': 'string',
                                'value': ''
                            },
                            {
                                'id': '3ed9f28a-dbae-463f-b991-47ef06658bb6',
                                'name': 'name2',
                                'type': 'string',
                                'value': ''
                            },
                            {
                                'id': 'a7710978-1e9c-4b54-a19c-c6267d2b19a2',
                                'name': 'input02',
                                'type': 'integer'
                            }
                        ],
                        'customFieldsValueInfo': {},
                        'gridsterForm': false
                    }
                }
            };
            this.cloudFormDefinition = {
                'formRepresentation': {
                    'id': 'text-form',
                    'name': 'test-start-form',
                    'version': 0,
                    'description': '',
                    'formDefinition': {
                        'tabs': [],
                        'fields': [
                            {
                                'id': '1511517333638',
                                'type': 'container',
                                'fieldType': 'ContainerRepresentation',
                                'name': 'Label',
                                'tab': null,
                                'numberOfColumns': 2,
                                'fields': {
                                    '1': [
                                        {
                                            'fieldType': 'FormFieldRepresentation',
                                            'id': 'texttest',
                                            'name': 'texttest',
                                            'type': 'text',
                                            'value': null,
                                            'required': false,
                                            'placeholder': 'text',
                                            'params': {
                                                'existingColspan': 2,
                                                'maxColspan': 6,
                                                'inputMaskReversed': true,
                                                'inputMask': '0#',
                                                'inputMaskPlaceholder': '(0-9)'
                                            }
                                        }
                                    ],
                                    '2': [{
                                            'fieldType': 'AttachFileFieldRepresentation',
                                            'id': 'attachfiletest',
                                            'name': 'attachfiletest',
                                            'type': 'upload',
                                            'required': true,
                                            'colspan': 2,
                                            'placeholder': 'attachfile',
                                            'params': {
                                                'existingColspan': 2,
                                                'maxColspan': 2,
                                                'fileSource': {
                                                    'serviceId': 'local-file',
                                                    'name': 'Local File'
                                                },
                                                'multiple': true,
                                                'link': false
                                            },
                                            'visibilityCondition': {}
                                        }]
                                }
                            }
                        ],
                        'outcomes': [],
                        'metadata': {
                            'property1': 'value1',
                            'property2': 'value2'
                        },
                        'variables': [
                            {
                                'name': 'variable1',
                                'type': 'string',
                                'value': 'value1'
                            },
                            {
                                'name': 'variable2',
                                'type': 'string',
                                'value': 'value2'
                            }
                        ]
                    }
                }
            };
        }
        DemoForm.prototype.getEasyForm = function () {
            return this.easyForm;
        };
        DemoForm.prototype.getFormDefinition = function () {
            return this.formDefinition;
        };
        DemoForm.prototype.getSimpleFormDefinition = function () {
            return this.simpleFormDefinition;
        };
        DemoForm.prototype.getFormCloudDefinition = function () {
            return this.cloudFormDefinition;
        };
        return DemoForm;
    }());

    var CoreAutomationService = /** @class */ (function () {
        function CoreAutomationService(appConfigService, alfrescoApiService, userPreferencesService, storageService) {
            this.appConfigService = appConfigService;
            this.alfrescoApiService = alfrescoApiService;
            this.userPreferencesService = userPreferencesService;
            this.storageService = storageService;
            this.forms = new DemoForm();
        }
        CoreAutomationService.prototype.setup = function () {
            var _this = this;
            var adfProxy = window['adf'] || {};
            adfProxy.getConfigField = function (field) {
                return _this.appConfigService.get(field);
            };
            adfProxy.setConfigField = function (field, value) {
                _this.appConfigService.config[field] = JSON.parse(value);
            };
            adfProxy.setStorageItem = function (key, data) {
                _this.storageService.setItem(key, data);
            };
            adfProxy.removeStorageItem = function (key) {
                _this.storageService.removeItem(key);
            };
            adfProxy.getStorageItem = function (key) {
                return _this.storageService.getItem(key);
            };
            adfProxy.setUserPreference = function (key, data) {
                _this.userPreferencesService.set(key, data);
            };
            adfProxy.setFormInEditor = function (json) {
                _this.forms.formDefinition = JSON.parse(json);
            };
            adfProxy.setCloudFormInEditor = function (json) {
                _this.forms.cloudFormDefinition = JSON.parse(json);
            };
            adfProxy.clearStorage = function () {
                _this.storageService.clear();
            };
            adfProxy.apiReset = function () {
                _this.alfrescoApiService.reset();
            };
            window['adf'] = adfProxy;
        };
        return CoreAutomationService;
    }());
    CoreAutomationService.ɵprov = i0.ɵɵdefineInjectable({ factory: function CoreAutomationService_Factory() { return new CoreAutomationService(i0.ɵɵinject(AppConfigService), i0.ɵɵinject(AlfrescoApiService), i0.ɵɵinject(UserPreferencesService), i0.ɵɵinject(StorageService)); }, token: CoreAutomationService, providedIn: "root" });
    CoreAutomationService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    CoreAutomationService.ctorParameters = function () { return [
        { type: AppConfigService },
        { type: AlfrescoApiService },
        { type: UserPreferencesService },
        { type: StorageService }
    ]; };

    var IdentityGroupService = /** @class */ (function () {
        function IdentityGroupService(oAuth2Service, appConfigService) {
            this.oAuth2Service = oAuth2Service;
            this.appConfigService = appConfigService;
        }
        Object.defineProperty(IdentityGroupService.prototype, "identityHost", {
            get: function () {
                return "" + this.appConfigService.get('identityHost');
            },
            enumerable: false,
            configurable: true
        });
        IdentityGroupService.prototype.getGroups = function () {
            var url = this.identityHost + "/groups";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityGroupService.prototype.getAvailableRoles = function (groupId) {
            var url = this.identityHost + "/groups/" + groupId + "/role-mappings/realm/available";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityGroupService.prototype.getAssignedRoles = function (groupId) {
            var url = this.identityHost + "/groups/" + groupId + "/role-mappings/realm";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityGroupService.prototype.assignRoles = function (groupId, roles) {
            var url = this.identityHost + "/groups/" + groupId + "/role-mappings/realm";
            var bodyParam = JSON.stringify(roles);
            return this.oAuth2Service.post({ url: url, bodyParam: bodyParam });
        };
        IdentityGroupService.prototype.removeRoles = function (groupId, roles) {
            var url = this.identityHost + "/groups/" + groupId + "/role-mappings/realm";
            var bodyParam = JSON.stringify(roles);
            return this.oAuth2Service.delete({ url: url, bodyParam: bodyParam });
        };
        IdentityGroupService.prototype.getEffectiveRoles = function (groupId) {
            var url = this.identityHost + "/groups/" + groupId + "/role-mappings/realm/composite";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityGroupService.prototype.queryGroups = function (requestQuery) {
            var _this = this;
            var url = this.identityHost + "/groups";
            var queryParams = { first: requestQuery.first || 0, max: requestQuery.max || 5 };
            return this.getTotalGroupsCount().pipe(operators.switchMap(function (totalCount) { return _this.oAuth2Service.get({ url: url, queryParams: queryParams }).pipe(operators.map(function (response) {
                return {
                    entries: response,
                    pagination: {
                        skipCount: requestQuery.first,
                        maxItems: requestQuery.max,
                        count: totalCount.count,
                        hasMoreItems: false,
                        totalItems: totalCount.count
                    }
                };
            })); }));
        };
        IdentityGroupService.prototype.getTotalGroupsCount = function () {
            var url = this.identityHost + "/groups/count";
            return this.oAuth2Service.get({ url: url });
        };
        IdentityGroupService.prototype.createGroup = function (newGroup) {
            var url = this.identityHost + "/groups";
            var bodyParam = newGroup;
            return this.oAuth2Service.post({ url: url, bodyParam: bodyParam });
        };
        IdentityGroupService.prototype.updateGroup = function (groupId, updatedGroup) {
            var url = this.identityHost + "/groups/" + groupId;
            var bodyParam = JSON.stringify(updatedGroup);
            return this.oAuth2Service.put({ url: url, bodyParam: bodyParam });
        };
        IdentityGroupService.prototype.deleteGroup = function (groupId) {
            var url = this.identityHost + "/groups/" + groupId;
            return this.oAuth2Service.delete({ url: url });
        };
        IdentityGroupService.prototype.findGroupsByName = function (searchParams) {
            if (searchParams.name === '') {
                return rxjs.of([]);
            }
            var url = this.identityHost + "/groups";
            var queryParams = { search: searchParams.name };
            return this.oAuth2Service.get({ url: url, queryParams: queryParams });
        };
        IdentityGroupService.prototype.getGroupRoles = function (groupId) {
            var url = this.buildRolesUrl(groupId);
            return this.oAuth2Service.get({ url: url });
        };
        IdentityGroupService.prototype.checkGroupHasRole = function (groupId, roleNames) {
            return this.getGroupRoles(groupId).pipe(operators.map(function (groupRoles) {
                var hasRole = false;
                if (groupRoles && groupRoles.length > 0) {
                    roleNames.forEach(function (roleName) {
                        var role = groupRoles.find(function (_a) {
                            var name = _a.name;
                            return roleName === name;
                        });
                        if (role) {
                            hasRole = true;
                            return;
                        }
                    });
                }
                return hasRole;
            }));
        };
        IdentityGroupService.prototype.getClientIdByApplicationName = function (applicationName) {
            var url = this.identityHost + "/clients";
            var queryParams = { clientId: applicationName };
            return this.oAuth2Service.get({ url: url, queryParams: queryParams }).pipe(operators.map(function (response) { return response && response.length > 0 ? response[0].id : ''; }));
        };
        IdentityGroupService.prototype.getClientRoles = function (groupId, clientId) {
            var url = this.identityHost + "/groups/" + groupId + "/role-mappings/clients/" + clientId;
            return this.oAuth2Service.get({ url: url });
        };
        IdentityGroupService.prototype.checkGroupHasClientApp = function (groupId, clientId) {
            return this.getClientRoles(groupId, clientId).pipe(operators.map(function (response) { return response && response.length > 0; }));
        };
        IdentityGroupService.prototype.checkGroupHasAnyClientAppRole = function (groupId, clientId, roleNames) {
            return this.getClientRoles(groupId, clientId).pipe(operators.map(function (clientRoles) {
                var hasRole = false;
                if (clientRoles.length > 0) {
                    roleNames.forEach(function (roleName) {
                        var role = clientRoles.find(function (_a) {
                            var name = _a.name;
                            return name === roleName;
                        });
                        if (role) {
                            hasRole = true;
                            return;
                        }
                    });
                }
                return hasRole;
            }));
        };
        IdentityGroupService.prototype.buildRolesUrl = function (groupId) {
            return this.identityHost + "/groups/" + groupId + "/role-mappings/realm/composite";
        };
        return IdentityGroupService;
    }());
    IdentityGroupService.ɵprov = i0.ɵɵdefineInjectable({ factory: function IdentityGroupService_Factory() { return new IdentityGroupService(i0.ɵɵinject(OAuth2Service), i0.ɵɵinject(AppConfigService)); }, token: IdentityGroupService, providedIn: "root" });
    IdentityGroupService.decorators = [
        { type: i0.Injectable, args: [{ providedIn: 'root' },] }
    ];
    IdentityGroupService.ctorParameters = function () { return [
        { type: OAuth2Service },
        { type: AppConfigService }
    ]; };

    var IdentityRoleService = /** @class */ (function () {
        function IdentityRoleService(http, appConfig, logService) {
            this.http = http;
            this.appConfig = appConfig;
            this.logService = logService;
            this.contextRoot = '';
            this.identityHost = '';
            this.contextRoot = this.appConfig.get('apiHost', '');
            this.identityHost = this.appConfig.get('identityHost');
        }
        IdentityRoleService.prototype.getRoles = function (skipCount, size) {
            var _this = this;
            if (skipCount === void 0) { skipCount = 0; }
            if (size === void 0) { size = 5; }
            return this.http.get(this.identityHost + "/roles").pipe(operators.map(function (res) {
                return _this.preparePaginationWithRoles(res, skipCount, size);
            }), operators.catchError(function (error) { return _this.handleError(error); }));
        };
        IdentityRoleService.prototype.preparePaginationWithRoles = function (roles, skipCount, size) {
            if (skipCount === void 0) { skipCount = 0; }
            if (size === void 0) { size = 5; }
            return {
                entries: roles.slice(skipCount, skipCount + size),
                pagination: {
                    skipCount: skipCount,
                    maxItems: size,
                    count: roles.length,
                    hasMoreItems: false,
                    totalItems: roles.length
                }
            };
        };
        IdentityRoleService.prototype.addRole = function (newRole) {
            var _this = this;
            if (newRole) {
                var request = newRole;
                return this.http
                    .post(this.identityHost + "/roles", request)
                    .pipe(operators.catchError(function (error) { return _this.handleError(error); }));
            }
            return rxjs.of();
        };
        IdentityRoleService.prototype.deleteRole = function (deletedRole) {
            var _this = this;
            return this.http
                .delete(this.identityHost + "/roles-by-id/" + deletedRole.id)
                .pipe(operators.catchError(function (error) { return _this.handleError(error); }));
        };
        IdentityRoleService.prototype.updateRole = function (updatedRole, roleId) {
            var _this = this;
            if (updatedRole && roleId) {
                var request = updatedRole;
                return this.http
                    .put(this.identityHost + "/roles-by-id/" + roleId, request)
                    .pipe(operators.catchError(function (error) { return _this.handleError(error); }));
            }
            return rxjs.of();
        };
        IdentityRoleService.prototype.handleError = function (error) {
            this.logService.error(error);
            return rxjs.throwError(error || 'Server error');
        };
        return IdentityRoleService;
    }());
    IdentityRoleService.ɵprov = i0.ɵɵdefineInjectable({ factory: function IdentityRoleService_Factory() { return new IdentityRoleService(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(AppConfigService), i0.ɵɵinject(LogService)); }, token: IdentityRoleService, providedIn: "root" });
    IdentityRoleService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    IdentityRoleService.ctorParameters = function () { return [
        { type: i1.HttpClient },
        { type: AppConfigService },
        { type: LogService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AuthBearerInterceptor = /** @class */ (function () {
        function AuthBearerInterceptor(injector) {
            this.injector = injector;
        }
        AuthBearerInterceptor.prototype.loadExcludedUrlsRegex = function () {
            var excludedUrls = this.authService.getBearerExcludedUrls();
            this.excludedUrlsRegex = excludedUrls.map(function (urlPattern) { return new RegExp(urlPattern, 'gi'); }) || [];
        };
        AuthBearerInterceptor.prototype.intercept = function (req, next) {
            var _this = this;
            this.authService = this.injector.get(AuthenticationService);
            if (!this.authService || !this.authService.getBearerExcludedUrls()) {
                return next.handle(req);
            }
            if (!this.excludedUrlsRegex) {
                this.loadExcludedUrlsRegex();
            }
            var urlRequest = req.url;
            var shallPass = !!this.excludedUrlsRegex.find(function (regex) { return regex.test(urlRequest); });
            if (shallPass) {
                return next.handle(req)
                    .pipe(operators.catchError(function (error) {
                    return rxjs.throwError(error);
                }));
            }
            return this.authService.addTokenToHeader(req.headers)
                .pipe(operators.mergeMap(function (headersWithBearer) {
                var headerWithContentType = _this.appendJsonContentType(headersWithBearer);
                var kcReq = req.clone({ headers: headerWithContentType });
                return next.handle(kcReq)
                    .pipe(operators.catchError(function (error) {
                    return rxjs.throwError(error);
                }));
            }));
        };
        AuthBearerInterceptor.prototype.appendJsonContentType = function (headers) {
            return headers.set('Content-Type', 'application/json;charset=UTF-8');
        };
        return AuthBearerInterceptor;
    }());
    AuthBearerInterceptor.decorators = [
        { type: i0.Injectable }
    ];
    AuthBearerInterceptor.ctorParameters = function () { return [
        { type: i0.Injector }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var DialogModule = /** @class */ (function () {
        function DialogModule() {
        }
        return DialogModule;
    }());
    DialogModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        PipeModule
                    ],
                    declarations: [
                        DownloadZipDialogComponent
                    ],
                    exports: [
                        DownloadZipDialogComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NotificationHistoryComponent = /** @class */ (function () {
        function NotificationHistoryComponent(notificationService, storageService, cd) {
            this.notificationService = notificationService;
            this.storageService = storageService;
            this.cd = cd;
            this.menuPositionX = 'after';
            this.menuPositionY = 'below';
            this.maxNotifications = 5;
            this.onDestroy$ = new rxjs.Subject();
            this.notifications = [];
            this.paginatedNotifications = [];
        }
        NotificationHistoryComponent.prototype.ngOnInit = function () {
            this.notifications = JSON.parse(this.storageService.getItem(NotificationHistoryComponent.NOTIFICATION_STORAGE)) || [];
        };
        NotificationHistoryComponent.prototype.ngAfterViewInit = function () {
            var _this = this;
            this.notificationService.notifications$
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (notification) {
                _this.addNewNotification(notification);
                _this.cd.detectChanges();
            });
        };
        NotificationHistoryComponent.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        NotificationHistoryComponent.prototype.addNewNotification = function (notification) {
            this.notifications.unshift(notification);
            if (this.notifications.length > NotificationHistoryComponent.MAX_NOTIFICATION_STACK_LENGTH) {
                this.notifications.shift();
            }
            this.saveNotifications();
            this.createPagination();
        };
        NotificationHistoryComponent.prototype.saveNotifications = function () {
            this.storageService.setItem(NotificationHistoryComponent.NOTIFICATION_STORAGE, JSON.stringify(this.notifications.filter(function (notification) { return notification.type !== exports.NOTIFICATION_TYPE.RECURSIVE; })));
        };
        NotificationHistoryComponent.prototype.onMenuOpened = function () {
            this.createPagination();
        };
        NotificationHistoryComponent.prototype.onKeyPress = function (event) {
            this.closeUserModal(event);
        };
        NotificationHistoryComponent.prototype.closeUserModal = function ($event) {
            if ($event.keyCode === 27) {
                this.trigger.closeMenu();
            }
        };
        NotificationHistoryComponent.prototype.markAsRead = function () {
            this.notifications = [];
            this.paginatedNotifications = [];
            this.storageService.removeItem(NotificationHistoryComponent.NOTIFICATION_STORAGE);
            this.createPagination();
            this.trigger.closeMenu();
        };
        NotificationHistoryComponent.prototype.createPagination = function () {
            this.pagination = {
                skipCount: this.maxNotifications,
                maxItems: this.maxNotifications,
                totalItems: this.notifications.length,
                hasMoreItems: this.notifications.length > this.maxNotifications
            };
            this.paginatedNotifications = this.notifications.slice(0, this.pagination.skipCount);
        };
        NotificationHistoryComponent.prototype.loadMore = function () {
            this.pagination.skipCount = this.pagination.maxItems + this.pagination.skipCount;
            this.pagination.hasMoreItems = this.notifications.length > this.pagination.skipCount;
            this.paginatedNotifications = this.notifications.slice(0, this.pagination.skipCount);
        };
        NotificationHistoryComponent.prototype.hasMoreNotifications = function () {
            var _a;
            return (_a = this.pagination) === null || _a === void 0 ? void 0 : _a.hasMoreItems;
        };
        NotificationHistoryComponent.prototype.onNotificationClick = function (notification) {
            if (notification.clickCallBack) {
                notification.clickCallBack(notification.args);
                this.trigger.closeMenu();
            }
        };
        return NotificationHistoryComponent;
    }());
    NotificationHistoryComponent.MAX_NOTIFICATION_STACK_LENGTH = 100;
    NotificationHistoryComponent.NOTIFICATION_STORAGE = 'notification-history';
    NotificationHistoryComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-notification-history',
                    template: "<div (keyup)=\"onKeyPress($event)\">\n    <button mat-button\n            [matMenuTriggerFor]=\"menu\"\n            class=\"adf-notification-history-menu_button\"\n            id=\"adf-notification-history-open-button\"\n            (menuOpened)=\"onMenuOpened()\">\n        <mat-icon matBadge=\"&#8288;\"\n                  [matBadgeHidden]=\"!notifications.length\"\n                  matBadgeColor=\"accent\"\n                  matBadgeSize=\"small\">notifications</mat-icon>\n    </button>\n    <mat-menu #menu=\"matMenu\"\n              [xPosition]=\"menuPositionX\"\n              [yPosition]=\"menuPositionY\"\n              id=\"adf-notification-history-menu\"\n              class=\"adf-notification-history-menu\">\n\n        <div class=\"adf-notification-history-list\"\n             (click)=\"$event.stopPropagation()\">\n            <div mat-subheader>\n                <span>{{ 'NOTIFICATIONS.TITLE' | translate }}</span>\n                <button (click)=\"markAsRead()\"\n                        id=\"adf-notification-history-mark-as-read\"\n                        mat-button\n                        color=\"accent\"\n                        *ngIf=\"notifications.length\">\n                    {{ 'NOTIFICATIONS.MARK_AS_READ' | translate }}\n                </button>\n            </div>\n\n            <mat-divider></mat-divider>\n\n            <mat-list>\n                <ng-container *ngIf=\"notifications.length; else empty_list_template\">\n                    <mat-list-item *ngFor=\"let notification of paginatedNotifications\"\n                                   class=\"adf-notification-history-menu-item\"\n                                   (click)=\"onNotificationClick(notification)\">\n                        <div *ngIf=\"notification.initiator; else no_avatar\"\n                             matListAvatar\n                             [outerHTML]=\"notification.initiator | usernameInitials:'adf-notification-initiator-pic'\">\n                        </div>\n                        <ng-template #no_avatar>\n                            <mat-icon mat-list-icon\n                                      class=\"adf-notification-history-menu-initiator\">{{ notification | notificationIcon\n                                }}</mat-icon>\n                        </ng-template>\n                        <p class=\"adf-notification-history-menu-message\"\n                           *ngFor=\"let message of notification.messages\"\n                           mat-line [matTooltip]=\"message\" matTooltipShowDelay=\"1000\">{{ message }}</p>\n                        <p class=\"adf-notification-history-menu-date\"\n                           mat-line> {{notification.datetime | adfTimeAgo}} </p>\n                    </mat-list-item>\n                </ng-container>\n                <ng-template #empty_list_template>\n                    <mat-list-item id=\"adf-notification-history-component-no-message\"\n                                   class=\"adf-notification-history-menu-no-message\">\n                        <h4 mat-line>{{ 'NOTIFICATIONS.NO_MESSAGE' | translate }}</h4>\n                    </mat-list-item>\n                </ng-template>\n            </mat-list>\n\n            <mat-divider></mat-divider>\n\n            <div class=\"adf-notification-history-load-more\"\n                 *ngIf=\"hasMoreNotifications()\">\n                <button mat-button\n                        (click)=\"loadMore()\">\n                    {{ 'NOTIFICATIONS.LOAD_MORE' | translate }}\n                </button>\n            </div>\n        </div>\n    </mat-menu>\n</div>\n",
                    encapsulation: i0.ViewEncapsulation.None,
                    styles: [".adf-notification-history-menu_button.mat-button{border-radius:90%;height:40px;margin-right:0;min-width:40px;padding:0}.adf-notification-history-list .mat-subheader{justify-content:space-between}.adf-notification-history-menu-item{cursor:pointer}.adf-notification-history-menu-item:focus{background:var(--theme-bg-hover-color);outline:none}.adf-notification-history-menu-item:hover{background-color:var(--theme-bg-hover-color)}.adf-notification-history-menu-message,.adf-notification-history-menu-no-message{font-size:13px!important}.adf-notification-history-menu-date{font-size:12px!important}.adf-notification-history-menu-initiator{margin:4px}.adf-notification-initiator-pic{background:var(--theme-accent-color);border-radius:100px;color:var(--theme-colors-mat-grey);display:inline-block;font-size:18px;font-weight:bolder;height:40px;line-height:40px;min-width:40px;text-align:center;text-transform:uppercase;vertical-align:middle}.adf-notification-history-load-more{display:flex;justify-content:center;padding:10px}.mat-menu-panel.adf-notification-history-menu{max-height:500px;min-width:320px}.mat-menu-panel.adf-notification-history-menu .mat-menu-content{padding:0}"]
                },] }
    ];
    NotificationHistoryComponent.ctorParameters = function () { return [
        { type: NotificationService },
        { type: StorageService },
        { type: i0.ChangeDetectorRef }
    ]; };
    NotificationHistoryComponent.propDecorators = {
        trigger: [{ type: i0.ViewChild, args: [menu.MatMenuTrigger, { static: true },] }],
        menuPositionX: [{ type: i0.Input }],
        menuPositionY: [{ type: i0.Input }],
        maxNotifications: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NotificationIconPipe = /** @class */ (function () {
        function NotificationIconPipe() {
        }
        NotificationIconPipe.prototype.transform = function (notification) {
            if (notification.icon) {
                return notification.icon;
            }
            else {
                switch (notification.type) {
                    case exports.NOTIFICATION_TYPE.ERROR:
                        return 'error';
                    case exports.NOTIFICATION_TYPE.WARN:
                        return 'warning';
                    default:
                        return 'info';
                }
            }
        };
        return NotificationIconPipe;
    }());
    NotificationIconPipe.decorators = [
        { type: i0.Pipe, args: [{
                    name: 'notificationIcon'
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NotificationHistoryModule = /** @class */ (function () {
        function NotificationHistoryModule() {
        }
        return NotificationHistoryModule;
    }());
    NotificationHistoryModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$1.CommonModule,
                        MaterialModule,
                        i1$2.TranslateModule,
                        PipeModule,
                        PaginationModule
                    ],
                    declarations: [
                        NotificationHistoryComponent,
                        NotificationIconPipe
                    ],
                    exports: [
                        NotificationHistoryComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var searchAnimation = animations.trigger('transitionMessages', [
        animations.state('active', animations.style({
            'margin-left': '{{ margin-left }}px',
            'margin-right': '{{ margin-right }}px',
            'transform': '{{ transform }}'
        }), { params: { 'margin-left': 0, 'margin-right': 0, 'transform': 'translateX(0%)' } }),
        animations.state('inactive', animations.style({
            'margin-left': '{{ margin-left }}px',
            'margin-right': '{{ margin-right }}px',
            'transform': '{{ transform }}'
        }), { params: { 'margin-left': 0, 'margin-right': 0, 'transform': 'translateX(0%)' } }),
        animations.state('no-animation', animations.style({ transform: 'translateX(0%)', width: '100%' })),
        animations.transition('active <=> inactive', animations.animate('400ms cubic-bezier(0.25, 0.8, 0.25, 1)'))
    ]);

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SearchTextInputComponent = /** @class */ (function () {
        function SearchTextInputComponent(userPreferencesService) {
            var _this = this;
            this.userPreferencesService = userPreferencesService;
            this.autocomplete = false;
            this.expandable = true;
            this.inputType = 'text';
            this.liveSearchEnabled = true;
            this.searchAutocomplete = false;
            this.searchTerm = '';
            this.debounceTime = 0;
            this.collapseOnSubmit = true;
            this.defaultState = exports.SearchTextStateEnum.collapsed;
            this.collapseOnBlur = true;
            this.showClearButton = false;
            this.placeholder = '';
            this.searchChange = new i0.EventEmitter();
            this.submit = new i0.EventEmitter();
            this.selectResult = new i0.EventEmitter();
            this.reset = new i0.EventEmitter();
            this.searchVisibility = new i0.EventEmitter();
            this.animationStates = {
                ltr: {
                    active: { value: 'active', params: { 'margin-left': 13 } },
                    inactive: { value: 'inactive', params: { 'transform': 'translateX(82%)' } }
                },
                rtl: {
                    active: { value: 'active', params: { 'margin-right': 13 } },
                    inactive: { value: 'inactive', params: { 'transform': 'translateX(-82%)' } }
                }
            };
            this.dir = 'ltr';
            this.onDestroy$ = new rxjs.Subject();
            this.toggleSearch = new rxjs.Subject();
            this.valueChange = new rxjs.Subject();
            this.toggleSearch
                .pipe(operators.debounceTime(200), operators.takeUntil(this.onDestroy$))
                .subscribe(function () {
                if (_this.expandable) {
                    _this.subscriptAnimationState = _this.toggleAnimation();
                    if (_this.subscriptAnimationState.value === 'inactive') {
                        _this.searchTerm = '';
                        _this.reset.emit(true);
                        if (document.activeElement.id === _this.searchInput.nativeElement.id) {
                            _this.searchInput.nativeElement.blur();
                        }
                    }
                    _this.emitVisibilitySearch();
                }
            });
        }
        SearchTextInputComponent.prototype.ngOnInit = function () {
            var _this = this;
            this.userPreferencesService
                .select('textOrientation')
                .pipe(operators.takeUntil(this.onDestroy$))
                .subscribe(function (direction) {
                _this.dir = direction;
                _this.subscriptAnimationState = _this.getDefaultState(_this.dir);
            });
            this.subscriptAnimationState = this.getDefaultState(this.dir);
            this.setValueChangeHandler();
            this.setupFocusEventHandlers();
        };
        SearchTextInputComponent.prototype.applySearchFocus = function (animationDoneEvent) {
            if (animationDoneEvent.toState === 'active' && this.isDefaultStateCollapsed()) {
                this.searchInput.nativeElement.focus();
            }
        };
        SearchTextInputComponent.prototype.getAutoComplete = function () {
            return this.autocomplete ? 'on' : 'off';
        };
        SearchTextInputComponent.prototype.toggleAnimation = function () {
            if (this.dir === 'ltr') {
                return this.subscriptAnimationState.value === 'inactive' ?
                    { value: 'active', params: { 'margin-left': 13 } } :
                    { value: 'inactive', params: { 'transform': 'translateX(82%)' } };
            }
            else {
                return this.subscriptAnimationState.value === 'inactive' ?
                    { value: 'active', params: { 'margin-right': 13 } } :
                    { value: 'inactive', params: { 'transform': 'translateX(-82%)' } };
            }
        };
        SearchTextInputComponent.prototype.getDefaultState = function (dir) {
            if (this.dir) {
                return this.getAnimationState(dir);
            }
            return this.animationStates.ltr.inactive;
        };
        SearchTextInputComponent.prototype.getAnimationState = function (dir) {
            if (this.expandable && this.isDefaultStateExpanded()) {
                return this.animationStates[dir].active;
            }
            else if (this.expandable) {
                return this.animationStates[dir].inactive;
            }
            else {
                return { value: 'no-animation' };
            }
        };
        SearchTextInputComponent.prototype.setupFocusEventHandlers = function () {
            var _this = this;
            if (this.focusListener) {
                var focusEvents = this.focusListener
                    .pipe(operators.debounceTime(50), operators.filter(function ($event) {
                    return _this.isSearchBarActive() && ($event.type === 'blur' || $event.type === 'focusout' || $event.type === 'focus');
                }), operators.takeUntil(this.onDestroy$));
                this.focusSubscription = focusEvents.subscribe(function (event) {
                    if (event.type === 'focus') {
                        _this.searchInput.nativeElement.focus();
                    }
                    else {
                        _this.toggleSearchBar();
                    }
                });
            }
        };
        SearchTextInputComponent.prototype.setValueChangeHandler = function () {
            var _this = this;
            this.valueChange.pipe(operators.debounceTime(this.debounceTime), operators.takeUntil(this.onDestroy$)).subscribe(function (value) {
                _this.searchChange.emit(value);
            });
        };
        SearchTextInputComponent.prototype.selectFirstResult = function ($event) {
            this.selectResult.emit($event);
        };
        SearchTextInputComponent.prototype.onBlur = function ($event) {
            if (this.collapseOnBlur && !$event.relatedTarget) {
                this.resetSearch();
            }
        };
        SearchTextInputComponent.prototype.inputChange = function ($event) {
            this.valueChange.next($event);
        };
        SearchTextInputComponent.prototype.toggleSearchBar = function () {
            if (this.toggleSearch) {
                this.toggleSearch.next();
            }
        };
        SearchTextInputComponent.prototype.searchSubmit = function (event) {
            this.submit.emit(event);
            if (this.collapseOnSubmit) {
                this.toggleSearchBar();
            }
        };
        SearchTextInputComponent.prototype.activateToolbar = function () {
            if (!this.isSearchBarActive()) {
                this.toggleSearchBar();
            }
            return false;
        };
        SearchTextInputComponent.prototype.isSearchBarActive = function () {
            return this.subscriptAnimationState.value === 'active';
        };
        SearchTextInputComponent.prototype.ngOnDestroy = function () {
            if (this.toggleSearch) {
                this.toggleSearch.complete();
                this.toggleSearch = null;
            }
            if (this.focusSubscription) {
                this.focusSubscription.unsubscribe();
                this.focusSubscription = null;
                this.focusListener = null;
            }
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
        };
        SearchTextInputComponent.prototype.canShowClearSearch = function () {
            return this.showClearButton && this.isSearchBarActive();
        };
        SearchTextInputComponent.prototype.resetSearch = function () {
            if (this.isSearchBarActive()) {
                this.toggleSearchBar();
            }
        };
        SearchTextInputComponent.prototype.isDefaultStateCollapsed = function () {
            return this.defaultState === exports.SearchTextStateEnum.collapsed;
        };
        SearchTextInputComponent.prototype.isDefaultStateExpanded = function () {
            return this.defaultState === exports.SearchTextStateEnum.expanded;
        };
        SearchTextInputComponent.prototype.emitVisibilitySearch = function () {
            this.isSearchBarActive() ? this.searchVisibility.emit(true) : this.searchVisibility.emit(false);
        };
        return SearchTextInputComponent;
    }());
    SearchTextInputComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-search-text-input',
                    template: "<div class=\"adf-search-container\" [attr.state]=\"subscriptAnimationState.value\">\n    <div [@transitionMessages]=\"subscriptAnimationState\"\n         (@transitionMessages.done)=\"applySearchFocus($event)\">\n        <button mat-icon-button\n                *ngIf=\"expandable\"\n                id=\"adf-search-button\"\n                class=\"adf-search-button\"\n                [title]=\"'SEARCH.BUTTON.TOOLTIP' | translate\"\n                (click)=\"toggleSearchBar()\"\n                (keyup.enter)=\"toggleSearchBar()\">\n            <mat-icon [attr.aria-label]=\"'SEARCH.BUTTON.ARIA-LABEL' | translate\">search</mat-icon>\n        </button>\n        <mat-form-field class=\"adf-input-form-field-divider\">\n            <input matInput\n                   #searchInput\n                   [attr.aria-label]=\"'SEARCH.INPUT.ARIA-LABEL' | translate\"\n                   [attr.type]=\"inputType\"\n                   [autocomplete]=\"getAutoComplete()\"\n                   id=\"adf-control-input\"\n                   [(ngModel)]=\"searchTerm\"\n                   [placeholder]=\"placeholder\"\n                   (focus)=\"activateToolbar()\"\n                   (blur)=\"onBlur($event)\"\n                   (keyup.escape)=\"toggleSearchBar()\"\n                   (keyup.arrowdown)=\"selectFirstResult($event)\"\n                   (ngModelChange)=\"inputChange($event)\"\n                   [searchAutocomplete]=\"searchAutocomplete ? searchAutocomplete : null\"\n                   (keyup.enter)=\"searchSubmit($event)\">\n            <button mat-icon-button matSuffix\n                    data-automation-id=\"adf-clear-search-button\"\n                    class=\"adf-clear-search-button\"\n                    *ngIf=\"canShowClearSearch()\"\n                    (mousedown)=\"resetSearch()\">\n                <mat-icon>clear</mat-icon>\n            </button>\n        </mat-form-field>\n    </div>\n</div>\n",
                    animations: [searchAnimation],
                    encapsulation: i0.ViewEncapsulation.None,
                    host: {
                        'class': 'adf-search-text-input'
                    },
                    styles: [".adf-search-container{overflow:hidden!important}.adf-search-button{left:-13px}[dir=rtl] .adf-search-button{right:-13px}[dir=ltr] .adf-search-button{left:-13px}.adf-search-fixed-text{line-height:normal}.adf-input-form-field-divider{font-size:16px}.adf-input-form-field-divider .mat-form-field-underline,.adf-input-form-field-divider .mat-form-field-underline .mat-form-field-ripple{background-color:var(--adf-search-input-bg-color)}.adf-highlight{color:var(--adf-search-input-highlight-color)}"]
                },] }
    ];
    SearchTextInputComponent.ctorParameters = function () { return [
        { type: UserPreferencesService }
    ]; };
    SearchTextInputComponent.propDecorators = {
        autocomplete: [{ type: i0.Input }],
        expandable: [{ type: i0.Input }],
        inputType: [{ type: i0.Input }],
        liveSearchEnabled: [{ type: i0.Input }],
        searchAutocomplete: [{ type: i0.Input }],
        searchTerm: [{ type: i0.Input }],
        debounceTime: [{ type: i0.Input }],
        focusListener: [{ type: i0.Input }],
        collapseOnSubmit: [{ type: i0.Input }],
        defaultState: [{ type: i0.Input }],
        collapseOnBlur: [{ type: i0.Input }],
        showClearButton: [{ type: i0.Input }],
        placeholder: [{ type: i0.Input }],
        searchChange: [{ type: i0.Output }],
        submit: [{ type: i0.Output }],
        selectResult: [{ type: i0.Output }],
        reset: [{ type: i0.Output }],
        searchVisibility: [{ type: i0.Output }],
        searchInput: [{ type: i0.ViewChild, args: ['searchInput', { static: true },] }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR = {
        provide: forms.NG_VALUE_ACCESSOR,
        useExisting: i0.forwardRef(function () { return SearchTriggerDirective; }),
        multi: true
    };
    var SearchTriggerDirective = /** @class */ (function () {
        function SearchTriggerDirective(element, ngZone, changeDetectorRef, document) {
            this.element = element;
            this.ngZone = ngZone;
            this.changeDetectorRef = changeDetectorRef;
            this.document = document;
            this.onDestroy$ = new rxjs.Subject();
            this.autocomplete = 'off';
            this._panelOpen = false;
            this.escapeEventStream = new rxjs.Subject();
            this.onChange = function () { };
            this.onTouched = function () { };
        }
        SearchTriggerDirective.prototype.ngOnDestroy = function () {
            this.onDestroy$.next(true);
            this.onDestroy$.complete();
            if (this.escapeEventStream) {
                this.escapeEventStream = null;
            }
            if (this.closingActionsSubscription) {
                this.closingActionsSubscription.unsubscribe();
            }
        };
        Object.defineProperty(SearchTriggerDirective.prototype, "panelOpen", {
            get: function () {
                return this._panelOpen && this.searchPanel.showPanel;
            },
            enumerable: false,
            configurable: true
        });
        SearchTriggerDirective.prototype.openPanel = function () {
            this.searchPanel.isOpen = this._panelOpen = true;
            this.closingActionsSubscription = this.subscribeToClosingActions();
        };
        SearchTriggerDirective.prototype.closePanel = function () {
            if (this._panelOpen) {
                this.closingActionsSubscription.unsubscribe();
                this._panelOpen = false;
                this.searchPanel.resetResults();
                this.searchPanel.hidePanel();
                this.changeDetectorRef.detectChanges();
            }
        };
        Object.defineProperty(SearchTriggerDirective.prototype, "panelClosingActions", {
            get: function () {
                return rxjs.merge(this.escapeEventStream, this.outsideClickStream);
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(SearchTriggerDirective.prototype, "outsideClickStream", {
            get: function () {
                var _this = this;
                if (!this.document) {
                    return rxjs.of(null);
                }
                return rxjs.merge(rxjs.fromEvent(this.document, 'click'), rxjs.fromEvent(this.document, 'touchend')).pipe(operators.filter(function (event) {
                    var clickTarget = event.target;
                    return _this._panelOpen && clickTarget !== _this.element.nativeElement;
                }), operators.takeUntil(this.onDestroy$));
            },
            enumerable: false,
            configurable: true
        });
        SearchTriggerDirective.prototype.writeValue = function (value) {
            var _this = this;
            Promise.resolve(null).then(function () { return _this.setTriggerValue(value); });
        };
        SearchTriggerDirective.prototype.registerOnChange = function (fn) {
            this.onChange = fn;
        };
        SearchTriggerDirective.prototype.registerOnTouched = function (fn) {
            this.onTouched = fn;
        };
        SearchTriggerDirective.prototype.handleKeydown = function (event) {
            var keyCode = event.keyCode;
            if (keyCode === keycodes.ESCAPE && this.panelOpen) {
                this.escapeEventStream.next();
                event.stopPropagation();
            }
            else if (keyCode === keycodes.ENTER) {
                this.escapeEventStream.next();
                event.preventDefault();
            }
        };
        SearchTriggerDirective.prototype.handleInput = function (event) {
            if (document.activeElement === event.target) {
                var inputValue = event.target.value;
                this.onChange(inputValue);
                if (inputValue && this.searchPanel) {
                    this.searchPanel.keyPressedStream.next(inputValue);
                    this.openPanel();
                }
                else if (this.searchPanel) {
                    this.searchPanel.resetResults();
                    this.closePanel();
                }
            }
        };
        SearchTriggerDirective.prototype.isPanelOptionClicked = function (event) {
            var isPanelOption = false;
            if (event && this.searchPanel) {
                var clickTarget = event.target;
                isPanelOption = !this.isNoResultOption() &&
                    !!this.searchPanel.panel &&
                    !!this.searchPanel.panel.nativeElement.contains(clickTarget);
            }
            return isPanelOption;
        };
        SearchTriggerDirective.prototype.isNoResultOption = function () {
            return this.searchPanel && this.searchPanel.results.list ? this.searchPanel.results.list.entries.length === 0 : true;
        };
        SearchTriggerDirective.prototype.subscribeToClosingActions = function () {
            var _this = this;
            var firstStable = this.ngZone.onStable.asObservable();
            var optionChanges = this.searchPanel.keyPressedStream.asObservable();
            return rxjs.merge(firstStable, optionChanges)
                .pipe(operators.switchMap(function () {
                _this.searchPanel.setVisibility();
                return _this.panelClosingActions;
            }), operators.takeUntil(this.onDestroy$))
                .subscribe(function (event) { return _this.setValueAndClose(event); });
        };
        SearchTriggerDirective.prototype.setTriggerValue = function (value) {
            var toDisplay = this.searchPanel && this.searchPanel.displayWith ?
                this.searchPanel.displayWith(value) : value;
            var inputValue = toDisplay != null ? toDisplay : '';
            this.element.nativeElement.value = inputValue;
        };
        SearchTriggerDirective.prototype.setValueAndClose = function (event) {
            if (this.isPanelOptionClicked(event) && !event.defaultPrevented) {
                this.setTriggerValue(event.target.textContent.trim());
                this.onChange(event.target.textContent.trim());
                this.element.nativeElement.focus();
            }
            this.closePanel();
        };
        return SearchTriggerDirective;
    }());
    SearchTriggerDirective.decorators = [
        { type: i0.Directive, args: [{
                    selector: "input[searchAutocomplete], textarea[searchAutocomplete]",
                    host: {
                        'role': 'combobox',
                        '[attr.autocomplete]': 'autocomplete',
                        'aria-autocomplete': 'list',
                        '[attr.aria-expanded]': 'panelOpen.toString()',
                        '(blur)': 'onTouched()',
                        '(input)': 'handleInput($event)',
                        '(keydown)': 'handleKeydown($event)'
                    },
                    providers: [SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR]
                },] }
    ];
    SearchTriggerDirective.ctorParameters = function () { return [
        { type: i0.ElementRef },
        { type: i0.NgZone },
        { type: i0.ChangeDetectorRef },
        { type: undefined, decorators: [{ type: i0.Optional }, { type: i0.Inject, args: [i1$1.DOCUMENT,] }] }
    ]; };
    SearchTriggerDirective.propDecorators = {
        searchPanel: [{ type: i0.Input, args: ['searchAutocomplete',] }],
        autocomplete: [{ type: i0.Input }]
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SearchTextModule = /** @class */ (function () {
        function SearchTextModule() {
        }
        return SearchTextModule;
    }());
    SearchTextModule.decorators = [
        { type: i0.NgModule, args: [{
                    declarations: [
                        SearchTextInputComponent,
                        SearchTriggerDirective
                    ],
                    imports: [
                        i1$1.CommonModule,
                        i1$2.TranslateModule,
                        MaterialModule,
                        forms.FormsModule
                    ],
                    exports: [
                        SearchTextInputComponent,
                        SearchTriggerDirective
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var BlankPageComponent = /** @class */ (function () {
        function BlankPageComponent() {
        }
        return BlankPageComponent;
    }());
    BlankPageComponent.decorators = [
        { type: i0.Component, args: [{
                    selector: 'adf-blank-page',
                    template: ""
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var BlankPageModule = /** @class */ (function () {
        function BlankPageModule() {
        }
        return BlankPageModule;
    }());
    BlankPageModule.decorators = [
        { type: i0.NgModule, args: [{
                    declarations: [
                        BlankPageComponent
                    ],
                    exports: [
                        BlankPageComponent
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AlfrescoApiMock = /** @class */ (function () {
        function AlfrescoApiMock() {
        }
        AlfrescoApiMock.prototype.login = function () {
            return new Promise(function (resolve) {
                resolve('TICKET_4479f4d3bb155195879bfbb8d5206f433488a1b1');
            });
        };
        AlfrescoApiMock.prototype.logout = function () {
            return new Promise(function (resolve) {
                resolve('logout');
            });
        };
        AlfrescoApiMock.prototype.changeConfig = function () {
        };
        return AlfrescoApiMock;
    }());

    var AppConfigServiceMock = /** @class */ (function (_super) {
        __extends(AppConfigServiceMock, _super);
        function AppConfigServiceMock(http, extensionService) {
            var _this = _super.call(this, http, extensionService) || this;
            _this.config = {
                application: {
                    name: 'Alfresco ADF Application'
                },
                ecmHost: 'http://{hostname}{:port}/ecm',
                bpmHost: 'http://{hostname}{:port}/bpm',
                logLevel: 'silent'
            };
            return _this;
        }
        AppConfigServiceMock.prototype.load = function () {
            var _this = this;
            return new Promise(function (resolve) {
                _this.status = exports.Status.LOADED;
                _this.onDataLoaded(_this.config);
                resolve(_this.config);
            });
        };
        return AppConfigServiceMock;
    }(AppConfigService));
    AppConfigServiceMock.decorators = [
        { type: i0.Injectable }
    ];
    AppConfigServiceMock.ctorParameters = function () { return [
        { type: i1.HttpClient },
        { type: i2.ExtensionService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ɵ0$6 = [
        {
            id: 1, defaultAppId: null, name: 'Sales-Fakes-App', description: 'desc-fake1', modelId: 22,
            theme: 'theme-1-fake', icon: 'glyphicon-asterisk', 'deploymentId': '111', 'tenantId': null
        },
        {
            id: 2, defaultAppId: null, name: 'health-care-Fake', description: 'desc-fake2', modelId: 33,
            theme: 'theme-2-fake', icon: 'glyphicon-asterisk', 'deploymentId': '444', 'tenantId': null
        }
    ];
    var fakeApps = {
        size: 2, total: 2, start: 0,
        data: ɵ0$6
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var AuthenticationMock = /** @class */ (function () {
        function AuthenticationMock() {
            this.redirectUrl = null;
        }
        AuthenticationMock.prototype.setRedirectUrl = function (url) {
            this.redirectUrl = url;
        };
        AuthenticationMock.prototype.getRedirectUrl = function () {
            return this.redirectUrl ? this.redirectUrl.url : null;
        };
        AuthenticationMock.prototype.login = function (username, password) {
            if (username === 'fake-username' && password === 'fake-password') {
                return rxjs.of({ type: 'type', ticket: 'ticket' });
            }
            if (username === 'fake-username-CORS-error' && password === 'fake-password') {
                return rxjs.throwError({
                    error: {
                        crossDomain: true,
                        message: 'ERROR: the network is offline, Origin is not allowed by Access-Control-Allow-Origin'
                    }
                });
            }
            if (username === 'fake-username-CSRF-error' && password === 'fake-password') {
                return rxjs.throwError({ message: 'ERROR: Invalid CSRF-token', status: 403 });
            }
            if (username === 'fake-username-ECM-access-error' && password === 'fake-password') {
                return rxjs.throwError({ message: 'ERROR: 00170728 Access Denied.  The system is currently in read-only mode', status: 403 });
            }
            return rxjs.throwError('Fake server error');
        };
        return AuthenticationMock;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var fakeBpmUserNoImage = {
        apps: [],
        capabilities: 'fake-capability',
        company: 'fake-company',
        created: 'fake-create-date',
        email: 'fakeBpm@fake.com',
        externalId: 'fake-external-id',
        firstName: 'fake-first-name',
        lastName: 'fake-last-name',
        groups: [],
        id: 'fake-id',
        lastUpdate: 'fake-update-date',
        latestSyncTimeStamp: 'fake-timestamp',
        password: 'fake-password',
        pictureId: undefined,
        status: 'fake-status',
        tenantId: 'fake-tenant-id',
        tenantName: 'fake-tenant-name',
        tenantPictureId: 'fake-tenant-picture-id',
        type: 'fake-type'
    };
    var fakeBpmUser = new BpmUserModel({
        apps: [],
        capabilities: null,
        company: 'fake-company',
        created: 'fake-create-date',
        email: 'fakeBpm@fake.com',
        externalId: 'fake-external-id',
        firstName: 'fake-bpm-first-name',
        lastName: 'fake-bpm-last-name',
        groups: [],
        id: 'fake-id',
        lastUpdate: 'fake-update-date',
        latestSyncTimeStamp: 'fake-timestamp',
        password: 'fake-password',
        pictureId: 12,
        status: 'fake-status',
        tenantId: 'fake-tenant-id',
        tenantName: 'fake-tenant-name',
        tenantPictureId: 'fake-tenant-picture-id',
        type: 'fake-type'
    });
    var fakeBpmEditedUser = {
        apps: [],
        capabilities: 'fake-capability',
        company: 'fake-company',
        created: 'fake-create-date',
        email: 'fakeBpm@fake.com',
        externalId: 'fake-external-id',
        firstName: 'fake-first-name',
        lastName: 'fake-last-name',
        groups: [],
        id: 'fake-id',
        lastUpdate: 'fake-update-date',
        latestSyncTimeStamp: 'fake-timestamp',
        password: 'fake-password',
        pictureId: 'src/assets/images/bpmImg.gif',
        status: 'fake-status',
        tenantId: 'fake-tenant-id',
        tenantName: 'fake-tenant-name',
        tenantPictureId: 'fake-tenant-picture-id',
        type: 'fake-type'
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var fakeUser1 = { id: 1, email: 'fake-email@dom.com', firstName: 'firstName', lastName: 'lastName' };
    var fakeUser2 = { id: 1001, email: 'some-one@somegroup.com', firstName: 'some', lastName: 'one' };
    var ɵ0$7 = [
        {
            id: 1, message: 'fake-message-1', created: '', createdBy: fakeUser1
        },
        {
            id: 2, message: 'fake-message-2', created: '', createdBy: fakeUser1
        }
    ];
    var fakeTasksComment = {
        size: 2, total: 2, start: 0,
        data: ɵ0$7
    };
    var fakeProcessComment = new CommentModel({ id: 1, message: 'Test', created: new Date('2016-11-10T03:37:30.010+0000'), createdBy: new UserProcessModel({
            id: 13,
            firstName: 'Wilbur',
            lastName: 'Adams',
            email: 'wilbur@app.com'
        }) });

    var CookieServiceMock = /** @class */ (function (_super) {
        __extends(CookieServiceMock, _super);
        function CookieServiceMock() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        CookieServiceMock.prototype.isEnabled = function () {
            return true;
        };
        CookieServiceMock.prototype.getItem = function (key) {
            return this[key] && this[key].data || null;
        };
        CookieServiceMock.prototype.setItem = function (key, data, expiration, path) {
            this[key] = { data: data, expiration: expiration, path: path };
        };
        CookieServiceMock.prototype.clear = function () {
            var _this = this;
            Object.keys(this).forEach(function (key) {
                if (_this.hasOwnProperty(key) && typeof (_this[key]) !== 'function') {
                    _this[key] = undefined;
                }
            });
        };
        return CookieServiceMock;
    }(CookieService));
    CookieServiceMock.decorators = [
        { type: i0.Injectable }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var fakeEcmCompany = {
        organization: 'company-fake-name',
        address1: 'fake-address-1',
        address2: 'fake-address-2',
        address3: 'fake-address-3',
        postcode: 'fAk1',
        telephone: '00000000',
        fax: '11111111',
        email: 'fakeCompany@fake.com'
    };
    var fakeEcmUser = new EcmUserModel({
        id: 'fake-id',
        firstName: 'fake-ecm-first-name',
        lastName: 'fake-ecm-last-name',
        description: 'i am a fake user for test',
        avatarId: 'fake-avatar-id',
        email: 'fakeEcm@ecmUser.com',
        skypeId: 'fake-skype-id',
        googleId: 'fake-googleId-id',
        instantMessageId: 'fake-instantMessageId-id',
        company: null,
        jobTitle: 'job-ecm-test',
        location: 'fake location',
        mobile: '000000000',
        telephone: '11111111',
        statusUpdatedAt: 'fake-date',
        userStatus: 'active',
        enabled: true,
        emailNotificationsEnabled: true
    });
    var fakeEcmUser2 = {
        id: 'another-fake-id',
        firstName: 'another-fake-first-name',
        lastName: 'another',
        displayName: 'admin.adf User',
        email: 'admin.adf@alfresco.com',
        company: null,
        enabled: true,
        emailNotificationsEnabled: true
    };
    var fakeEcmUserNoImage = {
        id: 'fake-id',
        firstName: 'fake-first-name',
        lastName: 'fake-last-name',
        description: 'i am a fake user for test',
        avatarId: null,
        email: 'fakeEcm@ecmUser.com',
        skypeId: 'fake-skype-id',
        googleId: 'fake-googleId-id',
        instantMessageId: 'fake-instantMessageId-id',
        company: null,
        jobTitle: null,
        location: 'fake location',
        mobile: '000000000',
        telephone: '11111111',
        statusUpdatedAt: 'fake-date',
        userStatus: 'active',
        enabled: true,
        emailNotificationsEnabled: true
    };
    var fakeEcmEditedUser = {
        id: 'fake-id',
        firstName: null,
        lastName: 'fake-last-name',
        description: 'i am a fake user for test',
        avatarId: 'fake-avatar-id',
        email: 'fakeEcm@ecmUser.com',
        skypeId: 'fake-skype-id',
        googleId: 'fake-googleId-id',
        instantMessageId: 'fake-instantMessageId-id',
        company: null,
        jobTitle: 'test job',
        location: 'fake location',
        mobile: '000000000',
        telephone: '11111111',
        statusUpdatedAt: 'fake-date',
        userStatus: 'active',
        enabled: true,
        emailNotificationsEnabled: true
    };
    var fakeEcmUserList = new jsApi.PersonPaging({
        list: {
            pagination: {
                count: 2,
                hasMoreItems: false,
                totalItems: 2,
                skipCount: 0,
                maxItems: 100
            },
            entries: [
                {
                    entry: fakeEcmUser
                },
                {
                    entry: fakeEcmUser2
                }
            ]
        }
    });
    var createNewPersonMock = {
        id: 'fake-id',
        firstName: 'fake-ecm-first-name',
        lastName: 'fake-ecm-last-name',
        description: 'i am a fake user for test',
        password: 'fake-avatar-id',
        email: 'fakeEcm@ecmUser.com'
    };
    function getFakeUserWithContentAdminCapability() {
        var fakeEcmUserWithAdminCapabilities = Object.assign(Object.assign({}, fakeEcmUser), { capabilities: {
                isAdmin: true
            } });
        var mockPerson = new jsApi.Person(fakeEcmUserWithAdminCapabilities);
        return { entry: mockPerson };
    }
    function getFakeUserWithContentUserCapability() {
        var fakeEcmUserWithAdminCapabilities = Object.assign(Object.assign({}, fakeEcmUser), { capabilities: {
                isAdmin: false
            } });
        var mockPerson = new jsApi.Person(fakeEcmUserWithAdminCapabilities);
        return { entry: mockPerson };
    }

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var EventMock = /** @class */ (function () {
        function EventMock() {
        }
        EventMock.keyDown = function (key) {
            var event = document.createEvent('Event');
            event.keyCode = key;
            event.initEvent('keydown');
            document.dispatchEvent(event);
        };
        EventMock.keyUp = function (key) {
            var event = document.createEvent('Event');
            event.keyCode = key;
            event.initEvent('keyup');
            document.dispatchEvent(event);
        };
        EventMock.resizeMobileView = function () {
            window.dispatchEvent(new Event('resize'));
        };
        return EventMock;
    }());

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var fakeRendition = {
        entry: {
            id: 'pdf',
            content: {
                mimeType: 'application/pdf',
                mimeTypeName: 'Adobe PDF Document'
            },
            status: 'NOT_CREATED'
        }
    };
    var fakeRenditionCreated = {
        entry: {
            id: 'pdf',
            content: {
                mimeType: 'application/pdf',
                mimeTypeName: 'Adobe PDF Document'
            },
            status: 'CREATED'
        }
    };
    var fakeRenditionsList = {
        list: {
            pagination: {
                count: 6,
                hasMoreItems: false,
                totalItems: 6,
                skipCount: 0,
                maxItems: 100
            },
            entries: [
                {
                    entry: {
                        id: 'avatar',
                        content: {
                            mimeType: 'image/png',
                            mimeTypeName: 'PNG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'avatar32',
                        content: {
                            mimeType: 'image/png',
                            mimeTypeName: 'PNG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'doclib',
                        content: {
                            mimeType: 'image/png',
                            mimeTypeName: 'PNG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'imgpreview',
                        content: {
                            mimeType: 'image/jpeg',
                            mimeTypeName: 'JPEG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'medium',
                        content: {
                            mimeType: 'image/jpeg',
                            mimeTypeName: 'JPEG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'pdf',
                        content: {
                            mimeType: 'application/pdf',
                            mimeTypeName: 'Adobe PDF Document'
                        },
                        status: 'NOT_CREATED'
                    }
                }
            ]
        }
    };
    var fakeRenditionsListWithACreated = {
        list: {
            pagination: {
                count: 6,
                hasMoreItems: false,
                totalItems: 6,
                skipCount: 0,
                maxItems: 100
            },
            entries: [
                {
                    entry: {
                        id: 'avatar',
                        content: {
                            mimeType: 'image/png',
                            mimeTypeName: 'PNG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'avatar32',
                        content: {
                            mimeType: 'image/png',
                            mimeTypeName: 'PNG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'doclib',
                        content: {
                            mimeType: 'image/png',
                            mimeTypeName: 'PNG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'imgpreview',
                        content: {
                            mimeType: 'image/jpeg',
                            mimeTypeName: 'JPEG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'medium',
                        content: {
                            mimeType: 'image/jpeg',
                            mimeTypeName: 'JPEG Image'
                        },
                        status: 'NOT_CREATED'
                    }
                },
                {
                    entry: {
                        id: 'pdf',
                        content: {
                            mimeType: 'application/pdf',
                            mimeTypeName: 'Adobe PDF Document'
                        },
                        status: 'CREATED'
                    }
                }
            ]
        }
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var fakeSearch = {
        list: {
            pagination: {
                count: 1,
                hasMoreItems: false,
                totalItems: 1,
                skipCount: 0,
                maxItems: 100
            },
            entries: [
                {
                    entry: {
                        id: '123',
                        name: 'MyDoc',
                        content: {
                            mimetype: 'text/plain'
                        },
                        createdByUser: {
                            displayName: 'John Doe'
                        },
                        modifiedByUser: {
                            displayName: 'John Doe'
                        }
                    }
                }
            ]
        }
    };
    var mockError = {
        error: {
            errorKey: 'Search failed',
            statusCode: 400,
            briefSummary: '08220082 search failed',
            stackTrace: 'For security reasons the stack trace is no longer displayed, but the property is kept for previous versions.',
            descriptionURL: 'https://api-explorer.alfresco.com'
        }
    };
    var ɵ0$8 = function () { return Promise.resolve(fakeSearch); };
    var searchMockApi = {
        findNodes: ɵ0$8
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var TranslationMock = /** @class */ (function () {
        function TranslationMock() {
            this.defaultLang = 'en';
            this.translate = {
                onLangChange: new i0.EventEmitter()
            };
        }
        TranslationMock.prototype.addTranslationFolder = function () { };
        TranslationMock.prototype.onTranslationChanged = function () { };
        TranslationMock.prototype.use = function () { };
        TranslationMock.prototype.loadTranslation = function () { };
        TranslationMock.prototype.get = function (key) {
            return rxjs.of(key);
        };
        TranslationMock.prototype.instant = function (key) {
            return key;
        };
        return TranslationMock;
    }());
    TranslationMock.decorators = [
        { type: i0.Injectable }
    ];

    var AlfrescoApiServiceMock = /** @class */ (function (_super) {
        __extends(AlfrescoApiServiceMock, _super);
        function AlfrescoApiServiceMock(appConfig, storageService) {
            var _this = _super.call(this, appConfig, storageService) || this;
            _this.appConfig = appConfig;
            _this.storageService = storageService;
            if (!_this.alfrescoApi) {
                _this.initAlfrescoApi();
            }
            return _this;
        }
        AlfrescoApiServiceMock.prototype.initialize = function () {
            var _this = this;
            return new Promise(function (resolve) {
                _this.alfrescoApiInitialized.next(true);
                resolve({});
            });
        };
        return AlfrescoApiServiceMock;
    }(AlfrescoApiService));
    AlfrescoApiServiceMock.decorators = [
        { type: i0.Injectable }
    ];
    AlfrescoApiServiceMock.ctorParameters = function () { return [
        { type: AppConfigService },
        { type: StorageService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var fakeForm = {
        id: 1001,
        name: 'ISSUE_FORM',
        processDefinitionId: 'ISSUE_APP:1:2504',
        processDefinitionName: 'ISSUE_APP',
        processDefinitionKey: 'ISSUE_APP',
        taskId: '7506',
        taskDefinitionKey: 'sid-F67A2996-1684-4774-855A-4591490081FD',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1498212398417',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'dropdownId',
                            name: 'Label',
                            type: 'dropdown',
                            value: 'Choose one...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Choose one...'
                                },
                                {
                                    id: 'option_1',
                                    name: 'test1'
                                },
                                {
                                    id: 'option_2',
                                    name: 'test2'
                                },
                                {
                                    id: 'option_3',
                                    name: 'test3'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            endpoint: null,
                            requestHeaders: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'radio',
                            name: 'radio',
                            type: 'radio-buttons',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: [
                                {
                                    id: 'option_1',
                                    name: 'Option 1'
                                },
                                {
                                    id: 'option_2',
                                    name: 'Option 2'
                                },
                                {
                                    id: 'option_3',
                                    name: 'Option 3'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 2,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            endpoint: null,
                            requestHeaders: null
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: '1498212413062',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'date',
                            name: 'date',
                            type: 'date',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    2: []
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D-M-YYYY'
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var formDefinitionTwoTextFields = {
        id: 20,
        name: 'formTextDefinition',
        processDefinitionId: 'textDefinition:1:153',
        processDefinitionName: 'textDefinition',
        processDefinitionKey: 'textDefinition',
        taskId: '159',
        taskDefinitionKey: 'sid-D941F49F-2B04-4FBB-9B49-9E95991993E8',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1507044399260',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'firstname',
                            name: 'firstName',
                            type: 'text',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    '2': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'lastname',
                            name: 'lastName',
                            type: 'text',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D-M-YYYY'
    };
    var formDefinitionDropdownField = {
        id: 21,
        name: 'dropdownDefinition',
        processDefinitionId: 'textDefinition:2:163',
        processDefinitionName: 'textDefinition',
        processDefinitionKey: 'textDefinition',
        taskId: '169',
        taskDefinitionKey: 'sid-D941F49F-2B04-4FBB-9B49-9E95991993E8',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1507046026940',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'country',
                            name: 'country',
                            type: 'dropdown',
                            value: 'Choose one...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Choose one...'
                                },
                                {
                                    id: 'option_1',
                                    name: 'united kingdom'
                                },
                                {
                                    id: 'option_2',
                                    name: 'italy'
                                },
                                {
                                    id: 'option_3',
                                    name: 'france'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            endpoint: null,
                            requestHeaders: null
                        }
                    ],
                    '2': []
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D-M-YYYY'
    };
    var formDefinitionRequiredField = {
        id: 21,
        name: 'dropdownDefinition',
        processDefinitionId: 'textDefinition:2:163',
        processDefinitionName: 'textDefinition',
        processDefinitionKey: 'textDefinition',
        taskId: '169',
        taskDefinitionKey: 'sid-D941F49F-2B04-4FBB-9B49-9E95991993E8',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1507046026940',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'country',
                            name: 'country',
                            type: 'dropdown',
                            value: 'Choose one...',
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Choose one...'
                                },
                                {
                                    id: 'option_1',
                                    name: 'united kingdom'
                                },
                                {
                                    id: 'option_2',
                                    name: 'italy'
                                },
                                {
                                    id: 'option_3',
                                    name: 'france'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            endpoint: null,
                            requestHeaders: null
                        }
                    ],
                    '2': []
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D-M-YYYY'
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var formReadonlyTwoTextFields = {
        id: 22,
        name: 'formTextDefinition',
        processDefinitionId: 'textDefinition:3:182',
        processDefinitionName: 'textDefinition',
        processDefinitionKey: 'textDefinition',
        taskId: '188',
        taskDefinitionKey: 'sid-D941F49F-2B04-4FBB-9B49-9E95991993E8',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1507044399260',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'firstname',
                            name: 'firstName',
                            type: 'readonly',
                            value: 'fakeFirstName',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2,
                                field: {
                                    id: 'firstname',
                                    name: 'firstName',
                                    type: 'text',
                                    value: null,
                                    required: false,
                                    readOnly: false,
                                    overrideId: false,
                                    colspan: 1,
                                    placeholder: null,
                                    minLength: 0,
                                    maxLength: 0,
                                    minValue: null,
                                    maxValue: null,
                                    regexPattern: null,
                                    optionType: null,
                                    hasEmptyValue: null,
                                    options: null,
                                    restUrl: null,
                                    restResponsePath: null,
                                    restIdProperty: null,
                                    restLabelProperty: null,
                                    tab: null,
                                    className: null,
                                    dateDisplayFormat: null,
                                    layout: null,
                                    sizeX: 0,
                                    sizeY: 0,
                                    row: 0,
                                    col: 0,
                                    visibilityCondition: null
                                }
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    '2': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'lastname',
                            name: 'lastName',
                            type: 'readonly',
                            value: 'fakeLastName',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1,
                                field: {
                                    id: 'lastname',
                                    name: 'lastName',
                                    type: 'text',
                                    value: null,
                                    required: false,
                                    readOnly: false,
                                    overrideId: false,
                                    colspan: 1,
                                    placeholder: null,
                                    minLength: 0,
                                    maxLength: 0,
                                    minValue: null,
                                    maxValue: null,
                                    regexPattern: null,
                                    optionType: null,
                                    hasEmptyValue: null,
                                    options: null,
                                    restUrl: null,
                                    restResponsePath: null,
                                    restIdProperty: null,
                                    restLabelProperty: null,
                                    tab: null,
                                    className: null,
                                    dateDisplayFormat: null,
                                    layout: null,
                                    sizeX: 0,
                                    sizeY: 0,
                                    row: 0,
                                    col: 0,
                                    visibilityCondition: null
                                }
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D-M-YYYY'
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var formDefVisibilitiFieldDependsOnNextOne = {
        id: 19,
        processDefinitionId: 'visibility:1:148',
        processDefinitionName: 'visibility',
        processDefinitionKey: 'visibility',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1506960847579',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'country',
                            name: 'country',
                            type: 'dropdown',
                            value: 'Choose one...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Choose one...'
                                },
                                {
                                    id: 'option_1',
                                    name: 'france'
                                },
                                {
                                    id: 'option_2',
                                    name: 'uk'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: {
                                leftType: 'field',
                                leftValue: 'name',
                                operator: '==',
                                rightValue: 'italy',
                                rightFormFieldId: '',
                                rightRestResponseId: '',
                                nextConditionOperator: '',
                                nextCondition: null
                            },
                            endpoint: null,
                            requestHeaders: null
                        }
                    ],
                    '2': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'name',
                            name: 'name',
                            type: 'text',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D-M-YYYY'
    };
    var formDefVisibilitiFieldDependsOnPreviousOne = {
        id: 19,
        processDefinitionId: 'visibility:1:148',
        processDefinitionName: 'visibility',
        processDefinitionKey: 'visibility',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1506960847579',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'name',
                            name: 'name',
                            type: 'text',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    '2': [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'country',
                            name: 'country',
                            type: 'dropdown',
                            value: 'Choose one...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Choose one...'
                                },
                                {
                                    id: 'option_1',
                                    name: 'france'
                                },
                                {
                                    id: 'option_2',
                                    name: 'uk'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: {
                                leftType: 'field',
                                leftValue: 'name',
                                operator: '==',
                                rightValue: 'italy',
                                rightFormFieldId: '',
                                rightRestResponseId: '',
                                nextConditionOperator: '',
                                nextCondition: null
                            },
                            endpoint: null,
                            requestHeaders: null
                        }
                    ]
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D-M-YYYY'
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var startFormDateWidgetMock = {
        id: 4,
        name: 'Claim Review Process',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                readOnly: false,
                fields: {
                    1: [{
                            fieldType: 'FormFieldRepresentation',
                            id: 'date',
                            name: 'date',
                            type: 'date',
                            value: null
                        }]
                }
            }
        ]
    };
    var startFormNumberWidgetMock = {
        id: 4,
        name: 'Claim Review Process',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                readOnly: false,
                fields: {
                    1: [{
                            fieldType: 'FormFieldRepresentation',
                            id: 'number',
                            name: 'number widget',
                            type: 'integer',
                            value: null
                        }]
                }
            }
        ]
    };
    var startFormAmountWidgetMock = {
        id: 4,
        name: 'Claim Review Process',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                readOnly: false,
                fields: {
                    1: [{
                            fieldType: 'FormFieldRepresentation',
                            id: 'amount',
                            name: 'amount widget',
                            type: 'amount',
                            value: null
                        }]
                }
            }
        ]
    };
    var startFormRadioButtonWidgetMock = {
        id: 4,
        name: 'Claim Review Process',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                readOnly: false,
                fields: {
                    1: [{
                            fieldType: 'RestFieldRepresentation',
                            id: 'radio-but',
                            name: 'radio-buttons',
                            type: 'radio-buttons',
                            value: null
                        }]
                }
            }
        ]
    };
    var startFormTextDefinitionMock = {
        id: 4,
        name: 'Claim Review Process',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                readOnly: false,
                fields: {
                    1: [{
                            fieldType: 'FormFieldRepresentation',
                            id: 'mocktext',
                            name: 'mockText',
                            type: 'text',
                            value: null
                        }]
                }
            }
        ]
    };
    var startFormDropdownDefinitionMock = {
        id: 4,
        name: 'Claim Review Process',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                readOnly: false,
                fields: {
                    1: [{
                            fieldType: 'RestFieldRepresentation',
                            id: 'mockTypeDropDown',
                            name: 'mock DropDown',
                            type: 'dropdown',
                            value: 'Chooseone...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Chooseone...'
                                },
                                {
                                    id: 'opt1',
                                    name: 'Option-1'
                                },
                                {
                                    id: 'opt2',
                                    name: 'Option-2'
                                },
                                {
                                    id: 'opt3',
                                    name: 'Option-3'
                                },
                                {
                                    id: 'opt2',
                                    name: 'Option-3'
                                }
                            ]
                        }]
                }
            }
        ]
    };
    var startMockForm = {
        id: 4,
        name: 'Claim Review Process',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        processDefinitionName: 'ClaimReviewProcess',
        processDefinitionKey: 'ClaimReviewProcess',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'clientname',
                            name: 'ClientName',
                            type: 'text',
                            value: null,
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'policyno',
                            name: 'PolicyNo',
                            type: 'integer',
                            value: null,
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: 'EnterPolicyName',
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953270269,
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'billAmount',
                            name: 'BillAmount',
                            type: 'integer',
                            value: null,
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: 'EnterBillAmount',
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'billdate',
                            name: 'BillDate',
                            type: 'date',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: 'billdate',
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953280930,
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'claimtype',
                            name: 'ClaimType',
                            type: 'dropdown',
                            value: 'Chooseone...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Chooseone...'
                                },
                                {
                                    id: 'cashless',
                                    name: 'Cashless'
                                },
                                {
                                    id: 'reimbursement',
                                    name: 'Reimbursement'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            endpoint: null,
                            requestHeaders: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'hospitalName',
                            name: 'HospitalName',
                            type: 'text',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: 'EnterHospitalName',
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            }
        ],
        outcomes: [
            {
                id: 'approve',
                name: 'Approve'
            },
            {
                id: 'complete',
                name: 'Complete'
            },
            {
                id: 'start_process',
                name: 'Start Process'
            }
        ],
        javascriptEvents: [],
        className: '',
        style: '',
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D - M - YYYY'
    };
    var startMockFormWithTab = {
        id: 4,
        taskName: 'Mock Title',
        processDefinitionId: 'ClaimReviewProcess:2: 93',
        processDefinitionName: 'ClaimReviewProcess',
        processDefinitionKey: 'ClaimReviewProcess',
        tabs: [
            {
                id: 'form1',
                name: 'Tab 1'
            },
            {
                id: 'form2',
                name: 'Tab 2'
            }
        ],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953253784,
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'clientname',
                            name: 'ClientName',
                            type: 'text',
                            value: null,
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'policyno',
                            name: 'PolicyNo',
                            type: 'integer',
                            value: null,
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: 'EnterPolicyName',
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953270269,
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'billAmount',
                            name: 'BillAmount',
                            type: 'integer',
                            value: null,
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: 'EnterBillAmount',
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'billdate',
                            name: 'BillDate',
                            type: 'date',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: 'billdate',
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: 1497953280930,
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'claimtype',
                            name: 'ClaimType',
                            type: 'dropdown',
                            value: 'Chooseone...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Chooseone...'
                                },
                                {
                                    id: 'cashless',
                                    name: 'Cashless'
                                },
                                {
                                    id: 'reimbursement',
                                    name: 'Reimbursement'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            endpoint: null,
                            requestHeaders: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'hospitalName',
                            name: 'HospitalName',
                            type: 'text',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: 'EnterHospitalName',
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            }
        ],
        outcomes: [
            {
                id: 'approve',
                name: 'Approve'
            },
            {
                id: 'complete',
                name: 'Complete'
            }
        ],
        javascriptEvents: [],
        className: '',
        style: '',
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false,
        globalDateFormat: 'D - M - YYYY'
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var formModelTabs = {
        formRepresentation: {
            id: 16,
            name: 'start event',
            description: '',
            version: 2,
            lastUpdatedBy: 4,
            lastUpdatedByFullName: 'User Test',
            lastUpdated: '2017-10-04T13:00:03.030+0000',
            stencilSetId: null,
            referenceId: null,
            formDefinition: {
                tabs: [],
                fields: [
                    {
                        fieldType: 'ContainerRepresentation',
                        id: '1507037668653',
                        name: 'Label',
                        type: 'container',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        dateDisplayFormat: null,
                        layout: null,
                        sizeX: 2,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null,
                        numberOfColumns: 2,
                        fields: {
                            '1': [
                                {
                                    fieldType: 'AmountFieldRepresentation',
                                    id: 'label',
                                    name: 'Label',
                                    type: 'amount',
                                    value: null,
                                    required: false,
                                    readOnly: false,
                                    overrideId: false,
                                    colspan: 1,
                                    placeholder: null,
                                    minLength: 0,
                                    maxLength: 0,
                                    minValue: null,
                                    maxValue: null,
                                    regexPattern: null,
                                    optionType: null,
                                    hasEmptyValue: null,
                                    options: null,
                                    restUrl: null,
                                    restResponsePath: null,
                                    restIdProperty: null,
                                    restLabelProperty: null,
                                    tab: null,
                                    className: null,
                                    params: {
                                        existingColspan: 1,
                                        maxColspan: 2
                                    },
                                    dateDisplayFormat: null,
                                    layout: {
                                        row: -1,
                                        column: -1,
                                        colspan: 1
                                    },
                                    sizeX: 1,
                                    sizeY: 1,
                                    row: -1,
                                    col: -1,
                                    visibilityCondition: null,
                                    enableFractions: false,
                                    currency: null
                                }
                            ],
                            '2': [
                                {
                                    fieldType: 'FormFieldRepresentation',
                                    id: 'label1',
                                    name: 'Label1',
                                    type: 'date',
                                    value: null,
                                    required: false,
                                    readOnly: false,
                                    overrideId: false,
                                    colspan: 1,
                                    placeholder: null,
                                    minLength: 0,
                                    maxLength: 0,
                                    minValue: null,
                                    maxValue: null,
                                    regexPattern: null,
                                    optionType: null,
                                    hasEmptyValue: null,
                                    options: null,
                                    restUrl: null,
                                    restResponsePath: null,
                                    restIdProperty: null,
                                    restLabelProperty: null,
                                    tab: null,
                                    className: null,
                                    params: {
                                        existingColspan: 1,
                                        maxColspan: 1
                                    },
                                    dateDisplayFormat: null,
                                    layout: {
                                        row: -1,
                                        column: -1,
                                        colspan: 1
                                    },
                                    sizeX: 1,
                                    sizeY: 1,
                                    row: -1,
                                    col: -1,
                                    visibilityCondition: null
                                }
                            ]
                        }
                    },
                    {
                        fieldType: 'ContainerRepresentation',
                        id: '1507037670167',
                        name: 'Label',
                        type: 'container',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        dateDisplayFormat: null,
                        layout: null,
                        sizeX: 2,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null,
                        numberOfColumns: 2,
                        fields: {
                            '1': [
                                {
                                    fieldType: 'FormFieldRepresentation',
                                    id: 'label2',
                                    name: 'Label2',
                                    type: 'boolean',
                                    value: null,
                                    required: false,
                                    readOnly: false,
                                    overrideId: false,
                                    colspan: 1,
                                    placeholder: null,
                                    minLength: 0,
                                    maxLength: 0,
                                    minValue: null,
                                    maxValue: null,
                                    regexPattern: null,
                                    optionType: null,
                                    hasEmptyValue: null,
                                    options: null,
                                    restUrl: null,
                                    restResponsePath: null,
                                    restIdProperty: null,
                                    restLabelProperty: null,
                                    tab: null,
                                    className: null,
                                    params: {
                                        existingColspan: 1,
                                        maxColspan: 2
                                    },
                                    dateDisplayFormat: null,
                                    layout: {
                                        row: -1,
                                        column: -1,
                                        colspan: 1
                                    },
                                    sizeX: 1,
                                    sizeY: 1,
                                    row: -1,
                                    col: -1,
                                    visibilityCondition: null
                                }
                            ],
                            '2': []
                        }
                    }
                ],
                outcomes: [],
                javascriptEvents: [],
                className: '',
                style: '',
                customFieldTemplates: {},
                metadata: {},
                variables: [],
                customFieldsValueInfo: {},
                gridsterForm: false
            }
        }
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var formTest = new FormModel({});
    var fakeTaskProcessVariableModels = [
        { id: 'TEST_VAR_1', type: 'string', value: 'test_value_1' },
        { id: 'TEST_VAR_2', type: 'string', value: 'test_value_2' },
        { id: 'TEST_VAR_3', type: 'string', value: 'test_value_3' }
    ];
    var formValues = {
        'test_1': 'value_1',
        'test_2': 'value_2',
        'test_3': 'value_1',
        'test_4': 'dropdown_id',
        'test_5': 'dropdown_label',
        'dropdown': { 'id': 'dropdown_id', 'name': 'dropdown_label' }
    };
    var fakeFormJson = {
        id: '9999',
        name: 'FORM_VISIBILITY',
        processDefinitionId: 'PROCESS_TEST:  9:  9999',
        processDefinitionName: 'PROCESS_TEST',
        processDefinitionKey: 'PROCESS_TEST',
        taskId: '999',
        taskName: 'TEST',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '000000000000000000',
                name: 'Label',
                type: 'container',
                value: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'FIELD_TEST',
                            name: 'FIELD_TEST',
                            type: 'text',
                            value: 'RIGHT_FORM_FIELD_VALUE',
                            visibilityCondition: null,
                            isVisible: true
                        },
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'FIELD_WITH_CONDITION',
                            name: 'FIELD_WITH_CONDITION',
                            type: 'text',
                            value: 'field_with_condition_value',
                            visibilityCondition: null,
                            isVisible: true
                        },
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'LEFT_FORM_FIELD_ID',
                            name: 'LEFT_FORM_FIELD_NAME',
                            type: 'text',
                            value: 'LEFT_FORM_FIELD_VALUE',
                            visibilityCondition: null,
                            isVisible: true
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'RIGHT_FORM_FIELD_ID',
                            name: 'RIGHT_FORM_FIELD_NAME',
                            type: 'text',
                            value: 'RIGHT_FORM_FIELD_VALUE',
                            visibilityCondition: null,
                            isVisible: true
                        }
                    ]
                }
            }
        ],
        variables: [
            {
                'id': 'e621e8ff-42a6-499c-8121-33c7c35d8641',
                'name': 'age',
                'type': 'integer',
                'value': 11
            },
            {
                'id': '4f8aa99e-8526-429c-9d99-809978489d96',
                'name': 'name',
                'type': 'string',
                'value': 'abc'
            },
            {
                'id': '0207b649-ff07-4f3a-a589-d10afa507b9b',
                'name': 'dob',
                'type': 'date',
                'value': '2019-05-13'
            }
        ]
    };
    var fakeFormCheckBoxVisibilityJson = {
        referenceId: '33033',
        name: 'test_condition_form',
        description: '',
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1623514352532',
                name: 'Label',
                type: 'container',
                value: 'null',
                required: 'false',
                readOnly: 'false',
                overrideId: 'false',
                colspan: '1',
                placeholder: 'null',
                minLength: '0',
                maxLength: '0',
                minValue: 'null',
                maxValue: 'null',
                regexPattern: 'null',
                optionType: 'null',
                hasEmptyValue: 'null',
                options: 'null',
                restUrl: 'null',
                restResponsePath: 'null',
                restIdProperty: 'null',
                restLabelProperty: 'null',
                tab: 'null',
                className: 'null',
                dateDisplayFormat: 'null',
                layout: 'null',
                sizeX: '2',
                sizeY: '1',
                row: '-1',
                col: '-1',
                visibilityCondition: 'null',
                numberOfColumns: '2',
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'a',
                            name: 'A',
                            type: 'boolean',
                            value: 'null',
                            required: 'false',
                            readOnly: 'false',
                            overrideId: 'false',
                            colspan: '1',
                            placeholder: 'null',
                            minLength: '0',
                            maxLength: '0',
                            minValue: 'null',
                            maxValue: 'null',
                            regexPattern: 'null',
                            optionType: 'null',
                            hasEmptyValue: 'null',
                            options: 'null',
                            restUrl: 'null',
                            restResponsePath: 'null',
                            restIdProperty: 'null',
                            restLabelProperty: 'null',
                            tab: 'null',
                            className: 'null',
                            params: {
                                existingColspan: '1',
                                maxColspan: '2'
                            },
                            dateDisplayFormat: 'null',
                            layout: {
                                row: '-1',
                                column: '-1',
                                colspan: '1'
                            },
                            sizeX: '1',
                            sizeY: '1',
                            row: '-1',
                            col: '-1',
                            visibilityCondition: 'null'
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'b',
                            name: 'B',
                            type: 'boolean',
                            value: 'null',
                            required: 'false',
                            readOnly: 'false',
                            overrideId: 'false',
                            colspan: '1',
                            placeholder: 'null',
                            minLength: '0',
                            maxLength: '0',
                            minValue: 'null',
                            maxValue: 'null',
                            regexPattern: 'null',
                            optionType: 'null',
                            hasEmptyValue: 'null',
                            options: 'null',
                            restUrl: 'null',
                            restResponsePath: 'null',
                            restIdProperty: 'null',
                            restLabelProperty: 'null',
                            tab: 'null',
                            className: 'null',
                            params: {
                                existingColspan: '1',
                                maxColspan: '1'
                            },
                            dateDisplayFormat: 'null',
                            layout: {
                                row: '-1',
                                column: '-1',
                                colspan: '1'
                            },
                            sizeX: '1',
                            sizeY: '1',
                            row: '-1',
                            col: '-1',
                            visibilityCondition: 'null'
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: '1623514356352',
                name: 'Label',
                type: 'container',
                value: 'null',
                required: 'false',
                readOnly: 'false',
                overrideId: 'false',
                colspan: '1',
                placeholder: 'null',
                minLength: '0',
                maxLength: '0',
                minValue: 'null',
                maxValue: 'null',
                regexPattern: 'null',
                optionType: 'null',
                hasEmptyValue: 'null',
                options: 'null',
                restUrl: 'null',
                restResponsePath: 'null',
                restIdProperty: 'null',
                restLabelProperty: 'null',
                tab: 'null',
                className: 'null',
                dateDisplayFormat: 'null',
                layout: 'null',
                sizeX: '2',
                sizeY: '1',
                row: '-1',
                col: '-1',
                visibilityCondition: 'null',
                numberOfColumns: '2',
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'c',
                            name: 'C',
                            type: 'boolean',
                            value: 'null',
                            required: 'false',
                            readOnly: 'false',
                            overrideId: 'false',
                            colspan: '1',
                            placeholder: 'null',
                            minLength: '0',
                            maxLength: '0',
                            minValue: 'null',
                            maxValue: 'null',
                            regexPattern: 'null',
                            optionType: 'null',
                            hasEmptyValue: 'null',
                            options: 'null',
                            restUrl: 'null',
                            restResponsePath: 'null',
                            restIdProperty: 'null',
                            restLabelProperty: 'null',
                            tab: 'null',
                            className: 'null',
                            params: {
                                existingColspan: '1',
                                maxColspan: '2'
                            },
                            dateDisplayFormat: 'null',
                            layout: {
                                row: '-1',
                                column: '-1',
                                colspan: '1'
                            },
                            sizeX: '1',
                            sizeY: '1',
                            row: '-1',
                            col: '-1',
                            visibilityCondition: 'null'
                        }
                    ],
                    2: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'd',
                            name: 'D',
                            type: 'boolean',
                            value: 'null',
                            required: 'false',
                            readOnly: 'false',
                            overrideId: 'false',
                            colspan: '1',
                            placeholder: 'null',
                            minLength: '0',
                            maxLength: '0',
                            minValue: 'null',
                            maxValue: 'null',
                            regexPattern: 'null',
                            optionType: 'null',
                            hasEmptyValue: 'null',
                            options: 'null',
                            restUrl: 'null',
                            restResponsePath: 'null',
                            restIdProperty: 'null',
                            restLabelProperty: 'null',
                            tab: 'null',
                            className: 'null',
                            params: {
                                existingColspan: '1',
                                maxColspan: '1'
                            },
                            dateDisplayFormat: 'null',
                            layout: {
                                row: '-1',
                                column: '-1',
                                colspan: '1'
                            },
                            sizeX: '1',
                            sizeY: '1',
                            row: '-1',
                            col: '-1',
                            visibilityCondition: 'null'
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: '1623514409166',
                name: 'Label',
                type: 'container',
                value: 'null',
                required: 'false',
                readOnly: 'false',
                overrideId: 'false',
                colspan: '1',
                placeholder: 'null',
                minLength: '0',
                maxLength: '0',
                minValue: 'null',
                maxValue: 'null',
                regexPattern: 'null',
                optionType: 'null',
                hasEmptyValue: 'null',
                options: 'null',
                restUrl: 'null',
                restResponsePath: 'null',
                restIdProperty: 'null',
                restLabelProperty: 'null',
                tab: 'null',
                className: 'null',
                dateDisplayFormat: 'null',
                layout: 'null',
                sizeX: '2',
                sizeY: '1',
                row: '-1',
                col: '-1',
                visibilityCondition: 'null',
                numberOfColumns: '2',
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'a_b_c_d',
                            name: 'Textfield ( A && B || C && D)',
                            type: 'text',
                            value: 'null',
                            required: 'false',
                            readOnly: 'false',
                            overrideId: 'true',
                            colspan: '1',
                            placeholder: 'null',
                            minLength: '0',
                            maxLength: '0',
                            minValue: 'null',
                            maxValue: 'null',
                            regexPattern: 'null',
                            optionType: 'null',
                            hasEmptyValue: 'null',
                            options: 'null',
                            restUrl: 'null',
                            restResponsePath: 'null',
                            restIdProperty: 'null',
                            restLabelProperty: 'null',
                            tab: 'null',
                            className: 'null',
                            params: {
                                existingColspan: '1',
                                maxColspan: '2'
                            },
                            dateDisplayFormat: 'null',
                            layout: {
                                row: '-1',
                                column: '-1',
                                colspan: '1'
                            },
                            sizeX: '1',
                            sizeY: '1',
                            row: '-1',
                            col: '-1',
                            visibilityCondition: {
                                leftFormFieldId: 'a',
                                leftRestResponseId: 'null',
                                operator: '==',
                                rightValue: 'true',
                                rightType: 'null',
                                rightFormFieldId: '',
                                rightRestResponseId: '',
                                nextConditionOperator: 'and',
                                nextCondition: {
                                    leftFormFieldId: 'b',
                                    leftRestResponseId: 'null',
                                    operator: '==',
                                    rightValue: 'true',
                                    rightType: 'null',
                                    rightFormFieldId: '',
                                    rightRestResponseId: '',
                                    nextConditionOperator: 'or',
                                    nextCondition: {
                                        leftFormFieldId: 'c',
                                        leftRestResponseId: 'null',
                                        operator: '==',
                                        rightValue: 'true',
                                        rightType: 'null',
                                        rightFormFieldId: '',
                                        rightRestResponseId: '',
                                        nextConditionOperator: 'and',
                                        nextCondition: {
                                            leftFormFieldId: 'd',
                                            leftRestResponseId: 'null',
                                            operator: '==',
                                            rightValue: 'true',
                                            rightType: 'null',
                                            rightFormFieldId: '',
                                            rightRestResponseId: '',
                                            nextConditionOperator: '',
                                            nextCondition: 'null'
                                        }
                                    }
                                }
                            }
                        }
                    ],
                    2: []
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: 'false'
    };
    var fakeFormChainedVisibilityJson = {
        id: '8800',
        name: 'FORM_VISIBILITYl_CHAIN',
        processDefinitionId: 'PROCESS_TEST:  9:  9999',
        processDefinitionName: 'PROCESS_TEST',
        processDefinitionKey: 'PROCESS_TEST',
        taskId: '999',
        taskName: 'TEST',
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1615506402205',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'installments',
                            name: 'Installments',
                            type: 'integer',
                            value: null,
                            required: true,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    2: [
                        {
                            fieldType: 'RestFieldRepresentation',
                            id: 'schedule',
                            name: 'Schedule',
                            type: 'dropdown',
                            value: 'Choose one...',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: true,
                            options: [
                                {
                                    id: 'empty',
                                    name: 'Choose one...'
                                },
                                {
                                    id: 'ANNUAL',
                                    name: 'Annual'
                                },
                                {
                                    id: 'QUARTERLY',
                                    name: 'Quarterly'
                                },
                                {
                                    id: 'MONTHLY',
                                    name: 'Monthly'
                                }
                            ],
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            endpoint: null,
                            requestHeaders: null
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: 1615506384790,
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    1: [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'showtext',
                            name: 'Show text',
                            type: 'readonly-text',
                            value: 'This test is shown when the visibility logic is displayed.\nThis should only show under the following conditions:\nAnnual and installment > 5\nQuarterly and installment > 20\nMonthly and installment > 60',
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: {
                                leftFormFieldId: 'schedule',
                                leftRestResponseId: null,
                                operator: '==',
                                rightValue: 'ANNUAL',
                                rightType: null,
                                rightFormFieldId: '',
                                rightRestResponseId: '',
                                nextConditionOperator: 'and',
                                nextCondition: {
                                    leftFormFieldId: 'installments',
                                    leftRestResponseId: null,
                                    operator: '>',
                                    rightValue: 5,
                                    rightType: null,
                                    rightFormFieldId: '',
                                    rightRestResponseId: '',
                                    nextConditionOperator: 'or',
                                    nextCondition: {
                                        leftFormFieldId: 'schedule',
                                        leftRestResponseId: null,
                                        operator: '==',
                                        rightValue: 'QUARTERLY',
                                        rightType: null,
                                        rightFormFieldId: '',
                                        rightRestResponseId: '',
                                        nextConditionOperator: 'and',
                                        nextCondition: {
                                            leftFormFieldId: 'installments',
                                            leftRestResponseId: null,
                                            operator: '>',
                                            rightValue: 20,
                                            rightType: null,
                                            rightFormFieldId: '',
                                            rightRestResponseId: '',
                                            nextConditionOperator: 'or',
                                            nextCondition: {
                                                leftFormFieldId: 'schedule',
                                                leftRestResponseId: null,
                                                operator: '==',
                                                rightValue: 'MONTHLY',
                                                rightType: null,
                                                rightFormFieldId: '',
                                                rightRestResponseId: '',
                                                nextConditionOperator: 'and',
                                                nextCondition: {
                                                    leftFormFieldId: 'installments',
                                                    leftRestResponseId: null,
                                                    operator: '>',
                                                    rightValue: 60,
                                                    rightType: null,
                                                    rightFormFieldId: '',
                                                    rightRestResponseId: '',
                                                    nextConditionOperator: '',
                                                    nextCondition: null
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    ],
                    2: []
                }
            }
        ],
        variables: [
            {
                'id': 'e621e8ff-42a6-499c-8121-33c7c35d8641',
                'name': 'age',
                'type': 'integer',
                'value': 11
            },
            {
                'id': '4f8aa99e-8526-429c-9d99-809978489d96',
                'name': 'name',
                'type': 'string',
                'value': 'abc'
            },
            {
                'id': '0207b649-ff07-4f3a-a589-d10afa507b9b',
                'name': 'dob',
                'type': 'date',
                'value': '2019-05-13'
            }
        ]
    };
    var complexVisibilityJsonVisible = {
        'id': 47591,
        'name': 'Test-visibility',
        'description': '',
        'version': 4,
        'lastUpdatedBy': 13,
        'lastUpdatedByFullName': 'romano romano',
        'lastUpdated': '2019-06-11T11:  04:  36.870+0000',
        'stencilSetId': 0,
        'referenceId': null,
        'formDefinition': {
            'tabs': [],
            'fields': [{
                    'fieldType': 'ContainerRepresentation',
                    'id': '1560246123312',
                    'name': 'Label',
                    'type': 'container',
                    'value': null,
                    'required': false,
                    'readOnly': false,
                    'overrideId': false,
                    'colspan': 1,
                    'placeholder': null,
                    'minLength': 0,
                    'maxLength': 0,
                    'minValue': null,
                    'maxValue': null,
                    'regexPattern': null,
                    'optionType': null,
                    'hasEmptyValue': null,
                    'options': null,
                    'restUrl': null,
                    'restResponsePath': null,
                    'restIdProperty': null,
                    'restLabelProperty': null,
                    'tab': null,
                    'className': null,
                    'dateDisplayFormat': null,
                    'layout': null,
                    'sizeX': 2,
                    'sizeY': 1,
                    'row': -1,
                    'col': -1,
                    'visibilityCondition': null,
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label',
                                'name': 'Label',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 2 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }],
                        '2': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label1',
                                'name': 'Label1',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 1 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }]
                    }
                }, {
                    'fieldType': 'ContainerRepresentation',
                    'id': '1560246128696',
                    'name': 'Label',
                    'type': 'container',
                    'value': null,
                    'required': false,
                    'readOnly': false,
                    'overrideId': false,
                    'colspan': 1,
                    'placeholder': null,
                    'minLength': 0,
                    'maxLength': 0,
                    'minValue': null,
                    'maxValue': null,
                    'regexPattern': null,
                    'optionType': null,
                    'hasEmptyValue': null,
                    'options': null,
                    'restUrl': null,
                    'restResponsePath': null,
                    'restIdProperty': null,
                    'restLabelProperty': null,
                    'tab': null,
                    'className': null,
                    'dateDisplayFormat': null,
                    'layout': null,
                    'sizeX': 2,
                    'sizeY': 1,
                    'row': -1,
                    'col': -1,
                    'visibilityCondition': null,
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label4',
                                'name': 'Label4',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 2 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }],
                        '2': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label3',
                                'name': 'Label3',
                                'type': 'text',
                                'value': '',
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 1 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }]
                    }
                }, {
                    'fieldType': 'ContainerRepresentation',
                    'id': '1560246126964',
                    'name': 'Label',
                    'type': 'container',
                    'value': null,
                    'required': false,
                    'readOnly': false,
                    'overrideId': false,
                    'colspan': 1,
                    'placeholder': null,
                    'minLength': 0,
                    'maxLength': 0,
                    'minValue': null,
                    'maxValue': null,
                    'regexPattern': null,
                    'optionType': null,
                    'hasEmptyValue': null,
                    'options': null,
                    'restUrl': null,
                    'restResponsePath': null,
                    'restIdProperty': null,
                    'restLabelProperty': null,
                    'tab': null,
                    'className': null,
                    'dateDisplayFormat': null,
                    'layout': null,
                    'sizeX': 2,
                    'sizeY': 1,
                    'row': -1,
                    'col': -1,
                    'visibilityCondition': null,
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label2',
                                'name': 'Label2',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 2 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }],
                        '2': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label5',
                                'name': 'Label5',
                                'type': 'boolean',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 1 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': {
                                    'leftFormFieldId': 'label',
                                    'leftRestResponseId': null,
                                    'operator': '==',
                                    'rightValue': 'aaa',
                                    'rightType': null,
                                    'rightFormFieldId': '',
                                    'rightRestResponseId': '',
                                    'nextConditionOperator': 'and',
                                    'nextCondition': {
                                        'leftFormFieldId': 'label1',
                                        'leftRestResponseId': null,
                                        'operator': '!=',
                                        'rightValue': 'aaa',
                                        'rightType': null,
                                        'rightFormFieldId': '',
                                        'rightRestResponseId': '',
                                        'nextConditionOperator': 'and',
                                        'nextCondition': {
                                            'leftFormFieldId': 'label2',
                                            'leftRestResponseId': null,
                                            'operator': '!empty',
                                            'rightValue': null,
                                            'rightType': null,
                                            'rightFormFieldId': '',
                                            'rightRestResponseId': '',
                                            'nextConditionOperator': 'or',
                                            'nextCondition': {
                                                'leftFormFieldId': 'label3',
                                                'leftRestResponseId': null,
                                                'operator': 'empty',
                                                'rightValue': null,
                                                'rightType': null,
                                                'rightFormFieldId': '',
                                                'rightRestResponseId': '',
                                                'nextConditionOperator': null,
                                                'nextCondition': null
                                            }
                                        }
                                    }
                                }
                            }]
                    }
                }],
            'outcomes': [],
            'javascriptEvents': [],
            'className': '',
            'style': '',
            'customFieldTemplates': {},
            'metadata': {},
            'variables': [],
            'customFieldsValueInfo': {},
            'gridsterForm': false
        }
    };
    var complexVisibilityJsonNotVisible = {
        'id': 47591,
        'name': 'Test-visibility',
        'description': '',
        'version': 4,
        'lastUpdatedBy': 13,
        'lastUpdatedByFullName': 'romano romano',
        'lastUpdated': '2019-06-11T11:  04:  36.870+0000',
        'stencilSetId': 0,
        'referenceId': null,
        'formDefinition': {
            'tabs': [],
            'fields': [{
                    'fieldType': 'ContainerRepresentation',
                    'id': '1560246123312',
                    'name': 'Label',
                    'type': 'container',
                    'value': null,
                    'required': false,
                    'readOnly': false,
                    'overrideId': false,
                    'colspan': 1,
                    'placeholder': null,
                    'minLength': 0,
                    'maxLength': 0,
                    'minValue': null,
                    'maxValue': null,
                    'regexPattern': null,
                    'optionType': null,
                    'hasEmptyValue': null,
                    'options': null,
                    'restUrl': null,
                    'restResponsePath': null,
                    'restIdProperty': null,
                    'restLabelProperty': null,
                    'tab': null,
                    'className': null,
                    'dateDisplayFormat': null,
                    'layout': null,
                    'sizeX': 2,
                    'sizeY': 1,
                    'row': -1,
                    'col': -1,
                    'visibilityCondition': null,
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label',
                                'name': 'Label',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 2 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }],
                        '2': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label1',
                                'name': 'Label1',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 1 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }]
                    }
                }, {
                    'fieldType': 'ContainerRepresentation',
                    'id': '1560246128696',
                    'name': 'Label',
                    'type': 'container',
                    'value': null,
                    'required': false,
                    'readOnly': false,
                    'overrideId': false,
                    'colspan': 1,
                    'placeholder': null,
                    'minLength': 0,
                    'maxLength': 0,
                    'minValue': null,
                    'maxValue': null,
                    'regexPattern': null,
                    'optionType': null,
                    'hasEmptyValue': null,
                    'options': null,
                    'restUrl': null,
                    'restResponsePath': null,
                    'restIdProperty': null,
                    'restLabelProperty': null,
                    'tab': null,
                    'className': null,
                    'dateDisplayFormat': null,
                    'layout': null,
                    'sizeX': 2,
                    'sizeY': 1,
                    'row': -1,
                    'col': -1,
                    'visibilityCondition': null,
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label4',
                                'name': 'Label4',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 2 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }],
                        '2': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label3',
                                'name': 'Label3',
                                'type': 'text',
                                'value': 'OPSSS',
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 1 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }]
                    }
                }, {
                    'fieldType': 'ContainerRepresentation',
                    'id': '1560246126964',
                    'name': 'Label',
                    'type': 'container',
                    'value': null,
                    'required': false,
                    'readOnly': false,
                    'overrideId': false,
                    'colspan': 1,
                    'placeholder': null,
                    'minLength': 0,
                    'maxLength': 0,
                    'minValue': null,
                    'maxValue': null,
                    'regexPattern': null,
                    'optionType': null,
                    'hasEmptyValue': null,
                    'options': null,
                    'restUrl': null,
                    'restResponsePath': null,
                    'restIdProperty': null,
                    'restLabelProperty': null,
                    'tab': null,
                    'className': null,
                    'dateDisplayFormat': null,
                    'layout': null,
                    'sizeX': 2,
                    'sizeY': 1,
                    'row': -1,
                    'col': -1,
                    'visibilityCondition': null,
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label2',
                                'name': 'Label2',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 2 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }],
                        '2': [{
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label5',
                                'name': 'Label5',
                                'type': 'boolean',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': null,
                                'className': null,
                                'params': { 'existingColspan': 1, 'maxColspan': 1 },
                                'dateDisplayFormat': null,
                                'layout': { 'row': -1, 'column': -1, 'colspan': 1 },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': {
                                    'leftFormFieldId': 'label',
                                    'leftRestResponseId': null,
                                    'operator': '==',
                                    'rightValue': 'aaa',
                                    'rightFormFieldId': '',
                                    'rightRestResponseId': '',
                                    'nextConditionOperator': 'and',
                                    'nextCondition': {
                                        'leftFormFieldId': 'label1',
                                        'leftRestResponseId': null,
                                        'operator': '!=',
                                        'rightValue': 'aaa',
                                        'rightFormFieldId': '',
                                        'rightRestResponseId': '',
                                        'nextConditionOperator': 'and',
                                        'nextCondition': {
                                            'leftFormFieldId': 'label2',
                                            'leftRestResponseId': null,
                                            'operator': '!empty',
                                            'rightValue': null,
                                            'rightFormFieldId': '',
                                            'rightRestResponseId': '',
                                            'nextConditionOperator': 'or',
                                            'nextCondition': {
                                                'leftFormFieldId': 'label3',
                                                'leftRestResponseId': null,
                                                'operator': 'empty',
                                                'rightValue': null,
                                                'rightFormFieldId': '',
                                                'rightRestResponseId': '',
                                                'nextConditionOperator': null,
                                                'nextCondition': null
                                            }
                                        }
                                    }
                                }
                            }]
                    }
                }],
            'outcomes': [],
            'javascriptEvents': [],
            'className': '',
            'style': '',
            'customFieldTemplates': {},
            'metadata': {},
            'variables': [],
            'customFieldsValueInfo': {},
            'gridsterForm': false
        }
    };
    var tabVisibilityJsonMock = {
        'id': 45231,
        'name': 'visibility-form',
        'description': '',
        'version': 2,
        'lastUpdatedBy': 4255,
        'lastUpdatedByFullName': 'first last',
        'lastUpdated': '2019-08-26T08: 04: 02.091+0000',
        'stencilSetId': null,
        'referenceId': null,
        'tabs': [
            {
                'id': 'tab1',
                'title': 'tab1',
                'visibilityCondition': null
            },
            {
                'id': 'tab2',
                'title': 'Tab2',
                'visibilityCondition': {
                    'leftFormFieldId': 'label',
                    'leftRestResponseId': null,
                    'operator': '==',
                    'rightValue': 'text',
                    'rightType': null,
                    'rightFormFieldId': '',
                    'rightRestResponseId': '',
                    'nextConditionOperator': '',
                    'nextCondition': null
                }
            }
        ],
        'formDefinition': {
            'fields': [
                {
                    'fieldType': 'ContainerRepresentation',
                    'id': '1566806229182',
                    'name': 'Label',
                    'type': 'container',
                    'value': null,
                    'required': false,
                    'readOnly': false,
                    'overrideId': false,
                    'colspan': 1,
                    'placeholder': null,
                    'minLength': 0,
                    'maxLength': 0,
                    'minValue': null,
                    'maxValue': null,
                    'regexPattern': null,
                    'optionType': null,
                    'hasEmptyValue': null,
                    'options': null,
                    'restUrl': null,
                    'restResponsePath': null,
                    'restIdProperty': null,
                    'restLabelProperty': null,
                    'tab': 'tab1',
                    'className': null,
                    'dateDisplayFormat': null,
                    'layout': null,
                    'sizeX': 2,
                    'sizeY': 1,
                    'row': -1,
                    'col': -1,
                    'visibilityCondition': null,
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [
                            {
                                'fieldType': 'FormFieldRepresentation',
                                'id': 'label',
                                'name': 'Label',
                                'type': 'text',
                                'value': null,
                                'required': false,
                                'readOnly': false,
                                'overrideId': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'minValue': null,
                                'maxValue': null,
                                'regexPattern': null,
                                'optionType': null,
                                'hasEmptyValue': null,
                                'options': null,
                                'restUrl': null,
                                'restResponsePath': null,
                                'restIdProperty': null,
                                'restLabelProperty': null,
                                'tab': 'tab1',
                                'className': null,
                                'params': {
                                    'existingColspan': 1,
                                    'maxColspan': 2
                                },
                                'dateDisplayFormat': null,
                                'layout': {
                                    'row': -1,
                                    'column': -1,
                                    'colspan': 1
                                },
                                'sizeX': 1,
                                'sizeY': 1,
                                'row': -1,
                                'col': -1,
                                'visibilityCondition': null
                            }
                        ],
                        '2': []
                    }
                }
            ],
            'outcomes': [],
            'javascriptEvents': [],
            'className': '',
            'style': '',
            'customFieldTemplates': {},
            'metadata': {},
            'variables': [],
            'customFieldsValueInfo': {},
            'gridsterForm': false
        }
    };
    var tabInvalidFormVisibility = {
        'id': 'form-0668939d-34b2-440c-ab4d-01ab8b05a881',
        'name': 'tab-visibility',
        'description': '',
        'version': 0,
        'standalone': true,
        'tabs': [
            {
                'id': 'a8a4718d-5019-4852-9645-bba9b8253d86',
                'title': 'tab1',
                'visibilityCondition': {
                    'leftType': 'field',
                    'leftValue': 'Text1',
                    'operator': '==',
                    'rightValue': 'showtab',
                    'rightType': 'value',
                    'nextConditionOperator': '',
                    'nextCondition': null
                }
            },
            {
                'id': 'bb9033ca-55ef-432a-8120-bffc8a179ebb',
                'title': 'tab2',
                'visibilityCondition': null
            }
        ],
        'formDefinition': {
            'fields': [
                {
                    'id': '093270a5-6e28-4cf0-a72a-09731c0d59fd',
                    'name': 'Label',
                    'type': 'container',
                    'tab': 'a8a4718d-5019-4852-9645-bba9b8253d86',
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [
                            {
                                'id': 'Number1',
                                'name': 'Number1',
                                'type': 'integer',
                                'colspan': 1,
                                'placeholder': null,
                                'minValue': null,
                                'maxValue': null,
                                'required': false,
                                'visibilityCondition': null,
                                'params': {
                                    'existingColspan': 1,
                                    'maxColspan': 2
                                }
                            },
                            {
                                'id': 'Number2',
                                'name': 'Number2',
                                'type': 'integer',
                                'colspan': 1,
                                'placeholder': null,
                                'minValue': null,
                                'maxValue': null,
                                'required': false,
                                'visibilityCondition': {
                                    'leftType': 'field',
                                    'leftValue': 'Text2',
                                    'operator': '==',
                                    'rightValue': 'shownumber',
                                    'rightType': 'value',
                                    'nextConditionOperator': '',
                                    'nextCondition': null
                                },
                                'params': {
                                    'existingColspan': 1,
                                    'maxColspan': 2
                                }
                            }
                        ],
                        '2': [
                            {
                                'id': 'Text2',
                                'name': 'Text2',
                                'type': 'text',
                                'required': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'regexPattern': null,
                                'visibilityCondition': null,
                                'params': {
                                    'existingColspan': 1,
                                    'maxColspan': 2
                                }
                            }
                        ]
                    }
                },
                {
                    'id': 'c33579eb-3514-42cc-832d-2998d06a3eab',
                    'name': 'Label',
                    'type': 'container',
                    'tab': 'bb9033ca-55ef-432a-8120-bffc8a179ebb',
                    'numberOfColumns': 2,
                    'fields': {
                        '1': [
                            {
                                'id': 'Text1',
                                'name': 'Text1',
                                'type': 'text',
                                'required': false,
                                'colspan': 1,
                                'placeholder': null,
                                'minLength': 0,
                                'maxLength': 0,
                                'regexPattern': null,
                                'visibilityCondition': null,
                                'params': {
                                    'existingColspan': 1,
                                    'maxColspan': 2
                                }
                            }
                        ],
                        '2': []
                    }
                }
            ],
            'outcomes': [],
            'metadata': {},
            'variables': []
        }
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var mockToken = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ' +
        'zdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiZmFtaWx5X25hbWUiOiJEb2UiLCJnaXZ' +
        'lbl9uYW1lIjoiSm9obiIsImFkbWluIjp0cnVlLCJlbWFpbCI6ImpvaG5Eb2VAZ21haWwuY29tIiwicHJ' +
        'lZmVycmVkX3VzZXJuYW1lIjoiam9obkRvZTEiLCJqdGkiOiI2MmQ3YjA4NS1hNTJjLTRjZmEtYjA2Zi1' +
        'hODFhN2IwNjRjZDIiLCJpYXQiOjE1NDM0MTA0NzcsImV4cCI6MTU0MzQxNTIxM30.pSP86kmX3keuU5E3ndaOUq2TzKdJRsuMnBdFz3Y-UEU';

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var mockIdentityGroup1 = {
        id: 'mock-group-id-1', name: 'Mock Group 1', path: '/mock', subGroups: []
    };
    var mockIdentityGroup2 = {
        id: 'mock-group-id-2', name: 'Mock Group 2', path: '', subGroups: []
    };
    var mockIdentityGroup3 = {
        id: 'mock-group-id-3', name: 'Mock Group 3', path: '', subGroups: []
    };
    var mockIdentityGroup4 = {
        id: 'mock-group-id-4', name: 'Mock Group 4', path: '', subGroups: []
    };
    var mockIdentityGroup5 = {
        id: 'mock-group-id-5', name: 'Mock Group 5', path: '', subGroups: []
    };
    var mockIdentityGroupsCount = { count: 10 };
    var mockIdentityGroups = [
        mockIdentityGroup1, mockIdentityGroup2, mockIdentityGroup3, mockIdentityGroup4, mockIdentityGroup5
    ];
    var mockApplicationDetails = { id: 'mock-app-id', name: 'mock-app-name' };
    var roleMappingMock = [
        { id: 'role-id-1', name: 'role-name-1' }, { id: 'role-id-2', name: 'role-name-2' }
    ];
    var ɵ0$9 = function () {
        return Promise.resolve(roleMappingMock);
    };
    var roleMappingApi = {
        oauth2Auth: {
            callCustomApi: ɵ0$9
        }
    };
    var ɵ1$4 = function () {
        return Promise.resolve([]);
    };
    var noRoleMappingApi = {
        oauth2Auth: {
            callCustomApi: ɵ1$4
        }
    };
    var ɵ2$1 = function () {
        return Promise.resolve(mockIdentityGroups);
    };
    var groupsMockApi = {
        oauth2Auth: {
            callCustomApi: ɵ2$1
        }
    };
    var ɵ3 = function () {
        return Promise.resolve();
    };
    var createGroupMappingApi = {
        oauth2Auth: {
            callCustomApi: ɵ3
        }
    };
    var ɵ4 = function () {
        return Promise.resolve();
    };
    var updateGroupMappingApi = {
        oauth2Auth: {
            callCustomApi: ɵ4
        }
    };
    var ɵ5 = function () {
        return Promise.resolve();
    };
    var deleteGroupMappingApi = {
        oauth2Auth: {
            callCustomApi: ɵ5
        }
    };
    var ɵ6 = function () {
        return Promise.resolve([mockApplicationDetails]);
    };
    var applicationDetailsMockApi = {
        oauth2Auth: {
            callCustomApi: ɵ6
        }
    };
    var mockIdentityRoles = [
        new IdentityRoleModel({ id: 'mock-role-id', name: 'MOCK-ADMIN-ROLE' }),
        new IdentityRoleModel({ id: 'mock-role-id', name: 'MOCK-USER-ROLE' }),
        new IdentityRoleModel({ id: 'mock-role-id', name: 'MOCK-ROLE-1' })
    ];
    var clientRoles = [
        new IdentityRoleModel({ name: 'MOCK-ADMIN-ROLE' }),
        new IdentityRoleModel({ name: 'MOCK-USER-ROLE' })
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var resetTestingModule = testing.TestBed.resetTestingModule;
    var preventAngularFromResetting = function () { return (testing.TestBed.resetTestingModule = function () { return testing.TestBed; }); };
    var ɵ0$a = preventAngularFromResetting;
    var allowAngularToReset = function () { return (testing.TestBed.resetTestingModule = resetTestingModule); };
    var ɵ1$5 = allowAngularToReset;
    var setupTestBed = function (moduleDef) {
        beforeAll(function (done) {
            localStorage.clear();
            sessionStorage.clear();
            resetTestingModule();
            preventAngularFromResetting();
            testing.TestBed.configureTestingModule(moduleDef);
            testing.TestBed.compileComponents()
                .then(function () {
                testing.TestBed.resetTestingModule = function () { return testing.TestBed; };
                done();
            })
                .catch(done.fail);
        });
        afterAll(function () { return allowAngularToReset(); });
    };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    function startupServiceFactory(alfrescoApiService) {
        return function () { return alfrescoApiService.load(); };
    }

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    function directionalityConfigFactory(directionalityConfigService) { return function () { return directionalityConfigService; }; }

    var DirectionalityConfigService = /** @class */ (function () {
        function DirectionalityConfigService(document, rendererFactory, userPreferencesService, directionality) {
            var _this = this;
            this.document = document;
            this.rendererFactory = rendererFactory;
            this.userPreferencesService = userPreferencesService;
            this.directionality = directionality;
            var renderer = this.rendererFactory.createRenderer(null, null);
            this.userPreferencesService
                .select('textOrientation')
                .subscribe(function (direction) {
                renderer.setAttribute(_this.document.body, 'dir', direction);
                _this.directionality.value = direction;
            });
        }
        return DirectionalityConfigService;
    }());
    DirectionalityConfigService.ɵprov = i0.ɵɵdefineInjectable({ factory: function DirectionalityConfigService_Factory() { return new DirectionalityConfigService(i0.ɵɵinject(i1$1.DOCUMENT), i0.ɵɵinject(i0.RendererFactory2), i0.ɵɵinject(UserPreferencesService), i0.ɵɵinject(i3$1.Directionality)); }, token: DirectionalityConfigService, providedIn: "root" });
    DirectionalityConfigService.decorators = [
        { type: i0.Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    DirectionalityConfigService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: i0.Inject, args: [i1$1.DOCUMENT,] }] },
        { type: i0.RendererFactory2 },
        { type: UserPreferencesService },
        { type: i3$1.Directionality }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    function versionCompatibilityFactory(versionCompatibilityService) { return function () { return versionCompatibilityService; }; }

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var CoreModule = /** @class */ (function () {
        function CoreModule(translation) {
            translation.addTranslationFolder('adf-core', 'assets/adf-core');
        }
        CoreModule.forRoot = function () {
            return {
                ngModule: CoreModule,
                providers: [
                    i1$2.TranslateStore,
                    i1$2.TranslateService,
                    { provide: i1$2.TranslateLoader, useClass: TranslateLoaderService },
                    {
                        provide: i0.APP_INITIALIZER,
                        useFactory: startupServiceFactory,
                        deps: [
                            AlfrescoApiService
                        ],
                        multi: true
                    },
                    {
                        provide: i0.APP_INITIALIZER,
                        useFactory: directionalityConfigFactory,
                        deps: [DirectionalityConfigService],
                        multi: true
                    },
                    {
                        provide: i0.APP_INITIALIZER,
                        useFactory: versionCompatibilityFactory,
                        deps: [VersionCompatibilityService],
                        multi: true
                    }
                ]
            };
        };
        CoreModule.forChild = function () {
            return {
                ngModule: CoreModule
            };
        };
        return CoreModule;
    }());
    CoreModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        i1$2.TranslateModule,
                        i2.ExtensionsModule,
                        AboutModule,
                        ViewerModule,
                        SidenavLayoutModule,
                        PipeModule,
                        i1$1.CommonModule,
                        DirectiveModule,
                        DialogModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        HostSettingsModule,
                        UserInfoModule,
                        MaterialModule,
                        AppConfigModule,
                        PaginationModule,
                        ToolbarModule,
                        ContextMenuModule,
                        CardViewModule,
                        FormBaseModule,
                        CommentsModule,
                        LoginModule,
                        LanguageMenuModule,
                        InfoDrawerModule,
                        DataColumnModule,
                        DataTableModule,
                        ButtonsMenuModule,
                        TemplateModule,
                        IconModule,
                        SortingPickerModule,
                        NotificationHistoryModule,
                        SearchTextModule,
                        BlankPageModule
                    ],
                    exports: [
                        AboutModule,
                        ViewerModule,
                        SidenavLayoutModule,
                        PipeModule,
                        i1$1.CommonModule,
                        DirectiveModule,
                        DialogModule,
                        ClipboardModule,
                        forms.FormsModule,
                        forms.ReactiveFormsModule,
                        HostSettingsModule,
                        UserInfoModule,
                        MaterialModule,
                        AppConfigModule,
                        PaginationModule,
                        ToolbarModule,
                        ContextMenuModule,
                        CardViewModule,
                        FormBaseModule,
                        CommentsModule,
                        LoginModule,
                        LanguageMenuModule,
                        InfoDrawerModule,
                        DataColumnModule,
                        DataTableModule,
                        i1$2.TranslateModule,
                        ButtonsMenuModule,
                        TemplateModule,
                        SortingPickerModule,
                        IconModule,
                        NotificationHistoryModule,
                        SearchTextModule,
                        BlankPageModule
                    ]
                },] }
    ];
    CoreModule.ctorParameters = function () { return [
        { type: TranslationService }
    ]; };

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var ɵ0$b = directionalityConfigFactory, ɵ1$6 = versionCompatibilityFactory;
    var CoreTestingModule = /** @class */ (function () {
        function CoreTestingModule() {
        }
        return CoreTestingModule;
    }());
    CoreTestingModule.decorators = [
        { type: i0.NgModule, args: [{
                    imports: [
                        animations$1.NoopAnimationsModule,
                        testing$1.RouterTestingModule,
                        i1.HttpClientModule,
                        i1$2.TranslateModule.forRoot(),
                        CoreModule.forRoot()
                    ],
                    providers: [
                        i1$1.DatePipe,
                        { provide: AlfrescoApiService, useClass: AlfrescoApiServiceMock },
                        { provide: AppConfigService, useClass: AppConfigServiceMock },
                        { provide: TranslationService, useClass: TranslationMock },
                        { provide: CookieService, useClass: CookieServiceMock },
                        {
                            provide: i0.APP_INITIALIZER,
                            useFactory: ɵ0$b,
                            deps: [DirectionalityConfigService],
                            multi: true
                        },
                        {
                            provide: i0.APP_INITIALIZER,
                            useFactory: ɵ1$6,
                            deps: [VersionCompatibilityService],
                            multi: true
                        }
                    ],
                    exports: [
                        animations$1.NoopAnimationsModule,
                        CoreModule,
                        i1$2.TranslateModule
                    ]
                },] }
    ];

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    /*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    exports.ADF_AMOUNT_SETTINGS = ADF_AMOUNT_SETTINGS;
    exports.AboutApplicationModulesComponent = AboutApplicationModulesComponent;
    exports.AboutGithubLinkComponent = AboutGithubLinkComponent;
    exports.AboutModule = AboutModule;
    exports.AboutProductVersionComponent = AboutProductVersionComponent;
    exports.AboutServerSettingsComponent = AboutServerSettingsComponent;
    exports.ActivitiContentService = ActivitiContentService;
    exports.AlfrescoApiMock = AlfrescoApiMock;
    exports.AlfrescoApiService = AlfrescoApiService;
    exports.AlfrescoApiServiceMock = AlfrescoApiServiceMock;
    exports.AllowableOperationsEnum = AllowableOperationsEnum;
    exports.AmountEditorComponent = AmountEditorComponent;
    exports.AmountWidgetComponent = AmountWidgetComponent;
    exports.AppConfigModule = AppConfigModule;
    exports.AppConfigPipe = AppConfigPipe;
    exports.AppConfigService = AppConfigService;
    exports.AppConfigServiceMock = AppConfigServiceMock;
    exports.AppsProcessService = AppsProcessService;
    exports.AuthBearerInterceptor = AuthBearerInterceptor;
    exports.AuthGuard = AuthGuard;
    exports.AuthGuardBase = AuthGuardBase;
    exports.AuthGuardBpm = AuthGuardBpm;
    exports.AuthGuardEcm = AuthGuardEcm;
    exports.AuthGuardSsoRoleService = AuthGuardSsoRoleService;
    exports.AuthenticationMock = AuthenticationMock;
    exports.AuthenticationService = AuthenticationService;
    exports.BaseEvent = BaseEvent;
    exports.BaseUIEvent = BaseUIEvent;
    exports.BlankPageComponent = BlankPageComponent;
    exports.BlankPageModule = BlankPageModule;
    exports.BooleanEditorComponent = BooleanEditorComponent;
    exports.BoundaryDateFieldValidator = BoundaryDateFieldValidator;
    exports.BpmProductVersionModel = BpmProductVersionModel;
    exports.BpmUserModel = BpmUserModel;
    exports.BpmUserService = BpmUserService;
    exports.ButtonsMenuComponent = ButtonsMenuComponent;
    exports.ButtonsMenuModule = ButtonsMenuModule;
    exports.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR = CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR;
    exports.CardItemTypeService = CardItemTypeService;
    exports.CardViewArrayItemComponent = CardViewArrayItemComponent;
    exports.CardViewArrayItemModel = CardViewArrayItemModel;
    exports.CardViewBaseItemModel = CardViewBaseItemModel;
    exports.CardViewBoolItemComponent = CardViewBoolItemComponent;
    exports.CardViewBoolItemModel = CardViewBoolItemModel;
    exports.CardViewComponent = CardViewComponent;
    exports.CardViewContentProxyDirective = CardViewContentProxyDirective;
    exports.CardViewDateItemComponent = CardViewDateItemComponent;
    exports.CardViewDateItemModel = CardViewDateItemModel;
    exports.CardViewDatetimeItemModel = CardViewDatetimeItemModel;
    exports.CardViewFloatItemModel = CardViewFloatItemModel;
    exports.CardViewIntItemModel = CardViewIntItemModel;
    exports.CardViewItemFloatValidator = CardViewItemFloatValidator;
    exports.CardViewItemIntValidator = CardViewItemIntValidator;
    exports.CardViewItemLengthValidator = CardViewItemLengthValidator;
    exports.CardViewItemMatchValidator = CardViewItemMatchValidator;
    exports.CardViewItemMinMaxValidator = CardViewItemMinMaxValidator;
    exports.CardViewKeyValuePairsItemComponent = CardViewKeyValuePairsItemComponent;
    exports.CardViewKeyValuePairsItemModel = CardViewKeyValuePairsItemModel;
    exports.CardViewMapItemComponent = CardViewMapItemComponent;
    exports.CardViewMapItemModel = CardViewMapItemModel;
    exports.CardViewModule = CardViewModule;
    exports.CardViewSelectItemComponent = CardViewSelectItemComponent;
    exports.CardViewSelectItemModel = CardViewSelectItemModel;
    exports.CardViewTextItemComponent = CardViewTextItemComponent;
    exports.CardViewTextItemModel = CardViewTextItemModel;
    exports.CardViewUpdateService = CardViewUpdateService;
    exports.CheckAllowableOperationDirective = CheckAllowableOperationDirective;
    exports.CheckboxWidgetComponent = CheckboxWidgetComponent;
    exports.ClipboardComponent = ClipboardComponent;
    exports.ClipboardDirective = ClipboardDirective;
    exports.ClipboardModule = ClipboardModule;
    exports.ClipboardService = ClipboardService;
    exports.CommentContentService = CommentContentService;
    exports.CommentListComponent = CommentListComponent;
    exports.CommentModel = CommentModel;
    exports.CommentProcessService = CommentProcessService;
    exports.CommentsComponent = CommentsComponent;
    exports.CommentsModule = CommentsModule;
    exports.ContainerColumnModel = ContainerColumnModel;
    exports.ContainerModel = ContainerModel;
    exports.ContainerWidgetComponent = ContainerWidgetComponent;
    exports.ContentLinkModel = ContentLinkModel;
    exports.ContentService = ContentService;
    exports.ContentWidgetComponent = ContentWidgetComponent;
    exports.ContextMenuDirective = ContextMenuDirective;
    exports.ContextMenuModule = ContextMenuModule;
    exports.ContextMenuOverlayService = ContextMenuOverlayService;
    exports.CookieService = CookieService;
    exports.CookieServiceMock = CookieServiceMock;
    exports.CoreAutomationService = CoreAutomationService;
    exports.CoreModule = CoreModule;
    exports.CoreTestingModule = CoreTestingModule;
    exports.CustomEmptyContentTemplateDirective = CustomEmptyContentTemplateDirective;
    exports.CustomLoadingContentTemplateDirective = CustomLoadingContentTemplateDirective;
    exports.CustomNoPermissionTemplateDirective = CustomNoPermissionTemplateDirective;
    exports.DataCellEvent = DataCellEvent;
    exports.DataCellEventModel = DataCellEventModel;
    exports.DataColumnComponent = DataColumnComponent;
    exports.DataColumnListComponent = DataColumnListComponent;
    exports.DataColumnModule = DataColumnModule;
    exports.DataRowActionEvent = DataRowActionEvent;
    exports.DataRowActionModel = DataRowActionModel;
    exports.DataRowEvent = DataRowEvent;
    exports.DataSorting = DataSorting;
    exports.DataTableCellComponent = DataTableCellComponent;
    exports.DataTableComponent = DataTableComponent;
    exports.DataTableModule = DataTableModule;
    exports.DataTableRowComponent = DataTableRowComponent;
    exports.DataTableSchema = DataTableSchema;
    exports.DateCellComponent = DateCellComponent;
    exports.DateColumnHeaderComponent = DateColumnHeaderComponent;
    exports.DateEditorComponent = DateEditorComponent;
    exports.DateFieldValidator = DateFieldValidator;
    exports.DateTimeEditorComponent = DateTimeEditorComponent;
    exports.DateTimeFieldValidator = DateTimeFieldValidator;
    exports.DateTimeWidgetComponent = DateTimeWidgetComponent;
    exports.DateWidgetComponent = DateWidgetComponent;
    exports.DebugAppConfigService = DebugAppConfigService;
    exports.DecimalNumberModel = DecimalNumberModel;
    exports.DecimalNumberPipe = DecimalNumberPipe;
    exports.DeletedNodesApiService = DeletedNodesApiService;
    exports.DialogModule = DialogModule;
    exports.DirectiveModule = DirectiveModule;
    exports.DiscoveryApiService = DiscoveryApiService;
    exports.DisplayTextWidgetComponent = DisplayTextWidgetComponent;
    exports.DocumentWidgetComponent = DocumentWidgetComponent;
    exports.DownloadService = DownloadService;
    exports.DownloadZipDialogComponent = DownloadZipDialogComponent;
    exports.DownloadZipService = DownloadZipService;
    exports.DropZoneDirective = DropZoneDirective;
    exports.DropdownEditorComponent = DropdownEditorComponent;
    exports.DropdownWidgetComponent = DropdownWidgetComponent;
    exports.DynamicComponentMapper = DynamicComponentMapper;
    exports.DynamicComponentResolver = DynamicComponentResolver;
    exports.DynamicTableModel = DynamicTableModel;
    exports.DynamicTableWidgetComponent = DynamicTableWidgetComponent;
    exports.EXTENDIBLE_COMPONENT = EXTENDIBLE_COMPONENT;
    exports.EcmCompanyModel = EcmCompanyModel;
    exports.EcmModelService = EcmModelService;
    exports.EcmProductVersionModel = EcmProductVersionModel;
    exports.EcmUserModel = EcmUserModel;
    exports.EcmUserService = EcmUserService;
    exports.EditJsonDialogComponent = EditJsonDialogComponent;
    exports.EditJsonDialogModule = EditJsonDialogModule;
    exports.EmptyContentComponent = EmptyContentComponent;
    exports.EmptyListBodyDirective = EmptyListBodyDirective;
    exports.EmptyListComponent = EmptyListComponent;
    exports.EmptyListFooterDirective = EmptyListFooterDirective;
    exports.EmptyListHeaderDirective = EmptyListHeaderDirective;
    exports.ErrorContentComponent = ErrorContentComponent;
    exports.ErrorMessageModel = ErrorMessageModel;
    exports.ErrorWidgetComponent = ErrorWidgetComponent;
    exports.EventMock = EventMock;
    exports.ExternalAlfrescoApiService = ExternalAlfrescoApiService;
    exports.FORM_FIELD_VALIDATORS = FORM_FIELD_VALIDATORS;
    exports.FavoritesApiService = FavoritesApiService;
    exports.FileModel = FileModel;
    exports.FileSizeCellComponent = FileSizeCellComponent;
    exports.FileSizePipe = FileSizePipe;
    exports.FileTypePipe = FileTypePipe;
    exports.FileUploadCompleteEvent = FileUploadCompleteEvent;
    exports.FileUploadDeleteEvent = FileUploadDeleteEvent;
    exports.FileUploadErrorEvent = FileUploadErrorEvent;
    exports.FileUploadEvent = FileUploadEvent;
    exports.FileUploadOptions = FileUploadOptions;
    exports.FileUtils = FileUtils;
    exports.FileViewerWidgetComponent = FileViewerWidgetComponent;
    exports.FixedValueFieldValidator = FixedValueFieldValidator;
    exports.FormBaseComponent = FormBaseComponent;
    exports.FormBaseModule = FormBaseModule;
    exports.FormErrorEvent = FormErrorEvent;
    exports.FormEvent = FormEvent;
    exports.FormFieldComponent = FormFieldComponent;
    exports.FormFieldEvent = FormFieldEvent;
    exports.FormFieldModel = FormFieldModel;
    exports.FormFieldTypes = FormFieldTypes;
    exports.FormListComponent = FormListComponent;
    exports.FormModel = FormModel;
    exports.FormOutcomeEvent = FormOutcomeEvent;
    exports.FormOutcomeModel = FormOutcomeModel;
    exports.FormRendererComponent = FormRendererComponent;
    exports.FormRenderingService = FormRenderingService;
    exports.FormService = FormService;
    exports.FormWidgetModel = FormWidgetModel;
    exports.FormatSpacePipe = FormatSpacePipe;
    exports.FullNamePipe = FullNamePipe;
    exports.FunctionalGroupWidgetComponent = FunctionalGroupWidgetComponent;
    exports.HeaderFilterTemplateDirective = HeaderFilterTemplateDirective;
    exports.HeaderLayoutComponent = HeaderLayoutComponent;
    exports.HighlightDirective = HighlightDirective;
    exports.HighlightPipe = HighlightPipe;
    exports.HighlightTransformService = HighlightTransformService;
    exports.HostSettingsComponent = HostSettingsComponent;
    exports.HostSettingsModule = HostSettingsModule;
    exports.HyperlinkWidgetComponent = HyperlinkWidgetComponent;
    exports.IconComponent = IconComponent;
    exports.IconModule = IconModule;
    exports.IdentityGroupService = IdentityGroupService;
    exports.IdentityRoleModel = IdentityRoleModel;
    exports.IdentityRoleService = IdentityRoleService;
    exports.IdentityUserService = IdentityUserService;
    exports.ImgViewerComponent = ImgViewerComponent;
    exports.InfinitePaginationComponent = InfinitePaginationComponent;
    exports.InfiniteSelectScrollDirective = InfiniteSelectScrollDirective;
    exports.InfoDrawerButtonsDirective = InfoDrawerButtonsDirective;
    exports.InfoDrawerComponent = InfoDrawerComponent;
    exports.InfoDrawerContentDirective = InfoDrawerContentDirective;
    exports.InfoDrawerLayoutComponent = InfoDrawerLayoutComponent;
    exports.InfoDrawerModule = InfoDrawerModule;
    exports.InfoDrawerTabComponent = InfoDrawerTabComponent;
    exports.InfoDrawerTitleDirective = InfoDrawerTitleDirective;
    exports.InitialUsernamePipe = InitialUsernamePipe;
    exports.InputMaskDirective = InputMaskDirective;
    exports.JSON_TYPE = JSON_TYPE;
    exports.JsonCellComponent = JsonCellComponent;
    exports.JsonWidgetComponent = JsonWidgetComponent;
    exports.JwtHelperService = JwtHelperService;
    exports.LanguageMenuComponent = LanguageMenuComponent;
    exports.LanguageMenuModule = LanguageMenuModule;
    exports.LanguagePickerComponent = LanguagePickerComponent;
    exports.LanguageService = LanguageService;
    exports.LayoutContainerComponent = LayoutContainerComponent;
    exports.LibraryFavoriteDirective = LibraryFavoriteDirective;
    exports.LibraryMembershipDirective = LibraryMembershipDirective;
    exports.LicenseModel = LicenseModel;
    exports.LoadingContentTemplateDirective = LoadingContentTemplateDirective;
    exports.LocalizedDatePipe = LocalizedDatePipe;
    exports.LocalizedRolePipe = LocalizedRolePipe;
    exports.LocationCellComponent = LocationCellComponent;
    exports.LockService = LockService;
    exports.LogService = LogService;
    exports.LoginComponent = LoginComponent;
    exports.LoginDialogComponent = LoginDialogComponent;
    exports.LoginDialogPanelComponent = LoginDialogPanelComponent;
    exports.LoginDialogService = LoginDialogService;
    exports.LoginErrorEvent = LoginErrorEvent;
    exports.LoginFooterDirective = LoginFooterDirective;
    exports.LoginHeaderDirective = LoginHeaderDirective;
    exports.LoginModule = LoginModule;
    exports.LoginSubmitEvent = LoginSubmitEvent;
    exports.LoginSuccessEvent = LoginSuccessEvent;
    exports.LogoutDirective = LogoutDirective;
    exports.MASK_DIRECTIVE = MASK_DIRECTIVE;
    exports.MOMENT_DATE_FORMATS = MOMENT_DATE_FORMATS;
    exports.MaterialModule = MaterialModule;
    exports.MaxDateFieldValidator = MaxDateFieldValidator;
    exports.MaxDateTimeFieldValidator = MaxDateTimeFieldValidator;
    exports.MaxLengthFieldValidator = MaxLengthFieldValidator;
    exports.MaxValueFieldValidator = MaxValueFieldValidator;
    exports.MediaPlayerComponent = MediaPlayerComponent;
    exports.MimeTypeIconPipe = MimeTypeIconPipe;
    exports.MinDateFieldValidator = MinDateFieldValidator;
    exports.MinDateTimeFieldValidator = MinDateTimeFieldValidator;
    exports.MinLengthFieldValidator = MinLengthFieldValidator;
    exports.MinValueFieldValidator = MinValueFieldValidator;
    exports.MomentDateAdapter = MomentDateAdapter;
    exports.MomentDatePipe = MomentDatePipe;
    exports.MomentDateTimePipe = MomentDateTimePipe;
    exports.MultiValuePipe = MultiValuePipe;
    exports.MultilineTextWidgetComponentComponent = MultilineTextWidgetComponentComponent;
    exports.NoContentTemplateDirective = NoContentTemplateDirective;
    exports.NoPermissionTemplateDirective = NoPermissionTemplateDirective;
    exports.NodeDeleteDirective = NodeDeleteDirective;
    exports.NodeDownloadDirective = NodeDownloadDirective;
    exports.NodeFavoriteDirective = NodeFavoriteDirective;
    exports.NodeMetadata = NodeMetadata;
    exports.NodeNameTooltipPipe = NodeNameTooltipPipe;
    exports.NodeRestoreDirective = NodeRestoreDirective;
    exports.NodeService = NodeService;
    exports.NodesApiService = NodesApiService;
    exports.NotificationHistoryComponent = NotificationHistoryComponent;
    exports.NotificationHistoryModule = NotificationHistoryModule;
    exports.NotificationService = NotificationService;
    exports.NumberFieldValidator = NumberFieldValidator;
    exports.NumberWidgetComponent = NumberWidgetComponent;
    exports.OAuth2Service = OAuth2Service;
    exports.ObjectDataColumn = ObjectDataColumn;
    exports.ObjectDataRow = ObjectDataRow;
    exports.ObjectDataTableAdapter = ObjectDataTableAdapter;
    exports.ObjectUtils = ObjectUtils;
    exports.PageTitleService = PageTitleService;
    exports.PaginationComponent = PaginationComponent;
    exports.PaginationModel = PaginationModel;
    exports.PaginationModule = PaginationModule;
    exports.PdfPasswordDialogComponent = PdfPasswordDialogComponent;
    exports.PdfThumbComponent = PdfThumbComponent;
    exports.PdfThumbListComponent = PdfThumbListComponent;
    exports.PdfViewerComponent = PdfViewerComponent;
    exports.PeopleContentService = PeopleContentService;
    exports.PeopleProcessService = PeopleProcessService;
    exports.PeopleWidgetComponent = PeopleWidgetComponent;
    exports.PermissionsEnum = PermissionsEnum;
    exports.PipeModule = PipeModule;
    exports.ProcessContentService = ProcessContentService;
    exports.RadioButtonsWidgetComponent = RadioButtonsWidgetComponent;
    exports.RedirectionModel = RedirectionModel;
    exports.RegExFieldValidator = RegExFieldValidator;
    exports.RenditionsService = RenditionsService;
    exports.RequestPaginationModel = RequestPaginationModel;
    exports.RequiredFieldValidator = RequiredFieldValidator;
    exports.RestoreMessageModel = RestoreMessageModel;
    exports.RowEditorComponent = RowEditorComponent;
    exports.SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR = SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR;
    exports.SearchConfigurationService = SearchConfigurationService;
    exports.SearchService = SearchService;
    exports.SearchTextInputComponent = SearchTextInputComponent;
    exports.SearchTextModule = SearchTextModule;
    exports.SearchTriggerDirective = SearchTriggerDirective;
    exports.SelectFilterInputComponent = SelectFilterInputComponent;
    exports.SharedLinksApiService = SharedLinksApiService;
    exports.SidebarActionMenuComponent = SidebarActionMenuComponent;
    exports.SidebarMenuDirective = SidebarMenuDirective;
    exports.SidebarMenuExpandIconDirective = SidebarMenuExpandIconDirective;
    exports.SidebarMenuTitleIconDirective = SidebarMenuTitleIconDirective;
    exports.SidenavLayoutComponent = SidenavLayoutComponent;
    exports.SidenavLayoutContentDirective = SidenavLayoutContentDirective;
    exports.SidenavLayoutHeaderDirective = SidenavLayoutHeaderDirective;
    exports.SidenavLayoutModule = SidenavLayoutModule;
    exports.SidenavLayoutNavigationDirective = SidenavLayoutNavigationDirective;
    exports.SitesService = SitesService;
    exports.SortingPickerComponent = SortingPickerComponent;
    exports.SortingPickerModule = SortingPickerModule;
    exports.StartFormCustomButtonDirective = StartFormCustomButtonDirective;
    exports.StorageService = StorageService;
    exports.TRANSLATION_PROVIDER = TRANSLATION_PROVIDER;
    exports.TabModel = TabModel;
    exports.TabsWidgetComponent = TabsWidgetComponent;
    exports.TemplateModule = TemplateModule;
    exports.TextEditorComponent = TextEditorComponent;
    exports.TextWidgetComponent = TextWidgetComponent;
    exports.ThumbnailService = ThumbnailService;
    exports.TimeAgoPipe = TimeAgoPipe;
    exports.ToolbarComponent = ToolbarComponent;
    exports.ToolbarDividerComponent = ToolbarDividerComponent;
    exports.ToolbarModule = ToolbarModule;
    exports.ToolbarTitleComponent = ToolbarTitleComponent;
    exports.TooltipCardDirective = TooltipCardDirective;
    exports.TranslateLoaderService = TranslateLoaderService;
    exports.TranslationMock = TranslationMock;
    exports.TranslationService = TranslationService;
    exports.TxtViewerComponent = TxtViewerComponent;
    exports.TypeaheadWidgetComponent = TypeaheadWidgetComponent;
    exports.UnknownFormatComponent = UnknownFormatComponent;
    exports.UnknownWidgetComponent = UnknownWidgetComponent;
    exports.UploadDirective = UploadDirective;
    exports.UploadFolderWidgetComponent = UploadFolderWidgetComponent;
    exports.UploadService = UploadService;
    exports.UploadWidgetComponent = UploadWidgetComponent;
    exports.UploadWidgetContentLinkModel = UploadWidgetContentLinkModel;
    exports.UserInfoComponent = UserInfoComponent;
    exports.UserInfoModule = UserInfoModule;
    exports.UserPreferencesService = UserPreferencesService;
    exports.UserProcessModel = UserProcessModel;
    exports.ValidateDynamicTableRowEvent = ValidateDynamicTableRowEvent;
    exports.ValidateFormEvent = ValidateFormEvent;
    exports.ValidateFormFieldEvent = ValidateFormFieldEvent;
    exports.VersionCompatibilityDirective = VersionCompatibilityDirective;
    exports.VersionCompatibilityService = VersionCompatibilityService;
    exports.VersionModel = VersionModel;
    exports.VersionModuleModel = VersionModuleModel;
    exports.VersionStatusModel = VersionStatusModel;
    exports.ViewUtilService = ViewUtilService;
    exports.ViewerComponent = ViewerComponent;
    exports.ViewerExtensionDirective = ViewerExtensionDirective;
    exports.ViewerModule = ViewerModule;
    exports.ViewerMoreActionsComponent = ViewerMoreActionsComponent;
    exports.ViewerOpenWithComponent = ViewerOpenWithComponent;
    exports.ViewerSidebarComponent = ViewerSidebarComponent;
    exports.ViewerToolbarActionsComponent = ViewerToolbarActionsComponent;
    exports.ViewerToolbarComponent = ViewerToolbarComponent;
    exports.WIDGET_DIRECTIVES = WIDGET_DIRECTIVES;
    exports.WidgetComponent = WidgetComponent;
    exports.WidgetVisibilityService = WidgetVisibilityService;
    exports.applicationDetailsMockApi = applicationDetailsMockApi;
    exports.clientRoles = clientRoles;
    exports.complexVisibilityJsonNotVisible = complexVisibilityJsonNotVisible;
    exports.complexVisibilityJsonVisible = complexVisibilityJsonVisible;
    exports.createGroupMappingApi = createGroupMappingApi;
    exports.createNewPersonMock = createNewPersonMock;
    exports.deleteGroupMappingApi = deleteGroupMappingApi;
    exports.error = error;
    exports.fakeApps = fakeApps;
    exports.fakeBpmEditedUser = fakeBpmEditedUser;
    exports.fakeBpmUser = fakeBpmUser;
    exports.fakeBpmUserNoImage = fakeBpmUserNoImage;
    exports.fakeEcmCompany = fakeEcmCompany;
    exports.fakeEcmEditedUser = fakeEcmEditedUser;
    exports.fakeEcmUser = fakeEcmUser;
    exports.fakeEcmUser2 = fakeEcmUser2;
    exports.fakeEcmUserList = fakeEcmUserList;
    exports.fakeEcmUserNoImage = fakeEcmUserNoImage;
    exports.fakeForm = fakeForm;
    exports.fakeFormChainedVisibilityJson = fakeFormChainedVisibilityJson;
    exports.fakeFormCheckBoxVisibilityJson = fakeFormCheckBoxVisibilityJson;
    exports.fakeFormJson = fakeFormJson;
    exports.fakeProcessComment = fakeProcessComment;
    exports.fakeRendition = fakeRendition;
    exports.fakeRenditionCreated = fakeRenditionCreated;
    exports.fakeRenditionsList = fakeRenditionsList;
    exports.fakeRenditionsListWithACreated = fakeRenditionsListWithACreated;
    exports.fakeSearch = fakeSearch;
    exports.fakeTaskProcessVariableModels = fakeTaskProcessVariableModels;
    exports.fakeTasksComment = fakeTasksComment;
    exports.fakeUser1 = fakeUser1;
    exports.fakeUser2 = fakeUser2;
    exports.formDefVisibilitiFieldDependsOnNextOne = formDefVisibilitiFieldDependsOnNextOne;
    exports.formDefVisibilitiFieldDependsOnPreviousOne = formDefVisibilitiFieldDependsOnPreviousOne;
    exports.formDefinitionDropdownField = formDefinitionDropdownField;
    exports.formDefinitionRequiredField = formDefinitionRequiredField;
    exports.formDefinitionTwoTextFields = formDefinitionTwoTextFields;
    exports.formModelTabs = formModelTabs;
    exports.formReadonlyTwoTextFields = formReadonlyTwoTextFields;
    exports.formTest = formTest;
    exports.formValues = formValues;
    exports.getFakeUserWithContentAdminCapability = getFakeUserWithContentAdminCapability;
    exports.getFakeUserWithContentUserCapability = getFakeUserWithContentUserCapability;
    exports.groupsMockApi = groupsMockApi;
    exports.info = info;
    exports.mockApplicationDetails = mockApplicationDetails;
    exports.mockError = mockError;
    exports.mockIdentityGroup1 = mockIdentityGroup1;
    exports.mockIdentityGroup2 = mockIdentityGroup2;
    exports.mockIdentityGroup3 = mockIdentityGroup3;
    exports.mockIdentityGroup4 = mockIdentityGroup4;
    exports.mockIdentityGroup5 = mockIdentityGroup5;
    exports.mockIdentityGroups = mockIdentityGroups;
    exports.mockIdentityGroupsCount = mockIdentityGroupsCount;
    exports.mockIdentityRoles = mockIdentityRoles;
    exports.mockToken = mockToken;
    exports.noRoleMappingApi = noRoleMappingApi;
    exports.roleMappingApi = roleMappingApi;
    exports.roleMappingMock = roleMappingMock;
    exports.rootInitiator = rootInitiator;
    exports.searchAnimation = searchAnimation;
    exports.searchMockApi = searchMockApi;
    exports.setupTestBed = setupTestBed;
    exports.startFormAmountWidgetMock = startFormAmountWidgetMock;
    exports.startFormDateWidgetMock = startFormDateWidgetMock;
    exports.startFormDropdownDefinitionMock = startFormDropdownDefinitionMock;
    exports.startFormNumberWidgetMock = startFormNumberWidgetMock;
    exports.startFormRadioButtonWidgetMock = startFormRadioButtonWidgetMock;
    exports.startFormTextDefinitionMock = startFormTextDefinitionMock;
    exports.startMockForm = startMockForm;
    exports.startMockFormWithTab = startMockFormWithTab;
    exports.tabInvalidFormVisibility = tabInvalidFormVisibility;
    exports.tabVisibilityJsonMock = tabVisibilityJsonMock;
    exports.transformKeyToObject = transformKeyToObject;
    exports.updateGroupMappingApi = updateGroupMappingApi;
    exports.warning = warning;
    exports.ɵ0 = ɵ0$1;
    exports.ɵ1 = ɵ1$1;
    exports.ɵ2 = ɵ2;
    exports.ɵ3 = ɵ3;
    exports.ɵ4 = ɵ4;
    exports.ɵ5 = ɵ5;
    exports.ɵ6 = ɵ6;
    exports.ɵa = BaseCardView;
    exports.ɵb = CardViewItemDispatcherComponent;
    exports.ɵc = ContextMenuListComponent;
    exports.ɵd = contextMenuAnimation;
    exports.ɵe = ContextMenuOverlayRef;
    exports.ɵf = CONTEXT_MENU_DATA;
    exports.ɵg = TooltipCardComponent;
    exports.ɵh = RenderingQueueServices;
    exports.ɵj = DynamicRowValidationSummary;
    exports.ɵk = sidenavAnimation;
    exports.ɵl = contentAnimation;
    exports.ɵm = getType;
    exports.ɵn = NotificationIconPipe;
    exports.ɵo = startupServiceFactory;
    exports.ɵp = directionalityConfigFactory;
    exports.ɵq = DirectionalityConfigService;
    exports.ɵr = versionCompatibilityFactory;

    Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=adf-core.umd.js.map
