!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/material/button"),require("@angular/material/card"),require("@angular/material/checkbox"),require("@angular/material/chips"),require("@angular/material/core"),require("@angular/material/datepicker"),require("@angular/material/dialog"),require("@angular/material/expansion"),require("@angular/material/icon"),require("@angular/material/input"),require("@angular/material/list"),require("@angular/material/menu"),require("@angular/material/progress-bar"),require("@angular/material/progress-spinner"),require("@angular/material/radio"),require("@angular/material/select"),require("@angular/material/slide-toggle"),require("@angular/material/slider"),require("@angular/material/tree"),require("@angular/material/badge"),require("@ngx-translate/core"),require("@alfresco/adf-core"),require("rxjs"),require("@alfresco/js-api"),require("rxjs/operators"),require("moment-es6"),require("@angular/forms"),require("@angular/flex-layout"),require("@angular/cdk/a11y"),require("@mat-datetimepicker/core"),require("@mat-datetimepicker/moment"),require("@angular/platform-browser"),require("@angular/animations"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/cdk/tree"),require("@angular/material/table"),require("@angular/material/tooltip")):"function"==typeof define&&define.amd?define("@alfresco/adf-content-services",["exports","@angular/common","@angular/core","@angular/material/button","@angular/material/card","@angular/material/checkbox","@angular/material/chips","@angular/material/core","@angular/material/datepicker","@angular/material/dialog","@angular/material/expansion","@angular/material/icon","@angular/material/input","@angular/material/list","@angular/material/menu","@angular/material/progress-bar","@angular/material/progress-spinner","@angular/material/radio","@angular/material/select","@angular/material/slide-toggle","@angular/material/slider","@angular/material/tree","@angular/material/badge","@ngx-translate/core","@alfresco/adf-core","rxjs","@alfresco/js-api","rxjs/operators","moment-es6","@angular/forms","@angular/flex-layout","@angular/cdk/a11y","@mat-datetimepicker/core","@mat-datetimepicker/moment","@angular/platform-browser","@angular/animations","@angular/cdk/overlay","@angular/cdk/portal","@angular/cdk/tree","@angular/material/table","@angular/material/tooltip"],t):t(((e=e||self).alfresco=e.alfresco||{},e.alfresco["adf-content-services"]={}),e.ng.common,e.ng.core,e.ng.material.button,e.ng.material.card,e.ng.material.checkbox,e.ng.material.chips,e["@angular/material/core"],e.ng.material.datepicker,e.ng.material.dialog,e.ng.material.expansion,e.ng.material.icon,e.ng.material.input,e.ng.material.list,e.ng.material.menu,e.ng.material.progressBar,e.ng.material.progressSpinner,e.ng.material.radio,e.ng.material.select,e.ng.material.slideToggle,e.ng.material.slider,e.ng.material.tree,e.ng.material.badge,e["@ngx-translate/core"],e["@alfresco/adf-core"],e.rxjs,e["@alfresco/js-api"],e.rxjs.operators,e["moment-es6"],e.ng.forms,e["@angular/flex-layout"],e.ng.cdk.a11y,e["@mat-datetimepicker/core"],e["@mat-datetimepicker/moment"],e.ng.platformBrowser,e["@angular/animations"],e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.cdk.tree,e.ng.material.table,e.ng.material.tooltip)}(this,(function(e,t,n,i,o,r,a,s,l,c,d,p,u,h,f,m,g,y,v,b,S,I,A,E,C,T,w,O,x,D,N,L,R,F,P,M,k,_,V,U,B){"use strict";x=x&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x;
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var j=function(){};j.decorators=[{type:n.NgModule,args:[{imports:[i.MatButtonModule,a.MatChipsModule,c.MatDialogModule,p.MatIconModule,o.MatCardModule,u.MatInputModule,h.MatListModule,g.MatProgressSpinnerModule,m.MatProgressBarModule,s.MatRippleModule,f.MatMenuModule,s.MatOptionModule,d.MatExpansionModule,v.MatSelectModule,r.MatCheckboxModule,l.MatDatepickerModule,b.MatSlideToggleModule,y.MatRadioModule,S.MatSliderModule,I.MatTreeModule,A.MatBadgeModule],exports:[i.MatButtonModule,a.MatChipsModule,c.MatDialogModule,p.MatIconModule,o.MatCardModule,u.MatInputModule,h.MatListModule,g.MatProgressSpinnerModule,m.MatProgressBarModule,s.MatRippleModule,f.MatMenuModule,s.MatOptionModule,d.MatExpansionModule,v.MatSelectModule,r.MatCheckboxModule,l.MatDatepickerModule,b.MatSlideToggleModule,y.MatRadioModule,S.MatSliderModule,I.MatTreeModule,A.MatBadgeModule]}]}];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var $=function(e,t){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}$(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function H(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function q(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}Object.create;function Y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function z(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Q(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(z(arguments[t]));return e}Object.create;
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var W=function(e,t){this.currentNode=e,this.children=t},X=function(){function e(e,t){this.apiService=e,this.logService=t,this.CREATE_PERMISSION="create"}return Object.defineProperty(e.prototype,"peopleApi",{get:function(){var e;return this._peopleApi=null!==(e=this._peopleApi)&&void 0!==e?e:new w.PeopleApi(this.apiService.getInstance()),this._peopleApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sitesApi",{get:function(){var e;return this._sitesApi=null!==(e=this._sitesApi)&&void 0!==e?e:new w.SitesApi(this.apiService.getInstance()),this._sitesApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trashcanApi",{get:function(){var e;return this._trashcanApi=null!==(e=this._trashcanApi)&&void 0!==e?e:new w.TrashcanApi(this.apiService.getInstance()),this._trashcanApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchApi",{get:function(){var e;return this._searchApi=null!==(e=this._searchApi)&&void 0!==e?e:new w.SearchApi(this.apiService.getInstance()),this._searchApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharedLinksApi",{get:function(){var e;return this._sharedLinksApi=null!==(e=this._sharedLinksApi)&&void 0!==e?e:new w.SharedlinksApi(this.apiService.getInstance()),this._sharedLinksApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"favoritesApi",{get:function(){var e;return this._favoritesApi=null!==(e=this._favoritesApi)&&void 0!==e?e:new w.FavoritesApi(this.apiService.getInstance()),this._favoritesApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodesApi",{get:function(){var e;return this._nodesApi=null!==(e=this._nodesApi)&&void 0!==e?e:new w.NodesApi(this.apiService.getInstance()),this._nodesApi},enumerable:!1,configurable:!0}),e.prototype.getRecentFiles=function(e,t,n){var i=this,o=['TYPE:"content"','-PNAME:"0/wiki"','-TYPE:"app:filelink"','-TYPE:"cm:thumbnail"','-TYPE:"cm:failedThumbnail"','-TYPE:"cm:rating"','-TYPE:"dl:dataList"','-TYPE:"dl:todoList"','-TYPE:"dl:issue"','-TYPE:"dl:contact"','-TYPE:"dl:eventAgenda"','-TYPE:"dl:event"','-TYPE:"dl:task"','-TYPE:"dl:simpletask"','-TYPE:"dl:meetingAgenda"','-TYPE:"dl:location"','-TYPE:"fm:topic"','-TYPE:"fm:post"','-TYPE:"ia:calendarEvent"','-TYPE:"lnk:link"'];return new T.Observable((function(r){i.peopleApi.getPerson(e).then((function(e){var a=e.entry.id,s=[{query:"cm:modified:[NOW/DAY-30DAYS TO NOW/DAY+1DAY]"},{query:"cm:modifier:"+a+" OR cm:creator:"+a},{query:o.join(" AND ")}];n&&n.length>0&&s.push({query:n.join()});var l=new w.SearchRequest({query:{query:"*",language:"afts"},filterQueries:s,include:["path","properties","allowableOperations"],sort:[{type:"FIELD",field:"cm:modified",ascending:!1}],paging:{maxItems:t.maxItems,skipCount:t.skipCount}});return i.searchApi.search(l).then((function(e){r.next(e),r.complete()}),(function(e){r.error(e),r.complete()}))}),(function(e){r.error(e),r.complete()}))})).pipe(O.catchError((function(e){return i.handleError(e)})))},e.prototype.loadFavorites=function(e,t,n){var i=this;void 0===t&&(t=[]);var o=this.getIncludesFields(t),r="(EXISTS(target/file) OR EXISTS(target/folder))",a={maxItems:e.maxItems,skipCount:e.skipCount,where:n?n+" AND "+r:r,include:o};return new T.Observable((function(e){i.favoritesApi.listFavorites("-me-",a).then((function(t){var n={list:{entries:t.list.entries.map((function(e){var t=e.entry,n=t.target.file||t.target.folder;return n.properties=Object.assign(Object.assign({},n.properties||{"cm:title":t.title||n.title,"cm:description":t.description||n.description}),t.properties||{}),{entry:n}})),pagination:t.list.pagination}};e.next(n),e.complete()}),(function(t){e.error(t),e.complete()}))})).pipe(O.catchError((function(e){return i.handleError(e)})))},e.prototype.loadMemberSites=function(e,t){var n=this,i={include:["properties"],maxItems:e.maxItems,skipCount:e.skipCount,where:t};return new T.Observable((function(e){n.sitesApi.listSiteMembershipsForPerson("-me-",i).then((function(t){var i=new w.SiteMemberPaging({list:{entries:t.list.entries.map((function(e){var t=e.entry.site;return t.allowableOperations=t.allowableOperations?t.allowableOperations:[n.CREATE_PERMISSION],t.name=t.name||t.title,{entry:t}})),pagination:t.list.pagination}});e.next(i),e.complete()}),(function(t){e.error(t),e.complete()}))})).pipe(O.catchError((function(e){return n.handleError(e)})))},e.prototype.loadSites=function(e,t){var n=this,i={include:["properties","aspectNames"],maxItems:e.maxItems,skipCount:e.skipCount,where:t};return new T.Observable((function(e){n.sitesApi.listSites(i).then((function(t){t.list.entries.map((function(e){var t=e.entry;return t.name=t.name||t.title,{entry:t}})),e.next(t),e.complete()}),(function(t){e.error(t),e.complete()}))})).pipe(O.catchError((function(e){return n.handleError(e)})))},e.prototype.loadTrashcan=function(e,t){var n=this;void 0===t&&(t=[]);var i={include:this.getIncludesFields(t),maxItems:e.maxItems,skipCount:e.skipCount};return T.from(this.trashcanApi.listDeletedNodes(i)).pipe(O.catchError((function(e){return n.handleError(e)})))},e.prototype.loadSharedLinks=function(e,t,n){var i=this;void 0===t&&(t=[]);var o={include:this.getIncludesFields(t),maxItems:e.maxItems,skipCount:e.skipCount,where:n};return T.from(this.sharedLinksApi.listSharedLinks(o)).pipe(O.catchError((function(e){return i.handleError(e)})))},e.prototype.isCustomSource=function(e){var t=!1;return["-trashcan-","-sharedlinks-","-sites-","-mysites-","-favorites-","-recent-"].indexOf(e)>-1&&(t=!0),t},e.prototype.isSupportedSource=function(e){var t=!1;return["-my-","-root-","-shared-"].indexOf(e)>-1&&(t=!0),t},e.prototype.loadFolderByNodeId=function(e,t,n,i){return void 0===n&&(n=[]),"-trashcan-"===e?this.loadTrashcan(t,n):"-sharedlinks-"===e?this.loadSharedLinks(t,n,i):"-sites-"===e?this.loadSites(t,i):"-mysites-"===e?this.loadMemberSites(t,i):"-favorites-"===e?this.loadFavorites(t,n,i):"-recent-"===e?this.getRecentFiles("-me-",t):void 0},e.prototype.getCorrespondingNodeIds=function(e,t){var n=this;return void 0===t&&(t={}),this.isCustomSource(e)?this.loadFolderByNodeId(e,t).pipe(O.map((function(t){return t.list.entries.map((function(t){return n.getIdFromEntry(t,e)}))}))):e?T.from(this.nodesApi.getNode(e).then((function(e){return[e.entry.id]}))):T.of([])},e.prototype.getIdFromEntry=function(e,t){return"-sharedlinks-"===t?e.entry.nodeId:"-sites-"===t||"-mysites-"===t?e.entry.guid:"-favorites-"===t?e.entry.targetGuid:e.entry.id},e.prototype.hasCorrespondingNodeIds=function(e){return this.isCustomSource(e)||this.isSupportedSource(e)},e.prototype.getIncludesFields=function(e){return Q(["path","properties","allowableOperations","permissions","aspectNames"],e).filter((function(e,t,n){return t===n.indexOf(e)}))},e.prototype.handleError=function(e){return this.logService.error(e),T.throwError(e||"Server error")},e}();X.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new X(n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.LogService))},token:X,providedIn:"root"}),X.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],X.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.LogService}]};var K,Z=function(){function e(e,t,n,i){this.contentService=e,this.apiService=t,this.logService=n,this.customResourcesService=i}return Object.defineProperty(e.prototype,"nodes",{get:function(){var e;return this._nodesApi=null!==(e=this._nodesApi)&&void 0!==e?e:new w.NodesApi(this.apiService.getInstance()),this._nodesApi},enumerable:!1,configurable:!0}),e.prototype.deleteNode=function(e){return T.from(this.nodes.deleteNode(e))},e.prototype.copyNode=function(e,t){var n=this;return T.from(this.nodes.copyNode(e,{targetParentId:t})).pipe(O.catchError((function(e){return n.handleError(e)})))},e.prototype.moveNode=function(e,t){var n=this;return T.from(this.nodes.moveNode(e,{targetParentId:t})).pipe(O.catchError((function(e){return n.handleError(e)})))},e.prototype.getFolder=function(t,n,i){var o=this;void 0===i&&(i=[]);var r=e.ROOT_ID;n&&n.rootFolderId&&(r=n.rootFolderId);var a={includeSource:!0,include:Q(["path","properties","allowableOperations","permissions","aspectNames"],i).filter((function(e,t,n){return t===n.indexOf(e)}))};return t&&(a.relativePath=t),n&&(n.maxItems&&(a.maxItems=n.maxItems),n.skipCount&&(a.skipCount=n.skipCount),n.where&&(a.where=n.where),n.orderBy&&(a.orderBy=n.orderBy)),T.from(this.nodes.listNodeChildren(r,a)).pipe(O.catchError((function(e){return o.handleError(e)})))},e.prototype.getNode=function(e,t){void 0===t&&(t=[]);var n={includeSource:!0,include:Q(["path","properties","allowableOperations","permissions","definition"],t).filter((function(e,t,n){return t===n.indexOf(e)}))};return this.contentService.getNode(e,n)},e.prototype.getFolderNode=function(e,t){var n=this;void 0===t&&(t=[]);var i={includeSource:!0,include:Q(["path","properties","allowableOperations","permissions","aspectNames"],t).filter((function(e,t,n){return t===n.indexOf(e)}))};return T.from(this.nodes.getNode(e,i)).pipe(O.catchError((function(e){return n.handleError(e)})))},e.prototype.isCustomSourceService=function(e){return this.customResourcesService.isCustomSource(e)},e.prototype.loadFolderByNodeId=function(e,t,n,i,o){return this.customResourcesService.isCustomSource(e)?this.customResourcesService.loadFolderByNodeId(e,t,n,i).pipe(O.map((function(e){return new W(null,e)}))):this.retrieveDocumentNode(e,t,n,i,o)},e.prototype.retrieveDocumentNode=function(e,t,n,i,o){return T.forkJoin([this.getFolderNode(e,n),this.getFolder(null,{maxItems:t.maxItems,skipCount:t.skipCount,orderBy:o,rootFolderId:e,where:i},n)]).pipe(O.map((function(e){return new W(e[0],e[1])})))},e.prototype.handleError=function(e){return this.logService.error(e),T.throwError(e||"Server error")},e}();Z.ROOT_ID="-root-",Z.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Z(n.ɵɵinject(C.ContentService),n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.LogService),n.ɵɵinject(X))},token:Z,providedIn:"root"}),Z.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Z.ctorParameters=function(){return[{type:C.ContentService},{type:C.AlfrescoApiService},{type:C.LogService},{type:X}]},(
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
K=e.NodeAction||(e.NodeAction={})).ATTACH="ATTACH",K.CHOOSE="CHOOSE",K.COPY="COPY",K.MOVE="MOVE",K.NEXT="NEXT";
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var J=function(){function t(t,n,i,o,r,a){var s;this.translation=t,this.contentService=n,this.notificationService=i,this.uploadService=o,this.dialog=r,this.data=a,this.showingSearch=!1,this.hasAllowableOperations=!1,this.isLoading=!0,this.selectedTabIndex=0,this.uploadStarted=!1,this.emptyFolderImageUrl="./assets/images/empty_doc_lib.svg",this.action=null!==(s=a.actionName)&&void 0!==s?s:e.NodeAction.CHOOSE,this.buttonActionName="NODE_SELECTOR."+this.action,this.title=a.title,this.currentDirectoryId=a.currentFolderId}return t.prototype.ngOnInit=function(){var e=this;this.dialog.keydownEvents().subscribe((function(t){27===t.keyCode&&(t.preventDefault(),t.stopImmediatePropagation(),e.close())})),this.dialog.backdropClick().subscribe((function(){e.close()})),this.uploadService.fileUploadStarting.subscribe((function(){e.uploadStarted=!0}))},t.prototype.close=function(){this.dialog.close()},t.prototype.onSelect=function(e){this.chosenNode=e},t.prototype.onSiteChange=function(e){this.updateTitle(e)},t.prototype.onNavigationChange=function(e){this.currentDirectoryId=e.value.id,this.isLoading=!0},t.prototype.onClick=function(){this.data.select.next(this.chosenNode),this.close()},t.prototype.updateTitle=function(t){this.action===e.NodeAction.CHOOSE&&t&&(this.title=this.getTitleTranslation(this.action,t))},t.prototype.getTitleTranslation=function(e,t){return this.translation.instant("NODE_SELECTOR."+e+"_ITEM",{name:this.translation.instant(t)})},t.prototype.getSelectedCount=function(){var e;return(null===(e=this.chosenNode)||void 0===e?void 0:e.length)||0},t.prototype.isCounterVisible=function(){return this.action===e.NodeAction.ATTACH||this.action===e.NodeAction.CHOOSE},t.prototype.isMultipleSelection=function(){return"multiple"===this.data.selectionMode},t.prototype.onError=function(e){this.notificationService.showError(e)},t.prototype.isChooseButtonDisabled=function(){return this.uploadService.isUploading()||!this.hasNodeSelected()},t.prototype.hasNodeSelected=function(){var e;return(null===(e=this.chosenNode)||void 0===e?void 0:e.length)>0},t.prototype.onShowingSearch=function(e){this.showingSearch=e},t.prototype.onCurrentFolder=function(e){this.hasAllowableOperations=this.contentService.hasAllowableOperations(e,C.AllowableOperationsEnum.CREATE),this.breadcrumbFolderNode=e},t.prototype.isNotAllowedToUpload=function(){return this.showingSearch||!this.hasAllowableOperations},t.prototype.onFolderLoaded=function(){this.isLoading=!1},t.prototype.onTabSelectionChange=function(e){this.selectedTabIndex=e},t.prototype.isFileServerTabSelected=function(){return 0===this.selectedTabIndex},t.prototype.isLocalUploadTabSelected=function(){return 1===this.selectedTabIndex},t.prototype.isUploadEnabled=function(){return this.canPerformLocalUpload()&&this.isLocalUploadTabSelected()},t.prototype.canPerformLocalUpload=function(){var e;return null===(e=this.data)||void 0===e?void 0:e.showLocalUploadButton},t.prototype.getWarningMessage=function(){return this.showingSearch?"NODE_SELECTOR.UPLOAD_BUTTON_SEARCH_WARNING_MESSAGE":this.hasNoPermissionToUpload()?"NODE_SELECTOR.UPLOAD_BUTTON_PERMISSION_WARNING_MESSAGE":""},t.prototype.hasNoPermissionToUpload=function(){return!this.hasAllowableOperations&&!this.showingSearch&&!this.isLoading},t.prototype.hasUploadError=function(){return this.showingSearch||this.hasNoPermissionToUpload()},t}();J.decorators=[{type:n.Component,args:[{selector:"adf-content-node-selector",template:'<header\n    mat-dialog-title\n    data-automation-id="content-node-selector-title">\n    <h2>{{title}}</h2>\n</header>\n\n<mat-tab-group class="adf-content-node-selector-dialog-content"\n               mat-align-tabs="start"\n               (selectedIndexChange)="onTabSelectionChange($event)"\n               [class.adf-content-node-selector-headless-tabs]="!canPerformLocalUpload()">\n    <mat-tab label="{{ \'NODE_SELECTOR.REPOSITORY\' | translate }}">\n            <adf-content-node-selector-panel\n                [currentFolderId]="data?.currentFolderId"\n                [restrictRootToCurrentFolderId]="data?.restrictRootToCurrentFolderId"\n                [dropdownHideMyFiles]="data?.dropdownHideMyFiles"\n                [dropdownSiteList]="data?.dropdownSiteList"\n                [rowFilter]="data?.rowFilter"\n                [imageResolver]="data?.imageResolver"\n                [isSelectionValid]="data?.isSelectionValid"\n                [breadcrumbTransform]="data?.breadcrumbTransform"\n                [excludeSiteContent]="data?.excludeSiteContent"\n                [selectionMode]="data?.selectionMode"\n                [where]="data?.where"\n                [showSearch]="data?.showSearch"\n                [showDropdownSiteList]="data?.showDropdownSiteList"\n                [showFilesInResult]="data?.showFilesInResult"\n                [showNodeCounter]="isCounterVisible()"\n                (currentFolder)="onCurrentFolder($event)"\n                (folderLoaded)="onFolderLoaded()"\n                (select)="onSelect($event)"\n                (showingSearch)="onShowingSearch($event)"\n                (siteChange)="onSiteChange($event)"\n                (navigationChange)="onNavigationChange($event)">\n            </adf-content-node-selector-panel>\n    </mat-tab>\n    <mat-tab *ngIf="canPerformLocalUpload()"\n             [disabled]="isNotAllowedToUpload()">\n        <div class="adf-content-node-selector-local-upload-container">\n            <div class="adf-content-node-selector-local-upload-header">\n                <adf-toolbar>\n                    <adf-toolbar-title>\n                        <adf-dropdown-breadcrumb\n                            class="adf-content-node-selector-content-breadcrumb"\n                            [folderNode]="breadcrumbFolderNode"\n                            [rootId]="data?.currentFolderId"\n                            [readOnly]="true"\n                            data-automation-id="content-node-selector-upload-breadcrumb"\n                        ></adf-dropdown-breadcrumb>\n                        <ng-container *ngIf="isCounterVisible()" [adf-node-counter]="getSelectedCount()"></ng-container>\n                    </adf-toolbar-title>\n                </adf-toolbar>\n                <ng-template mat-tab-label>\n                    {{ \'NODE_SELECTOR.UPLOAD_FROM_DEVICE\' | translate }}\n                    <mat-icon *ngIf="hasUploadError()"\n                              data-automation-id="adf-content-node-selector-disabled-tab-info-icon"\n                              matTooltip="{{ getWarningMessage() | translate }}">info\n                    </mat-icon>\n                </ng-template>\n            </div>\n            <div class="adf-content-node-selector-local-upload-content">\n                <adf-upload-drag-area [rootFolderId]="currentDirectoryId">\n                    <div [class.adf-upload-dialog-container]="uploadStarted">\n                        <adf-file-uploading-dialog [alwaysVisible]="true"></adf-file-uploading-dialog>\n                    </div>\n                    <adf-empty-list data-automation-id="adf-empty-list" *ngIf="!uploadStarted">\n                        <div class="adf-empty-list_template adf-empty-folder">\n                            <div fxHide.lt-md="true"\n                                 class="adf-empty-folder-drag-drop">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate }}</div>\n                            <div fxHide.lt-md="true"\n                                 class="adf-empty-folder-any-files-here-to-add">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.SUBTITLE\' | translate }}</div>\n                            <img [alt]="\'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate" class="adf-empty-folder-image"\n                                 [src]="emptyFolderImageUrl">\n                        </div>\n                    </adf-empty-list>\n                </adf-upload-drag-area>\n            </div>\n        </div>\n    </mat-tab>\n</mat-tab-group>\n\n<mat-dialog-actions>\n    <div>\n        <ng-container *ngIf="isUploadEnabled()">\n            <adf-upload-button\n                [staticTitle]="\'FORM.FIELD.UPLOAD\' | translate "\n                [multipleFiles]="isMultipleSelection()"\n                [rootFolderId]="currentDirectoryId"\n                [disabled]="isNotAllowedToUpload()"\n                (error)="onError($event)">\n            </adf-upload-button>\n        </ng-container>\n    </div>\n    <div>\n        <button\n            mat-button\n            (click)="close()"\n            data-automation-id="content-node-selector-actions-cancel">{{ \'NODE_SELECTOR.CANCEL\' | translate }}\n        </button>\n\n        <button mat-button\n                [disabled]="isChooseButtonDisabled()"\n                class="adf-choose-action"\n                (click)="onClick()"\n                data-automation-id="content-node-selector-actions-choose">{{ buttonActionName | translate }}\n        </button>\n    </div>\n</mat-dialog-actions>\n',encapsulation:n.ViewEncapsulation.None,styles:["adf-content-node-selector .adf-content-node-selector-headless-tabs .mat-tab-header{display:none}adf-content-node-selector .adf-upload-dialog{bottom:unset;box-shadow:none;height:100%;position:unset;width:100%}adf-content-node-selector .adf-upload-dialog__content{max-height:64%}adf-content-node-selector .adf-upload-dialog-container{height:380px}adf-content-node-selector .adf-toolbar-title{place-items:center}adf-content-node-selector .adf-content-node-selector-local-upload-content{height:368px}adf-content-node-selector .adf-content-node-selector-local-upload-content adf-upload-drag-area adf-empty-list .adf-empty-folder-drag-drop{font-size:40px;min-height:46px}adf-content-node-selector .adf-content-node-selector-local-upload-content adf-upload-drag-area adf-empty-list .adf-empty-folder-image{height:100px;width:460px}.adf-content-node-selector-dialog-content{padding-left:24px;padding-right:24px}.adf-content-node-selector-dialog .mat-dialog-title{color:var(--theme-text-bold-color);font-size:20px;font-stretch:normal;font-style:normal;font-weight:600;letter-spacing:-.5px;line-height:1.6;margin-left:24px;margin-right:24px}.adf-content-node-selector-dialog .mat-dialog-title h2{font-size:unset;margin:unset}.adf-content-node-selector-dialog .mat-dialog-container{padding-left:0;padding-right:0}.adf-content-node-selector-dialog .mat-dialog-content{margin:0;overflow:hidden}.adf-content-node-selector-dialog .mat-dialog-actions{background-color:var(--theme-background-color);color:var(--theme-foreground-text-color);display:flex;flex-direction:row;height:61px;justify-content:space-between;padding:8px}.adf-content-node-selector-dialog .mat-dialog-actions button{font-weight:400;text-transform:uppercase}.adf-content-node-selector-dialog .mat-dialog-actions .adf-choose-action[disabled]{color:var(--theme-secondary-text-color)}.adf-content-node-selector-dialog .mat-dialog-actions .adf-choose-action:enabled{color:var(--theme-primary-color)}"]}]}],J.ctorParameters=function(){return[{type:C.TranslationService},{type:C.ContentService},{type:C.NotificationService},{type:C.UploadService},{type:c.MatDialogRef},{type:void 0,decorators:[{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ee=function(){function e(e,t,n,i){this.formBuilder=e,this.dialog=t,this.alfrescoApi=n,this.data=i,this.node=null}return Object.defineProperty(e.prototype,"nodesApi",{get:function(){var e;return this._nodesApi=null!==(e=this._nodesApi)&&void 0!==e?e:new w.NodesApi(this.alfrescoApi.getInstance()),this._nodesApi},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.data.node;this.nodeName=e.name,this.form=this.formBuilder.group({isLocked:e.isLocked||!1,allowOwner:"WRITE_LOCK"===e.properties["cm:lockType"],isTimeLock:!!e.properties["cm:expiryDate"],time:e.properties["cm:expiryDate"]?x(e.properties["cm:expiryDate"]):x()})},Object.defineProperty(e.prototype,"lockTimeInSeconds",{get:function(){return this.form.value.isTimeLock?x.duration(x(this.form.value.time).diff(x())).asSeconds():0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeBodyLock",{get:function(){return new w.NodeBodyLock({timeToExpire:this.lockTimeInSeconds,type:this.form.value.allowOwner?"ALLOW_OWNER_CHANGES":"FULL",lifetime:"PERSISTENT"})},enumerable:!1,configurable:!0}),e.prototype.toggleLock=function(){var e=this.data.node;return this.form.value.isLocked?this.nodesApi.lockNode(e.id,this.nodeBodyLock):this.nodesApi.unlockNode(e.id)},e.prototype.submit=function(){var e=this;this.toggleLock().then((function(t){e.data.node.isLocked=e.form.value.isLocked,e.dialog.close(t.entry)})).catch((function(t){return e.data.onError(t)}))},e}();ee.decorators=[{type:n.Component,args:[{selector:"adf-node-lock",template:'<h2 mat-dialog-title>\n    {{ \'CORE.FILE_DIALOG.FILE_LOCK\' | translate }}\n</h2>\n\n<mat-dialog-content>\n    <br />\n    <form [formGroup]="form" (submit)="submit()">\n        <mat-checkbox  data-automation-id="adf-lock-node-checkbox" class="adf-lock-file-name" matTooltip="{{ nodeName }}" [formControlName]="\'isLocked\'" ngDefaultControl>\n            {{ \'CORE.FILE_DIALOG.FILE_LOCK_CHECKBOX\' | translate }} <strong>"{{ nodeName }}"</strong>\n        </mat-checkbox>\n\n        <br />\n\n        <div *ngIf="form.value.isLocked">\n            <mat-checkbox class="adf-lock-file-name" [formControlName]="\'allowOwner\'" ngDefaultControl>\n                {{ \'CORE.FILE_DIALOG.ALLOW_OTHERS_CHECKBOX\' | translate }}\n            </mat-checkbox>\n\n            <br />\n\n            <mat-checkbox class="adf-lock-file-name" [formControlName]="\'isTimeLock\'" ngDefaultControl>\n                {{ \'CORE.FILE_DIALOG.TIME_LOCK_CHECKBOX\' | translate }}\n            </mat-checkbox>\n\n            <br />\n\n            <mat-form-field *ngIf="form.value.isTimeLock">\n                <mat-datetimepicker-toggle [for]="datetimePicker" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker #datetimePicker type="datetime" [openOnFocus]="true" [timeInterval]="1"></mat-datetimepicker>\n                <input matInput [formControlName]="\'time\'" [matDatetimepicker]="datetimePicker" required autocomplete="false">\n            </mat-form-field>\n        </div>\n    </form>\n    <br />\n</mat-dialog-content>\n\n<mat-dialog-actions class="adf-dialog-buttons">\n    <span class="adf-fill-remaining-space"></span>\n\n    <button mat-button mat-dialog-close data-automation-id="lock-dialog-btn-cancel">\n        {{ \'CORE.FILE_DIALOG.CANCEL_BUTTON.LABEL\' | translate }}\n    </button>\n\n    <button class="adf-dialog-action-button" mat-button (click)="submit()">\n        {{ \'CORE.FILE_DIALOG.SAVE_BUTTON.LABEL\' | translate }}\n    </button>\n</mat-dialog-actions>\n',encapsulation:n.ViewEncapsulation.None}]}],ee.ctorParameters=function(){return[{type:D.FormBuilder},{type:c.MatDialogRef},{type:C.AlfrescoApiService},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]}]};var te=function(){function t(e,t,i,o,r,a){this.dialog=e,this.contentService=t,this.documentListService=i,this.siteService=o,this.translation=r,this.thumbnailService=a,this.error=new n.EventEmitter}return t.prototype.openFileBrowseDialogByFolderId=function(t){var n=this;return this.documentListService.getFolderNode(t).pipe(O.switchMap((function(t){return n.openUploadFileDialog(e.NodeAction.CHOOSE,t.entry,!0)})))},t.prototype.openLockNodeDialog=function(e){var t=this,n=new T.Subject;return this.contentService.hasAllowableOperations(e,C.AllowableOperationsEnum.LOCK)?this.dialog.open(ee,{data:{node:e,onError:function(e){t.error.emit(e),n.error(e)}},width:"400px"}):n.error("OPERATION.FAIL.NODE.NO_PERMISSION"),n},t.prototype.openFileBrowseDialogBySite=function(){var e=this;return this.siteService.getSites().pipe(O.switchMap((function(t){return e.openFileBrowseDialogByFolderId(t.list.entries[0].entry.guid)})))},t.prototype.openFileBrowseDialogByDefaultLocation=function(){return this.openFileBrowseDialogByFolderId("-my-")},t.prototype.openFolderBrowseDialogBySite=function(){return this.openFolderBrowseDialogByFolderId("-my-")},t.prototype.openFolderBrowseDialogByFolderId=function(t){var n=this;return this.documentListService.getFolderNode(t).pipe(O.switchMap((function(t){return n.openUploadFolderDialog(e.NodeAction.CHOOSE,t.entry)})))},t.prototype.openCopyMoveDialog=function(e,n,i,o){if(this.contentService.hasAllowableOperations(n,i)){var r=new T.Subject,a={title:this.getTitleTranslation(e,n.name),actionName:e,selectionMode:"single",currentFolderId:n.parentId,imageResolver:this.imageResolver.bind(this),where:"(isFolder=true)",isSelectionValid:this.isCopyMoveSelectionValid.bind(this),excludeSiteContent:o||t.nonDocumentSiteContent,select:r};return this.openContentNodeDialog(a,"adf-content-node-selector-dialog","630px").afterClosed().subscribe({next:function(){return r.complete()}}),r}var s=new Error(JSON.stringify({error:{statusCode:403}}));return T.throwError(s)},t.prototype.getTitleTranslation=function(e,t){return this.translation.instant("NODE_SELECTOR."+e.toUpperCase()+"_ITEM",{name:t})},t.prototype.openUploadFolderDialog=function(e,t){var n=new T.Subject,i={title:this.getTitleTranslation(e,this.translation.instant("DROPDOWN.MY_FILES_OPTION")),actionName:e,selectionMode:"single",currentFolderId:t.id,imageResolver:this.imageResolver.bind(this),isSelectionValid:this.hasAllowableOperationsOnNodeFolder.bind(this),where:"(isFolder=true)",select:n};return this.openContentNodeDialog(i,"adf-content-node-selector-dialog","630px").afterClosed().subscribe({next:function(){return n.complete()}}),n},t.prototype.openUploadFileDialog=function(e,t,n){void 0===n&&(n=!1);var i=new T.Subject,o={title:this.getTitleTranslation(e,this.translation.instant("DROPDOWN.MY_FILES_OPTION")),actionName:e,selectionMode:"single",currentFolderId:t.id,imageResolver:this.imageResolver.bind(this),isSelectionValid:function(e){return e.isFile},select:i,showFilesInResult:n};return this.openContentNodeDialog(o,"adf-content-node-selector-dialog","630px").afterClosed().subscribe({next:function(){return i.complete()}}),i},t.prototype.openContentNodeDialog=function(e,t,n){return this.dialog.open(J,{data:e,panelClass:t,width:n,disableClose:!0})},t.prototype.imageResolver=function(e){var t=e.node.entry;return!this.contentService.hasAllowableOperations(t,"create")&&this.isNodeFolder(t)?this.thumbnailService.getMimeTypeIcon("disable/folder"):null},t.prototype.hasAllowableOperationsOnNodeFolder=function(e){return this.isNodeFolder(e)&&this.contentService.hasAllowableOperations(e,"create")},t.prototype.isNodeFolder=function(e){return e.isFolder},t.prototype.isCopyMoveSelectionValid=function(e){return this.hasEntityCreatePermission(e)&&!this.isSite(e)},t.prototype.hasEntityCreatePermission=function(e){return this.contentService.hasAllowableOperations(e,"create")},t.prototype.isSite=function(e){return!!e.guid||"st:site"===e.nodeType||"st:sites"===e.nodeType},t}();te.nonDocumentSiteContent=["blog","calendar","dataLists","discussions","links","wiki"],te.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new te(n.ɵɵinject(c.MatDialog),n.ɵɵinject(C.ContentService),n.ɵɵinject(Z),n.ɵɵinject(C.SitesService),n.ɵɵinject(C.TranslationService),n.ɵɵinject(C.ThumbnailService))},token:te,providedIn:"root"}),te.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],te.ctorParameters=function(){return[{type:c.MatDialog},{type:C.ContentService},{type:Z},{type:C.SitesService},{type:C.TranslationService},{type:C.ThumbnailService}]},te.propDecorators={error:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ne=function(){function e(e,t,n,i){this.element=e,this.renderer=t,this.contentService=n,this.contentNodeDialogService=i}return e.prototype.onClick=function(e){e.stopPropagation(),this.contentNodeDialogService.openLockNodeDialog(this.node)},e.prototype.ngAfterViewInit=function(){var e=this.contentService.hasAllowableOperations(this.node,C.AllowableOperationsEnum.LOCK);this.renderer.setProperty(this.element.nativeElement,"disabled",!e)},e}();ne.decorators=[{type:n.Directive,args:[{selector:"[adf-node-lock]"}]}],ne.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:C.ContentService},{type:te}]},ne.propDecorators={node:[{type:n.Input,args:["adf-node-lock"]}],onClick:[{type:n.HostListener,args:["click",["$event"]]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ie=function(){function e(e,t){this.resolver=e,this.viewContainerRef=t}return e.prototype.ngOnInit=function(){var e=this.resolver.resolveComponentFactory(oe);this.componentRef=this.viewContainerRef.createComponent(e).instance,this.componentRef.counter=this.counter},e.prototype.ngOnChanges=function(){this.componentRef&&(this.componentRef.counter=this.counter)},e}();ie.decorators=[{type:n.Directive,args:[{selector:"[adf-node-counter]"}]}],ie.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:n.ViewContainerRef}]},ie.propDecorators={counter:[{type:n.Input,args:["adf-node-counter"]}]};var oe=function(){};oe.decorators=[{type:n.Component,args:[{selector:"adf-node-counter",template:"\n        <div>{{ 'NODE_COUNTER.SELECTED_COUNT' | translate: { count: counter } }}</div>\n    "}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var re=function(){};re.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,E.TranslateModule],declarations:[ne,ie,oe],exports:[ne,ie]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ae=function(){function e(e,t){this.apiService=e,this.logService=t}return Object.defineProperty(e.prototype,"ratingsApi",{get:function(){var e;return this._ratingsApi=null!==(e=this._ratingsApi)&&void 0!==e?e:new w.RatingsApi(this.apiService.getInstance()),this._ratingsApi},enumerable:!1,configurable:!0}),e.prototype.getRating=function(e,t){return T.from(this.ratingsApi.getRating(e,t)).pipe(O.catchError(this.handleError))},e.prototype.postRating=function(e,t,n){var i=new w.RatingBody({id:t,myRating:n});return T.from(this.ratingsApi.createRating(e,i)).pipe(O.catchError(this.handleError))},e.prototype.deleteRating=function(e,t){return T.from(this.ratingsApi.deleteRating(e,t)).pipe(O.catchError(this.handleError))},e.prototype.handleError=function(e){return this.logService.error(e),T.throwError(e||"Server error")},e}();ae.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new ae(n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.LogService))},token:ae,providedIn:"root"}),ae.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],ae.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.LogService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var se=function(){function e(e){this.ratingService=e,this.average=0,this.ratingsCounter=0,this.ratingType="fiveStar",this.changeVote=new n.EventEmitter,this.stars=[],this.onDestroy$=new T.Subject}return e.prototype.ngOnChanges=function(){var e=this;this.ratingService.getRating(this.nodeId,this.ratingType).pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.refreshRating(t)}))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.calculateStars=function(){this.stars=[];for(var e=Math.round(this.average),t=0;t<5;t++)t<e?this.stars.push({fill:!0}):this.stars.push({fill:!1})},e.prototype.updateVote=function(e){this.ratingValue===e?this.unRateItem():this.rateItem(e)},e.prototype.rateItem=function(e){var t=this;this.ratingService.postRating(this.nodeId,this.ratingType,e).pipe(O.takeUntil(this.onDestroy$)).subscribe((function(e){t.refreshRating(e)}))},e.prototype.unRateItem=function(){var e=this;this.ratingService.deleteRating(this.nodeId,this.ratingType).subscribe((function(){e.ratingService.getRating(e.nodeId,e.ratingType).pipe(O.takeUntil(e.onDestroy$)).subscribe((function(t){e.refreshRating(t)}))}))},e.prototype.refreshRating=function(e){this.ratingValue=Number.parseFloat(e.entry.myRating),this.average=e.entry.aggregate.average,this.ratingsCounter=e.entry.aggregate.numberOfRatings,this.calculateStars(),this.changeVote.emit(this.average)},e}();se.decorators=[{type:n.Component,args:[{selector:"adf-rating",template:'<mat-list id="adf-rating-container" class="adf-rating-container">\n    <mat-list-item class="adf-rating-star" *ngFor="let currentRate of stars; let idx = index;">\n            <span id="adf-rate-{{idx}}">\n                <mat-icon id="adf-colored-star-{{idx}}" *ngIf="currentRate.fill" class="adf-colored-star"\n                          [ngClass]="{\'adf-average-star\': !ratingValue}"\n                          (click)="updateVote(idx + 1)">star_rate\n                </mat-icon>\n                <mat-icon id="adf-grey-star-{{idx}}" *ngIf="!currentRate.fill" class="adf-grey-star"\n                          (click)="updateVote(idx + 1)">star_border\n                </mat-icon>\n            </span>\n    </mat-list-item>\n    <div class="adf-rating-counter-container">\n    <div id="adf-rating-counter" class="adf-rating-counter">{{ratingsCounter}}</div>\n    <div class="adf-rating-left" *ngIf="ratingsCounter<=1">Rating</div>\n    <div class="adf-rating-left" *ngIf="ratingsCounter>1">Ratings</div>\n    </div>\n</mat-list>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-rating-container{display:flex;overflow:hidden;width:100%}.adf-rating-container .adf-rating-counter-container{align-items:center;display:flex;padding:0 6px}.adf-rating-container .adf-rating-left{padding:0 6px}.adf-rating-container .adf-rating-star{cursor:pointer;display:flex;justify-content:center;transition:all .3s;width:25px}.adf-rating-container .adf-rating-star .mat-list-item-content{padding:0!important}.adf-rating-container .adf-rating-star:hover{transform:rotate(13deg) scale(1.2)}.adf-rating-container .adf-colored-star{color:#ffe944}.adf-rating-container .adf-average-star,.adf-rating-container .adf-grey-star{color:grey!important}[dir=rtl] .adf-rating-container .adf-rating-star{transform:rotate(145deg)}[dir=rtl] .adf-rating-container .adf-rating-star:hover{transform:rotate(158deg) scale(1.2)}"]}]}],se.ctorParameters=function(){return[{type:ae}]},se.propDecorators={nodeId:[{type:n.Input}],changeVote:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var le=function(){function e(e){this.ratingService=e,this.changeVote=new n.EventEmitter,this.likesCounter=0,this.ratingType="likes",this.isLike=!1}return e.prototype.ngOnChanges=function(){var e=this;this.clean(),this.ratingService.getRating(this.nodeId,this.ratingType).subscribe((function(t){t.entry.aggregate&&(e.likesCounter=t.entry.aggregate.numberOfRatings,t.entry.ratedAt&&(e.isLike=!0))}))},e.prototype.likeClick=function(){var e=this;this.isLike?this.ratingService.deleteRating(this.nodeId,this.ratingType).subscribe((function(){e.likesCounter-=1,e.isLike=!1,e.changeVote.emit(e.likesCounter)})):this.ratingService.postRating(this.nodeId,this.ratingType,!0).subscribe((function(t){e.likesCounter=t.entry.aggregate.numberOfRatings,e.isLike=!0,e.changeVote.emit(e.likesCounter)}))},e.prototype.clean=function(){this.isLike=!1,this.likesCounter=0},e}();le.decorators=[{type:n.Component,args:[{selector:"adf-like",template:'<div id="adf-like-container" class="adf-like-container">\n    <div class="adf-like">\n        <span id="adf-like-{{nodeId}}" [ngClass]="{\'adf-like-select\': isLike ,\'adf-like-grey\': !isLike  }"\n              (click)="likeClick()">\n            <mat-icon>thumb_up</mat-icon>\n        </span>\n    </div>\n    <div class="adf-like-counter-container">\n        <div id="adf-like-counter" class="adf-like-counter">{{likesCounter}}</div>\n        <div class="adf-left" *ngIf="likesCounter<=1">Like</div>\n        <div class="adf-left" *ngIf="likesCounter>1">Likes</div>\n    </div>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-like-container{align-items:center;display:flex;margin-top:13px;overflow:hidden;width:100%}.adf-like-container .adf-like-counter-container{display:inherit;padding:0 6px}.adf-like-container .adf-left{padding:0 6px}.adf-like-container .adf-like-select{color:#2196f3;cursor:pointer}.adf-like-container .adf-like-select:hover{color:grey}.adf-like-container .adf-like-grey{color:grey;cursor:pointer}.adf-like-container .adf-like-grey:hover{color:#2196f3}"]}]}],le.ctorParameters=function(){return[{type:ae}]},le.propDecorators={nodeId:[{type:n.Input}],changeVote:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ce=function(){};ce.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j],exports:[se,le],declarations:[se,le]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var de=function(){function e(e,t){this.apiService=e,this.logService=t,this.refresh=new n.EventEmitter}return Object.defineProperty(e.prototype,"tagsApi",{get:function(){var e;return this._tagsApi=null!==(e=this._tagsApi)&&void 0!==e?e:new w.TagsApi(this.apiService.getInstance()),this._tagsApi},enumerable:!1,configurable:!0}),e.prototype.getTagsByNodeId=function(e){var t=this;return T.from(this.tagsApi.listTagsForNode(e)).pipe(O.catchError((function(e){return t.handleError(e)})))},e.prototype.getAllTheTags=function(e){var t=this;return T.from(this.tagsApi.listTags(e)).pipe(O.catchError((function(e){return t.handleError(e)})))},e.prototype.addTag=function(e,t){var n=this,i=new w.TagBody;i.tag=t;var o=T.from(this.tagsApi.createTagForNode(e,[i]));return o.subscribe((function(e){n.refresh.emit(e)}),(function(e){n.handleError(e)})),o},e.prototype.removeTag=function(e,t){var n=this,i=T.from(this.tagsApi.deleteTagFromNode(e,t));return i.subscribe((function(e){n.refresh.emit(e)}),(function(e){n.handleError(e)})),i},e.prototype.handleError=function(e){return this.logService.error(e),T.throwError(e||"Server error")},e}();de.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new de(n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.LogService))},token:de,providedIn:"root"}),de.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],de.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.LogService}]},de.propDecorators={refresh:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var pe=function(){function e(e,t){this.tagService=e,this.translateService=t,this.successAdd=new n.EventEmitter,this.error=new n.EventEmitter,this.result=new n.EventEmitter,this.disableAddTag=!0,this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){var e=this;this.tagService.refresh.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){return e.refreshTag()}))},e.prototype.ngOnChanges=function(){return this.refreshTag()},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.refreshTag=function(){var e=this;this.nodeId&&this.tagService.getTagsByNodeId(this.nodeId).subscribe((function(t){e.tagsEntries=t.list.entries,e.disableAddTag=!1,e.result.emit(e.tagsEntries)}),(function(){e.tagsEntries=null,e.disableAddTag=!0,e.result.emit(e.tagsEntries)}))},e.prototype.addTag=function(){var e=this;this.searchTag(this.newTagName)?(this.errorMsg=this.translateService.instant("TAG.MESSAGES.EXIST"),this.error.emit(this.errorMsg)):this.tagService.addTag(this.nodeId,this.newTagName).subscribe((function(){e.newTagName="",e.successAdd.emit(e.nodeId)}))},e.prototype.searchTag=function(e){if(this.tagsEntries)return this.tagsEntries.find((function(t){return e===t.entry.tag}))},e.prototype.cleanErrorMsg=function(){this.errorMsg=""},e.prototype.removeTag=function(e){this.tagService.removeTag(this.nodeId,e)},e}();pe.decorators=[{type:n.Component,args:[{selector:"adf-tag-node-actions-list",template:'<mat-list>\n    <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <div class="adf-tag-actions-container" id="tag_delete_{{currentEntry.entry.tag}}" (click)="removeTag(currentEntry.entry.id)">\n            <div class="adf-tag-actions-delete-text" id="tag_name_{{currentEntry.entry.tag}}">{{currentEntry.entry.tag}}</div>\n            <mat-icon class="adf-tag-actions-delete-icon">delete</mat-icon>\n        </div>\n    </mat-list-item>\n</mat-list>\n<table class="adf-full-width" cellspacing="0">\n    <tr>\n        <td>\n            <mat-form-field class="adf-full-width">\n                <input\n                    id="new-tag-text"\n                    matInput placeholder="{{\'TAG.LABEL.NEWTAG\' | translate }}"\n                    type="text"\n                    (keypress)="cleanErrorMsg()"\n                    [(ngModel)]="newTagName"\n                />\n                <mat-hint data-automation-id="errorMessage" *ngIf="error" [ngStyle]="{\'color\': \'red\'}" align="start">{{errorMsg}}</mat-hint>\n            </mat-form-field>\n        </td>\n        <td>\n            <button\n                id="add-tag"\n                class="adf-full-width"\n                color="primary"\n                (click)="addTag()"\n                [disabled]="disableAddTag"\n                mat-raised-button\n            >{{\'TAG.BUTTON.ADD\' | translate }}</button>\n        </td>\n    </tr>\n</table>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-tag-node-actions-list"},styles:[".adf-tag-node-actions-list .adf-full-width{width:100%}.adf-tag-node-actions-list .adf-tag-actions-delete-icon{cursor:pointer;float:right}.adf-tag-node-actions-list .adf-tag-actions-delete-text{float:left;font-size:16px}.adf-tag-node-actions-list .adf-tag-actions-container{height:20px;padding:8px 0}"]}]}],pe.ctorParameters=function(){return[{type:de},{type:C.TranslationService}]},pe.propDecorators={nodeId:[{type:n.Input}],successAdd:[{type:n.Output}],error:[{type:n.Output}],result:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ue=function(){function e(e){var t=this;this.tagService=e,this.result=new n.EventEmitter,this.tagsEntries=[],this.size=10,this.isLoading=!1,this.isSizeMinimum=!0,this.onDestroy$=new T.Subject,this.defaultPagination={skipCount:0,maxItems:this.size,hasMoreItems:!1},this.pagination=this.defaultPagination,this.tagService.refresh.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){t.tagsEntries=[],t.refreshTag(t.defaultPagination)}))}return e.prototype.ngOnInit=function(){this.refreshTag(this.defaultPagination)},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.refreshTag=function(e){var t=this;this.tagService.getAllTheTags(e).subscribe((function(e){t.tagsEntries=t.tagsEntries.concat(e.list.entries),t.pagination=e.list.pagination,t.result.emit(t.tagsEntries),t.isLoading=!1}))},e.prototype.loadMoreTags=function(){this.pagination.hasMoreItems&&(this.isLoading=!0,this.isSizeMinimum=!1,this.refreshTag({skipCount:this.pagination.skipCount+this.pagination.count,maxItems:this.size}))},e.prototype.loadLessTags=function(){this.isSizeMinimum=!1,this.tagsEntries=this.tagsEntries.slice(0,this.tagsEntries.length-this.pagination.count),this.pagination.skipCount=this.pagination.skipCount-this.pagination.count,this.pagination.hasMoreItems=!0,this.tagsEntries.length<=this.size&&(this.isSizeMinimum=!0)},e}();ue.decorators=[{type:n.Component,args:[{selector:"adf-tag-list",template:'<mat-chip-list class="adf-tag-chips-list">\n    <div class="adf-list-tag" *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <mat-chip>\n            <span id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</span>\n        </mat-chip>\n    </div>\n</mat-chip-list>\n\n<div class="adf-tag-list-controls">\n    <button\n        *ngIf="!isSizeMinimum"\n        [disabled]="isLoading"\n        data-automation-id="show-fewer-tags"\n        mat-icon-button\n        (click)="loadLessTags()">\n        <mat-icon>keyboard_arrow_up</mat-icon>\n    </button>\n    <button\n        *ngIf="pagination.hasMoreItems"\n        [disabled]="isLoading"\n        data-automation-id="show-more-tags"\n        mat-icon-button\n        (click)="loadMoreTags()">\n        <mat-icon>keyboard_arrow_down</mat-icon>\n    </button>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-tag-list"},styles:[".adf-tag-list .adf-tag-chips-list,.adf-tag-list .adf-tag-chips-list div{display:flex;flex-direction:column}.adf-tag-list .adf-tag-chips-list .adf-list-tag{display:block;font-size:16px}.adf-tag-list .adf-tag-chips-list .adf-list-tag .mat-chip{background-color:var(--theme-primary-color);color:var(--theme-primary-color-default-contrast)}.adf-tag-list .adf-tag-chips-list .adf-list-tag .mat-chip .mat-icon{color:var(--theme-primary-color-default-contrast)}.adf-tag-list .adf-tag-list-controls{display:flex;justify-content:center;margin-top:30px}"]}]}],ue.ctorParameters=function(){return[{type:de}]},ue.propDecorators={result:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var he=function(){function e(e){this.tagService=e,this.showDelete=!0,this.results=new n.EventEmitter,this.onDestroy$=new T.Subject}return e.prototype.ngOnChanges=function(){this.refreshTag()},e.prototype.ngOnInit=function(){var e=this;this.tagService.refresh.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){return e.refreshTag()}))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.refreshTag=function(){var e=this;this.nodeId&&this.tagService.getTagsByNodeId(this.nodeId).subscribe((function(t){e.tagsEntries=t.list.entries,e.results.emit(e.tagsEntries)}))},e.prototype.removeTag=function(e){var t=this;this.tagService.removeTag(this.nodeId,e).subscribe((function(){t.refreshTag()}))},e}();he.decorators=[{type:n.Component,args:[{selector:"adf-tag-node-list",template:'<mat-chip-list>\n    <mat-chip class="adf-tag-chips"\n              *ngFor="let currentEntry of tagsEntries; let idx = index" (removed)="removeTag(currentEntry.entry.id)">\n        <span id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</span>\n        <mat-icon *ngIf="showDelete" id="tag_chips_delete_{{currentEntry.entry.tag}}"\n                  class="adf-tag-chips-delete-icon" matChipRemove>cancel\n        </mat-icon>\n    </mat-chip>\n</mat-chip-list>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-tag-node-list"},styles:[".adf-tag-node-list .adf-tag-chips{background-color:var(--theme-primary-color);color:var(--theme-primary-color-default-contrast)}.adf-tag-node-list .adf-tag-chips-delete{background:none;border:0;cursor:pointer;float:right;height:17px;margin:-1px 0 0 10px;overflow:visible;padding:0;width:20px}.adf-tag-node-list .adf-tag-chips-delete-icon{background-repeat:no-repeat;color:var(--theme-primary-color-default-contrast)!important;display:inline-block;fill:currentColor;font-size:20px;height:20px;width:20px}"]}]}],he.ctorParameters=function(){return[{type:de}]},he.propDecorators={nodeId:[{type:n.Input}],showDelete:[{type:n.Input}],results:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var fe=function(){};fe.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,D.FormsModule,D.ReactiveFormsModule,C.CoreModule],exports:[pe,ue,he],declarations:[pe,ue,he]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var me=function(){function e(e,t){this.apiService=e,this.logService=t,this.showData=!0,this.contextRoot="alfresco",this.servicePath="service",this.contentType="TEXT",this.success=new n.EventEmitter,this.data=void 0,this.showError=!1}return Object.defineProperty(e.prototype,"webscriptApi",{get:function(){var e;return this._webscriptApi=null!==(e=this._webscriptApi)&&void 0!==e?e:new w.WebscriptApi(this.apiService.getInstance()),this._webscriptApi},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){var e=this;return this.showData&&this.clean(),new Promise((function(t,n){e.webscriptApi.executeWebScript("GET",e.scriptPath,e.scriptArgs,e.contextRoot,e.servicePath).then((function(n){e.data=n,e.showData&&"DATATABLE"===e.contentType&&(e.data=e.showDataAsDataTable(n)),e.success.emit(e.data),t()}),(function(t){e.logService.log("Error"+t),n()}))}))},e.prototype.showDataAsDataTable=function(e){try{e.schema||(e.schema=C.ObjectDataTableAdapter.generateSchema(e.data)),e.schema&&e.schema.length>0&&(this.data=new C.ObjectDataTableAdapter(e.data,e.schema))}catch(e){this.logService.error("error during the cast as datatable")}return null},e.prototype.clean=function(){this.data=void 0},e.prototype.isDataTableContent=function(){return"DATATABLE"===this.contentType},e}();me.decorators=[{type:n.Component,args:[{selector:"adf-webscript-get",template:'<div *ngIf="showData">\n    <div *ngIf="contentType === \'JSON\'" id="webscript-data-JSON">{{data | json}}</div>\n    <div *ngIf="contentType === \'HTML\'" id="webscript-data-HTML" [innerHTML]="data"></div>\n    <div *ngIf="contentType === \'TEXT\'" id="webscript-data-TEXT">{{data}}</div>\n    <div *ngIf="isDataTableContent()">\n        <adf-datatable id="webscript-datatable-wrapper" [data]="data"></adf-datatable>\n        <div>\n            <div *ngIf="showError" id="error">{{\'WEBSCRIPT.ERROR\' | translate: {\n                data: data,\n                contentType: contentType\n                }\n                }}\n            </div>\n        </div>\n    </div>\n</div>\n'}]}],me.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.LogService}]},me.propDecorators={scriptPath:[{type:n.Input}],scriptArgs:[{type:n.Input}],showData:[{type:n.Input}],contextRoot:[{type:n.Input}],servicePath:[{type:n.Input}],contentType:[{type:n.Input}],success:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ge=function(){};ge.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,C.CoreModule],exports:[me],declarations:[me]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ye=function(){function e(t,n,i,o,r){if(this.obj=t,this.contentService=n,this.permissionsStyle=i,this.thumbnailService=o,this.allowDropFiles=r,this.cache={},this.isSelected=!1,this.cssClass="",!t)throw new Error(e.ERR_OBJECT_NOT_FOUND);this.isDropTarget=void 0!==r?this.allowDropFiles&&this.checkNodeTypeAndPermissions(t):this.checkNodeTypeAndPermissions(t),i&&(this.cssClass=this.getPermissionClass(t)),this.id=this.getId()}return Object.defineProperty(e.prototype,"node",{get:function(){return this.obj},set:function(e){this.obj=e,this.cache={}},enumerable:!1,configurable:!0}),e.prototype.checkNodeTypeAndPermissions=function(e){return this.isFolderAndHasPermissionToUpload(e)||this.isFileAndHasParentFolderPermissionToUpload(e)},e.prototype.getPermissionClass=function(e){var t=this,n="";return this.permissionsStyle.forEach((function(i){(t.applyPermissionStyleToFolder(e.entry,i)||t.applyPermissionStyleToFile(e.entry,i))&&t.contentService.hasAllowableOperations(e.entry,i.permission)&&(n+=" "+i.css)})),n},e.prototype.applyPermissionStyleToFile=function(e,t){return t.isFile&&e.isFile},e.prototype.applyPermissionStyleToFolder=function(e,t){return t.isFolder&&e.isFolder},e.prototype.isFolderAndHasPermissionToUpload=function(e){return this.isFolder(e)&&this.contentService.hasAllowableOperations(e.entry,"create")},e.prototype.isFileAndHasParentFolderPermissionToUpload=function(e){return this.isFile(e)&&this.contentService.hasAllowableOperations(e.entry,"update")},e.prototype.isFile=function(e){return e.entry&&e.entry.isFile},e.prototype.isFolder=function(e){return e.entry&&e.entry.isFolder},e.prototype.cacheValue=function(e,t){return this.cache[e]=t,t},e.prototype.getValue=function(e){return void 0!==this.cache[e]?this.cache[e]:C.ObjectUtils.getValue(this.obj.entry,e)},e.prototype.imageErrorResolver=function(){if(this.obj.entry.content)return this.thumbnailService.getMimeTypeIcon(this.obj.entry.content.mimeType)},e.prototype.hasValue=function(e){return void 0!==this.getValue(e)},e.prototype.getId=function(){return this.obj.entry.id||void 0},e}();ye.ERR_OBJECT_NOT_FOUND="Object source not found";
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ve,be=function(){function e(e,t,n,i,o,r){void 0===n&&(n=[]),void 0===o&&(o="client"),void 0===r&&(r=!1),this.thumbnailService=e,this.contentService=t,this.ERR_ROW_NOT_FOUND="Row not found",this.ERR_COL_NOT_FOUND="Column not found",this.thumbnails=!1,this.rows=[],this.columns=n||[],this.sorting=i,this.sortingMode=o,this.allowDropFiles=r}return Object.defineProperty(e.prototype,"sortingMode",{get:function(){return this._sortingMode},set:function(e){var t=(e||"client").toLowerCase();"client"!==t&&"server"!==t&&(t="client"),this._sortingMode=t},enumerable:!1,configurable:!0}),e.prototype.getRows=function(){return this.rows},e.prototype.setRows=function(e){this.rows=e||[],this.sort()},e.prototype.getColumns=function(){return this.columns},e.prototype.setColumns=function(e){this.columns=e||[]},e.prototype.getValue=function(e,t){if(!e)throw new Error(this.ERR_ROW_NOT_FOUND);if(!t)throw new Error(this.ERR_COL_NOT_FOUND);var n=e,i=e.getValue(t.key);if(void 0!==n.cache[t.key])return n.cache[t.key];if("$thumbnail"===t.key){var o;if(this.imageResolver)if(o=this.imageResolver(e,t))return o;var r=e.node;if(r.entry.isFolder)return this.getFolderIcon(r);if(r.entry.isFile&&this.thumbnails)return this.thumbnailService.getDocumentThumbnailUrl(r);if(r.entry.content){var a=r.entry.content.mimeType;if(a)return this.thumbnailService.getMimeTypeIcon(a)}return this.thumbnailService.getDefaultMimeTypeIcon()}if("image"===t.type&&(this.imageResolver&&(o=this.imageResolver(e,t))))return o;return n.cacheValue(t.key,i)},e.prototype.getSorting=function(){return this.sorting},e.prototype.setSorting=function(e){this.sorting=e,this.sortRows(this.rows,this.sorting)},e.prototype.sort=function(e,t){var n=this.sorting||new C.DataSorting;e&&(n.key=e,n.direction=t||"asc"),this.setSorting(n)},e.prototype.setFilter=function(e){this.filter=e},e.prototype.setImageResolver=function(e){this.imageResolver=e},e.prototype.getFolderIcon=function(e){return this.isSmartFolder(e)?this.thumbnailService.getMimeTypeIcon("smartFolder"):this.isRuleFolder(e)?this.thumbnailService.getMimeTypeIcon("ruleFolder"):this.isALinkFolder(e)?this.thumbnailService.getMimeTypeIcon("linkFolder"):this.thumbnailService.getMimeTypeIcon("folder")},e.prototype.isSmartFolder=function(e){var t=this.getNodeAspectNames(e);return t.indexOf("smf:customConfigSmartFolder")>-1||t.indexOf("smf:systemConfigSmartFolder")>-1},e.prototype.isRuleFolder=function(e){var t=this.getNodeAspectNames(e);return t.indexOf("rule:rules")>-1||t.indexOf("rule:rules")>-1},e.prototype.isALinkFolder=function(e){return"app:folderlink"===(e.entry?e.entry.nodeType:e.nodeType)},e.prototype.getNodeAspectNames=function(e){var t;return(null===(t=e.entry)||void 0===t?void 0:t.aspectNames)?e.entry.aspectNames:e.aspectNames?e.aspectNames:[]},e.prototype.sortRows=function(e,t){if("server"!==this.sortingMode){var n={};(null==t?void 0:t.key)&&(null==e?void 0:e.length)&&((t.key.includes("sizeInBytes")||"name"===t.key)&&(n.numeric=!0),e.sort((function(e,i){if(e.node.entry.isFolder!==i.node.entry.isFolder)return e.node.entry.isFolder?-1:1;var o=e.getValue(t.key);o=o?o instanceof Date?o.valueOf().toString():o.toString():"";var r=i.getValue(t.key);return r=r?r instanceof Date?r.valueOf().toString():r.toString():"","asc"===t.direction?o.localeCompare(r,void 0,n):r.localeCompare(o,void 0,n)})))}},e.prototype.loadPage=function(e,t,n){var i,o=this;void 0===t&&(t=!1);var r=[];if(void 0!==n&&(this.allowDropFiles=n),null==e?void 0:e.list){var a=e.list.entries;if((null==a?void 0:a.length)&&(r=a.map((function(e){return new ye(e,o.contentService,o.permissionsStyle,o.thumbnailService,o.allowDropFiles)})),this.filter&&(r=r.filter(this.filter)),"server"!==this.sortingMode&&(null===(i=this.columns)||void 0===i?void 0:i.length))){var s=this.getSorting();if(s)this.sortRows(r,s);else{var l=this.columns.filter((function(e){return e.sortable}));l.length>0?this.sort(l[0].key,"asc"):this.sort(this.columns[0].key,"asc")}}}if(t){var c=r.filter((function(e){return!o.rows.find((function(t){return t.obj.entry.id===e.obj.entry.id}))}));this.rows=this.rows.concat(c)}else this.rows=r},e.prototype.getSelectedRows=function(){return this.rows.filter((function(e){return e.isSelected}))},e.prototype.getRowByNodeId=function(e){return this.rows.find((function(t){return t.node.entry.id===e}))},e}(),Se={"-trashcan-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"archivedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_ON",format:"timeAgo",sortable:!0},{key:"archivedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_BY",sortable:!0}],"-sites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-mysites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-favorites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}],"-recent-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0}],"-sharedlinks-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0},{key:"sharedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.SHARED_BY",sortable:!0}],default:[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}]},Ie=function(e){this.disableWithNoPermission=!1,this.disabled=!1,this.visible=!0,e&&(this.icon=e.icon,this.title=e.title,this.handler=e.handler,this.execute=e.execute,this.target=e.target,this.permission=e.permission,this.disableWithNoPermission=e.disableWithNoPermission,e.hasOwnProperty("disabled")&&(this.disabled=e.disabled),e.hasOwnProperty("visible")&&(this.visible=e.visible))};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(ve=e.ContentActionTarget||(e.ContentActionTarget={})).Document="document",ve.Folder="folder",ve.All="all";var Ae=function(e){function t(t){var n=e.call(this,t)||this;return n.target="document",n}return G(t,e),t}(Ie),Ee=function(e){function t(t){var n=e.call(this,t)||this;return n.target="folder",n}return G(t,e),t}(Ie),Ce=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return G(t,e),t}(C.BaseEvent),Te=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return G(t,e),t}(C.BaseEvent),we=function(){function e(t,i,o,r,a,s,l,c,d){var p=this;this.documentListService=t,this.ngZone=i,this.elementRef=o,this.appConfig=r,this.userPreferencesService=a,this.contentService=s,this.thumbnailService=l,this.alfrescoApiService=c,this.lockService=d,this.DEFAULT_PAGINATION=new w.Pagination({hasMoreItems:!1,skipCount:0,maxItems:25,totalItems:0}),this.DEFAULT_SORTING=[new C.DataSorting("name","asc"),new C.DataSorting("isFolder","desc")],this.display=C.DisplayMode.List,this.permissionsStyle=[],this.locationFormat="/",this.navigate=!0,this.showHeader=C.ShowHeaderMode.Data,this.navigationMode=e.DOUBLE_CLICK_NAVIGATION,this.thumbnails=!1,this.selectionMode="single",this.multiselect=!1,this.contentActions=!1,this.contentActionsPosition="right",this.contextMenuActions=!1,this.emptyFolderImageUrl="./assets/images/empty_doc_lib.svg",this.allowDropFiles=!1,this.sorting=["name","asc"],this.additionalSorting=new C.DataSorting("isFolder","desc"),this.sortingMode="server",this.loading=!1,this._rowFilter=null,this.imageResolver=null,this.stickyHeader=!1,this.headerFilters=!1,this.currentFolderId=null,this.preselectNodes=[],this.node=null,this.maxItems=this.DEFAULT_PAGINATION.maxItems,this.nodeClick=new n.EventEmitter,this.nodeDblClick=new n.EventEmitter,this.folderChange=new n.EventEmitter,this.preview=new n.EventEmitter,this.ready=new n.EventEmitter,this.error=new n.EventEmitter,this.nodeSelected=new n.EventEmitter,this.filterSelection=new n.EventEmitter,this.actions=[],this.contextActionHandler=new T.Subject,this.noPermission=!1,this.selection=new Array,this.$folderNode=new T.Subject,this.allowFiltering=!0,this.orderBy=null,this.preselectedRows=[],this._pagination=this.DEFAULT_PAGINATION,this.pagination=new T.BehaviorSubject(this.DEFAULT_PAGINATION),this.sortingSubject=new T.BehaviorSubject(this.DEFAULT_SORTING),this.layoutPresets={},this.rowMenuCache={},this.onDestroy$=new T.Subject,this.userPreferencesService.select(C.UserPreferenceValues.PaginationSize).pipe(O.takeUntil(this.onDestroy$)).subscribe((function(e){p.maxItems=p._pagination.maxItems=e}))}return Object.defineProperty(e.prototype,"rowFilter",{get:function(){return this._rowFilter},set:function(e){this._rowFilter=e,this.data&&(this.data.setFilter(this._rowFilter),this.currentFolderId&&this.reload())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodesApi",{get:function(){var e;return this._nodesApi=null!==(e=this._nodesApi)&&void 0!==e?e:new w.NodesApi(this.alfrescoApiService.getInstance()),this._nodesApi},enumerable:!1,configurable:!0}),e.prototype.getContextActions=function(e){var t=this;if(e&&e.entry){var n=this.getNodeActions(e);if(n&&n.length>0)return n.map((function(n){return{model:n,node:e,subject:t.contextActionHandler}}))}return null},Object.defineProperty(e.prototype,"hasCustomLayout",{get:function(){return this.columnList&&this.columnList.columns&&this.columnList.columns.length>0},enumerable:!1,configurable:!0}),e.prototype.getDefaultSorting=function(){var e;if(Array.isArray(this.sorting)){var t=z(this.sorting,2),n=t[0],i=t[1];e=new C.DataSorting(n,i)}else e=new C.DataSorting(this.sorting.key,this.sorting.direction);return e},e.prototype.getLayoutPreset=function(e){return void 0===e&&(e="default"),(this.layoutPresets[e]||this.layoutPresets.default).map((function(e){return new C.ObjectDataColumn(e)}))},e.prototype.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e.prototype.isEmpty=function(){return!this.data||0===this.data.getRows().length},e.prototype.ngOnInit=function(){var e=this;this.rowMenuCache={},this.loadLayoutPresets(),this.data=new be(this.thumbnailService,this.contentService,null,this.getDefaultSorting(),this.sortingMode,this.allowDropFiles),this.data.thumbnails=this.thumbnails,this.data.permissionsStyle=this.permissionsStyle,this._rowFilter&&this.data.setFilter(this._rowFilter),this.imageResolver&&this.data.setImageResolver(this.imageResolver),this.contextActionHandler.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){return e.contextActionCallback(t)})),this.enforceSingleClickNavigationForMobile()},e.prototype.ngAfterContentInit=function(){var e=this;this.columnList&&this.columnList.columns.changes.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){return e.setTableSchema()})),this.setTableSchema()},e.prototype.setTableSchema=function(){var e=[];this.hasCustomLayout&&(e=this.columnList.columns.map((function(e){return e}))),this.data?e&&e.length>0&&this.data.setColumns(e):this.data=new be(this.thumbnailService,this.contentService,e,this.getDefaultSorting(),this.sortingMode);var t=this.data.getColumns();t&&0!==t.length||this.setupDefaultColumns(this.currentFolderId)},e.prototype.ngOnChanges=function(e){var t,n;if(e.preselectNodes||this.resetSelection(),Array.isArray(this.sorting)){var i=z(this.sorting,2),o=i[0],r=i[1];this.orderBy=this.buildOrderByArray(o,r)}else this.orderBy=this.buildOrderByArray(this.sorting.key,this.sorting.direction);if(this.data&&(this.data.thumbnails=this.thumbnails),e.sortingMode&&!e.sortingMode.firstChange&&this.data&&(this.data.sortingMode=e.sortingMode.currentValue),e.sorting&&!e.sorting.firstChange&&this.data){var a=e.sorting.currentValue;if(a&&a.length>0){var s=z(a,2);o=s[0],r=s[1];this.data.setSorting(new C.DataSorting(o,r))}}if(this.currentFolderId&&(null===(t=e.currentFolderId)||void 0===t?void 0:t.currentValue)!==(null===(n=e.currentFolderId)||void 0===n?void 0:n.previousValue)&&this.loadFolder(),this.data)if(e.node&&e.node.currentValue){var l=!!this._pagination&&this._pagination.merge;this.data.loadPage(e.node.currentValue,l,null),this.preserveExistingSelection(),this.onPreselectNodes(),this.onDataReady(e.node.currentValue)}else e.imageResolver&&this.data.setImageResolver(e.imageResolver.currentValue)},e.prototype.reload=function(){var e=this;this.ngZone.run((function(){e.resetSelection(),e.reloadWithoutResettingSelection()}))},e.prototype.reloadWithoutResettingSelection=function(){this.node?(this.data&&(this.data.loadPage(this.node,this._pagination.merge,null),this.preserveExistingSelection()),this.onPreselectNodes(),this.syncPagination(),this.onDataReady(this.node)):this.loadFolder()},e.prototype.contextActionCallback=function(e){e&&this.executeContentAction(e.node,e.model)},e.prototype.getNodeActions=function(e){var t=this;if(e&&e.entry){var n=null;if(e.entry.isFile?n="document":e.entry.isFolder&&(n="folder"),n){var i=this.rowMenuCache[e.entry.id];if(i)return i.forEach((function(n){t.refreshAction(n,e)})),i;var o=this.actions.filter((function(t){return("function"==typeof t.visible?t.visible(e):t.visible)&&t.target.toLowerCase()===n})).map((function(e){return new Ie(e)}));return o.forEach((function(n){t.refreshAction(n,e)})),this.rowMenuCache[e.entry.id]=o,o}}return[]},e.prototype.refreshAction=function(e,t){e.disabled=this.isActionDisabled(e,t),e.visible=this.isActionVisible(e,t)},e.prototype.isActionVisible=function(e,t){return"function"==typeof e.visible?e.visible(t):e.visible},e.prototype.isActionDisabled=function(e,t){return"function"==typeof e.disabled?e.disabled(t):!!(e.permission&&e.disableWithNoPermission&&!this.contentService.hasAllowableOperations(t.entry,e.permission)||this.lockService.isLocked(t.entry))||e.disabled},e.prototype.onShowContextMenu=function(e){e&&this.contextMenuActions&&e.preventDefault()},e.prototype.navigateTo=function(e){return"string"==typeof e?(this.resetNewFolderPagination(),this.currentFolderId=e,this.folderChange.emit(new Te({id:e})),this.reload(),!0):!!this.canNavigateFolder(e)&&(this.resetNewFolderPagination(),this.currentFolderId=this.getNodeFolderDestinationId(e),this.folderChange.emit(new Te({id:this.currentFolderId})),this.reload(),!0)},e.prototype.getNodeFolderDestinationId=function(e){return this.isLinkFolder(e)?e.properties["cm:destination"]:e.id},e.prototype.isLinkFolder=function(e){return"app:folderlink"===e.nodeType&&e.properties&&e.properties["cm:destination"]},e.prototype.updateCustomSourceData=function(e){this.currentFolderId=e},e.prototype.executeContentAction=function(e,t){if(e&&e.entry&&t){var n="function"==typeof t.handler?t.handler(e,this,t.permission):T.of(!0);"function"==typeof t.execute&&n&&n.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){return t.execute(e)}))}},e.prototype.setLoadingState=function(e){var t,n=this;(null===(t=this.data)||void 0===t?void 0:t.getRows().length)>0?e?(clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout((function(){n.loading=!0}),1e3)):(clearTimeout(this.loadingTimeout),this.loading=!1):(clearTimeout(this.loadingTimeout),this.loading=e)},e.prototype.loadFolder=function(){var e=this;this._pagination.merge||this.setLoadingState(!0),this.hasCustomLayout||this.setupDefaultColumns(this.currentFolderId),this.documentListService.isCustomSourceService(this.currentFolderId)&&this.updateCustomSourceData(this.currentFolderId),this.documentListService.loadFolderByNodeId(this.currentFolderId,this._pagination,this.includeFields,this.where,this.orderBy).subscribe((function(t){t.currentNode&&(e.folderNode=t.currentNode.entry,e.$folderNode.next(t.currentNode.entry)),e.onPageLoaded(t.children)}),(function(t){e.handleError(t)}))},e.prototype.resetSelection=function(){this.dataTable.resetSelection(),this.selection=[],this.noPermission=!1},e.prototype.onPageLoaded=function(e){e&&(this.data&&(this.data.loadPage(e,this._pagination.merge,this.allowDropFiles),this.preserveExistingSelection()),this.onPreselectNodes(),this.setLoadingState(!1),this.onDataReady(e))},e.prototype.onSortingChanged=function(e){this.orderBy=this.buildOrderByArray(e.detail.sortingKey,e.detail.direction),this.sortingSubject.next([this.additionalSorting,e.detail]),"server"===this.sortingMode&&this.reload()},e.prototype.buildOrderByArray=function(e,t){return[this.additionalSorting.key+" "+this.additionalSorting.direction,e+" "+t]},e.prototype.setupDefaultColumns=function(e){if(void 0===e&&(e="default"),this.data){var t=this.getLayoutPreset(e);this.data.setColumns(t)}},e.prototype.onPreviewFile=function(e){e&&this.preview.emit(new Ce(e))},e.prototype.onNodeClick=function(t){var n=new CustomEvent("node-click",{detail:{sender:this,node:t},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(n);var i=new Ce(t);this.nodeClick.emit(i),i.defaultPrevented||this.navigate&&this.navigationMode===e.SINGLE_CLICK_NAVIGATION&&this.executeActionClick(t)},e.prototype.onNodeDblClick=function(t){var n=new CustomEvent("node-dblclick",{detail:{sender:this,node:t},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(n);var i=new Ce(t);this.nodeDblClick.emit(i),i.defaultPrevented||this.navigate&&this.navigationMode===e.DOUBLE_CLICK_NAVIGATION&&this.executeActionClick(t)},e.prototype.executeActionClick=function(e){var t=this;if(e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.navigateTo(e.entry),e.entry.guid)){var n={include:this.includeFields};this.nodesApi.getNode(e.entry.guid,n).then((function(e){t.navigateTo(e.entry)}))}},e.prototype.onNodeSelect=function(e){this.selection=e.selection.map((function(e){return e.node}));var t=new CustomEvent("node-select",{detail:{node:e.row?e.row.node:null,selection:this.selection},bubbles:!0});this.nodeSelected.emit(this.selection),this.elementRef.nativeElement.dispatchEvent(t)},e.prototype.onNodeUnselect=function(e){this.selection=e.selection.map((function(e){return e.node}));var t=new CustomEvent("node-unselect",{detail:{node:e.row?e.row.node:null,selection:this.selection},bubbles:!0});this.nodeSelected.emit(this.selection),this.elementRef.nativeElement.dispatchEvent(t)},e.prototype.onShowRowContextMenu=function(e){if(this.contextMenuActions){var t=e.value,n=t.row.node;n&&(t.actions=this.getContextActions(n)||[])}},e.prototype.onShowRowActionsMenu=function(e){if(this.contentActions){var t=e.value,n=t.row.node;n&&(t.actions=this.getNodeActions(n)||[])}},e.prototype.onExecuteRowAction=function(e){if(this.contentActions){var t=e.value,n=t.row.node,i=t.action;this.executeContentAction(n,i)}},e.prototype.enforceSingleClickNavigationForMobile=function(){this.isMobile()&&(this.navigationMode=e.SINGLE_CLICK_NAVIGATION)},e.prototype.canNavigateFolder=function(e){var t=!1;return e&&e.isFolder&&(t=!0),t},e.prototype.loadLayoutPresets=function(){var e=this.appConfig.get("document-list.presets",null);this.layoutPresets=e?Object.assign({},Se,e):Se},e.prototype.onDataReady=function(e){this.ready.emit(e),this.pagination.next(e.list.pagination)},e.prototype.updatePagination=function(e){this._pagination.maxItems=e.maxItems,this._pagination.merge=e.merge,this._pagination.skipCount=e.skipCount,this.reload()},e.prototype.syncPagination=function(){this.node.list.pagination.maxItems=this._pagination.maxItems,this.node.list.pagination.skipCount=this._pagination.skipCount},e.prototype.onFilterSelectionChange=function(e){this.filterSelection.emit(e)},e.prototype.resetNewFolderPagination=function(){this._pagination.skipCount=0,this._pagination.maxItems=this.maxItems},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.handleError=function(e){if(e.message)try{403===JSON.parse(e.message).error.statusCode&&(this.noPermission=!0)}catch(e){}this.setLoadingState(!1),this.error.emit(e)},e.prototype.getPreselectedNodesBasedOnSelectionMode=function(){return this.hasPreselectedNodes()?this.isSingleSelectionMode()?[this.preselectNodes[0]]:this.preselectNodes:[]},e.prototype.getPreselectedRowsBasedOnSelectionMode=function(){return this.hasPreselectedRows()?this.isSingleSelectionMode()?[this.preselectedRows[0]]:this.preselectedRows:[]},e.prototype.getSelectionBasedOnSelectionMode=function(){return this.hasPreselectedRows()&&this.isSingleSelectionMode()?[this.preselectedRows[0]]:this.data.getSelectedRows()},e.prototype.onPreselectNodes=function(){var e,t;if(this.hasPreselectedNodes()){this.preselectRowsOfPreselectedNodes();var n=this.getPreselectedRowsBasedOnSelectionMode(),i=this.data.getSelectedRows();try{for(var o=Y(n),r=o.next();!r.done;r=o.next()){var a=r.value;this.dataTable.selectRow(a,!0)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.onNodeSelect({row:void 0,selection:i})}},e.prototype.preserveExistingSelection=function(){var e,t;if(this.isMultipleSelectionMode())try{for(var n=Y(this.selection),i=n.next();!i.done;i=n.next()){var o=i.value,r=this.data.getRowByNodeId(o.entry.id);r&&(r.isSelected=!0)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.preselectRowsOfPreselectedNodes=function(){var e=this;this.preselectedRows=[],this.getPreselectedNodesBasedOnSelectionMode().forEach((function(t){var n=e.data.getRowByNodeId(t.entry.id);n&&(n.isSelected=!0,e.preselectedRows.push(n))}))},e.prototype.unselectRowFromNodeId=function(e){var t=this.data.getRowByNodeId(e);if(null==t?void 0:t.isSelected){t.isSelected=!1,this.dataTable.selectRow(t,!1);var n=this.getSelectionBasedOnSelectionMode();this.onNodeUnselect({row:void 0,selection:n})}},e.prototype.isSingleSelectionMode=function(){return"single"===this.selectionMode},e.prototype.isMultipleSelectionMode=function(){return"multiple"===this.selectionMode},e.prototype.hasPreselectedNodes=function(){var e;return(null===(e=this.preselectNodes)||void 0===e?void 0:e.length)>0},e.prototype.hasPreselectedRows=function(){var e;return(null===(e=this.preselectedRows)||void 0===e?void 0:e.length)>0},e}();we.SINGLE_CLICK_NAVIGATION="click",we.DOUBLE_CLICK_NAVIGATION="dblclick",we.decorators=[{type:n.Component,args:[{selector:"adf-document-list",template:'<adf-datatable\n    #dataTable\n    [selectionMode]="selectionMode"\n    [data]="data"\n    [actions]="contentActions"\n    [actionsPosition]="contentActionsPosition"\n    [multiselect]="multiselect"\n    [contextMenu]="contextMenuActions"\n    [rowStyle]="rowStyle"\n    [rowStyleClass]="rowStyleClass"\n    [loading]="loading"\n    [display]="display"\n    [noPermission]="noPermission"\n    [showHeader]="showHeader"\n    [rowMenuCacheEnabled]="false"\n    [stickyHeader]="stickyHeader"\n    [allowFiltering]="allowFiltering"\n    (showRowContextMenu)="onShowRowContextMenu($event)"\n    (showRowActionsMenu)="onShowRowActionsMenu($event)"\n    (executeRowAction)="onExecuteRowAction($event)"\n    (rowClick)="onNodeClick($event.value?.node)"\n    (rowDblClick)="onNodeDblClick($event.value?.node)"\n    (row-select)="onNodeSelect($any($event).detail)"\n    (row-unselect)="onNodeUnselect($any($event).detail)"\n    (sorting-changed)="onSortingChanged($any($event))"\n    [class.adf-datatable-gallery-thumbnails]="data.thumbnails">\n\n    <div *ngIf="headerFilters">\n        <adf-filter-header\n            [currentFolderId]="currentFolderId"\n            [value]="filterValue"\n            (filterSelection)="onFilterSelectionChange($event)">\n        </adf-filter-header>\n    </div>\n\n    <adf-no-content-template>\n        <ng-template>\n            <adf-empty-list *ngIf="!customNoContentTemplate">\n                <div class="adf-empty-list_template adf-empty-folder">\n                    <div class="adf-empty-folder-this-space-is-empty">{{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}}</div>\n                    <div fxHide.lt-md="true" class="adf-empty-folder-drag-drop">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate }}</div>\n                    <div fxHide.lt-md="true" class="adf-empty-folder-any-files-here-to-add">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.SUBTITLE\' | translate }}</div>\n                    <img [alt]="\'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate" class="adf-empty-folder-image" [src]="emptyFolderImageUrl">\n                </div>\n            </adf-empty-list>\n            <ng-content select="adf-custom-empty-content-template, empty-folder-content"></ng-content>\n        </ng-template>\n    </adf-no-content-template>\n\n    <adf-no-permission-template>\n        <ng-template>\n            <div class="adf-no-permission__template" *ngIf="!customNoPermissionsTemplate">\n                <mat-icon>error</mat-icon>\n                <p class="adf-no-permission__template--text">{{ \'ADF-DOCUMENT-LIST.NO_PERMISSION\' | translate }}</p>\n            </div>\n            <ng-content select="adf-custom-no-permission-template, no-permission-content"></ng-content>\n        </ng-template>\n    </adf-no-permission-template>\n\n    <adf-loading-content-template>\n        <ng-template>\n            <div class="adf-document-list-loading-container" *ngIf="!customLoadingContent">\n                <mat-progress-spinner\n                    id="adf-document-list-loading"\n                    class="adf-document-list-loading-margin"\n                    [color]="\'primary\'"\n                    [mode]="\'indeterminate\'">\n                </mat-progress-spinner>\n            </div>\n            <ng-content select="adf-custom-loading-content-template"></ng-content>\n        </ng-template>\n    </adf-loading-content-template>\n\n</adf-datatable>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-document-list"},styles:[".adf-document-list{background-color:var(--theme-background-color);height:100%;min-height:0}.mat-icon.adf-datatable-selected{height:100%;margin-left:-2px;margin-top:2px;width:100%}.adf-sticky-document-list{height:310px;overflow-y:auto}.adf-datatable-card .adf-datatable-selected>svg{fill:var(--theme-accent-color);height:30px;position:absolute;top:10px;width:30px}.adf-datatable-list .adf-datatable-selected>svg{fill:var(--theme-accent-color);height:30px;width:30px}.adf-document-list_empty_template{margin-bottom:20px;margin-top:20px;text-align:center}.adf-no-permission__template{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:300px;width:100%}.adf-no-permission__template mat-icon{font-size:52px;height:52px;width:52px}.adf-no-permission__template--text{color:var(--theme-text-fg-color);font-size:16px}.adf-document-list__this-space-is-empty{color:var(--theme-text-fg-color);font-size:24px;height:32px;letter-spacing:-1px;line-height:1.33;opacity:.26}.adf-document-list__drag-drop{color:var(--theme-text-fg-color);font-size:56px;height:56px;letter-spacing:-2px;line-height:1;margin-top:40px;opacity:.54}.adf-document-list__any-files-here-to-add{color:var(--theme-text-fg-color);font-size:16px;height:24px;letter-spacing:-.4px;line-height:1.5;margin-top:17px;opacity:.54}.adf-document-list__empty_doc_lib{height:161px;margin-top:17px;object-fit:contain;width:565px}.adf-document-list-loading-margin{margin:auto}.adf-document-list-loading-container{display:flex;flex-direction:row;height:100%;min-height:300px}.adf-empty-list-header{font-size:24px;height:32px;letter-spacing:-1px;line-height:1.33;opacity:.26!important}.adf-documentlist-pagination,.adf-empty-list-header{color:var(--theme-text-fg-color)}.adf-documentlist-pagination .adf-pagination__block{border-right:none}.adf-empty-folder-this-space-is-empty{color:var(--theme-text-color);font-size:24px;height:32px;letter-spacing:-1px;line-height:1.33}.adf-empty-folder-drag-drop{color:var(--theme-foreground-text-color);font-size:53px;letter-spacing:-2px;line-height:1;margin-top:40px;min-height:56px;white-space:pre-line;word-break:break-all}@media screen and (max-width:599px){.adf-empty-folder-drag-drop{font-size:48px}}.adf-empty-folder-any-files-here-to-add{color:var(--theme-foreground-text-color);font-size:16px;letter-spacing:-.4px;line-height:1.5;margin-top:17px;min-height:24px;white-space:pre-line;word-break:break-all}.adf-empty-folder-image{margin-top:17px;max-width:100%;object-fit:contain;width:565px}@media screen and (max-width:599px){.adf-empty-folder-image{width:250px}}.adf-datatable-gallery-thumbnails .adf-datatable-card .adf-datatable-row{height:300px!important}.adf-datatable-gallery-thumbnails .adf-datatable-card .adf-datatable-row img{height:130px}.adf-datatable-gallery-thumbnails .adf-datatable-card .adf-datatable-row .adf-datatable-cell{overflow:visible}.adf-datatable-gallery-thumbnails .adf-datatable-card .adf-datatable-row .adf-datatable-cell.adf-datatable-cell--image{display:flex;flex:0 0 auto;flex-direction:column-reverse;justify-content:space-between}.adf-datatable-gallery-thumbnails .adf-datatable-card .adf-datatable-row .adf-datatable-cell.adf-datatable-cell--image .adf-cell-value{display:flex;justify-content:center}"]}]}],we.ctorParameters=function(){return[{type:Z},{type:n.NgZone},{type:n.ElementRef},{type:C.AppConfigService},{type:C.UserPreferencesService},{type:C.ContentService},{type:C.ThumbnailService},{type:C.AlfrescoApiService},{type:C.LockService}]},we.propDecorators={columnList:[{type:n.ContentChild,args:[C.DataColumnListComponent]}],customLoadingContent:[{type:n.ContentChild,args:[C.CustomLoadingContentTemplateDirective]}],customNoPermissionsTemplate:[{type:n.ContentChild,args:[C.CustomNoPermissionTemplateDirective]}],customNoContentTemplate:[{type:n.ContentChild,args:[C.CustomEmptyContentTemplateDirective]}],includeFields:[{type:n.Input}],where:[{type:n.Input}],display:[{type:n.Input}],permissionsStyle:[{type:n.Input}],locationFormat:[{type:n.Input}],navigate:[{type:n.Input}],showHeader:[{type:n.Input}],navigationMode:[{type:n.Input}],thumbnails:[{type:n.Input}],selectionMode:[{type:n.Input}],multiselect:[{type:n.Input}],contentActions:[{type:n.Input}],contentActionsPosition:[{type:n.Input}],contextMenuActions:[{type:n.Input}],emptyFolderImageUrl:[{type:n.Input}],allowDropFiles:[{type:n.Input}],sorting:[{type:n.Input}],additionalSorting:[{type:n.Input}],sortingMode:[{type:n.Input}],rowStyle:[{type:n.Input}],rowStyleClass:[{type:n.Input}],loading:[{type:n.Input}],_rowFilter:[{type:n.Input}],rowFilter:[{type:n.Input}],imageResolver:[{type:n.Input}],stickyHeader:[{type:n.Input}],headerFilters:[{type:n.Input}],filterValue:[{type:n.Input}],currentFolderId:[{type:n.Input}],preselectNodes:[{type:n.Input}],node:[{type:n.Input}],maxItems:[{type:n.Input}],nodeClick:[{type:n.Output}],nodeDblClick:[{type:n.Output}],folderChange:[{type:n.Output}],preview:[{type:n.Output}],ready:[{type:n.Output}],error:[{type:n.Output}],nodeSelected:[{type:n.Output}],filterSelection:[{type:n.Output}],dataTable:[{type:n.ViewChild,args:["dataTable",{static:!0}]}],onShowContextMenu:[{type:n.HostListener,args:["contextmenu",["$event"]]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Oe=function(e){e&&(this.type=e.type||null,this.action=e.action||null,this.permission=e.permission||null)},xe=function(){function t(e,t,i,o,r,a,s){this.contentDialogService=e,this.dialogRef=t,this.content=i,this.documentListService=o,this.apiService=r,this.dialog=a,this.downloadService=s,this.error=new n.EventEmitter}return t.prototype.downloadNode=function(e){new C.NodeDownloadDirective(this.apiService,this.downloadService,this.dialog).downloadNode(e)},t.prototype.copyContent=function(t,n){return this.doFileOperation(e.NodeAction.COPY,"content",t,n)},t.prototype.copyFolder=function(t,n){return this.doFileOperation(e.NodeAction.COPY,"folder",t,n)},t.prototype.moveContent=function(t,n){return this.doFileOperation(e.NodeAction.MOVE,"content",t,n)},t.prototype.moveFolder=function(t,n){return this.doFileOperation(e.NodeAction.MOVE,"folder",t,n)},t.prototype.doFileOperation=function(e,t,n,i){var o=this,r=new T.Subject;return this.contentDialogService.openCopyMoveDialog(e,n,i).subscribe((function(i){var a=i[0];o.documentListService[e.toLowerCase()+"Node"].call(o.documentListService,n.id,a.id).subscribe(r.next.bind(r,"OPERATION.SUCCESS."+t.toUpperCase()+"."+e),r.error.bind(r))}),(function(e){return r.error(e),r})),r},t}();xe.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new xe(n.ɵɵinject(te),n.ɵɵinject(c.MatDialog),n.ɵɵinject(C.ContentService),n.ɵɵinject(Z),n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(c.MatDialog),n.ɵɵinject(C.DownloadService))},token:xe,providedIn:"root"}),xe.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],xe.ctorParameters=function(){return[{type:te},{type:c.MatDialog},{type:C.ContentService},{type:Z},{type:C.AlfrescoApiService},{type:c.MatDialog},{type:C.DownloadService}]},xe.propDecorators={error:[{type:n.Output}]};var De=function(){function e(e,t,n,i,o){this.nodeActionsService=e,this.contentNodeDialogService=t,this.translation=n,this.documentListService=i,this.contentService=o,this.permissionEvent=new T.Subject,this.error=new T.Subject,this.success=new T.Subject,this.handlers={},this.setupActionHandlers()}return e.prototype.getHandler=function(e){if(e){var t=e.toLowerCase();return this.handlers[t]||null}return null},e.prototype.setHandler=function(e,t){if(e){var n=e.toLowerCase();return this.handlers[n]=t,!0}return!1},e.prototype.canExecuteAction=function(e){return this.documentListService&&e&&!0===e.entry.isFile},e.prototype.setupActionHandlers=function(){this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers.delete=this.deleteNode.bind(this),this.handlers.download=this.downloadNode.bind(this),this.handlers.lock=this.lockNode.bind(this)},e.prototype.lockNode=function(e){return this.contentNodeDialogService.openLockNodeDialog(e.entry)},e.prototype.downloadNode=function(e){this.nodeActionsService.downloadNode(e)},e.prototype.copyNode=function(e,t,n){var i=this.nodeActionsService.copyContent(e.entry,n);return this.prepareHandlers(i),i},e.prototype.moveNode=function(e,t,n){var i=this.nodeActionsService.moveContent(e.entry,n);return this.prepareHandlers(i),i},e.prototype.prepareHandlers=function(e){var t=this;e.subscribe((function(e){t.success.next(e)}),this.error.next.bind(this.error))},e.prototype.deleteNode=function(e,t,n){var i=this;if(this.canExecuteAction(e)){if(this.contentService.hasAllowableOperations(e.entry,n)){var o=this.documentListService.deleteNode(e.entry.id);return o.subscribe((function(){var t=i.translation.instant("CORE.DELETE_NODE.SINGULAR",{name:e.entry.name});i.success.next(t)}),(function(){var t=i.translation.instant("CORE.DELETE_NODE.ERROR_SINGULAR",{name:e.entry.name});i.error.next(t)})),o}return this.permissionEvent.next(new Oe({type:"content",action:"delete",permission:n})),T.throwError(new Error("No permission to delete"))}return T.of()},e}();De.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new De(n.ɵɵinject(xe),n.ɵɵinject(te),n.ɵɵinject(C.TranslationService),n.ɵɵinject(Z),n.ɵɵinject(C.ContentService))},token:De,providedIn:"root"}),De.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],De.ctorParameters=function(){return[{type:xe},{type:te},{type:C.TranslationService},{type:Z},{type:C.ContentService}]};var Ne=function(){function e(e,t,n,i){this.nodeActionsService=e,this.documentListService=t,this.contentService=n,this.translation=i,this.permissionEvent=new T.Subject,this.error=new T.Subject,this.success=new T.Subject,this.handlers={},this.setupActionHandlers()}return e.prototype.getHandler=function(e){if(e){var t=e.toLowerCase();return this.handlers[t]||null}return null},e.prototype.setHandler=function(e,t){if(e){var n=e.toLowerCase();return this.handlers[n]=t,!0}return!1},e.prototype.canExecuteAction=function(e){return this.documentListService&&e&&!0===e.entry.isFolder},e.prototype.setupActionHandlers=function(){this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers.delete=this.deleteNode.bind(this),this.handlers.download=this.downloadNode.bind(this)},e.prototype.downloadNode=function(e){this.nodeActionsService.downloadNode(e)},e.prototype.copyNode=function(e,t,n){var i=this.nodeActionsService.copyFolder(e.entry,n);return this.prepareHandlers(i,t),i},e.prototype.moveNode=function(e,t,n){var i=this.nodeActionsService.moveFolder(e.entry,n);return this.prepareHandlers(i,t),i},e.prototype.prepareHandlers=function(e,t){var n=this;e.subscribe((function(e){t&&"function"==typeof t.reload&&t.reload(),n.success.next(e)}),this.error.next.bind(this.error))},e.prototype.deleteNode=function(e,t,n){var i=this;if(this.canExecuteAction(e)){if(this.contentService.hasAllowableOperations(e.entry,n)){var o=this.documentListService.deleteNode(e.entry.id);return o.subscribe((function(){t&&"function"==typeof t.reload&&t.reload();var n=i.translation.instant("CORE.DELETE_NODE.SINGULAR",{name:e.entry.name});i.success.next(n)}),(function(){var t=i.translation.instant("CORE.DELETE_NODE.ERROR_SINGULAR",{name:e.entry.name});i.error.next(t)})),o}return this.permissionEvent.next(new Oe({type:"folder",action:"delete",permission:n})),T.throwError(new Error("No permission to delete"))}return T.of()},e}();Ne.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Ne(n.ɵɵinject(xe),n.ɵɵinject(Z),n.ɵɵinject(C.ContentService),n.ɵɵinject(C.TranslationService))},token:Ne,providedIn:"root"}),Ne.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Ne.ctorParameters=function(){return[{type:xe},{type:Z},{type:C.ContentService},{type:C.TranslationService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Le=function(){function e(e){this.documentList=e}return e.prototype.registerAction=function(e){return!(!this.documentList||!e)&&(this.documentList.actions.push(e),!0)},e.prototype.unregisterAction=function(e){if(this.documentList&&e){var t=this.documentList.actions.indexOf(e);if(t>=0)return this.documentList.actions.splice(t,1),!0}return!1},e}();Le.decorators=[{type:n.Component,args:[{selector:"content-actions",template:""}]}],Le.ctorParameters=function(){return[{type:we}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Re=function(){function t(t,i,o){this.list=t,this.documentActions=i,this.folderActions=o,this.title="Action",this.visible=!0,this.target=e.ContentActionTarget.All,this.disabled=!1,this.execute=new n.EventEmitter,this.permissionEvent=new n.EventEmitter,this.error=new n.EventEmitter,this.success=new n.EventEmitter,this.subscriptions=[]}return t.prototype.ngOnInit=function(){this.target===e.ContentActionTarget.All?(this.folderActionModel=this.generateAction(e.ContentActionTarget.Folder),this.documentActionModel=this.generateAction(e.ContentActionTarget.Document)):this.documentActionModel=this.generateAction(this.target)},t.prototype.ngOnChanges=function(e){e.visible&&!e.visible.firstChange&&(this.documentActionModel&&(this.documentActionModel.visible=e.visible.currentValue),this.folderActionModel&&(this.folderActionModel.visible=e.visible.currentValue)),e.disabled&&!e.disabled.firstChange&&(this.documentActionModel&&(this.documentActionModel.disabled=e.disabled.currentValue),this.folderActionModel&&(this.folderActionModel.disabled=e.disabled.currentValue))},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions=[],this.documentActionModel&&(this.unregister(this.documentActionModel),this.documentActionModel=null),this.folderActionModel&&(this.unregister(this.folderActionModel),this.folderActionModel=null)},t.prototype.register=function(e){return!!this.list&&this.list.registerAction(e)},t.prototype.unregister=function(e){return!!this.list&&this.list.unregisterAction(e)},t.prototype.generateAction=function(e){var t=this,n=new Ie({title:this.title,icon:this.icon,permission:this.permission,disableWithNoPermission:this.disableWithNoPermission,target:e,disabled:this.disabled,visible:this.visible});return this.handler&&(n.handler=this.getSystemHandler(e,this.handler)),this.execute&&(n.execute=function(e){t.execute.emit({value:e})}),this.register(n),n},t.prototype.getSystemHandler=function(t,n){var i=this;if(t){if((t=t.toLowerCase())===e.ContentActionTarget.Document)return this.documentActions?(this.subscriptions.push(this.documentActions.permissionEvent.subscribe((function(e){i.permissionEvent.emit(e)})),this.documentActions.error.subscribe((function(e){i.error.emit(e)})),this.documentActions.success.subscribe((function(e){i.success.emit(e)}))),this.documentActions.getHandler(n)):null;if(t===e.ContentActionTarget.Folder)return this.folderActions?(this.subscriptions.push(this.folderActions.permissionEvent.subscribe((function(e){i.permissionEvent.emit(e)})),this.folderActions.error.subscribe((function(e){i.error.emit(e)})),this.folderActions.success.subscribe((function(e){i.success.emit(e)}))),this.folderActions.getHandler(n)):null}return null},t}();Re.decorators=[{type:n.Component,args:[{selector:"content-action",template:"",providers:[De,Ne]}]}],Re.ctorParameters=function(){return[{type:Le},{type:De},{type:Ne}]},Re.propDecorators={title:[{type:n.Input}],icon:[{type:n.Input}],visible:[{type:n.Input}],handler:[{type:n.Input}],target:[{type:n.Input}],permission:[{type:n.Input}],disableWithNoPermission:[{type:n.Input}],disabled:[{type:n.Input}],execute:[{type:n.Output}],permissionEvent:[{type:n.Output}],error:[{type:n.Output}],success:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Fe=function(){function e(e,t){this.element=e,this.alfrescoApiService=t,this.displayTooltip$=new T.BehaviorSubject(""),this.displayText$=new T.BehaviorSubject(""),this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){var e=this;this.updateValue(),this.alfrescoApiService.nodeUpdated.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){var n=e.context.row;if(n){var i=n.node.entry;i===t&&(n.node={entry:i},e.updateValue())}}))},e.prototype.updateValue=function(){this.node=this.context.row.node;var e=this.context.data.rows||[];this.node&&this.node.entry&&(this.displayText$.next(this.makeLibraryTitle(this.node.entry,e)),this.displayTooltip$.next(this.makeLibraryTooltip(this.node.entry)))},e.prototype.onClick=function(){this.element.nativeElement.dispatchEvent(new CustomEvent("name-click",{bubbles:!0,detail:{node:this.node}}))},e.prototype.makeLibraryTooltip=function(e){var t=e.description,n=e.title;return t||n||""},e.prototype.makeLibraryTitle=function(e,t){var n=t.map((function(e){return e.node.entry})),i=e.title,o=e.id,r=!1;return n&&(r=n.some((function(e){return e.id!==o&&e.title===i}))),r?i+" ("+o+")":""+i},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e}();Fe.decorators=[{type:n.Component,args:[{selector:"adf-library-name-column",template:'\n        <span\n            role="link"\n            [attr.aria-label]="\'NAME_COLUMN_LINK.ACCESSIBILITY.ARIA_LABEL\' | translate:{\n                name:  displayText$ | async\n            }"\n            class="adf-datatable-cell-value"\n            title="{{ displayTooltip$ | async }}"\n            (click)="onClick()">\n\n            {{ displayText$ | async }}\n        </span>\n    ',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,host:{class:"adf-datatable-content-cell adf-datatable-link adf-library-name-column"}}]}],Fe.ctorParameters=function(){return[{type:n.ElementRef},{type:C.AlfrescoApiService}]},Fe.propDecorators={context:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Pe=function(){function e(e){this.api=e,this.displayText$=new T.BehaviorSubject(""),this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){var e=this;this.updateValue(),this.api.nodeUpdated.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){var n=e.context.row;if(n){var i=n.node.entry;i===t&&(n.node={entry:i},e.updateValue())}}))},e.prototype.updateValue=function(){var e=this.context.row.node;if(e&&e.entry)switch(e.entry.role){case w.Site.RoleEnum.SiteManager:this.displayText$.next("LIBRARY.ROLE.MANAGER");break;case w.Site.RoleEnum.SiteCollaborator:this.displayText$.next("LIBRARY.ROLE.COLLABORATOR");break;case w.Site.RoleEnum.SiteContributor:this.displayText$.next("LIBRARY.ROLE.CONTRIBUTOR");break;case w.Site.RoleEnum.SiteConsumer:this.displayText$.next("LIBRARY.ROLE.CONSUMER");break;default:this.displayText$.next("LIBRARY.ROLE.NONE")}},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e}();Pe.decorators=[{type:n.Component,args:[{selector:"adf-library-role-column",template:'\n        <span class="adf-datatable-cell-value" title="{{ (displayText$ | async) | translate }}">\n            {{ (displayText$ | async) | translate }}\n        </span>\n    ',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,host:{class:"adf-library-role-column adf-datatable-content-cell"}}]}],Pe.ctorParameters=function(){return[{type:C.AlfrescoApiService}]},Pe.propDecorators={context:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Me=function(){function e(e){this.api=e,this.displayText$=new T.BehaviorSubject(""),this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){var e=this;this.updateValue(),this.api.nodeUpdated.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){var n=e.context.row;if(n){var i=n.node.entry;i===t&&(n.node={entry:i},e.updateValue())}}))},e.prototype.updateValue=function(){var e=this.context.row.node;if(e&&e.entry)switch(e.entry.visibility){case w.Site.VisibilityEnum.PUBLIC:this.displayText$.next("LIBRARY.VISIBILITY.PUBLIC");break;case w.Site.VisibilityEnum.PRIVATE:this.displayText$.next("LIBRARY.VISIBILITY.PRIVATE");break;case w.Site.VisibilityEnum.MODERATED:this.displayText$.next("LIBRARY.VISIBILITY.MODERATED");break;default:this.displayText$.next("UNKNOWN")}},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e}();Me.decorators=[{type:n.Component,args:[{selector:"adf-library-status-column",template:'\n        <span class="adf-datatable-cell-value" title="{{ (displayText$ | async) | translate }}">\n            {{ (displayText$ | async) | translate }}\n        </span>\n    ',host:{class:"adf-library-status-column adf-datatable-content-cell"}}]}],Me.ctorParameters=function(){return[{type:C.AlfrescoApiService}]},Me.propDecorators={context:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ke=function(){function e(e,t){this.element=e,this.alfrescoApiService=t,this.key="name",this.displayText$=new T.BehaviorSubject(""),this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){var e=this;this.updateValue(),this.alfrescoApiService.nodeUpdated.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){var n=e.context.row;if(n){var i=n.node.entry;i===t&&(n.node={entry:i},e.updateValue())}}))},e.prototype.updateValue=function(){if(this.node=this.context.row.node,this.node&&this.node.entry){var e=this.context.row.getValue(this.key);this.displayText$.next(e||this.node.entry.id)}},e.prototype.onClick=function(){this.element.nativeElement.dispatchEvent(new CustomEvent("name-click",{bubbles:!0,detail:{node:this.node}}))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e}();ke.decorators=[{type:n.Component,args:[{selector:"adf-name-column",template:'\n        <span\n            role="link"\n            [attr.aria-label]="\'NAME_COLUMN_LINK.ACCESSIBILITY.ARIA_LABEL\' | translate:{\n                name:  displayText$ | async\n            }"\n            class="adf-datatable-cell-value"\n            title="{{ node | adfNodeNameTooltip }}"\n            (click)="onClick()">\n\n            {{ displayText$ | async }}\n        </span>\n    ',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,host:{class:"adf-datatable-content-cell adf-datatable-link adf-name-column"}}]}],ke.ctorParameters=function(){return[{type:n.ElementRef},{type:C.AlfrescoApiService}]},ke.propDecorators={context:[{type:n.Input}],key:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var _e=new n.InjectionToken("QueryService"),Ve=function(){function e(e,t){this.appConfig=e,this.alfrescoApiService=t,this.configUpdated=new T.Subject,this.updated=new T.Subject,this.executed=new T.Subject,this.error=new T.Subject,this.searchForms=new T.ReplaySubject(1),this.categories=[],this.queryFragments={},this.filterQueries=[],this.paging=null,this.sorting=[],this.sortingOptions=[],this._userQuery="",this.userFacetBuckets={},this.config={categories:[]},this.ranges={},this.resetToDefaults()}return Object.defineProperty(e.prototype,"searchApi",{get:function(){var e;return this._searchApi=null!==(e=this._searchApi)&&void 0!==e?e:new w.SearchApi(this.alfrescoApiService.getInstance()),this._searchApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userQuery",{get:function(){return this._userQuery},set:function(e){e=(e||"").trim(),this._userQuery=e?"("+e+")":""},enumerable:!1,configurable:!0}),e.prototype.resetToDefaults=function(){var e=this.getDefaultConfiguration();this.resetSearchOptions(),this.configUpdated.next(e),this.searchForms.next(this.getSearchFormDetails()),this.setUpSearchConfiguration(e)},e.prototype.getDefaultConfiguration=function(){var e=this.loadConfiguration();return void 0!==this.selectedConfiguration?e[this.selectedConfiguration]:Array.isArray(e)?e.find((function(e){return e.default})):e},e.prototype.updateSelectedConfiguration=function(e){var t=this.loadConfiguration();Array.isArray(t)&&void 0!==t[e]&&(this.selectedConfiguration=e,this.configUpdated.next(t[e]),this.searchForms.next(this.getSearchFormDetails()),this.resetSearchOptions(),this.setUpSearchConfiguration(t[e]),this.update())},e.prototype.resetSearchOptions=function(){this.categories=[],this.queryFragments={},this.filterQueries=[],this.sorting=[],this.sortingOptions=[],this.userFacetBuckets={},this.scope=null},e.prototype.getSearchFormDetails=function(){var e=this,t=this.loadConfiguration();return Array.isArray(t)?t.map((function(t,n){return{index:n,name:t.name||"SEARCH.UNKNOWN_CONFIGURATION",default:t.default||!1,selected:void 0!==e.selectedConfiguration?n===e.selectedConfiguration:t.default}})):t?[{index:0,name:t.name||"SEARCH.UNKNOWN_CONFIGURATION",default:!0,selected:!0}]:[]},e.prototype.setUpSearchConfiguration=function(e){e&&(this.config=JSON.parse(JSON.stringify(e)),this.categories=(this.config.categories||[]).filter((function(e){return e.enabled})),this.filterQueries=this.config.filterQueries||[],this.userFacetBuckets={},this.config.sorting&&(this.sorting=this.config.sorting.defaults||[],this.sortingOptions=this.config.sorting.options||[]))},e.prototype.addUserFacetBucket=function(e,t){if(e&&e.field&&t){var n=this.userFacetBuckets[e.field]||[];n.find((function(e){return e.label===t.label}))||n.push(t),this.userFacetBuckets[e.field]=n}},e.prototype.getUserFacetBuckets=function(e){return this.userFacetBuckets[e]||[]},e.prototype.removeUserFacetBucket=function(e,t){if(e&&e.field&&t){var n=this.userFacetBuckets[e.field]||[];this.userFacetBuckets[e.field]=n.filter((function(e){return e.label!==t.label}))}},e.prototype.addFilterQuery=function(e){e&&(this.filterQueries.find((function(t){return t.query===e}))||this.filterQueries.push({query:e}))},e.prototype.removeFilterQuery=function(e){e&&(this.filterQueries=this.filterQueries.filter((function(t){return t.query!==e})))},e.prototype.getFacetQuery=function(e){if(e&&this.hasFacetQueries){var t=this.config.facetQueries.queries.find((function(t){return t.label===e}));if(t)return Object.assign({},t)}return null},e.prototype.getFacetField=function(e){if(e){var t=(this.config.facetFields.fields||[]).find((function(t){return t.label===e}));if(t)return t.label=this.getSupportedLabel(t.label),Object.assign({},t)}return null},e.prototype.setScope=function(e){this.scope=e},e.prototype.getScope=function(){return this.scope},e.prototype.update=function(e){var t=e||this.buildQuery();this.updated.next(t)},e.prototype.execute=function(e){return H(this,void 0,void 0,(function(){var t,n,i;return q(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),(t=e||this.buildQuery())?[4,this.searchApi.search(t)]:[3,2];case 1:n=o.sent(),this.executed.next(n),o.label=2;case 2:return[3,4];case 3:return i=o.sent(),this.error.next(i),this.executed.next({list:{pagination:{totalItems:0},entries:[]}}),[3,4];case 4:return[2]}}))}))},e.prototype.search=function(e){var t=this,n=this.searchApi.search(e);return n.then((function(e){t.executed.next(e)})),T.from(n)},e.prototype.buildQuery=function(){var e=this.getFinalQuery(),t=this.config.include||[];if(0===t.length&&t.push("path","allowableOperations"),e){var n={query:{query:e,language:"afts"},include:t,paging:this.paging,fields:this.config.fields,filterQueries:this.filterQueries,facetQueries:this.facetQueries,facetIntervals:this.facetIntervals,facetFields:this.facetFields,sort:this.sort,highlight:this.highlight};return this.scope&&(n.scope=this.scope),n.facetFormat="V2",n}return null},e.prototype.getPrimarySorting=function(){return this.sorting&&this.sorting.length>0?this.sorting[0]:null},e.prototype.getSortingOptions=function(){return this.config&&this.config.sorting&&this.config.sorting.options||[]},e.prototype.getQueryGroup=function(e){return e.group||this.config.facetQueries.label||"Facet Queries"},Object.defineProperty(e.prototype,"hasFacetQueries",{get:function(){return!!(this.config&&this.config.facetQueries&&this.config.facetQueries.queries&&this.config.facetQueries.queries.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasFacetIntervals",{get:function(){return this.config&&this.config.facetIntervals&&this.config.facetIntervals.intervals&&this.config.facetIntervals.intervals.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasFacetHighlight",{get:function(){return!(!this.config||!this.config.highlight)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sort",{get:function(){return this.sorting.map((function(e){return new w.RequestSortDefinitionInner({type:e.type,field:e.field,ascending:e.ascending})}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"facetQueries",{get:function(){var e=this;return this.hasFacetQueries?this.config.facetQueries.queries.map((function(t){return t.group=e.getQueryGroup(t),Object.assign({},t)})):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"facetIntervals",{get:function(){var e=this;return this.hasFacetIntervals?{intervals:this.config.facetIntervals.intervals.map((function(t){return{label:e.getSupportedLabel(t.label),field:t.field,sets:t.sets.map((function(t){return{label:e.getSupportedLabel(t.label),start:t.start,end:t.end,startInclusive:t.startInclusive,endInclusive:t.endInclusive}}))}}))}:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlight",{get:function(){return this.hasFacetHighlight?this.config.highlight:null},enumerable:!1,configurable:!0}),e.prototype.getFinalQuery=function(){var e=this,t="";this.categories.forEach((function(n){var i=e.queryFragments[n.id];i&&(t.length>0&&(t+=" AND "),t+="("+i+")")}));var n=[this.userQuery,t].filter((function(e){return e})).join(" AND ");return this.userFacetBuckets&&Object.keys(this.userFacetBuckets).forEach((function(t){var i=(e.userFacetBuckets[t]||[]).filter((function(e){return e.filterQuery})).map((function(e){return e.filterQuery})).join(" OR ");i&&(n.length>0&&(n+=" AND "),n+="("+i+")")})),n},Object.defineProperty(e.prototype,"facetFields",{get:function(){var e=this,t=this.config.facetFields&&this.config.facetFields.fields;return t&&t.length>0?{facets:t.map((function(t){return{field:t.field,mincount:t.mincount,label:e.getSupportedLabel(t.label),limit:t.limit,offset:t.offset,prefix:t.prefix}}))}:null},enumerable:!1,configurable:!0}),e.prototype.getSupportedLabel=function(e){return e.search(/\s/g)>-1?'"'+e+'"':e},e}();Ve.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Ve(n.ɵɵinject(C.AppConfigService),n.ɵɵinject(C.AlfrescoApiService))},token:Ve,providedIn:"root"}),Ve.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Ve.ctorParameters=function(){return[{type:C.AppConfigService},{type:C.AlfrescoApiService}]};var Ue=function(e){function t(t,n,i){var o=e.call(this,t,n)||this;return o.nodeApiService=i,o.customSources=["-trashcan-","-sharedlinks-","-sites-","-mysites-","-favorites-","-recent-","-my-"],o.activeFilters=[],o.updated.pipe(O.filter((function(e){return!!e}))).subscribe((function(){o.execute()})),o}return G(t,e),t.prototype.isFilterServiceActive=function(){return!0},t.prototype.loadConfiguration=function(){return this.appConfig.get("search-headers")},t.prototype.setupCurrentPagination=function(e,t){(!this.paging||this.paging&&this.paging.maxItems!==e||this.paging.skipCount!==t)&&(this.paging={maxItems:e,skipCount:t},this.execute())},t.prototype.setActiveFilter=function(e,t){var n=this.activeFilters.find((function(t){return t.key===e}));n?n.value=t:this.activeFilters.push({key:e,value:t})},t.prototype.resetActiveFilters=function(){this.activeFilters=[]},t.prototype.getActiveFilters=function(){return this.activeFilters},t.prototype.isNoFilterActive=function(){return 0===this.activeFilters.length},t.prototype.removeActiveFilter=function(e){var t=this.activeFilters.map((function(e){return e.key})).indexOf(e);t>=0&&this.activeFilters.splice(t,1)},t.prototype.setSorting=function(e){var t=this;this.sorting=[],e.forEach((function(e){var n=t.getSortingFieldFromColumnName(e.key);if(n){var i="asc"===e.direction.toLocaleLowerCase(),o="score"===n?"SCORE":"FIELD",r={key:e.key,label:"current",type:o,field:n,ascending:i};t.sorting.push(r)}})),this.execute()},t.prototype.getSortingFieldFromColumnName=function(e){if(this.sortingOptions.length>0){var t=this.sortingOptions.find((function(t){return t.key===e}));return t?t.field:""}return""},t.prototype.getCategoryForColumn=function(e){var t=null;return null!==this.categories&&(t=this.categories.find((function(t){return t.columnKey===e}))),t},t.prototype.setCurrentRootFolderId=function(e){void 0!==this.filterQueries.find((function(t){return t.query.includes(e)}))&&(this.filterQueries=[]),this.filterQueries=[{query:'PARENT:"workspace://SpacesStore/'+e+'"'}],this.execute()},t.prototype.isCustomSourceNode=function(e){return this.customSources.includes(e)},t.prototype.getNodeIdForCustomSource=function(e){return this.nodeApiService.getNode(e)},t}(Ve);Ue.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Ue(n.ɵɵinject(C.AppConfigService),n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.NodesApiService))},token:Ue,providedIn:"root"}),Ue.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Ue.ctorParameters=function(){return[{type:C.AppConfigService},{type:C.AlfrescoApiService},{type:C.NodesApiService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Be=function(){function e(e,t){this.documentList=e,this.searchFilterQueryBuilder=t,this.value={},this.filterSelection=new n.EventEmitter,this.onDestroy$=new T.Subject,this.isFilterServiceActive=this.searchFilterQueryBuilder.isFilterServiceActive()}return e.prototype.ngOnInit=function(){var e=this;this.searchFilterQueryBuilder.executed.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.documentList.node=t,e.documentList.reload()})),this.initDataPagination(),this.initDataSorting()},e.prototype.ngOnChanges=function(e){e.currentFolderId&&e.currentFolderId.currentValue&&(this.resetFilterHeader(),this.configureSearchParent(e.currentFolderId.currentValue))},e.prototype.onFilterSelectionChange=function(){this.filterSelection.emit(this.searchFilterQueryBuilder.getActiveFilters()),this.searchFilterQueryBuilder.isNoFilterActive()&&(this.documentList.node=null,this.documentList.reload())},e.prototype.resetFilterHeader=function(){this.searchFilterQueryBuilder.resetActiveFilters()},e.prototype.initDataPagination=function(){var e=this;this.documentList.pagination.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.searchFilterQueryBuilder.setupCurrentPagination(t.maxItems,t.skipCount)}))},e.prototype.initDataSorting=function(){var e=this;this.documentList.sortingSubject.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.searchFilterQueryBuilder.setSorting(t)}))},e.prototype.configureSearchParent=function(e){var t=this;this.searchFilterQueryBuilder.isCustomSourceNode(e)?this.searchFilterQueryBuilder.getNodeIdForCustomSource(e).subscribe((function(e){t.initSearchHeader(e.id)})):this.initSearchHeader(e)},e.prototype.initSearchHeader=function(e){var t=this;this.searchFilterQueryBuilder.setCurrentRootFolderId(e),this.value&&Object.keys(this.value).forEach((function(e){t.searchFilterQueryBuilder.setActiveFilter(e,t.value[e])}))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e}();Be.decorators=[{type:n.Component,args:[{selector:"adf-filter-header",template:'<div *ngIf="isFilterServiceActive">\n    <adf-header-filter-template>\n        <ng-template let-col>\n            <adf-search-filter-container [col]="col"\n                                         [value]="value"\n                                         (filterChange)="onFilterSelectionChange()">\n            </adf-search-filter-container>\n        </ng-template>\n    </adf-header-filter-template>\n</div>\n',providers:[{provide:_e,useClass:Ue}]}]}],Be.ctorParameters=function(){return[{type:we,decorators:[{type:n.Inject,args:[we]}]},{type:Ue,decorators:[{type:n.Inject,args:[_e]}]}]},Be.propDecorators={value:[{type:n.Input}],currentFolderId:[{type:n.Input}],filterSelection:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var je=function(){function e(){this.isLibrary=!1}return e.prototype.ngOnInit=function(){this.node=this.context.row.node;var e=this.context.data.rows||[];if(this.node&&this.node.entry)if(this.isLibrary="st:site"===this.node.entry.nodeType,this.isLibrary){var t=this.node.entry.properties;this.displayText=this.makeLibraryTitle(this.node.entry,e),this.displayTooltip=t["cm:description"]||t["cm:title"]}else this.displayText=this.node.entry.name||this.node.entry.id},e.prototype.makeLibraryTitle=function(e,t){var n=t.map((function(e){return e.node.entry})),i=e.id,o=e.properties["cm:title"],r=!1;return n&&(r=n.some((function(e){return e.id!==i&&e.properties["cm:title"]===o}))),r?e.properties["cm:title"]+" ("+e.name+")":""+e.properties["cm:title"]},e}();je.decorators=[{type:n.Component,args:[{selector:"adf-trashcan-name-column",template:'\n    <ng-container *ngIf="!isLibrary">\n      <span class="adf-datatable-cell-value" title="{{ node | adfNodeNameTooltip }}">{{ displayText }}</span>\n    </ng-container>\n    <ng-container *ngIf="isLibrary">\n      <span class="adf-datatable-cell-value" title="{{ displayTooltip }}">{{ displayText }}</span>\n    </ng-container>\n  ',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,host:{class:"adf-datatable-content-cell adf-trashcan-name-column"}}]}],je.propDecorators={context:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var $e=function(){},Ge=function(){},He=function(){},qe=function(){},Ye=function(){this.properties={}},ze=function(){},Qe=function(){},We=function(){},Xe=function(){},Ke=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),this.isFolder=!0,this.isFile=!0,this.css=e,this.permission=t,this.isFile=n,this.isFolder=i},Ze=function(){function e(e,t,i,o){this.uploadService=e,this.changeDetector=t,this.userPreferencesService=i,this.elementRef=o,this.direction="ltr",this.onDestroy$=new T.Subject,this.position="right",this.alwaysVisible=!1,this.error=new n.EventEmitter,this.filesUploadingList=[],this.isDialogActive=!1,this.totalCompleted=0,this.totalErrors=0,this.isDialogMinimized=!1,this.isConfirmation=!1,this.dialogActive=new T.Subject}return Object.defineProperty(e.prototype,"isPositionRight",{get:function(){return"ltr"===this.direction&&"right"===this.position||"rtl"===this.direction&&"left"===this.position||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPositionLeft",{get:function(){return"ltr"===this.direction&&"left"===this.position||"rtl"===this.direction&&"right"===this.position||null},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.dialogActive.pipe(O.delay(100),O.takeUntil(this.onDestroy$)).subscribe((function(){var t=e.elementRef.nativeElement.querySelector("#upload-dialog");t&&t.focus()})),this.listSubscription=this.uploadService.queueChanged.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.filesUploadingList=t,e.filesUploadingList.length&&!e.isDialogActive?(e.isDialogActive=!0,e.dialogActive.next()):e.dialogActive.next()})),this.counterSubscription=T.merge(this.uploadService.fileUploadComplete,this.uploadService.fileUploadDeleted).pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.totalCompleted=t.totalComplete,e.changeDetector.detectChanges()})),this.errorSubscription=this.uploadService.fileUploadError.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.totalErrors=t.totalError,e.changeDetector.detectChanges()})),this.fileUploadSubscription=this.uploadService.fileUpload.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){e.changeDetector.detectChanges()})),this.uploadService.fileDeleted.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){if(e.filesUploadingList){var n=e.filesUploadingList.find((function(e){return!!e.data&&e.data.entry.id===t}));n&&(n.status=C.FileUploadStatus.Cancelled,e.changeDetector.detectChanges())}})),this.userPreferencesService.select("textOrientation").pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.direction=t}))},e.prototype.toggleConfirmation=function(){this.isConfirmation=!this.isConfirmation,this.isConfirmation||this.dialogActive.next(),this.isDialogMinimized&&(this.isDialogMinimized=!1)},e.prototype.cancelAllUploads=function(){this.toggleConfirmation(),this.dialogActive.next(),this.uploadList.cancelAllFiles()},e.prototype.toggleMinimized=function(){this.isDialogMinimized=!this.isDialogMinimized,this.changeDetector.detectChanges()},e.prototype.close=function(){this.isConfirmation=!1,this.totalCompleted=0,this.totalErrors=0,this.filesUploadingList=[],this.isDialogActive=!1,this.isDialogMinimized=!1,this.uploadService.clearQueue(),this.changeDetector.detectChanges()},e.prototype.ngOnDestroy=function(){this.uploadService.clearQueue(),this.listSubscription.unsubscribe(),this.counterSubscription.unsubscribe(),this.fileUploadSubscription.unsubscribe(),this.errorSubscription.unsubscribe(),this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.canShowDialog=function(){return this.isDialogActive||this.alwaysVisible},e.prototype.canShowCancelAll=function(){var e;return(null===(e=this.filesUploadingList)||void 0===e?void 0:e.length)&&this.hasUploadInProgress()},e.prototype.canCloseDialog=function(){return!this.hasUploadInProgress()&&!this.alwaysVisible},e.prototype.hasUploadInProgress=function(){var e,t;return!(null===(e=this.uploadList)||void 0===e?void 0:e.isUploadCompleted())&&!(null===(t=this.uploadList)||void 0===t?void 0:t.isUploadCancelled())},e}();Ze.decorators=[{type:n.Component,args:[{selector:"adf-file-uploading-dialog",template:'<div *ngIf="canShowDialog()"\n     role="dialog"\n     [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.DIALOG\'| translate"\n     tabindex="0"\n     class="adf-upload-dialog"\n     id="upload-dialog"\n     [class.adf-upload-dialog--minimized]="isDialogMinimized">\n    <header class="adf-upload-dialog__header">\n        <button\n            mat-button\n            [attr.aria-label]="(isDialogMinimized ?\n                \'ADF_FILE_UPLOAD.ARIA-LABEL.DIALOG_MAXIMIZE\':\n                \'ADF_FILE_UPLOAD.ARIA-LABEL.DIALOG_MINIMIZE\') | translate"\n            [disabled]="isConfirmation"\n            [attr.aria-expanded]="!isDialogMinimized"\n            (click)="toggleMinimized()">\n            <mat-icon\n                mat-list-icon\n                title="{{ (isDialogMinimized ? \'ADF_FILE_UPLOAD.BUTTON.MAXIMIZE\': \'ADF_FILE_UPLOAD.BUTTON.MINIMIZE\') | translate }}">\n                    {{ isDialogMinimized ? \'keyboard_arrow_up\' : \'keyboard_arrow_down\' }}\n            </mat-icon>\n        </button>\n\n        <span\n            tabindex="0"\n            class="adf-upload-dialog__title"\n            *ngIf="!uploadList.isUploadCancelled()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_PROGRESS\'\n                | translate: {\n                    completed: totalCompleted,\n                    total: filesUploadingList.length\n                }\n            }}\n        </span>\n\n        <span\n            tabindex="0"\n            class="adf-upload-dialog__title"\n            *ngIf="uploadList.isUploadCancelled()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_CANCELED\' | translate }}\n        </span>\n    </header>\n\n    <section class="adf-upload-dialog__info"\n        tabindex="0"\n        *ngIf="totalErrors">\n        {{\n            (totalErrors > 1\n                 ? \'FILE_UPLOAD.MESSAGES.UPLOAD_ERRORS\'\n                 : \'FILE_UPLOAD.MESSAGES.UPLOAD_ERROR\')\n                 | translate: { total: totalErrors }\n        }}\n    </section>\n\n    <section class="adf-upload-dialog__content"\n        [class.adf-upload-dialog--padding]="isConfirmation">\n        <adf-file-uploading-list\n            [class.adf-upload-dialog--hide]="isConfirmation"\n            #uploadList\n            [files]="filesUploadingList">\n                <ng-template let-file="$implicit">\n                     <adf-file-uploading-list-row\n                        [file]="file"\n                        (remove)="uploadList.removeFile(file)"\n                        (cancel)="uploadList.cancelFile(file)">\n                    </adf-file-uploading-list-row>\n                </ng-template>\n        </adf-file-uploading-list>\n\n        <div\n            aria-live="polite"\n            aria-labelledby="confirmationTitle"\n            aria-describedby="confirmationDescription"\n            class="adf-upload-dialog__confirmation"\n            [class.adf-upload-dialog--hide]="!isConfirmation">\n                <p role="heading" id="confirmationTitle" class="adf-upload-dialog__confirmation--title">\n                    {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TITLE\' | translate }}\n                </p>\n                <p id="confirmationDescription" class="adf-upload-dialog__confirmation--text">\n                    {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TEXT\' | translate }}\n                </p>\n        </div>\n    </section>\n\n    <footer class="adf-upload-dialog__actions" *ngIf="!isConfirmation">\n        <button\n            id="adf-upload-dialog-cancel-all"\n            [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.CANCEL_ALL\' | translate"\n            color="primary"\n            mat-button\n            *ngIf="canShowCancelAll()"\n            (click)="toggleConfirmation()"\n        >{{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_ALL\' | translate }}</button>\n\n        <button\n            id="adf-upload-dialog-close"\n            [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.DIALOG_CLOSE\' | translate"\n            *ngIf="canCloseDialog()"\n            mat-button\n            color="primary"\n            (click)="close()"\n        >{{ \'ADF_FILE_UPLOAD.BUTTON.CLOSE\' | translate }}</button>\n    </footer>\n\n    <footer class="adf-upload-dialog__actions"\n            *ngIf="isConfirmation" cdkTrapFocus cdkTrapFocusAutoCapture>\n        <button\n            id="adf-upload-dialog-cancel"\n            [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.CONFIRMATION.CANCEL\' | translate"\n            mat-button\n            (click)="cancelAllUploads()"\n        >{{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CANCEL\' | translate }}</button>\n\n        <button\n            id="adf-upload-dialog-confirm"\n            [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.CONFIRMATION.CONTINUE\' | translate"\n            mat-button\n            color="primary"\n            (click)="toggleConfirmation()"\n        >{{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CONTINUE\' | translate }}</button>\n    </footer>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-upload-dialog{background:var(--theme-dialog-bg-color);bottom:20px;box-shadow:1px 5px 15px #888;color:var(--theme-text-color);position:fixed;width:40%;z-index:999}.adf-upload-dialog--padding{padding:1em}.adf-upload-dialog--hide{display:none!important}.adf-upload-dialog--minimized{width:20%}.adf-upload-dialog--minimized .adf-upload-dialog__content{display:none}.adf-upload-dialog__header{align-items:center;display:flex;padding:1em}.adf-upload-dialog__header button{color:var(--theme-text-color)!important;line-height:0;min-width:0;padding:0}.adf-upload-dialog__title{flex:1 1 auto;margin-left:.5em}.adf-upload-dialog__info{padding:0 1em 1em}.adf-upload-dialog__content{border-bottom:1px solid var(--adf-upload-border-color);border-top:1px solid var(--adf-upload-border-color);max-height:194px;overflow:auto}.adf-upload-dialog__confirmation{padding:0 .5em}.adf-upload-dialog__confirmation--title{color:var(--theme-text-bold-color);font-size:16px;letter-spacing:-.4px;line-height:1.5}.adf-upload-dialog__confirmation--text{margin-bottom:0}.adf-upload-dialog__actions{display:flex;justify-content:flex-end;padding:1em}.adf-upload-dialog__actions>button{text-transform:uppercase}[adfUploadDialogLeft] .adf-upload-dialog{left:25px}[adfUploadDialogRight] .adf-upload-dialog{right:25px}"]}]}],Ze.ctorParameters=function(){return[{type:C.UploadService},{type:n.ChangeDetectorRef},{type:C.UserPreferencesService},{type:n.ElementRef}]},Ze.propDecorators={uploadList:[{type:n.ViewChild,args:["uploadList"]}],position:[{type:n.Input}],alwaysVisible:[{type:n.Input}],error:[{type:n.Output}],isPositionRight:[{type:n.HostBinding,args:["attr.adfUploadDialogRight"]}],isPositionLeft:[{type:n.HostBinding,args:["attr.adfUploadDialogLeft"]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Je=function(){function e(){this.cancel=new n.EventEmitter,this.remove=new n.EventEmitter,this.FileUploadStatus=C.FileUploadStatus}return e.prototype.onCancel=function(e){this.cancel.emit(e)},e.prototype.onRemove=function(e){this.remove.emit(e)},e.prototype.showCancelledStatus=function(){return this.file.status===C.FileUploadStatus.Cancelled||this.file.status===C.FileUploadStatus.Aborted||this.file.status===C.FileUploadStatus.Deleted},Object.defineProperty(e.prototype,"versionNumber",{get:function(){return this.file.data.entry.properties["cm:versionLabel"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mimeType",{get:function(){return this.file&&this.file.file&&this.file.file.type?this.file.file.type:"default"},enumerable:!1,configurable:!0}),e.prototype.isUploadVersion=function(){return!!this.file.data&&this.file.options&&this.file.options.newVersion&&this.file.data.entry.properties&&this.file.data.entry.properties["cm:versionLabel"]},e}();Je.decorators=[{type:n.Component,args:[{selector:"adf-file-uploading-list-row",template:'<div class="adf-file-uploading-row">\n    <mat-icon *ngIf="mimeType === \'default\'" mat-list-icon class="adf-file-uploading-row__type">\n        insert_drive_file\n    </mat-icon>\n\n    <adf-icon *ngIf="mimeType !== \'default\'" value="adf:{{ mimeType }}"></adf-icon>\n\n    <span\n        tabindex="0"\n        class="adf-file-uploading-row__name"\n        title="{{ file.name }}">\n        {{ file.name }}\n    </span>\n\n    <span *ngIf="isUploadVersion()" class="adf-file-uploading-row__version" tabindex="0" >\n        <mat-chip color="primary"\n            [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.VERSION\' | translate: { version:  versionNumber }"\n            [title]="\'version\' + versionNumber" disabled\n        >{{ versionNumber }}</mat-chip>\n    </span>\n\n    <div\n        tabindex="0"\n        role="button"\n        #toggleIcon="toggleIcon"\n        adf-toggle-icon\n        (keyup.enter)="onCancel(file)"\n        (click)="onCancel(file)"\n        data-automation-id="cancel-upload-progress"\n        *ngIf="file.status === FileUploadStatus.Progress || file.status === FileUploadStatus.Starting"\n        [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.CANCEL_FILE_UPLOAD\' | translate: { file: file.name }"\n        class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle"\n        title="{{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_FILE\' | translate }}">\n\n        <span class="adf-file-uploading-row__status" *ngIf="!toggleIcon.isToggled">\n            {{ file.progress.loaded | adfFileSize }} / {{ file.progress.total | adfFileSize }}\n        </span>\n\n        <mat-icon *ngIf="toggleIcon.isToggled"\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--cancel">\n            clear\n        </mat-icon>\n    </div>\n\n    <button mat-icon-button\n        adf-toggle-icon\n        #toggleIcon="toggleIcon"\n        *ngIf="file.status === FileUploadStatus.Complete && !isUploadVersion()"\n        (click)="onRemove(file)"\n        class="adf-file-uploading-row__group"\n        [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.REMOVE_FILE\' | translate: { file: file.name }"\n        title="{{ \'ADF_FILE_UPLOAD.BUTTON.REMOVE_FILE\' | translate }}">\n\n        <mat-icon *ngIf="!toggleIcon.isToggled"\n            class="adf-file-uploading-row__status adf-file-uploading-row__status--done">\n            check_circle\n        </mat-icon>\n\n        <mat-icon *ngIf="toggleIcon.isToggled"\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n            remove_circle\n        </mat-icon>\n    </button>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Complete && isUploadVersion()"\n        class="adf-file-uploading-row__file-version"\n        [attr.aria-label]="\'ADF_FILE_UPLOAD.STATUS.FILE_DONE_STATUS\' | translate"\n        role="status"\n        >\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__status--done">\n            check_circle\n        </mat-icon>\n    </div>\n\n    <button\n        adf-toggle-icon\n        #toggleIconCancel="toggleIcon"\n        mat-icon-button\n        *ngIf="file.status === FileUploadStatus.Pending"\n        (click)="onCancel(file)"\n        data-automation-id="cancel-upload-queue"\n        class="adf-file-uploading-row__group"\n        title="{{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_FILE\' | translate }}"\n        [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.CANCEL_FILE\' | translate: { file: file.name }">\n        <mat-icon\n            *ngIf="!toggleIconCancel.isToggled"\n            class="adf-file-uploading-row__status adf-file-uploading-row__status--pending">\n            schedule\n        </mat-icon>\n\n        <mat-icon\n            *ngIf="toggleIconCancel.isToggled"\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n            remove_circle\n        </mat-icon>\n    </button>\n\n    <div\n        tabindex="0"\n        role="status"\n        *ngIf="file.status === FileUploadStatus.Error"\n        class="adf-file-uploading-row__block adf-file-uploading-row__status--error">\n        <mat-icon mat-list-icon\n            [attr.aria-label]="\'ADF_FILE_UPLOAD.ARIA-LABEL.UPLOAD_FILE_ERROR\' | translate: { error: file.errorCode | adfFileUploadError }"\n            [matTooltip]="file.errorCode | adfFileUploadError">\n            report_problem\n        </mat-icon>\n    </div>\n\n    <div\n        tabindex="0"\n        [attr.aria-label]="\'ADF_FILE_UPLOAD.STATUS.FILE_CANCELED_STATUS\' | translate"\n        role="status"\n        *ngIf="showCancelledStatus()"\n        class="adf-file-uploading-row__block adf-file-uploading-row__status--cancelled">\n        {{ \'ADF_FILE_UPLOAD.STATUS.FILE_CANCELED_STATUS\' | translate }}\n    </div>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:["adf-file-uploading-list-row:not(:first-child){border-top:1px solid var(--adf-upload-border-color);display:block}.adf-file-uploading-row{align-items:center;cursor:default;display:flex;padding:.3em 1em}.adf-file-uploading-row:hover{background:#eee}.adf-file-uploading-row__name{flex:1 1 auto;overflow:hidden;padding:0 1em 0 .5em;text-overflow:ellipsis;white-space:nowrap}.adf-file-uploading-row__block,.adf-file-uploading-row__file-version,.adf-file-uploading-row__group{align-items:center;display:flex!important;height:40px;justify-content:flex-end;line-height:40px;min-width:100px}.adf-file-uploading-row__group--toggle{align-items:center;cursor:pointer;display:flex;height:40px;line-height:40px}.adf-file-uploading-row__status--done{color:var(--theme-accent-color)}.adf-file-uploading-row__action--cancel,.adf-file-uploading-row__action--remove,.adf-file-uploading-row__status--error{color:var(--theme-warn-color)}"]}]}],Je.propDecorators={file:[{type:n.Input}],cancel:[{type:n.Output}],remove:[{type:n.Output}]};var et=function(){function e(e,t,i){this.uploadService=e,this.nodesApi=t,this.translateService=i,this.FileUploadStatus=C.FileUploadStatus,this.files=[],this.error=new n.EventEmitter}return e.prototype.cancelFile=function(e){e.status===C.FileUploadStatus.Pending?e.status=C.FileUploadStatus.Cancelled:this.uploadService.cancelUpload(e)},e.prototype.removeFile=function(e){var t=this;this.deleteNode(e).subscribe((function(){e.status===C.FileUploadStatus.Error&&t.notifyError(e),t.cancelNodeVersionInstances(e),t.uploadService.cancelUpload(e)}))},e.prototype.cancelAllFiles=function(){var e=this,t=[];this.files.forEach((function(n){e.isUploadingFile(n)?e.uploadService.cancelUpload(n):n.status===C.FileUploadStatus.Complete&&t.push(e.deleteNode(n))})),T.forkJoin.apply(void 0,Q(t)).subscribe((function(t){var n,i=t.filter((function(e){return e.status===C.FileUploadStatus.Error}));i.length&&e.notifyError.apply(e,Q(i)),(n=e.uploadService).cancelUpload.apply(n,Q(t))}))},e.prototype.isUploadCompleted=function(){return!this.isUploadCancelled()&&Boolean(this.files.length)&&!this.files.some((function(e){var t=e.status;return t===C.FileUploadStatus.Starting||t===C.FileUploadStatus.Progress||t===C.FileUploadStatus.Pending}))},e.prototype.isUploadCancelled=function(){return!!this.files.length&&this.files.every((function(e){var t=e.status;return t===C.FileUploadStatus.Aborted||t===C.FileUploadStatus.Cancelled||t===C.FileUploadStatus.Deleted}))},e.prototype.deleteNode=function(e){var t=e.data.entry.id;return this.nodesApi.deleteNode(t,{permanent:!0}).pipe(O.map((function(){return e.status=C.FileUploadStatus.Deleted,e})),O.catchError((function(){return e.status=C.FileUploadStatus.Error,T.of(e)})))},e.prototype.cancelNodeVersionInstances=function(e){this.files.filter((function(t){return t.options.newVersion&&t.data.entry.id===e.data.entry.id})).map((function(e){e.status=C.FileUploadStatus.Deleted}))},e.prototype.notifyError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;n=1===e.length?this.translateService.instant("FILE_UPLOAD.MESSAGES.REMOVE_FILE_ERROR",{fileName:e[0].name}):this.translateService.instant("FILE_UPLOAD.MESSAGES.REMOVE_FILES_ERROR",{total:e.length}),this.error.emit(n)},e.prototype.isUploadingFile=function(e){return e.status===C.FileUploadStatus.Pending||e.status===C.FileUploadStatus.Starting||e.status===C.FileUploadStatus.Progress},e}();et.decorators=[{type:n.Component,args:[{selector:"adf-file-uploading-list",template:'<div class="upload-list">\n    <ng-template\n        ngFor\n        [ngForOf]="files"\n        [ngForTemplate]="template">\n    </ng-template>\n</div>\n',styles:[":host{display:flex;flex-direction:column}"]}]}],et.ctorParameters=function(){return[{type:C.UploadService},{type:C.NodesApiService},{type:C.TranslationService}]},et.propDecorators={template:[{type:n.ContentChild,args:[n.TemplateRef]}],files:[{type:n.Input}],error:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var tt=function(){function e(e,t,n,i){this.files=e,this.uploadService=t,this.successEmitter=n,this.errorEmitter=i,this.isDefaultPrevented=!1}return Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this.isDefaultPrevented},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.isDefaultPrevented=!0},e.prototype.pauseUpload=function(){this.preventDefault()},e.prototype.resumeUpload=function(){var e;this.files&&this.files.length>0&&((e=this.uploadService).addToQueue.apply(e,Q(this.files)),this.uploadService.uploadFilesInTheQueue(this.successEmitter,this.errorEmitter))},e}(),nt=function(){function e(e,t,i){this.uploadService=e,this.translationService=t,this.ngZone=i,this.rootFolderId="-root-",this.disabled=!1,this.acceptedFilesType="*",this.versioning=!1,this.majorVersion=!1,this.nodeType="cm:content",this.success=new n.EventEmitter,this.error=new n.EventEmitter,this.beginUpload=new n.EventEmitter,this.updateFileVersion=new n.EventEmitter,this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){var e=this;this.uploadService.fileUploadError.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){return e.error.emit(t)}))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.uploadFiles=function(e){var t=this,n=e.map((function(e){return t.createFileModel(e,t.rootFolderId,(e.webkitRelativePath||"").replace(/\/[^\/]*$/,""))}));this.uploadQueue(n)},e.prototype.uploadFilesInfo=function(e){var t=this,n=e.map((function(e){return t.createFileModel(e.file,t.rootFolderId,e.relativeFolder)}));this.uploadQueue(n)},e.prototype.uploadQueue=function(e){var t=this,n=e.filter(this.isFileAcceptable.bind(this)).filter(this.isFileSizeAcceptable.bind(this));this.ngZone.run((function(){var e,i=new tt(Q(n),t.uploadService,t.success,t.error);t.beginUpload.emit(i),i.defaultPrevented||n.length>0&&((e=t.uploadService).addToQueue.apply(e,Q(n)),t.uploadService.uploadFilesInTheQueue(t.success,t.error))}))},e.prototype.isFileAcceptable=function(e){return"*"===this.acceptedFilesType||-1!==this.acceptedFilesType.split(",").map((function(e){return e.trim().replace(/^\./,"")})).indexOf(e.extension)},e.prototype.createFileModel=function(e,t,n,i){return new C.FileModel(e,{comment:this.comment,majorVersion:this.majorVersion,newVersion:this.versioning,parentId:t,path:n,nodeType:this.nodeType},i)},e.prototype.isFileSizeAllowed=function(e){var t=!0;return this.isMaxFileSizeDefined()&&(t=this.isFileSizeCorrect(e)),t},e.prototype.isMaxFileSizeDefined=function(){return void 0!==this.maxFilesSize&&null!==this.maxFilesSize},e.prototype.isFileSizeCorrect=function(e){return this.maxFilesSize>=0&&e.size<=this.maxFilesSize},e.prototype.isFileSizeAcceptable=function(e){var t=!0;if(!this.isFileSizeAllowed(e)){t=!1;var n=this.translationService.instant("FILE_UPLOAD.MESSAGES.EXCEED_MAX_FILE_SIZE",{fileName:e.name});this.error.emit(n)}return t},e}();nt.decorators=[{type:n.Directive}],nt.ctorParameters=function(){return[{type:C.UploadService},{type:C.TranslationService},{type:n.NgZone}]},nt.propDecorators={maxFilesSize:[{type:n.Input}],rootFolderId:[{type:n.Input}],disabled:[{type:n.Input}],acceptedFilesType:[{type:n.Input}],versioning:[{type:n.Input}],majorVersion:[{type:n.Input}],comment:[{type:n.Input}],nodeType:[{type:n.Input}],success:[{type:n.Output}],error:[{type:n.Output}],beginUpload:[{type:n.Output}],updateFileVersion:[{type:n.Output}]};var it=function(e){function t(t,i,o,r,a){var s=e.call(this,t,o,a)||this;return s.uploadService=t,s.contentService=i,s.translationService=o,s.logService=r,s.ngZone=a,s.uploadFolders=!1,s.multipleFiles=!1,s.tooltip=null,s.permissionEvent=new n.EventEmitter,s.hasAllowableOperations=!1,s.permissionValue=new T.Subject,s}return G(t,e),t.prototype.ngOnInit=function(){var e=this;this.permissionValue.subscribe((function(t){e.hasAllowableOperations=t}))},t.prototype.ngOnChanges=function(e){var t=e.rootFolderId;t&&t.currentValue&&this.checkPermission()},t.prototype.isButtonDisabled=function(){return!!this.disabled||void 0},t.prototype.onFilesAdded=function(e){var t=C.FileUtils.toFileArray(e.currentTarget.files);this.hasAllowableOperations?this.uploadFiles(t):this.permissionEvent.emit(new Oe({type:"content",action:"upload",permission:"create"})),e.target.value=""},t.prototype.onClickUploadButton=function(){if(this.file){var e=[this.file];this.hasAllowableOperations?this.uploadFiles(e):this.permissionEvent.emit(new Oe({type:"content",action:"upload",permission:"create"}))}},t.prototype.onDirectoryAdded=function(e){if(this.hasAllowableOperations){var t=C.FileUtils.toFileArray(e.currentTarget.files);this.uploadFiles(t)}else this.permissionEvent.emit(new Oe({type:"content",action:"upload",permission:"create"}));e.target.value=""},t.prototype.checkPermission=function(){var e=this;if(this.rootFolderId){this.contentService.getNode(this.rootFolderId,{includeSource:!0,include:["allowableOperations"]}).subscribe((function(t){return e.permissionValue.next(e.nodeHasPermission(t.entry,C.AllowableOperationsEnum.CREATE))}),(function(t){t&&t.error?e.error.emit({error:t.error.message}):e.error.emit({error:"FILE_UPLOAD.BUTTON.PERMISSION_CHECK_ERROR"})}))}},t.prototype.nodeHasPermission=function(e,t){return this.contentService.hasAllowableOperations(e,t)},t}(nt);it.decorators=[{type:n.Component,args:[{selector:"adf-upload-button",template:'<form class="adf-upload-button-file-container">\n    \x3c!--Files Upload--\x3e\n    <div *ngIf="!uploadFolders">\n\n        \x3c!--Single Files Upload--\x3e\n        <button *ngIf="!multipleFiles"\n            [disabled]="isButtonDisabled()"\n            mat-button\n            (click)="uploadSingleFile.click()">\n            <mat-icon>file_upload</mat-icon>\n            <span id="upload-single-file-label"\n                *ngIf="!staticTitle">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</span>\n            <span id="upload-single-file-label-static"\n                *ngIf="staticTitle">{{ staticTitle }}</span>\n            <input #uploadSingleFile\n                id="upload-single-file"\n                data-automation-id="upload-single-file"\n                [type]="file ? \'button\' : \'file\'"\n                name="uploadFiles"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)"\n                (click)="onClickUploadButton()">\n        </button>\n\n        \x3c!--Multiple Files Upload--\x3e\n        <button *ngIf="multipleFiles"\n            [disabled]="isButtonDisabled()"\n            mat-button\n            (click)="uploadMultipleFiles.click()">\n            <mat-icon>file_upload</mat-icon>\n\n            <span id="upload-multiple-file-label"\n                *ngIf="!staticTitle">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</span>\n            <span\n                id="upload-multiple-file-label-static"\n                *ngIf="staticTitle">{{ staticTitle }}</span>\n            <input #uploadMultipleFiles\n                id="upload-multiple-files"\n                data-automation-id="upload-multiple-files"\n                type="file"\n                name="uploadFiles"\n                multiple="multiple"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </button>\n    </div>\n\n    \x3c!--Folders Upload--\x3e\n    <div *ngIf="uploadFolders">\n        <button\n            [disabled]="isButtonDisabled()"\n            mat-button\n            (click)="uploadFolders.click()">\n            <mat-icon>file_upload</mat-icon>\n            <span id="uploadFolder-label"\n                *ngIf="!staticTitle">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER\' | translate }}</span>\n            <span id="uploadFolder-label-static"\n                *ngIf="staticTitle">{{ staticTitle }}</span>\n            <input #uploadFolders\n                id="uploadFolder"\n                data-automation-id="uploadFolder"\n                type="file"\n                name="uploadFiles"\n                multiple="multiple"\n                accept="{{acceptedFilesType}}"\n                webkitdirectory directory\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onDirectoryAdded($event)">\n        </button>\n    </div>\n</form>\n',viewProviders:[{provide:C.EXTENDIBLE_COMPONENT,useExisting:n.forwardRef((function(){return it}))}],encapsulation:n.ViewEncapsulation.None,styles:[".adf-upload-button-file-container input{display:none}"]}]}],it.ctorParameters=function(){return[{type:C.UploadService},{type:C.ContentService},{type:C.TranslationService},{type:C.LogService},{type:n.NgZone}]},it.propDecorators={uploadFolders:[{type:n.Input}],multipleFiles:[{type:n.Input}],staticTitle:[{type:n.Input}],tooltip:[{type:n.Input}],file:[{type:n.Input}],permissionEvent:[{type:n.Output}]};var ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return G(t,e),t.prototype.createFileModel=function(t){var n=e.prototype.createFileModel.call(this,t,this.rootFolderId,(t.webkitRelativePath||"").replace(/\/[^\/]*$/,""),this.node.id);if(!this.isFileAcceptable(n)){var i=this.translationService.instant("FILE_UPLOAD.VERSION.MESSAGES.INCOMPATIBLE_VERSION");this.error.emit(i)}return n},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.checkPermission()},t.prototype.checkPermission=function(){this.permissionValue.next(this.nodeHasPermission(this.node,C.AllowableOperationsEnum.UPDATE))},t}(it);ot.decorators=[{type:n.Component,args:[{selector:"adf-upload-version-button",template:'<form class="adf-upload-button-file-container">\n    \x3c!--Files Upload--\x3e\n    <div *ngIf="!uploadFolders">\n\n        \x3c!--Single Files Upload--\x3e\n        <button *ngIf="!multipleFiles"\n            [disabled]="isButtonDisabled()"\n            mat-button\n            (click)="uploadSingleFile.click()">\n            <mat-icon>file_upload</mat-icon>\n            <span id="upload-single-file-label"\n                *ngIf="!staticTitle">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</span>\n            <span id="upload-single-file-label-static"\n                *ngIf="staticTitle">{{ staticTitle }}</span>\n            <input #uploadSingleFile\n                id="upload-single-file"\n                data-automation-id="upload-single-file"\n                [type]="file ? \'button\' : \'file\'"\n                name="uploadFiles"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)"\n                (click)="onClickUploadButton()">\n        </button>\n\n        \x3c!--Multiple Files Upload--\x3e\n        <button *ngIf="multipleFiles"\n            [disabled]="isButtonDisabled()"\n            mat-button\n            (click)="uploadMultipleFiles.click()">\n            <mat-icon>file_upload</mat-icon>\n\n            <span id="upload-multiple-file-label"\n                *ngIf="!staticTitle">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</span>\n            <span\n                id="upload-multiple-file-label-static"\n                *ngIf="staticTitle">{{ staticTitle }}</span>\n            <input #uploadMultipleFiles\n                id="upload-multiple-files"\n                data-automation-id="upload-multiple-files"\n                type="file"\n                name="uploadFiles"\n                multiple="multiple"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </button>\n    </div>\n\n    \x3c!--Folders Upload--\x3e\n    <div *ngIf="uploadFolders">\n        <button\n            [disabled]="isButtonDisabled()"\n            mat-button\n            (click)="uploadFolders.click()">\n            <mat-icon>file_upload</mat-icon>\n            <span id="uploadFolder-label"\n                *ngIf="!staticTitle">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER\' | translate }}</span>\n            <span id="uploadFolder-label-static"\n                *ngIf="staticTitle">{{ staticTitle }}</span>\n            <input #uploadFolders\n                id="uploadFolder"\n                data-automation-id="uploadFolder"\n                type="file"\n                name="uploadFiles"\n                multiple="multiple"\n                accept="{{acceptedFilesType}}"\n                webkitdirectory directory\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onDirectoryAdded($event)">\n        </button>\n    </div>\n</form>\n',viewProviders:[{provide:C.EXTENDIBLE_COMPONENT,useExisting:n.forwardRef((function(){return ot}))}],encapsulation:n.ViewEncapsulation.None,host:{class:"adf-upload-version-button"},styles:[".adf-upload-button-file-container input{display:none}"]}]}],ot.propDecorators={node:[{type:n.Input}]};var rt=function(e){function t(t,n,i,o,r){var a=e.call(this,t,n,r)||this;return a.uploadService=t,a.translationService=n,a.notificationService=i,a.contentService=o,a.ngZone=r,a}return G(t,e),t.prototype.onFilesDropped=function(e){!this.disabled&&e.length&&this.uploadFiles(e)},t.prototype.onFolderEntityDropped=function(e){var t=this;!this.disabled&&e.isDirectory&&C.FileUtils.flatten(e).then((function(e){t.uploadFilesInfo(e)}))},t.prototype.showUndoNotificationBar=function(e){var t,n,i=this;t=this.translationService.get("FILE_UPLOAD.MESSAGES.PROGRESS"),n=this.translationService.get("FILE_UPLOAD.ACTION.UNDO"),this.notificationService.openSnackMessageAction(t.value,n.value,3e3).onAction().subscribe((function(){var t;(t=i.uploadService).cancelUpload.apply(t,Q(e))}))},t.prototype.isDroppable=function(){return!this.disabled},t.prototype.onUploadFiles=function(e){if(e.stopPropagation(),e.preventDefault(),this.isTargetNodeFolder(e)?this.contentService.hasAllowableOperations(e.detail.data.obj.entry,C.AllowableOperationsEnum.CREATE):this.contentService.hasAllowableOperations(e.detail.data.obj.entry,C.AllowableOperationsEnum.UPDATE))if(this.isTargetNodeFolder(e)||1!==e.detail.files.length){var t=e.detail.files;if(this.isTargetNodeFolder(e)){var n=e.detail.data.obj.entry.name;t.map((function(e){return e.relativeFolder=n?n.concat(e.relativeFolder):e.relativeFolder}))}t&&t.length>0&&this.uploadFilesInfo(t)}else this.updateFileVersion.emit(e)},t.prototype.isTargetNodeFolder=function(e){return e.detail.data.obj&&e.detail.data.obj.entry.isFolder},t}(nt);rt.decorators=[{type:n.Component,args:[{selector:"adf-upload-drag-area",template:'<div [adf-file-draggable]="isDroppable()" class="adf-upload-border"\n     (filesDropped)="onFilesDropped($event)"\n     (folderEntityDropped)="onFolderEntityDropped($event)"\n     (upload-files)="onUploadFiles($any($event))"\n     dropzone="" webkitdropzone="*" #droparea>\n    <ng-content></ng-content>\n</div>\n',host:{class:"adf-upload-drag-area"},viewProviders:[{provide:C.EXTENDIBLE_COMPONENT,useExisting:n.forwardRef((function(){return rt}))}],encapsulation:n.ViewEncapsulation.None,styles:["adf-upload-drag-area{display:flex;flex:1;flex-direction:column;height:100%;min-height:0;overflow:hidden}adf-upload-drag-area .adf-upload-border{box-sizing:border-box;display:flex;flex-direction:column;height:100%;min-height:0;overflow:hidden;text-align:unset;vertical-align:unset;width:100%}adf-upload-drag-area .adf-file-draggable__input-focus{border:1px dashed #2196f3;color:#2196f3}adf-upload-drag-area .adf-file-draggable__input-focus adf-document-list{background:#e3f2fd}adf-upload-drag-area .adf-file-draggable__input-focus adf-document-list adf-datatable>table{background:inherit}adf-upload-drag-area .adf-upload__dragging{background:#e3f2fd;color:#2196f3}adf-upload-drag-area .adf-upload__dragging td{border-bottom:1px dashed #2196f3!important;border-top:1px dashed #2196f3!important}adf-upload-drag-area .adf-upload__dragging td:first-child{border-left:1px dashed #2196f3!important}adf-upload-drag-area .adf-upload__dragging td:last-child{border-right:1px dashed #2196f3!important}adf-upload-drag-area:first-child>div adf-upload-drag-area .adf-file-draggable__input-focus{border:1px dashed #2196f3!important;color:#2196f3;margin-left:0!important}adf-upload-drag-area:first-child .adf-upload-border{text-align:inherit!important;vertical-align:inherit!important}adf-upload-drag-area:first-child .adf-file-draggable__input-focus{border:1px dashed #2196f3!important;color:#2196f3!important;margin-left:0!important}adf-upload-drag-area:first-child .adf-file-draggable__input-focus adf-upload-drag-area>div{border:1px dashed #2196f3!important;color:#2196f3;margin-left:0!important}"]}]}],rt.ctorParameters=function(){return[{type:C.UploadService},{type:C.TranslationService},{type:C.NotificationService},{type:C.ContentService},{type:n.NgZone}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var at=function(){function e(e){this.translation=e}return e.prototype.transform=function(e){return this.translation.instant("FILE_UPLOAD.ERRORS."+(e||"GENERIC"))},e}();at.decorators=[{type:n.Pipe,args:[{name:"adfFileUploadError",pure:!0}]}],at.ctorParameters=function(){return[{type:C.TranslationService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var st=function(){function e(e,t){this.ngZone=t,this.enabled=!0,this.filesDropped=new n.EventEmitter,this.folderEntityDropped=new n.EventEmitter,this.cssClassName="adf-file-draggable__input-focus",this.element=e.nativeElement}return e.prototype.ngOnInit=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.element.addEventListener("dragenter",e.onDragEnter.bind(e)),e.element.addEventListener("dragover",e.onDragOver.bind(e)),e.element.addEventListener("dragleave",e.onDragLeave.bind(e)),e.element.addEventListener("drop",e.onDropFiles.bind(e))}))},e.prototype.ngOnDestroy=function(){this.element.removeEventListener("dragenter",this.onDragEnter),this.element.removeEventListener("dragover",this.onDragOver),this.element.removeEventListener("dragleave",this.onDragLeave),this.element.removeEventListener("drop",this.onDropFiles)},e.prototype.onDropFiles=function(e){if(this.enabled&&!e.defaultPrevented){this.preventDefault(e);var t=e.dataTransfer.items;if(t){for(var n=[],i=0;i<t.length;i++)if(t[i].webkitGetAsEntry){var o=t[i].webkitGetAsEntry();if(o)if(o.isFile){var r=t[i].getAsFile();r&&n.push(r)}else o.isDirectory&&this.folderEntityDropped.emit(o)}n.length>0&&this.filesDropped.emit(n)}else{n=C.FileUtils.toFileArray(e.dataTransfer.files);this.filesDropped.emit(n)}this.element.classList.remove(this.cssClassName)}},e.prototype.onDragEnter=function(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),e.dataTransfer.dropEffect="copy",this.element.classList.add(this.cssClassName))},e.prototype.onDragLeave=function(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),this.element.classList.remove(this.cssClassName))},e.prototype.onDragOver=function(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),e.dataTransfer.dropEffect="copy",this.element.classList.add(this.cssClassName))},e.prototype.preventDefault=function(e){e.stopPropagation(),e.preventDefault()},e}();st.decorators=[{type:n.Directive,args:[{selector:"[adf-file-draggable]"}]}],st.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone}]},st.propDecorators={enabled:[{type:n.Input,args:["adf-file-draggable"]}],filesDropped:[{type:n.Output}],folderEntityDropped:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var lt=function(){function e(){this.isFocus=!1,this.toggle=!1}return e.prototype.onMouseEnter=function(){this.isFocus||(this.toggle=!0)},e.prototype.onMouseLeave=function(){this.isFocus||(this.toggle=!1),this.isFocus&&this.toggle&&(this.isFocus=!1,this.toggle=!1)},e.prototype.onFocus=function(){this.isFocus=!0,this.toggle=!0},e.prototype.onBlur=function(){this.isFocus=!1,this.toggle=!1},Object.defineProperty(e.prototype,"isToggled",{get:function(){return this.toggle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return this.isFocus},enumerable:!1,configurable:!0}),e}();lt.decorators=[{type:n.Directive,args:[{selector:"[adf-toggle-icon]",exportAs:"toggleIcon"}]}],lt.propDecorators={onMouseEnter:[{type:n.HostListener,args:["mouseenter"]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave"]}],onFocus:[{type:n.HostListener,args:["focus"]}],onBlur:[{type:n.HostListener,args:["blur"]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ct=function(){};ct.decorators=[{type:n.NgModule,args:[{imports:[C.CoreModule,t.CommonModule,j,L.A11yModule],declarations:[st,rt,it,ot,Ze,et,Je,at,lt],exports:[st,rt,it,ot,Ze,et,Je,at,lt]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var dt=function(){};dt.decorators=[{type:n.Component,args:[{selector:"adf-empty-search-result",template:'<div class="adf-empty-search-result">\n    <ng-content></ng-content>\n</div>\n',encapsulation:n.ViewEncapsulation.None}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var pt=function(){function e(e,t){this.authService=e,this.thumbnailService=t,this.highlight=!1,this.inputType="text",this.liveSearchEnabled=!0,this.autocomplete=!1,this.expandable=!0,this.liveSearchMaxResults=5,this.submit=new n.EventEmitter,this.searchChange=new n.EventEmitter,this.optionClicked=new n.EventEmitter,this.focusSubject=new T.Subject,this.noSearchResultTemplate=null,this.searchTerm="",this.onDestroy$=new T.Subject}return e.prototype.isNoSearchTemplatePresent=function(){return!!this.emptySearchTemplate},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.isLoggedIn=function(){return this.authService.isEcmLoggedIn()},e.prototype.inputChange=function(e){this.searchTerm=e,this.searchChange.emit(e)},e.prototype.getMimeTypeIcon=function(e){var t=this.getMimeType(e);return this.thumbnailService.getMimeTypeIcon(t)},e.prototype.getMimeType=function(e){var t;return e.entry.content&&e.entry.content.mimeType&&(t=e.entry.content.mimeType),e.entry.isFolder&&(t="folder"),t},e.prototype.elementClicked=function(e){e.entry&&(this.optionClicked.next(e),this.focusSubject.next(new FocusEvent("blur")))},e.prototype.onFocus=function(e){this.focusSubject.next(e)},e.prototype.onBlur=function(e){this.getNextElementSibling(e.target)||this.isListElement(e)||this.focusSubject.next(e)},e.prototype.onSelectFirstResult=function(){this.listResultElement&&this.listResultElement.length>0&&this.listResultElement.first._getHostElement().focus()},e.prototype.onRowArrowDown=function(e){var t=this.getNextElementSibling(e.target);t&&t.focus()},e.prototype.onRowArrowUp=function(e){var t=this.getPreviousElementSibling(e.target);t?t.focus():this.focusSubject.next(new FocusEvent("focus"))},e.prototype.onReset=function(e){e&&this.searchAutocomplete.resetResults()},e.prototype.isListElement=function(e){return e.relatedTarget&&e.relatedTarget.children[0]&&"mat-list-item-content"===e.relatedTarget.children[0].className},e.prototype.getNextElementSibling=function(e){return e.nextElementSibling},e.prototype.getPreviousElementSibling=function(e){return e.previousElementSibling},e}();pt.decorators=[{type:n.Component,args:[{selector:"adf-search-control",template:'<div *ngIf="isLoggedIn()">\n    <adf-search-text-input  #searchTextInput\n                            [searchTerm]= "searchTerm"\n                            [expandable]="expandable"\n                            [autocomplete]="autocomplete"\n                            [liveSearchEnabled]="liveSearchEnabled"\n                            [focusListener]="focusSubject.asObservable()"\n                            [searchAutocomplete]="auto"\n                            (searchChange)="inputChange($event)"\n                            (reset)="onReset($event)"\n                            (selectResult)="onSelectFirstResult()"\n                            (submit)="submit.emit($event)"></adf-search-text-input>\n\n    <adf-search #search\n                #auto="searchAutocomplete"\n                class="adf-search-result-autocomplete"\n                [maxResults]="liveSearchMaxResults">\n        <ng-template let-data>\n            <mat-list *ngIf="searchTextInput?.isSearchBarActive()" id="autocomplete-search-result-list">\n                <mat-list-item\n                    *ngFor="let item of data?.list?.entries; let idx = index"\n                    id="result_option_{{idx}}"\n                    [attr.data-automation-id]="\'autocomplete_for_\' + item.entry.name"\n                    [tabindex]="0"\n                    (blur)="onBlur($event)"\n                    (keyup.arrowdown)="onRowArrowDown($event)"\n                    (keyup.arrowup)="onRowArrowUp($event)"\n                    class="adf-search-autocomplete-item"\n                    (click)="elementClicked(item)"\n                    (keyup.enter)="elementClicked(item)"\n                    (touchend)="elementClicked(item)">\n                    \x3c!-- This is a comment --\x3e\n                    <mat-icon mat-list-icon>\n                        <img [alt]="getMimeType(item)" [src]="getMimeTypeIcon(item)"/>\n                    </mat-icon>\n                    <h4 mat-line id="result_name_{{idx}}"\n                        *ngIf="highlight; else elseBlock"\n                        class="adf-search-fixed-text"\n                        [innerHtml]="item.entry.name | highlight: searchTerm">\n                        {{ item?.entry.name }}\n                    </h4>\n                    <ng-template #elseBlock>\n                        <h4 class="adf-search-fixed-text" mat-line id="result_name_{{idx}}"\n                            [innerHtml]="item.entry.name"></h4>\n                    </ng-template>\n                    <p mat-line class="adf-search-fixed-text"> {{item?.entry.createdByUser.displayName}} </p>\n                </mat-list-item>\n                <mat-list-item id="search_no_result"\n                            data-automation-id="search_no_result_found"\n                            *ngIf="data?.list?.entries.length === 0">\n                    <ng-content\n                        selector="adf-empty-search-result"\n                        *ngIf="isNoSearchTemplatePresent() else defaultNoResult">\n                    </ng-content>\n                    <ng-template #defaultNoResult>\n                        <p mat-line class="adf-search-fixed-text">{{ \'SEARCH.RESULTS.NONE\' | translate:{searchTerm:\n                            searchTerm} }}</p>\n                    </ng-template>\n                </mat-list-item>\n            </mat-list>\n        </ng-template>\n    </adf-search>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-control"},styles:[".adf-search-result-autocomplete{-webkit-overflow-scrolling:touch;background-color:var(--theme-card-bg-color);border-radius:2px;color:var(--theme-text-fg-color);font-size:15px;margin-left:45px;margin-top:-22px;max-height:400px;max-width:280px;min-width:112px;overflow:auto;position:absolute;transform:translateX(-40px);transform-origin:top left;z-index:5}.adf-search-result-autocomplete:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}@media screen and (max-width:959px){.adf-search-result-autocomplete{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}.adf-search-autocomplete-item:hover{background-color:var(--theme-bg-hover-color);opacity:1}"]}]}],pt.ctorParameters=function(){return[{type:C.AuthenticationService},{type:C.ThumbnailService}]},pt.propDecorators={highlight:[{type:n.Input}],inputType:[{type:n.Input}],liveSearchEnabled:[{type:n.Input}],autocomplete:[{type:n.Input}],expandable:[{type:n.Input}],liveSearchMaxResults:[{type:n.Input}],submit:[{type:n.Output}],searchChange:[{type:n.Output}],optionClicked:[{type:n.Output}],searchTextInput:[{type:n.ViewChild,args:["searchTextInput"]}],searchAutocomplete:[{type:n.ViewChild,args:["search"]}],listResultElement:[{type:n.ViewChildren,args:[h.MatListItem]}],emptySearchTemplate:[{type:n.ContentChild,args:[dt]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ut=function(){function e(e,t){var i=this;this.searchService=e,this._elementRef=t,this.displayWith=null,this.maxResults=20,this.skipResults=0,this.searchTerm="",this.resultLoaded=new n.EventEmitter,this.error=new n.EventEmitter,this.showPanel=!1,this._isOpen=!1,this.keyPressedStream=new T.Subject,this._classList={},this.onDestroy$=new T.Subject,this.keyPressedStream.pipe(O.debounceTime(200),O.takeUntil(this.onDestroy$)).subscribe((function(e){i.loadSearchResults(e)})),e.dataLoaded.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(e){return i.onSearchDataLoaded(e)}),(function(e){return i.onSearchDataError(e)}))}return Object.defineProperty(e.prototype,"classList",{set:function(e){var t=this;e&&e.length&&(e.split(" ").forEach((function(e){return t._classList[e.trim()]=!0})),this._elementRef.nativeElement.className="")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen&&this.showPanel},set:function(e){this._isOpen=e},enumerable:!1,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.setVisibility()},e.prototype.ngOnChanges=function(e){e.searchTerm&&e.searchTerm.currentValue&&this.loadSearchResults(e.searchTerm.currentValue)},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.resetResults=function(){this.cleanResults(),this.setVisibility()},e.prototype.reload=function(){this.loadSearchResults(this.searchTerm)},e.prototype.cleanResults=function(){this.results&&(this.results={})},e.prototype.loadSearchResults=function(e){var t=this;this.resetResults(),e?this.searchService.search(e,this.maxResults,this.skipResults).subscribe((function(e){return t.onSearchDataLoaded(e)}),(function(e){return t.onSearchDataError(e)})):this.cleanResults()},e.prototype.onSearchDataLoaded=function(e){e&&(this.results=e,this.resultLoaded.emit(this.results),this.isOpen=!0,this.setVisibility())},e.prototype.onSearchDataError=function(e){e&&400!==e.status&&(this.results=null,this.error.emit(e))},e.prototype.hidePanel=function(){this.isOpen&&(this._classList["adf-search-show"]=!1,this._classList["adf-search-hide"]=!0,this.isOpen=!1)},e.prototype.setVisibility=function(){this.showPanel=!!this.results&&!!this.results.list,this._classList["adf-search-show"]=this.showPanel,this._classList["adf-search-hide"]=!this.showPanel},e}();ut.decorators=[{type:n.Component,args:[{selector:"adf-search",template:'<div role="listbox" id="adf-search-results-content" [ngClass]="_classList" #panel>\n    <ng-template\n        [ngTemplateOutlet]="template"\n        [ngTemplateOutletContext]="{ $implicit: results }">\n    </ng-template>\n</div>\n',encapsulation:n.ViewEncapsulation.None,preserveWhitespaces:!1,exportAs:"searchAutocomplete",host:{class:"adf-search"},styles:[".adf-search-hide{visibility:hidden}.adf-search-show{visibility:visible}"]}]}],ut.ctorParameters=function(){return[{type:C.SearchService},{type:n.ElementRef}]},ut.propDecorators={panel:[{type:n.ViewChild,args:["panel",{static:!0}]}],template:[{type:n.ContentChild,args:[n.TemplateRef]}],displayWith:[{type:n.Input}],maxResults:[{type:n.Input}],skipResults:[{type:n.Input}],searchTerm:[{type:n.Input}],classList:[{type:n.Input,args:["class"]}],resultLoaded:[{type:n.Output}],error:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ht=function(){function e(){this.value="",this.isActive=!1,this.enableChangeUpdate=!0,this.displayValue$=new T.Subject}return e.prototype.ngOnInit=function(){if(this.context&&this.settings&&this.settings.pattern){var e=new RegExp(this.settings.pattern,"g").exec(this.context.queryFragments[this.id]||"");void 0!==this.settings.allowUpdateOnChange&&null!==this.settings.allowUpdateOnChange&&(this.enableChangeUpdate=this.settings.allowUpdateOnChange),e&&e.length>1&&(this.value=e[1]),this.startValue&&this.setValue(this.startValue)}},e.prototype.clear=function(){this.isActive=!1,this.value="",this.enableChangeUpdate&&this.updateQuery(null)},e.prototype.reset=function(){this.value="",this.updateQuery(null)},e.prototype.onChangedHandler=function(e){this.value=e.target.value,this.isActive=!!this.value,this.enableChangeUpdate&&this.updateQuery(this.value)},e.prototype.updateQuery=function(e){this.displayValue$.next(e),this.context&&this.settings&&this.settings.field&&(this.context.queryFragments[this.id]=e?this.settings.field+":'"+this.getSearchPrefix()+e+this.getSearchSuffix()+"'":"",this.context.update())},e.prototype.submitValues=function(){this.updateQuery(this.value)},e.prototype.hasValidValue=function(){return!!this.value},e.prototype.getCurrentValue=function(){return this.value},e.prototype.setValue=function(e){this.value=e,this.displayValue$.next(this.value),this.submitValues()},e.prototype.getSearchPrefix=function(){return this.settings.searchPrefix?this.settings.searchPrefix:""},e.prototype.getSearchSuffix=function(){return this.settings.searchSuffix?this.settings.searchSuffix:""},e}();ht.decorators=[{type:n.Component,args:[{selector:"adf-search-text",template:'<mat-form-field>\n    <input\n        matInput\n        placeholder="{{ settings?.placeholder | translate }}"\n        [(ngModel)]="value"\n        (change)="onChangedHandler($event)">\n    <button mat-button *ngIf="value" matSuffix mat-icon-button (click)="clear()">\n        <mat-icon>close</mat-icon>\n    </button>\n</mat-form-field>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-text"},styles:[".adf-search-text .mat-form-field{max-width:168px;width:100%}"]}]}],ht.propDecorators={value:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ft=function(){function e(e,t){void 0===e&&(e=[]),this.filteredItems=[],this._filterText="",this.items=[],this.pageSize=5,this.currentPageSize=5,this._filter=function(){return!0},this.items=e,this.filteredItems=e,this.pageSize=t||5,this.currentPageSize=t||5}return Object.defineProperty(e.prototype,"filterText",{get:function(){return this._filterText},set:function(e){this._filterText=e,this.applyFilter()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},set:function(e){this._filter=e,this.applyFilter()},enumerable:!1,configurable:!0}),e.prototype.applyFilter=function(){this.filter?this.filteredItems=this.items.filter(this.filter):this.filteredItems=this.items,this.currentPageSize=this.pageSize},Object.defineProperty(e.prototype,"visibleItems",{get:function(){return this.filteredItems.slice(0,this.currentPageSize)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canShowMoreItems",{get:function(){return this.filteredItems.length>this.currentPageSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canShowLessItems",{get:function(){return this.currentPageSize>this.pageSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fitsPage",{get:function(){return this.pageSize>=this.filteredItems.length},enumerable:!1,configurable:!0}),e.prototype.showMoreItems=function(){this.canShowMoreItems&&(this.currentPageSize+=this.pageSize)},e.prototype.showLessItems=function(){this.canShowLessItems&&(this.currentPageSize-=this.pageSize)},e.prototype.clear=function(){this.currentPageSize=this.pageSize,this.items=[],this.filteredItems=[],this.filterText=""},e.prototype.addItem=function(e){e&&(this.items.push(e),this.applyFilter())},e.prototype.deleteItem=function(e){var t=this.items.indexOf(e);t>-1&&(this.items.splice(t,1),this.filteredItems.splice(t,1))},e.prototype[Symbol.iterator]=function(){var e=0,t=this.visibleItems;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0,value:null}}}},e}(),mt=function(){function e(){this.pageSize=5,this.isActive=!1,this.displayValue$=new T.Subject,this.options=new ft}return e.prototype.ngOnInit=function(){var e;this.settings&&(this.pageSize=this.settings.pageSize||5,this.settings.options&&this.settings.options.length>0&&(this.options=new ft(this.settings.options,this.pageSize)));var t=this.getSelectedValue();(null!==t||null!==this.startValue)&&(this.value=t,this.context.queryFragments[this.id]=t),this.enableChangeUpdate=null===(e=this.settings.allowUpdateOnChange)||void 0===e||e,this.updateDisplayValue()},e.prototype.getSelectedValue=function(){var e=this.settings.options||[];if(e&&e.length>0){this.isActive=!0;var t=e.find((function(e){return e.default}));return t||(t=e[0]),t.value}return null},e.prototype.submitValues=function(){this.setValue(this.value),this.updateDisplayValue(),this.context.update()},e.prototype.hasValidValue=function(){return!!this.getSelectedValue()},e.prototype.setValue=function(e){this.value=e,this.context.queryFragments[this.id]=e,this.enableChangeUpdate&&(this.updateDisplayValue(),this.context.update())},e.prototype.getCurrentValue=function(){return this.getSelectedValue()},e.prototype.updateDisplayValue=function(){var e=this,t=this.options.items.find((function(t){return t.value===e.value}));t?this.displayValue$.next(t.name):this.displayValue$.next("")},e.prototype.changeHandler=function(e){this.setValue(e.value)},e.prototype.clear=function(){this.isActive=!1;var e=this.getSelectedValue();null!==e&&this.setValue(e)},e.prototype.reset=function(){var e=this.getSelectedValue();null!==e&&(this.setValue(e),this.updateDisplayValue(),this.context.update())},e}();mt.decorators=[{type:n.Component,args:[{selector:"adf-search-radio",template:'<mat-radio-group\n    [(ngModel)]="value"\n    (change)="changeHandler($event)">\n    <mat-radio-button [attr.data-automation-id]="\'search-radio-\'+(option.name | translate)"\n        *ngFor="let option of options"\n        [value]="option.value"\n        class="adf-facet-filter">\n        <div\n            matTooltip="{{ option.name | translate }}"\n            matTooltipPosition="right"\n            class="filter-label">\n            {{ option.name | translate }}\n        </div>\n    </mat-radio-button>\n</mat-radio-group>\n\n<div class="adf-facet-buttons" *ngIf="!options.fitsPage">\n    <button mat-icon-button\n        *ngIf="options.canShowLessItems"\n        title="{{ \'SEARCH.FILTER.ACTIONS.SHOW-LESS\' | translate }}"\n        (click)="options.showLessItems()">\n        <mat-icon>keyboard_arrow_up</mat-icon>\n    </button>\n    <button mat-icon-button\n        *ngIf="options.canShowMoreItems"\n        title="{{ \'SEARCH.FILTER.ACTIONS.SHOW-MORE\' | translate }}"\n        (click)="options.showMoreItems()">\n        <mat-icon>keyboard_arrow_down</mat-icon>\n    </button>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-radio"},styles:[".adf-search-radio .mat-radio-group{display:flex;flex-direction:column}.adf-search-radio .mat-radio-button{margin:5px}.adf-search-radio .adf-facet-filter .mat-radio-label-content{overflow:hidden;text-overflow:ellipsis;width:100%}.adf-search-radio .adf-facet-filter .mat-radio-label{width:100%}.adf-search-radio .adf-facet-filter .adf-filter-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}]}],mt.ctorParameters=function(){return[]},mt.propDecorators={value:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var gt=function(){function e(){this.thumbLabel=!1,this.displayValue$=new T.Subject}return e.prototype.ngOnInit=function(){var e;this.settings&&(this.settings.hasOwnProperty("min")&&(this.min=this.settings.min),this.settings.hasOwnProperty("max")&&(this.max=this.settings.max),this.settings.hasOwnProperty("step")&&(this.step=this.settings.step),this.thumbLabel=!!this.settings.thumbLabel,this.enableChangeUpdate=null===(e=this.settings.allowUpdateOnChange)||void 0===e||e),this.startValue&&this.setValue(this.startValue)},e.prototype.clear=function(){this.value=this.min||0,this.enableChangeUpdate&&this.updateQuery(null)},e.prototype.reset=function(){this.value=this.min||0,this.updateQuery(null)},e.prototype.onChangedHandler=function(e){this.value=e.value,this.enableChangeUpdate&&this.updateQuery(this.value)},e.prototype.submitValues=function(){this.updateQuery(this.value)},e.prototype.hasValidValue=function(){return!!this.value},e.prototype.getCurrentValue=function(){return this.value},e.prototype.setValue=function(e){this.value=e,this.submitValues()},e.prototype.updateQuery=function(e){var t;this.displayValue$.next(this.value?this.value+" "+(null!==(t=this.settings.unit)&&void 0!==t?t:""):""),this.id&&this.context&&this.settings&&this.settings.field&&(this.context.queryFragments[this.id]=null===e?"":this.settings.field+":[0 TO "+e+"]",this.context.update())},e}();gt.decorators=[{type:n.Component,args:[{selector:"adf-search-slider",template:'<mat-slider\n    [(value)]="value"\n    [min]="min"\n    [max]="max"\n    [step]="step"\n    [thumbLabel]="thumbLabel"\n    (change)="onChangedHandler($event)"\n    data-automation-id="slider-range">\n</mat-slider>\n\n<div class="adf-facet-buttons" *ngIf="!settings?.hideDefaultAction">\n    <button mat-button color="primary" (click)="clear()" data-automation-id="slider-btn-clear">\n        {{ \'SEARCH.FILTER.ACTIONS.CLEAR\' | translate }}\n    </button>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-slider"},styles:[".adf-search-slider .mat-slider{width:100%}"]}]}],gt.propDecorators={value:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var yt=function(){function e(){}return e.prototype.isErrorState=function(e,t){var n=t&&t.submitted;return!!(e&&e.invalid&&(e.dirty||e.touched||!e.pristine&&n))},e}(),vt=function(){function e(){this.matcher=new yt,this.format="[{FROM} TO {TO}]",this.isActive=!1,this.displayValue$=new T.Subject}return e.prototype.ngOnInit=function(){var e,t;this.settings&&(this.field=this.settings.field,this.format=this.settings.format||"[{FROM} TO {TO}]"),this.validators=D.Validators.compose([D.Validators.required,D.Validators.pattern(/^-?(0|[1-9]\d*)?$/),D.Validators.min(0)]),this.startValue?(this.from=new D.FormControl(this.startValue.from,this.validators),this.to=new D.FormControl(this.startValue.to,this.validators)):(this.from=new D.FormControl("",this.validators),this.to=new D.FormControl("",this.validators)),this.form=new D.FormGroup({from:this.from,to:this.to},this.formValidator),this.enableChangeUpdate=null===(t=null===(e=this.settings)||void 0===e?void 0:e.allowUpdateOnChange)||void 0===t||t,this.updateDisplayValue()},e.prototype.formValidator=function(e){return parseInt(e.get("from").value,10)<parseInt(e.get("to").value,10)?null:{mismatch:!0}},e.prototype.apply=function(e,t){if(t&&this.id&&this.context&&this.field){this.updateDisplayValue(),this.isActive=!0;var n=new Map;n.set("FROM",e.from),n.set("TO",e.to);var i=this.formatString(this.format,n);this.context.queryFragments[this.id]=this.field+":"+i,this.context.update()}},e.prototype.formatString=function(e,t){var n=e;return t.forEach((function(e,t){var i=new RegExp("{"+t+"}","gm");n=n.replace(i,e)})),n},e.prototype.submitValues=function(){this.apply(this.form.value,this.form.valid)},e.prototype.hasValidValue=function(){return this.form.valid},e.prototype.getCurrentValue=function(){return this.form.value},e.prototype.updateDisplayValue=function(){var e;this.form.invalid||this.form.pristine?this.displayValue$.next(""):this.displayValue$.next(this.form.value.from+" - "+this.form.value.to+" "+(null!==(e=this.settings.unit)&&void 0!==e?e:""))},e.prototype.setValue=function(e){this.form.from.setValue(e),this.form.to.setValue(e),this.updateDisplayValue()},e.prototype.clear=function(){this.isActive=!1,this.form.reset({from:"",to:""}),this.id&&this.context&&(this.context.queryFragments[this.id]="",this.updateDisplayValue(),this.enableChangeUpdate&&this.context.update())},e.prototype.reset=function(){this.clear(),this.id&&this.context&&this.context.update()},e}();
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */vt.decorators=[{type:n.Component,args:[{selector:"adf-search-number-range",template:'<form [formGroup]="form" novalidate (ngSubmit)="apply(form.value, form.valid)">\n\n    <mat-form-field>\n        <input\n            matInput [formControl]="from" [errorStateMatcher]="matcher"\n            placeholder="{{ \'SEARCH.FILTER.RANGE.FROM\' | translate }}"\n            autocomplete="off"\n            data-automation-id="number-range-from-input">\n        <mat-error *ngIf="from.hasError(\'pattern\') || from.hasError(\'min\')" data-automation-id="number-range-from-error-invalid">\n            {{ \'SEARCH.FILTER.VALIDATION.INVALID-FORMAT\' | translate }}\n        </mat-error>\n        <mat-error *ngIf="from.hasError(\'required\')" data-automation-id="number-range-from-error-required">\n            {{ \'SEARCH.FILTER.VALIDATION.REQUIRED-VALUE\' | translate }}\n        </mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n        <input\n            matInput [formControl]="to" [errorStateMatcher]="matcher"\n            placeholder="{{ \'SEARCH.FILTER.RANGE.TO\' | translate }}"\n            autocomplete="off"\n            data-automation-id="number-range-to-input">\n        <mat-error *ngIf="to.hasError(\'pattern\') || to.hasError(\'min\')" data-automation-id="number-range-to-error-invalid">\n            {{ \'SEARCH.FILTER.VALIDATION.INVALID-FORMAT\' | translate }}\n        </mat-error>\n        <mat-error *ngIf="to.hasError(\'required\')" data-automation-id="number-range-to-error-required">\n            {{ \'SEARCH.FILTER.VALIDATION.REQUIRED-VALUE\' | translate }}\n        </mat-error>\n    </mat-form-field>\n\n\n    <div class="adf-facet-buttons" *ngIf="!settings?.hideDefaultAction">\n        <button mat-button color="primary" type="button" (click)="clear()" data-automation-id="number-range-btn-clear">\n            {{ \'SEARCH.FILTER.ACTIONS.CLEAR\' | translate }}\n        </button>\n        <button mat-button color="primary" type="submit" [disabled]="!form.valid" data-automation-id="number-range-btn-apply">\n            {{ \'SEARCH.FILTER.ACTIONS.APPLY\' | translate }}\n        </button>\n    </div>\n</form>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-number-range"},styles:[".adf-search-number-range>form{display:inline-flex;flex-direction:column;width:100%}"]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var bt=function(){function e(e){this.translationService=e,this.operator="OR",this.startValue=null,this.pageSize=5,this.isActive=!1,this.enableChangeUpdate=!0,this.displayValue$=new T.Subject,this.options=new ft}return e.prototype.ngOnInit=function(){var e;this.settings&&(this.operator=this.settings.operator||"OR",this.pageSize=this.settings.pageSize||5,this.settings.options&&this.settings.options.length>0&&(this.options=new ft(this.settings.options,this.pageSize)),this.enableChangeUpdate=null===(e=this.settings.allowUpdateOnChange)||void 0===e||e),this.startValue&&this.setValue(this.startValue)},e.prototype.clear=function(){this.isActive=!1,this.clearOptions(),this.id&&this.context&&this.enableChangeUpdate&&(this.updateDisplayValue(),this.context.update())},e.prototype.clearOptions=function(){this.options.items.forEach((function(e){e.checked=!1})),this.id&&this.context&&(this.context.queryFragments[this.id]="")},e.prototype.reset=function(){this.isActive=!1,this.clearOptions(),this.id&&this.context&&(this.updateDisplayValue(),this.context.update())},e.prototype.updateDisplayValue=function(){var e=this,t=this.options.items.filter((function(e){return e.checked})).map((function(t){var n=t.name;return e.translationService.instant(n)})).join(", ");this.displayValue$.next(t)},e.prototype.changeHandler=function(e,t){t.checked=e.checked;var n=this.getCheckedValues();this.isActive=!!n.length,this.enableChangeUpdate&&this.submitValues()},e.prototype.hasValidValue=function(){return!!this.getCheckedValues().length},e.prototype.getCurrentValue=function(){return this.getCheckedValues()},e.prototype.setValue=function(e){this.options.items.filter((function(t){return e.includes(t.value)})).map((function(e){return e.checked=!0})),this.submitValues()},e.prototype.getCheckedValues=function(){return this.options.items.filter((function(e){return e.checked})).map((function(e){return e.value}))},e.prototype.submitValues=function(){var e=this.getCheckedValues().join(" "+this.operator+" ");this.id&&this.context&&(this.context.queryFragments[this.id]=e,this.updateDisplayValue(),this.context.update())},e}();bt.decorators=[{type:n.Component,args:[{selector:"adf-search-check-list",template:'<div class="checklist">\n    <mat-checkbox\n        *ngFor="let option of options"\n        [checked]="option.checked"\n        (keydown.enter)="option.checked = !option.checked"\n        [attr.data-automation-id]="\'checkbox-\' + (option.name)"\n        (change)="changeHandler($event, option)"\n        class="adf-facet-filter">\n        <div matTooltip="{{ option.name | translate }}"\n            matTooltipPosition="right"\n            class="facet-name">\n            {{ option.name | translate }}\n        </div>\n\n    </mat-checkbox>\n</div>\n\n<div class="adf-facet-buttons" *ngIf="options.fitsPage && !settings?.hideDefaultAction">\n    <button mat-button color="primary" (click)="clear()">\n        {{ \'SEARCH.FILTER.ACTIONS.CLEAR-ALL\' | translate }}\n    </button>\n</div>\n\n<div class="adf-facet-buttons" *ngIf="!options.fitsPage">\n    <button mat-icon-button\n        title="{{ \'SEARCH.FILTER.ACTIONS.CLEAR-ALL\' | translate }}"\n        (click)="clear()">\n        <mat-icon>clear</mat-icon>\n    </button>\n    <button mat-icon-button\n        *ngIf="options.canShowLessItems"\n        title="{{ \'SEARCH.FILTER.ACTIONS.SHOW-LESS\' | translate }}"\n        (click)="options.showLessItems()">\n        <mat-icon>keyboard_arrow_up</mat-icon>\n    </button>\n    <button mat-icon-button\n        *ngIf="options.canShowMoreItems"\n        title="{{ \'SEARCH.FILTER.ACTIONS.SHOW-MORE\' | translate }}"\n        (click)="options.showMoreItems()">\n        <mat-icon>keyboard_arrow_down</mat-icon>\n    </button>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-check-list"},styles:[".adf-search-check-list{display:flex;flex-direction:column}.adf-search-check-list .adf-facet-filter .mat-checkbox-label{overflow:hidden;text-overflow:ellipsis;width:100%}.adf-search-check-list .adf-facet-filter .mat-checkbox-layout{width:100%}.adf-search-check-list .adf-facet-filter .adf-facet-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}]}],bt.ctorParameters=function(){return[{type:C.TranslationService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var St=C.MOMENT_DATE_FORMATS,It=function(){function e(e,t){this.dateAdapter=e,this.userPreferencesService=t,this.matcher=new yt,this.isActive=!1,this.displayValue$=new T.Subject,this.onDestroy$=new T.Subject}return e.prototype.getFromValidationMessage=function(){return this.from.hasError("invalidOnChange")||this.hasParseError(this.from)?"SEARCH.FILTER.VALIDATION.INVALID-DATE":this.from.hasError("matDatepickerMax")?"SEARCH.FILTER.VALIDATION.BEYOND-MAX-DATE":this.from.hasError("required")?"SEARCH.FILTER.VALIDATION.REQUIRED-VALUE":""},e.prototype.getToValidationMessage=function(){return this.to.hasError("invalidOnChange")||this.hasParseError(this.to)?"SEARCH.FILTER.VALIDATION.INVALID-DATE":this.to.hasError("matDatepickerMin")?"SEARCH.FILTER.VALIDATION.NO-DAYS":this.to.hasError("matDatepickerMax")?"SEARCH.FILTER.VALIDATION.BEYOND-MAX-DATE":this.to.hasError("required")?"SEARCH.FILTER.VALIDATION.REQUIRED-VALUE":""},e.prototype.ngOnInit=function(){var e,t,n,i=this;this.datePickerFormat=(null===(e=this.settings)||void 0===e?void 0:e.dateFormat)?this.settings.dateFormat:"DD/MM/YYYY",this.dateAdapter.overrideDisplayFormat=this.datePickerFormat,this.userPreferencesService.select(C.UserPreferenceValues.Locale).pipe(O.takeUntil(this.onDestroy$)).subscribe((function(e){return i.setLocale(e)}));var o=D.Validators.compose([D.Validators.required]);if(this.settings&&this.settings.maxDate&&("today"===this.settings.maxDate?this.maxDate=this.dateAdapter.today().endOf("day"):this.maxDate=moment(this.settings.maxDate).endOf("day")),this.startValue){var r=this.startValue.split("||"),a=this.dateAdapter.parse(r[0],this.datePickerFormat),s=this.dateAdapter.parse(r[1],this.datePickerFormat);this.from=new D.FormControl(a,o),this.to=new D.FormControl(s,o)}else this.from=new D.FormControl("",o),this.to=new D.FormControl("",o);this.form=new D.FormGroup({from:this.from,to:this.to}),this.setFromMaxDate(),this.enableChangeUpdate=null===(n=null===(t=this.settings)||void 0===t?void 0:t.allowUpdateOnChange)||void 0===n||n},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.apply=function(e,t){if(t&&this.id&&this.context&&this.settings&&this.settings.field){this.isActive=!0;var n=moment(e.from).startOf("day").format(),i=moment(e.to).endOf("day").format();this.context.queryFragments[this.id]=this.settings.field+":['"+n+"' TO '"+i+"']",this.updateDisplayValue(),this.context.update()}},e.prototype.submitValues=function(){this.apply(this.form.value,this.form.valid)},e.prototype.hasValidValue=function(){return this.form.valid},e.prototype.getCurrentValue=function(){return{from:this.dateAdapter.format(this.form.value.from,this.datePickerFormat),to:this.dateAdapter.format(this.form.value.from,this.datePickerFormat)}},e.prototype.updateDisplayValue=function(){this.form.invalid||this.form.pristine?this.displayValue$.next(""):this.displayValue$.next(this.dateAdapter.format(this.form.value.from,this.datePickerFormat)+" - "+this.dateAdapter.format(this.form.value.to,this.datePickerFormat))},e.prototype.setValue=function(e){var t=e.split("||"),n=this.dateAdapter.parse(t[0],this.datePickerFormat),i=this.dateAdapter.parse(t[1],this.datePickerFormat);this.from.setValue(n),this.from.markAsDirty(),this.from.markAsTouched(),this.to.setValue(i),this.to.markAsDirty(),this.to.markAsTouched(),this.submitValues()},e.prototype.clear=function(){this.isActive=!1,this.form.reset({from:"",to:""}),this.id&&this.context&&(this.context.queryFragments[this.id]="",this.enableChangeUpdate&&this.updateQuery()),this.setFromMaxDate()},e.prototype.reset=function(){this.clear(),this.updateQuery()},e.prototype.updateQuery=function(){this.id&&this.context&&(this.updateDisplayValue(),this.context.update())},e.prototype.onChangedHandler=function(e,t){var n=e.value,i=this.dateAdapter.parse(n,this.datePickerFormat);i&&i.isValid()?t.setValue(i):i&&t.setErrors({invalidOnChange:!0}),this.setFromMaxDate()},e.prototype.setLocale=function(e){this.dateAdapter.setLocale(e),moment.locale(e)},e.prototype.hasParseError=function(e){return e.hasError("matDatepickerParse")&&e.getError("matDatepickerParse").text},e.prototype.forcePlaceholder=function(e){e.srcElement.click()},e.prototype.setFromMaxDate=function(){this.fromMaxDate=!this.to.value||this.maxDate&&moment(this.maxDate).isBefore(this.to.value)?this.maxDate:moment(this.to.value)},e}();It.decorators=[{type:n.Component,args:[{selector:"adf-search-date-range",template:'<form [formGroup]="form" novalidate (ngSubmit)="apply(form.value, form.valid)">\n    <mat-form-field>\n        <input matInput\n                (input)="forcePlaceholder($event)"\n                [formControl]="from"\n                [errorStateMatcher]="matcher"\n                placeholder="{{ \'SEARCH.FILTER.RANGE.FROM-DATE\' | translate }}"\n                [matDatepicker]="fromDatepicker"\n                [max]="fromMaxDate"\n                (dateChange)="onChangedHandler($event, from)"\n                data-automation-id="date-range-from-input">\n        <mat-datepicker-toggle matSuffix [for]="fromDatepicker" data-automation-id="date-range-from-date-toggle"></mat-datepicker-toggle>\n        <mat-datepicker #fromDatepicker color="accent"></mat-datepicker>\n        <mat-error *ngIf="from.invalid" data-automation-id="date-range-from-error">\n            {{ getFromValidationMessage() | translate: { requiredFormat: datePickerFormat } }}\n        </mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n        <input matInput\n                (input)="forcePlaceholder($event)"\n                [formControl]="to"\n                [errorStateMatcher]="matcher"\n                placeholder="{{ \'SEARCH.FILTER.RANGE.TO-DATE\' | translate }}"\n                [matDatepicker]="toDatepicker"\n                [min]="from.value"\n                [max]="maxDate"\n                (dateChange)="onChangedHandler($event, to)"\n                data-automation-id="date-range-to-input">\n        <mat-datepicker-toggle matSuffix [for]="toDatepicker" data-automation-id="date-range-to-date-toggle"></mat-datepicker-toggle>\n        <mat-datepicker #toDatepicker color="accent"></mat-datepicker>\n        <mat-error *ngIf="to.invalid" data-automation-id="date-range-to-error">\n            {{ getToValidationMessage() | translate: { requiredFormat: datePickerFormat } }}\n        </mat-error>\n    </mat-form-field>\n\n    <div class="adf-facet-buttons adf-facet-buttons--topSpace" *ngIf="!settings?.hideDefaultAction">\n        <button mat-button color="primary" type="button" (click)="clear()" data-automation-id="date-range-clear-btn">\n            {{ \'SEARCH.FILTER.ACTIONS.CLEAR\' | translate }}\n        </button>\n        <button mat-button color="primary" type="submit" [disabled]="!form.valid" data-automation-id="date-range-apply-btn">\n            {{ \'SEARCH.FILTER.ACTIONS.APPLY\' | translate }}\n        </button>\n    </div>\n</form>\n',providers:[{provide:s.DateAdapter,useClass:C.MomentDateAdapter,deps:[s.MAT_DATE_LOCALE]},{provide:s.MAT_DATE_FORMATS,useValue:St}],encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-date-range"},styles:[".adf-search-date-range>form{display:inline-flex;flex-direction:column;width:100%}"]}]}],It.ctorParameters=function(){return[{type:s.DateAdapter},{type:C.UserPreferencesService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var At=F.MAT_MOMENT_DATETIME_FORMATS,Et=function(){function e(e,t){this.dateAdapter=e,this.userPreferencesService=t,this.matcher=new yt,this.isActive=!1,this.displayValue$=new T.Subject,this.onDestroy$=new T.Subject}return e.prototype.getFromValidationMessage=function(){return this.from.hasError("invalidOnChange")||this.hasParseError(this.from)?"SEARCH.FILTER.VALIDATION.INVALID-DATETIME":this.from.hasError("matDatepickerMax")?"SEARCH.FILTER.VALIDATION.BEYOND-MAX-DATETIME":this.from.hasError("required")?"SEARCH.FILTER.VALIDATION.REQUIRED-VALUE":""},e.prototype.getToValidationMessage=function(){return this.to.hasError("invalidOnChange")||this.hasParseError(this.to)?"SEARCH.FILTER.VALIDATION.INVALID-DATETIME":this.to.hasError("matDatepickerMin")?"SEARCH.FILTER.VALIDATION.NO-DAYS":this.to.hasError("matDatepickerMax")?"SEARCH.FILTER.VALIDATION.BEYOND-MAX-DATETIME":this.to.hasError("required")?"SEARCH.FILTER.VALIDATION.REQUIRED-VALUE":""},e.prototype.ngOnInit=function(){var e,t,n,i=this;this.datetimePickerFormat=(null===(e=this.settings)||void 0===e?void 0:e.datetimeFormat)?this.settings.datetimeFormat:"DD/MM/YYYY HH:mm",this.userPreferencesService.select(C.UserPreferenceValues.Locale).pipe(O.takeUntil(this.onDestroy$)).subscribe((function(e){return i.setLocale(e)}));var o=D.Validators.compose([D.Validators.required]);if(this.settings&&this.settings.maxDatetime&&(this.maxDatetime=moment(this.settings.maxDatetime)),this.startValue){var r=this.startValue.split("||"),a=this.dateAdapter.parse(r[0],this.datetimePickerFormat),s=this.dateAdapter.parse(r[1],this.datetimePickerFormat);this.from=new D.FormControl(a,o),this.to=new D.FormControl(s,o)}else this.from=new D.FormControl("",o),this.to=new D.FormControl("",o);this.form=new D.FormGroup({from:this.from,to:this.to}),this.setFromMaxDatetime(),this.enableChangeUpdate=null===(n=null===(t=this.settings)||void 0===t?void 0:t.allowUpdateOnChange)||void 0===n||n},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.apply=function(e,t){if(t&&this.id&&this.context&&this.settings&&this.settings.field){this.isActive=!0;var n=moment.utc(e.from).startOf("minute").format(),i=moment.utc(e.to).endOf("minute").format();this.context.queryFragments[this.id]=this.settings.field+":['"+n+"' TO '"+i+"']",this.updateDisplayValue(),this.context.update()}},e.prototype.submitValues=function(){this.apply(this.form.value,this.form.valid)},e.prototype.hasValidValue=function(){return this.form.valid},e.prototype.getCurrentValue=function(){return{from:this.dateAdapter.format(this.form.value.from,this.datetimePickerFormat),to:this.dateAdapter.format(this.form.value.to,this.datetimePickerFormat)}},e.prototype.updateDisplayValue=function(){this.form.invalid||this.form.pristine?this.displayValue$.next(""):this.displayValue$.next(this.dateAdapter.format(this.form.value.from,this.datetimePickerFormat)+" - "+this.dateAdapter.format(this.form.value.to,this.datetimePickerFormat))},e.prototype.setValue=function(e){var t=e.split("||"),n=this.dateAdapter.parse(t[0],this.datetimePickerFormat),i=this.dateAdapter.parse(t[1],this.datetimePickerFormat);this.from.setValue(n),this.from.markAsDirty(),this.from.markAsTouched(),this.to.setValue(i),this.to.markAsDirty(),this.to.markAsTouched(),this.submitValues()},e.prototype.clear=function(){this.isActive=!1,this.form.reset({from:"",to:""}),this.id&&this.context&&(this.context.queryFragments[this.id]=""),this.id&&this.context&&this.enableChangeUpdate&&this.updateQuery(),this.setFromMaxDatetime()},e.prototype.reset=function(){this.clear(),this.updateQuery()},e.prototype.updateQuery=function(){this.id&&this.context&&(this.updateDisplayValue(),this.context.update())},e.prototype.onChangedHandler=function(e,t){var n=e.value,i=this.dateAdapter.parse(n,this.datetimePickerFormat);i&&i.isValid()?t.setValue(i):i&&t.setErrors({invalidOnChange:!0}),this.setFromMaxDatetime()},e.prototype.setLocale=function(e){this.dateAdapter.setLocale(e),moment.locale(e)},e.prototype.hasParseError=function(e){return e.hasError("matDatepickerParse")&&e.getError("matDatepickerParse").text},e.prototype.forcePlaceholder=function(e){e.srcElement.click()},e.prototype.setFromMaxDatetime=function(){this.fromMaxDatetime=!this.to.value||this.maxDatetime&&moment(this.maxDatetime).isBefore(this.to.value)?this.maxDatetime:moment(this.to.value)},e}();Et.decorators=[{type:n.Component,args:[{selector:"adf-search-datetime-range",template:'<form [formGroup]="form" novalidate (ngSubmit)="apply(form.value, form.valid)">\n    <mat-form-field>\n        <input matInput\n                (input)="forcePlaceholder($event)"\n                [formControl]="from"\n                [errorStateMatcher]="matcher"\n                placeholder="{{ \'SEARCH.FILTER.RANGE.FROM-DATE\' | translate }}"\n                [matDatetimepicker]="fromDatetimePicker"\n                [max]="fromMaxDatetime"\n                (dateChange)="onChangedHandler($event, from)"\n                data-automation-id="datetime-range-from-input">\n        <mat-datetimepicker-toggle matSuffix [for]="fromDatetimePicker" data-automation-id="datetime-range-from-date-toggle"></mat-datetimepicker-toggle>\n        <mat-datetimepicker #fromDatetimePicker color="accent" type="datetime"></mat-datetimepicker>\n        <mat-error *ngIf="from.invalid" data-automation-id="datetime-range-from-error">\n            {{ getFromValidationMessage() | translate: { requiredFormat: datetimePickerFormat } }}\n        </mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n        <input matInput\n                (input)="forcePlaceholder($event)"\n                [formControl]="to"\n                [errorStateMatcher]="matcher"\n                placeholder="{{ \'SEARCH.FILTER.RANGE.TO-DATE\' | translate }}"\n                [matDatetimepicker]="toDatetimePicker"\n                [min]="from.value"\n                [max]="maxDatetime"\n                (dateChange)="onChangedHandler($event, to)"\n                data-automation-id="datetime-range-to-input">\n        <mat-datetimepicker-toggle matSuffix [for]="toDatetimePicker" data-automation-id="datetime-range-to-date-toggle"></mat-datetimepicker-toggle>\n        <mat-datetimepicker #toDatetimePicker color="accent" type="datetime"></mat-datetimepicker>\n        <mat-error *ngIf="to.invalid" data-automation-id="datetime-range-to-error">\n            {{ getToValidationMessage() | translate: { requiredFormat: datetimePickerFormat } }}\n        </mat-error>\n    </mat-form-field>\n\n    <div class="adf-facet-buttons adf-facet-buttons--topSpace" *ngIf="!settings?.hideDefaultAction">\n        <button mat-button color="primary" type="button" (click)="clear()" data-automation-id="datetime-range-clear-btn">\n            {{ \'SEARCH.FILTER.ACTIONS.CLEAR\' | translate }}\n        </button>\n        <button mat-button color="primary" type="submit" [disabled]="!form.valid" data-automation-id="datetime-range-apply-btn">\n            {{ \'SEARCH.FILTER.ACTIONS.APPLY\' | translate }}\n        </button>\n    </div>\n</form>\n',providers:[{provide:R.MAT_DATETIME_FORMATS,useValue:At}],encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-date-range"},styles:[".adf-search-date-range>form{display:inline-flex;flex-direction:column;width:100%}"]}]}],Et.ctorParameters=function(){return[{type:R.DatetimeAdapter},{type:C.UserPreferencesService}]};var Ct=function(){this.widgets={text:ht,radio:mt,slider:gt,"number-range":vt,"check-list":bt,"date-range":It,"datetime-range":Et}};Ct.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Ct},token:Ct,providedIn:"root"}),Ct.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Tt=function(){function e(e,t,n){this.searchFilterService=e,this.queryBuilder=t,this.componentFactoryResolver=n}return e.prototype.ngOnInit=function(){var e=this.searchFilterService.widgets[this.selector];if(e){var t=this.componentFactoryResolver.resolveComponentFactory(e);t&&(this.content.clear(),this.componentRef=this.content.createComponent(t,0),this.setupWidget(this.componentRef))}},e.prototype.ngOnChanges=function(e){var t,n;(null===(t=e.value)||void 0===t?void 0:t.currentValue)&&(null===(n=this.componentRef)||void 0===n?void 0:n.instance)&&(this.componentRef.instance.isActive=!0,this.componentRef.instance.setValue(e.value.currentValue))},e.prototype.setupWidget=function(e){e&&e.instance&&(e.instance.id=this.id,e.instance.settings=Object.assign({},this.settings),e.instance.context=this.queryBuilder,this.value&&(e.instance.isActive=!0,e.instance.startValue=this.value))},e.prototype.ngOnDestroy=function(){this.componentRef&&(this.componentRef.destroy(),this.componentRef=null)},e.prototype.applyInnerWidget=function(){this.componentRef.instance.submitValues()},e.prototype.setValue=function(e){this.componentRef.instance.isActive=!0,this.componentRef.instance.setValue(e)},e.prototype.hasValueSelected=function(){return this.componentRef.instance.hasValidValue()},e.prototype.getCurrentValue=function(){return this.componentRef.instance.getCurrentValue()},e.prototype.getDisplayValue=function(){var e;return(null===(e=this.componentRef)||void 0===e?void 0:e.instance)?this.componentRef.instance.displayValue$:null},e.prototype.resetInnerWidget=function(){this.componentRef&&this.componentRef.instance&&this.componentRef.instance.reset()},e}();Tt.decorators=[{type:n.Component,args:[{selector:"adf-search-widget-container",template:"<div #content></div>"}]}],Tt.ctorParameters=function(){return[{type:Ct},{type:Ve,decorators:[{type:n.Inject,args:[_e]}]},{type:n.ComponentFactoryResolver}]},Tt.propDecorators={content:[{type:n.ViewChild,args:["content",{read:n.ViewContainerRef,static:!0}]}],id:[{type:n.Input}],selector:[{type:n.Input}],settings:[{type:n.Input}],config:[{type:n.Input}],value:[{type:n.Input}]};var wt=function(e){function t(t,n){return e.call(this,t,n)||this}return G(t,e),t.prototype.isFilterServiceActive=function(){return!1},t.prototype.loadConfiguration=function(){return this.appConfig.get("search")},t}(Ve);wt.decorators=[{type:n.Injectable}],wt.ctorParameters=function(){return[{type:C.AppConfigService},{type:C.AlfrescoApiService}]};var Ot=function(){function e(e,t,n){var i=this;this.queryBuilder=e,this.searchService=t,this.translationService=n,this.responseFacets=null,this.selectedBuckets=[],this.DEFAULT_PAGE_SIZE=5,this.facetQueriesPageSize=this.DEFAULT_PAGE_SIZE,this.onDestroy$=new T.Subject,e.config&&e.config.facetQueries&&(this.facetQueriesPageSize=e.config.facetQueries.pageSize||this.DEFAULT_PAGE_SIZE),this.queryBuilder.configUpdated.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){i.selectedBuckets=[],i.responseFacets=null})),this.queryBuilder.updated.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(e){return i.queryBuilder.execute(e)})),this.queryBuilder.executed.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(e){i.onDataLoaded(e),i.searchService.dataLoaded.next(e)}))}return e.prototype.onDataLoaded=function(e){var t=e.list.context;t?this.parseFacets(t):this.responseFacets=null},e.prototype.parseFacets=function(e){this.parseFacetFields(e),this.parseFacetIntervals(e),this.parseFacetQueries(e)},e.prototype.parseFacetItems=function(e,t,n){var i=this;t.forEach((function(t){var o=i.findFacet(e,n,t.label),r=i.getResponseBuckets(o,t).filter(i.getFilterByMinCount(t.mincount)),a=i.findResponseFacet(n,t.label);if(a){var s=a.buckets&&a.buckets.items||[];i.updateExistingBuckets(o,r,a,s)}else if(o&&r.length>0){var l=new ft(r,t.pageSize);l.filter=i.getBucketFilterFunction(l),i.responseFacets||(i.responseFacets=[]),i.responseFacets.push(Object.assign(Object.assign({},t),{type:o.type||n,label:t.label,pageSize:t.pageSize|i.DEFAULT_PAGE_SIZE,currentPageSize:t.pageSize|i.DEFAULT_PAGE_SIZE,buckets:l}))}}))},e.prototype.parseFacetFields=function(e){var t=this.queryBuilder.config.facetFields&&this.queryBuilder.config.facetFields.fields||[];this.parseFacetItems(e,t,"field")},e.prototype.parseFacetIntervals=function(e){var t=this.queryBuilder.config.facetIntervals&&this.queryBuilder.config.facetIntervals.intervals||[];this.parseFacetItems(e,t,"interval")},e.prototype.parseFacetQueries=function(e){var t,n=this,i=(null===(t=this.queryBuilder.config.facetQueries)||void 0===t?void 0:t.settings)||{},o=(this.queryBuilder.config.facetQueries&&this.queryBuilder.config.facetQueries.queries||[]).reduce((function(e,t){var i=n.queryBuilder.getQueryGroup(t);return e[i]?e[i].push(t):e[i]=[t],e}),[]),r=this.queryBuilder.config.facetQueries&&this.queryBuilder.config.facetQueries.mincount,a=this.getFilterByMinCount(r);Object.keys(o).forEach((function(t){var r=n.findFacet(e,"query",t),s=n.getResponseQueryBuckets(r,o[t]).filter(a),l=n.findResponseFacet("query",t);if(l){var c=l.buckets&&l.buckets.items||[];n.updateExistingBuckets(r,s,l,c)}else if(r&&s.length>0){var d=new ft(s,n.facetQueriesPageSize);d.filter=n.getBucketFilterFunction(d),n.responseFacets||(n.responseFacets=[]),n.responseFacets.push({field:t,type:r.type||"query",label:t,pageSize:n.DEFAULT_PAGE_SIZE,currentPageSize:n.DEFAULT_PAGE_SIZE,buckets:d,settings:i})}}))},e.prototype.getResponseBuckets=function(e,t){var n=this;return(e&&e.buckets||[]).map((function(e){return e.count=n.getCountValue(e),e.filterQuery=e.filterQuery||n.getCorrespondingFilterQuery(t,e.label),Object.assign(Object.assign({},e),{checked:!1,display:e.display,label:e.label})}))},e.prototype.getResponseQueryBuckets=function(e,t){var n=this;return(t||[]).map((function(t){var i=(e&&e.buckets||[]).find((function(e){return e.label===t.label}))||{};return i.count=n.getCountValue(i),Object.assign(Object.assign({},i),{checked:!1,display:i.display,label:i.label})}))},e.prototype.getCountValue=function(e){var t,n;return!!e&&!!e.metrics&&(null===(n=null===(t=e.metrics[0])||void 0===t?void 0:t.value)||void 0===n?void 0:n.count)||0},e.prototype.getBucketCountDisplay=function(e){return null===e.count?"":"("+e.count+")"},e.prototype.getFilterByMinCount=function(e){return function(t){var n=e;return void 0===n&&(n=1),t.count>=n}},e.prototype.getCorrespondingFilterQuery=function(e,t){var n=null;if(e.field&&t)if(e.sets){var i=e.sets.find((function(e){return t===e.label}));i&&(n=this.buildIntervalQuery(e.field,i))}else n=e.field+':"'+t+'"';return n},e.prototype.buildIntervalQuery=function(e,t){var n=t.start,i=t.end;return e+":"+(void 0===t.startInclusive||!0===t.startInclusive?"[":"<")+'"'+n+'" TO "'+i+'"'+(void 0===t.endInclusive||!0===t.endInclusive?"]":">")},e.prototype.findFacet=function(e,t,n){return(e.facets||[]).find((function(e){return e.type===t&&e.label===n}))||{}},e.prototype.findResponseFacet=function(e,t){return(this.responseFacets||[]).find((function(n){return n.type===e&&n.label===t}))},e.prototype.updateExistingBuckets=function(e,t,n,i){var o=this,r=[];i.map((function(t){var n=(e&&e.buckets||[]).find((function(e){return e.label===t.label}));return n||r.push(t),t.count=o.getCountValue(n),t})),!this.selectedBuckets.find((function(e){return n.label===e.field.label&&n.type===e.field.type}))&&r.length&&r.forEach((function(e){n.buckets.deleteItem(e)})),t.forEach((function(e){i.find((function(t){return t.label===e.label}))||n.buckets.addItem(e)}))},e.prototype.getBucketFilterFunction=function(e){var t=this;return function(n){if(n&&e.filterText){var i=(e.filterText||"").toLowerCase(),o=(t.translationService.instant(n.display)||t.translationService.instant(n.label)).toLowerCase();return t.queryBuilder.config.filterWithContains?-1!==o.indexOf(i):o.startsWith(i)}return!0}},e.prototype.unselectFacetBucket=function(e,t){t&&(t.checked=!1,this.queryBuilder.removeUserFacetBucket(e,t),this.updateSelectedBuckets(),this.queryBuilder.update())},e.prototype.updateSelectedBuckets=function(){var e,t;if(this.responseFacets){this.selectedBuckets=[];var n=function(e){var t;e.buckets&&(t=i.selectedBuckets).push.apply(t,Q(i.queryBuilder.getUserFacetBuckets(e.field).filter((function(e){return e.checked})).map((function(t){return{field:e,bucket:t}}))))},i=this;try{for(var o=Y(this.responseFacets),r=o.next();!r.done;r=o.next()){n(r.value)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}else this.selectedBuckets=[]},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},e.prototype.resetAllSelectedBuckets=function(){var e=this;this.responseFacets.forEach((function(t){var n,i;if(t&&t.buckets){try{for(var o=Y(t.buckets.items),r=o.next();!r.done;r=o.next()){var a=r.value;a.checked=!1,e.queryBuilder.removeUserFacetBucket(t,a)}}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}e.updateSelectedBuckets()}})),this.queryBuilder.update()},e.prototype.resetQueryFragments=function(){this.queryBuilder.queryFragments={},this.queryBuilder.resetToDefaults()},e.prototype.reset=function(){this.responseFacets=[],this.selectedBuckets=[],this.queryBuilder.resetToDefaults(),this.queryBuilder.update()},e}();Ot.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Ot(n.ɵɵinject(_e),n.ɵɵinject(C.SearchService),n.ɵɵinject(C.TranslationService))},token:Ot,providedIn:"root"}),Ot.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Ot.ctorParameters=function(){return[{type:wt,decorators:[{type:n.Inject,args:[_e]}]},{type:C.SearchService},{type:C.TranslationService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xt=function(){function e(e,t){this.queryBuilder=e,this.facetFiltersService=t,this.showContextFacets=!0,this.facetQueriesLabel="Facet Queries",this.facetExpanded={default:!1},e.config&&e.config.facetQueries&&(this.facetQueriesLabel=e.config.facetQueries.label||"Facet Queries",this.facetExpanded.query=e.config.facetQueries.expanded),e.config&&e.config.facetFields&&(this.facetExpanded.field=e.config.facetFields.expanded),e.config&&e.config.facetIntervals&&(this.facetExpanded.interval=e.config.facetIntervals.expanded),this.displayResetButton=this.queryBuilder.config&&!!this.queryBuilder.config.resetButton}return e.prototype.shouldExpand=function(e){return this.facetExpanded[e.type]||this.facetExpanded.default},e.prototype.getBucketCountDisplay=function(e){return null===e.count?"":"("+e.count+")"},e}();xt.decorators=[{type:n.Component,args:[{selector:"adf-search-filter",template:'<mat-accordion multi="true" displayMode="flat">\n\n    <button *ngIf="displayResetButton && facetFiltersService.responseFacets"\n            mat-button\n            color="primary"\n            matTooltip="{{ \'SEARCH.FILTER.BUTTONS.RESET-ALL.TOOLTIP\' | translate }}"\n            matTooltipPosition="right"\n            adf-reset-search>\n        {{ \'SEARCH.FILTER.BUTTONS.RESET-ALL.LABEL\' | translate }}\n    </button>\n    <mat-expansion-panel\n        *ngFor="let category of queryBuilder.categories"\n        [attr.data-automation-id]="\'expansion-panel-\'+category.name"\n        [(expanded)]="category.expanded">\n        <mat-expansion-panel-header>\n            <mat-panel-title>\n                {{ category.name | translate }}\n            </mat-panel-title>\n        </mat-expansion-panel-header>\n        <adf-search-widget-container\n            [id]="category.id"\n            [selector]="category.component.selector"\n            [settings]="category.component.settings">\n        </adf-search-widget-container>\n    </mat-expansion-panel>\n\n    <ng-container *ngIf="facetFiltersService.responseFacets && showContextFacets">\n        <mat-expansion-panel [attr.data-automation-id]="\'expansion-panel-\'+field.label" *ngFor="let field of facetFiltersService.responseFacets"\n                             [expanded]="shouldExpand(field)">\n            <mat-expansion-panel-header>\n                <mat-panel-title>{{ field.label | translate }}</mat-panel-title>\n            </mat-expansion-panel-header>\n\n            <adf-search-facet-field [field]="field"></adf-search-facet-field>\n\n        </mat-expansion-panel>\n    </ng-container>\n</mat-accordion>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-filter"},styles:[".adf-search-filter .mat-expansion-panel-header-title{color:var(--theme-text-bold-color);font-size:14px}.adf-search-filter .mat-checkbox-label,.adf-search-filter .mat-radio-label{color:var(--theme-text-color)}"]}]}],xt.ctorParameters=function(){return[{type:wt,decorators:[{type:n.Inject,args:[_e]}]},{type:Ot}]},xt.propDecorators={showContextFacets:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Dt=function(e){this.facetFiltersService=e,this.clearAll=!1};Dt.decorators=[{type:n.Component,args:[{selector:"adf-search-chip-list",template:'<mat-chip-list>\n    <ng-container *ngIf="facetFiltersService.selectedBuckets.length">\n        <mat-chip *ngIf="clearAll && facetFiltersService.selectedBuckets.length > 1"\n            data-automation-id="reset-filter"\n            color="primary"\n            selected\n            matTooltip="{{ \'SEARCH.FILTER.BUTTONS.CLEAR-ALL.TOOLTIP\' | translate }}"\n            matTooltipPosition="right"\n            (click)="facetFiltersService.resetAllSelectedBuckets()">\n            {{ \'SEARCH.FILTER.BUTTONS.CLEAR-ALL.LABEL\' | translate }}\n        </mat-chip>\n\n        <mat-chip\n            data-automation-id="chip-list-entry"\n            *ngFor="let selection of facetFiltersService.selectedBuckets"\n            [removable]="true"\n            (removed)="facetFiltersService.unselectFacetBucket(selection.field, selection.bucket)">\n            {{ (selection.bucket.display || selection.bucket.label) | translate }}\n            <mat-icon matChipRemove>cancel</mat-icon>\n        </mat-chip>\n    </ng-container>\n</mat-chip-list>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-chip-list"},styles:[".mat-chip:focus{background-color:var(--theme-accent-color);color:var(--theme-accent-color-default-contrast)}.mat-chip:focus .mat-chip-remove{color:var(--theme-accent-color-default-contrast);opacity:1}"]}]}],Dt.ctorParameters=function(){return[{type:Ot}]},Dt.propDecorators={searchFilter:[{type:n.Input}],clearAll:[{type:n.Input}]};var Nt=function(){function e(){this.propertyTypes=["d:text","d:date","d:datetime"],this.modelPropertyTypeToSearchFilterTypeMap=new Map,this.modelPropertyTypeToSearchFilterTypeMap.set(this.propertyTypes[0],"text"),this.modelPropertyTypeToSearchFilterTypeMap.set(this.propertyTypes[1],"date-range"),this.modelPropertyTypeToSearchFilterTypeMap.set(this.propertyTypes[2],"datetime-range")}return e.prototype.convertCustomModelPropertiesToSearchCategories=function(){var e,t=this,n=[];return null===(e=this.customModels)||void 0===e||e.forEach((function(e){n.push(t.convertModelPropertyIntoSearchFilter(e))})),n},e.prototype.convertModelPropertyIntoSearchFilter=function(e){var t;return this.isTypeSupported(e.dataType)&&(t={id:e.prefixedName,name:e.prefixedName,expanded:!1,enabled:!0,component:{selector:this.modelPropertyTypeToSearchFilterTypeMap.get(e.dataType),settings:{pattern:e.prefixedName+":'(.*?)'",field:""+e.prefixedName,placeholder:"Enter the "+e.name}}}),t},e.prototype.isTypeSupported=function(e){return this.propertyTypes.includes(e)},e}();Nt.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Nt},token:Nt,providedIn:"root"}),Nt.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Nt.ctorParameters=function(){return[]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Lt=function(){function e(e,t){this.contentNodeSelectorPanelService=e,this.queryBuilderService=t}return e.prototype.ngOnInit=function(){this.queryBuilderService.categories=this.contentNodeSelectorPanelService.convertCustomModelPropertiesToSearchCategories()},e.prototype.hasCustomModels=function(){var e,t;return(null===(t=null===(e=this.contentNodeSelectorPanelService)||void 0===e?void 0:e.customModels)||void 0===t?void 0:t.length)>0},e}();Lt.decorators=[{type:n.Component,args:[{selector:"adf-search-panel",template:'<div class="adf-search-panel-scrollable" data-automation-id="adf-search-panel-container">\n    <adf-search-filter *ngIf="hasCustomModels()"\n                       class="app-search-settings"\n                       [showContextFacets]="false">\n    </adf-search-filter>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-panel"},styles:[".adf-search-panel-scrollable{max-height:349px;overflow:scroll}"]}]}],Lt.ctorParameters=function(){return[{type:Nt},{type:wt,decorators:[{type:n.Inject,args:[_e]}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Rt=function(){function e(e){this.queryBuilder=e,this.options=[]}return e.prototype.ngOnInit=function(){this.options=this.queryBuilder.getSortingOptions();var e=this.queryBuilder.getPrimarySorting();e&&(this.value=e.key,this.ascending=e.ascending)},e.prototype.onValueChanged=function(e){this.value=e,this.ascending=this.getSortingOrder(),this.applySorting()},e.prototype.onSortingChanged=function(e){this.ascending=e,this.applySorting()},e.prototype.findOptionByKey=function(e){return e?this.options.find((function(t){return t.key===e})):null},e.prototype.applySorting=function(){var e=this.findOptionByKey(this.value);e&&(this.queryBuilder.sorting=[Object.assign(Object.assign({},e),{ascending:this.ascending})],this.queryBuilder.update())},e.prototype.getSortingOrder=function(){var e=this.findOptionByKey(this.value);return e?e.ascending:this.queryBuilder.getPrimarySorting().ascending},e}();Rt.decorators=[{type:n.Component,args:[{selector:"adf-search-sorting-picker",template:'<adf-sorting-picker\n    [options]="options"\n    [selected]="value"\n    [ascending]="ascending"\n    (valueChange)="onValueChanged($event)"\n    (sortingChange)="onSortingChanged($event)">\n</adf-sorting-picker>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-search-sorting-picker"},styles:[".adf-search-sorting-picker .mat-icon-button{color:var(--theme-text-color)}"]}]}],Rt.ctorParameters=function(){return[{type:wt,decorators:[{type:n.Inject,args:[_e]}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ft=function(){function e(e,t,i){this.searchFilterQueryBuilder=e,this.translationService=t,this.focusTrapFactory=i,this.filterChange=new n.EventEmitter,this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){this.category=this.searchFilterQueryBuilder.getCategoryForColumn(this.col.key),this.initialValue=this.value&&this.value[this.col.key]?this.value[this.col.key]:void 0},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.onKeyPressed=function(e,t){"Enter"===e.key&&"check-list"!==this.widgetContainer.selector&&(this.onApply(),t.closeMenu())},e.prototype.onApply=function(){this.widgetContainer.hasValueSelected()?(this.searchFilterQueryBuilder.setActiveFilter(this.category.columnKey,this.widgetContainer.getCurrentValue()),this.filterChange.emit(),this.widgetContainer.applyInnerWidget()):this.resetSearchFilter()},e.prototype.onClearButtonClick=function(e){e.stopPropagation(),this.resetSearchFilter()},e.prototype.resetSearchFilter=function(){this.widgetContainer.resetInnerWidget(),this.searchFilterQueryBuilder.removeActiveFilter(this.category.columnKey),this.filterChange.emit()},e.prototype.getTooltipTranslation=function(e){return e||(e="SEARCH.SEARCH_HEADER.TYPE"),this.translationService.instant("SEARCH.SEARCH_HEADER.FILTER_BY",{category:this.translationService.instant(e)})},e.prototype.isActive=function(){return this.widgetContainer&&this.widgetContainer.componentRef&&this.widgetContainer.componentRef.instance.isActive},e.prototype.onMenuOpen=function(){this.filterContainer&&!this.focusTrap&&(this.focusTrap=this.focusTrapFactory.create(this.filterContainer.nativeElement),this.focusTrap.focusInitialElement())},e.prototype.onClosed=function(){this.focusTrap.destroy(),this.focusTrap=null},e}();Ft.decorators=[{type:n.Component,args:[{selector:"adf-search-filter-container",template:'<div *ngIf="!!category"\n     class="adf-filter">\n    <button mat-icon-button\n            [matMenuTriggerFor]="filter"\n            id="filter-menu-button"\n            #menuTrigger="matMenuTrigger"\n            (click)="$event.stopPropagation()"\n            (menuOpened)="onMenuOpen()"\n            (keyup.enter)="$event.stopPropagation()"\n            class="adf-filter-button"\n            [attr.aria-label]="getTooltipTranslation(col?.title)"\n            [matTooltip]="getTooltipTranslation(col?.title)">\n        <adf-icon value="adf:filter"\n                  [ngClass]="{ \'adf-icon-active\': isActive() || menuTrigger.menuOpen }"\n                  matBadge="filter"\n                  matBadgeColor="warn"\n                  [matBadgeHidden]="!isActive()">\n        </adf-icon>\n    </button>\n\n    <mat-menu #filter="matMenu"\n              class="adf-filter-menu"\n              (closed)="onClosed()">\n        <div #filterContainer\n             (keydown.tab)="$event.stopPropagation();">\n            <div (click)="$event.stopPropagation()"\n                 class="adf-filter-container">\n                <div class="adf-filter-title">{{ category?.name | translate }}</div>\n                <adf-search-widget-container (keypress)="onKeyPressed($event, menuTrigger)"\n                                             [id]="category?.id"\n                                             [selector]="category?.component?.selector"\n                                             [settings]="category?.component?.settings"\n                                             [value]="initialValue">\n                </adf-search-widget-container>\n            </div>\n            <mat-dialog-actions class="adf-filter-actions">\n                <button mat-button\n                        id="clear-filter-button"\n                        (click)="onClearButtonClick($event)">{{ \'SEARCH.SEARCH_HEADER.CLEAR\' | translate | uppercase }}\n                </button>\n                <button mat-button\n                        color="primary"\n                        id="apply-filter-button"\n                        class="adf-filter-apply-button"\n                        (click)="onApply()">{{ \'SEARCH.SEARCH_HEADER.APPLY\' | translate | uppercase }}\n                </button>\n            </mat-dialog-actions>\n        </div>\n    </mat-menu>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-filter-button{margin-left:-7px!important}.adf-filter-button .adf-icon{color:var(--theme-icon-fg-color);opacity:1}.adf-filter-button .adf-icon-active{color:var(--theme-primary-color)}.adf-filter-button .adf-icon .mat-badge-active{border:2px solid var(--theme-card-bg-color)!important}.adf-filter-button .mat-icon{height:18px;width:18px}.adf-filter-button .mat-badge-content{height:10px;right:-6px!important;top:-3px!important;width:10px}.adf-filter-container{color:var(--theme-text-bold-color)!important;display:flex;flex-direction:column;padding:15px 15px 10px}.adf-filter-container .adf-facet-buttons{display:none}.adf-filter-container .adf-search-check-list{padding:5px 0}.adf-filter-container input{background:2px solid var(--theme-card-bg-color)!important}.adf-filter-title{color:var(--theme-text-bold-color);font-size:1.1em;padding-bottom:5px}.adf-filter-actions{background-color:var(--theme-hover-bg-color);display:flex;justify-content:flex-end;padding:15px}.adf-filter-actions>button{color:var(--theme-text-bold-color);font-size:.9em}.mat-menu-panel.adf-filter-menu .mat-menu-content{min-width:260px;padding:0}"]}]}],Ft.ctorParameters=function(){return[{type:Ue,decorators:[{type:n.Inject,args:[_e]}]},{type:C.TranslationService},{type:L.ConfigurableFocusTrapFactory}]},Ft.propDecorators={col:[{type:n.Input}],value:[{type:n.Input}],filterChange:[{type:n.Output}],widgetContainer:[{type:n.ViewChild,args:[Tt]}],filterContainer:[{type:n.ViewChild,args:["filterContainer"]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Pt=function(){function e(e){this.queryBuilder=e,this.formChange=new n.EventEmitter}return e.prototype.onSelectionChange=function(e){this.queryBuilder.updateSelectedConfiguration(e.index),this.formChange.emit(e)},e.prototype.getSelected=function(e){var t;return null===(t=e.find((function(e){return e.selected})))||void 0===t?void 0:t.name},e}();Pt.decorators=[{type:n.Component,args:[{selector:"adf-search-form",template:'<ng-container *ngIf="queryBuilder.searchForms | async as forms">\n\n    <ng-container *ngIf="forms.length === 1">\n        <button class="adf-search-form" disableRipple mat-button [title]="getSelected(forms) | translate">\n            <span class="adf-search-form-title">\n                    {{ getSelected(forms) | translate }}\n            </span>\n        </button>\n    </ng-container>\n\n    <ng-container  *ngIf="forms.length > 1">\n        <button class="adf-search-form"\n                [matMenuTriggerFor]="menu"\n                #menuTrigger="matMenuTrigger"\n                disableRipple\n                mat-button\n                [title]="getSelected(forms) | translate"\n                [matMenuTriggerRestoreFocus]="true">\n\n            <span class="adf-search-form-title" >\n                    {{ getSelected(forms) | translate }}\n            </span>\n\n            <mat-icon [class.adf-search-form-icon-selected]="menuTrigger.menuOpen" class="adf-search-form-icon">expand_more</mat-icon>\n        </button>\n\n        <mat-menu #menu="matMenu" backdropClass="adf-search-form-menu">\n            <button mat-menu-item *ngFor="let form of forms" (click)="onSelectionChange(form)">\n                {{form.name | translate}}\n            </button>\n        </mat-menu>\n    </ng-container>\n</ng-container>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-search-form.mat-button{align-content:center;height:35px;max-width:190px;min-width:190px;overflow:hidden}.adf-search-form.mat-button .mat-button-wrapper{align-items:center;display:flex}.adf-search-form-title{font-size:14px;font-weight:700;line-height:24px;max-width:120px;min-width:120px;overflow:hidden;padding-right:12px;text-align:left;text-overflow:ellipsis}.adf-search-form-icon{border:2px solid transparent;border-radius:6px;transition:border .5s ease-out}.adf-search-form-icon-selected{border-color:var(--theme-accent-color)}.adf-search-form-menu+* .mat-menu-panel{border-radius:6px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.adf-search-form-menu+* .mat-menu-panel .mat-menu-content{padding:0}"]}]}],Pt.ctorParameters=function(){return[{type:wt,decorators:[{type:n.Inject,args:[_e]}]}]},Pt.propDecorators={formChange:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Mt=function(e,t){this.queryBuilder=e,this.facetFiltersService=t,this.showContextFacets=!0};Mt.decorators=[{type:n.Component,args:[{selector:"adf-search-filter-chips",template:'<mat-chip-list aria-orientation="horizontal">\n    <ng-container *ngFor="let category of queryBuilder.categories">\n        <adf-search-widget-chip [category]="category"></adf-search-widget-chip>\n    </ng-container>\n\n    <ng-container *ngIf="facetFiltersService.responseFacets && showContextFacets">\n        <ng-container *ngFor="let field of facetFiltersService.responseFacets">\n            <adf-search-facet-chip [field]="field" [attr.data-automation-id]="\'search-fact-chip-\' + field.field" ></adf-search-facet-chip>\n        </ng-container>\n    </ng-container>\n</mat-chip-list>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-search-filter-chip.mat-chip{background:var(--theme-unselected-chip-bg-color);border:2px solid transparent;max-width:320px;overflow:hidden;text-overflow:ellipsis;transition:border .5s ease-in-out}.adf-search-filter-chip.mat-chip:focus{color:unset}.adf-search-filter-chip.mat-chip.mat-standard-chip:after{background:var(--theme-unselected-chip-bg-color);color:unset}.adf-search-filter-chip.mat-chip.mat-chip-list-wrapper{margin:4px 6px}.adf-search-filter-chip.adf-search-toggle-chip{background:var(--theme-card-bg-color);border:2px solid var(--theme-accent-color)}.adf-search-filter-chip.adf-search-toggle-chip.mat-chip:after{background:unset}.adf-search-filter-chip .adf-search-filter-placeholder{color:var(--theme-disabled-text-color);flex:1 1 auto;white-space:nowrap}.adf-search-filter-chip .adf-search-filter-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.adf-search-filter-chip .mat-icon{padding-left:5px;padding-top:5px}.adf-search-filter-chip-menu+* .cdk-overlay-pane .mat-menu-panel{border-radius:12px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);min-width:320px}"]}]}],Mt.ctorParameters=function(){return[{type:wt,decorators:[{type:n.Inject,args:[_e]}]},{type:Ot}]},Mt.propDecorators={showContextFacets:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var kt=function(){function e(){this.close=new n.EventEmitter}return e.prototype.onClose=function(){this.close.emit()},e}();kt.decorators=[{type:n.Component,args:[{selector:"adf-search-filter-menu-card",template:'<div class="adf-search-filter-menu-card">\n    <div class="adf-search-filter-title">\n        <ng-content select="filter-title"></ng-content>\n        <mat-icon class="adf-search-filter-title-action"\n                  (click)="onClose()"\n                  [matTooltip]="\'SEARCH.FILTER.BUTTONS.CLOSE\' | translate">\n            close\n        </mat-icon>\n    </div>\n\n    <mat-divider></mat-divider>\n\n    <div class="adf-search-filter-content">\n        <ng-content select="filter-content"></ng-content>\n    </div>\n\n    <mat-divider></mat-divider>\n\n    <div class="adf-search-filter-actions">\n        <ng-content select="filter-actions"></ng-content>\n    </div>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-search-filter-menu-card{background:var(--theme-card-bg-color);color:var(--theme-text-fg-color)}.adf-search-filter-menu-card .adf-search-filter-title{flex:1 1 auto;font-size:14px;font-style:inherit;font-weight:700;height:32px;letter-spacing:.15px;line-height:24px;padding:16px 12px}.adf-search-filter-menu-card .adf-search-filter-title-action{float:right}.adf-search-filter-menu-card .adf-search-filter-content{overflow:auto;padding:16px 12px}.adf-search-filter-menu-card .adf-search-filter-actions{display:flex;justify-content:space-between;padding:16px 12px}.adf-search-filter-menu-card .adf-search-filter-actions .adf-search-action-button{border-radius:6px}"]}]}],kt.propDecorators={close:[{type:n.Output}]};var _t=function(){function e(e,t,n){this.queryBuilder=e,this.searchFacetFiltersService=t,this.translationService=n,this.displayValue$=new T.Subject}return Object.defineProperty(e.prototype,"canUpdateOnChange",{get:function(){var e,t;return null===(t=null===(e=this.field.settings)||void 0===e?void 0:e.allowUpdateOnChange)||void 0===t||t},enumerable:!1,configurable:!0}),e.prototype.onToggleBucket=function(e,t,n){e&&n&&(e.checked?this.selectFacetBucket(t,n):this.unselectFacetBucket(t,n))},e.prototype.selectFacetBucket=function(e,t){t&&(t.checked=!0,this.queryBuilder.addUserFacetBucket(e,t),this.searchFacetFiltersService.updateSelectedBuckets(),this.canUpdateOnChange&&(this.updateDisplayValue(),this.queryBuilder.update()))},e.prototype.unselectFacetBucket=function(e,t){t&&(t.checked=!1,this.queryBuilder.removeUserFacetBucket(e,t),this.searchFacetFiltersService.updateSelectedBuckets(),this.canUpdateOnChange&&(this.updateDisplayValue(),this.queryBuilder.update()))},e.prototype.canResetSelectedBuckets=function(e){return!(!e||!e.buckets)&&e.buckets.items.some((function(e){return e.checked}))},e.prototype.resetSelectedBuckets=function(e){var t,n;if(e&&e.buckets){try{for(var i=Y(e.buckets.items),o=i.next();!o.done;o=i.next()){var r=o.value;r.checked=!1,this.queryBuilder.removeUserFacetBucket(e,r)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}this.searchFacetFiltersService.updateSelectedBuckets(),this.canUpdateOnChange&&this.queryBuilder.update()}},e.prototype.getBucketCountDisplay=function(e){return null===e.count?"":"("+e.count+")"},e.prototype.updateDisplayValue=function(){var e,t,n,i=this;if(null===(e=this.field.buckets)||void 0===e?void 0:e.items){var o=null===(n=null===(t=this.field.buckets)||void 0===t?void 0:t.items)||void 0===n?void 0:n.filter((function(e){return e.checked})).map((function(e){return i.translationService.instant(e.display||e.label)})).join(", ");this.displayValue$.next(o)}else this.displayValue$.next("")},e.prototype.reset=function(){this.resetSelectedBuckets(this.field),this.updateDisplayValue(),this.queryBuilder.update()},e.prototype.submitValues=function(){this.updateDisplayValue(),this.queryBuilder.update()},e}();_t.decorators=[{type:n.Component,args:[{selector:"adf-search-facet-field",template:'<div class="adf-search-filter-facet">\n    <div class="adf-facet-result-filter">\n        <div class="adf-facet-search-container">\n            <button mat-icon-button class="adf-facet-search-icon" tabindex="-1">\n                <mat-icon>search</mat-icon>\n            </button>\n            <mat-form-field class="adf-facet-search-field" floatLabel="never">\n                <input matInput placeholder="{{ \'SEARCH.FILTER.ACTIONS.SEARCH\' | translate }}"\n                       [attr.data-automation-id]="\'facet-result-filter-\'+field.label" [(ngModel)]="field.buckets.filterText">\n                <button *ngIf="field.buckets.filterText" mat-button matSuffix mat-icon-button\n                        (click)="field.buckets.filterText = \'\'">\n                    <mat-icon>close</mat-icon>\n                </button>\n            </mat-form-field>\n        </div>\n    </div>\n\n    <div class="adf-checklist">\n        <mat-checkbox *ngFor="let bucket of field.buckets" [checked]="bucket.checked"\n            [attr.data-automation-id]="\'checkbox-\'+field.label+\'-\'+(bucket.display || bucket.label)"\n            (change)="onToggleBucket($event, field, bucket)">\n            <div matTooltip="{{ bucket.display || bucket.label | translate }} {{ getBucketCountDisplay(bucket) }}"\n                matTooltipPosition="right" class="adf-facet-label">\n                {{ bucket.display || bucket.label | translate }} {{ getBucketCountDisplay(bucket) }}\n            </div>\n        </mat-checkbox>\n    </div>\n\n    <div class="adf-facet-buttons" *ngIf="field.buckets.fitsPage && !field.settings?.hideDefaultAction">\n        <button *ngIf="canResetSelectedBuckets(field)" mat-button color="primary" (click)="resetSelectedBuckets(field)">\n            {{ \'SEARCH.FILTER.ACTIONS.CLEAR-ALL\' | translate }}\n        </button>\n    </div>\n\n    <div class="adf-facet-buttons" *ngIf="!field.buckets.fitsPage">\n        <button mat-icon-button *ngIf="canResetSelectedBuckets(field)"\n            title="{{ \'SEARCH.FILTER.ACTIONS.CLEAR-ALL\' | translate }}" (click)="resetSelectedBuckets(field)">\n            <mat-icon>clear</mat-icon>\n        </button>\n        <button mat-icon-button *ngIf="field.buckets.canShowLessItems" (click)="field.buckets.showLessItems()"\n            title="{{ \'SEARCH.FILTER.ACTIONS.SHOW-LESS\' | translate }}">\n            <mat-icon>keyboard_arrow_up</mat-icon>\n        </button>\n        <button mat-icon-button *ngIf="field.buckets.canShowMoreItems" (click)="field.buckets.showMoreItems()"\n            title="{{ \'SEARCH.FILTER.ACTIONS.SHOW-MORE\' | translate }}">\n            <mat-icon>keyboard_arrow_down</mat-icon>\n        </button>\n    </div>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-search-filter-facet .adf-checklist{display:flex;flex-direction:column;max-height:180px;overflow-y:auto;padding:5px 0}.adf-search-filter-facet .adf-checklist .mat-checkbox-label{overflow:hidden;text-overflow:ellipsis;width:100%}.adf-search-filter-facet .adf-checklist .mat-checkbox-layout{width:100%}.adf-search-filter-facet .adf-checklist .adf-facet-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.adf-search-filter-facet .adf-checklist .mat-checkbox{margin:5px}.adf-search-filter-facet .adf-checklist .mat-checkbox.mat-checkbox-checked .mat-checkbox-label{font-weight:700}.adf-search-filter-facet .adf-facet-result-filter{padding-bottom:16px}.adf-search-filter-facet .adf-facet-result-filter .adf-facet-search-container{background:var(--theme-background-color);border-radius:6px;display:flex;height:32px}.adf-search-filter-facet .adf-facet-result-filter .adf-facet-search-container .adf-facet-search-icon{margin-top:-4px;width:27px}.adf-search-filter-facet .adf-facet-result-filter .adf-facet-search-container .adf-facet-search-icon .mat-icon{font-size:15px}.adf-search-filter-facet .adf-facet-result-filter .adf-facet-search-container .adf-facet-search-field{flex:1;font-size:14px;letter-spacing:.25px;line-height:24px;margin-top:-16px;padding:2px}.adf-search-filter-facet .adf-facet-result-filter .adf-facet-search-container .adf-facet-search-field .mat-form-field-underline{display:none}.adf-search-filter-facet .adf-facet-result-filter .adf-facet-search-container .adf-facet-search-field .mat-form-field-suffix{padding-right:1px}.adf-search-filter-facet .adf-facet-buttons{text-align:right}.adf-search-filter-facet .adf-facet-buttons .mat-button{text-transform:uppercase}.adf-search-filter-facet .adf-facet-buttons--topSpace{padding-top:15px}.adf-search-filter-facet .mat-checkbox-label,.adf-search-filter-facet .mat-radio-label{color:var(--theme-text-color)}"]}]}],_t.ctorParameters=function(){return[{type:wt,decorators:[{type:n.Inject,args:[_e]}]},{type:Ot},{type:C.TranslationService}]},_t.propDecorators={field:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Vt=function(){function e(e){this.focusTrapFactory=e}return e.prototype.onMenuOpen=function(){this.menuContainer&&!this.focusTrap&&(this.focusTrap=this.focusTrapFactory.create(this.menuContainer.nativeElement),this.focusTrap.focusInitialElement())},e.prototype.onClosed=function(){this.focusTrap.destroy(),this.focusTrap=null},e.prototype.onRemove=function(){this.widgetContainerComponent.resetInnerWidget(),this.menuTrigger.closeMenu()},e.prototype.onApply=function(){this.widgetContainerComponent.applyInnerWidget(),this.menuTrigger.closeMenu()},e}();Vt.decorators=[{type:n.Component,args:[{selector:"adf-search-widget-chip",template:'<mat-chip [attr.data-automation-id]="\'search-filter-chip-\' + category.name"\n          disableRipple\n          class="adf-search-filter-chip"\n          [class.adf-search-toggle-chip]="(widget.getDisplayValue() | async) || menuTrigger.menuOpen"\n          [matMenuTriggerFor]="menu"\n          (onMenuOpen)="onMenuOpen()"\n          [attr.title]="widget.getDisplayValue() | async"\n          #menuTrigger="matMenuTrigger">\n    <span class="adf-search-filter-placeholder">\n        <span class="adf-search-filter-ellipsis">{{ category.name | translate }}</span>\n        <ng-container *ngIf="widget.getDisplayValue() | async">:</ng-container>\n    </span>\n    <span class="adf-search-filter-ellipsis" *ngIf="widget.getDisplayValue() | async as displayValue">\n        &nbsp;{{ displayValue | translate }}\n    </span>\n    <mat-icon>keyboard_arrow_down</mat-icon>\n</mat-chip>\n\n<mat-menu #menu="matMenu" backdropClass="adf-search-filter-chip-menu" (closed)="onClosed()">\n    <div #menuContainer [attr.data-automation-id]="\'search-field-\' + category.name">\n        <adf-search-filter-menu-card (click)="$event.stopPropagation()"\n                                     (keydown.tab)="$event.stopPropagation();"\n                                     (close)="menuTrigger.closeMenu()">\n\n            <ng-container ngProjectAs="filter-title">\n                {{ category.name | translate }} <ng-container *ngIf="category.component.settings.unit">({{category.component.settings.unit}})</ng-container>\n            </ng-container>\n\n            <ng-container ngProjectAs="filter-content">\n                <adf-search-widget-container #widget\n                                             [id]="category.id"\n                                             [selector]="category.component.selector"\n                                             [settings]="category.component.settings">\n                </adf-search-widget-container>\n            </ng-container>\n\n            <ng-container ngProjectAs="filter-actions">\n                <button mat-flat-button class="adf-search-action-button" color="accent" (click)="onRemove()" id="cancel-filter-button">\n                    {{ \'SEARCH.FILTER.BUTTONS.REMOVE\' | translate }}\n                </button>\n                <button mat-flat-button class="adf-search-action-button" color="primary" (click)="onApply()" id="apply-filter-button">\n                    {{ \'SEARCH.FILTER.BUTTONS.APPLY\' | translate }}\n                </button>\n            </ng-container>\n        </adf-search-filter-menu-card>\n    </div>\n</mat-menu>\n',encapsulation:n.ViewEncapsulation.None}]}],Vt.ctorParameters=function(){return[{type:L.ConfigurableFocusTrapFactory}]},Vt.propDecorators={category:[{type:n.Input}],menuContainer:[{type:n.ViewChild,args:["menuContainer",{static:!1}]}],menuTrigger:[{type:n.ViewChild,args:["menuTrigger",{static:!1}]}],widgetContainerComponent:[{type:n.ViewChild,args:[Tt,{static:!1}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ut=function(){function e(e){this.focusTrapFactory=e}return e.prototype.onMenuOpen=function(){this.menuContainer&&!this.focusTrap&&(this.focusTrap=this.focusTrapFactory.create(this.menuContainer.nativeElement),this.focusTrap.focusInitialElement())},e.prototype.onClosed=function(){this.focusTrap.destroy(),this.focusTrap=null},e.prototype.onRemove=function(){this.facetFieldComponent.reset(),this.menuTrigger.closeMenu()},e.prototype.onApply=function(){this.facetFieldComponent.submitValues(),this.menuTrigger.closeMenu()},e}();Ut.decorators=[{type:n.Component,args:[{selector:"adf-search-facet-chip",template:'<mat-chip [attr.data-automation-id]="\'search-filter-chip-\' + field.label"\n          disableRipple\n          class="adf-search-filter-chip"\n          [class.adf-search-toggle-chip]="(facetField.displayValue$ | async) || menuTrigger.menuOpen"\n          [matMenuTriggerFor]="menu"\n          (onMenuOpen)="onMenuOpen()"\n          [attr.title]="facetField.displayValue$ | async"\n          #menuTrigger="matMenuTrigger">\n\n    <span class="adf-search-filter-placeholder">\n        <span class="adf-search-filter-ellipsis">{{ field.label | translate }}</span>\n        <ng-container *ngIf="facetField.displayValue$ | async">:</ng-container>\n    </span>\n\n    <span class="adf-search-filter-ellipsis" *ngIf="facetField.displayValue$ | async as displayValue">\n        &nbsp; {{ displayValue | translate }}\n    </span>\n    <mat-icon>keyboard_arrow_down</mat-icon>\n</mat-chip>\n\n<mat-menu #menu="matMenu" backdropClass="adf-search-filter-chip-menu" (closed)="onClosed()">\n    <div #menuContainer [attr.data-automation-id]="\'search-field-\' + field.label">\n        <adf-search-filter-menu-card (click)="$event.stopPropagation()"\n                                     (keydown.tab)="$event.stopPropagation();"\n                                     (close)="menuTrigger.closeMenu()">\n            <ng-container ngProjectAs="filter-title">\n                {{ field.label | translate }}\n            </ng-container>\n            <ng-container ngProjectAs="filter-content">\n                <adf-search-facet-field [field]="field" #facetField></adf-search-facet-field>\n            </ng-container>\n            <ng-container ngProjectAs="filter-actions">\n                <button mat-flat-button class="adf-search-action-button" color="accent" (click)="onRemove()" id="cancel-filter-button">\n                    {{ \'SEARCH.FILTER.BUTTONS.REMOVE\' | translate }}\n                </button>\n                <button mat-flat-button class="adf-search-action-button" color="primary" (click)="onApply()" id="apply-filter-button">\n                    {{ \'SEARCH.FILTER.BUTTONS.APPLY\' | translate }}\n                </button>\n            </ng-container>\n        </adf-search-filter-menu-card>\n    </div>\n</mat-menu>\n',encapsulation:n.ViewEncapsulation.None}]}],Ut.ctorParameters=function(){return[{type:L.ConfigurableFocusTrapFactory}]},Ut.propDecorators={field:[{type:n.Input}],menuContainer:[{type:n.ViewChild,args:["menuContainer",{static:!1}]}],menuTrigger:[{type:n.ViewChild,args:["menuTrigger",{static:!1}]}],facetFieldComponent:[{type:n.ViewChild,args:[_t,{static:!1}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Bt=function(){function e(e){this.filterService=e}return e.prototype.onClick=function(){this.filterService.reset()},e}();Bt.decorators=[{type:n.Directive,args:[{selector:"[adf-reset-search]"}]}],Bt.ctorParameters=function(){return[{type:Ot}]},Bt.propDecorators={onClick:[{type:n.HostListener,args:["click"]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var jt=function(){};jt.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,D.FormsModule,D.ReactiveFormsModule,j,C.CoreModule],declarations:[ut,pt,dt,xt,Dt,Tt,ht,mt,gt,vt,Lt,bt,It,Et,Rt,Ft,Pt,Mt,kt,_t,Vt,Ut,Bt],exports:[ut,pt,dt,xt,Dt,Tt,ht,mt,gt,vt,Lt,bt,It,Et,Rt,Ft,Pt,Mt,kt,_t,Bt],providers:[{provide:_e,useExisting:wt}]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var $t,Gt=function(){};Gt.decorators=[{type:n.NgModule,args:[{imports:[C.CoreModule,t.CommonModule,N.FlexLayoutModule,j,ct,C.EditJsonDialogModule,jt],declarations:[we,je,Me,Pe,Fe,ke,Re,Le,Be],exports:[we,je,Me,Pe,Fe,ke,Re,Le,Be]}]}],(
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
$t=e.Relations||(e.Relations={})).Members="members",$t.Containers="containers";var Ht=function(){function t(e,t){this.sitesService=e,this.logService=t,this.hideMyFiles=!1,this.siteList=null,this.value=null,this.placeholder="DROPDOWN.PLACEHOLDER_LABEL",this.change=new n.EventEmitter,this.loading=!0,this.skipCount=0,this.selected=null,this.MY_FILES_VALUE="-my-"}return t.prototype.ngOnInit=function(){this.siteList||this.loadSiteList()},t.prototype.loadAllOnScroll=function(){this.isInfiniteScrollingEnabled()&&(this.loading=!0,this.loadSiteList())},t.prototype.selectedSite=function(e){this.change.emit(e.value)},t.prototype.loadSiteList=function(){var t=this,n={skipCount:this.skipCount,maxItems:C.InfiniteSelectScrollDirective.MAX_ITEMS};this.skipCount+=C.InfiniteSelectScrollDirective.MAX_ITEMS,this.relations&&(n.relations=[this.relations]),this.sitesService.getSites(n).subscribe((function(n){if(t.siteList){var i=t.relations===e.Relations.Members?t.filteredResultsByMember(n):n;t.siteList.list.entries=t.siteList.list.entries.concat(i.list.entries),t.siteList.list.pagination=n.list.pagination}else if(t.siteList=t.relations===e.Relations.Members?t.filteredResultsByMember(n):n,!t.hideMyFiles){var o=new w.SiteEntry({entry:{id:t.MY_FILES_VALUE,guid:t.MY_FILES_VALUE,title:"DROPDOWN.MY_FILES_OPTION"}});t.siteList.list.entries.unshift(o),t.value||(t.value=t.MY_FILES_VALUE)}t.selected=t.siteList.list.entries.find((function(e){return e.entry.id===t.value})),t.value&&!t.selected&&t.siteListHasMoreItems()&&t.loadSiteList(),t.loading=!1}),(function(e){t.logService.error(e)}))},t.prototype.showLoading=function(){return this.loading&&this.siteListHasMoreItems()},t.prototype.isInfiniteScrollingEnabled=function(){return!this.loading&&this.siteListHasMoreItems()},t.prototype.siteListHasMoreItems=function(){return this.siteList&&this.siteList.list.pagination&&this.siteList.list.pagination.hasMoreItems},t.prototype.filteredResultsByMember=function(e){var t=this,n=this.sitesService.getEcmCurrentLoggedUserName();return e.list.entries=e.list.entries.filter((function(e){return t.isCurrentUserMember(e,n)})),e},t.prototype.isCurrentUserMember=function(e,t){return"PUBLIC"===e.entry.visibility||!!e.relations.members.list.entries.find((function(e){return e.entry.id.toLowerCase()===t.toLowerCase()}))},t}();Ht.decorators=[{type:n.Component,args:[{selector:"adf-sites-dropdown",template:'<div id="site-dropdown-container" class="adf-site-dropdown-container">\n    <mat-form-field>\n        <mat-select\n            adf-infinite-select-scroll\n            (scrollEnd)="loadAllOnScroll()"\n            #siteSelect\n            data-automation-id="site-my-files-option"\n            class="adf-site-dropdown-list-element"\n            id="site-dropdown"\n            placeholder="{{placeholder | translate}}"\n            floatPlaceholder="never"\n            [(value)]="selected"\n            (selectionChange)="selectedSite($event)">\n            <mat-option *ngFor="let site of siteList?.list.entries;" [value]="site">\n                {{ site.entry.title | translate}}\n            </mat-option>\n            <mat-option *ngIf="showLoading()" disabled="true" data-automation-id="site-loading">\n                {{ \'ADF_DROPDOWN.LOADING\' | translate}}\n            </mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-sites-dropdown"},styles:[".adf-sites-dropdown.adf-full-width .mat-form-field{width:100%}"]}]}],Ht.ctorParameters=function(){return[{type:C.SitesService},{type:C.LogService}]},Ht.propDecorators={hideMyFiles:[{type:n.Input}],siteList:[{type:n.Input}],value:[{type:n.Input}],placeholder:[{type:n.Input}],relations:[{type:n.Input}],change:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var qt=function(){};qt.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,D.FormsModule,D.ReactiveFormsModule,C.CoreModule],exports:[Ht],declarations:[Ht]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Yt=function(){function e(){this.folderNode=null,this.root=null,this.rootId=null,this.route=[],this.onDestroy$=new T.Subject,this.readOnly=!1,this.navigate=new n.EventEmitter}return Object.defineProperty(e.prototype,"hasRoot",{get:function(){return!!this.root},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.transform=this.transform?this.transform:null,this.target&&this.target.$folderNode.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.folderNode=t,e.recalculateNodes()}))},e.prototype.ngOnChanges=function(){this.recalculateNodes()},e.prototype.recalculateNodes=function(){var e=this.transform?this.transform(this.folderNode):this.folderNode;this.route=this.parseRoute(e),this.maxItems&&this.route.length>this.maxItems?(this.lastNodes=this.route.slice(this.route.length-this.maxItems),this.previousNodes=this.route.slice(0,this.route.length-this.maxItems),this.previousNodes.reverse()):(this.lastNodes=this.route,this.previousNodes=null)},e.prototype.open=function(){this.dropdown&&(this.dropdown.open(),this.dropdown.focus())},e.prototype.hasPreviousNodes=function(){return!!this.previousNodes},e.prototype.parseRoute=function(e){if(e&&e.path){var t=(e.path.elements||[]).slice();t.push({id:e.id,name:e.name,node:e});var n=this.getElementPosition(t,this.rootId);return n>0&&t.splice(0,n),-1===n&&this.rootId&&(t[0].id=this.rootId),this.root&&(t[0].name=this.root),t}return[]},e.prototype.getElementPosition=function(e,t){var n=-1;return e&&e.length>0&&t&&(n=e.findIndex((function(e){return e.id===t}))),n},e.prototype.breadcrumbItemIsAnchor=function(e){return!this.readOnly&&!e},e.prototype.onRoutePathClick=function(e,t){t&&"click"===t.type&&t.preventDefault(),this.onRouteClick(e)},e.prototype.onRouteClick=function(e){e&&!this.readOnly&&(this.navigate.emit(e),this.target&&this.target.navigateTo(e.id))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e}();Yt.decorators=[{type:n.Component,args:[{selector:"adf-breadcrumb",template:'<nav\n    *ngIf="folderNode"\n    data-automation-id="breadcrumb"\n    class="adf-breadcrumb-container"\n    role="navigation"\n    [attr.aria-label]="\'BREADCRUMB.ARIA-LABEL.BREADCRUMB\' | translate"\n>\n    <button\n        *ngIf="hasPreviousNodes()"\n        tabindex="0"\n        class="adf-breadcrumb-dropdown-trigger"\n        (click)="open()"\n        [attr.aria-label]="\'BREADCRUMB.ARIA-LABEL.DROPDOWN\' | translate"\n    >\n        <div class="adf-breadcrumb-dropdown-trigger-icon">\n            <mat-icon [class.adf-isRoot]="!hasPreviousNodes()">folder</mat-icon>\n            <mat-icon\n                [class.adf-isRoot]="!hasPreviousNodes()"\n                class="adf-breadcrumb-dropdown-trigger-arrow"\n                >arrow_drop_down</mat-icon\n            >\n        </div>\n    </button>\n\n    <mat-select\n        #dropdown\n        *ngIf="hasPreviousNodes()"\n        class="adf-breadcrumb-dropdown-path"\n        tabindex="-1"\n    >\n        <mat-option\n            *ngFor="let node of previousNodes"\n            (click)="onRoutePathClick(node, $event)"\n            (onSelectionChange)="onRouteClick(node)"\n            class="adf-breadcrumb-path-option"\n            [disabled]="readOnly"\n        >\n            {{ node.name | translate }}\n        </mat-option>\n    </mat-select>\n\n    <div\n        *ngFor="let item of lastNodes; let last = last"\n        [class.adf-active]="last"\n        [ngSwitch]="breadcrumbItemIsAnchor(last)"\n        title="{{ item.name | translate }}"\n        class="adf-breadcrumb-item">\n        <a\n            *ngSwitchCase="true"\n            href="#"\n            [attr.data-automation-id]="\'breadcrumb_\' + item.name"\n            class="adf-breadcrumb-item-anchor"\n            (click)="onRoutePathClick(item, $event)"\n        >\n            {{ item.name | translate }}\n        </a>\n\n        <div *ngSwitchDefault class="adf-breadcrumb-item-current" role="heading" aria-level="2"\n            aria-current="location">\n            {{ item.name | translate }}\n        </div>\n\n        <mat-icon class="adf-breadcrumb-item-chevron" *ngIf="!last">\n            chevron_right\n        </mat-icon>\n    </div>\n</nav>\n\n<nav\n    *ngIf="!folderNode && hasRoot"\n    data-automation-id="breadcrumb"\n    role="navigation"\n    [attr.aria-label]="\'BREADCRUMB.ARIA-LABEL.BREADCRUMB\' | translate"\n>\n    <div class="adf-breadcrumb-item adf-active" role="listitem">\n        <div class="adf-breadcrumb-item-current" role="heading" aria-level="2">\n            {{ root | translate }}\n        </div>\n    </div>\n</nav>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-breadcrumb"},styles:[".adf-breadcrumb{color:var(--theme-text-color);display:flex;flex:1;font-size:14px;font-weight:600;letter-spacing:-.2px;line-height:24px;overflow:hidden}.adf-breadcrumb-container{cursor:default;display:flex;list-style-type:none;margin:0;overflow:hidden;padding:0}.adf-breadcrumb-dropdown-path{height:0;margin-top:35px;overflow:hidden;width:0}.adf-breadcrumb-dropdown-path.mat-select{width:0}.adf-breadcrumb-dropdown-trigger{background:transparent;border:none;cursor:pointer;margin-right:5px;margin-top:2px;padding:0;width:30px}.adf-breadcrumb-dropdown-trigger:focus{color:var(--theme-primary-color);outline:none}.adf-breadcrumb-dropdown-trigger-icon{position:relative}.adf-breadcrumb-dropdown-trigger-arrow{color:#fff;font-size:17px;left:4px;position:absolute;top:4px;z-index:2}.adf-breadcrumb-dropdown-trigger-arrow.adf-isRoot{visibility:hidden}.adf-breadcrumb-dropdown-trigger-arrow.adf-focus{border:none}.adf-breadcrumb-dropdown-trigger.adf-isRoot{cursor:not-allowed}.adf-breadcrumb-item{color:var(--theme-text-color);display:flex;flex:0 1 auto;font-size:14px;font-weight:600;letter-spacing:-.2px;line-height:33px;margin-top:auto;min-width:35px;overflow:hidden;padding-right:2px;text-align:left;text-overflow:ellipsis}.adf-breadcrumb-item.adf-active,.adf-breadcrumb-item:hover{color:var(--adf-breadcrumb-item-active-hover-color)}.adf-breadcrumb-item.adf-active{color:var(--adf-breadcrumb-item-active-color)}.adf-breadcrumb-item-chevron{font-size:17px;margin-top:9px;opacity:1}.adf-breadcrumb-item.mat-primary{color:var(--theme-primary-color)}.adf-breadcrumb-item.mat-accent{color:var(--theme-accent-color)}.adf-breadcrumb-item.mat-warn{color:var(--theme-warn-color)}.adf-breadcrumb-item-anchor{box-sizing:border-box;color:inherit;display:inline-block;flex:0 1 auto;overflow:hidden;padding:0 2px;text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;width:100%}.adf-breadcrumb-item-anchor:focus{outline:1px solid var(--theme-accent-color-a200);outline-offset:-1px}.adf-breadcrumb-item-current{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}]}],Yt.propDecorators={folderNode:[{type:n.Input}],root:[{type:n.Input}],rootId:[{type:n.Input}],target:[{type:n.Input}],transform:[{type:n.Input}],dropdown:[{type:n.ViewChild,args:["dropdown"]}],maxItems:[{type:n.Input}],readOnly:[{type:n.Input}],navigate:[{type:n.Output}]};var zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return G(t,e),t.prototype.recalculateNodes=function(){var e=this.transform?this.transform(this.folderNode):this.folderNode;this.route=this.parseRoute(e),this.currentNode=this.route[this.route.length-1],this.previousNodes=this.route.slice(0,this.route.length-1).reverse()},t.prototype.open=function(){this.dropdown&&(this.dropdown.open(),this.dropdown.focus())},t.prototype.hasPreviousNodes=function(){return this.previousNodes.length>0},t}(Yt);zt.decorators=[{type:n.Component,args:[{selector:"adf-dropdown-breadcrumb",template:'<nav *ngIf="route.length > 0" class="adf-dropdown-breadcrumb-container"\n     role="navigation"\n     [attr.aria-label]="\'BREADCRUMB.ARIA-LABEL.BREADCRUMB\' | translate">\n\n    <button\n        [tabindex]="hasPreviousNodes() ? 0 : -1"\n        class="adf-dropdown-breadcrumb-trigger"\n        (click)="open()"\n        [attr.aria-label]="\'BREADCRUMB.ARIA-LABEL.DROPDOWN\' | translate"\n        data-automation-id="dropdown-breadcrumb-trigger">\n        <mat-icon [class.adf-isRoot]="!hasPreviousNodes()">folder</mat-icon>\n    </button>\n\n    <mat-icon class="adf-dropdown-breadcrumb-item-chevron">chevron_right</mat-icon>\n\n    <div class="adf-dropdown-breadcrumb-path">\n        <mat-select\n            #dropdown\n            *ngIf="hasPreviousNodes()"\n            tabindex="-1"\n            data-automation-id="dropdown-breadcrumb-path">\n\n            <mat-option\n                *ngFor="let node of previousNodes;"\n                (click)="onRoutePathClick(node, $event)"\n                (onSelectionChange)="onRouteClick(node)"\n                class="adf-dropdown-breadcrumb-path-option"\n                data-automation-class="dropdown-breadcrumb-path-option"\n                [disabled]="readOnly">\n                {{ node.name | translate }}\n            </mat-option>\n        </mat-select>\n    </div>\n\n    <span\n        class="adf-current-folder"\n        [class.adf-isRoot]="!hasPreviousNodes()"\n        data-automation-id="current-folder"\n        aria-current="location">{{ currentNode.name }}\n    </span>\n</nav>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-dropdown-breadcrumb"},styles:[".adf-dropdown-breadcrumb{color:var(--theme-text-color);display:flex;flex:1;font-size:14px;font-weight:600;letter-spacing:-.2px;line-height:24px;margin-top:10px;overflow:hidden}.adf-dropdown-breadcrumb .mat-icon{height:35px}.adf-dropdown-breadcrumb-container{cursor:default;display:flex;list-style-type:none;margin:0;overflow:hidden;padding:0}.adf-dropdown-breadcrumb-trigger{background:transparent;border:none;cursor:pointer;padding:0;width:25px}.adf-dropdown-breadcrumb-trigger:focus{color:var(--theme-primary-color);outline:none}.adf-dropdown-breadcrumb-trigger.adf-isRoot{cursor:not-allowed}.adf-dropdown-breadcrumb-path{height:0;margin-top:35px;overflow:hidden;width:0}.adf-dropdown-breadcrumb-path.mat-select{width:0}.adf-current-folder{color:var(--theme-foreground-text-color);display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:75%}.adf-dropdown-breadcrumb-path-option.mat-option{font-size:13px;height:28px;line-height:28px;padding:0 12px}.adf-dropdown-breadcrumb-path-option.mat-option:first-child{padding-top:4px}.adf-dropdown-breadcrumb-path-option.mat-option:last-child{padding-bottom:4px}[dir=ltr] .adf-dropdown-breadcrumb-path{margin-left:-30px}[dir=ltr] .adf-current-folder{margin-left:30px}[dir=rtl] .adf-dropdown-breadcrumb-path{margin-right:-30px}[dir=rtl] .adf-current-folder{margin-right:30px}"]}]}],zt.propDecorators={dropdown:[{type:n.ViewChild,args:["dropdown"]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Qt=function(){};Qt.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,C.CoreModule],exports:[Yt,zt],declarations:[Yt,zt]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Wt=function(){function e(e,t){this.sanitizer=t,e=e||{},this.title=e.title||"ADF_CONFIRM_DIALOG.CONFIRM",this.message=e.message||"ADF_CONFIRM_DIALOG.MESSAGE",this.yesLabel=e.yesLabel||"ADF_CONFIRM_DIALOG.YES_LABEL",this.thirdOptionLabel=e.thirdOptionLabel,this.noLabel=e.noLabel||"ADF_CONFIRM_DIALOG.NO_LABEL",this.htmlContent=e.htmlContent}return e.prototype.sanitizedHtmlContent=function(){return this.sanitizer.sanitize(n.SecurityContext.HTML,this.htmlContent)},e}();Wt.decorators=[{type:n.Component,args:[{selector:"adf-confirm-dialog",template:'<h1 mat-dialog-title data-automation-id="adf-confirm-dialog-title">{{ title | translate }}</h1>\n<mat-dialog-content>\n    <p *ngIf="!htmlContent; else cutomContent" data-automation-id="adf-confirm-dialog-base-message">\n        {{ message | translate }}\n    </p>\n    <ng-template #cutomContent>\n        <span [innerHTML]="sanitizedHtmlContent()" data-automation-id="adf-confirm-dialog-custom-content">\n        </span>\n    </ng-template>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <span class="adf-dialog-spacer" data-automation-id="adf-confirm-dialog-spacer"></span>\n    <button id="adf-confirm-accept" mat-button color="primary" data-automation-id="adf-confirm-dialog-confirmation"\n        [mat-dialog-close]="true">{{ yesLabel | translate }}</button>\n    <button id="adf-confirm-all" mat-button *ngIf="thirdOptionLabel" [mat-dialog-close]="thirdOptionLabel" data-automation-id="adf-confirm-dialog-confirm-all">{{ thirdOptionLabel | translate }}</button>\n    <button id="adf-confirm-cancel" mat-button [mat-dialog-close]="false" data-automation-id="adf-confirm-dialog-reject"\n        cdkFocusInitial>{{ noLabel | translate }}</button>\n</mat-dialog-actions>\n',host:{class:"adf-confirm-dialog"},encapsulation:n.ViewEncapsulation.None,styles:[".adf-dialog-spacer{flex:1 1 auto}.adf-confirm-dialog .mat-dialog-actions .mat-button-wrapper{text-transform:uppercase}"]}]}],Wt.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]},{type:P.DomSanitizer}]};var Xt=function(){function e(e){this.alfrescoApi=e}return Object.defineProperty(e.prototype,"contentApi",{get:function(){return this._contentApi||(this._contentApi=new w.ContentApi(this.alfrescoApi.getInstance())),this._contentApi},enumerable:!1,configurable:!0}),e.prototype.getVersionContentUrl=function(e,t,n){var i=this.contentApi.getContentUrl(e,n);return i=i.replace("/content","/versions/"+t+"/content"),T.of(i)},e}();Xt.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Xt(n.ɵɵinject(C.AlfrescoApiService))},token:Xt,providedIn:"root"}),Xt.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Xt.ctorParameters=function(){return[{type:C.AlfrescoApiService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Kt=function(){function e(e,t,i,o){this.alfrescoApi=e,this.contentService=t,this.contentVersionService=i,this.dialog=o,this.versions=[],this.isLoading=!0,this.showComments=!0,this.allowDownload=!0,this.allowViewVersions=!0,this.showActions=!0,this.restored=new n.EventEmitter,this.deleted=new n.EventEmitter,this.viewVersion=new n.EventEmitter}return Object.defineProperty(e.prototype,"contentApi",{get:function(){var e;return this._contentApi=null!==(e=this._contentApi)&&void 0!==e?e:new w.ContentApi(this.alfrescoApi.getInstance()),this._contentApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versionsApi",{get:function(){var e;return this._versionsApi=null!==(e=this._versionsApi)&&void 0!==e?e:new w.VersionsApi(this.alfrescoApi.getInstance()),this._versionsApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodesApi",{get:function(){var e;return this._nodesApi=null!==(e=this._nodesApi)&&void 0!==e?e:new w.NodesApi(this.alfrescoApi.getInstance()),this._nodesApi},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){this.loadVersionHistory()},e.prototype.canUpdate=function(){return this.contentService.hasAllowableOperations(this.node,"update")&&this.versions.length>1},e.prototype.canDelete=function(){return this.contentService.hasAllowableOperations(this.node,"delete")&&this.versions.length>1},e.prototype.restore=function(e){var t=this;this.canUpdate()&&this.versionsApi.revertVersion(this.node.id,e,{majorVersion:!0,comment:""}).then((function(){return t.nodesApi.getNode(t.node.id,{include:["permissions","path","isFavorite","allowableOperations"]})})).then((function(e){return t.onVersionRestored(e)}))},e.prototype.onViewVersion=function(e){this.viewVersion.emit(e)},e.prototype.loadVersionHistory=function(){var e=this;this.isLoading=!0,this.versionsApi.listVersionHistory(this.node.id).then((function(t){e.versions=t.list.entries,e.isLoading=!1}))},e.prototype.downloadVersion=function(e){var t=this;this.allowDownload&&this.contentVersionService.getVersionContentUrl(this.node.id,e,!0).subscribe((function(e){return t.downloadContent(e)}))},e.prototype.deleteVersion=function(e){var t=this;this.canUpdate()&&this.dialog.open(Wt,{data:{title:"ADF_VERSION_LIST.CONFIRM_DELETE.TITLE",message:"ADF_VERSION_LIST.CONFIRM_DELETE.MESSAGE",yesLabel:"ADF_VERSION_LIST.CONFIRM_DELETE.YES_LABEL",noLabel:"ADF_VERSION_LIST.CONFIRM_DELETE.NO_LABEL"},minWidth:"250px"}).afterClosed().subscribe((function(n){!0===n&&t.versionsApi.deleteVersion(t.node.id,e).then((function(){return t.onVersionDeleted(t.node)}))}))},e.prototype.onVersionDeleted=function(e){this.loadVersionHistory(),this.deleted.emit(e)},e.prototype.onVersionRestored=function(e){this.loadVersionHistory(),this.restored.emit(null==e?void 0:e.entry)},e.prototype.downloadContent=function(e){if(e){var t=document.createElement("a");t.style.display="none",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},e}();Kt.decorators=[{type:n.Component,args:[{selector:"adf-version-list",template:'<mat-list class="adf-version-list" *ngIf="!isLoading; else loading_template">\n    <mat-list-item *ngFor="let version of versions; let idx = index">\n        <mat-icon mat-list-icon>insert_drive_file</mat-icon>\n        <h4 mat-line class="adf-version-list-item-name" [id]="\'adf-version-list-item-name-\' + version.entry.id" >{{version.entry.name}}</h4>\n        <p mat-line>\n            <span class="adf-version-list-item-version"  [id]="\'adf-version-list-item-version-\' + version.entry.id" >{{version.entry.id}}</span> -\n            <span class="adf-version-list-item-date"     [id]="\'adf-version-list-item-date-\' + version.entry.id" >{{version.entry.modifiedAt | date}}</span>\n        </p>\n        <p mat-line [id]="\'adf-version-list-item-comment-\'+ version.entry.id" class="adf-version-list-item-comment"\n           *ngIf="showComments">{{version.entry.versionComment}}</p>\n\n        <div *ngIf="showActions">\n            <mat-menu [id]="\'adf-version-list-action-menu-\'+version.entry.id"\n                      #versionMenu="matMenu" yPosition="below" xPosition="before">\n                <ng-container *adf-acs-version="\'7\'">\n                    <button *ngIf="allowViewVersions"\n                            [id]="\'adf-version-list-action-view-\'+version.entry.id"\n                            mat-menu-item\n                            (click)="onViewVersion(version.entry.id)">\n                        {{ \'ADF_VERSION_LIST.ACTIONS.VIEW\' | translate }}\n                    </button>\n                </ng-container>\n                <button\n                    [id]="\'adf-version-list-action-restore-\'+version.entry.id"\n                    [disabled]="!canUpdate()"\n                    mat-menu-item\n                    (click)="restore(version.entry.id)">\n                    {{ \'ADF_VERSION_LIST.ACTIONS.RESTORE\' | translate }}\n                </button>\n                <button *ngIf="allowDownload"\n                        [id]="\'adf-version-list-action-download-\'+version.entry.id"\n                        mat-menu-item\n                        (click)="downloadVersion(version.entry.id)">\n                    {{ \'ADF_VERSION_LIST.ACTIONS.DOWNLOAD\' | translate }}\n                </button>\n                <button\n                    [disabled]="!canDelete()"\n                    [id]="\'adf-version-list-action-delete-\'+version.entry.id"\n                    (click)="deleteVersion(version.entry.id)"\n                    mat-menu-item>\n                    {{ \'ADF_VERSION_LIST.ACTIONS.DELETE\' | translate }}\n                </button>\n            </mat-menu>\n\n            <button mat-icon-button [matMenuTriggerFor]="versionMenu" [id]="\'adf-version-list-action-menu-button-\'+version.entry.id">\n                <mat-icon>more_vert</mat-icon>\n            </button>\n        </div>\n    </mat-list-item>\n</mat-list>\n\n<ng-template #loading_template>\n    <mat-progress-bar data-automation-id="version-history-loading-bar" mode="indeterminate"\n                      color="accent"></mat-progress-bar>\n</ng-template>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-version-list"},styles:[".adf-version-list .mat-list-item-content{border-bottom:1px solid #d8d8d8}.adf-version-list-item-version{font-weight:700}.adf-version-list-item-date{opacity:.6}.adf-version-list-item-comment{opacity:.5}"]}]}],Kt.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.ContentService},{type:Xt},{type:c.MatDialog}]},Kt.propDecorators={node:[{type:n.Input}],showComments:[{type:n.Input}],allowDownload:[{type:n.Input}],allowViewVersions:[{type:n.Input}],showActions:[{type:n.Input}],restored:[{type:n.Output}],deleted:[{type:n.Output}],viewVersion:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Zt=function(){function e(e,t){this.contentService=e,this.alfrescoApiService=t,this.showComments=!0,this.showVersionComparison=!1,this.allowDownload=!0,this.uploadSuccess=new n.EventEmitter,this.uploadError=new n.EventEmitter,this.uploadCancel=new n.EventEmitter,this.viewVersion=new n.EventEmitter,this.uploadState="close"}return e.prototype.ngOnInit=function(){this.newFileVersion&&this.toggleNewVersion()},e.prototype.refresh=function(e){this.alfrescoApiService.nodeUpdated.next(e),this.versionListComponent.loadVersionHistory(),this.uploadSuccess.emit(e),this.uploadState="close"},e.prototype.onUploadSuccess=function(e){this.showVersionComparison=!1,this.newFileVersion=null,this.alfrescoApiService.nodeUpdated.next(e.value.entry),this.versionListComponent.loadVersionHistory(),this.uploadSuccess.emit(e.value.entry),this.uploadState="close"},e.prototype.onUploadError=function(e){this.uploadError.emit(e)},e.prototype.onUploadCancel=function(){this.uploadState="close",this.showVersionComparison=!1,this.newFileVersion=null,this.uploadCancel.emit(!0)},e.prototype.onViewVersion=function(e){this.viewVersion.emit(e)},e.prototype.toggleNewVersion=function(){this.uploadState="open"===this.uploadState?"close":"open"},e.prototype.canUpdate=function(){return this.contentService.hasAllowableOperations(this.node,"update")},e}();Zt.decorators=[{type:n.Component,args:[{selector:"adf-version-manager",template:'<div class="adf-new-version-container">\n\n    <adf-version-comparison *ngIf="showVersionComparison" [node]="node" [newFileVersion]="newFileVersion"></adf-version-comparison>\n\n    <div class="adf-new-version-uploader-container" id="adf-new-version-uploader-container" fxLayout="row" fxLayoutAlign="end center" [@uploadToggle]="uploadState">\n        <table class="adf-version-upload" *ngIf="uploadState !== \'close\' && !versionList.isLoading">\n            <tr>\n                <td>\n                    <adf-version-upload\n                        id="adf-version-upload-button"\n                        [node]="node"\n                        [newFileVersion]="newFileVersion"\n                        [currentVersion]="versionList?.versions[0]?.entry"\n                        (success)="onUploadSuccess($event)"\n                        (cancel)="onUploadCancel()"\n                        (error)="onUploadError($event)">\n                    </adf-version-upload>\n                </td>\n            </tr>\n        </table>\n    </div>\n\n    <div class="adf-version-list-container">\n        <div class="adf-version-list-table">\n            <div>\n                <button mat-raised-button\n                        id="adf-show-version-upload-button"\n                        (click)="toggleNewVersion()" color="primary"\n                        *ngIf="uploadState ===\'close\'">{{\n                    \'ADF_VERSION_LIST.ACTIONS.UPLOAD.ADD\'|\n                    translate }}\n                </button>\n            </div>\n            <div>\n\n                <adf-version-list\n                    #versionList\n                    [node]="node"\n                    [allowDownload]="allowDownload"\n                    [showComments]="showComments"\n                    (deleted)="refresh($event)"\n                    (restored)="refresh($event)"\n                    (viewVersion)="onViewVersion($event)">\n                </adf-version-list>\n            </div>\n        </div>\n    </div>\n</div>\n',animations:[M.trigger("uploadToggle",[M.state("open",M.style({height:"175px",opacity:1,visibility:"visible"})),M.state("close",M.style({height:"0%",opacity:0,visibility:"hidden"})),M.transition("open => close",[M.style({visibility:"hidden"}),M.animate("0.4s cubic-bezier(0.25, 0.8, 0.25, 1)")]),M.transition("close => open",[M.style({visibility:"visible"}),M.animate("0.4s cubic-bezier(0.25, 0.8, 0.25, 1)")])])],encapsulation:n.ViewEncapsulation.None,styles:["adf-version-manager .mat-list .mat-3-line{height:auto!important;width:100%!important}adf-version-manager .mat-list-item-content{padding:16px 0!important}.adf-version-list-item-comment.mat-line{height:100%;overflow:unset!important;white-space:unset!important;word-break:break-all}.adf-button.adf-upload-new-version{box-shadow:none;float:left;height:175px;position:relative;width:100%}.adf-new-version-uploader-container{float:left;height:0;padding:16px 0;position:relative;width:100%}.adf-new-version-container{height:inherit;overflow:hidden}.adf-version-list-table,.adf-version-upload-table{width:100%}.adf-version-list{width:100%!important}.adf-new-version-uploader-container,.adf-version-list{float:left!important}"]}]}],Zt.ctorParameters=function(){return[{type:C.ContentService},{type:C.AlfrescoApiService}]},Zt.propDecorators={node:[{type:n.Input}],newFileVersion:[{type:n.Input}],showComments:[{type:n.Input}],showVersionComparison:[{type:n.Input}],allowDownload:[{type:n.Input}],uploadSuccess:[{type:n.Output}],uploadError:[{type:n.Output}],uploadCancel:[{type:n.Output}],viewVersion:[{type:n.Output}],versionListComponent:[{type:n.ViewChild,args:["versionList",{static:!0}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Jt=function(){function e(e,t){this.contentService=e,this.uploadService=t,this.semanticVersion="minor",this.uploadVersion=!1,this.disabled=!1,this.onDestroy$=new T.Subject,this.majorVersion="2.0",this.minorVersion="1.1",this.showUploadButton=!0,this.showCancelButton=!0,this.success=new n.EventEmitter,this.error=new n.EventEmitter,this.cancel=new n.EventEmitter,this.versionChanged=new n.EventEmitter,this.commentChanged=new n.EventEmitter,this.uploadStarted=new n.EventEmitter}return Object.defineProperty(e.prototype,"currentVersion",{set:function(e){e&&(this.minorVersion=this.getNextMinorVersion(e.id),this.majorVersion=this.getNextMajorVersion(e.id))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.uploadService.fileUploadStarting.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.disabled=!0,e.uploadStarted.emit(t)}))},e.prototype.canUpload=function(){return this.contentService.hasAllowableOperations(this.node,"update")&&!this.disabled},e.prototype.isMajorVersion=function(){return"minor"!==this.semanticVersion},e.prototype.cancelUpload=function(){this.disabled=!1,this.cancel.emit()},e.prototype.onVersionChange=function(){this.versionChanged.emit(this.isMajorVersion())},e.prototype.onCommentChange=function(){this.commentChanged.emit(this.comment)},e.prototype.onSuccess=function(e){this.disabled=!1,this.success.emit(e)},e.prototype.onError=function(e){this.disabled=!1,this.error.emit(e)},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},e.prototype.getNextMinorVersion=function(e){var t=this.getParsedVersion(e);return t.major+"."+(t.minor+1)},e.prototype.getNextMajorVersion=function(e){return this.getParsedVersion(e).major+1+".0"},e.prototype.getParsedVersion=function(e){return{minor:-1!==e.indexOf(".")?Number(e.substr(e.indexOf(".")+1)):0,major:parseInt(e,10)}},e}();Jt.decorators=[{type:n.Component,args:[{selector:"adf-version-upload",template:'<div class="adf-new-version-max-width">\n    <mat-radio-group class="adf-new-version-radio-group" [(ngModel)]="semanticVersion" (change)="onVersionChange()">\n        <mat-radio-button class="adf-new-version-radio-button" id="adf-new-version-minor"[value]="\'minor\'">\n            {{ \'ADF_VERSION_LIST.ACTIONS.UPLOAD.MINOR\' | translate: { version: minorVersion } }}\n        </mat-radio-button>\n        <mat-radio-button class="adf-new-version-radio-button" id="adf-new-version-major" [value]="\'major\'">\n            {{ \'ADF_VERSION_LIST.ACTIONS.UPLOAD.MAJOR\' | translate: { version: majorVersion } }}\n        </mat-radio-button>\n    </mat-radio-group>\n    <mat-form-field class="adf-new-version-max-width">\n                    <textarea matInput [(ngModel)]="comment" class="adf-new-version-text-area" id="adf-new-version-text-area"\n                              (change)="onCommentChange()"\n                              placeholder="{{ \'ADF_VERSION_LIST.ACTIONS.UPLOAD.COMMENT\' | translate }}"></textarea>\n    </mat-form-field>\n\n</div>\n<div class="adf-version-upload-buttons">\n    <adf-upload-version-button *ngIf="showUploadButton"\n        data-automation-id="adf-new-version-file-upload"\n        staticTitle="{{ \'ADF_VERSION_LIST.ACTIONS.UPLOAD.TITLE\' | translate }}"\n        [node]="node"\n        [disabled]="!canUpload()"\n        [rootFolderId]="node.parentId"\n        tooltip="{{ \'ADF_VERSION_LIST.ACTIONS.UPLOAD.TOOLTIP\' | translate }}"\n        [comment]="comment"\n        [versioning]="true"\n        [file]="newFileVersion"\n        [majorVersion]="isMajorVersion()"\n        (success)="onSuccess($event)"\n        (error)="onError($event)">\n    </adf-upload-version-button>\n    <button mat-raised-button (click)="cancelUpload()" id="adf-new-version-cancel"  *ngIf="showCancelButton" >{{\n        \'ADF_VERSION_LIST.ACTIONS.UPLOAD.CANCEL\'| translate }}\n    </button>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-version-upload"},styles:[".adf-new-version-radio-group{display:inline-flex;flex-direction:column}.adf-new-version-radio-button{margin:5px}.adf-version-upload-buttons{display:flex;float:right;justify-content:space-between;width:100%}.adf-new-version-max-width{float:right;width:100%}.adf-new-version-text-area{resize:none!important}"]}]}],Jt.ctorParameters=function(){return[{type:C.ContentService},{type:C.UploadService}]},Jt.propDecorators={node:[{type:n.Input}],newFileVersion:[{type:n.Input}],showUploadButton:[{type:n.Input}],showCancelButton:[{type:n.Input}],currentVersion:[{type:n.Input}],success:[{type:n.Output}],error:[{type:n.Output}],cancel:[{type:n.Output}],versionChanged:[{type:n.Output}],commentChanged:[{type:n.Output}],uploadStarted:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var en=function(e){this.thumbnailService=e};en.decorators=[{type:n.Component,args:[{selector:"adf-version-comparison",template:'<div class="adf-version-comparison-content">\n    <div class="adf-version-current">\n        <p>{{\'ADF_VERSION_COMPARISON.CURRENT_VERSION\'|translate }}</p>\n        <img [attr.aria-label]="\'ADF_VERSION_COMPARISON.ACCESSIBILITY.ICON_TEXT\' | translate:\n        { type: (node.content.mimeType | fileType | uppercase) | translate  }"\n             [attr.alt]="\'ADF_VERSION_COMPARISON.ACCESSIBILITY.ICON_TEXT\' | translate:\n             { type: (node.content.mimeType | fileType | uppercase) | translate }"\n             src="{{thumbnailService.getMimeTypeIcon(node.content.mimeType)}}"/>\n        <p class="adf-version-comparison-node-name" title="{{node.name}}">{{node.name}}</p>\n    </div>\n    <span class="material-icons adf-version-arrow-icon">keyboard_arrow_right</span>\n    <div class="adf-version-new">\n        <p>{{\'ADF_VERSION_COMPARISON.NEW_VERSION\'|translate }}</p>\n        <img [attr.aria-label]="\'ADF_VERSION_COMPARISON.ACCESSIBILITY.ICON_TEXT\' | translate:\n        { type: (newFileVersion.type | fileType | uppercase) | translate  }"\n             [attr.alt]="\'ADF_VERSION_COMPARISON.ACCESSIBILITY.ICON_TEXT\' | translate:\n             { type: (newFileVersion.type | fileType | uppercase) | translate }"\n            src="{{thumbnailService.getMimeTypeIcon(newFileVersion.type)}}"/>\n        <p class="adf-version-comparison-file-name" title="{{newFileVersion.name}}">{{newFileVersion.name}}</p>\n    </div>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-version-comparison-content{align-content:center;align-items:center;display:flex;justify-content:space-around}.adf-version-current,.adf-version-new{align-items:center;display:flex;flex-direction:column}.adf-version-current img,.adf-version-new img{width:100px}.adf-version-arrow-icon{font-size:var(--theme-display-4-font-size)}.adf-version-comparison-file-name,.adf-version-comparison-node-name{overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;width:120px}"]}]}],en.ctorParameters=function(){return[{type:C.ThumbnailService}]},en.propDecorators={node:[{type:n.Input}],newFileVersion:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var tn=function(){};tn.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,C.CoreModule,ct,D.FormsModule],exports:[Jt,Zt,Kt,D.FormsModule,en],declarations:[Jt,Zt,Kt,en]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var nn=function(){function e(){this.name="",this.path=""}return e.prototype.ngOnInit=function(){if(this.row){this.name=this.row.getValue("name");var e=this.row.getValue("path");e&&(this.path=e.name||"")}},e}();nn.decorators=[{type:n.Component,args:[{selector:"adf-name-location-cell",template:'\n        <div class="adf-name-location-cell-name adf-datatable-cell-value" [title]="name">{{ name }}</div>\n        <div class="adf-name-location-cell-location adf-datatable-cell-value" [title]="path">{{ path }}</div>\n    ',encapsulation:n.ViewEncapsulation.None,changeDetection:n.ChangeDetectionStrategy.OnPush,host:{class:"adf-name-location-cell adf-datatable-content-cell"},styles:[".adf-name-location-cell{display:grid}.adf-name-location-cell-location{color:var(--theme-text-color);font-size:12px}"]}]}],nn.propDecorators={row:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var on=function(){return!0},rn=function(){function e(e,t,i,o,r,a,s,l){this.customResourcesService=e,this.queryBuilderService=t,this.userPreferencesService=i,this.nodesApiService=o,this.uploadService=r,this.sitesService=a,this.appConfigService=s,this.contentNodeSelectorPanelService=l,this.DEFAULT_PAGINATION=new w.Pagination({maxItems:25,skipCount:0}),this.showSiteList=!0,this.showSearchField=!0,this.showCounter=!1,this.restrictRootToCurrentFolderId=!1,this.currentFolderId=null,this.dropdownHideMyFiles=!1,this.dropdownSiteList=null,this._rowFilter=on,this._excludeSiteContent=[],this.imageResolver=null,this.pageSize=this.DEFAULT_PAGINATION.maxItems,this.selectionMode="single",this.isSelectionValid=on,this.select=new n.EventEmitter,this.navigationChange=new n.EventEmitter,this.siteChange=new n.EventEmitter,this.showingSearch=new n.EventEmitter,this.currentFolder=new n.EventEmitter,this.folderLoaded=new n.EventEmitter,this.nodePaging=null,this.searchTerm="",this.showingSearchResults=!1,this.loadingSearchResults=!1,this.inDialog=!1,this._chosenNode=null,this.selectionWithoutValidation=null,this.folderIdToShow=null,this.breadcrumbFolderTitle=null,this.startSiteGuid=null,this.hasValidQuery=!1,this.showHeader=C.ShowHeaderMode.Never,this.infiniteScroll=!1,this.debounceSearch=200,this.searchInput=new D.FormControl,this.preselectedNodes=[],this.currentUploadBatch=[],this.searchPanelExpanded=!1,this.onDestroy$=new T.Subject}return Object.defineProperty(e.prototype,"rowFilter",{get:function(){return this._rowFilter},set:function(e){this.createRowFilter(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"excludeSiteContent",{get:function(){return this._excludeSiteContent},set:function(e){this._excludeSiteContent=e,this.createRowFilter(this._rowFilter)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showSearch",{get:function(){return this.showSearchField},set:function(e){null!=e&&(this.showSearchField=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showDropdownSiteList",{get:function(){return this.showSiteList},set:function(e){null!=e&&(this.showSiteList=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showFilesInResult",{set:function(e){if(null!=e){var t="TYPE:'cm:folder'"+(e?" OR TYPE:'cm:content'":"");this.queryBuilderService.addFilterQuery(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showNodeCounter",{get:function(){return this.showCounter},set:function(e){this.showCounter=null!=e&&e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chosenNode",{get:function(){return this._chosenNode},set:function(e){this._chosenNode=e,this.select.next(e)},enumerable:!1,configurable:!0}),e.prototype.getSelectedCount=function(){var e;return(null===(e=this.chosenNode)||void 0===e?void 0:e.length)||0},e.prototype.ngOnInit=function(){var e=this;this.searchInput.valueChanges.pipe(O.debounceTime(this.debounceSearch),O.takeUntil(this.onDestroy$)).subscribe((function(t){e.searchTerm=t,e.queryBuilderService.userQuery=t.length>0?t+"*":t,e.queryBuilderService.update()})),this.queryBuilderService.updated.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){t?(e.hasValidQuery=!0,e.prepareDialogForNewSearch(t),e.queryBuilderService.execute(t)):(e.hasValidQuery=!1,e.resetFolderToShow(),e.clearSearch())})),this.queryBuilderService.executed.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.hasValidQuery&&e.showSearchResults(t)})),this.userPreferencesService.select(C.UserPreferenceValues.PaginationSize).pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){return e.pageSize=t})),this.target=this.documentList,this.folderIdToShow=this.currentFolderId,this.currentFolderId&&(this.restrictRootToCurrentFolderId?(this.breadcrumbRootId=this.currentFolderId,this.siteId=this.currentFolderId):this.getStartSite()),this.breadcrumbTransform=this.breadcrumbTransform?this.breadcrumbTransform:null,this.isSelectionValid=this.isSelectionValid?this.isSelectionValid:on,this.onFileUploadEvent(),this.onFileUploadDeletedEvent(),this.resetPagination(),this.setSearchScopeToNodes(),this.documentList.$folderNode.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.currentFolder.emit(t)})),this.sorting=this.appConfigService.get("adf-content-node-selector.sorting",["createdAt","desc"])},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.toggleSearchPanel=function(){this.searchPanelExpanded=!this.searchPanelExpanded},e.prototype.hasCustomModels=function(){var e,t;return(null===(t=null===(e=this.contentNodeSelectorPanelService)||void 0===e?void 0:e.customModels)||void 0===t?void 0:t.length)>0},e.prototype.onFileUploadEvent=function(){var e=this;this.uploadService.fileUploadComplete.pipe(O.debounceTime(500),O.takeUntil(this.onDestroy$)).subscribe((function(t){e.currentUploadBatch.push(t.data),e.uploadService.isUploading()||(e.preselectedNodes=e.getPreselectNodesBasedOnSelectionMode(),e.currentUploadBatch=[],e.documentList.reloadWithoutResettingSelection())}))},e.prototype.onFileUploadDeletedEvent=function(){var e=this;this.uploadService.fileUploadDeleted.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(t){e.documentList.unselectRowFromNodeId(t.file.data.entry.id),e.documentList.reloadWithoutResettingSelection()}))},e.prototype.getStartSite=function(){var e=this;this.nodesApiService.getNode(this.currentFolderId).subscribe((function(t){e.startSiteGuid=e.sitesService.getSiteNameFromNodePath(t),e.startSiteGuid&&e.sitesService.getSite(e.startSiteGuid).subscribe((function(t){t instanceof w.SiteEntry&&e.siteChange.emit(t.entry.title)}))}))},e.prototype.createRowFilter=function(e){var t=this;e||(e=function(){return!0}),this._rowFilter=function(n,i,o){return e(n,i,o)&&!t.isExcludedSiteContent(n)}},e.prototype.isExcludedSiteContent=function(e){var t=e.node.entry;return!!(this._excludeSiteContent&&this._excludeSiteContent.length&&t&&t.properties&&t.properties["st:componentId"])&&!!this._excludeSiteContent.find((function(e){return t.properties["st:componentId"]===e}))},e.prototype.siteChanged=function(e){this.siteId=e.entry.guid,this.setTitleIfCustomSite(e),this.siteChange.emit(e.entry.title),this.queryBuilderService.update()},Object.defineProperty(e.prototype,"breadcrumbFolderNode",{get:function(){var e;return this.showingSearchResults&&(null===(e=this.selectionWithoutValidation)||void 0===e?void 0:e.length)?this.selectionWithoutValidation[0]:this.documentList.folderNode},enumerable:!1,configurable:!0}),e.prototype.prepareDialogForNewSearch=function(e){this.target=e?null:this.documentList,this.target&&this.infinitePaginationComponent.reset(),this.folderIdToShow=null,this.preselectedNodes=[],this.loadingSearchResults=!0,this.addCorrespondingNodeIdsQuery(),this.resetChosenNode()},e.prototype.clear=function(){this.searchTerm="",this.queryBuilderService.userQuery="",this.queryBuilderService.update()},e.prototype.resetFolderToShow=function(){this.folderIdToShow=this.siteId||this.currentFolderId},e.prototype.clearSearch=function(){this.searchTerm="",this.nodePaging=null,this.resetPagination(),this.resetChosenNode(),this.showingSearchResults=!1,this.showingSearch.emit(this.showingSearchResults)},e.prototype.addCorrespondingNodeIdsQuery=function(){var e=this,t="";if(this.customResourcesService.hasCorrespondingNodeIds(this.siteId))this.customResourcesService.getCorrespondingNodeIds(this.siteId).subscribe((function(n){n&&n.length&&n.filter((function(t){return t!==e.siteId})).forEach((function(e){t+=" OR ANCESTOR:'workspace://SpacesStore/"+e+"'"}));var i=e.siteId?"ANCESTOR:'workspace://SpacesStore/"+e.siteId+"'"+t:"";e.queryBuilderService.addFilterQuery(i)}));else{var n=this.siteId?"ANCESTOR:'workspace://SpacesStore/"+this.siteId+"'":"";this.queryBuilderService.addFilterQuery(n)}},e.prototype.setSearchScopeToNodes=function(){this.queryBuilderService.setScope({locations:"nodes"})},e.prototype.showSearchResults=function(e){this.showingSearchResults=!0,this.loadingSearchResults=!1,this.showingSearch.emit(this.showingSearchResults),this.nodePaging=e},e.prototype.onFolderChange=function(e){this.folderIdToShow=e.value.id,this.showingSearchResults=!1,this.infiniteScroll=!1,this.breadcrumbFolderTitle=null,this.preselectedNodes=[],this.clearSearch(),this.navigationChange.emit(e)},e.prototype.onFolderLoaded=function(e){this.updatePaginationAfterRowFilter(e),this.showingSearchResults||this.attemptNodeSelection(this.documentList.folderNode),this.folderLoaded.emit()},e.prototype.updatePaginationAfterRowFilter=function(e){this.documentList.data.getRows().length<e.list.pagination.maxItems&&(e.list.pagination.hasMoreItems=!1)},e.prototype.showBreadcrumbs=function(){return!this.showingSearchResults||this.chosenNode},e.prototype.getNextPageOfSearch=function(e){this.infiniteScroll=!0,this.queryBuilderService.paging.maxItems=e.maxItems,this.queryBuilderService.paging.skipCount=e.skipCount,this.searchTerm.length>0&&this.queryBuilderService.update()},e.prototype.attemptNodeSelection=function(e){e&&this.isSelectionValid(e)&&(this.chosenNode=[e])},e.prototype.resetChosenNode=function(){this.chosenNode=null},e.prototype.onCurrentSelection=function(e){var t=this,n=e.filter((function(e){return t.isSelectionValid(e.entry)}));this.chosenNode=n.map((function(e){return e.entry})),this.selectionWithoutValidation=e.map((function(e){return e.entry}))},e.prototype.setTitleIfCustomSite=function(e){this.customResourcesService.isCustomSource(e.entry.guid)?(this.breadcrumbFolderTitle=e.entry.title,this.documentList.folderNode.path.elements&&(this.breadcrumbFolderNode.name=e.entry.title,this.documentList.folderNode.path.elements=null)):this.breadcrumbFolderTitle=null},e.prototype.hasPreselectNodes=function(){var e;return(null===(e=this.preselectedNodes)||void 0===e?void 0:e.length)>0},e.prototype.isSingleSelectionMode=function(){return"single"===this.selectionMode},e.prototype.getPreselectNodesBasedOnSelectionMode=function(){var e,t=[];return(null===(e=this.currentUploadBatch)||void 0===e?void 0:e.length)&&(t=this.isSingleSelectionMode()?[this.currentUploadBatch[this.currentUploadBatch.length-1]]:this.currentUploadBatch),t},e.prototype.resetPagination=function(){this.queryBuilderService.paging={maxItems:this.pageSize,skipCount:this.DEFAULT_PAGINATION.skipCount}},e}();rn.decorators=[{type:n.Component,args:[{selector:"adf-content-node-selector-panel",template:'<div class="adf-content-node-selector-content">\n    <mat-form-field floatPlaceholder="never" class="adf-content-node-selector-content-input" *ngIf="showSearch">\n        <input matInput\n            id="searchInput"\n            [formControl]="searchInput"\n            type="text"\n            placeholder="{{\'NODE_SELECTOR.SEARCH\' | translate}}"\n            [value]="searchTerm"\n            data-automation-id="content-node-selector-search-input">\n\n        <mat-icon *ngIf="searchTerm.length > 0"\n            matSuffix (click)="clear()"\n            class="adf-content-node-selector-content-input-icon"\n            data-automation-id="content-node-selector-search-clear">clear\n        </mat-icon>\n\n        <mat-icon *ngIf="searchTerm.length === 0"\n            matSuffix\n            class="adf-content-node-selector-content-input-icon"\n            data-automation-id="content-node-selector-search-icon">search\n        </mat-icon>\n\n    </mat-form-field>\n    <adf-sites-dropdown\n        *ngIf="showDropdownSiteList"\n        class="full-width"\n        (change)="siteChanged($event)"\n        [placeholder]="\'NODE_SELECTOR.SELECT_LOCATION\'"\n        [hideMyFiles]="dropdownHideMyFiles"\n        [siteList]="dropdownSiteList"\n        [value]="startSiteGuid"\n        data-automation-id="content-node-selector-sites-combo">\n    </adf-sites-dropdown>\n    <button *ngIf="hasCustomModels()"\n        data-automation-id="adf-toggle-search-panel-button"\n        mat-icon-button\n        (click)="toggleSearchPanel()">\n        <mat-icon>filter_list</mat-icon>\n        {{ \'SEARCH.SEARCH_HEADER.TITLE\' | translate }}\n    </button>\n    <div class="adf-content-node-selector-search-panel-container">\n        <adf-search-panel *ngIf="searchPanelExpanded">\n        </adf-search-panel>\n        <div class="adf-content-node-selector-document-list-container">\n    <adf-toolbar>\n        <adf-toolbar-title>\n            <ng-container *ngIf="!showBreadcrumbs()">\n                <span role="heading" aria-level="3" class="adf-search-results-label">{{ \'NODE_SELECTOR.SEARCH_RESULTS\' | translate }}</span>\n            </ng-container>\n            <adf-dropdown-breadcrumb *ngIf="showBreadcrumbs()"\n                class="adf-content-node-selector-content-breadcrumb"\n                (navigate)="clearSearch()"\n                [target]="documentList"\n                [rootId]="breadcrumbRootId"\n                [transform]="breadcrumbTransform"\n                [folderNode]="breadcrumbFolderNode"\n                [root]="breadcrumbFolderTitle"\n                data-automation-id="content-node-selector-content-breadcrumb">\n            </adf-dropdown-breadcrumb>\n            <ng-container *ngIf="showNodeCounter" [adf-node-counter]="getSelectedCount()"></ng-container>\n        </adf-toolbar-title>\n    </adf-toolbar>\n\n    <div\n        class="adf-content-node-selector-content-list"\n        [class.adf-content-node-selector-content-list-searchLayout]="showingSearchResults"\n        data-automation-id="content-node-selector-content-list">\n        <adf-document-list\n            #documentList\n            [adf-highlight]="searchTerm"\n            adf-highlight-selector=".adf-name-location-cell-name"\n            [showHeader]="showHeader"\n            [node]="nodePaging"\n            [preselectNodes]="preselectedNodes"\n            [maxItems]="pageSize"\n            [rowFilter]="_rowFilter"\n            [imageResolver]="imageResolver"\n            [currentFolderId]="folderIdToShow"\n            [selectionMode]="selectionMode"\n            [contextMenuActions]="false"\n            [contentActions]="false"\n            [allowDropFiles]="false"\n            [sorting]="sorting"\n            sortingMode="server"\n            [where]="where"\n            (folderChange)="onFolderChange($event)"\n            (ready)="onFolderLoaded($event)"\n            (nodeSelected)="onCurrentSelection($event)"\n            data-automation-id="content-node-selector-document-list">\n\n            <adf-custom-empty-content-template>\n                <div>{{ \'NODE_SELECTOR.NO_RESULTS\' | translate }}</div>\n            </adf-custom-empty-content-template>\n\n            <data-columns>\n                <data-column key="$thumbnail" type="image"></data-column>\n                <data-column key="name" type="text" title="ADF-DOCUMENT-LIST.LAYOUT.NAME" class="adf-full-width adf-ellipsis-cell">\n                    <ng-template let-context>\n                        <adf-name-location-cell [row]="context.row"></adf-name-location-cell>\n                    </ng-template>\n                </data-column>\n                <data-column key="modifiedAt" type="date" title="ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON" format="timeAgo" class="adf-content-selector-modified-cell"></data-column>\n                <data-column key="createdByUser.displayName" type="text" title="ADF-DOCUMENT-LIST.LAYOUT.CREATED_BY" class="adf-content-selector-modifier-cell"></data-column>\n                <data-column key="visibility" type="text" title="ADF-DOCUMENT-LIST.LAYOUT.STATUS" class="adf-content-selector-visibility-cell"></data-column>\n            </data-columns>\n\n        </adf-document-list>\n\n        <adf-infinite-pagination\n            [target]="target"\n            [loading]="loadingSearchResults"\n            (loadMore)="getNextPageOfSearch($event)"\n            data-automation-id="content-node-selector-search-pagination">\n            {{ \'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE\' | translate }}\n        </adf-infinite-pagination>\n    </div>\n        </div>\n    </div>\n</div>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-content-node-selector-panel"},providers:[{provide:_e,useClass:wt}],styles:[".adf-search-results-label{color:var(--theme-text-bold-color);flex:1;font-size:14px;font-stretch:normal;font-style:normal;font-weight:600;letter-spacing:-.2px;line-height:1.43}.adf-toolbar .mat-toolbar{border-bottom-width:0;font-size:14px;max-height:48px}.adf-toolbar .mat-toolbar.mat-toolbar-single-row{height:auto}.adf-content-node-selector-search-panel-container{display:flex}.adf-content-node-selector-document-list-container{width:100%}.adf-content-node-selector-content{padding-top:0}.adf-content-node-selector-content-input{width:100%}.adf-content-node-selector-content-input-icon{color:var(--adf-node-selector-icon-color);cursor:pointer}.adf-content-node-selector-content-input-icon:hover{color:var(--theme-fg-base-color)}.adf-content-node-selector-content .mat-form-field-underline .mat-form-field-ripple{height:1px;transition:none}.adf-content-node-selector-content .adf-site-dropdown-container .mat-form-field{display:block;margin-bottom:15px}.adf-content-node-selector-content .adf-site-dropdown-list-element{margin-bottom:0;width:100%}.adf-content-node-selector-content .adf-site-dropdown-list-element .mat-select-trigger{font-size:14px}.adf-content-node-selector-content-breadcrumb .adf-dropdown-breadcrumb-trigger{outline:none}.adf-content-node-selector-content-breadcrumb .adf-dropdown-breadcrumb-trigger .mat-icon{color:var(--adf-node-selector-base-color)}.adf-content-node-selector-content-breadcrumb .adf-dropdown-breadcrumb-trigger .mat-icon:hover{color:var(--adf-node-selector-base-bold-color)}.adf-content-node-selector-content-breadcrumb .adf-dropdown-breadcrumb-trigger:focus .mat-icon{color:var(--theme-primary-color)}.adf-content-node-selector-content-breadcrumb .adf-dropdown-breadcrumb-item-chevron{color:var(--adf-node-selector-base-color)}.adf-content-node-selector-content-list{border:1px solid var(--theme-border-color);border-top:0;height:300px;overflow:auto}.adf-content-node-selector-content-list .adf-highlight{color:var(--theme-primary-color)}.adf-content-node-selector-content-list .adf-datatable-list{border:none}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-selected{height:100%;width:100%}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-selected>svg{fill:#00bcd4!important}.adf-content-node-selector-content-list .adf-datatable-list .adf-no-content-container{border:none!important;text-align:center}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-cell--image{max-width:35px;min-width:35px;width:35px}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-cell:nth-child(2){flex:1 0 95px}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-cell .adf-name-location-cell-location{display:none}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-cell.adf-content-selector-visibility-cell{flex:0 1 auto;min-width:1px}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-cell.adf-content-selector-visibility-cell .adf-datatable-cell-value{padding:0}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-body .adf-datatable-row{min-height:40px}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-body .adf-datatable-row{padding-top:15px}}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-body .adf-datatable-row:first-child .adf-datatable-cell{border-top:none}.adf-content-node-selector-content-list .adf-datatable-list .adf-datatable-body .adf-datatable-row:last-child .adf-datatable-cell{border-bottom:none}.adf-content-node-selector-content-list-searchLayout .adf-datatable-list .adf-datatable-row{min-height:65px!important}.adf-content-node-selector-content-list-searchLayout .adf-datatable-list .adf-datatable-row .adf-datatable-cell .adf-name-location-cell-location{display:block;padding:0 10px}.adf-content-node-selector-content-list-searchLayout .adf-datatable-list .adf-datatable-row .adf-datatable-cell .adf-name-location-cell-name{padding:5px 10px 2px}.adf-content-node-selector-content-list-searchLayout .adf-datatable-list .adf-datatable-row .adf-datatable-cell.adf-content-selector-modified-cell,.adf-content-node-selector-content-list-searchLayout .adf-datatable-list .adf-datatable-row .adf-datatable-cell.adf-content-selector-modifier-cell,.adf-content-node-selector-content-list-searchLayout .adf-datatable-list .adf-datatable-row .adf-datatable-cell.adf-content-selector-visibility-cell{display:none}"]}]}],rn.ctorParameters=function(){return[{type:X},{type:wt,decorators:[{type:n.Inject,args:[_e]}]},{type:C.UserPreferencesService},{type:C.NodesApiService},{type:C.UploadService},{type:C.SitesService},{type:C.AppConfigService},{type:Nt}]},rn.propDecorators={restrictRootToCurrentFolderId:[{type:n.Input}],currentFolderId:[{type:n.Input}],dropdownHideMyFiles:[{type:n.Input}],dropdownSiteList:[{type:n.Input}],where:[{type:n.Input}],rowFilter:[{type:n.Input}],excludeSiteContent:[{type:n.Input}],imageResolver:[{type:n.Input}],pageSize:[{type:n.Input}],selectionMode:[{type:n.Input}],isSelectionValid:[{type:n.Input}],breadcrumbTransform:[{type:n.Input}],showSearch:[{type:n.Input}],showDropdownSiteList:[{type:n.Input}],showFilesInResult:[{type:n.Input}],showNodeCounter:[{type:n.Input}],select:[{type:n.Output}],navigationChange:[{type:n.Output}],siteChange:[{type:n.Output}],showingSearch:[{type:n.Output}],currentFolder:[{type:n.Output}],folderLoaded:[{type:n.Output}],documentList:[{type:n.ViewChild,args:["documentList",{static:!0}]}],highlighter:[{type:n.ViewChild,args:[C.HighlightDirective,{static:!0}]}],infinitePaginationComponent:[{type:n.ViewChild,args:[C.InfinitePaginationComponent,{static:!0}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var an=function(){};an.decorators=[{type:n.NgModule,args:[{imports:[D.FormsModule,D.ReactiveFormsModule,C.CoreModule,t.CommonModule,j,qt,Qt,jt,Gt,ct,re],exports:[rn,nn,J],declarations:[rn,nn,J],providers:[wt]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var sn="CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS";function ln(e){var t=e.value;return!/([\*\"\<\>\\\/\?\:\|])/.test(t)?null:{message:sn+".SPECIAL_CHARACTERS"}}function cn(e){return"."!==(e.value||"").trim().split("").pop()?null:{message:sn+".ENDING_DOT"}}function dn(e){return!!(e.value||"").trim()?null:{message:sn+".ONLY_SPACES"}}
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pn=function(){function e(e,t,i,o,r){this.formBuilder=e,this.dialog=t,this.nodesApi=i,this.translation=o,this.data=r,this.folder=null,this.error=new n.EventEmitter,this.success=new n.EventEmitter,this.editTitle="CORE.FOLDER_DIALOG.EDIT_FOLDER_TITLE",this.createTitle="CORE.FOLDER_DIALOG.CREATE_FOLDER_TITLE",this.nodeType="cm:folder",r&&(this.editTitle=r.editTitle||this.editTitle,this.createTitle=r.createTitle||this.createTitle,this.nodeType=r.nodeType||this.nodeType)}return Object.defineProperty(e.prototype,"editing",{get:function(){return!!this.data.folder},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e,t,n=this.data.folder,i="",o="",r="";if(n){var a=n.properties;i=n.name||"",o=null!==(e=null==a?void 0:a["cm:title"])&&void 0!==e?e:"",r=null!==(t=null==a?void 0:a["cm:description"])&&void 0!==t?t:""}var s={name:[D.Validators.required,ln,cn,dn]};this.form=this.formBuilder.group({name:[i,s.name],title:[o],description:[r]})},Object.defineProperty(e.prototype,"name",{get:function(){return(this.form.value.name||"").trim()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return(this.form.value.title||"").trim()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return(this.form.value.description||"").trim()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return{"cm:title":this.title,"cm:description":this.description}},enumerable:!1,configurable:!0}),e.prototype.create=function(){var e=this,t=e.name,n=e.properties,i=e.nodeType,o=e.nodesApi,r=e.data.parentNodeId;return o.createFolder(r,{name:t,properties:n,nodeType:i})},e.prototype.edit=function(){var e=this,t=e.name,n=e.properties,i=e.nodesApi,o=e.data.folder.id;return i.updateNode(o,{name:t,properties:n})},e.prototype.submit=function(){var e=this,t=this,n=t.form,i=t.dialog,o=t.editing;n.valid&&(o?this.edit():this.create()).subscribe((function(t){e.success.emit(t),i.close(t)}),(function(t){return e.handleError(t)}))},e.prototype.handleError=function(e){var t="CORE.MESSAGES.ERRORS.GENERIC";try{409===JSON.parse(e.message).error.statusCode&&(t="CORE.MESSAGES.ERRORS.EXISTENT_FOLDER")}catch(e){}return this.error.emit(this.translation.instant(t)),e},e}();pn.decorators=[{type:n.Component,args:[{selector:"adf-folder-dialog",template:'<h2 mat-dialog-title>\n    {{ (editing ? editTitle : createTitle) | translate }}\n</h2>\n\n<mat-dialog-content>\n    <form [formGroup]="form" (submit)="submit()">\n        <mat-form-field class="adf-full-width">\n            <input\n                id="adf-folder-name-input"\n                placeholder="{{ \'CORE.FOLDER_DIALOG.FOLDER_NAME.LABEL\' | translate }}"\n                matInput\n                required\n                [formControlName]="\'name\'"\n            />\n\n            <mat-hint *ngIf="form.controls[\'name\'].dirty">\n                <span *ngIf="form.controls[\'name\'].errors?.required">\n                    {{ \'CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS.REQUIRED\' | translate }}\n                </span>\n\n                <span *ngIf="!form.controls[\'name\'].errors?.required && form.controls[\'name\'].errors?.message">\n                    {{ form.controls[\'name\'].errors?.message | translate }}\n                </span>\n            </mat-hint>\n        </mat-form-field>\n\n        <mat-form-field class="adf-full-width">\n            <input\n                id="adf-folder-title-input"\n                matInput\n                placeholder="{{ \'CORE.FOLDER_DIALOG.FOLDER_TITLE.LABEL\' | translate }}"\n                [formControlName]="\'title\'"\n            />\n        </mat-form-field>\n\n        <mat-form-field class="adf-full-width">\n            <textarea\n                id="adf-folder-description-input"\n                matInput\n                placeholder="{{ \'CORE.FOLDER_DIALOG.FOLDER_DESCRIPTION.LABEL\' | translate }}"\n                rows="4"\n                [formControlName]="\'description\'">\n            </textarea>\n        </mat-form-field>\n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions class="adf-dialog-buttons">\n    <span class="adf-fill-remaining-space"></span>\n\n    <button\n        mat-button\n        id="adf-folder-cancel-button"\n        mat-dialog-close>\n        {{ \'CORE.FOLDER_DIALOG.CANCEL_BUTTON.LABEL\' | translate }}\n    </button>\n\n    <button class="adf-dialog-action-button"\n            id="adf-folder-create-button"\n            mat-button\n            (click)="submit()"\n            [disabled]="!form.valid">\n        {{\n        (editing\n        ? \'CORE.FOLDER_DIALOG.UPDATE_BUTTON.LABEL\'\n        : \'CORE.FOLDER_DIALOG.CREATE_BUTTON.LABEL\'\n        ) | translate\n        }}\n    </button>\n</mat-dialog-actions>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-fill-remaining-space{flex:1 1 auto}.adf-full-width,.adf-lock-file-name .mat-checkbox-layout{width:100%}.adf-lock-file-name .mat-checkbox-label{overflow:hidden;text-overflow:ellipsis}.adf-lock-file-name .mat-checkbox-inner-container{margin:auto 8px auto 0}.adf-dialog-buttons button{text-transform:uppercase}.adf-dialog-action-button:enabled{color:var(--theme-primary-color)}.adf-dialog-action-button:disabled>span{color:var(--theme-text-color)}"]}]}],pn.ctorParameters=function(){return[{type:D.FormBuilder},{type:c.MatDialogRef},{type:C.NodesApiService},{type:C.TranslationService},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]}]},pn.propDecorators={error:[{type:n.Output}],success:[{type:n.Output}]};var un=function(){function e(e,t,i,o){this.alfrescoApiService=e,this.sitesService=t,this.formBuilder=i,this.dialog=o,this.error=new n.EventEmitter,this.success=new n.EventEmitter,this.onDestroy$=new T.Subject,this.createTitle="LIBRARY.DIALOG.CREATE_TITLE",this.libraryTitleExists=!1,this.visibilityOptions=[{value:"PUBLIC",label:"LIBRARY.VISIBILITY.PUBLIC",disabled:!1},{value:"PRIVATE",label:"LIBRARY.VISIBILITY.PRIVATE",disabled:!1},{value:"MODERATED",label:"LIBRARY.VISIBILITY.MODERATED",disabled:!1}],this.disableCreateButton=!1}return Object.defineProperty(e.prototype,"queriesApi",{get:function(){var e;return this._queriesApi=null!==(e=this._queriesApi)&&void 0!==e?e:new w.QueriesApi(this.alfrescoApiService.getInstance()),this._queriesApi},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t={id:[D.Validators.required,D.Validators.maxLength(72),this.forbidSpecialCharacters],title:[D.Validators.required,this.forbidOnlySpaces,D.Validators.minLength(2),D.Validators.maxLength(256)],description:[D.Validators.maxLength(512)]};this.form=this.formBuilder.group({title:[null,t.title],id:[null,t.id,this.createSiteIdValidator()],description:["",t.description]}),this.visibilityOption=this.visibilityOptions[0].value,this.form.controls.title.valueChanges.pipe(O.debounceTime(500),O.mergeMap((function(t){return e.checkLibraryNameExists(t)}),(function(e){return e})),O.takeUntil(this.onDestroy$)).subscribe((function(t){!e.form.controls.id.dirty&&e.canGenerateId(t)&&(e.form.patchValue({id:e.sanitize(t.trim())}),e.form.controls.id.markAsTouched())}))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(e.prototype,"title",{get:function(){return(this.form.value.title||"").trim()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return(this.form.value.id||"").trim()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return(this.form.value.description||"").trim()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibility",{get:function(){return this.visibilityOption||""},enumerable:!1,configurable:!0}),e.prototype.submit=function(){var e=this,t=this.form,n=this.dialog;t.valid&&(this.disableCreateButton=!0,this.create().pipe(O.finalize((function(){return e.disableCreateButton=!1}))).subscribe((function(t){e.success.emit(t),n.close(t)}),(function(t){return e.handleError(t)})))},e.prototype.visibilityChangeHandler=function(e){this.visibilityOption=e.value},e.prototype.create=function(){var e=this,t=e.title,n={id:e.id,title:t,description:e.description,visibility:e.visibility};return this.sitesService.createSite(n)},e.prototype.sanitize=function(e){return e.replace(/[\s\s]+/g,"-").replace(/[^A-Za-z0-9-]/g,"")},e.prototype.canGenerateId=function(e){return Boolean(e.replace(/[^A-Za-z0-9-]/g,"").length)},e.prototype.handleError=function(e){try{409===JSON.parse(e.message).error.statusCode&&this.form.controls.id.setErrors({message:"LIBRARY.ERRORS.CONFLICT"})}catch(e){}return e},e.prototype.checkLibraryNameExists=function(e){return H(this,void 0,void 0,(function(){var t;return q(this,(function(n){switch(n.label){case 0:t=[],n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.findLibraryByTitle(e)];case 2:return t=n.sent().list.entries,[3,4];case 3:return n.sent(),t=[],[3,4];case 4:return t.length?this.libraryTitleExists=t[0].entry.title.toLowerCase()===e.toLowerCase():this.libraryTitleExists=!1,[2]}}))}))},e.prototype.findLibraryByTitle=function(e){return this.queriesApi.findSites(e,{maxItems:1,fields:["title"]})},e.prototype.forbidSpecialCharacters=function(e){var t=e.value;if(null===t||0===t.length)return null;return!/[^A-Za-z0-9-]/.test(t)?null:{message:"LIBRARY.ERRORS.ILLEGAL_CHARACTERS"}},e.prototype.forbidOnlySpaces=function(e){var t=e.value;return null!==t&&0!==t.length&&!(t||"").trim()?{message:"LIBRARY.ERRORS.ONLY_SPACES"}:null},e.prototype.createSiteIdValidator=function(){var e,t=this;return function(n){return e&&clearTimeout(e),new Promise((function(i){e=setTimeout((function(){return t.sitesService.getSite(n.value).subscribe((function(){return i({message:"LIBRARY.ERRORS.EXISTENT_SITE"})}),(function(){return i(null)}))}),300)}))}},e}();un.decorators=[{type:n.Component,args:[{selector:"adf-library-dialog",template:'<h2 mat-dialog-title>{{ createTitle | translate }}</h2>\n\n<mat-dialog-content>\n  <form novalidate [formGroup]="form" (submit)="submit()">\n    <mat-form-field>\n      <input\n        placeholder="{{ \'LIBRARY.DIALOG.FORM.NAME\' | translate }}"\n        required\n        matInput\n        autofocus\n        formControlName="title"\n        autocomplete="off"\n      />\n\n      <mat-hint *ngIf="libraryTitleExists">{{\n        \'LIBRARY.HINTS.SITE_TITLE_EXISTS\' | translate\n      }}</mat-hint>\n      <mat-error *ngIf="form.controls[\'title\'].hasError(\'maxlength\')">\n        {{ \'LIBRARY.ERRORS.TITLE_TOO_LONG\' | translate }}\n      </mat-error>\n\n      <mat-error *ngIf="form.controls[\'title\'].hasError(\'minlength\')">\n        {{ \'LIBRARY.ERRORS.TITLE_TOO_SHORT\' | translate }}\n      </mat-error>\n\n      <mat-error *ngIf="form.controls[\'title\'].errors?.message">\n        {{ form.controls[\'title\'].errors?.message | translate }}\n      </mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n      <input\n        required\n        placeholder="{{ \'LIBRARY.DIALOG.FORM.SITE_ID\' | translate }}"\n        matInput\n        formControlName="id"\n        autocomplete="off"\n      />\n\n      <mat-error *ngIf="form.controls[\'id\'].errors?.message">\n        {{ form.controls[\'id\'].errors?.message | translate }}\n      </mat-error>\n\n      <mat-error *ngIf="form.controls[\'id\'].hasError(\'maxlength\')">\n        {{ \'LIBRARY.ERRORS.ID_TOO_LONG\' | translate }}\n      </mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n      <textarea\n        matInput\n        placeholder="{{ \'LIBRARY.DIALOG.FORM.DESCRIPTION\' | translate }}"\n        rows="3"\n        formControlName="description"\n      ></textarea>\n\n      <mat-error *ngIf="form.controls[\'description\'].hasError(\'maxlength\')">\n        {{ \'LIBRARY.ERRORS.DESCRIPTION_TOO_LONG\' | translate }}\n      </mat-error>\n    </mat-form-field>\n\n    <mat-radio-group\n      [ngModelOptions]="{ standalone: true }"\n      [(ngModel)]="visibilityOption"\n      (change)="visibilityChangeHandler($event)"\n    >\n      <mat-radio-button\n        color="primary"\n        [disabled]="option.disabled"\n        *ngFor="let option of visibilityOptions"\n        [attr.data-automation-id]="option.value"\n        [value]="option.value"\n        [checked]="visibilityOption.value === option.value"\n      >\n        {{ option.label | translate }}\n      </mat-radio-button>\n    </mat-radio-group>\n  </form>\n</mat-dialog-content>\n\n<mat-dialog-actions class="adf-action-buttons">\n  <button mat-button mat-dialog-close data-automation-id="cancel-library-id">\n    {{ \'LIBRARY.DIALOG.CANCEL\' | translate }}\n  </button>\n\n  <button\n    color="primary"\n    mat-button\n    (click)="submit()"\n    [disabled]="!form.valid || disableCreateButton"\n    data-automation-id="create-library-id"\n  >\n    {{ \'LIBRARY.DIALOG.CREATE\' | translate }}\n  </button>\n</mat-dialog-actions>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-library-dialog"},styles:[".adf-library-dialog .mat-radio-group{display:flex;flex-direction:column;margin:0 0 20px}.adf-library-dialog .mat-radio-group .mat-radio-button{margin:10px 0}.adf-library-dialog .mat-form-field{width:100%}.adf-library-dialog mat-form-field{padding-top:20px}.adf-library-dialog .adf-action-buttons{display:flex;flex-direction:row;justify-content:flex-end}.adf-library-dialog .adf-action-buttons .mat-button{text-transform:uppercase}"]}]}],un.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.SitesService},{type:D.FormBuilder},{type:c.MatDialogRef}]},un.propDecorators={error:[{type:n.Output}],success:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var hn=function(){};hn.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,C.CoreModule,D.FormsModule,D.ReactiveFormsModule,F.MatMomentDatetimeModule,R.MatDatetimepickerModule],declarations:[pn,ee,Wt,un],exports:[pn,ee,Wt,un]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var fn=function(){function e(e,t){this.dialogRef=e,this.content=t,this.parentNodeId="-my-",this.title=null,this.nodeType="cm:folder",this.error=new n.EventEmitter,this.success=new n.EventEmitter}return e.prototype.onClick=function(e){e.preventDefault(),this.openDialog()},Object.defineProperty(e.prototype,"dialogConfig",{get:function(){var t=e.DIALOG_WIDTH,n=this;return{data:{parentNodeId:n.parentNodeId,createTitle:n.title,nodeType:n.nodeType},width:t+"px"}},enumerable:!1,configurable:!0}),e.prototype.openDialog=function(){var e=this,t=this,n=t.dialogRef,i=t.dialogConfig,o=t.content,r=n.open(pn,i);r.componentInstance.error.subscribe((function(t){e.error.emit(t)})),r.componentInstance.success.subscribe((function(t){e.success.emit(t)})),r.afterClosed().subscribe((function(e){e&&o.folderCreate.next(e)}))},e}();fn.DIALOG_WIDTH=400,fn.decorators=[{type:n.Directive,args:[{selector:"[adf-create-folder]"}]}],fn.ctorParameters=function(){return[{type:c.MatDialog},{type:C.ContentService}]},fn.propDecorators={parentNodeId:[{type:n.Input,args:["adf-create-folder"]}],title:[{type:n.Input}],nodeType:[{type:n.Input}],error:[{type:n.Output}],success:[{type:n.Output}],onClick:[{type:n.HostListener,args:["click",["$event"]]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var mn=function(){function e(e,t,i){this.dialogRef=e,this.elementRef=t,this.content=i,this.error=new n.EventEmitter,this.title=null,this.success=new n.EventEmitter}return e.prototype.onClick=function(e){e.preventDefault(),this.folder&&this.openDialog()},Object.defineProperty(e.prototype,"dialogConfig",{get:function(){var t=e.DIALOG_WIDTH;return{data:{folder:this.folder,editTitle:this.title},width:t+"px"}},enumerable:!1,configurable:!0}),e.prototype.openDialog=function(){var e=this,t=this,n=t.dialogRef,i=t.dialogConfig,o=t.content,r=n.open(pn,i);r.componentInstance.error.subscribe((function(t){e.error.emit(t)})),r.componentInstance.success.subscribe((function(t){e.success.emit(t)})),r.afterClosed().subscribe((function(e){e&&o.folderEdit.next(e)}))},e}();mn.DIALOG_WIDTH=400,mn.decorators=[{type:n.Directive,args:[{selector:"[adf-edit-folder]"}]}],mn.ctorParameters=function(){return[{type:c.MatDialog},{type:n.ElementRef},{type:C.ContentService}]},mn.propDecorators={folder:[{type:n.Input,args:["adf-edit-folder"]}],error:[{type:n.Output}],title:[{type:n.Input}],success:[{type:n.Output}],onClick:[{type:n.HostListener,args:["click",["$event"]]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var gn=function(){};gn.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j],declarations:[fn,mn],exports:[fn,mn]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var yn=function(){function e(e){this.fileSizePipe=e}return e.prototype.getProperties=function(e){var t=e.content?e.content.sizeInBytes:"",n=e.content?e.content.mimeTypeName:"",i=e.properties?e.properties["cm:author"]:"",o=e.properties?e.properties["cm:description"]:"",r=e.properties?e.properties["cm:title"]:"";return[new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.NAME",value:e.name,key:"properties.cm:name",editable:!0}),new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.TITLE",value:r,key:"properties.cm:title",editable:!0}),new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.CREATOR",value:e.createdByUser.displayName,key:"createdByUser.displayName",editable:!1}),new C.CardViewDateItemModel({label:"CORE.METADATA.BASIC.CREATED_DATE",value:e.createdAt,key:"createdAt",editable:!1,format:"mediumDate"}),new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.SIZE",value:t,key:"content.sizeInBytes",pipes:[{pipe:this.fileSizePipe}],editable:!1}),new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.MODIFIER",value:e.modifiedByUser.displayName,key:"modifiedByUser.displayName",editable:!1}),new C.CardViewDateItemModel({label:"CORE.METADATA.BASIC.MODIFIED_DATE",value:e.modifiedAt,key:"modifiedAt",editable:!1,format:"mediumDate"}),new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.MIMETYPE",value:n,key:"content.mimeTypeName",editable:!1}),new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.AUTHOR",value:i,key:"properties.cm:author",editable:!0}),new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.DESCRIPTION",value:o,key:"properties.cm:description",multiline:!0,editable:!0})]},e}();yn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new yn(n.ɵɵinject(C.FileSizePipe))},token:yn,providedIn:"root"}),yn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],yn.ctorParameters=function(){return[{type:C.FileSizePipe}]};var vn="d:text",bn="d:mltext",Sn="d:date",In="d:datetime",An="d:int",En="d:long",Cn="d:float",Tn="d:double",wn="d:boolean",On=function(){function e(e,t,n,i){this.logService=e,this.multiValuePipe=t,this.decimalNumberPipe=n,this.appConfig=i,this.valueSeparator=this.appConfig.get("content-metadata.multi-value-pipe-separator")}return e.prototype.translateToCardViewGroups=function(e,t,n){var i=this;return e.map((function(e){var o=Object.assign({},e);return o.properties=i.translateArray(e.properties,t,n),o}))},e.prototype.translateProperty=function(e,t,n){void 0===n&&(n=!1),this.checkECMTypeValidity(e.dataType);var i={label:e.title||e.id,value:t||e.defaultValue,key:"properties."+e.id,default:e.defaultValue,editable:!e.isProtected&&n,constraints:null==e?void 0:e.constraints};return this.transform(i,e.dataType,e.isMultiValued)},e.prototype.translateArray=function(e,t,n){var i=this;return e.map((function(e){return i.translate(e,t,i.getPropertyConstraints(e.name,n))}))},e.prototype.translate=function(e,t,n){var i;t&&!this.isEmpty(t[e.name])&&(i=t[e.name]),this.checkECMTypeValidity(e.dataType);var o={label:e.title||e.name,value:i,key:"properties."+e.name,default:e.defaultValue,editable:!e.protected&&(void 0===e.editable||e.editable),constraints:n};return this.transform(o,e.dataType,e.multiValued)},e.prototype.transform=function(e,t,n){var i;if(this.isListOfValues(e.constraints)){var o=e.constraints[0].parameters.allowedValues.map((function(e){return{key:e,label:e}})),r=Object.assign(e,{options$:T.of(o)});i=new C.CardViewSelectItemModel(r)}else switch(t){case bn:i=new C.CardViewTextItemModel(Object.assign(e,{multiline:!0}));break;case An:case En:i=new C.CardViewIntItemModel(Object.assign(e,{multivalued:n,pipes:[{pipe:this.multiValuePipe,params:[this.valueSeparator]}]}));break;case Cn:case Tn:i=new C.CardViewFloatItemModel(Object.assign(e,{multivalued:n,pipes:[{pipe:this.decimalNumberPipe},{pipe:this.multiValuePipe,params:[this.valueSeparator]}]}));break;case Sn:i=new C.CardViewDateItemModel(Object.assign(e,{multivalued:n,pipes:[{pipe:this.multiValuePipe,params:[this.valueSeparator]}]}));break;case In:i=new C.CardViewDatetimeItemModel(Object.assign(e,{multivalued:n,pipes:[{pipe:this.multiValuePipe,params:[this.valueSeparator]}]}));break;case wn:i=new C.CardViewBoolItemModel(e);break;case vn:default:i=new C.CardViewTextItemModel(Object.assign(e,{multivalued:n,multiline:n,pipes:[{pipe:this.multiValuePipe,params:[this.valueSeparator]}]}))}return i},e.prototype.isListOfValues=function(e){var t;return"LIST"===(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.type)},e.prototype.getPropertyConstraints=function(e,t){var n,i;return null!==(i=null===(n=null==t?void 0:t.properties.find((function(t){return t.id===e})))||void 0===n?void 0:n.constraints)&&void 0!==i?i:[]},e.prototype.checkECMTypeValidity=function(t){-1===e.RECOGNISED_ECM_TYPES.indexOf(t)&&this.logService.error("Unknown type for mapping: "+t)},e.prototype.isEmpty=function(e){return null==e||""===e},e}();On.RECOGNISED_ECM_TYPES=[vn,bn,Sn,In,An,En,Cn,Tn,wn],On.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new On(n.ɵɵinject(C.LogService),n.ɵɵinject(C.MultiValuePipe),n.ɵɵinject(C.DecimalNumberPipe),n.ɵɵinject(C.AppConfigService))},token:On,providedIn:"root"}),On.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],On.ctorParameters=function(){return[{type:C.LogService},{type:C.MultiValuePipe},{type:C.DecimalNumberPipe},{type:C.AppConfigService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xn={properties:{}};function Dn(e,t){return e[t]}function Nn(e,t,n){var i,o,r=Dn(e,t)||xn;return"*"===n?(o=r.properties,i=Object.keys(o).map((function(e){return o[e]}))):i=r.properties[n],i}
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ln=function(){function e(e){this.config=e}return e.prototype.isGroupAllowed=function(e){return!!this.isIncludeAllEnabled()||-1!==Object.keys(this.config).indexOf(e)},e.prototype.reorganiseByConfig=function(e){var t=this,n=this.config;return Object.keys(n).reduce((function(n,i){var o=t.getOrganisedPropertyGroup(e,i);return n.concat(o)}),[]).filter((function(e){return e.properties.length>0}))},e.prototype.appendAllPreset=function(e){var t=this;return Object.keys(e).map((function(n){var i=e[n],o=i.properties;return t.isAspectReadOnly(n)&&Object.keys(o).map((function(e){return t.setReadOnlyProperty(o[e])})),Object.assign({},i,{properties:Object.keys(o).map((function(e){return t.isPropertyReadOnly(e)&&t.setReadOnlyProperty(o[e]),o[e]}))})}))},e.prototype.setReadOnlyProperty=function(e){e.editable=!1},e.prototype.isPropertyReadOnly=function(e){var t=this.config.readOnlyProperties;return Array.isArray(t)?t.includes(e):t===e},e.prototype.isAspectReadOnly=function(e){var t=this.config.readOnlyAspects;return Array.isArray(t)?t.includes(e):t===e},e.prototype.filterExcludedPreset=function(e){var t=this;return this.config.exclude?e.filter((function(e){return!t.config.exclude.includes(e.name)})):e},e.prototype.isIncludeAllEnabled=function(){return this.config.includeAll},e.prototype.getOrganisedPropertyGroup=function(e,t){var n=Dn(e,t),i=[];if(n){var o=this.config[t],r=void 0;r="*"===o?Nn(e,t,o):o.map((function(n){return Nn(e,t,n)})).filter((function(e){return void 0!==e})),i=[{title:n.title,properties:r}]}return i},e}(),Rn=function(){function e(){}return e.prototype.isGroupAllowed=function(){return!0},e.prototype.reorganiseByConfig=function(e){return Object.keys(e).map((function(t){var n=e[t],i=n.properties;return Object.assign({},n,{properties:Object.keys(i).map((function(e){return i[e]}))})}))},e.prototype.filterExcludedPreset=function(e){return e},e.prototype.appendAllPreset=function(){return[]},e.prototype.isIncludeAllEnabled=function(){return!0},e}(),Fn=function(){function e(e){this.config=e}return e.prototype.isGroupAllowed=function(e){return!!this.isIncludeAllEnabled()||this.getMatchingGroups(e).length>0},e.prototype.reorganiseByConfig=function(e){var t=this;return this.config.filter((function(e){return e.items})).map((function(n){var i=t.flattenItems(n.items).reduce((function(n,i){var o="object"==typeof i.property,r=o?i.property.name:i.property,a=Nn(e,i.groupName,r)||[];return o&&(a=t.setPropertyTitle(a,i.property)),a=t.setEditableProperty(a,i),n.concat(a)}),[]);return{title:n.title,properties:i}}))},e.prototype.appendAllPreset=function(e){return Object.keys(e).map((function(t){var n=e[t],i=n.properties;return Object.assign({},n,{properties:Object.keys(i).map((function(e){return i[e]}))})}))},e.prototype.filterExcludedPreset=function(e){var t=this.config.map((function(e){return e.exclude})).find((function(e){return void 0!==e}));return void 0===t?t=[]:"string"==typeof t&&(t=[t]),e.filter((function(e){return!t.includes(e.name)}))},e.prototype.isIncludeAllEnabled=function(){var e=this.config.map((function(e){return e.includeAll})).find((function(e){return void 0!==e}));return void 0!==e&&e},e.prototype.setEditableProperty=function(e,t){return Array.isArray(e)?e.map((function(e){return e.editable=void 0===t.editable||t.editable})):e.editable=void 0===t.editable||t.editable,e},e.prototype.setPropertyTitle=function(e,t){return Array.isArray(e)?e:Object.assign(Object.assign({},e),e.name===t.name&&!!t.title&&{title:t.title})},e.prototype.flattenItems=function(e){return e.reduce((function(e,t){var n=(Array.isArray(t.properties)?t.properties:[t.properties]).map((function(e){return{groupName:t.aspect||t.type,property:e,editable:t.editable}}));return e.concat(n)}),[])},e.prototype.getMatchingGroups=function(e){return this.config.map((function(e){return e.items})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(t){return t.aspect===e||t.type===e}))},e}(),Pn=function(){function e(e,t){this.appConfigService=e,this.logService=t}return e.prototype.get=function(t){var n;void 0===t&&(t="default");try{n=this.appConfigService.config["content-metadata"].presets[t]}catch(i){t!==e.DEFAULT_PRESET_NAME&&this.logService.error("No content-metadata preset for: "+t),n=e.INDIFFERENT_PRESET}return this.createConfig(n)},e.prototype.createConfig=function(e){var t;return t=this.isLayoutOrientedPreset(e)?new Fn(e):this.isAspectOrientedPreset(e)?new Ln(e):new Rn,Object.freeze(t),t},e.prototype.isAspectOrientedPreset=function(e){return this.isObject(e)},e.prototype.isLayoutOrientedPreset=function(e){return Array.isArray(e)},e.prototype.isObject=function(e){return null!=e&&"object"==typeof e},e}();
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Pn.INDIFFERENT_PRESET="*",Pn.DEFAULT_PRESET_NAME="default",Pn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Pn(n.ɵɵinject(C.AppConfigService),n.ɵɵinject(C.LogService))},token:Pn,providedIn:"root"}),Pn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Pn.ctorParameters=function(){return[{type:C.AppConfigService},{type:C.LogService}]};var Mn=function(){function e(e){this.alfrescoApiService=e}return Object.defineProperty(e.prototype,"classesApi",{get:function(){var e;return this._classesApi=null!==(e=this._classesApi)&&void 0!==e?e:new w.ClassesApi(this.alfrescoApiService.getInstance()),this._classesApi},enumerable:!1,configurable:!0}),e.prototype.load=function(e){var t=this,n=e.map((function(e){return e.replace(":","_")})).map((function(e){return T.defer((function(){return t.classesApi.getClass(e)}))}));return T.forkJoin(n).pipe(O.map(this.convertToObject))},e.prototype.convertToObject=function(e){return e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t.name]=t,n))}),{})},e}();Mn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Mn(n.ɵɵinject(C.AlfrescoApiService))},token:Mn,providedIn:"root"}),Mn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Mn.ctorParameters=function(){return[{type:C.AlfrescoApiService}]};var kn=function(){function e(e){this.alfrescoApiService=e}return Object.defineProperty(e.prototype,"typesApi",{get:function(){var e;return this._typesApi=null!==(e=this._typesApi)&&void 0!==e?e:new w.TypesApi(this.alfrescoApiService.getInstance()),this._typesApi},enumerable:!1,configurable:!0}),e.prototype.getContentTypeByPrefix=function(e){return T.from(this.typesApi.getType(e))},e.prototype.getContentTypeChildren=function(e){var t={where:"(parentId in ('"+e+"') and not namespaceUri matches('http://www.alfresco.*'))",include:["properties"]};return T.from(this.typesApi.listTypes(t)).pipe(O.map((function(e){return e.list.entries})))},e}();kn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new kn(n.ɵɵinject(C.AlfrescoApiService))},token:kn,providedIn:"root"}),kn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],kn.ctorParameters=function(){return[{type:C.AlfrescoApiService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var _n=function(){function e(e,t,n){var i=this;this.dialog=e,this.data=t,this.contentTypeService=n,this.typeProperties=[],this.propertyColumns=["name","title","dataType"],this.title=t.title,this.description=t.description,this.confirmMessage=t.confirmMessage,this.nodeType=t.nodeType,this.contentTypeService.getContentTypeByPrefix(this.nodeType).subscribe((function(e){i.currentContentType=e,i.typeProperties=i.currentContentType.entry.properties.filter((function(e){return e.id.startsWith(i.currentContentType.entry.model.namespacePrefix)}))}))}return e.prototype.ngOnInit=function(){var e=this;this.dialog.backdropClick().subscribe((function(){e.close()}))},e.prototype.close=function(){this.data.select.complete()},e.prototype.onCancel=function(){this.close()},e.prototype.onApply=function(){this.data.select.next(!0),this.close()},e}();_n.decorators=[{type:n.Component,args:[{selector:"adf-content-type-dialog",template:'<div class="adf-content-type-dialog">\n    <h2 mat-dialog-title class="adf-content-type-dialog-title" data-automation-id="content-type-dialog-title">{{title |\n        translate}}</h2>\n    <mat-dialog-content class="mat-typography" class="adf-content-type-dialog-content"\n        data-automation-id="content-type-dialog-content">\n        <h4 data-automation-id="content-type-dialog-description">{{description | translate}}</h4>\n        <p data-automation-id="content-type-dialog-confirm-message">{{confirmMessage | translate}}</p>\n        <mat-accordion>\n            <mat-expansion-panel class="adf-content-type-accordion">\n                <mat-expansion-panel-header>\n                    <mat-panel-title>\n                        {{\'CORE.METADATA.CONTENT_TYPE.DIALOG.VIEW_DETAILS\' | translate}}\n                    </mat-panel-title>\n                </mat-expansion-panel-header>\n                <table mat-table [dataSource]="typeProperties"\n                    *ngIf="typeProperties?.length > 0" class="adf-content-type-table">\n                    <ng-container matColumnDef="name">\n                        <th mat-header-cell *matHeaderCellDef> {{\'CORE.METADATA.CONTENT_TYPE.DIALOG.PROPERTY.NAME\' |\n                            translate}} </th>\n                        <td mat-cell *matCellDef="let property"> {{property.id}} </td>\n                    </ng-container>\n                    <ng-container matColumnDef="title">\n                        <th mat-header-cell *matHeaderCellDef>\n                            {{\'CORE.METADATA.CONTENT_TYPE.DIALOG.PROPERTY.DESCRIPTION\' | translate}} </th>\n                        <td mat-cell *matCellDef="let property"> {{property.title}} </td>\n                    </ng-container>\n                    <ng-container matColumnDef="dataType">\n                        <th mat-header-cell *matHeaderCellDef> {{\'CORE.METADATA.CONTENT_TYPE.DIALOG.PROPERTY.DATA_TYPE\'\n                            | translate}} </th>\n                        <td mat-cell *matCellDef="let property"> {{property.dataType}} </td>\n                    </ng-container>\n                    <tr mat-header-row *matHeaderRowDef="propertyColumns"></tr>\n                    <tr mat-row *matRowDef="let row; columns: propertyColumns;"></tr>\n                </table>\n            </mat-expansion-panel>\n        </mat-accordion>\n    </mat-dialog-content>\n    <mat-dialog-actions align="end">\n        <button mat-button mat-dialog-close\n            id="content-type-dialog-actions-cancel">{{\'CORE.METADATA.CONTENT_TYPE.DIALOG.CANCEL\' | translate }}</button>\n        <button mat-button class="adf-content-type-dialog-apply-button" id="content-type-dialog-apply-button"\n            [mat-dialog-close]="true" cdkFocusInitial (click)="onApply()">{{\'CORE.METADATA.CONTENT_TYPE.DIALOG.APPLY\' |\n            translate}}</button>\n    </mat-dialog-actions>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-content-type-dialog .mat-expansion-panel{margin-bottom:10px}.adf-content-type-accordion{margin:10px}.adf-content-type-dialog-title{font-size:large;font-weight:200;margin-top:0}.adf-content-type-dialog-description{font-size:small;line-height:normal}.adf-content-type-table{width:100%}.adf-content-type-dialog-apply-button{color:var(--theme-primary-color)}"]}]}],_n.ctorParameters=function(){return[{type:c.MatDialogRef},{type:void 0,decorators:[{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]},{type:kn}]};var Vn=function(){function e(e,t,n,i){this.contentTypeService=e,this.dialog=t,this.versionCompatibilityService=n,this.propertyGroupTranslatorService=i}return e.prototype.getContentTypeCardItem=function(e){var t=this;return this.versionCompatibilityService.isVersionSupported("7")?this.contentTypeService.getContentTypeByPrefix(e.nodeType).pipe(O.map((function(n){var i=t.getContentTypesAsSelectOption(n),o=t.buildContentTypeSelectCardModel(n.entry.id,i),r=t.getContentTypeSpecificProperties(n);return Q([o],t.buildCardItemsFromPropertyList(r,e.properties))}))):T.of([this.buildContentTypeTextCardModel(e.nodeType)])},e.prototype.buildCardItemsFromPropertyList=function(e,t){var n=this;return e.map((function(e){var i=t?t[e.id]:null;return n.buildCardItemFromProperty(e,i)}))},e.prototype.buildCardItemFromProperty=function(e,t){return this.propertyGroupTranslatorService.translateProperty(e,t,!0)},e.prototype.getContentTypeSpecificProperties=function(e){return e.entry.properties.filter((function(t){return t.id.startsWith(e.entry.model.namespacePrefix)}))},e.prototype.buildContentTypeTextCardModel=function(e){return new C.CardViewTextItemModel({label:"CORE.METADATA.BASIC.CONTENT_TYPE",value:e,key:"nodeType",editable:!1})},e.prototype.buildContentTypeSelectCardModel=function(e,t){return new C.CardViewSelectItemModel({label:"CORE.METADATA.BASIC.CONTENT_TYPE",value:e,key:"nodeType",editable:!0,options$:t,displayNoneOption:!1})},e.prototype.getContentTypesAsSelectOption=function(e){var t=this,n=this.contentTypeService.getContentTypeChildren(e.entry.id);return T.zip(n,T.of(e)).pipe(O.distinctUntilChanged(),O.map((function(e){var n=z(e,2),i=n[0],o=n[1];return t.appendCurrentType(o,i).map((function(e){var t;return{key:e.entry.id,label:null!==(t=e.entry.title)&&void 0!==t?t:e.entry.id}}))})))},e.prototype.appendCurrentType=function(e,t){var n=Q(t);return t.find((function(t){return t.entry.id===e.entry.id}))||n.push(e),n},e.prototype.openContentTypeDialogConfirm=function(e){var t=new T.Subject;t.subscribe({complete:this.close.bind(this)});var n={title:"CORE.METADATA.CONTENT_TYPE.DIALOG.TITLE",description:"CORE.METADATA.CONTENT_TYPE.DIALOG.DESCRIPTION",confirmMessage:"CORE.METADATA.CONTENT_TYPE.DIALOG.CONFIRM",select:t,nodeType:e};return this.openDialog(n,"adf-content-type-dialog","600px"),t},e.prototype.close=function(){this.dialog.closeAll()},e.prototype.openDialog=function(e,t,n){this.dialog.open(_n,{data:e,panelClass:t,width:n,disableClose:!0})},e}();Vn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Vn(n.ɵɵinject(kn),n.ɵɵinject(c.MatDialog),n.ɵɵinject(C.VersionCompatibilityService),n.ɵɵinject(On))},token:Vn,providedIn:"root"}),Vn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Vn.ctorParameters=function(){return[{type:kn},{type:c.MatDialog},{type:C.VersionCompatibilityService},{type:On}]};var Un=function(){function e(e,t,n,i,o){this.basicPropertiesService=e,this.contentMetadataConfigFactory=t,this.propertyGroupTranslatorService=n,this.propertyDescriptorsService=i,this.contentTypePropertyService=o,this.error=new T.Subject}return e.prototype.getBasicProperties=function(e){return T.of(this.basicPropertiesService.getProperties(e))},e.prototype.getContentTypeProperty=function(e){return this.contentTypePropertyService.getContentTypeCardItem(e)},e.prototype.openConfirmDialog=function(e){return this.contentTypePropertyService.openContentTypeDialogConfirm(e.nodeType)},e.prototype.getGroupedProperties=function(e,t){var n=this;void 0===t&&(t="default");var i=T.of([]);if(e.aspectNames){var o;o="string"==typeof t?this.contentMetadataConfigFactory.get(t):this.contentMetadataConfigFactory.createConfig(t);var r=e.aspectNames.concat(e.nodeType).filter((function(e){return o.isGroupAllowed(e)}));r.length>0&&(i=this.propertyDescriptorsService.load(r).pipe(O.switchMap((function(e){return T.iif((function(){return o.isIncludeAllEnabled()}),T.of(o.appendAllPreset(e).concat(o.reorganiseByConfig(e))),T.of(o.reorganiseByConfig(e)))})),O.map((function(e){return o.filterExcludedPreset(e)})),O.map((function(e){return n.filterEmptyPreset(e)})),O.map((function(e){return n.setTitleToNameIfNotSet(e)})),O.map((function(t){return n.propertyGroupTranslatorService.translateToCardViewGroups(t,e.properties,e.definition)}))))}return i},e.prototype.setTitleToNameIfNotSet=function(e){return e.map((function(e){e.title=e.title||e.name})),e},e.prototype.filterEmptyPreset=function(e){return e.filter((function(e){return e.properties.length}))},e}();Un.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Un(n.ɵɵinject(yn),n.ɵɵinject(Pn),n.ɵɵinject(On),n.ɵɵinject(Mn),n.ɵɵinject(Vn))},token:Un,providedIn:"root"}),Un.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Un.ctorParameters=function(){return[{type:yn},{type:Pn},{type:On},{type:Mn},{type:Vn}]};var Bn=function(){function e(t,n,i,o,r,a,s){this.contentMetadataService=t,this.cardViewUpdateService=n,this.nodesApiService=i,this.logService=o,this.alfrescoApiService=r,this.translationService=a,this.appConfig=s,this.onDestroy$=new T.Subject,this.editable=!1,this.displayEmpty=!1,this.expanded=!1,this.multi=!1,this.displayDefaultProperties=!0,this.displayAspect=null,this.copyToClipboardAction=!0,this.useChipsForMultiValueProperty=!0,this.changedProperties={},this.hasMetadataChanged=!1,this.copyToClipboardAction=this.appConfig.get("content-metadata.copy-to-clipboard-action"),this.multiValueSeparator=this.appConfig.get("content-metadata.multi-value-pipe-separator")||e.DEFAULT_SEPARATOR,this.useChipsForMultiValueProperty=this.appConfig.get("content-metadata.multi-value-chips")}return e.prototype.ngOnInit=function(){var e=this;this.cardViewUpdateService.itemUpdated$.pipe(O.debounceTime(500),O.takeUntil(this.onDestroy$)).subscribe((function(t){e.hasMetadataChanged=!0,e.targetProperty=t.target,e.updateChanges(t.changed)})),this.cardViewUpdateService.updatedAspect$.pipe(O.debounceTime(500),O.takeUntil(this.onDestroy$)).subscribe((function(t){return e.loadProperties(t)})),this.loadProperties(this.node)},e.prototype.handleUpdateError=function(e){this.logService.error(e);var t=0;try{t=JSON.parse(e.message).error.statusCode}catch(e){}var n="METADATA.ERRORS."+t;this.translationService.instant(n)===n&&(n="METADATA.ERRORS.GENERIC"),this.contentMetadataService.error.next({statusCode:t,message:n})},e.prototype.ngOnChanges=function(e){e.node&&!e.node.firstChange&&this.loadProperties(e.node.currentValue)},e.prototype.loadProperties=function(e){e&&(this.basicProperties$=this.getProperties(e),this.groupedProperties$=this.contentMetadataService.getGroupedProperties(e,this.preset))},e.prototype.getProperties=function(e){var t=this.contentMetadataService.getBasicProperties(e),n=this.contentMetadataService.getContentTypeProperty(e);return T.zip(t,n).pipe(O.map((function(e){var t=z(e,2),n=t[0],i=t[1].filter((function(e){return-1===n.findIndex((function(t){return t.key===e.key}))}));return Q(n,i)})))},e.prototype.updateChanges=function(e){var t=this;Object.keys(e).map((function(n){"object"==typeof e[n]?t.changedProperties[n]=Object.assign(Object.assign({},t.changedProperties[n]),e[n]):t.changedProperties[n]=e[n]}))},e.prototype.saveChanges=function(){var e=this;this.hasContentTypeChanged(this.changedProperties)?this.contentMetadataService.openConfirmDialog(this.changedProperties).subscribe((function(){e.updateNode()})):this.updateNode()},e.prototype.updateNode=function(){var e=this;this.nodesApiService.updateNode(this.node.id,this.changedProperties).pipe(O.catchError((function(t){return e.cardViewUpdateService.updateElement(e.targetProperty),e.handleUpdateError(t),T.of(null)}))).subscribe((function(t){t&&(e.hasContentTypeChanged(e.changedProperties)&&e.cardViewUpdateService.updateNodeAspect(e.node),e.revertChanges(),Object.assign(e.node,t),e.alfrescoApiService.nodeUpdated.next(e.node))}))},e.prototype.hasContentTypeChanged=function(e){return!!(null==e?void 0:e.nodeType)},e.prototype.revertChanges=function(){this.changedProperties={},this.hasMetadataChanged=!1},e.prototype.cancelChanges=function(){this.revertChanges(),this.loadProperties(this.node)},e.prototype.showGroup=function(e){var t=this;return e.properties.filter((function(e){return!t.isEmpty(e.displayValue)})).length>0},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.canExpandTheCard=function(e){return e.title===this.displayAspect},e.prototype.canExpandProperties=function(){return!this.expanded||"Properties"===this.displayAspect},e.prototype.keyDown=function(e){37!==e.keyCode&&39!==e.keyCode||e.stopPropagation()},e.prototype.isEmpty=function(e){return null==e||""===e},e}();Bn.DEFAULT_SEPARATOR=", ",Bn.decorators=[{type:n.Component,args:[{selector:"adf-content-metadata",template:'<div class="adf-metadata-properties">\n    <mat-accordion displayMode="flat"\n                   [multi]="multi">\n        <mat-expansion-panel *ngIf="displayDefaultProperties"\n                             [expanded]="canExpandProperties()"\n                             [attr.data-automation-id]="\'adf-metadata-group-properties\'">\n            <mat-expansion-panel-header>\n                <mat-panel-title role="heading">\n                    {{ \'CORE.METADATA.BASIC.HEADER\' | translate }}\n                </mat-panel-title>\n            </mat-expansion-panel-header>\n            <adf-card-view\n                (keydown)="keyDown($event)"\n                [properties]="basicProperties$ | async"\n                [editable]="editable"\n                [displayEmpty]="displayEmpty"\n                [copyToClipboardAction]="copyToClipboardAction"\n                [useChipsForMultiValueProperty]="useChipsForMultiValueProperty"\n                [multiValueSeparator]="multiValueSeparator">\n            </adf-card-view>\n        </mat-expansion-panel>\n\n        <ng-container *ngIf="expanded">\n            <ng-container *ngIf="groupedProperties$ | async; else loading; let groupedProperties">\n                <div *ngFor="let group of groupedProperties; let first = first;"\n                     class="adf-metadata-grouped-properties-container">\n                    <mat-expansion-panel *ngIf="showGroup(group) || editable"\n                                         [attr.data-automation-id]="\'adf-metadata-group-\' + group.title"\n                                         [expanded]="canExpandTheCard(group) || !displayDefaultProperties && first">\n                        <mat-expansion-panel-header>\n                            <mat-panel-title>\n                                {{ group.title | translate }}\n                            </mat-panel-title>\n                        </mat-expansion-panel-header>\n\n                        <adf-card-view\n                            (keydown)="keyDown($event)"\n                            [properties]="group.properties"\n                            [editable]="editable"\n                            [displayEmpty]="displayEmpty"\n                            [copyToClipboardAction]="copyToClipboardAction"\n                            [useChipsForMultiValueProperty]="useChipsForMultiValueProperty"\n                            [multiValueSeparator]="multiValueSeparator">\n                        </adf-card-view>\n                    </mat-expansion-panel>\n\n                </div>\n            </ng-container>\n            <ng-template #loading>\n                <mat-progress-bar mode="indeterminate"></mat-progress-bar>\n            </ng-template>\n        </ng-container>\n    </mat-accordion>\n\n    <div class="adf-metadata-action-buttons"\n         *ngIf="editable">\n        <button mat-button\n                (click)="cancelChanges()"\n                data-automation-id="reset-metadata"\n                [disabled]="!hasMetadataChanged">\n                {{ \'CORE.METADATA.ACTIONS.CANCEL\' | translate }}\n        </button>\n        <button mat-raised-button\n                (click)="saveChanges()"\n                color="primary"\n                data-automation-id="save-metadata"\n                [disabled]="!hasMetadataChanged">\n                {{ \'CORE.METADATA.ACTIONS.SAVE\' | translate }}\n            </button>\n    </div>\n\n</div>\n',host:{class:"adf-content-metadata"},encapsulation:n.ViewEncapsulation.None,styles:[".adf-metadata-properties .mat-expansion-panel-header.mat-expanded:focus,.adf-metadata-properties .mat-expansion-panel-header.mat-expanded:hover{background:var(--theme-bg-hover-color)}.adf-metadata-properties mat-expansion-panel-header{height:64px}.adf-metadata-properties .mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:none}.adf-metadata-action-buttons{display:flex;justify-content:space-evenly;margin:10px}"]}]}],Bn.ctorParameters=function(){return[{type:Un},{type:C.CardViewUpdateService},{type:C.NodesApiService},{type:C.LogService},{type:C.AlfrescoApiService},{type:C.TranslationService},{type:C.AppConfigService}]},Bn.propDecorators={node:[{type:n.Input}],editable:[{type:n.Input}],displayEmpty:[{type:n.Input}],expanded:[{type:n.Input}],multi:[{type:n.Input}],preset:[{type:n.Input}],displayDefaultProperties:[{type:n.Input}],displayAspect:[{type:n.Input}],copyToClipboardAction:[{type:n.Input}],useChipsForMultiValueProperty:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var jn=function(){function e(e,t){this.dialog=e,this.data=t,this.currentAspectSelection=[],this.title=t.title,this.description=t.description,this.overTableMessage=t.overTableMessage,this.currentNodeId=t.nodeId}return e.prototype.ngOnInit=function(){var e=this;this.dialog.backdropClick().subscribe((function(){e.close()})),this.dialog.keydownEvents().subscribe((function(t){27===t.keyCode&&(t.preventDefault(),t.stopImmediatePropagation(),e.close())}))},e.prototype.onValueChanged=function(e){this.currentAspectSelection=e},e.prototype.close=function(){this.data.select.complete()},e.prototype.onCancel=function(){this.close()},e.prototype.onApply=function(){this.data.select.next(this.currentAspectSelection),this.close()},e}();jn.decorators=[{type:n.Component,args:[{selector:"adf-aspect-list-dialog",template:'<header mat-dialog-title data-automation-id="aspect-list-dialog-title" class="adf-aspect-list-dialog">\n    <h4 class="adf-aspect-list-dialog-title">{{title | translate}}</h4>\n    <div class="adf-aspect-list-dialog-description">{{description | translate}}</div>\n</header>\n\n<div class="adf-aspect-list-dialog-information">\n    <p id="aspect-list-dialog-over-table-message">{{overTableMessage | translate}}</p>\n    <p id="aspect-list-dialog-counter">{{currentAspectSelection ? currentAspectSelection.length : 0}}\n        {{\'ADF-ASPECT-LIST.DIALOG.SELECTED\' | translate}}</p>\n</div>\n<mat-dialog-content class="adf-aspect-dialog-content">\n    <adf-aspect-list #aspectList (valueChanged)="onValueChanged($event)" [nodeId]="currentNodeId">\n    </adf-aspect-list>\n</mat-dialog-content>\n\n<mat-dialog-actions>\n    <div>\n        <button mat-button (click)="aspectList.reset()" id="aspect-list-dialog-actions-reset"\n            data-automation-id="aspect-list-dialog-actions-reset">{{\n            \'ADF-ASPECT-LIST.DIALOG.RESET\' | translate }}\n        </button>\n\n        <button mat-button (click)="aspectList.clear()" id="aspect-list-dialog-actions-clear"\n            data-automation-id="aspect-list-dialog-actions-clear">{{\n            \'ADF-ASPECT-LIST.DIALOG.CLEAR\' | translate }}\n        </button>\n    </div>\n    <div>\n        <button mat-button (click)="onCancel()" id="aspect-list-dialog-actions-cancel"\n            data-automation-id="aspect-list-dialog-actions-cancel">{{\n            \'ADF-ASPECT-LIST.DIALOG.CANCEL\' | translate }}\n        </button>\n\n        <button mat-button (click)="onApply()" id="aspect-list-dialog-actions-apply"\n            [disabled]="aspectList.hasEqualAspect"\n            data-automation-id="aspect-list-dialog-actions-apply">{{\n            \'ADF-ASPECT-LIST.DIALOG.APPLY\' | translate }}\n        </button>\n    </div>\n</mat-dialog-actions>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-aspect-list-dialog-title{font-size:large;font-weight:200;margin-top:0}.adf-aspect-list-dialog-description{font-size:small;line-height:normal}.adf-aspect-list-dialog-information{display:flex;font-size:small;justify-content:space-between;padding-left:5px;padding-right:5px}.adf-aspect-list-dialog .mat-dialog-actions{justify-content:space-between}.adf-aspect-dialog-content{padding-top:3px}.adf-aspect-dialog-content .adf-aspect-property-table .mat-cell{font-size:smaller}.adf-aspect-dialog-content .adf-aspect-property-table .mat-column-name{width:30%}"]}]}],jn.ctorParameters=function(){return[{type:c.MatDialogRef},{type:void 0,decorators:[{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]}]};var $n=function(){function e(e,t,n,i){this.alfrescoApiService=e,this.appConfigService=t,this.dialog=n,this.logService=i}return Object.defineProperty(e.prototype,"aspectsApi",{get:function(){var e;return this._aspectsApi=null!==(e=this._aspectsApi)&&void 0!==e?e:new w.AspectsApi(this.alfrescoApiService.getInstance()),this._aspectsApi},enumerable:!1,configurable:!0}),e.prototype.getAspects=function(){var e=this.getVisibleAspects(),t=this.getStandardAspects(e),n=this.getCustomAspects();return T.zip(t,n).pipe(O.map((function(e){var t=z(e,2);return Q(t[0],t[1])})))},e.prototype.getStandardAspects=function(e){var t=this,n={where:"(modelId in ('cm:contentmodel', 'emailserver:emailserverModel', 'smf:smartFolder', 'app:applicationmodel' ))",include:["properties"]};return T.from(this.aspectsApi.listAspects(n)).pipe(O.map((function(n){var i;return t.filterAspectByConfig(e,null===(i=null==n?void 0:n.list)||void 0===i?void 0:i.entries)})),O.catchError((function(e){return t.logService.error(e),T.of([])})))},e.prototype.getCustomAspects=function(){var e=this,t={where:"(not namespaceUri matches('http://www.alfresco.*'))",include:["properties"]};return T.from(this.aspectsApi.listAspects(t)).pipe(O.map((function(e){var t;return null===(t=null==e?void 0:e.list)||void 0===t?void 0:t.entries})),O.catchError((function(t){return e.logService.error(t),T.of([])})))},e.prototype.filterAspectByConfig=function(e,t){var n=t||[];return(null==e?void 0:e.length)>0&&t&&(n=t.filter((function(t){var n;return e.includes(null===(n=null==t?void 0:t.entry)||void 0===n?void 0:n.id)}))),n},e.prototype.getVisibleAspects=function(){var e,t,n=[],i=this.appConfigService.get("aspect-visible");if(i)try{for(var o=Y(Object.keys(i)),r=o.next();!r.done;r=o.next()){var a=r.value;n=n.concat(i[a])}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e.prototype.openAspectListDialog=function(e){var t=new T.Subject;t.subscribe({complete:this.close.bind(this)});var n={title:"ADF-ASPECT-LIST.DIALOG.TITLE",description:"ADF-ASPECT-LIST.DIALOG.DESCRIPTION",overTableMessage:"ADF-ASPECT-LIST.DIALOG.OVER-TABLE-MESSAGE",select:t,nodeId:e};return this.openDialog(n,"adf-aspect-list-dialog","750px"),t},e.prototype.openDialog=function(e,t,n){this.dialog.open(jn,{data:e,panelClass:t,width:n,disableClose:!0})},e.prototype.close=function(){this.dialog.closeAll()},e}();$n.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new $n(n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.AppConfigService),n.ɵɵinject(c.MatDialog),n.ɵɵinject(C.LogService))},token:$n,providedIn:"root"}),$n.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],$n.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.AppConfigService},{type:c.MatDialog},{type:C.LogService}]};var Gn=function(){function e(e,t,n,i){this.alfrescoApiService=e,this.nodesApiService=t,this.aspectListService=n,this.cardViewUpdateService=i}return e.prototype.updateNodeAspects=function(e){var t=this;this.aspectListService.openAspectListDialog(e).subscribe((function(n){t.nodesApiService.updateNode(e,{aspectNames:Q(n)}).subscribe((function(e){t.alfrescoApiService.nodeUpdated.next(e),t.cardViewUpdateService.updateNodeAspect(e)}))}))},e}();Gn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Gn(n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.NodesApiService),n.ɵɵinject($n),n.ɵɵinject(C.CardViewUpdateService))},token:Gn,providedIn:"root"}),Gn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Gn.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.NodesApiService},{type:$n},{type:C.CardViewUpdateService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Hn=function(){function e(e,t,n){this.contentService=e,this.nodeAspectService=t,this.versionCompatibilityService=n,this.displayEmpty=!1,this.displayAspect=null,this.readOnly=!1,this.multi=!1,this._displayDefaultProperties=!0,this.editable=!1,this.editAspectSupported=!1,this.editAspectSupported=this.versionCompatibilityService.isVersionSupported("7")}return Object.defineProperty(e.prototype,"displayDefaultProperties",{get:function(){return this._displayDefaultProperties},set:function(e){this._displayDefaultProperties=e,this.onDisplayDefaultPropertiesChange()},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(e){e.displayAspect&&e.displayAspect.currentValue&&(this.expanded=!0)},e.prototype.onDisplayDefaultPropertiesChange=function(){this.expanded=!this._displayDefaultProperties},e.prototype.toggleEdit=function(){this.editable=!this.editable},e.prototype.toggleExpanded=function(){this.expanded=!this.expanded},e.prototype.hasAllowableOperations=function(){return this.contentService.hasAllowableOperations(this.node,C.AllowableOperationsEnum.UPDATE)},e.prototype.openAspectDialog=function(){this.nodeAspectService.updateNodeAspects(this.node.id)},e.prototype.isEditAspectSupported=function(){return!this.readOnly&&this.hasAllowableOperations()&&this.editAspectSupported},e}();Hn.decorators=[{type:n.Component,args:[{selector:"adf-content-metadata-card",template:'<mat-card *ngIf="node">\n    <mat-card-content>\n        <adf-content-metadata\n            [displayDefaultProperties]="displayDefaultProperties"\n            [expanded]="expanded"\n            [node]="node"\n            [displayEmpty]="displayEmpty"\n            [editable]="editable"\n            [multi]="multi"\n            [displayAspect]="displayAspect"\n            [preset]="preset">\n        </adf-content-metadata>\n    </mat-card-content>\n    <mat-card-footer class="adf-content-metadata-card-footer" fxLayout="row" fxLayoutAlign="space-between stretch">\n        <div>\n            <button *ngIf="isEditAspectSupported()"\n                mat-icon-button\n                (click)="openAspectDialog()"\n                [attr.title]="\'CORE.METADATA.ACTIONS.EDIT_ASPECTS\' | translate"\n                [attr.aria-label]="\'CORE.METADATA.ACCESSIBILITY.EDIT_ASPECTS\' | translate"\n                data-automation-id="meta-data-card-edit-aspect">\n                <mat-icon>menu</mat-icon>\n            </button>\n            <button *ngIf="!readOnly && hasAllowableOperations()"\n                mat-icon-button\n                (click)="toggleEdit()"\n                [attr.title]="\'CORE.METADATA.ACTIONS.EDIT\' | translate"\n                [attr.aria-label]="\'CORE.METADATA.ACCESSIBILITY.EDIT\' | translate"\n                data-automation-id="meta-data-card-toggle-edit">\n                <mat-icon>mode_edit</mat-icon>\n            </button>\n        </div>\n        <button *ngIf="displayDefaultProperties" mat-button (click)="toggleExpanded()" data-automation-id="meta-data-card-toggle-expand">\n            <ng-container *ngIf="!expanded">\n                <span data-automation-id="meta-data-card-toggle-expand-label">{{ \'ADF_VIEWER.SIDEBAR.METADATA.MORE_INFORMATION\' | translate }}</span>\n                <mat-icon>keyboard_arrow_down</mat-icon>\n            </ng-container>\n            <ng-container *ngIf="expanded">\n                <span data-automation-id="meta-data-card-toggle-expand-label">{{ \'ADF_VIEWER.SIDEBAR.METADATA.LESS_INFORMATION\' | translate }}</span>\n                <mat-icon>keyboard_arrow_up</mat-icon>\n            </ng-container>\n        </button>\n    </mat-card-footer>\n</mat-card>\n',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-content-metadata-card"},styles:[".adf-content-metadata-card .mat-card{padding:0}.adf-content-metadata-card .mat-card .mat-card-content{margin-bottom:0}.adf-content-metadata-card-footer.mat-card-footer{border-top:1px solid var(--theme-border-color);margin:0;padding:8px 12px}.adf-content-metadata-card-footer.mat-card-footer button{color:var(--theme-text-color)}.adf-content-metadata-card-footer.mat-card-footer button:hover{color:var(--theme-text-bold-color)}"]}]}],Hn.ctorParameters=function(){return[{type:C.ContentService},{type:Gn},{type:C.VersionCompatibilityService}]},Hn.propDecorators={node:[{type:n.Input}],displayEmpty:[{type:n.Input}],displayAspect:[{type:n.Input}],preset:[{type:n.Input}],readOnly:[{type:n.Input}],multi:[{type:n.Input}],displayDefaultProperties:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var qn=function(){};qn.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,N.FlexLayoutModule,C.CoreModule],exports:[Bn,Hn],declarations:[Bn,Hn]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Yn=function(e){this.isInherited=!1,e&&(this.authorityId=e.authorityId,this.name=e.name,this.accessStatus=e.accessStatus,this.isInherited=null!==e.isInherited&&void 0!==e.isInherited&&e.isInherited,this.icon=e.icon?e.icon:"vpn_key")},zn=function(){function e(e,t,n,i){this.apiService=e,this.searchApiService=t,this.nodeService=n,this.translation=i}return Object.defineProperty(e.prototype,"groupsApi",{get:function(){var e;return this._groupsApi=null!==(e=this._groupsApi)&&void 0!==e?e:new w.GroupsApi(this.apiService.getInstance()),this._groupsApi},enumerable:!1,configurable:!0}),e.prototype.getNodeRoles=function(e){var t=this,n=this.buildRetrieveSiteQueryBody(e.path.elements);return this.searchApiService.searchByQueryBody(n).pipe(O.switchMap((function(n){var i;if(n.list.entries.length>0){var o=n.list.entries[0].entry.name;return t.getGroupMembersBySiteName(o)}return T.of(null===(i=e.permissions)||void 0===i?void 0:i.settable)})))},e.prototype.getNodePermissions=function(e){var t,n,i=[];return(null===(t=null==e?void 0:e.permissions)||void 0===t?void 0:t.locallySet)&&e.permissions.locallySet.map((function(e){i.push(new Yn(e))})),(null===(n=null==e?void 0:e.permissions)||void 0===n?void 0:n.inherited)&&e.permissions.inherited.map((function(e){var t=new Yn(e);t.isInherited=!0,i.push(t)})),i},e.prototype.updatePermissionRole=function(e,t){var n={permissions:{locallySet:[]}},i=e.permissions.locallySet.map((function(e){return e.authorityId})).indexOf(t.authorityId);return n.permissions.locallySet=n.permissions.locallySet.concat(e.permissions.locallySet),-1!==i?n.permissions.locallySet[i]=t:n.permissions.locallySet.push(t),this.nodeService.updateNode(e.id,n)},e.prototype.updateNodePermissions=function(e,t){var n=this;return this.nodeService.getNode(e).pipe(O.switchMap((function(e){return n.updateLocallySetPermissions(e,t)})))},e.prototype.updateLocallySetPermissions=function(e,t){var n={permissions:{locallySet:[]}},i=t,o=this.getDuplicatedPermissions(e.permissions.locallySet,i);if(o.length>0){var r=o.map((function(e){return"authority -> "+e.authorityId+" / role -> "+e.name})).join(", "),a=this.translation.instant("PERMISSION_MANAGER.ERROR.DUPLICATE-PERMISSION",{list:r});return T.throwError(a)}return n.permissions.locallySet=e.permissions.locallySet?e.permissions.locallySet.concat(i):i,this.nodeService.updateNode(e.id,n)},e.prototype.getDuplicatedPermissions=function(e,t){var n=this,i=[];return e&&t.forEach((function(t){var o=e.find((function(e){return n.isEqualPermission(e,t)}));o&&i.push(o)})),i},e.prototype.isEqualPermission=function(e,t){return e.accessStatus===t.accessStatus&&e.authorityId===t.authorityId&&e.name===t.name},e.prototype.removePermission=function(e,t){var n={permissions:{locallySet:[]}},i=e.permissions.locallySet.map((function(e){return e.authorityId})).indexOf(t.authorityId);return-1!==i?(e.permissions.locallySet.splice(i,1),n.permissions.locallySet=e.permissions.locallySet,this.nodeService.updateNode(e.id,n)):T.of(e)},e.prototype.getGroupMembersBySiteName=function(e){var t=this,n="GROUP_site_"+e;return this.getGroupMemberByGroupName(n).pipe(O.map((function(n){var i=[];return n.list.entries.forEach((function(n){i.push(t.formattedRoleName(n.entry.displayName,"site_"+e))})),i})))},e.prototype.getGroupMemberByGroupName=function(e,t){return T.from(this.groupsApi.listGroupMemberships(e,t))},e.prototype.formattedRoleName=function(e,t){return e.replace(t+"_","")},e.prototype.buildRetrieveSiteQueryBody=function(e){return{query:{query:e.map((function(e){return'name: "'+e.name+'"'})).join(" OR ")},paging:{maxItems:100,skipCount:0},include:["aspectNames","properties"],filterQueries:[{query:"TYPE:'st:site'"}]}},e.prototype.getLocalPermissions=function(e){var t,n=[];return(null===(t=null==e?void 0:e.permissions)||void 0===t?void 0:t.locallySet)&&e.permissions.locallySet.forEach((function(e){n.push(new Yn(e))})),n},e.prototype.getInheritedPermission=function(e){var t,n=[];return(null===(t=null==e?void 0:e.permissions)||void 0===t?void 0:t.inherited)&&e.permissions.inherited.forEach((function(e){var t=new Yn(e);t.isInherited=!0,n.push(t)})),n},e.prototype.removePermissions=function(e,t){var n={permissions:{locallySet:[]}};return t.forEach((function(t){var n=e.permissions.locallySet.findIndex((function(e){return e.authorityId===t.authorityId}));-1!==n&&e.permissions.locallySet.splice(n,1)})),n.permissions.locallySet=e.permissions.locallySet,this.nodeService.updateNode(e.id,n)},e.prototype.updatePermissions=function(e,t){var n={permissions:{locallySet:[]}};return n.permissions.locallySet=t,this.nodeService.updateNode(e.id,n)},e.prototype.getNodeWithRoles=function(e){var t=this;return this.nodeService.getNode(e).pipe(O.switchMap((function(e){return T.forkJoin({node:T.of(e),roles:t.getNodeRoles(e).pipe(O.catchError((function(){var t;return T.of(null===(t=e.permissions)||void 0===t?void 0:t.settable)})),O.map((function(e){return e.map((function(e){return{role:e,label:e}}))})))})})))},e.prototype.transformNodeToUserPerson=function(e){var t=null,n=null;if("cm:person"===e.nodeType){var i=e.properties["cm:firstName"],o=e.properties["cm:lastName"],r=e.properties["cm:email"],a=e.properties["cm:userName"];t=new C.EcmUserModel({id:a,firstName:i,lastName:o,email:r})}if("cm:authorityContainer"===e.nodeType){var s=e.properties["cm:authorityDisplayName"]||e.properties["cm:authorityName"];a=e.properties["cm:authorityName"];n=new w.Group({displayName:s,id:a})}return{person:t,group:n}},e}();zn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new zn(n.ɵɵinject(C.AlfrescoApiService),n.ɵɵinject(C.SearchService),n.ɵɵinject(C.NodesApiService),n.ɵɵinject(C.TranslationService))},token:zn,providedIn:"root"}),zn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],zn.ctorParameters=function(){return[{type:C.AlfrescoApiService},{type:C.SearchService},{type:C.NodesApiService},{type:C.TranslationService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Qn=function(){function e(e){this.readonly=!1,e&&Object.assign(this,e)}return e.parseFromSearchResult=function(t){var n=t.entry,i=new e;if("cm:person"===n.nodeType){var o=new C.EcmUserModel({firstName:n.properties["cm:firstName"],lastName:n.properties["cm:lastName"],email:n.properties["cm:email"],id:n.properties["cm:userName"]});return i.id=o.id,i.entry={person:o},i.accessStatus="ALLOWED",i}if("cm:authorityContainer"===n.nodeType){var r=new w.Group({id:n.properties["cm:authorityName"],displayName:n.properties["cm:authorityDisplayName"]||n.properties["cm:authorityName"]});return i.id=r.id,i.entry={group:r},i.accessStatus="ALLOWED",i}return null},e.prototype.toPermissionElement=function(){return{authorityId:this.id,name:this.role,accessStatus:this.accessStatus}},e}(),Wn=function(){function e(e,t){this.data=e,this.dialogRef=t,this.isSearchActive=!0,this.selectedMembers=[],this.existingMembers=[],this.currentSelection=[],this.existingMembers=this.data.node.permissions.locallySet||[]}return e.prototype.onSelect=function(e){this.currentSelection=e},e.prototype.onAddClicked=function(){var e=this.selectedMembers.filter((function(e){return!e.readonly})).map((function(e){return e.toPermissionElement()}));this.data.confirm.next(e),this.data.confirm.complete()},e.prototype.onSearchAddClicked=function(){var e=this,t=this.currentSelection.map((function(e){return Qn.parseFromSearchResult(e)})).filter((function(t){var n=t.id;return!e.selectedMembers.find((function(e){return e.id===n}))}));this.selectedMembers=this.selectedMembers.concat(t),this.selectedMembers.forEach((function(t){var n=e.existingMembers.find((function(e){return e.authorityId===t.id}));n&&(t.role=n.name,t.accessStatus=n.accessStatus,t.readonly=!0)})),this.disableSearch()},e.prototype.canCloseDialog=function(){this.selectedMembers.length?this.disableSearch():this.dialogRef.close()},e.prototype.enableSearch=function(){this.isSearchActive=!0},e.prototype.disableSearch=function(){this.isSearchActive=!1},e.prototype.onBulkUpdate=function(e){this.selectedMembers.filter((function(e){return!e.readonly})).forEach((function(t){return t.role=e}))},e.prototype.onMemberDelete=function(e){var t=e.id,n=this.selectedMembers.findIndex((function(e){return e.id===t}));this.selectedMembers.splice(n,1),0===this.selectedMembers.length&&(this.enableSearch(),this.currentSelection=[])},e.prototype.onMemberUpdate=function(e,t){this.selectedMembers.find((function(e){return e.id===t.id})).role=e},e.prototype.isValid=function(){return this.selectedMembers.filter((function(e){return!e.readonly})).length&&this.selectedMembers.every((function(e){return!!e.role}))},e}();
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Wn.decorators=[{type:n.Component,args:[{selector:"adf-add-permission-dialog",template:'<h2 mat-dialog-title id="add-permission-dialog-title">\n    {{ (data?.title ? data?.title : "PERMISSION_MANAGER.ADD-PERMISSION.BASE-DIALOG-TITLE") | translate }}\n</h2>\n\n<ng-container *ngIf="!isSearchActive">\n    <mat-dialog-content>\n        <button mat-button (click)="enableSearch()" class="adf-search-user-button">\n            {{ "PERMISSION_MANAGER.ADD-PERMISSION.SEARCH" | translate }}\n            <span class="adf-toolbar--spacer"></span>\n            <mat-icon>search</mat-icon>\n        </button>\n\n        <div class="adf-new-permission-table">\n            <adf-datatable [rows]="selectedMembers"\n                           class="adf-datatable-permission"\n                           selectionMode="none"\n                           [stickyHeader]="true"\n                           data-automation-id="adf-user-role-selection-table"\n                           *ngIf="selectedMembers.length">\n                <data-columns>\n                    <data-column class="adf-datatable-cell--image adf-authority-icon-column" key="$thumbunail" [sortable]="false">\n                        <ng-template let-context>\n                            <adf-user-icon-column [context]="context"></adf-user-icon-column>\n                        </ng-template>\n                    </data-column>\n\n                    <data-column class="adf-ellipsis-cell adf-expand-cell-5 adf-authorityId-column"\n                                 [title]="\'PERMISSION_MANAGER.COLUMN.NAME\' | translate:{count:selectedMembers.length}"\n                                 key="id">\n                        <ng-template let-context>\n                            <adf-user-name-column [context]="context"></adf-user-name-column>\n                        </ng-template>\n                    </data-column>\n\n                    <data-column class="adf-ellipsis-cell adf-expand-cell-4"\n                                 title="PERMISSION_MANAGER.PERMISSION_DISPLAY.ROLE"\n                                 key="role">\n                        <ng-template let-entry="$implicit">\n                            <adf-user-role-column [readonly]="entry.row.obj.readonly"\n                                                  [value]="entry.data.getValue(entry.row, entry.col)"\n                                                  [roles]="data.roles"\n                                                  id="adf-select-role-permission"\n                                                  (roleChanged)="onMemberUpdate($event, entry.row.obj)">\n                            </adf-user-role-column>\n                        </ng-template>\n\n                        <adf-data-column-header>\n                            <ng-template>\n                                <adf-user-role-column  class="adf-permission-role-column-header"\n                                                       placeholder="PERMISSION_MANAGER.COLUMN.BULK-ROLE"\n                                                       [roles]="data.roles"\n                                                       id="adf-bulk-select-role-permission"\n                                                       (roleChanged)="onBulkUpdate($event)">\n                                </adf-user-role-column>\n                            </ng-template>\n                        </adf-data-column-header>\n                    </data-column>\n\n                    <data-column class="adf-datatable-cell adf-delete-permission-column" key="" [sortable]="false">\n                        <ng-template let-entry="$implicit">\n                            <button mat-icon-button\n                                    class="adf-add-member-action"\n                                    [style.display]="entry.row.obj.readonly ? \'none\': \'block\'"\n                                    (click)="onMemberDelete(entry.row.obj)"\n                                    data-automation-id="adf-delete-permission-button">\n                                <mat-icon>highlight_off</mat-icon>\n                            </button>\n                        </ng-template>\n                    </data-column>\n                </data-columns>\n            </adf-datatable>\n        </div>\n\n    </mat-dialog-content>\n\n    <mat-dialog-actions>\n        <button mat-button\n                mat-dialog-close\n                data-automation-id="add-permission-dialog-close-button">\n            {{ "PERMISSION_MANAGER.ADD-PERMISSION.CLOSE-ACTION" | translate }}\n        </button>\n        <button mat-button\n                data-automation-id="add-permission-dialog-confirm-button"\n                [mat-dialog-close]="true"\n                class="adf-choose-action"\n                [disabled]="!isValid()"\n                (click)="onAddClicked()">\n            {{ "PERMISSION_MANAGER.ADD-PERMISSION.ADD-ACTION" | translate }}\n        </button>\n    </mat-dialog-actions>\n</ng-container>\n\n<ng-container *ngIf="isSearchActive">\n    <mat-dialog-content>\n        <adf-add-permission-panel class="adf-search-container" (select)="onSelect($event)"></adf-add-permission-panel>\n    </mat-dialog-content>\n\n    <mat-dialog-actions>\n            <button mat-button\n                    (click)="canCloseDialog()"\n                    data-automation-id="add-permission-dialog-close-button">\n                {{ "PERMISSION_MANAGER.ADD-PERMISSION.CLOSE-ACTION" | translate }}\n            </button>\n            <button mat-button\n                    data-automation-id="add-permission-dialog-confirm-button"\n                    [disabled]="!currentSelection.length"\n                    (click)="onSearchAddClicked()">\n                {{ "PERMISSION_MANAGER.ADD-PERMISSION.SELECT-ACTION" | translate }}\n            </button>\n    </mat-dialog-actions>\n</ng-container>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-add-permission-dialog .mat-dialog-title{color:var(--theme-text-bold-color);font-size:20px;font-stretch:normal;font-style:normal;font-weight:600;letter-spacing:-.5px;line-height:1.6;margin-left:24px;margin-right:24px}.adf-add-permission-dialog .mat-dialog-container{padding-left:0;padding-right:0}.adf-add-permission-dialog .mat-dialog-content{flex-grow:1;height:80vh;margin:0;overflow:hidden}.adf-add-permission-dialog .mat-dialog-content .adf-new-permission-table{height:90%}.adf-add-permission-dialog .mat-dialog-content .adf-search-container{height:100%}.adf-add-permission-dialog .mat-dialog-actions{background-color:var(--theme-background-color);color:var(--theme-foreground-text-color);display:flex;justify-content:flex-end;padding:0 24px}.adf-add-permission-dialog .mat-dialog-actions button{font-weight:400;text-transform:uppercase}.adf-add-permission-dialog .mat-dialog-actions .adf-choose-action[disabled]{color:var(--theme-secondary-text-color)}.adf-add-permission-dialog .mat-dialog-actions .adf-choose-action:enabled{color:var(--theme-primary-color)}.adf-add-permission-dialog .adf-search-user-button{width:100%}.adf-add-permission-dialog .adf-search-user-button .mat-button-wrapper{align-items:center;display:flex}.adf-add-permission-dialog .adf-add-member-action{padding:0 15px}"]}]}],Wn.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]},{type:c.MatDialogRef}]};var Xn=function(){function e(e,t,n){this.dialog=e,this.nodePermissionService=t,this.contentService=n}return e.prototype.openAddPermissionDialog=function(e,t,n){if(this.contentService.hasAllowableOperations(e,C.AllowableOperationsEnum.UPDATEPERMISSIONS)){var i=new T.Subject;i.subscribe({complete:this.close.bind(this)});var o={node:e,title:n,confirm:i,roles:t};return this.openDialog(o,"adf-add-permission-dialog","800px"),i}var r=new Error(JSON.stringify({error:{statusCode:403}}));return r.message="PERMISSION_MANAGER.ERROR.NOT-ALLOWED",T.throwError(r)},e.prototype.openDialog=function(e,t,n){this.dialog.open(Wn,{data:e,panelClass:t,width:n,restoreFocus:!0})},e.prototype.close=function(){this.dialog.closeAll()},e.prototype.updateNodePermissionByDialog=function(e,t){var n=this;return this.nodePermissionService.getNodeWithRoles(e).pipe(O.switchMap((function(i){var o=i.node,r=i.roles;return n.openAddPermissionDialog(o,r,t).pipe(O.switchMap((function(t){return n.nodePermissionService.updateNodePermissions(e,t)})))})))},e}();Xn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Xn(n.ɵɵinject(c.MatDialog),n.ɵɵinject(zn),n.ɵɵinject(C.ContentService))},token:Xn,providedIn:"root"}),Xn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Xn.ctorParameters=function(){return[{type:c.MatDialog},{type:zn},{type:C.ContentService}]};var Kn=function(){function e(e,t,i,o,r){var a=this;this.nodeService=e,this.nodePermissionService=t,this.nodePermissionDialogService=i,this.contentService=o,this.notificationService=r,this.updated=new n.EventEmitter,this.errored=new n.EventEmitter,this.loading$=new T.BehaviorSubject(!0),this.error$=new T.Subject,this.nodeWithRoles$=new T.Subject,this.data$=this.nodeWithRoles$.pipe(O.map((function(e){var t=e.node,n=e.roles,i=a.nodePermissionService.getLocalPermissions(t);return{node:t,roles:n,localPermissions:a.updateReadOnlyPermission(t,i),inheritedPermissions:a.nodePermissionService.getInheritedPermission(t)}}))),this.SITE_MANAGER_ROLE="SiteManager"}return e.prototype.fetchPermission=function(e){var t=this;this.loading$.next(!0),this.nodePermissionService.getNodeWithRoles(e).pipe(O.finalize((function(){return t.loading$.next(!1)}))).subscribe((function(e){var n=e.node,i=e.roles;t.node=n,t.roles=i,t.nodeWithRoles$.next({node:n,roles:i})}),(function(){return t.error$.next(!0)}))},e.prototype.toggleInherited=function(e){var t=this;if(this.contentService.hasAllowableOperations(this.node,C.AllowableOperationsEnum.UPDATEPERMISSIONS)){var n=T.of(null),i={permissions:{isInheritanceEnabled:!this.node.permissions.isInheritanceEnabled}},o=this.getManagerAuthority(this.node);if(o){var r=Q(this.node.permissions.locallySet||[],[{authorityId:o,name:this.SITE_MANAGER_ROLE,accessStatus:"ALLOWED"}]);n=this.nodePermissionService.updatePermissions(this.node,r)}n.pipe(O.switchMap((function(){return t.nodeService.updateNode(t.node.id,i,{include:["permissions"]})}))).subscribe((function(e){var n,i,o=e.permissions.isInheritanceEnabled?"PERMISSION_MANAGER.MESSAGE.INHERIT-ENABLE-SUCCESS":"PERMISSION_MANAGER.MESSAGE.INHERIT-DISABLE-SUCCESS";t.notificationService.showInfo(o),e.permissions.inherited=null!==(i=null===(n=e.permissions)||void 0===n?void 0:n.inherited)&&void 0!==i?i:[],t.reloadNode(e)}),(function(){e.source.checked=t.node.permissions.isInheritanceEnabled,t.notificationService.showWarning("PERMISSION_MANAGER.MESSAGE.TOGGLE-PERMISSION-FAILED")}))}else e.source.checked=this.node.permissions.isInheritanceEnabled,this.notificationService.showError("PERMISSION_MANAGER.ERROR.NOT-ALLOWED")},e.prototype.updateNodePermissionByDialog=function(){var e=this;this.nodePermissionDialogService.openAddPermissionDialog(this.node,this.roles,"PERMISSION_MANAGER.ADD-PERMISSION.TITLE").pipe(O.switchMap((function(t){var n=t.length,i=t.filter((function(t){var n=t.authorityId;return e.isGroup(n)})).length;return T.forkJoin({user:T.of(n-i),group:T.of(i),node:e.nodePermissionService.updateNodePermissions(e.node.id,t)})}))).subscribe((function(t){var n=t.user,i=t.group,o=t.node;e.notificationService.showInfo("PERMISSION_MANAGER.MESSAGE.PERMISSION-ADD-SUCCESS",null,{user:n,group:i}),e.reloadNode(o)}),(function(){e.notificationService.showError("PERMISSION_MANAGER.MESSAGE.PERMISSION-ADD-FAIL"),e.reloadNode()}))},e.prototype.deletePermissions=function(e){var t=this;this.nodePermissionService.removePermissions(this.node,e).subscribe((function(n){var i=e.length,o=e.filter((function(e){var n=e.authorityId;return t.isGroup(n)})).length;t.notificationService.showInfo("PERMISSION_MANAGER.MESSAGE.PERMISSION-BULK-DELETE-SUCCESS",null,{user:i-o,group:o}),t.reloadNode(n)}),(function(){t.notificationService.showError("PERMISSION_MANAGER.MESSAGE.PERMISSION-DELETE-FAIL"),t.reloadNode()}))},e.prototype.updateRole=function(e,t){var n=this,i=this.buildUpdatedPermission(e,t);this.nodePermissionService.updatePermissionRole(this.node,i).subscribe((function(e){n.notificationService.showInfo("PERMISSION_MANAGER.MESSAGE.PERMISSION-UPDATE-SUCCESS"),n.reloadNode(e),n.updated.emit(t)}),(function(){n.notificationService.showError("PERMISSION_MANAGER.MESSAGE.PERMISSION-UPDATE-FAIL"),n.reloadNode(),n.errored.emit(t)}))},e.prototype.bulkRoleUpdate=function(e){var t=this,n=Q(this.node.permissions.locallySet).map((function(n){return t.buildUpdatedPermission(e,n)}));this.nodePermissionService.updatePermissions(this.node,n).subscribe((function(e){var i=n.length,o=n.filter((function(e){var n=e.authorityId;return t.isGroup(n)})).length;t.notificationService.showInfo("PERMISSION_MANAGER.MESSAGE.PERMISSION-BULK-UPDATE-SUCCESS",null,{user:i-o,group:o}),t.reloadNode(e)}),(function(){t.notificationService.showError("PERMISSION_MANAGER.MESSAGE.PERMISSION-UPDATE-FAIL"),t.reloadNode()}))},e.prototype.deletePermission=function(e){var t=this,n=Object.assign(Object.assign({},this.node),{permissions:Object.assign(Object.assign({},this.node.permissions),{locallySet:Q(this.node.permissions.locallySet)})});this.nodePermissionService.removePermission(n,e).subscribe((function(e){t.notificationService.showInfo("PERMISSION_MANAGER.MESSAGE.PERMISSION-DELETE-SUCCESS"),e.permissions.locallySet||(e.permissions.locallySet=[]),t.reloadNode(e)}),(function(){t.notificationService.showError("PERMISSION_MANAGER.MESSAGE.PERMISSION-DELETE-FAIL"),t.reloadNode()}))},e.prototype.buildUpdatedPermission=function(e,t){return{accessStatus:t.accessStatus,name:this.canUpdateThePermission(this.node,t)?e:t.name,authorityId:t.authorityId}},e.prototype.reloadNode=function(e){null!=e&&Object.assign(this.node.permissions,e.permissions),this.nodeWithRoles$.next({node:this.node,roles:this.roles})},e.prototype.getManagerAuthority=function(e){var t,n,i=this,o=e.path.elements.find((function(e){return"st:site"===e.nodeType})),r=!1;return o&&(n="GROUP_site_"+o.name+"_"+this.SITE_MANAGER_ROLE,r=!!(null===(t=e.permissions.locallySet)||void 0===t?void 0:t.find((function(e){return e.authorityId===n&&e.name===i.SITE_MANAGER_ROLE})))),!r&&n?n:null},e.prototype.updateReadOnlyPermission=function(e,t){var n=this;return t.forEach((function(t){n.canUpdateThePermission(e,t)||(t.readonly=!0)})),t},e.prototype.canUpdateThePermission=function(e,t){var n=e.path.elements.find((function(e){return"st:site"===e.nodeType}));if(!e.permissions.isInheritanceEnabled&&n){var i="GROUP_site_"+n.name+"_"+this.SITE_MANAGER_ROLE;return!(t.authorityId===i&&t.name===this.SITE_MANAGER_ROLE)}return!0},e.prototype.isGroup=function(e){return e.startsWith("GROUP_")||e.startsWith("ROLE_")},e}();Kn.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new Kn(n.ɵɵinject(C.NodesApiService),n.ɵɵinject(zn),n.ɵɵinject(Xn),n.ɵɵinject(C.ContentService),n.ɵɵinject(C.NotificationService))},token:Kn,providedIn:"root"}),Kn.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Kn.ctorParameters=function(){return[{type:C.NodesApiService},{type:zn},{type:Xn},{type:C.ContentService},{type:C.NotificationService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Zn=function(){function e(e){this.permissionList=e,this.selectedPermissions=[],this.error=this.permissionList.errored,this.update=this.permissionList.updated}return e.prototype.ngOnInit=function(){this.permissionList.fetchPermission(this.nodeId)},e.prototype.openAddPermissionDialog=function(){this.permissionList.updateNodePermissionByDialog()},e.prototype.onSelect=function(e){this.selectedPermissions=e.map((function(e){return e.obj})).filter((function(e){return!e.readonly}))},e.prototype.deleteSelection=function(){this.permissionList.deletePermissions(this.selectedPermissions),this.selectedPermissions=[]},e.prototype.updatePermission=function(e){var t=e.role,n=e.permission;this.permissionList.updateRole(t,n)},e.prototype.deletePermission=function(e){this.selectedPermissions=[],this.permissionList.deletePermission(e)},e.prototype.updateAllPermission=function(e){this.permissionList.bulkRoleUpdate(e),this.selectedPermissions=[]},e}();Zn.decorators=[{type:n.Component,args:[{selector:"adf-permission-list",template:'<mat-card class="adf-permission-card" id="adf-permission-manager-card">\n    <div *ngIf="!(permissionList.data$ | async) && permissionList.loading$ | async" class="adf-permission-loader">\n        <mat-progress-spinner [color]="\'primary\'"\n                              [mode]="\'indeterminate\'">\n        </mat-progress-spinner>\n    </div>\n\n    <ng-container *ngIf="permissionList.error$ | async">\n        <div class="adf-no-permission__template" id="adf-permission-manager-error">\n            <mat-icon color="warn">error</mat-icon>\n            <p class="adf-no-permission__template--text">{{ \'PERMISSION_MANAGER.ERROR.NOT-FOUND\'| translate }}</p>\n        </div>\n    </ng-container>\n\n    <ng-container *ngIf="permissionList.data$ | async as model">\n        <div class="adf-permission-container" #target>\n\n            <div class="adf-permission-header">\n                <span class="adf-inherit-container">\n                    <h3 class="adf-inherit-container-header">\n                        {{\'PERMISSION_MANAGER.LABELS.INHERITED-PERMISSIONS\' | translate }}\n\n                        {{ (model.node.permissions.isInheritanceEnabled ? "PERMISSION_MANAGER.LABELS.ON" : "PERMISSION_MANAGER.LABELS.OFF") | translate }}\n                    </h3>\n\n                    <mat-slide-toggle\n                        class="adf-inherit-toggle"\n                        data-automation-id="adf-inherit-toggle-button"\n                        [checked]="model.node.permissions.isInheritanceEnabled"\n                        (change)="permissionList.toggleInherited($event)">\n                    </mat-slide-toggle>\n                </span>\n\n                <span class="adf-inherit-subtitle" title="total">\n                    {{\'PERMISSION_MANAGER.LABELS.INHERITED-SUBTITLE\' | translate: { count: model.inheritedPermissions.length } }}\n                </span>\n            </div>\n\n            <button\n                mat-button\n                data-automation-id="permission-info-button"\n                [adf-pop-over]="inheritedPermission"\n                [target]="target"\n                #popOver="adfPopOver"\n                *ngIf="model.node.permissions.isInheritanceEnabled">\n                {{ (popOver.open ? \'PERMISSION_MANAGER.LABELS.HIDE\' : \'PERMISSION_MANAGER.LABELS.SHOW\') | translate }}\n                <mat-icon *ngIf="popOver.open"> keyboard_arrow_up </mat-icon>\n                <mat-icon *ngIf="!popOver.open"> keyboard_arrow_down </mat-icon>\n            </button>\n        </div>\n\n        <ng-template #inheritedPermission>\n            <div class="adf-pop-over-card">\n                <adf-permission-container\n                    data-automation-id="adf-inherited-permission"\n                    [isReadOnly]="true"\n                    [node]="model.node"\n                    [permissions]="model.inheritedPermissions"\n                    [showLocation]="true"\n                    [selectionMode]="\'none\'"\n                    [roles]="model.roles">\n                </adf-permission-container>\n            </div>\n        </ng-template>\n\n        <mat-card-content class="adf-local-permission-container">\n            <section class="adf-permission-content-header">\n                <h3>{{\'PERMISSION_MANAGER.LABELS.DIRECT-PERMISSIONS\' | translate }}</h3>\n\n                <div class="adf-toolbar--spacer"></div>\n\n                <button\n                    mat-button\n                    [matTooltip]="\'PERMISSION_MANAGER.ACTION.ADD-PERMISSION\' | translate"\n                    (click)="openAddPermissionDialog()"\n                    data-automation-id="adf-add-permission-button">\n                    <mat-icon>person_add_outline</mat-icon>\n                </button>\n\n                <button\n                    mat-button\n                    [matTooltip]="\'PERMISSION_MANAGER.ACTION.DELETE\' | translate"\n                    [disabled]="!selectedPermissions?.length"\n                    (click)="deleteSelection()"\n                    data-automation-id="adf-delete-selected-permission">\n                    <mat-icon>delete_outline</mat-icon>\n                </button>\n            </section>\n\n            <adf-permission-container\n                class="adf-permission-list"\n                data-automation-id="adf-locally-set-permission"\n                [node]="model.node"\n                [permissions]="model.localPermissions"\n                (update)="updatePermission($event)"\n                (delete)="deletePermission($event)"\n                (updateAll)="updateAllPermission($event)"\n                (row-select)="onSelect($any($event).detail.selection)"\n                (row-unselect)="onSelect($any($event).detail.selection)"\n                [roles]="model.roles">\n            </adf-permission-container>\n\n        </mat-card-content>\n    </ng-container>\n</mat-card>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-permission-card{box-sizing:border-box;display:flex!important;flex-direction:column;height:100%;overflow:hidden}.adf-permission-loader{margin-left:45%;overflow:hidden}.adf-permission-container{border:1px solid var(--theme-border-color);justify-content:space-between;padding:10px 15px}.adf-inherit-container,.adf-permission-container{align-items:center;display:flex;flex-direction:row}.adf-inherit-container-header{margin-bottom:10px;margin-top:10px}.adf-inherit-toggle{padding-left:30px}.adf-inherit-subtitle{padding-bottom:5px}.adf-permission-content-header{align-items:center;display:flex;flex-direction:row;padding:5px 15px}.adf-permission-role-column-header{height:40px;position:relative!important}.adf-permission-role-column-header .mat-form-field-infix{border:none}.adf-permission-header{display:flex;flex:1;flex-direction:column;height:100%;min-height:0;overflow:hidden}.adf-permission-list{display:flex;height:calc(100% - 63px)}.adf-local-permission-container{flex:1 1 auto;overflow:hidden}[aria-sort=Ascending] adf-user-role-column,[aria-sort=Descending] adf-user-role-column{padding-left:10px;padding-right:10px}.adf-permission-pop-over{padding-right:15px;width:100%}.adf-permission-pop-over .adf-pop-over-card{box-shadow:0 8px 9px -5px var(--theme-fg-divider),0 15px 22px 2px var(--theme-fg-divider);overflow:hidden;width:100%}"]}]}],Zn.ctorParameters=function(){return[{type:Kn}]},Zn.propDecorators={nodeId:[{type:n.Input}],update:[{type:n.Output}],error:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Jn=function(){function e(e,t){this.nodeService=e,this.contentService=t,this.updated=new n.EventEmitter,this.error=new n.EventEmitter}return e.prototype.onInheritPermissionClicked=function(){var e=this;this.nodeService.getNode(this.nodeId).subscribe((function(t){var n,i;if(e.contentService.hasAllowableOperations(t,C.AllowableOperationsEnum.UPDATEPERMISSIONS)){var o={permissions:{isInheritanceEnabled:null!==(i=!(null===(n=null==t?void 0:t.permissions)||void 0===n?void 0:n.isInheritanceEnabled))&&void 0!==i&&i}};e.nodeService.updateNode(e.nodeId,o,{include:["permissions"]}).subscribe((function(t){e.updated.emit(t)}),(function(t){return e.error.emit(t)}))}else e.error.emit("PERMISSION_MANAGER.ERROR.NOT-ALLOWED")}))},e}();Jn.decorators=[{type:n.Directive,args:[{selector:"button[adf-inherit-permission], mat-button-toggle[adf-inherit-permission]",host:{role:"button","(click)":"onInheritPermissionClicked()"}}]}],Jn.ctorParameters=function(){return[{type:C.NodesApiService},{type:C.ContentService}]},Jn.propDecorators={nodeId:[{type:n.Input}],updated:[{type:n.Output}],error:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ei=new n.InjectionToken("Alfresco Search Query Token"),ti=function(){function e(e){this.queryProvider=e}return e.prototype.generateQueryBody=function(e,t,n){return{query:{query:this.getQuery(e)},include:["properties","aspectNames"],paging:{maxItems:t,skipCount:n},filterQueries:[{query:"TYPE:'cm:authority'"}]}},e.prototype.getQuery=function(e){return this.queryProvider&&this.queryProvider.query?this.queryProvider.query.replace(new RegExp(/\${([^}]+)}/g),e):"(email:*"+e+"* OR firstName:*"+e+"* OR lastName:*"+e+"* OR displayName:*"+e+"* OR authorityName:*"+e+"* OR authorityDisplayName:*"+e+'*) AND ANAME:("0/APP.DEFAULT")'},e}();ti.decorators=[{type:n.Injectable}],ti.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[ei]}]}]};var ni=function(){function e(){var e=this;this.select=new n.EventEmitter,this.searchInput=new D.FormControl,this.searchedWord="",this.debounceSearch=200,this.selectedItems=[],this.EVERYONE=new w.NodeEntry({entry:{nodeType:"cm:authorityContainer",properties:{"cm:authorityName":"GROUP_EVERYONE"}}}),this.searchInput.valueChanges.pipe(O.debounceTime(this.debounceSearch)).subscribe((function(t){var n,i=e.matSelectionList.selectedOptions.selected.map((function(e){return e.value}));(n=e.selectedItems).push.apply(n,Q(i)),e.matSelectionList.deselectAll(),e.searchedWord=t,t||e.search.resetResults()}))}return e.prototype.onSelectionChange=function(){var e=Q(this.matSelectionList.selectedOptions.selected.map((function(e){return e.value})),this.selectedItems).reduce((function(e,t){return e.find((function(e){return e.entry.id===t.entry.id}))||e.push(t),e}),[]);this.select.emit(e)},e.prototype.clearSearch=function(){this.searchedWord="",this.selectedItems.splice(0,this.selectedItems.length),this.search.resetResults()},e}();ni.decorators=[{type:n.Component,args:[{selector:"adf-add-permission-panel",template:'<mat-form-field floatPlaceholder="never"\n                class="adf-permission-search-input">\n    <input matInput\n           id="searchInput"\n           [formControl]="searchInput"\n           type="text"\n           placeholder="{{\'PERMISSION_MANAGER.ADD-PERMISSION.SEARCH\' | translate}}"\n           [value]="searchedWord">\n\n    <mat-icon *ngIf="searchedWord?.length > 0"\n              class="adf-permission-search-icon"\n              data-automation-id="adf-permission-clear-input"\n              id="adf-permission-clear-input"\n              matSuffix\n              (click)="clearSearch()">clear\n    </mat-icon>\n\n    <mat-icon *ngIf="searchedWord?.length === 0"\n              class="adf-permission-search-icon"\n              data-automation-id="adf-permission-search-icon"\n              matSuffix>search\n    </mat-icon>\n</mat-form-field>\n\n<div *ngIf="searchedWord?.length === 0"\n     class="adf-permission-start-message"\n     id="adf-add-permission-type-search">\n    <span>{{\'PERMISSION_MANAGER.ADD-PERMISSION.TYPE-MESSAGE\' | translate}}</span>\n</div>\n\n<adf-search #search\n            [searchTerm]="searchedWord"\n            id="adf-add-permission-authority-results"\n            class="adf-permission-result-list"\n            [class.adf-permission-result-list-search]="searchedWord.length === 0">\n    <ng-template let-data>\n        <mat-selection-list class="adf-permission-result-list-elements" (keydown.control.a)="onSelectionChange()"\n                            (selectionChange)="onSelectionChange()">\n            <mat-list-option id="adf-add-permission-group-everyone"\n                             class="adf-list-option-item"\n                             #eveyone\n                             disableRipple\n                             [value]="EVERYONE">\n                <adf-user-icon-column [node]="EVERYONE" id="add-group-icon" [selected]="eveyone.selected"></adf-user-icon-column>\n                <p class="adf-result-name">\n                    {{\'PERMISSION_MANAGER.ADD-PERMISSION.EVERYONE\' | translate}}\n                </p>\n            </mat-list-option>\n\n            <mat-list-option *ngFor="let item of data?.list?.entries; let idx = index"\n                             disableRipple\n                             [value]="item"\n                             class="adf-list-option-item"\n                             id="result_option_{{idx}}"\n                             #option>\n                <adf-user-icon-column [node]="item" [selected]="option.selected"></adf-user-icon-column>\n                <p class="adf-result-name">\n                    <ng-container *ngIf="item.entry?.properties[\'cm:authorityDisplayName\']; else authorityName">\n                        {{item.entry.properties[\'cm:authorityDisplayName\']}}\n                    </ng-container>\n                    <ng-template #authorityName>\n                        <ng-container *ngIf="item.entry?.properties[\'cm:authorityName\']; else owner">\n                            {{item.entry.properties[\'cm:authorityName\']}}\n                        </ng-container>\n                    </ng-template>\n                    <ng-template #owner>\n                        {{item.entry?.properties[\'cm:firstName\'] ? item.entry?.properties[\'cm:firstName\'] : \'\' }}\n                        {{item.entry?.properties[\'cm:lastName\'] ? item.entry?.properties[\'cm:lastName\']: \'\'}}\n                    </ng-template>\n                </p>\n            </mat-list-option>\n        </mat-selection-list>\n    </ng-template>\n</adf-search>\n',encapsulation:n.ViewEncapsulation.None,providers:[{provide:C.SearchConfigurationService,useClass:ti},C.SearchService],styles:[".adf-permission-result-list{border:2px solid var(--theme-border-color);display:flex;height:calc(100% - 75px);overflow:auto}.adf-permission-result-list-elements{width:100%}.adf-permission-result-list-search{display:none}.adf-permission-start-message{border:2px solid var(--theme-border-color);height:calc(100% - 75px);overflow:auto}.adf-permission-no-result,.adf-permission-start-message{align-items:center;display:flex;justify-content:space-around}.adf-permission-no-result,.adf-permission-search-input{width:100%}.adf-permission-search-input-icon{color:var(--theme-selected-button-bg-color);cursor:pointer}.adf-permission-search-input-icon:hover{color:var(--theme-fg-base-color)}.adf-list-option-item mat-pseudo-checkbox{display:none}.adf-list-option-item .mat-list-text{align-items:center;display:flex;flex-direction:row!important}.adf-list-option-item .mat-list-text .adf-result-name{padding-left:16px!important}.adf-permission-action[disabled]{opacity:.6}.adf-permission-action:enabled{color:var(--theme-primary-color)}"]}]}],ni.ctorParameters=function(){return[]},ni.propDecorators={search:[{type:n.ViewChild,args:["search",{static:!0}]}],matSelectionList:[{type:n.ViewChild,args:[h.MatSelectionList,{static:!1}]}],select:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ii=function(){function e(e,t){this.nodePermissionService=e,this.contentService=t,this.success=new n.EventEmitter,this.error=new n.EventEmitter,this.selectedItems=[]}return e.prototype.ngOnInit=function(){var e=this;this.nodePermissionService.getNodeWithRoles(this.nodeId).subscribe((function(t){var n=t.node,i=t.roles;e.currentNode=n,e.currentNodeRoles=i}))},e.prototype.onSelect=function(e){this.selectedItems=e},e.prototype.isAddEnabled=function(){return this.contentService.hasAllowableOperations(this.currentNode,C.AllowableOperationsEnum.UPDATEPERMISSIONS)&&0!==this.selectedItems.length},e.prototype.applySelection=function(){var e=this;if(this.contentService.hasAllowableOperations(this.currentNode,C.AllowableOperationsEnum.UPDATEPERMISSIONS)){var t=this.transformNodeToPermissionElement(this.selectedItems,this.currentNodeRoles[0].role);this.nodePermissionService.updateNodePermissions(this.nodeId,t).subscribe((function(t){e.success.emit(t)}),(function(t){e.error.emit(t)}))}},e.prototype.transformNodeToPermissionElement=function(e,t){return e.map((function(e){var n;return{authorityId:null!==(n=e.entry.properties["cm:authorityName"])&&void 0!==n?n:e.entry.properties["cm:userName"],name:t,accessStatus:"ALLOWED"}}))},e}();ii.decorators=[{type:n.Component,args:[{selector:"adf-add-permission",template:'<adf-add-permission-panel\n    (select)="onSelect($event)">\n</adf-add-permission-panel>\n<div id="adf-add-permission-actions">\n   <button mat-button\n          id="adf-add-permission-action-button"\n          class="adf-permission-action"\n          [disabled]="!isAddEnabled()"\n          (click)="applySelection()">\n     {{\'PERMISSION_MANAGER.ADD-PERMISSION.ADD-ACTION\' | translate}}\n    </button>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-permission-action[disabled]{opacity:.6}.adf-permission-action:enabled{color:var(--theme-primary-color)}"]}]}],ii.ctorParameters=function(){return[{type:zn},{type:C.ContentService}]},ii.propDecorators={nodeId:[{type:n.Input}],success:[{type:n.Output}],error:[{type:n.Output}]};var oi=function(){function e(e){this.nodePermissionService=e,this.selected=!1,this.displayText$=new T.BehaviorSubject(null),this.group=!1}return Object.defineProperty(e.prototype,"isSelected",{get:function(){var e,t;return(null===(t=null===(e=this.context)||void 0===e?void 0:e.row)||void 0===t?void 0:t.isSelected)||this.selected},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e,t;if(this.context){var n=null!==(t=null===(e=this.context.row.obj)||void 0===e?void 0:e.entry)&&void 0!==t?t:this.context.row.obj,i=n.person,o=n.group,r=n.authorityId;this.group=this.isGroup(o,r),this.displayText$.next(i||o||{displayName:r})}if(this.node){var a=this.nodePermissionService.transformNodeToUserPerson(this.node.entry);i=a.person,o=a.group;this.group=this.isGroup(o,null),this.displayText$.next(i||o)}},e.prototype.isGroup=function(e,t){return!!e||(null==t?void 0:t.startsWith("GROUP_"))||(null==t?void 0:t.startsWith("ROLE_"))},e}();oi.decorators=[{type:n.Component,args:[{selector:"adf-user-icon-column",template:'\n        <div class="adf-cell-value" [attr.id]="group ? \'group-icon\' : \'person-icon\'"  *ngIf="!isSelected">\n            <ng-container *ngIf="displayText$ | async as user">\n                <mat-icon *ngIf="group" class="adf-group-icon">people_alt_outline</mat-icon>\n                <div *ngIf="!group" [outerHTML]="user | usernameInitials: \'adf-people-initial\'"></div>\n            </ng-container>\n        </div>\n        <div class="adf-cell-value" *ngIf="isSelected">\n            <mat-icon class="adf-people-select-icon adf-datatable-selected" svgIcon="selected"></mat-icon>\n        </div>\n    ',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-user-icon-column adf-datatable-content-cell"},styles:[".adf-people-initial{align-items:center;display:flex;font-size:18px;height:40px;justify-content:center;text-transform:uppercase;width:40px}.adf-group-icon,.adf-people-initial{background:var(--theme-primary-color);border-radius:50%;color:var(--theme-primary-color-default-contrast)!important;font-weight:bolder}.adf-group-icon{font-size:20px;height:20px!important;padding:10px;width:20px!important}.adf-people-select-icon{margin:0!important}.adf-people-select-icon svg{fill:var(--theme-accent-color);height:40px;width:40px}"]}]}],oi.ctorParameters=function(){return[{type:zn}]},oi.propDecorators={context:[{type:n.Input}],node:[{type:n.Input}],selected:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ri=function(){function e(e){this.nodePermissionService=e,this.displayText$=new T.BehaviorSubject(""),this.subTitleText$=new T.BehaviorSubject("")}return e.prototype.ngOnInit=function(){var e,t;if(null!=this.context){var n=null!==(t=null===(e=this.context.row.obj)||void 0===e?void 0:e.entry)&&void 0!==t?t:this.context.row.obj,i=n.person,o=n.group,r=n.authorityId,a=r?{displayName:r}:null;this.updatePerson(i),this.updateGroup(o||a)}if(this.node){var s=this.nodePermissionService.transformNodeToUserPerson(this.node.entry);i=s.person,o=s.group;this.updatePerson(i),this.updateGroup(o)}},e.prototype.updatePerson=function(e){var t,n,i;e&&(this.displayText$.next((null!==(t=e.firstName)&&void 0!==t?t:"")+" "+(null!==(n=e.lastName)&&void 0!==n?n:"")),this.subTitleText$.next(null!==(i=e.email)&&void 0!==i?i:""))},e.prototype.updateGroup=function(e){e&&this.displayText$.next(e.displayName)},e}();ri.decorators=[{type:n.Component,args:[{selector:"adf-user-name-column",template:'\n        <div class="adf-ellipsis-cell" [attr.data-automation-id]="displayText$ | async">\n            <span class="adf-user-name-column" title="{{ displayText$ | async }}"> {{ displayText$ | async }}</span>\n            <br/>\n            <span class="adf-user-email-column" title="{{ subTitleText$ | async }}" *ngIf="subTitleText$ | async">\n                {{ subTitleText$ | async }}\n            </span>\n        </div>\n    ',encapsulation:n.ViewEncapsulation.None,host:{class:"adf-user-name-column adf-datatable-content-cell adf-expand-cell-5 adf-ellipsis-cell"},styles:[".adf-user-name-column{font-size:14px;font-weight:600}.adf-user-email-column{color:var(--theme-foreground-text-color);font-size:14px;letter-spacing:-.2px;line-height:1.43}"]}]}],ri.ctorParameters=function(){return[{type:zn}]},ri.propDecorators={context:[{type:n.Input}],node:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ai=function(){function e(){this.readonly=!1,this.placeholder="PERMISSION_MANAGER.LABELS.SELECT-ROLE",this.roleChanged=new n.EventEmitter}return e.prototype.onRoleChanged=function(e){this.value=e,this.roleChanged.emit(e)},e}();ai.decorators=[{type:n.Component,args:[{selector:"adf-user-role-column",template:'\n      <mat-form-field floatLabel="never" class="adf-role-selector-field" *ngIf="!readonly">\n          <mat-select\n              (click)="$event.stopPropagation()"\n              [placeholder]="placeholder | translate"\n              [value]="value"\n              (selectionChange)="onRoleChanged($event.value)">\n              <mat-option *ngFor="let role of roles" [value]="role.role">\n                  {{ role.label | adfLocalizedRole }}\n              </mat-option>\n          </mat-select>\n      </mat-form-field>\n\n      <span class="adf-datatable-cell-value adf-readonly-role" [title]="value | adfLocalizedRole" *ngIf="readonly">\n          {{value | adfLocalizedRole}}\n      </span>\n  ',host:{class:"adf-user-role-column adf-datatable-content-cell adf-expand-cell-4"},styles:[".adf-role-selector-field {\n            width: 100%;\n            .mat-form-field {\n                width: 100%;\n                max-width: 200px;\n            }\n        }\n        .adf-readonly-role {\n            padding-left: 0 !important;\n        }\n        "]}]}],ai.propDecorators={roles:[{type:n.Input}],value:[{type:n.Input}],readonly:[{type:n.Input}],placeholder:[{type:n.Input}],roleChanged:[{type:n.Output}]};var si=function(){function e(){this.displayText$=new T.BehaviorSubject("")}return e.prototype.ngOnInit=function(){this.updateValue()},e.prototype.updateValue=function(){this.displayText$.next(this.node.path.name)},e}();si.decorators=[{type:n.Component,args:[{selector:"adf-node-path-column",template:'\n        <span class="adf-user-name-column adf-datatable-cell-value"  title="{{ displayText$ | async }}">\n            {{ displayText$ | async }}\n        </span>\n    ',host:{class:"adf-node-path-column adf-datatable-content-cell"}}]}],si.propDecorators={node:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var li=function(){function e(){this.permissions=[],this.isReadOnly=!1,this.showLocation=!1,this.selectionMode="multiple",this.update=new n.EventEmitter,this.updateAll=new n.EventEmitter,this.delete=new n.EventEmitter,this.error=new n.EventEmitter}return e.prototype.ngOnChanges=function(){this.bulkSelectionRole=""},e.prototype.updateRole=function(e,t){this.update.emit({role:e,permission:t})},e.prototype.bulkRoleUpdate=function(e){this.updateAll.emit(e)},e.prototype.removePermission=function(e,t){e.stopPropagation(),this.delete.emit(t)},e}();li.decorators=[{type:n.Component,args:[{selector:"adf-permission-container",template:'<adf-datatable class="adf-datatable-permission"\n               id="adf-permission-display-container"\n               [rows]="permissions"\n               [stickyHeader]="true"\n               [selectionMode]="selectionMode">\n\n    <data-columns>\n        <data-column class="adf-datatable-cell--image adf-authority-icon-column" key="$thumbunail" [sortable]="false">\n            <ng-template let-context>\n                <adf-user-icon-column [context]="context"></adf-user-icon-column>\n            </ng-template>\n        </data-column>\n\n        <data-column class="adf-ellipsis-cell adf-expand-cell-5 adf-authorityId-column"\n                     [title]="\'PERMISSION_MANAGER.COLUMN.NAME\' | translate:{count:permissions.length}"\n                     key="authorityId">\n            <ng-template let-context>\n                <adf-user-name-column [context]="context"></adf-user-name-column>\n            </ng-template>\n        </data-column>d\n\n        <data-column class="adf-ellipsis-cell adf-expand-cell-5 adf-authorityId-column"\n                     title="PERMISSION_MANAGER.COLUMN.LOCATION"\n                     key="location"\n                     *ngIf="node && showLocation">\n            <ng-template>\n                <adf-node-path-column [node]="node"></adf-node-path-column>\n            </ng-template>\n        </data-column>\n\n        <data-column\n            class="adf-ellipsis-cell adf-expand-cell-4"\n            title="PERMISSION_MANAGER.PERMISSION_DISPLAY.ROLE"\n            key="name"\n            [sortable]="false">\n            <ng-template let-entry="$implicit">\n                <adf-user-role-column [readonly]="entry.row.obj.readonly || isReadOnly"\n                                      [placeholder]="entry.data.getValue(entry.row, entry.col)"\n                                      [value]="entry.data.getValue(entry.row, entry.col)"\n                                      [roles]="roles"\n                                      id="adf-select-role-permission"\n                                      (roleChanged)="updateRole($event, entry.row.obj)">\n                </adf-user-role-column>\n            </ng-template>\n\n            <adf-data-column-header *ngIf="!isReadOnly">\n                <ng-template>\n                    <adf-user-role-column class="adf-permission-role-column-header"\n                                          placeholder="PERMISSION_MANAGER.COLUMN.BULK-ROLE"\n                                          [roles]="roles"\n                                          [value]="bulkSelectionRole"\n                                          id="adf-bulk-select-role-permission"\n                                          (roleChanged)="bulkRoleUpdate($event)">\n                    </adf-user-role-column>\n                </ng-template>\n            </adf-data-column-header>\n        </data-column>\n\n        <data-column class="adf-datatable-cell adf-delete-permission-column" key="" *ngIf="!isReadOnly" [sortable]="false">\n            <ng-template let-entry="$implicit">\n                <button mat-icon-button\n                        [disabled]="entry.row.obj.readonly"\n                        (click)="removePermission($event, entry.row.obj)"\n                        [attr.data-automation-id]="\'adf-delete-permission-button-\' + entry.row.obj.authorityId">\n                    <mat-icon>delete_outline</mat-icon>\n                </button>\n            </ng-template>\n        </data-column>\n    </data-columns>\n\n    <adf-no-content-template>\n        <ng-template>\n            <adf-empty-content\n                id="adf-no-permissions-template"\n                icon="supervisor_account"\n                [title]="\'PERMISSION_MANAGER.MESSAGE.EMPTY-PERMISSION\' | translate"\n                [subtitle]="\'PERMISSION_MANAGER.MESSAGE.EMPTY-SUBTITLE\' | translate">\n            </adf-empty-content>\n        </ng-template>\n    </adf-no-content-template>\n\n</adf-datatable>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-datatable-permission{display:flex;min-width:450px;width:100%}.adf-datatable-permission.adf-datatable{overflow:hidden}.adf-datatable-permission.adf-datatable .adf-delete-permission-column{min-width:80px}.adf-datatable-permission.adf-datatable .adf-delete-permission-column .adf-cell-value{padding-right:10px;place-content:flex-end;width:80px}.adf-datatable-permission.adf-datatable .adf-authorityId-column{flex:40%}.adf-datatable-permission.adf-datatable .adf-authority-icon-column{min-width:40px}.adf-datatable-permission.adf-datatable .adf-datatable-selected>svg{height:40px;width:40px}"]}]}],li.propDecorators={node:[{type:n.Input}],permissions:[{type:n.Input}],roles:[{type:n.Input}],isReadOnly:[{type:n.Input}],showLocation:[{type:n.Input}],selectionMode:[{type:n.Input}],update:[{type:n.Output}],updateAll:[{type:n.Output}],delete:[{type:n.Output}],error:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ci=function(){function e(e,t,n){this.element=e,this.overlay=t,this.vcr=n,this.panelClass="adf-permission-pop-over",this._open=!1,this.destroy$=new T.Subject}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.createOverlay()},e.prototype.ngAfterViewInit=function(){var e=this;this.element.nativeElement.addEventListener("click",(function(){return e.attachOverlay()}))},e.prototype.ngOnDestroy=function(){this.detachOverlay(),this.destroy$.next(),this.destroy$.complete()},e.prototype.createOverlay=function(){var e=this,t=this.overlay.scrollStrategies.reposition(),n=this.overlay.position().flexibleConnectedTo(this.target).withPositions([new k.ConnectionPositionPair({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new k.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})]).withPush(!1);this.overlayRef=this.overlay.create({positionStrategy:n,scrollStrategy:t,hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",panelClass:this.panelClass}),this.overlayRef.backdropClick().pipe(O.takeUntil(this.destroy$)).subscribe((function(){e._open=!1,e.detachOverlay()}))},e.prototype.attachOverlay=function(){if(!this.overlayRef.hasAttached()){var e=new _.TemplatePortal(this.popOver,this.vcr);this.overlayRef.attach(e),this._open=!0}},e.prototype.detachOverlay=function(){this.overlayRef.hasAttached()&&this.overlayRef.detach()},e}();ci.decorators=[{type:n.Directive,args:[{selector:"[adf-pop-over]",exportAs:"adfPopOver"}]}],ci.ctorParameters=function(){return[{type:n.ElementRef},{type:k.Overlay},{type:n.ViewContainerRef}]},ci.propDecorators={popOver:[{type:n.Input,args:["adf-pop-over"]}],target:[{type:n.Input}],panelClass:[{type:n.Input}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var di=function(){};di.decorators=[{type:n.NgModule,args:[{imports:[C.CoreModule,t.CommonModule,D.FormsModule,D.ReactiveFormsModule,j,jt,C.PipeModule],declarations:[Zn,ni,Jn,ii,Wn,ri,oi,ai,ci,si,li],exports:[Zn,ni,Jn,ii,Wn,ri,oi,ai,ci,si]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var pi=function(){function e(e,t,n,i,o,r,a,s){this.appConfigService=e,this.sharedLinksApiService=t,this.dialogRef=n,this.dialog=i,this.nodesApiService=o,this.contentService=r,this.renditionService=a,this.data=s,this.minDate=x().add(1,"d"),this.isFileShared=!1,this.isDisabled=!1,this.form=new D.FormGroup({sharedUrl:new D.FormControl(""),time:new D.FormControl({value:"",disabled:!0})}),this.type="datetime",this.maxDebounceTime=500,this.onDestroy$=new T.Subject}return e.prototype.ngOnInit=function(){var e=this;if(this.type=this.appConfigService.get("sharedLinkDateTimePickerType","datetime"),this.data.node&&this.data.node.entry){this.fileName=this.data.node.entry.name,this.baseShareUrl=this.data.baseShareUrl;var t=this.data.node.entry.properties;t&&t["qshare:sharedId"]?(this.sharedId=t["qshare:sharedId"],this.isFileShared=!0,this.updateForm()):this.createSharedLinks(this.data.node.entry.id)}this.time.valueChanges.pipe(O.debounceTime(this.maxDebounceTime),O.takeUntil(this.onDestroy$)).subscribe((function(t){return e.onTimeChanged(t)}))},e.prototype.onTimeChanged=function(e){var t=this;this.updateNode(e).subscribe((function(){return t.updateEntryExpiryDate(e)}))},Object.defineProperty(e.prototype,"time",{get:function(){return this.form.controls.time},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.onSlideShareChange=function(e){e.checked?this.createSharedLinks(this.data.node.entry.id):this.openConfirmationDialog()},Object.defineProperty(e.prototype,"canUpdate",{get:function(){var e=this.data.node.entry;return!e||!e.allowableOperations||this.contentService.hasAllowableOperations(e,"update")},enumerable:!1,configurable:!0}),e.prototype.onToggleExpirationDate=function(e){e.checked?this.time.enable():(this.time.disable(),this.time.setValue(null))},e.prototype.onDatetimepickerClosed=function(){this.dateTimePickerInput.nativeElement.blur(),this.time.value||(this.slideToggleExpirationDate.checked=!1)},e.prototype.openConfirmationDialog=function(){var e=this;this.isFileShared=!1,this.dialog.open(Wt,{data:{title:"SHARE.CONFIRMATION.DIALOG-TITLE",message:"SHARE.CONFIRMATION.MESSAGE",yesLabel:"SHARE.CONFIRMATION.REMOVE",noLabel:"SHARE.CONFIRMATION.CANCEL"},minWidth:"250px",closeOnNavigation:!0}).beforeClosed().subscribe((function(t){t?e.deleteSharedLink(e.sharedId):e.isFileShared=!0}))},e.prototype.createSharedLinks=function(e){var t=this;this.isDisabled=!0,this.sharedLinksApiService.createSharedLinks(e).subscribe((function(e){e.entry&&(t.sharedId=e.entry.id,t.data.node.entry.properties?t.data.node.entry.properties["qshare:sharedId"]=t.sharedId:t.data.node.entry.properties={"qshare:sharedId":t.sharedId},t.isDisabled=!1,t.isFileShared=!0,t.renditionService.generateRenditionForNode(t.data.node.entry.id).subscribe((function(){})),t.updateForm())}),(function(){t.isDisabled=!1,t.isFileShared=!1}))},e.prototype.deleteSharedLink=function(e){var t=this;this.isDisabled=!0,this.sharedLinksApiService.deleteSharedLink(e).subscribe((function(e){e instanceof Error?(t.isDisabled=!1,t.isFileShared=!0,t.handleError(e)):(t.data.node.entry.properties&&(t.data.node.entry.properties["qshare:sharedId"]=null,t.data.node.entry.properties["qshare:expiryDate"]=null),t.dialogRef.close(!1))}))},e.prototype.handleError=function(e){var t="SHARE.UNSHARE_ERROR",n=0;try{n=JSON.parse(e.message).error.statusCode}catch(e){}403===n&&(t="SHARE.UNSHARE_PERMISSION_ERROR"),this.sharedLinksApiService.error.next({statusCode:n,message:t})},e.prototype.updateForm=function(){var e=this.data.node.entry,t=null;e&&e.properties&&(t=e.properties["qshare:expiryDate"]),this.form.setValue({sharedUrl:""+this.baseShareUrl+this.sharedId,time:t?x(t).local():null}),t?this.time.enable():this.time.disable()},e.prototype.updateNode=function(e){var t=e?"date"===this.type?e.endOf("day").utc().format():e.utc().format():null;return this.nodesApiService.updateNode(this.data.node.entry.id,{properties:{"qshare:expiryDate":t}})},e.prototype.updateEntryExpiryDate=function(e){var t=this.data.node.entry.properties;t&&(t["qshare:expiryDate"]=e?e.local():null)},e}();pi.decorators=[{type:n.Component,args:[{selector:"adf-share-dialog",template:'<div class="adf-share-link__dialog-content">\n    <div data-automation-id="adf-share-dialog-title" class="adf-share-link__title">\n        {{ \'SHARE.DIALOG-TITLE\' | translate }} {{ fileName }}\n    </div>\n\n    <mat-dialog-content>\n        <p class="adf-share-link__info">{{ \'SHARE.DESCRIPTION\' | translate }}</p>\n\n        <div class="adf-share-link--row">\n            <div class="adf-share-link__label">{{ \'SHARE.TITLE\' | translate }}</div>\n\n            <mat-slide-toggle\n                color="primary"\n                data-automation-id="adf-share-toggle"\n                aria-label="{{ \'SHARE.TITLE\' | translate }}"\n                [checked]="isFileShared"\n                [disabled]="!canUpdate || isDisabled"\n                (change)="onSlideShareChange($event)">\n            </mat-slide-toggle>\n        </div>\n\n        <form [formGroup]="form">\n            <mat-form-field class="adf-full-width adf-float-label" floatLabel=\'always\'>\n                <input\n                    #sharedLinkInput\n                    data-automation-id="adf-share-link"\n                    class="adf-share-link__input"\n                    matInput\n                    cdkFocusInitial\n                    placeholder="{{ \'SHARE.PUBLIC-LINK\' | translate }}"\n                    formControlName="sharedUrl"\n                    readonly="readonly">\n                <mat-icon\n                    class="adf-input-action"\n                    matSuffix\n                    [clipboard-notification]="\'SHARE.CLIPBOARD-MESSAGE\' | translate" [adf-clipboard]\n                    [target]="sharedLinkInput">\n                    link\n                </mat-icon>\n            </mat-form-field>\n\n            <div class="adf-share-link--row">\n                <div class="adf-share-link__label">{{ \'SHARE.EXPIRES\' | translate }}</div>\n                <mat-slide-toggle\n                    #slideToggleExpirationDate\n                    [disabled]="!canUpdate"\n                    color="primary"\n                    data-automation-id="adf-expire-toggle"\n                    aria-label="{{ \'SHARE.EXPIRES\' | translate }}"\n                    [checked]="time.value"\n                    (change)="onToggleExpirationDate($event)">\n                </mat-slide-toggle>\n            </div>\n\n            <mat-form-field class="adf-full-width adf-float-label" floatLabel=\'always\'>\n                <mat-datetimepicker-toggle\n                    #matDatetimepickerToggle="matDatetimepickerToggle"\n                    [disabled]="time.disabled"\n                    [for]="datetimePicker"\n                    matSuffix>\n                </mat-datetimepicker-toggle>\n                <mat-datetimepicker\n                    #datetimePicker\n                    (closed)="onDatetimepickerClosed()"\n                    [type]="type"\n                    [timeInterval]="1">\n                </mat-datetimepicker>\n                <input class="adf-share-link__input"\n                    #dateTimePickerInput\n                    matInput\n                    placeholder="{{ \'SHARE.EXPIRATION-LABEL\' | translate }}"\n                    [min]="minDate"\n                    formControlName="time"\n                    [matDatetimepicker]="datetimePicker" />\n            </mat-form-field>\n        </form>\n    </mat-dialog-content>\n\n    <div mat-dialog-actions>\n        <button data-automation-id="adf-share-dialog-close" mat-button color="primary" mat-dialog-close>\n            {{ \'SHARE.CLOSE\' | translate }}\n        </button>\n    </div>\n</div>\n',host:{class:"adf-share-dialog"},encapsulation:n.ViewEncapsulation.None,styles:[".adf-float-label{padding-top:20px}.adf-share-link-dialog .adf-share-link__dialog-content{display:flex;flex-direction:column}.adf-share-link-dialog .adf-share-link__info,.adf-share-link-dialog .adf-share-link__label,.adf-share-link-dialog .adf-share-link__title{color:var(--theme-text-bold-color);font-size:16px;font-stretch:normal;font-style:normal;font-weight:400;letter-spacing:-.4px;line-height:2}.adf-share-link-dialog .adf-share-link__label{flex:1 1 auto}.adf-share-link-dialog .adf-share-link__info{color:var(--theme-text-color);font-size:13px}.adf-share-link-dialog .adf-share-link--row{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap}.adf-share-link-dialog .adf-share-link__input{color:var(--theme-text-bold-color)}.adf-share-link-dialog .adf-input-action{cursor:pointer}.adf-share-link-dialog .adf-full-width{width:100%}.adf-share-link-dialog .mat-form-field-infix{border-top:unset}.adf-share-link-dialog .mat-dialog-actions{justify-content:flex-end}.adf-share-link-dialog .mat-dialog-actions>button{text-transform:uppercase}.adf-share-link-dialog .mat-form-field-flex{align-items:center}"]}]}],pi.ctorParameters=function(){return[{type:C.AppConfigService},{type:C.SharedLinksApiService},{type:c.MatDialogRef},{type:c.MatDialog},{type:C.NodesApiService},{type:C.ContentService},{type:C.RenditionsService},{type:void 0,decorators:[{type:n.Inject,args:[c.MAT_DIALOG_DATA]}]}]},pi.propDecorators={slideToggleExpirationDate:[{type:n.ViewChild,args:["slideToggleExpirationDate",{static:!0}]}],dateTimePickerInput:[{type:n.ViewChild,args:["dateTimePickerInput",{static:!0}]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ui=function(){function e(e,t,n){this.dialog=e,this.zone=t,this.alfrescoApiService=n,this.isFile=!1,this.isShared=!1,this.onDestroy$=new T.Subject}return Object.defineProperty(e.prototype,"nodesApi",{get:function(){var e;return this._nodesApi=null!==(e=this._nodesApi)&&void 0!==e?e:new w.NodesApi(this.alfrescoApiService.getInstance()),this._nodesApi},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.shareNode=function(e){var t=this;if(e&&e.entry&&e.entry.isFile){var n=e.entry.nodeId||e.entry.guid;n?this.getNodeInfo(n).subscribe((function(e){t.openShareLinkDialog(e)})):this.openShareLinkDialog(e)}},e.prototype.getNodeInfo=function(e){return T.from(this.nodesApi.getNode(e,{include:["allowableOperations"]}))},e.prototype.openShareLinkDialog=function(e){this.dialog.open(pi,{width:"600px",panelClass:"adf-share-link-dialog",data:{node:e,baseShareUrl:this.baseShareUrl}})},e.prototype.ngOnChanges=function(){var e=this;this.zone.onStable.pipe(O.takeUntil(this.onDestroy$)).subscribe((function(){e.node&&e.node.entry&&(e.isFile=e.node.entry.isFile,e.isShared=!!e.node.entry.properties&&e.node.entry.properties["qshare:sharedId"])}))},e.prototype.onClick=function(){this.node&&this.shareNode(this.node)},e}();ui.decorators=[{type:n.Directive,args:[{selector:"[adf-share]",exportAs:"adfShare"}]}],ui.ctorParameters=function(){return[{type:c.MatDialog},{type:n.NgZone},{type:C.AlfrescoApiService}]},ui.propDecorators={node:[{type:n.Input,args:["adf-share"]}],baseShareUrl:[{type:n.Input}],onClick:[{type:n.HostListener,args:["click"]}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var hi=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.forChild=function(){return{ngModule:e}},e}();hi.decorators=[{type:n.NgModule,args:[{imports:[C.CoreModule,t.CommonModule,j],declarations:[pi,ui],exports:[pi,ui]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var fi=function(e,t,n){this.expandable=!0,this.name=e.entry.name,this.nodeId=e.entry.id,this.level=t||0,this.expandable=n||!0,this.node=e?new w.NodeEntry(e):void 0},mi=function(){function e(e){this.nodeApi=e}return e.prototype.getTreeNodes=function(e){return this.nodeApi.getNodeChildren(e).pipe(O.map((function(e){return e.list.entries.filter((function(e){return e.entry.isFolder?e:null}))})),O.map((function(e){return e.map((function(e){return new fi(e)}))})))},e}();mi.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new mi(n.ɵɵinject(C.NodesApiService))},token:mi,providedIn:"root"}),mi.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],mi.ctorParameters=function(){return[{type:C.NodesApiService}]};var gi=function(){function e(e,t){var n=this;this.treeControl=e,this.treeViewService=t,this.dataChange=new T.BehaviorSubject([]),this.childrenSubscription=null,this.changeSubscription=null,this.dataChange.subscribe((function(e){return n.treeNodes=e}))}return Object.defineProperty(e.prototype,"data",{get:function(){return this.treeNodes},set:function(e){this.treeControl.dataNodes=e,this.dataChange.next(e)},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){var t=this;return this.changeSubscription=this.treeControl.expansionModel.changed.subscribe((function(e){e.added&&e.added.length>0?t.expandTreeNodes(e):e.removed&&t.reduceTreeNodes(e)})),T.merge(e.viewChange,this.dataChange).pipe(O.map((function(){return t.data})))},e.prototype.disconnect=function(){this.childrenSubscription&&this.childrenSubscription.unsubscribe(),this.changeSubscription&&this.changeSubscription.unsubscribe()},e.prototype.expandTreeNodes=function(e){var t=this;e.added.forEach((function(e){return t.expandNode(e)}))},e.prototype.reduceTreeNodes=function(e){var t=this;e.removed.slice().reverse().forEach((function(e){return t.toggleNode(e)}))},e.prototype.expandNode=function(e){var t=this;this.childrenSubscription=this.treeViewService.getTreeNodes(e.nodeId).subscribe((function(n){var i,o=t.data.indexOf(e);if(!n||o<0)e.expandable=!1;else{var r=n.map((function(t){return t.level=e.level+1,t}));(i=t.data).splice.apply(i,Q([o+1,0],r)),t.dataChange.next(t.data)}}))},e.prototype.toggleNode=function(e){for(var t=this.data.indexOf(e),n=0,i=t+1;i<this.data.length&&this.data[i].level>e.level;i++,n++);this.data.splice(t+1,n),this.dataChange.next(this.data)},e}();gi.decorators=[{type:n.Injectable}],gi.ctorParameters=function(){return[{type:V.FlatTreeControl},{type:mi}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var yi=function(){function e(e){this.treeViewService=e,this.nodeClicked=new n.EventEmitter,this.error=new n.EventEmitter,this.getLevel=function(e){return e.level},this.isExpandable=function(e){return e.expandable},this.hasChild=function(e,t){return t.expandable},this.treeControl=new V.FlatTreeControl(this.getLevel,this.isExpandable),this.dataSource=new gi(this.treeControl,this.treeViewService)}return e.prototype.ngOnChanges=function(e){e.nodeId&&e.nodeId.currentValue&&e.nodeId.currentValue!==e.nodeId.previousValue?this.loadTreeNode():this.dataSource.data=[]},e.prototype.onNodeClicked=function(e){this.nodeClicked.emit(e)},e.prototype.loadTreeNode=function(){var e=this;this.treeViewService.getTreeNodes(this.nodeId).subscribe((function(t){e.dataSource.data=t}),(function(t){return e.error.emit(t)}))},e}();yi.decorators=[{type:n.Component,args:[{selector:"adf-tree-view-list",template:'<mat-tree class="adf-tree-view-main" [dataSource]="dataSource"\n          [treeControl]="treeControl" *ngIf="nodeId; else missingNodeId">\n    <mat-tree-node class="adf-tree-view-node"\n        *matTreeNodeDef="let treeNode" id="{{treeNode.name + \'-tree-node\'}}"\n        matTreeNodePadding [matTreeNodePaddingIndent]="15">\n        {{treeNode.name}}\n    </mat-tree-node>\n    <mat-tree-node class="adf-tree-view-node"\n        id="{{treeNode.name + \'-tree-child-node\'}}" *matTreeNodeDef="let treeNode; when: hasChild"\n        matTreeNodePadding [matTreeNodePaddingIndent]="15">\n        <button matTreeNodeToggle id="{{\'button-\'+treeNode.name}}" (click)="onNodeClicked(treeNode.node)"\n                mat-icon-button [attr.aria-label]="\'ADF-TREE-VIEW.ACCESSIBILITY.ARIA_LABEL\' | translate: {\n                    name:  treeNode.name\n                }">\n            <mat-icon class="adf-tree-view-icon">\n                {{treeControl.isExpanded(treeNode) ? \'folder_open\' : \'folder\'}}\n            </mat-icon>\n        </button>\n        <span class="adf-tree-view-label" matTreeNodeToggle (click)="onNodeClicked(treeNode.node)">{{treeNode.name}}</span>\n    </mat-tree-node>\n</mat-tree>\n<ng-template #missingNodeId>\n    <div id="adf-tree-view-missing-node">\n        {{\'ADF-TREE-VIEW.MISSING-ID\' | translate}}\n    </div>\n</ng-template>\n',styles:[".adf-tree-view-icon{color:#d9e022}.adf-tree-view-node.mat-tree-node{align-items:baseline;font-size:12px;min-height:40px}.adf-tree-view-label{cursor:pointer}"]}]}],yi.ctorParameters=function(){return[{type:mi}]},yi.propDecorators={nodeId:[{type:n.Input}],nodeClicked:[{type:n.Output}],error:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var vi=function(){};vi.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,j,E.TranslateModule],declarations:[yi],exports:[yi]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var bi=function(){function e(e){this.alfrescoApiService=e}return Object.defineProperty(e.prototype,"groupsApi",{get:function(){var e;return this._groupsApi=null!==(e=this._groupsApi)&&void 0!==e?e:new w.GroupsApi(this.alfrescoApiService.getInstance()),this._groupsApi},enumerable:!1,configurable:!0}),e.prototype.listAllGroupMembershipsForPerson=function(e,t,n){return void 0===n&&(n=[]),H(this,void 0,void 0,(function(){var i,o;return q(this,(function(r){switch(r.label){case 0:return[4,this.groupsApi.listGroupMembershipsForPerson(e,t)];case 1:return i=r.sent(),n=Q(n,i.list.entries),i.list.pagination.hasMoreItems?(o=i.list.pagination.skipCount+i.list.pagination.count,[2,this.listAllGroupMembershipsForPerson(e,{maxItems:t.maxItems,skipCount:o},n)]):[2,n]}}))}))},e}();bi.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new bi(n.ɵɵinject(C.AlfrescoApiService))},token:bi,providedIn:"root"}),bi.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],bi.ctorParameters=function(){return[{type:C.AlfrescoApiService}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Si=function(){function e(e,t){this.aspectListService=e,this.nodeApiService=t,this.nodeId="",this.valueChanged=new n.EventEmitter,this.propertyColumns=["name","title","dataType"],this.aspects$=null,this.nodeAspects=[],this.nodeAspectStatus=[],this.hasEqualAspect=!0,this.onDestroy$=new T.Subject}return e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.ngOnInit=function(){var e=this;if(this.nodeId){var t=this.nodeApiService.getNode(this.nodeId),n=this.aspectListService.getCustomAspects().pipe(O.map((function(e){return e.flatMap((function(e){return e.entry.id}))})));this.aspects$=T.zip(t,n).pipe(O.tap((function(t){var n=z(t,2),i=n[0],o=n[1];e.nodeAspects=i.aspectNames.filter((function(t){return e.aspectListService.getVisibleAspects().includes(t)||o.includes(t)})),e.nodeAspectStatus=Q(e.nodeAspects),e.valueChanged.emit(e.nodeAspects)})),O.concatMap((function(){return e.aspectListService.getAspects()})),O.takeUntil(this.onDestroy$))}else this.aspects$=this.aspectListService.getAspects().pipe(O.takeUntil(this.onDestroy$))},e.prototype.onCheckBoxClick=function(e){e.stopImmediatePropagation()},e.prototype.onChange=function(e,t){e.checked?this.nodeAspects.push(t):this.nodeAspects.splice(this.nodeAspects.indexOf(t),1),this.updateEqualityOfAspectList(),this.valueChanged.emit(this.nodeAspects)},e.prototype.reset=function(){var e;this.nodeAspectStatus&&this.nodeAspectStatus.length>0?((e=this.nodeAspects).splice.apply(e,Q([0,this.nodeAspects.length],this.nodeAspectStatus)),this.hasEqualAspect=!0,this.valueChanged.emit(this.nodeAspects)):this.clear()},e.prototype.clear=function(){this.nodeAspects=[],this.updateEqualityOfAspectList(),this.valueChanged.emit(this.nodeAspects)},e.prototype.getId=function(e){var t,n,i;return(null===(t=null==e?void 0:e.entry)||void 0===t?void 0:t.title)?null===(n=null==e?void 0:e.entry)||void 0===n?void 0:n.title:null===(i=null==e?void 0:e.entry)||void 0===i?void 0:i.id.replace(":","-")},e.prototype.getTitle=function(e){var t,n,i;return(null===(t=null==e?void 0:e.entry)||void 0===t?void 0:t.title)?null===(n=null==e?void 0:e.entry)||void 0===n?void 0:n.title:null===(i=null==e?void 0:e.entry)||void 0===i?void 0:i.id},e.prototype.updateEqualityOfAspectList=function(){var e=this;this.nodeAspectStatus.length!==this.nodeAspects.length?this.hasEqualAspect=!1:this.hasEqualAspect=this.nodeAspects.every((function(t){return e.nodeAspectStatus.includes(t)}))},e}();Si.decorators=[{type:n.Component,args:[{selector:"adf-aspect-list",template:'<div id="aspect-list-container" class="adf-aspect-list-container" *ngIf="aspects$ | async as aspects; else loading">\n    <mat-accordion class="adf-accordion-aspect-list">\n        <mat-expansion-panel *ngFor="let aspect of aspects; let colIndex = index" [id]="\'aspect-list-\'+getId(aspect)">\n            <mat-expansion-panel-header [id]="\'aspect-list-\'+(getId(aspect))+\'header\'">\n                <mat-panel-title>\n                    <mat-checkbox class="adf-aspect-list-check-button" [id]="\'aspect-list-\'+colIndex+\'-check\'"\n                                  [checked]="nodeAspects?.includes(aspect?.entry?.id)"\n                                  (click)="onCheckBoxClick($event)"\n                                  (change)="onChange($event, aspect?.entry?.id)">\n                    </mat-checkbox>\n                    <p class="adf-aspect-list-element-title">{{getTitle(aspect)}}</p>\n                </mat-panel-title>\n                <mat-panel-description [id]="\'aspect-list-\'+colIndex+\'-title\'"\n                                        [matTooltip]="getTitle(aspect)">\n                    {{getTitle(aspect)}}\n                </mat-panel-description>\n            </mat-expansion-panel-header>\n            <p class="adf-property-paragraph" [id]="\'aspect-list-\'+colIndex+\'-description\'"> {{aspect?.entry?.description}}</p>\n\n            <table mat-table [dataSource]="aspect?.entry?.properties" *ngIf="aspect?.entry?.properties?.length > 0" class="adf-aspect-property-table" [id]="\'aspect-list-\'+colIndex+\'-properties-table\'">\n                <ng-container matColumnDef="name">\n                  <th mat-header-cell *matHeaderCellDef> {{\'ADF-ASPECT-LIST.PROPERTY_NAME\' | translate}} </th>\n                  <td mat-cell *matCellDef="let property"> {{property.id}} </td>\n                </ng-container>\n                <ng-container matColumnDef="title">\n                  <th mat-header-cell *matHeaderCellDef> {{\'ADF-ASPECT-LIST.DESCRIPTION\' | translate}} </th>\n                  <td mat-cell *matCellDef="let property"> {{property.title}} </td>\n                </ng-container>\n                <ng-container matColumnDef="dataType">\n                  <th mat-header-cell *matHeaderCellDef> {{\'ADF-ASPECT-LIST.DATA_TYPE\' | translate}} </th>\n                  <td mat-cell *matCellDef="let property"> {{property.dataType}} </td>\n                </ng-container>\n                <tr mat-header-row *matHeaderRowDef="propertyColumns"></tr>\n                <tr mat-row *matRowDef="let row; columns: propertyColumns;"></tr>\n              </table>\n        </mat-expansion-panel>\n    </mat-accordion>\n</div>\n\n<ng-template #loading>\n    <div class="adf-aspect-list-spinner">\n       <mat-spinner id="adf-aspect-spinner"></mat-spinner>\n    </div>\n</ng-template>\n',encapsulation:n.ViewEncapsulation.None,styles:[".adf-aspect-list-spinner{align-items:center;display:flex;justify-content:center;min-height:400px}.adf-aspect-list-container{border:1px solid var(--theme-border-color);height:400px;overflow:auto;padding-top:3px}.adf-aspect-list-container .adf-aspect-list-check-button{align-items:center;display:flex;margin-right:5px}.adf-aspect-list-container .adf-aspect-list-element-title{align-items:center;display:flex}.adf-aspect-list-container .adf-accordion-aspect-list .mat-expansion-panel-spacing{margin:0}.adf-aspect-list-container .adf-accordion-aspect-list .mat-expansion-panel-header{font-size:smaller}.adf-aspect-list-container .adf-accordion-aspect-list .mat-expansion-panel-header-title{flex:1 1 0}.adf-aspect-list-container .adf-accordion-aspect-list .mat-expansion-panel-header-description{align-items:center;flex:1 1 0;justify-content:flex-start;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.adf-aspect-property-table{width:100%}.adf-aspect-property-table .mat-column-name{width:15%}.adf-aspect-property-table .mat-column-description{width:65%}.adf-aspect-property-table .mat-column-type{padding-left:10px;width:20%}"]}]}],Si.ctorParameters=function(){return[{type:$n},{type:C.NodesApiService}]},Si.propDecorators={nodeId:[{type:n.Input}],valueChanged:[{type:n.Output}]};
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ii=function(){};Ii.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,U.MatTableModule,d.MatExpansionModule,r.MatCheckboxModule,C.PipeModule,E.TranslateModule,c.MatDialogModule,i.MatButtonModule,B.MatTooltipModule,g.MatProgressSpinnerModule],exports:[Si,jn],declarations:[Si,jn]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ai=function(){};Ai.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,U.MatTableModule,d.MatExpansionModule,r.MatCheckboxModule,E.TranslateModule,c.MatDialogModule,i.MatButtonModule],exports:[_n],declarations:[_n]}]}];
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ei=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:C.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"adf-content-services",source:"assets/adf-content-services"}}]}},e.forChild=function(){return{ngModule:e}},e}();Ei.decorators=[{type:n.NgModule,args:[{imports:[C.CoreModule,ce,fe,t.CommonModule,ge,D.FormsModule,D.ReactiveFormsModule,hn,jt,Gt,ct,j,qt,Qt,an,hi,qn,gn,re,di,tn,vi,Ai,Ii],providers:[{provide:C.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"adf-content-services",source:"assets/adf-content-services"}}],exports:[ce,fe,ge,Gt,ct,jt,qt,Qt,an,hi,qn,hn,gn,re,di,tn,vi,Ii,Ai]}]}],
/*!
     * @license
     * Copyright 2019 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
e.AddPermissionComponent=ii,e.AddPermissionDialogComponent=Wn,e.AddPermissionPanelComponent=ni,e.AspectListComponent=Si,e.AspectListDialogComponent=jn,e.AspectListModule=Ii,e.AspectListService=$n,e.AspectOrientedConfigService=Ln,e.BasicPropertiesService=yn,e.BreadcrumbComponent=Yt,e.BreadcrumbModule=Qt,e.ConfirmDialogComponent=Wt,e.ContentActionComponent=Re,e.ContentActionListComponent=Le,e.ContentActionModel=Ie,e.ContentDirectiveModule=re,e.ContentInfo=Qe,e.ContentMetadataCardComponent=Hn,e.ContentMetadataComponent=Bn,e.ContentMetadataConfigFactory=Pn,e.ContentMetadataModule=qn,e.ContentMetadataService=Un,e.ContentModule=Ei,e.ContentNodeDialogService=te,e.ContentNodeSelectorComponent=J,e.ContentNodeSelectorModule=an,e.ContentNodeSelectorPanelComponent=rn,e.ContentNodeSelectorPanelService=Nt,e.ContentNodeShareModule=hi,e.ContentTypeDialogComponent=_n,e.ContentTypeModule=Ai,e.ContentTypePropertiesService=Vn,e.ContentTypeService=kn,e.ContentVersionService=Xt,e.CustomResourcesService=X,e.DialogModule=hn,e.DocumentActionModel=Ae,e.DocumentActionsService=De,e.DocumentListComponent=we,e.DocumentListModule=Gt,e.DocumentListService=Z,e.DropdownBreadcrumbComponent=zt,e.DropdownSitesComponent=Ht,e.EmptySearchResultComponent=dt,e.FileDraggableDirective=st,e.FileUploadErrorPipe=at,e.FileUploadingDialogComponent=Ze,e.FileUploadingListComponent=et,e.FileUploadingListRowComponent=Je,e.FilterHeaderComponent=Be,e.FolderActionModel=Ee,e.FolderActionsService=Ne,e.FolderCreateDirective=fn,e.FolderDialogComponent=pn,e.FolderDirectiveModule=gn,e.FolderEditDirective=mn,e.GroupService=bi,e.IndifferentConfigService=Rn,e.InheritPermissionDirective=Jn,e.LayoutOrientedConfigService=Fn,e.LibraryDialogComponent=un,e.LibraryNameColumnComponent=Fe,e.LibraryRoleColumnComponent=Pe,e.LibraryStatusColumnComponent=Me,e.LikeComponent=le,e.MemberModel=Qn,e.NameColumnComponent=ke,e.NameLocationCellComponent=nn,e.NodeActionsService=xe,e.NodeAspectService=Gn,e.NodeCounterComponent=oe,e.NodeCounterDirective=ie,e.NodeEntityEvent=Ce,e.NodeEntryEvent=Te,e.NodeLockDialogComponent=ee,e.NodeLockDirective=ne,e.NodeMinimal=Ye,e.NodeMinimalEntry=He,e.NodePaging=$e,e.NodePagingList=Ge,e.NodePathColumnComponent=si,e.NodePermissionDialogService=Xn,e.NodePermissionService=zn,e.NodeSharedDirective=ui,e.Pagination=qe,e.PathElementEntity=Xe,e.PathInfoEntity=We,e.PermissionContainerComponent=li,e.PermissionDisplayModel=Yn,e.PermissionListComponent=Zn,e.PermissionManagerModule=di,e.PermissionModel=Oe,e.PermissionStyleModel=Ke,e.PopOverDirective=ci,e.PropertyDescriptorsService=Mn,e.PropertyGroupTranslatorService=On,e.RatingComponent=se,e.RatingService=ae,e.ResetSearchDirective=Bt,e.SEARCH_QUERY_SERVICE_TOKEN=_e,e.SEARCH_QUERY_TOKEN=ei,e.SearchCheckListComponent=bt,e.SearchChipListComponent=Dt,e.SearchComponent=ut,e.SearchControlComponent=pt,e.SearchDateRangeComponent=It,e.SearchDatetimeRangeComponent=Et,e.SearchFacetFieldComponent=_t,e.SearchFacetFiltersService=Ot,e.SearchFilterChipsComponent=Mt,e.SearchFilterComponent=xt,e.SearchFilterContainerComponent=Ft,e.SearchFilterMenuCardComponent=kt,e.SearchFilterService=Ct,e.SearchFormComponent=Pt,e.SearchHeaderQueryBuilderService=Ue,e.SearchModule=jt,e.SearchNumberRangeComponent=vt,e.SearchPanelComponent=Lt,e.SearchPermissionConfigurationService=ti,e.SearchQueryBuilderService=wt,e.SearchRadioComponent=mt,e.SearchSliderComponent=gt,e.SearchSortingPickerComponent=Rt,e.SearchTextComponent=ht,e.SearchWidgetContainerComponent=Tt,e.ShareDataRow=ye,e.ShareDataTableAdapter=be,e.ShareDialogComponent=pi,e.SitesDropdownModule=qt,e.SocialModule=ce,e.TagActionsComponent=pe,e.TagListComponent=ue,e.TagModule=fe,e.TagNodeListComponent=he,e.TagService=de,e.ToggleIconDirective=lt,e.TrashcanNameColumnComponent=je,e.TreeBaseNode=fi,e.TreeViewComponent=yi,e.TreeViewDataSource=gi,e.TreeViewModule=vi,e.TreeViewService=mi,e.UploadBase=nt,e.UploadButtonComponent=it,e.UploadDragAreaComponent=rt,e.UploadFilesEvent=tt,e.UploadModule=ct,e.UploadVersionButtonComponent=ot,e.UserIconColumnComponent=oi,e.UserInfo=ze,e.UserNameColumnComponent=ri,e.UserRoleColumnComponent=ai,e.VersionComparisonComponent=en,e.VersionListComponent=Kt,e.VersionManagerComponent=Zt,e.VersionManagerModule=tn,e.VersionUploadComponent=Jt,e.WebScriptModule=ge,e.WebscriptComponent=me,e.defaultValidation=on,e.forbidEndingDot=cn,e.forbidOnlySpaces=dn,e.forbidSpecialCharacters=ln,e.ɵ0=St,e.ɵa=j,e.ɵb=Ve,e.ɵc=Vt,e.ɵd=Ut,e.ɵe=Kn,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=adf-content-services.umd.min.js.map