/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';
import { PermissionListService } from './permission-list.service';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './permission-list.service';
import * as ɵngcc2 from '@angular/material/card';
import * as ɵngcc3 from '@angular/common';
import * as ɵngcc4 from '@angular/material/progress-spinner';
import * as ɵngcc5 from '@angular/material/icon';
import * as ɵngcc6 from '@angular/material/slide-toggle';
import * as ɵngcc7 from '@angular/material/button';
import * as ɵngcc8 from '@angular/material/tooltip';
import * as ɵngcc9 from '../permission-container/permission-container.component';
import * as ɵngcc10 from '../pop-over.directive';
import * as ɵngcc11 from '@ngx-translate/core';

function PermissionListComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 3);
    ɵngcc0.ɵɵelement(1, "mat-progress-spinner", 4);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("color", "primary")("mode", "indeterminate");
} }
function PermissionListComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "div", 5);
    ɵngcc0.ɵɵelementStart(2, "mat-icon", 6);
    ɵngcc0.ɵɵtext(3, "error");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(4, "p", 7);
    ɵngcc0.ɵɵtext(5);
    ɵngcc0.ɵɵpipe(6, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(5);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 1, "PERMISSION_MANAGER.ERROR.NOT-FOUND"));
} }
function PermissionListComponent_ng_container_6_button_13_mat_icon_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-icon");
    ɵngcc0.ɵɵtext(1, " keyboard_arrow_up ");
    ɵngcc0.ɵɵelementEnd();
} }
function PermissionListComponent_ng_container_6_button_13_mat_icon_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-icon");
    ɵngcc0.ɵɵtext(1, " keyboard_arrow_down ");
    ɵngcc0.ɵɵelementEnd();
} }
function PermissionListComponent_ng_container_6_button_13_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "button", 23, 24);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵpipe(3, "translate");
    ɵngcc0.ɵɵtemplate(4, PermissionListComponent_ng_container_6_button_13_mat_icon_4_Template, 2, 0, "mat-icon", 2);
    ɵngcc0.ɵɵtemplate(5, PermissionListComponent_ng_container_6_button_13_mat_icon_5_Template, 2, 0, "mat-icon", 2);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const _r8 = ɵngcc0.ɵɵreference(1);
    ɵngcc0.ɵɵnextContext();
    const _r6 = ɵngcc0.ɵɵreference(15);
    const _r4 = ɵngcc0.ɵɵreference(2);
    ɵngcc0.ɵɵproperty("adf-pop-over", _r6)("target", _r4);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(3, 5, _r8.open ? "PERMISSION_MANAGER.LABELS.HIDE" : "PERMISSION_MANAGER.LABELS.SHOW"), " ");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", _r8.open);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !_r8.open);
} }
function PermissionListComponent_ng_container_6_ng_template_14_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 25);
    ɵngcc0.ɵɵelement(1, "adf-permission-container", 26);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const model_r3 = ɵngcc0.ɵɵnextContext().ngIf;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("isReadOnly", true)("node", model_r3.node)("permissions", model_r3.inheritedPermissions)("showLocation", true)("selectionMode", "none")("roles", model_r3.roles);
} }
const _c0 = function (a0) { return { count: a0 }; };
function PermissionListComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    const _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "div", 8, 9);
    ɵngcc0.ɵɵelementStart(3, "div", 10);
    ɵngcc0.ɵɵelementStart(4, "span", 11);
    ɵngcc0.ɵɵelementStart(5, "h3", 12);
    ɵngcc0.ɵɵtext(6);
    ɵngcc0.ɵɵpipe(7, "translate");
    ɵngcc0.ɵɵpipe(8, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(9, "mat-slide-toggle", 13);
    ɵngcc0.ɵɵlistener("change", function PermissionListComponent_ng_container_6_Template_mat_slide_toggle_change_9_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.permissionList.toggleInherited($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(10, "span", 14);
    ɵngcc0.ɵɵtext(11);
    ɵngcc0.ɵɵpipe(12, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(13, PermissionListComponent_ng_container_6_button_13_Template, 6, 7, "button", 15);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(14, PermissionListComponent_ng_container_6_ng_template_14_Template, 2, 6, "ng-template", null, 16, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementStart(16, "mat-card-content", 17);
    ɵngcc0.ɵɵelementStart(17, "section", 18);
    ɵngcc0.ɵɵelementStart(18, "h3");
    ɵngcc0.ɵɵtext(19);
    ɵngcc0.ɵɵpipe(20, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(21, "div", 19);
    ɵngcc0.ɵɵelementStart(22, "button", 20);
    ɵngcc0.ɵɵlistener("click", function PermissionListComponent_ng_container_6_Template_button_click_22_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.openAddPermissionDialog(); });
    ɵngcc0.ɵɵpipe(23, "translate");
    ɵngcc0.ɵɵelementStart(24, "mat-icon");
    ɵngcc0.ɵɵtext(25, "person_add_outline");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(26, "button", 21);
    ɵngcc0.ɵɵlistener("click", function PermissionListComponent_ng_container_6_Template_button_click_26_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.deleteSelection(); });
    ɵngcc0.ɵɵpipe(27, "translate");
    ɵngcc0.ɵɵelementStart(28, "mat-icon");
    ɵngcc0.ɵɵtext(29, "delete_outline");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(30, "adf-permission-container", 22);
    ɵngcc0.ɵɵlistener("update", function PermissionListComponent_ng_container_6_Template_adf_permission_container_update_30_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.updatePermission($event); })("delete", function PermissionListComponent_ng_container_6_Template_adf_permission_container_delete_30_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.deletePermission($event); })("updateAll", function PermissionListComponent_ng_container_6_Template_adf_permission_container_updateAll_30_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r18 = ɵngcc0.ɵɵnextContext(); return ctx_r18.updateAllPermission($event); })("row-select", function PermissionListComponent_ng_container_6_Template_adf_permission_container_row_select_30_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.onSelect($event.detail.selection); })("row-unselect", function PermissionListComponent_ng_container_6_Template_adf_permission_container_row_unselect_30_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.onSelect($event.detail.selection); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const model_r3 = ctx.ngIf;
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(6);
    ɵngcc0.ɵɵtextInterpolate2(" ", ɵngcc0.ɵɵpipeBind1(7, 12, "PERMISSION_MANAGER.LABELS.INHERITED-PERMISSIONS"), " ", ɵngcc0.ɵɵpipeBind1(8, 14, model_r3.node.permissions.isInheritanceEnabled ? "PERMISSION_MANAGER.LABELS.ON" : "PERMISSION_MANAGER.LABELS.OFF"), " ");
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("checked", model_r3.node.permissions.isInheritanceEnabled);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind2(12, 16, "PERMISSION_MANAGER.LABELS.INHERITED-SUBTITLE", ɵngcc0.ɵɵpureFunction1(25, _c0, model_r3.inheritedPermissions.length)), " ");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", model_r3.node.permissions.isInheritanceEnabled);
    ɵngcc0.ɵɵadvance(6);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(20, 19, "PERMISSION_MANAGER.LABELS.DIRECT-PERMISSIONS"));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("matTooltip", ɵngcc0.ɵɵpipeBind1(23, 21, "PERMISSION_MANAGER.ACTION.ADD-PERMISSION"));
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("matTooltip", ɵngcc0.ɵɵpipeBind1(27, 23, "PERMISSION_MANAGER.ACTION.DELETE"))("disabled", !(ctx_r2.selectedPermissions == null ? null : ctx_r2.selectedPermissions.length));
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("node", model_r3.node)("permissions", model_r3.localPermissions)("roles", model_r3.roles);
} }
export class PermissionListComponent {
    constructor(permissionList) {
        this.permissionList = permissionList;
        this.selectedPermissions = [];
        this.error = this.permissionList.errored;
        this.update = this.permissionList.updated;
    }
    ngOnInit() {
        this.permissionList.fetchPermission(this.nodeId);
    }
    openAddPermissionDialog() {
        this.permissionList.updateNodePermissionByDialog();
    }
    onSelect(selections) {
        this.selectedPermissions = selections.map((selection) => selection['obj']).filter((permission) => !permission.readonly);
    }
    deleteSelection() {
        this.permissionList.deletePermissions(this.selectedPermissions);
        this.selectedPermissions = [];
    }
    updatePermission({ role, permission }) {
        this.permissionList.updateRole(role, permission);
    }
    deletePermission(permission) {
        this.selectedPermissions = [];
        this.permissionList.deletePermission(permission);
    }
    updateAllPermission(role) {
        this.permissionList.bulkRoleUpdate(role);
        this.selectedPermissions = [];
    }
}
PermissionListComponent.ɵfac = function PermissionListComponent_Factory(t) { return new (t || PermissionListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.PermissionListService)); };
PermissionListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PermissionListComponent, selectors: [["adf-permission-list"]], inputs: { nodeId: "nodeId" }, outputs: { error: "error", update: "update" }, decls: 8, vars: 11, consts: [["id", "adf-permission-manager-card", 1, "adf-permission-card"], ["class", "adf-permission-loader", 4, "ngIf"], [4, "ngIf"], [1, "adf-permission-loader"], [3, "color", "mode"], ["id", "adf-permission-manager-error", 1, "adf-no-permission__template"], ["color", "warn"], [1, "adf-no-permission__template--text"], [1, "adf-permission-container"], ["target", ""], [1, "adf-permission-header"], [1, "adf-inherit-container"], [1, "adf-inherit-container-header"], ["data-automation-id", "adf-inherit-toggle-button", 1, "adf-inherit-toggle", 3, "checked", "change"], ["title", "total", 1, "adf-inherit-subtitle"], ["mat-button", "", "data-automation-id", "permission-info-button", 3, "adf-pop-over", "target", 4, "ngIf"], ["inheritedPermission", ""], [1, "adf-local-permission-container"], [1, "adf-permission-content-header"], [1, "adf-toolbar--spacer"], ["mat-button", "", "data-automation-id", "adf-add-permission-button", 3, "matTooltip", "click"], ["mat-button", "", "data-automation-id", "adf-delete-selected-permission", 3, "matTooltip", "disabled", "click"], ["data-automation-id", "adf-locally-set-permission", 1, "adf-permission-list", 3, "node", "permissions", "roles", "update", "delete", "updateAll", "row-select", "row-unselect"], ["mat-button", "", "data-automation-id", "permission-info-button", 3, "adf-pop-over", "target"], ["popOver", "adfPopOver"], [1, "adf-pop-over-card"], ["data-automation-id", "adf-inherited-permission", 3, "isReadOnly", "node", "permissions", "showLocation", "selectionMode", "roles"]], template: function PermissionListComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "mat-card", 0);
        ɵngcc0.ɵɵtemplate(1, PermissionListComponent_div_1_Template, 2, 2, "div", 1);
        ɵngcc0.ɵɵpipe(2, "async");
        ɵngcc0.ɵɵpipe(3, "async");
        ɵngcc0.ɵɵtemplate(4, PermissionListComponent_ng_container_4_Template, 7, 3, "ng-container", 2);
        ɵngcc0.ɵɵpipe(5, "async");
        ɵngcc0.ɵɵtemplate(6, PermissionListComponent_ng_container_6_Template, 31, 27, "ng-container", 2);
        ɵngcc0.ɵɵpipe(7, "async");
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(2, 3, !ɵngcc0.ɵɵpipeBind1(3, 5, ctx.permissionList.data$) && ctx.permissionList.loading$));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(5, 7, ctx.permissionList.error$));
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(7, 9, ctx.permissionList.data$));
    } }, directives: [ɵngcc2.MatCard, ɵngcc3.NgIf, ɵngcc4.MatProgressSpinner, ɵngcc5.MatIcon, ɵngcc6.MatSlideToggle, ɵngcc2.MatCardContent, ɵngcc7.MatButton, ɵngcc8.MatTooltip, ɵngcc9.PermissionContainerComponent, ɵngcc10.PopOverDirective], pipes: [ɵngcc3.AsyncPipe, ɵngcc11.TranslatePipe], styles: [".adf-permission-card{box-sizing:border-box;display:flex!important;flex-direction:column;height:100%;overflow:hidden}.adf-permission-loader{margin-left:45%;overflow:hidden}.adf-permission-container{border:1px solid var(--theme-border-color);justify-content:space-between;padding:10px 15px}.adf-inherit-container,.adf-permission-container{align-items:center;display:flex;flex-direction:row}.adf-inherit-container-header{margin-bottom:10px;margin-top:10px}.adf-inherit-toggle{padding-left:30px}.adf-inherit-subtitle{padding-bottom:5px}.adf-permission-content-header{align-items:center;display:flex;flex-direction:row;padding:5px 15px}.adf-permission-role-column-header{height:40px;position:relative!important}.adf-permission-role-column-header .mat-form-field-infix{border:none}.adf-permission-header{display:flex;flex:1;flex-direction:column;height:100%;min-height:0;overflow:hidden}.adf-permission-list{display:flex;height:calc(100% - 63px)}.adf-local-permission-container{flex:1 1 auto;overflow:hidden}[aria-sort=Ascending] adf-user-role-column,[aria-sort=Descending] adf-user-role-column{padding-left:10px;padding-right:10px}.adf-permission-pop-over{padding-right:15px;width:100%}.adf-permission-pop-over .adf-pop-over-card{box-shadow:0 8px 9px -5px var(--theme-fg-divider),0 15px 22px 2px var(--theme-fg-divider);overflow:hidden;width:100%}"], encapsulation: 2 });
PermissionListComponent.ctorParameters = () => [
    { type: PermissionListService }
];
PermissionListComponent.propDecorators = {
    nodeId: [{ type: Input }],
    update: [{ type: Output }],
    error: [{ type: Output }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PermissionListComponent, [{
        type: Component,
        args: [{
                selector: 'adf-permission-list',
                template: "<mat-card class=\"adf-permission-card\" id=\"adf-permission-manager-card\">\n    <div *ngIf=\"!(permissionList.data$ | async) && permissionList.loading$ | async\" class=\"adf-permission-loader\">\n        <mat-progress-spinner [color]=\"'primary'\"\n                              [mode]=\"'indeterminate'\">\n        </mat-progress-spinner>\n    </div>\n\n    <ng-container *ngIf=\"permissionList.error$ | async\">\n        <div class=\"adf-no-permission__template\" id=\"adf-permission-manager-error\">\n            <mat-icon color=\"warn\">error</mat-icon>\n            <p class=\"adf-no-permission__template--text\">{{ 'PERMISSION_MANAGER.ERROR.NOT-FOUND'| translate }}</p>\n        </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"permissionList.data$ | async as model\">\n        <div class=\"adf-permission-container\" #target>\n\n            <div class=\"adf-permission-header\">\n                <span class=\"adf-inherit-container\">\n                    <h3 class=\"adf-inherit-container-header\">\n                        {{'PERMISSION_MANAGER.LABELS.INHERITED-PERMISSIONS' | translate }}\n\n                        {{ (model.node.permissions.isInheritanceEnabled ? \"PERMISSION_MANAGER.LABELS.ON\" : \"PERMISSION_MANAGER.LABELS.OFF\") | translate }}\n                    </h3>\n\n                    <mat-slide-toggle\n                        class=\"adf-inherit-toggle\"\n                        data-automation-id=\"adf-inherit-toggle-button\"\n                        [checked]=\"model.node.permissions.isInheritanceEnabled\"\n                        (change)=\"permissionList.toggleInherited($event)\">\n                    </mat-slide-toggle>\n                </span>\n\n                <span class=\"adf-inherit-subtitle\" title=\"total\">\n                    {{'PERMISSION_MANAGER.LABELS.INHERITED-SUBTITLE' | translate: { count: model.inheritedPermissions.length } }}\n                </span>\n            </div>\n\n            <button\n                mat-button\n                data-automation-id=\"permission-info-button\"\n                [adf-pop-over]=\"inheritedPermission\"\n                [target]=\"target\"\n                #popOver=\"adfPopOver\"\n                *ngIf=\"model.node.permissions.isInheritanceEnabled\">\n                {{ (popOver.open ? 'PERMISSION_MANAGER.LABELS.HIDE' : 'PERMISSION_MANAGER.LABELS.SHOW') | translate }}\n                <mat-icon *ngIf=\"popOver.open\"> keyboard_arrow_up </mat-icon>\n                <mat-icon *ngIf=\"!popOver.open\"> keyboard_arrow_down </mat-icon>\n            </button>\n        </div>\n\n        <ng-template #inheritedPermission>\n            <div class=\"adf-pop-over-card\">\n                <adf-permission-container\n                    data-automation-id=\"adf-inherited-permission\"\n                    [isReadOnly]=\"true\"\n                    [node]=\"model.node\"\n                    [permissions]=\"model.inheritedPermissions\"\n                    [showLocation]=\"true\"\n                    [selectionMode]=\"'none'\"\n                    [roles]=\"model.roles\">\n                </adf-permission-container>\n            </div>\n        </ng-template>\n\n        <mat-card-content class=\"adf-local-permission-container\">\n            <section class=\"adf-permission-content-header\">\n                <h3>{{'PERMISSION_MANAGER.LABELS.DIRECT-PERMISSIONS' | translate }}</h3>\n\n                <div class=\"adf-toolbar--spacer\"></div>\n\n                <button\n                    mat-button\n                    [matTooltip]=\"'PERMISSION_MANAGER.ACTION.ADD-PERMISSION' | translate\"\n                    (click)=\"openAddPermissionDialog()\"\n                    data-automation-id=\"adf-add-permission-button\">\n                    <mat-icon>person_add_outline</mat-icon>\n                </button>\n\n                <button\n                    mat-button\n                    [matTooltip]=\"'PERMISSION_MANAGER.ACTION.DELETE' | translate\"\n                    [disabled]=\"!selectedPermissions?.length\"\n                    (click)=\"deleteSelection()\"\n                    data-automation-id=\"adf-delete-selected-permission\">\n                    <mat-icon>delete_outline</mat-icon>\n                </button>\n            </section>\n\n            <adf-permission-container\n                class=\"adf-permission-list\"\n                data-automation-id=\"adf-locally-set-permission\"\n                [node]=\"model.node\"\n                [permissions]=\"model.localPermissions\"\n                (update)=\"updatePermission($event)\"\n                (delete)=\"deletePermission($event)\"\n                (updateAll)=\"updateAllPermission($event)\"\n                (row-select)=\"onSelect($any($event).detail.selection)\"\n                (row-unselect)=\"onSelect($any($event).detail.selection)\"\n                [roles]=\"model.roles\">\n            </adf-permission-container>\n\n        </mat-card-content>\n    </ng-container>\n</mat-card>\n",
                encapsulation: ViewEncapsulation.None,
                styles: [".adf-permission-card{box-sizing:border-box;display:flex!important;flex-direction:column;height:100%;overflow:hidden}.adf-permission-loader{margin-left:45%;overflow:hidden}.adf-permission-container{border:1px solid var(--theme-border-color);justify-content:space-between;padding:10px 15px}.adf-inherit-container,.adf-permission-container{align-items:center;display:flex;flex-direction:row}.adf-inherit-container-header{margin-bottom:10px;margin-top:10px}.adf-inherit-toggle{padding-left:30px}.adf-inherit-subtitle{padding-bottom:5px}.adf-permission-content-header{align-items:center;display:flex;flex-direction:row;padding:5px 15px}.adf-permission-role-column-header{height:40px;position:relative!important}.adf-permission-role-column-header .mat-form-field-infix{border:none}.adf-permission-header{display:flex;flex:1;flex-direction:column;height:100%;min-height:0;overflow:hidden}.adf-permission-list{display:flex;height:calc(100% - 63px)}.adf-local-permission-container{flex:1 1 auto;overflow:hidden}[aria-sort=Ascending] adf-user-role-column,[aria-sort=Descending] adf-user-role-column{padding-left:10px;padding-right:10px}.adf-permission-pop-over{padding-right:15px;width:100%}.adf-permission-pop-over .adf-pop-over-card{box-shadow:0 8px 9px -5px var(--theme-fg-divider),0 15px 22px 2px var(--theme-fg-divider);overflow:hidden;width:100%}"]
            }]
    }], function () { return [{ type: ɵngcc1.PermissionListService }]; }, { error: [{
            type: Output
        }], update: [{
            type: Output
        }], nodeId: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVybWlzc2lvbi1saXN0LmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vaG9tZS90cmF2aXMvYnVpbGQvQWxmcmVzY28vYWxmcmVzY28tbmcyLWNvbXBvbmVudHMvbGliL2NvbnRlbnQtc2VydmljZXMvc3JjL2xpYi9wZXJtaXNzaW9uLW1hbmFnZXIvY29tcG9uZW50cy9wZXJtaXNzaW9uLWxpc3QvcGVybWlzc2lvbi1saXN0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBSUgsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUxRixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFsRSxNQUFNLE9BQU8sdUJBQXVCO0FBQ3BDLElBY0ksWUFBNEIsY0FBcUM7QUFDckUsUUFEZ0MsbUJBQWMsR0FBZCxjQUFjLENBQXVCO0FBQUMsUUFGbEUsd0JBQW1CLEdBQTZCLEVBQUUsQ0FBQztBQUN2RCxRQUVRLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUM7QUFDakQsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDO0FBQ2xELElBQUksQ0FBQztBQUNMLElBQ0ksUUFBUTtBQUFLLFFBQ1QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3pELElBQUksQ0FBQztBQUNMLElBQ0ksdUJBQXVCO0FBQzNCLFFBQVEsSUFBSSxDQUFDLGNBQWMsQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO0FBQzNELElBQUksQ0FBQztBQUNMLElBQ0ksUUFBUSxDQUFDLFVBQTJCO0FBQ3hDLFFBQVEsSUFBSSxDQUFDLG1CQUFtQixHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDaEksSUFBSSxDQUFDO0FBQ0wsSUFDSSxlQUFlO0FBQ25CLFFBQVEsSUFBSSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUN4RSxRQUFRLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxFQUFFLENBQUM7QUFDdEMsSUFBSSxDQUFDO0FBQ0wsSUFDSSxnQkFBZ0IsQ0FBQyxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUM7QUFDdkMsUUFBUSxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDekQsSUFBSSxDQUFDO0FBQ0wsSUFDSSxnQkFBZ0IsQ0FBQyxVQUFrQztBQUN2RCxRQUFRLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxFQUFFLENBQUM7QUFDdEMsUUFBUSxJQUFJLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3pELElBQUksQ0FBQztBQUNMLElBQ0ksbUJBQW1CLENBQUMsSUFBWTtBQUNwQyxRQUFRLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pELFFBQVEsSUFBSSxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztBQUN0QyxJQUFJLENBQUM7QUFDTDttREF4REMsU0FBUyxTQUFDLGtCQUNQLFFBQVEsRUFBRSxxQkFBcUIsa0JBQy9COzs7Ozs7Ozs7Ozs7Ozs7Ozs7bW9EQUlDO0FBQUM7QUFDVSxZQVRQLHFCQUFxQjtBQUFHO0FBQUc7QUFFekIscUJBUU4sS0FBSztBQUNSLHFCQUdHLE1BQU07QUFDVCxvQkFHRyxNQUFNO0FBQ1Y7Ozs7O3FIQWZrRCxrQkFFL0MsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUksMDJDQUN4Qzs7Ozs7Ozs7OztvQkFZRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgT2JqZWN0RGF0YVJvdyB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBQZXJtaXNzaW9uRWxlbWVudCB9IGZyb20gJ0BhbGZyZXNjby9qcy1hcGknO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBQZXJtaXNzaW9uRGlzcGxheU1vZGVsIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3Blcm1pc3Npb24ubW9kZWwnO1xuaW1wb3J0IHsgUGVybWlzc2lvbkxpc3RTZXJ2aWNlIH0gZnJvbSAnLi9wZXJtaXNzaW9uLWxpc3Quc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXBlcm1pc3Npb24tbGlzdCcsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3Blcm1pc3Npb24tbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vcGVybWlzc2lvbi1saXN0LmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBQZXJtaXNzaW9uTGlzdENvbXBvbmVudCB7XG4gICAgLyoqIElEIG9mIHRoZSBub2RlIHdob3NlIHBlcm1pc3Npb25zIHlvdSB3YW50IHRvIHNob3cuICovXG4gICAgQElucHV0KClcbiAgICBub2RlSWQ6IHN0cmluZztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIHBlcm1pc3Npb24gaXMgdXBkYXRlZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICB1cGRhdGU6IEV2ZW50RW1pdHRlcjxQZXJtaXNzaW9uRWxlbWVudD47XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT47XG5cbiAgICBzZWxlY3RlZFBlcm1pc3Npb25zOiBQZXJtaXNzaW9uRGlzcGxheU1vZGVsW10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBwZXJtaXNzaW9uTGlzdDogUGVybWlzc2lvbkxpc3RTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSB0aGlzLnBlcm1pc3Npb25MaXN0LmVycm9yZWQ7XG4gICAgICAgIHRoaXMudXBkYXRlID0gdGhpcy5wZXJtaXNzaW9uTGlzdC51cGRhdGVkO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnBlcm1pc3Npb25MaXN0LmZldGNoUGVybWlzc2lvbih0aGlzLm5vZGVJZCk7XG4gICAgfVxuXG4gICAgb3BlbkFkZFBlcm1pc3Npb25EaWFsb2coKSB7XG4gICAgICAgIHRoaXMucGVybWlzc2lvbkxpc3QudXBkYXRlTm9kZVBlcm1pc3Npb25CeURpYWxvZygpO1xuICAgIH1cblxuICAgIG9uU2VsZWN0KHNlbGVjdGlvbnM6IE9iamVjdERhdGFSb3dbXSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkUGVybWlzc2lvbnMgPSBzZWxlY3Rpb25zLm1hcCgoc2VsZWN0aW9uKSA9PiBzZWxlY3Rpb25bJ29iaiddKS5maWx0ZXIoKHBlcm1pc3Npb24pID0+ICFwZXJtaXNzaW9uLnJlYWRvbmx5KTtcbiAgICB9XG5cbiAgICBkZWxldGVTZWxlY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucGVybWlzc2lvbkxpc3QuZGVsZXRlUGVybWlzc2lvbnModGhpcy5zZWxlY3RlZFBlcm1pc3Npb25zKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBlcm1pc3Npb25zID0gW107XG4gICAgfVxuXG4gICAgdXBkYXRlUGVybWlzc2lvbih7cm9sZSwgcGVybWlzc2lvbn0pIHtcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uTGlzdC51cGRhdGVSb2xlKHJvbGUsIHBlcm1pc3Npb24pO1xuICAgIH1cblxuICAgIGRlbGV0ZVBlcm1pc3Npb24ocGVybWlzc2lvbjogUGVybWlzc2lvbkRpc3BsYXlNb2RlbCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkUGVybWlzc2lvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uTGlzdC5kZWxldGVQZXJtaXNzaW9uKHBlcm1pc3Npb24pO1xuICAgIH1cblxuICAgIHVwZGF0ZUFsbFBlcm1pc3Npb24ocm9sZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucGVybWlzc2lvbkxpc3QuYnVsa1JvbGVVcGRhdGUocm9sZSk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQZXJtaXNzaW9ucyA9IFtdO1xuICAgIH1cbn1cbiJdfQ==