{"version":3,"sources":["../../../extensions/src/lib/config/action.extensions.ts","../../../extensions/src/lib/config/extension-utils.ts","../../../extensions/src/lib/config/rule.extensions.ts","../../../../node_modules/tslib/tslib.es6.js","../../../extensions/src/lib/services/extension-loader.service.ts","../../../extensions/src/lib/evaluators/core.evaluators.ts","../../../extensions/src/lib/services/component-register.service.ts","../../../extensions/src/lib/services/rule.service.ts","../../../extensions/src/lib/services/extension.service.ts","../../../extensions/src/lib/services/app-extension.service.ts","../../../extensions/src/lib/components/viewer/preview-extension.component.ts","../../../extensions/src/lib/components/dynamic-column/dynamic-column.component.ts","../../../extensions/src/lib/components/dynamic-component/dynamic.component.ts","../../../extensions/src/lib/components/dynamic-tab/dynamic-tab.component.ts","../../../extensions/src/lib/services/startup-extension-factory.ts","../../../extensions/src/lib/extensions.module.ts"],"names":["ContentActionType","getValue","target","key","keys","split","value","shift","undefined","length","filterEnabled","entry","disabled","sortByOrder","a","b","order","Number","MAX_SAFE_INTEGER","mergeObjects","objects","_i","arguments","result","forEach","source","Object","prop","replace","endsWith","startsWith","Array","isArray","mergeArrays","left","right","map","element","hasOwnProperty","id","push","merged","concat","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","create","__read","o","m","r","i","ar","error","__spread","ExtensionLoaderService","http","prototype","load","configPath","pluginsPath","extensions","_this","loadConfig","config_1","config","override","sessionStorage","getItem","JSON","parse","$references","filterIgnoredExtensions","$ignoreReferenceList","plugins","name","idx","all","results","configs","filter","sort","assign","getMetadata","ext","url","get","subscribe","getElements","fallback","getContentActions","setActionDefaults","getRules","rules","getRoutes","routes","getActions","actions","getFeatures","features","action","type","default","icon","ignoreReferenceList","file","match","fileName","includes","not","context","args","every","arg","evaluator","getEvaluator","parameters","console","warn","some","Injectable","providedIn","HttpClient","ComponentRegisterService","components","setComponents","values","getComponentById","hasComponentById","RuleService","loader","evaluators","setup","setEvaluators","getRuleById","find","ref","fn_1","substring","evaluateRule","ruleId","ruleRef","extensionJsonsFactory","EXTENSION_JSONS","InjectionToken","factory","ExtensionService","componentRegister","ruleService","extensionJsons","authGuards","onSetup$","BehaviorSubject","setup$","asObservable","flat","_a","core.every","core.some","core.not","getFeature","reduce","prev","curr","setAuthGuards","getRouteById","route","getAuthGuards","ids","guard","getActionById","runExpression","evaluateExpression","duplicate_1","matches","RegExp","exec","expression","Function","fn","Inject","AppExtensionService","extensionService","_references","references$","references","getDocumentListPreset","getViewerExtensions","extension","isViewerExtensionDisabled","PreviewExtensionComponent","componentFactoryResolver","ngOnInit","componentType","resolveComponentFactory","content","clear","componentRef","createComponent","updateInstance","ngOnChanges","ngOnDestroy","destroy","instance","node","Component","selector","template","ComponentFactoryResolver","ViewChild","read","ViewContainerRef","static","Input","DynamicColumnComponent","changes","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","host","class","DynamicExtensionComponent","loaded","loadComponent","data","currentValue","proxy","componentCreated","lifecycleMethod","lifecycleHookIsImplemented","DynamicTabComponent","setupExtensions","appExtensionService","ExtensionsModule","forRoot","ngModule","providers","provide","APP_INITIALIZER","useFactory","deps","multi","forChild","NgModule","declarations","exports","jsons","useValue","acc","el","menu","children","arr","separator"],"mappings":"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","sourcesContent":["/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ExtensionElement } from './extension-element';\n\nexport enum ContentActionType {\n    default = 'default',\n    button = 'button',\n    separator = 'separator',\n    menu = 'menu',\n    custom = 'custom'\n}\n\nexport interface ContentActionRef extends ExtensionElement {\n    type: ContentActionType;\n\n    title?: string;\n    description?: string;\n    icon?: string;\n    children?: Array<ContentActionRef>;\n    component?: string;\n    data?: any;\n    color?: string;\n    actions?: {\n        click?: string;\n        [key: string]: string;\n    };\n    rules?: {\n        enabled?: string;\n        visible?: string;\n        [key: string]: string;\n    };\n}\n\nexport interface ActionRef {\n    id: string;\n    type: string;\n    payload?: any;\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ContentActionRef, ContentActionType } from './action.extensions';\n\nexport function getValue(target: any, key: string): any {\n    if (!target) {\n        return undefined;\n    }\n\n    const keys = key.split('.');\n    key = '';\n\n    do {\n        key += keys.shift();\n        const value = target[key];\n        if (\n            value !== undefined &&\n            (typeof value === 'object' || !keys.length)\n        ) {\n            target = value;\n            key = '';\n        } else if (!keys.length) {\n            target = undefined;\n        } else {\n            key += '.';\n        }\n    } while (keys.length);\n\n    return target;\n}\n\nexport function filterEnabled(entry: { disabled?: boolean }): boolean {\n    return !entry.disabled;\n}\n\nexport function sortByOrder(\n    a: { order?: number | undefined },\n    b: { order?: number | undefined }\n) {\n    const left = a.order === undefined ? Number.MAX_SAFE_INTEGER : a.order;\n    const right = b.order === undefined ? Number.MAX_SAFE_INTEGER : b.order;\n    return left - right;\n}\n\nexport function reduceSeparators(\n    acc: ContentActionRef[],\n    el: ContentActionRef,\n    i: number,\n    arr: ContentActionRef[]\n): ContentActionRef[] {\n    // remove leading separator\n    if (i === 0) {\n        if (arr[i].type === ContentActionType.separator) {\n            return acc;\n        }\n    }\n    // remove duplicate separators\n    if (i > 0) {\n        const prev = arr[i - 1];\n        if (\n            prev.type === ContentActionType.separator &&\n            el.type === ContentActionType.separator\n        ) {\n            return acc;\n        }\n\n        // remove trailing separator\n        if (i === arr.length - 1) {\n            if (el.type === ContentActionType.separator) {\n                return acc;\n            }\n        }\n    }\n\n    return acc.concat(el);\n}\n\nexport function reduceEmptyMenus(\n    acc: ContentActionRef[],\n    el: ContentActionRef\n): ContentActionRef[] {\n    if (el.type === ContentActionType.menu) {\n        if ((el.children || []).length === 0) {\n            return acc;\n        }\n    }\n    return acc.concat(el);\n}\n\nexport function mergeObjects(...objects: object[]): any {\n    const result = {};\n\n    objects.forEach((source) => {\n        Object.keys(source).forEach((prop) => {\n            let replace = false;\n\n            if (prop.endsWith('.$replace')) {\n                replace = true;\n                prop = prop.replace('.$replace', '');\n            }\n\n            if (!prop.startsWith('$')) {\n                if (replace) {\n                    result[prop] = source[`${prop}.$replace`];\n                } else if (prop in result && Array.isArray(result[prop])) {\n                    result[prop] = mergeArrays(result[prop], source[prop]);\n                } else if (prop in result && typeof result[prop] === 'object') {\n                    result[prop] = mergeObjects(result[prop], source[prop]);\n                } else {\n                    result[prop] = source[prop];\n                }\n            }\n        });\n    });\n\n    return result;\n}\n\nexport function mergeArrays(left: any[], right: any[]): any[] {\n    const result = [];\n    const map = {};\n\n    (left || []).forEach((entry) => {\n        const element = entry;\n        if (element && element.hasOwnProperty('id')) {\n            map[element.id] = element;\n        } else {\n            result.push(element);\n        }\n    });\n\n    (right || []).forEach((entry) => {\n        const element = entry;\n        if (element && element.hasOwnProperty('id') && map[element.id]) {\n            const merged = mergeObjects(map[element.id], element);\n            map[element.id] = merged;\n        } else {\n            result.push(element);\n        }\n    });\n\n    return Object.keys(map).map((key) => map[key]).concat(result);\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SelectionState } from '../store/states/selection.state';\nimport { NavigationState } from '../store/states/navigation.state';\nimport { NodePermissions } from './permission.extensions';\nimport { ProfileState } from '../store/states/profile.state';\nimport { RepositoryInfo } from '@alfresco/js-api';\n\nexport type RuleEvaluator = (context: RuleContext, ...args: any[]) => boolean;\n\nexport interface RuleContext {\n    repository: RepositoryInfo;\n    auth: any;\n    selection: SelectionState;\n    navigation: NavigationState;\n    profile: ProfileState;\n    permissions: NodePermissions;\n\n    getEvaluator(key: string): RuleEvaluator;\n}\n\nexport class RuleRef {\n    type: string;\n    id?: string;\n    parameters?: Array<RuleParameter>;\n}\n\nexport interface RuleParameter {\n    type: string;\n    value: any;\n    parameters?: Array<RuleParameter>;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ActionRef, ContentActionRef, ContentActionType } from '../config/action.extensions';\nimport { ExtensionElement } from '../config/extension-element';\nimport { filterEnabled, getValue, mergeObjects, sortByOrder } from '../config/extension-utils';\nimport { ExtensionConfig, ExtensionRef } from '../config/extension.config';\nimport { RouteRef } from '../config/routing.extensions';\nimport { RuleRef } from '../config/rule.extensions';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ExtensionLoaderService {\n    constructor(private http: HttpClient) {\n    }\n\n    load(configPath: string, pluginsPath: string, extensions?: string[]): Promise<ExtensionConfig> {\n        return new Promise<any>((resolve) => {\n            this.loadConfig(configPath, 0).then((result) => {\n                if (result) {\n                    let config = result.config;\n\n                    const override = sessionStorage.getItem('app.extension.config');\n                    if (override) {\n                        config = JSON.parse(override);\n                    }\n\n                    if (!config.$references || !config.$references.length) {\n                        config.$references = this.filterIgnoredExtensions(extensions || [], config.$ignoreReferenceList);\n                    } else {\n                        config.$references = this.filterIgnoredExtensions(config.$references, config.$ignoreReferenceList);\n                    }\n\n                    if (config.$references && config.$references.length > 0) {\n                        const plugins = config.$references.map((name, idx) =>\n                            this.loadConfig(`${pluginsPath}/${name}`, idx)\n                        );\n\n                        Promise.all(plugins).then((results) => {\n                            const configs = results\n                                .filter((entry) => entry)\n                                .sort(sortByOrder)\n                                .map((entry) => entry.config);\n\n                            if (configs.length > 0) {\n                                config = mergeObjects(config, ...configs);\n                            }\n\n                            config = {\n                                ...config,\n                                ...this.getMetadata(result.config),\n                                $references: configs.map((ext) => this.getMetadata(ext))\n                            };\n\n                            resolve(config);\n                        });\n                    } else {\n                        resolve(config);\n                    }\n                }\n            });\n        });\n    }\n\n    protected getMetadata(config: ExtensionConfig): ExtensionRef {\n        const result: any = {};\n\n        Object\n            .keys(config)\n            .filter((key) => key.startsWith('$'))\n            .forEach((key) => {\n                result[key] = config[key];\n            });\n\n        return result;\n    }\n\n    protected loadConfig(\n        url: string,\n        order: number\n    ): Promise<{ order: number; config: ExtensionConfig }> {\n        return new Promise((resolve) => {\n            this.http.get<ExtensionConfig>(url).subscribe(\n                (config) => {\n                    resolve({\n                        order,\n                        config\n                    });\n                },\n                () => {\n                    resolve(null);\n                }\n            );\n        });\n    }\n\n    /**\n     * Retrieves configuration elements.\n     * Filters element by **enabled** and **order** attributes.\n     * Example:\n     *  `getElements<ViewerExtensionRef>(config, 'features.viewer.content')`\n     */\n    getElements<T extends ExtensionElement>(\n        config: ExtensionConfig,\n        key: string,\n        fallback: Array<T> = []\n    ): Array<T> {\n        const values = getValue(config, key) || fallback || [];\n        return values.filter(filterEnabled).sort(sortByOrder);\n    }\n\n    getContentActions(\n        config: ExtensionConfig,\n        key: string\n    ): Array<ContentActionRef> {\n        return this.getElements(config, key).map(this.setActionDefaults);\n    }\n\n    getRules(config: ExtensionConfig): Array<RuleRef> {\n        if (config && config.rules) {\n            return config.rules;\n        }\n        return [];\n    }\n\n    getRoutes(config: ExtensionConfig): Array<RouteRef> {\n        if (config) {\n            return config.routes || [];\n        }\n        return [];\n    }\n\n    getActions(config: ExtensionConfig): Array<ActionRef> {\n        if (config) {\n            return config.actions || [];\n        }\n        return [];\n    }\n\n    getFeatures(config: ExtensionConfig): any {\n        if (config) {\n            return config.features || [];\n        }\n        return [];\n    }\n\n    protected setActionDefaults(action: ContentActionRef): ContentActionRef {\n        if (action) {\n            action.type = action.type || ContentActionType.default;\n            action.icon = action.icon || 'extension';\n        }\n        return action;\n    }\n\n    private filterIgnoredExtensions(extensions: Array<string | ExtensionRef>, ignoreReferenceList: string[]): Array<string | ExtensionRef> {\n        if (!ignoreReferenceList || !ignoreReferenceList.length) {\n            return extensions;\n        }\n\n        return extensions.map((file: string) => file.match('(?!.*\\/).+')[0]).filter((fileName: string) => !ignoreReferenceList.includes(fileName));\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RuleContext, RuleParameter } from '../config/rule.extensions';\n\nexport function not(context: RuleContext, ...args: RuleParameter[]): boolean {\n    if (!args || args.length === 0) {\n        return false;\n    }\n\n    return args\n        .every((arg) => {\n            const evaluator = context.getEvaluator(arg.value);\n            if (!evaluator) {\n                console.warn('evaluator not found: ' + arg.value);\n                return false;\n            }\n            return !evaluator(context, ...(arg.parameters || []));\n        });\n}\n\nexport function every(context: RuleContext, ...args: RuleParameter[]): boolean {\n    if (!args || args.length === 0) {\n        return false;\n    }\n\n    return args\n        .every((arg) => {\n            const evaluator = context.getEvaluator(arg.value);\n            if (!evaluator) {\n                console.warn('evaluator not found: ' + arg.value);\n                return false;\n            }\n            return evaluator(context, ...(arg.parameters || []));\n        });\n}\n\nexport function some(context: RuleContext, ...args: RuleParameter[]): boolean {\n    if (!args || args.length === 0) {\n        return false;\n    }\n\n    return args\n        .some((arg) => {\n            const evaluator = context.getEvaluator(arg.value);\n            if (!evaluator) {\n                console.warn('evaluator not found: ' + arg.value);\n                return false;\n            }\n            return evaluator(context, ...(arg.parameters || []));\n        });\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Injectable, Type } from '@angular/core';\n\nexport interface ExtensionComponent {\n    data: any;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class ComponentRegisterService {\n    components: { [key: string]: Type<{}> } = {};\n\n    setComponents(values: { [key: string]: Type<{}> }) {\n        if (values) {\n            this.components = Object.assign({}, this.components, values);\n        }\n    }\n\n    getComponentById<T>(id: string): Type<T> {\n        return <Type<T>> this.components[id];\n    }\n\n    hasComponentById(id: string): boolean {\n        return !!this.getComponentById(id);\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Injectable } from '@angular/core';\nimport { RuleRef, RuleContext, RuleEvaluator, RuleParameter } from '../config/rule.extensions';\nimport { ExtensionConfig } from '../config/extension.config';\nimport { ExtensionLoaderService } from './extension-loader.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class RuleService {\n    context: RuleContext = null;\n    rules: Array<RuleRef> = [];\n    evaluators: { [key: string]: RuleEvaluator } = {};\n\n    constructor(protected loader: ExtensionLoaderService) {}\n\n    setup(config: ExtensionConfig) {\n        this.rules = this.loader.getRules(config);\n    }\n\n    /**\n     * Adds one or more new rule evaluators to the existing set.\n     * @param values The new evaluators to add\n     */\n    setEvaluators(values: { [key: string]: RuleEvaluator }) {\n        if (values) {\n            this.evaluators = Object.assign({}, this.evaluators, values);\n        }\n    }\n\n    /**\n     * Retrieves a rule using its ID value.\n     * @param id The ID value to look for\n     * @returns The rule or null if not found\n     */\n    getRuleById(id: string): RuleRef {\n        return this.rules.find((ref) => ref.id === id);\n    }\n\n    /**\n     * Retrieves a RuleEvaluator function using its key name.\n     * @param key Key name to look for\n     * @returns RuleEvaluator or null if not found\n     */\n    getEvaluator(key: string): RuleEvaluator {\n        if (key && key.startsWith('!')) {\n            const fn = this.evaluators[key.substring(1)];\n            return (context: RuleContext, ...args: RuleParameter[]): boolean => {\n                return !fn(context, ...args);\n            };\n        }\n        return this.evaluators[key];\n    }\n\n    /**\n     * Evaluates a rule.\n     * @param ruleId ID of the rule to evaluate\n     * @param context Custom rule execution context.\n     * @returns True if the rule passed, false otherwise\n     */\n    evaluateRule(ruleId: string, context?: RuleContext): boolean {\n        const ruleRef = this.getRuleById(ruleId);\n        context = context || this.context;\n\n        if (ruleRef) {\n            const evaluator = this.getEvaluator(ruleRef.type);\n            if (evaluator) {\n                return evaluator(context, ...ruleRef.parameters);\n            }\n        } else {\n            const evaluator = this.getEvaluator(ruleId);\n            if (evaluator) {\n                return evaluator(context);\n            }\n        }\n        return false;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Injectable, Type, InjectionToken, Inject } from '@angular/core';\nimport { RuleEvaluator, RuleRef, RuleContext } from '../config/rule.extensions';\nimport { ExtensionConfig } from '../config/extension.config';\nimport { ExtensionLoaderService } from './extension-loader.service';\nimport { RouteRef } from '../config/routing.extensions';\nimport { ActionRef } from '../config/action.extensions';\nimport * as core from '../evaluators/core.evaluators';\nimport { ComponentRegisterService } from './component-register.service';\nimport { RuleService } from './rule.service';\nimport { ExtensionElement } from '../config/extension-element';\nimport { BehaviorSubject } from 'rxjs';\n\nexport function extensionJsonsFactory() {\n    return [];\n}\n\nexport const EXTENSION_JSONS = new InjectionToken<string[][]>('extension-jsons', {\n    providedIn: 'root',\n    factory: extensionJsonsFactory\n});\n\nexport function provideExtensionConfig(jsons: string[]) {\n    return {\n        provide: EXTENSION_JSONS,\n        useValue: jsons,\n        multi: true\n    };\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ExtensionService {\n\n    protected config: ExtensionConfig = null;\n\n    configPath = 'assets/app.extensions.json';\n    pluginsPath = 'assets/plugins';\n\n    routes: Array<RouteRef> = [];\n    actions: Array<ActionRef> = [];\n    features: Array<any> = [];\n    authGuards: { [key: string]: Type<{}> } = {};\n\n    protected onSetup$ = new BehaviorSubject<ExtensionConfig>(this.config);\n    setup$ = this.onSetup$.asObservable();\n\n    constructor(\n        protected loader: ExtensionLoaderService,\n        protected componentRegister: ComponentRegisterService,\n        protected ruleService: RuleService,\n        @Inject(EXTENSION_JSONS) protected extensionJsons: string[]\n    ) {\n    }\n\n    /**\n     * Loads and registers an extension config file and plugins (specified by path properties).\n     * @returns The loaded config data\n     */\n    async load(): Promise<ExtensionConfig> {\n        const config = await this.loader.load(\n            this.configPath,\n            this.pluginsPath,\n            this.extensionJsons.flat()\n        );\n        this.setup(config);\n        return config;\n    }\n\n    /**\n     * Registers extensions from a config object.\n     * @param config Object with config data\n     */\n    setup(config: ExtensionConfig) {\n        if (!config) {\n            console.warn('Extension configuration not found');\n            return;\n        }\n\n        this.config = config;\n\n        this.setEvaluators({\n            'core.every': core.every,\n            'core.some': core.some,\n            'core.not': core.not\n        });\n\n        this.actions = this.loader.getActions(config);\n        this.routes = this.loader.getRoutes(config);\n        this.features = this.loader.getFeatures(config);\n\n        this.ruleService.setup(config);\n        this.onSetup$.next(config);\n    }\n\n    /**\n     * Gets features by key.\n     * @param key Key string, using dot notation\n     * @returns Features array found by key\n     */\n    getFeature(key: string): any[] {\n        const properties: string[] = Array.isArray(key) ? [key] : key.split('.');\n        return properties.reduce((prev, curr) => prev && prev[curr], this.features) || [];\n    }\n\n    getElements<T extends ExtensionElement>(key: string, fallback: Array<T> = []): Array<T> {\n        return this.loader.getElements(this.config, key, fallback);\n    }\n\n    /**\n     * Adds one or more new rule evaluators to the existing set.\n     * @param values The new evaluators to add\n     */\n    setEvaluators(values: { [key: string]: RuleEvaluator }) {\n        this.ruleService.setEvaluators(values);\n    }\n\n    /**\n     * Adds one or more new auth guards to the existing set.\n     * @param values The new auth guards to add\n     */\n    setAuthGuards(values: { [key: string]: Type<{}> }) {\n        if (values) {\n            this.authGuards = Object.assign({}, this.authGuards, values);\n        }\n    }\n\n    /**\n     * Adds one or more new components to the existing set.\n     * @param values The new components to add\n     */\n    setComponents(values: { [key: string]: Type<{}> }) {\n        this.componentRegister.setComponents(values);\n    }\n\n    /**\n     * Retrieves a route using its ID value.\n     * @param id The ID value to look for\n     * @returns The route or null if not found\n     */\n    getRouteById(id: string): RouteRef {\n        return this.routes.find((route) => route.id === id);\n    }\n\n    /**\n     * Retrieves one or more auth guards using an array of ID values.\n     * @param ids Array of ID value to look for\n     * @returns Array of auth guards or empty array if none were found\n     */\n    getAuthGuards(ids: string[]): Array<Type<{}>> {\n        return (ids || [])\n            .map((id) => this.authGuards[id])\n            .filter((guard) => guard);\n    }\n\n    /**\n     * Retrieves an action using its ID value.\n     * @param id The ID value to look for\n     * @returns Action or null if not found\n     */\n    getActionById(id: string): ActionRef {\n        return this.actions.find((action) => action.id === id);\n    }\n\n    /**\n     * Retrieves a RuleEvaluator function using its key name.\n     * @param key Key name to look for\n     * @returns RuleEvaluator or null if not found\n     */\n    getEvaluator(key: string): RuleEvaluator {\n        return this.ruleService.getEvaluator(key);\n    }\n\n    /**\n     * Evaluates a rule.\n     * @param ruleId ID of the rule to evaluate\n     * @param context Custom rule execution context.\n     * @returns True if the rule passed, false otherwise\n     */\n    evaluateRule(ruleId: string, context?: RuleContext): boolean {\n        return this.ruleService.evaluateRule(ruleId, context);\n    }\n\n    /**\n     * Retrieves a registered extension component using its ID value.\n     * @param id The ID value to look for\n     * @returns The component or null if not found\n     */\n    getComponentById<T>(id: string) {\n        return this.componentRegister.getComponentById<T>(id);\n    }\n\n    /**\n     * Retrieves a rule using its ID value.\n     * @param id The ID value to look for\n     * @returns The rule or null if not found\n     */\n    getRuleById(id: string): RuleRef {\n        return this.ruleService.getRuleById(id);\n    }\n\n    /**\n     * Runs a lightweight expression stored in a string.\n     * @param value String containing the expression or literal value\n     * @param context Parameter object for the expression with details of app state\n     * @returns Result of evaluated expression, if found, or the literal value otherwise\n     */\n    runExpression(value: string | {} , context?: any) {\n        if (typeof value === 'string' ) {\n            return this.evaluateExpression(value, context);\n        } else {\n            const duplicate = Object.assign({}, value);\n            Object.keys(duplicate).forEach( (key) => {\n                duplicate[key] = this.evaluateExpression(duplicate[key], context);\n            });\n            return duplicate;\n        }\n    }\n\n    private evaluateExpression(value: string, context?: any): string {\n        const pattern = new RegExp(/\\$\\((.*\\)?)\\)/g);\n        const matches = pattern.exec(value);\n\n        if (matches && matches.length > 1) {\n            const expression = matches[1];\n            const fn = new Function('context', `return ${expression}`);\n            const result = fn(context);\n\n            return result;\n        }\n        return value;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Injectable } from '@angular/core';\nimport { ExtensionConfig, ExtensionRef } from '../config/extension.config';\nimport { ExtensionService } from '../services/extension.service';\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { ViewerExtensionRef } from '../config/viewer.extensions';\nimport { DocumentListPresetRef } from '../config/document-list.extensions';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AppExtensionService {\n    private _references = new BehaviorSubject<ExtensionRef[]>([]);\n\n    references$: Observable<ExtensionRef[]>;\n\n    constructor(protected extensionService: ExtensionService) {\n        this.references$ = this._references.asObservable();\n    }\n\n    async load() {\n        const config = await this.extensionService.load();\n        this.setup(config);\n    }\n\n    setup(config: ExtensionConfig) {\n        if (!config) {\n            return;\n        }\n\n        const references = (config.$references || [])\n            .filter((entry) => typeof entry === 'object')\n            .map((entry) => <ExtensionRef> entry);\n        this._references.next(references);\n    }\n\n    /**\n     * Provides a collection of document list columns for the particular preset.\n     * The result is filtered by the **disabled** state.\n     * @param key Preset key.\n     */\n    getDocumentListPreset(key: string): DocumentListPresetRef[] {\n        return this.extensionService\n          .getElements<DocumentListPresetRef>(\n            `features.documentList.${key}`\n          )\n          .filter((entry) => !entry.disabled);\n    }\n\n    /**\n     * Provides a list of the Viewer content extensions,\n     * filtered by **disabled** state and **rules**.\n     */\n    getViewerExtensions(): ViewerExtensionRef[] {\n        return this.extensionService\n            .getElements<ViewerExtensionRef>('features.viewer.content')\n            .filter((extension) => !this.isViewerExtensionDisabled(extension));\n    }\n\n    protected isViewerExtensionDisabled(extension: ViewerExtensionRef): boolean {\n        if (extension) {\n          if (extension.disabled) {\n            return true;\n          }\n\n          if (extension.rules && extension.rules.disabled) {\n            return this.extensionService.evaluateRule(extension.rules.disabled);\n          }\n        }\n\n        return false;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    Component,\n    Input,\n    ComponentRef,\n    OnInit,\n    ComponentFactoryResolver,\n    ViewChild,\n    ViewContainerRef,\n    OnDestroy,\n    OnChanges\n} from '@angular/core';\nimport { ExtensionService } from '../../services/extension.service';\nimport { Node } from '@alfresco/js-api';\n\n@Component({\n    selector: 'adf-preview-extension',\n    template: `\n    <div #content></div>\n  `\n})\nexport class PreviewExtensionComponent implements OnInit, OnChanges, OnDestroy {\n    @ViewChild('content', { read: ViewContainerRef, static: true })\n    content: ViewContainerRef;\n\n    /** ID string of the component to preview. */\n    @Input()\n    id: string;\n\n    /** URL of the content in the repository. */\n    @Input()\n    url: string;\n\n    /** File extension (.jpg, .png, etc) for the viewer. */\n    @Input()\n    extension: string;\n\n    /** Node containing the content to display. */\n    @Input()\n    node: Node;\n\n    private componentRef: ComponentRef<any>;\n\n    constructor(\n        private extensionService: ExtensionService,\n        private componentFactoryResolver: ComponentFactoryResolver\n    ) {}\n\n    ngOnInit() {\n        if (!this.id) {\n            return;\n        }\n\n        const componentType = this.extensionService.getComponentById(this.id);\n        if (componentType) {\n            const factory = this.componentFactoryResolver.resolveComponentFactory(\n                componentType\n            );\n            if (factory) {\n                this.content.clear();\n                this.componentRef = this.content.createComponent(factory, 0);\n                this.updateInstance();\n            }\n        }\n    }\n\n    ngOnChanges() {\n        this.updateInstance();\n    }\n\n    ngOnDestroy() {\n        if (this.componentRef) {\n            this.componentRef.destroy();\n            this.componentRef = null;\n        }\n    }\n\n    private updateInstance() {\n        if (this.componentRef && this.componentRef.instance) {\n            const instance = this.componentRef.instance;\n\n            instance.node = this.node;\n            instance.url = this.url;\n            instance.extension = this.extension;\n        }\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Component,\n  Input,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  ViewContainerRef,\n  ComponentRef,\n  ComponentFactoryResolver,\n  OnChanges,\n  SimpleChanges,\n  ViewEncapsulation,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { ExtensionService } from '../../services/extension.service';\n\n@Component({\n  selector: 'adf-dynamic-column',\n  template: `\n    <ng-container #content></ng-container>\n  `,\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: { class: 'adf-dynamic-column' },\n  styles: [\n    `\n      .adf-dynamic-column {\n        display: flex;\n        align-items: center;\n      }\n    `\n  ]\n})\nexport class DynamicColumnComponent implements OnInit, OnChanges, OnDestroy {\n  @ViewChild('content', { read: ViewContainerRef, static: true })\n  content: ViewContainerRef;\n\n  @Input()\n  id: string;\n\n  @Input()\n  context: any;\n\n  private componentRef: ComponentRef<any>;\n\n  constructor(\n    private extensions: ExtensionService,\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) {}\n\n  ngOnInit() {\n    const componentType = this.extensions.getComponentById(this.id);\n    if (componentType) {\n      const factory = this.componentFactoryResolver.resolveComponentFactory(\n        componentType\n      );\n      if (factory) {\n        this.content.clear();\n        this.componentRef = this.content.createComponent(factory, 0);\n        this.updateInstance();\n      }\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.node) {\n      this.updateInstance();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.componentRef) {\n      this.componentRef.destroy();\n      this.componentRef = null;\n    }\n  }\n\n  private updateInstance() {\n    if (this.componentRef && this.componentRef.instance) {\n      this.componentRef.instance.context = this.context;\n    }\n  }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    Component,\n    Input,\n    ComponentRef,\n    ComponentFactoryResolver,\n    ViewChild,\n    ViewContainerRef,\n    OnDestroy,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { ExtensionService } from '../../services/extension.service';\nimport { ExtensionComponent } from '../../services/component-register.service';\n\n// cSpell:words lifecycle\n@Component({\n    selector: 'adf-dynamic-component',\n    template: `<div #content></div>`\n})\nexport class DynamicExtensionComponent implements OnChanges, OnDestroy {\n    @ViewChild('content', { read: ViewContainerRef, static: true })\n    content: ViewContainerRef;\n\n    /** Unique ID string for the component to show. */\n    @Input() id: string;\n\n    /** Data for the dynamically-loaded component instance. */\n    @Input() data: any;\n\n    private componentRef: ComponentRef<ExtensionComponent>;\n    private loaded: boolean = false;\n\n    constructor(private extensions: ExtensionService, private componentFactoryResolver: ComponentFactoryResolver) {}\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.loaded) {\n            this.loadComponent();\n            this.loaded = true;\n        }\n\n        if (changes.data) {\n            this.data = changes.data.currentValue;\n        }\n\n        this.updateInstance();\n        this.proxy('ngOnChanges', changes);\n    }\n\n    private loadComponent() {\n        const componentType = this.extensions.getComponentById<ExtensionComponent>(this.id);\n        if (componentType) {\n            const factory = this.componentFactoryResolver.resolveComponentFactory(\n                componentType\n            );\n            if (factory) {\n                this.content.clear();\n                this.componentRef = this.content.createComponent(factory, 0);\n            }\n        }\n    }\n\n    ngOnDestroy() {\n        if (this.componentCreated()) {\n            this.componentRef.destroy();\n            this.componentRef = null;\n        }\n    }\n\n    private updateInstance() {\n        if (this.componentCreated()) {\n            this.componentRef.instance.data = this.data;\n        }\n    }\n\n    private proxy(lifecycleMethod, ...args) {\n        if (this.componentCreated() && this.lifecycleHookIsImplemented(lifecycleMethod)) {\n            this.componentRef.instance[lifecycleMethod].apply(this.componentRef.instance, args);\n        }\n    }\n\n    private componentCreated(): boolean {\n        return !!this.componentRef  && !!this.componentRef.instance;\n    }\n\n    private lifecycleHookIsImplemented(lifecycleMethod: string): boolean {\n        return !!this.componentRef.instance[lifecycleMethod];\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    Component,\n    Input,\n    OnInit,\n    OnDestroy,\n    ViewChild,\n    ViewContainerRef,\n    ComponentRef,\n    ComponentFactoryResolver,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { Node } from '@alfresco/js-api';\nimport { ExtensionService } from '../../services/extension.service';\n\n@Component({\n    selector: 'adf-dynamic-tab',\n    template: `<div #content></div>`\n})\nexport class DynamicTabComponent implements OnInit, OnChanges, OnDestroy {\n    @ViewChild('content', { read: ViewContainerRef, static: true })\n    content: ViewContainerRef;\n\n    /** Unique ID string for the component to show. */\n    @Input()\n    id: string;\n\n    @Input()\n    node: Node;\n\n    private componentRef: ComponentRef<any>;\n\n    constructor(\n        private extensions: ExtensionService,\n        private componentFactoryResolver: ComponentFactoryResolver\n    ) {}\n\n    ngOnInit() {\n        const componentType = this.extensions.getComponentById(this.id);\n        if (componentType) {\n            const factory = this.componentFactoryResolver.resolveComponentFactory(\n                componentType\n            );\n            if (factory) {\n                this.content.clear();\n                this.componentRef = this.content.createComponent(factory, 0);\n                this.updateInstance();\n            }\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.node) {\n            this.updateInstance();\n        }\n    }\n\n    ngOnDestroy() {\n        if (this.componentRef) {\n            this.componentRef.destroy();\n            this.componentRef = null;\n        }\n    }\n\n    private updateInstance() {\n        if (this.componentRef && this.componentRef.instance) {\n            this.componentRef.instance.node = this.node;\n        }\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppExtensionService } from './app-extension.service';\n\nexport function setupExtensions(appExtensionService: AppExtensionService): Function {\n    return () => appExtensionService.load();\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DynamicExtensionComponent } from './components/dynamic-component/dynamic.component';\nimport { DynamicTabComponent } from './components/dynamic-tab/dynamic-tab.component';\nimport { DynamicColumnComponent } from './components/dynamic-column/dynamic-column.component';\nimport { PreviewExtensionComponent } from './components/viewer/preview-extension.component';\nimport { NgModule, ModuleWithProviders, APP_INITIALIZER } from '@angular/core';\nimport { AppExtensionService } from './services/app-extension.service';\nimport { setupExtensions } from './services/startup-extension-factory';\n\n@NgModule({\n    declarations: [\n        DynamicExtensionComponent,\n        DynamicTabComponent,\n        DynamicColumnComponent,\n        PreviewExtensionComponent\n    ],\n    exports: [\n        DynamicExtensionComponent,\n        DynamicTabComponent,\n        DynamicColumnComponent,\n        PreviewExtensionComponent\n    ]\n})\nexport class ExtensionsModule {\n    static forRoot(): ModuleWithProviders<ExtensionsModule> {\n        return {\n            ngModule: ExtensionsModule,\n            providers: [\n                {\n                    provide: APP_INITIALIZER,\n                    useFactory: setupExtensions,\n                    deps: [AppExtensionService],\n                    multi: true\n                }\n            ]\n        };\n    }\n\n    static forChild(): ModuleWithProviders<ExtensionsModule> {\n        return {\n            ngModule: ExtensionsModule\n        };\n    }\n}\n"]}