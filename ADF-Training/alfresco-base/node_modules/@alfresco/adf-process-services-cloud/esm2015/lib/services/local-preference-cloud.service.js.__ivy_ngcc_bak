import { Injectable } from '@angular/core';
import { StorageService } from '@alfresco/adf-core';
import { of } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@alfresco/adf-core";
export class LocalPreferenceCloudService {
    constructor(storage) {
        this.storage = storage;
    }
    getPreferences(_, key) {
        if (key || key === '') {
            return of(this.prepareLocalPreferenceResponse(key));
        }
        return of({
            'list': {
                'entries': []
            }
        });
    }
    getPreferenceByKey(_, key) {
        return of(JSON.parse(this.storage.getItem(key)) || []);
    }
    createPreference(_, key, newPreference) {
        const storedFilters = JSON.parse(this.storage.getItem(key) || '[]');
        storedFilters.push(...newPreference);
        this.storage.setItem(key, JSON.stringify(storedFilters));
        return of(storedFilters);
    }
    updatePreference(_, key, updatedPreference) {
        if (key) {
            this.storage.setItem(key, JSON.stringify(updatedPreference));
        }
        return of(updatedPreference);
    }
    deletePreference(key, preferences) {
        if (key) {
            this.storage.setItem(key, JSON.stringify(preferences));
        }
        return of(preferences);
    }
    prepareLocalPreferenceResponse(key) {
        return {
            'list': {
                'entries': [
                    {
                        'entry': {
                            'key': key,
                            'value': this.storage.getItem(key) || '[]'
                        }
                    }
                ]
            }
        };
    }
}
LocalPreferenceCloudService.ɵprov = i0.ɵɵdefineInjectable({ factory: function LocalPreferenceCloudService_Factory() { return new LocalPreferenceCloudService(i0.ɵɵinject(i1.StorageService)); }, token: LocalPreferenceCloudService, providedIn: "root" });
LocalPreferenceCloudService.decorators = [
    { type: Injectable, args: [{ providedIn: 'root' },] }
];
LocalPreferenceCloudService.ctorParameters = () => [
    { type: StorageService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jYWwtcHJlZmVyZW5jZS1jbG91ZC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3RyYXZpcy9idWlsZC9BbGZyZXNjby9hbGZyZXNjby1uZzItY29tcG9uZW50cy9saWIvcHJvY2Vzcy1zZXJ2aWNlcy1jbG91ZC9zcmMvIiwic291cmNlcyI6WyJsaWIvc2VydmljZXMvbG9jYWwtcHJlZmVyZW5jZS1jbG91ZC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlCQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDOzs7QUFHdEMsTUFBTSxPQUFPLDJCQUEyQjtJQUV0QyxZQUFvQixPQUF1QjtRQUF2QixZQUFPLEdBQVAsT0FBTyxDQUFnQjtJQUFJLENBQUM7SUFROUMsY0FBYyxDQUFDLENBQVMsRUFBRSxHQUFXO1FBQ2pDLElBQUksR0FBRyxJQUFJLEdBQUcsS0FBSyxFQUFFLEVBQUU7WUFDbkIsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLDhCQUE4QixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDdkQ7UUFDRCxPQUFPLEVBQUUsQ0FDTDtZQUNJLE1BQU0sRUFBRTtnQkFDSixTQUFTLEVBQUUsRUFBRTthQUNoQjtTQUNKLENBQ0osQ0FBQztJQUNOLENBQUM7SUFRRCxrQkFBa0IsQ0FBQyxDQUFTLEVBQUUsR0FBVztRQUNyQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQVNELGdCQUFnQixDQUFDLENBQVMsRUFBRSxHQUFXLEVBQUUsYUFBa0I7UUFDdkQsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQztRQUNwRSxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztRQUN6RCxPQUFPLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBU0QsZ0JBQWdCLENBQUMsQ0FBUyxFQUFFLEdBQVcsRUFBRSxpQkFBc0I7UUFDM0QsSUFBSSxHQUFHLEVBQUU7WUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7U0FDaEU7UUFDRCxPQUFPLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFRRCxnQkFBZ0IsQ0FBQyxHQUFXLEVBQUUsV0FBZ0I7UUFDMUMsSUFBSSxHQUFHLEVBQUU7WUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1NBQzFEO1FBQ0QsT0FBTyxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVELDhCQUE4QixDQUFDLEdBQVc7UUFDdEMsT0FBTztZQUNILE1BQU0sRUFBRTtnQkFDSixTQUFTLEVBQUU7b0JBQ1A7d0JBQ0ksT0FBTyxFQUFFOzRCQUNMLEtBQUssRUFBRSxHQUFHOzRCQUNWLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJO3lCQUM3QztxQkFDSjtpQkFDSjthQUNKO1NBQ0osQ0FBQztJQUNOLENBQUM7Ozs7WUF4RkosVUFBVSxTQUFDLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRTs7O1lBSHpCLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBQcmVmZXJlbmNlQ2xvdWRTZXJ2aWNlSW50ZXJmYWNlIH0gZnJvbSAnLi9wcmVmZXJlbmNlLWNsb3VkLmludGVyZmFjZSc7XG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuZXhwb3J0IGNsYXNzIExvY2FsUHJlZmVyZW5jZUNsb3VkU2VydmljZSBpbXBsZW1lbnRzIFByZWZlcmVuY2VDbG91ZFNlcnZpY2VJbnRlcmZhY2Uge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc3RvcmFnZTogU3RvcmFnZVNlcnZpY2UpIHsgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBsb2NhbCBwcmVmZXJlbmNlc1xuICAgICAqIEBwYXJhbSBfIE5hbWUgb2YgdGhlIHRhcmdldCBhcHBcbiAgICAgKiBAcGFyYW0ga2V5IEtleSBvZiB0aGUgdGFyZ2V0IHByZWZlcmVuY2VcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIGxvY2FsIHByZWZlcmVuY2VzXG4gICAgICovXG4gICAgZ2V0UHJlZmVyZW5jZXMoXzogc3RyaW5nLCBrZXk6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChrZXkgfHwga2V5ID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIG9mKHRoaXMucHJlcGFyZUxvY2FsUHJlZmVyZW5jZVJlc3BvbnNlKGtleSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAnbGlzdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2VudHJpZXMnOiBbXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGxvY2FsIHByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIF8gTmFtZSBvZiB0aGUgdGFyZ2V0IGFwcFxuICAgICAqIEBwYXJhbSBrZXkgS2V5IG9mIHRoZSB0YXJnZXQgcHJlZmVyZW5jZVxuICAgICAqIEByZXR1cm5zIE9ic2VydmFibGUgb2YgbG9jYWwgcHJlZmVyZW5jZVxuICAgICAqL1xuICAgIGdldFByZWZlcmVuY2VCeUtleShfOiBzdHJpbmcsIGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG9mKEpTT04ucGFyc2UodGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KSkgfHwgW10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbG9jYWwgcHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0gXyBOYW1lIG9mIHRoZSB0YXJnZXQgYXBwXG4gICAgICogQHBhcmFtIGtleSBLZXkgb2YgdGhlIHRhcmdldCBwcmVmZXJlbmNlXG4gICAgICogQHBhcmFtIG5ld1ByZWZlcmVuY2UgRGV0YWlscyBvZiBuZXcgbG9jYWwgcHJlZmVyZW5jZVxuICAgICAqIEByZXR1cm5zIE9ic2VydmFibGUgb2YgY3JlYXRlZCBsb2NhbCBwcmVmZXJlbmNlc1xuICAgICAqL1xuICAgIGNyZWF0ZVByZWZlcmVuY2UoXzogc3RyaW5nLCBrZXk6IHN0cmluZywgbmV3UHJlZmVyZW5jZTogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3Qgc3RvcmVkRmlsdGVycyA9IEpTT04ucGFyc2UodGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KSB8fCAnW10nKTtcbiAgICAgICAgc3RvcmVkRmlsdGVycy5wdXNoKC4uLm5ld1ByZWZlcmVuY2UpO1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHN0b3JlZEZpbHRlcnMpKTtcbiAgICAgICAgcmV0dXJuIG9mKHN0b3JlZEZpbHRlcnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgbG9jYWwgcHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0gXyBOYW1lIG9mIHRoZSB0YXJnZXQgYXBwXG4gICAgICogQHBhcmFtIGtleSBLZXkgb2YgdGhlIHRhcmdldCBwcmVmZXJlbmNlXG4gICAgICogQHBhcmFtIHVwZGF0ZWRQcmVmZXJlbmNlIERldGFpbHMgb2YgdXBkYXRlZCBwcmVmZXJlbmNlXG4gICAgICogQHJldHVybnMgT2JzZXJ2YWJsZSBvZiB1cGRhdGVkIGxvY2FsIHByZWZlcmVuY2VzXG4gICAgICovXG4gICAgdXBkYXRlUHJlZmVyZW5jZShfOiBzdHJpbmcsIGtleTogc3RyaW5nLCB1cGRhdGVkUHJlZmVyZW5jZTogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkUHJlZmVyZW5jZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZih1cGRhdGVkUHJlZmVyZW5jZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBsb2NhbCBwcmVmZXJlbmNlIGJ5IGdpdmVuIHByZWZlcmVuY2Uga2V5LlxuICAgICAqIEBwYXJhbSBrZXkgS2V5IG9mIHRoZSB0YXJnZXQgcHJlZmVyZW5jZVxuICAgICAqIEBwYXJhbSBwcmVmZXJlbmNlcyBEZXRhaWxzIG9mIHVwZGF0ZWQgcHJlZmVyZW5jZXNcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlIG9mIHByZWZlcmVuY2VzIHdpdGhvdXQgZGVsZXRlZCBwcmVmZXJlbmNlXG4gICAgICovXG4gICAgZGVsZXRlUHJlZmVyZW5jZShrZXk6IHN0cmluZywgcHJlZmVyZW5jZXM6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkocHJlZmVyZW5jZXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2YocHJlZmVyZW5jZXMpO1xuICAgIH1cblxuICAgIHByZXBhcmVMb2NhbFByZWZlcmVuY2VSZXNwb25zZShrZXk6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnbGlzdCc6IHtcbiAgICAgICAgICAgICAgICAnZW50cmllcyc6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2VudHJ5Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdrZXknOiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KSB8fCAnW10nXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuIl19