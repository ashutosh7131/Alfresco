import { Injectable } from '@angular/core';
import { AlfrescoApiService, AppConfigService, LogService } from '@alfresco/adf-core';
import { throwError } from 'rxjs';
import { BaseCloudService } from './base-cloud.service';
import * as i0 from "@angular/core";
import * as i1 from "@alfresco/adf-core";
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@alfresco/adf-core';
export class UserPreferenceCloudService extends BaseCloudService {
    constructor(apiService, appConfigService, logService) {
        super(apiService, appConfigService);
        this.logService = logService;
    }
    getPreferences(appName) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences`;
            return this.get(url);
        }
        else {
            this.logService.error('Appname is mandatory for querying preferences');
            return throwError('Appname not configured');
        }
    }
    getPreferenceByKey(appName, key) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences/${key}`;
            return this.get(url);
        }
        else {
            this.logService.error('Appname and key are mandatory for querying preference');
            return throwError('Appname not configured');
        }
    }
    createPreference(appName, key, newPreference) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences/${key}`;
            const payload = JSON.stringify(newPreference);
            return this.put(url, payload);
        }
        else {
            this.logService.error('Appname  and key are  mandatory for creating preference');
            return throwError('Appname not configured');
        }
    }
    updatePreference(appName, key, updatedPreference) {
        return this.createPreference(appName, key, updatedPreference);
    }
    deletePreference(appName, key) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences/${key}`;
            return this.delete(url);
        }
        else {
            this.logService.error('Appname and key are mandatory to delete preference');
            return throwError('Appname not configured');
        }
    }
}
UserPreferenceCloudService.ɵfac = function UserPreferenceCloudService_Factory(t) { return new (t || UserPreferenceCloudService)(ɵngcc0.ɵɵinject(ɵngcc1.AlfrescoApiService), ɵngcc0.ɵɵinject(ɵngcc1.AppConfigService), ɵngcc0.ɵɵinject(ɵngcc1.LogService)); };
UserPreferenceCloudService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UserPreferenceCloudService_Factory() { return new UserPreferenceCloudService(i0.ɵɵinject(i1.AlfrescoApiService), i0.ɵɵinject(i1.AppConfigService), i0.ɵɵinject(i1.LogService)); }, token: UserPreferenceCloudService, providedIn: "root" });
UserPreferenceCloudService.ctorParameters = () => [
    { type: AlfrescoApiService },
    { type: AppConfigService },
    { type: LogService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(UserPreferenceCloudService, [{
        type: Injectable,
        args: [{ providedIn: 'root' }]
    }], function () { return [{ type: ɵngcc1.AlfrescoApiService }, { type: ɵngcc1.AppConfigService }, { type: ɵngcc1.LogService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1wcmVmZXJlbmNlLWNsb3VkLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2hvbWUvdHJhdmlzL2J1aWxkL0FsZnJlc2NvL2FsZnJlc2NvLW5nMi1jb21wb25lbnRzL2xpYi9wcm9jZXNzLXNlcnZpY2VzLWNsb3VkL3NyYy9saWIvc2VydmljZXMvdXNlci1wcmVmZXJlbmNlLWNsb3VkLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBaUJBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0MsT0FBTyxFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLFVBQVUsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3RGLE9BQU8sRUFBRSxVQUFVLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFDOUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQ7QUFFQTs7O0FBQUEsTUFBTSxPQUFPLDBCQUEyQixTQUFRLGdCQUFnQjtBQUFHLElBRWpFLFlBQ0UsVUFBOEIsRUFDOUIsZ0JBQWtDLEVBQzFCLFVBQXNCO0FBQ2xDLFFBQUksS0FBSyxDQUFDLFVBQVUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3hDLFFBRlksZUFBVSxHQUFWLFVBQVUsQ0FBWTtBQUFDLElBRWpDLENBQUM7QUFDSCxJQU1FLGNBQWMsQ0FBQyxPQUFlO0FBQUksUUFDaEMsSUFBSSxPQUFPLEVBQUU7QUFDakIsWUFBTSxNQUFNLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQzNFLFlBQU0sT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLFNBQUs7QUFBQyxhQUFLO0FBQ1gsWUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDO0FBQzdFLFlBQU0sT0FBTyxVQUFVLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUNsRCxTQUFLO0FBQ0wsSUFBRSxDQUFDO0FBQ0gsSUFPRSxrQkFBa0IsQ0FBQyxPQUFlLEVBQUUsR0FBVztBQUFJLFFBQ2pELElBQUksT0FBTyxFQUFFO0FBQ2pCLFlBQU0sTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsR0FBRyxFQUFFLENBQUM7QUFDbEYsWUFBTSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0IsU0FBSztBQUFDLGFBQUs7QUFDWCxZQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLHVEQUF1RCxDQUFDLENBQUM7QUFDckYsWUFBTSxPQUFPLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2xELFNBQUs7QUFDTCxJQUFFLENBQUM7QUFDSCxJQVFFLGdCQUFnQixDQUFDLE9BQWUsRUFBRSxHQUFXLEVBQUUsYUFBa0I7QUFBSSxRQUNuRSxJQUFJLE9BQU8sRUFBRTtBQUNqQixZQUFNLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsOEJBQThCLEdBQUcsRUFBRSxDQUFDO0FBQ2xGLFlBQU0sTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNwRCxZQUNNLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDcEMsU0FBSztBQUFDLGFBQUs7QUFDWCxZQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLHlEQUF5RCxDQUFDLENBQUM7QUFDdkYsWUFBTSxPQUFPLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2xELFNBQUs7QUFDTCxJQUFFLENBQUM7QUFDSCxJQVFFLGdCQUFnQixDQUFDLE9BQWUsRUFBRSxHQUFXLEVBQUUsaUJBQXNCO0FBQUksUUFDdkUsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQ2xFLElBQUUsQ0FBQztBQUNILElBT0UsZ0JBQWdCLENBQUMsT0FBZSxFQUFFLEdBQVc7QUFBSSxRQUMvQyxJQUFJLE9BQU8sRUFBRTtBQUNqQixZQUFNLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsOEJBQThCLEdBQUcsRUFBRSxDQUFDO0FBQ2xGLFlBQU0sT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzlCLFNBQUs7QUFBQyxhQUFLO0FBQ1gsWUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxvREFBb0QsQ0FBQyxDQUFDO0FBQ2xGLFlBQU0sT0FBTyxVQUFVLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUNsRCxTQUFLO0FBQ0wsSUFBRSxDQUFDO0FBQ0g7NlBBQUM7QUFDRCx5VEF0Rks7QUFBQztFQURMLFVBQVUsU0FBQyxFQUFFLFVBQVUsakNBQ2tDLFlBTGpELGtCQUFrQjtDQUlELE1BQU0sRUFBRSxUQUpILFlBQUYsZ0JBQWdCO0FBQUksWUFBRixVQUFVO0FBQUc7Ozs7bUpBQUU7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFByZWZlcmVuY2VDbG91ZFNlcnZpY2VJbnRlcmZhY2UgfSBmcm9tICcuL3ByZWZlcmVuY2UtY2xvdWQuaW50ZXJmYWNlJztcbmltcG9ydCB7IEFsZnJlc2NvQXBpU2VydmljZSwgQXBwQ29uZmlnU2VydmljZSwgTG9nU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyB0aHJvd0Vycm9yLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBCYXNlQ2xvdWRTZXJ2aWNlIH0gZnJvbSAnLi9iYXNlLWNsb3VkLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuZXhwb3J0IGNsYXNzIFVzZXJQcmVmZXJlbmNlQ2xvdWRTZXJ2aWNlIGV4dGVuZHMgQmFzZUNsb3VkU2VydmljZSBpbXBsZW1lbnRzIFByZWZlcmVuY2VDbG91ZFNlcnZpY2VJbnRlcmZhY2Uge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICBhcHBDb25maWdTZXJ2aWNlOiBBcHBDb25maWdTZXJ2aWNlLFxuICAgIHByaXZhdGUgbG9nU2VydmljZTogTG9nU2VydmljZSkge1xuICAgIHN1cGVyKGFwaVNlcnZpY2UsIGFwcENvbmZpZ1NlcnZpY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdXNlciBwcmVmZXJlbmNlc1xuICAgKiBAcGFyYW0gYXBwTmFtZSBOYW1lIG9mIHRoZSB0YXJnZXQgYXBwXG4gICAqIEByZXR1cm5zIExpc3Qgb2YgdXNlciBwcmVmZXJlbmNlc1xuICAgKi9cbiAgZ2V0UHJlZmVyZW5jZXMoYXBwTmFtZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBpZiAoYXBwTmFtZSkge1xuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5nZXRCYXNlUGF0aChhcHBOYW1lKX0vcHJlZmVyZW5jZS92MS9wcmVmZXJlbmNlc2A7XG4gICAgICByZXR1cm4gdGhpcy5nZXQodXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2dTZXJ2aWNlLmVycm9yKCdBcHBuYW1lIGlzIG1hbmRhdG9yeSBmb3IgcXVlcnlpbmcgcHJlZmVyZW5jZXMnKTtcbiAgICAgIHJldHVybiB0aHJvd0Vycm9yKCdBcHBuYW1lIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdXNlciBwcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0gYXBwTmFtZSBOYW1lIG9mIHRoZSB0YXJnZXQgYXBwXG4gICAqIEBwYXJhbSBrZXkgS2V5IG9mIHRoZSB0YXJnZXQgcHJlZmVyZW5jZVxuICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlIG9mIHVzZXIgcHJlZmVyZW5jZVxuICAgKi9cbiAgZ2V0UHJlZmVyZW5jZUJ5S2V5KGFwcE5hbWU6IHN0cmluZywga2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChhcHBOYW1lKSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXRoKGFwcE5hbWUpfS9wcmVmZXJlbmNlL3YxL3ByZWZlcmVuY2VzLyR7a2V5fWA7XG4gICAgICByZXR1cm4gdGhpcy5nZXQodXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2dTZXJ2aWNlLmVycm9yKCdBcHBuYW1lIGFuZCBrZXkgYXJlIG1hbmRhdG9yeSBmb3IgcXVlcnlpbmcgcHJlZmVyZW5jZScpO1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoJ0FwcG5hbWUgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB1c2VyIHByZWZlcmVuY2UuXG4gICAqIEBwYXJhbSBhcHBOYW1lIE5hbWUgb2YgdGhlIHRhcmdldCBhcHBcbiAgICogQHBhcmFtIGtleSBLZXkgb2YgdGhlIHRhcmdldCBwcmVmZXJlbmNlXG4gICAqIEBuZXdQcmVmZXJlbmNlIERldGFpbHMgb2YgbmV3IHVzZXIgcHJlZmVyZW5jZVxuICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlIG9mIGNyZWF0ZWQgdXNlciBwcmVmZXJlbmNlc1xuICAgKi9cbiAgY3JlYXRlUHJlZmVyZW5jZShhcHBOYW1lOiBzdHJpbmcsIGtleTogc3RyaW5nLCBuZXdQcmVmZXJlbmNlOiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChhcHBOYW1lKSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXRoKGFwcE5hbWUpfS9wcmVmZXJlbmNlL3YxL3ByZWZlcmVuY2VzLyR7a2V5fWA7XG4gICAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkobmV3UHJlZmVyZW5jZSk7XG5cbiAgICAgIHJldHVybiB0aGlzLnB1dCh1cmwsIHBheWxvYWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoJ0FwcG5hbWUgIGFuZCBrZXkgYXJlICBtYW5kYXRvcnkgZm9yIGNyZWF0aW5nIHByZWZlcmVuY2UnKTtcbiAgICAgIHJldHVybiB0aHJvd0Vycm9yKCdBcHBuYW1lIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdXNlciBwcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0gYXBwTmFtZSBOYW1lIG9mIHRoZSB0YXJnZXQgYXBwXG4gICAqIEBwYXJhbSBrZXkgS2V5IG9mIHRoZSB0YXJnZXQgcHJlZmVyZW5jZVxuICAgKiBAcGFyYW0gdXBkYXRlZFByZWZlcmVuY2UgRGV0YWlscyBvZiB1cGRhdGVkIHByZWZlcmVuY2VcbiAgICogQHJldHVybnMgT2JzZXJ2YWJsZSBvZiB1cGRhdGVkIHVzZXIgcHJlZmVyZW5jZXNcbiAgICovXG4gIHVwZGF0ZVByZWZlcmVuY2UoYXBwTmFtZTogc3RyaW5nLCBrZXk6IHN0cmluZywgdXBkYXRlZFByZWZlcmVuY2U6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUHJlZmVyZW5jZShhcHBOYW1lLCBrZXksIHVwZGF0ZWRQcmVmZXJlbmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHVzZXIgcHJlZmVyZW5jZSBieSBnaXZlbiBwcmVmZXJlbmNlIGtleS5cbiAgICogQHBhcmFtIGFwcE5hbWUgTmFtZSBvZiB0aGUgdGFyZ2V0IGFwcFxuICAgKiBAcGFyYW0ga2V5IEtleSBvZiB0aGUgdGFyZ2V0IHByZWZlcmVuY2VcbiAgICogQHJldHVybnMgT2JzZXJ2YWJsZSBvZiBkZWxldGUgb3BlcmF0aW9uIHN0YXR1c1xuICAgKi9cbiAgZGVsZXRlUHJlZmVyZW5jZShhcHBOYW1lOiBzdHJpbmcsIGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBpZiAoYXBwTmFtZSkge1xuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5nZXRCYXNlUGF0aChhcHBOYW1lKX0vcHJlZmVyZW5jZS92MS9wcmVmZXJlbmNlcy8ke2tleX1gO1xuICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlKHVybCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubG9nU2VydmljZS5lcnJvcignQXBwbmFtZSBhbmQga2V5IGFyZSBtYW5kYXRvcnkgdG8gZGVsZXRlIHByZWZlcmVuY2UnKTtcbiAgICAgIHJldHVybiB0aHJvd0Vycm9yKCdBcHBuYW1lIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuICB9XG59XG4iXX0=