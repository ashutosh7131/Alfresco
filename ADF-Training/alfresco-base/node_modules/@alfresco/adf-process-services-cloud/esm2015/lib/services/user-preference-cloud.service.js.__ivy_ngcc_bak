import { Injectable } from '@angular/core';
import { AlfrescoApiService, AppConfigService, LogService } from '@alfresco/adf-core';
import { throwError } from 'rxjs';
import { BaseCloudService } from './base-cloud.service';
import * as i0 from "@angular/core";
import * as i1 from "@alfresco/adf-core";
export class UserPreferenceCloudService extends BaseCloudService {
    constructor(apiService, appConfigService, logService) {
        super(apiService, appConfigService);
        this.logService = logService;
    }
    getPreferences(appName) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences`;
            return this.get(url);
        }
        else {
            this.logService.error('Appname is mandatory for querying preferences');
            return throwError('Appname not configured');
        }
    }
    getPreferenceByKey(appName, key) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences/${key}`;
            return this.get(url);
        }
        else {
            this.logService.error('Appname and key are mandatory for querying preference');
            return throwError('Appname not configured');
        }
    }
    createPreference(appName, key, newPreference) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences/${key}`;
            const payload = JSON.stringify(newPreference);
            return this.put(url, payload);
        }
        else {
            this.logService.error('Appname  and key are  mandatory for creating preference');
            return throwError('Appname not configured');
        }
    }
    updatePreference(appName, key, updatedPreference) {
        return this.createPreference(appName, key, updatedPreference);
    }
    deletePreference(appName, key) {
        if (appName) {
            const url = `${this.getBasePath(appName)}/preference/v1/preferences/${key}`;
            return this.delete(url);
        }
        else {
            this.logService.error('Appname and key are mandatory to delete preference');
            return throwError('Appname not configured');
        }
    }
}
UserPreferenceCloudService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UserPreferenceCloudService_Factory() { return new UserPreferenceCloudService(i0.ɵɵinject(i1.AlfrescoApiService), i0.ɵɵinject(i1.AppConfigService), i0.ɵɵinject(i1.LogService)); }, token: UserPreferenceCloudService, providedIn: "root" });
UserPreferenceCloudService.decorators = [
    { type: Injectable, args: [{ providedIn: 'root' },] }
];
UserPreferenceCloudService.ctorParameters = () => [
    { type: AlfrescoApiService },
    { type: AppConfigService },
    { type: LogService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1wcmVmZXJlbmNlLWNsb3VkLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvdHJhdmlzL2J1aWxkL0FsZnJlc2NvL2FsZnJlc2NvLW5nMi1jb21wb25lbnRzL2xpYi9wcm9jZXNzLXNlcnZpY2VzLWNsb3VkL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy91c2VyLXByZWZlcmVuY2UtY2xvdWQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQkEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsZ0JBQWdCLEVBQUUsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDdEYsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQzs7O0FBR3hELE1BQU0sT0FBTywwQkFBMkIsU0FBUSxnQkFBZ0I7SUFFOUQsWUFDRSxVQUE4QixFQUM5QixnQkFBa0MsRUFDMUIsVUFBc0I7UUFDOUIsS0FBSyxDQUFDLFVBQVUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1FBRDVCLGVBQVUsR0FBVixVQUFVLENBQVk7SUFFaEMsQ0FBQztJQU9ELGNBQWMsQ0FBQyxPQUFlO1FBQzVCLElBQUksT0FBTyxFQUFFO1lBQ1gsTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztZQUNyRSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDdEI7YUFBTTtZQUNMLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLCtDQUErQyxDQUFDLENBQUM7WUFDdkUsT0FBTyxVQUFVLENBQUMsd0JBQXdCLENBQUMsQ0FBQztTQUM3QztJQUNILENBQUM7SUFRRCxrQkFBa0IsQ0FBQyxPQUFlLEVBQUUsR0FBVztRQUM3QyxJQUFJLE9BQU8sRUFBRTtZQUNYLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsOEJBQThCLEdBQUcsRUFBRSxDQUFDO1lBQzVFLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN0QjthQUFNO1lBQ0wsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsdURBQXVELENBQUMsQ0FBQztZQUMvRSxPQUFPLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1NBQzdDO0lBQ0gsQ0FBQztJQVNELGdCQUFnQixDQUFDLE9BQWUsRUFBRSxHQUFXLEVBQUUsYUFBa0I7UUFDL0QsSUFBSSxPQUFPLEVBQUU7WUFDWCxNQUFNLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLDhCQUE4QixHQUFHLEVBQUUsQ0FBQztZQUM1RSxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRTlDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDL0I7YUFBTTtZQUNMLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLHlEQUF5RCxDQUFDLENBQUM7WUFDakYsT0FBTyxVQUFVLENBQUMsd0JBQXdCLENBQUMsQ0FBQztTQUM3QztJQUNILENBQUM7SUFTRCxnQkFBZ0IsQ0FBQyxPQUFlLEVBQUUsR0FBVyxFQUFFLGlCQUFzQjtRQUNuRSxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFDaEUsQ0FBQztJQVFELGdCQUFnQixDQUFDLE9BQWUsRUFBRSxHQUFXO1FBQzNDLElBQUksT0FBTyxFQUFFO1lBQ1gsTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsR0FBRyxFQUFFLENBQUM7WUFDNUUsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3pCO2FBQU07WUFDTCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxvREFBb0QsQ0FBQyxDQUFDO1lBQzVFLE9BQU8sVUFBVSxDQUFDLHdCQUF3QixDQUFDLENBQUM7U0FDN0M7SUFDSCxDQUFDOzs7O1lBckZGLFVBQVUsU0FBQyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUU7OztZQUp6QixrQkFBa0I7WUFBRSxnQkFBZ0I7WUFBRSxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUHJlZmVyZW5jZUNsb3VkU2VydmljZUludGVyZmFjZSB9IGZyb20gJy4vcHJlZmVyZW5jZS1jbG91ZC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgQWxmcmVzY29BcGlTZXJ2aWNlLCBBcHBDb25maWdTZXJ2aWNlLCBMb2dTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IHRocm93RXJyb3IsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEJhc2VDbG91ZFNlcnZpY2UgfSBmcm9tICcuL2Jhc2UtY2xvdWQuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKHsgcHJvdmlkZWRJbjogJ3Jvb3QnIH0pXG5leHBvcnQgY2xhc3MgVXNlclByZWZlcmVuY2VDbG91ZFNlcnZpY2UgZXh0ZW5kcyBCYXNlQ2xvdWRTZXJ2aWNlIGltcGxlbWVudHMgUHJlZmVyZW5jZUNsb3VkU2VydmljZUludGVyZmFjZSB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBpU2VydmljZTogQWxmcmVzY29BcGlTZXJ2aWNlLFxuICAgIGFwcENvbmZpZ1NlcnZpY2U6IEFwcENvbmZpZ1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBsb2dTZXJ2aWNlOiBMb2dTZXJ2aWNlKSB7XG4gICAgc3VwZXIoYXBpU2VydmljZSwgYXBwQ29uZmlnU2VydmljZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB1c2VyIHByZWZlcmVuY2VzXG4gICAqIEBwYXJhbSBhcHBOYW1lIE5hbWUgb2YgdGhlIHRhcmdldCBhcHBcbiAgICogQHJldHVybnMgTGlzdCBvZiB1c2VyIHByZWZlcmVuY2VzXG4gICAqL1xuICBnZXRQcmVmZXJlbmNlcyhhcHBOYW1lOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChhcHBOYW1lKSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXRoKGFwcE5hbWUpfS9wcmVmZXJlbmNlL3YxL3ByZWZlcmVuY2VzYDtcbiAgICAgIHJldHVybiB0aGlzLmdldCh1cmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoJ0FwcG5hbWUgaXMgbWFuZGF0b3J5IGZvciBxdWVyeWluZyBwcmVmZXJlbmNlcycpO1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoJ0FwcG5hbWUgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB1c2VyIHByZWZlcmVuY2UuXG4gICAqIEBwYXJhbSBhcHBOYW1lIE5hbWUgb2YgdGhlIHRhcmdldCBhcHBcbiAgICogQHBhcmFtIGtleSBLZXkgb2YgdGhlIHRhcmdldCBwcmVmZXJlbmNlXG4gICAqIEByZXR1cm5zIE9ic2VydmFibGUgb2YgdXNlciBwcmVmZXJlbmNlXG4gICAqL1xuICBnZXRQcmVmZXJlbmNlQnlLZXkoYXBwTmFtZTogc3RyaW5nLCBrZXk6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgaWYgKGFwcE5hbWUpIHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuZ2V0QmFzZVBhdGgoYXBwTmFtZSl9L3ByZWZlcmVuY2UvdjEvcHJlZmVyZW5jZXMvJHtrZXl9YDtcbiAgICAgIHJldHVybiB0aGlzLmdldCh1cmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoJ0FwcG5hbWUgYW5kIGtleSBhcmUgbWFuZGF0b3J5IGZvciBxdWVyeWluZyBwcmVmZXJlbmNlJyk7XG4gICAgICByZXR1cm4gdGhyb3dFcnJvcignQXBwbmFtZSBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHVzZXIgcHJlZmVyZW5jZS5cbiAgICogQHBhcmFtIGFwcE5hbWUgTmFtZSBvZiB0aGUgdGFyZ2V0IGFwcFxuICAgKiBAcGFyYW0ga2V5IEtleSBvZiB0aGUgdGFyZ2V0IHByZWZlcmVuY2VcbiAgICogQG5ld1ByZWZlcmVuY2UgRGV0YWlscyBvZiBuZXcgdXNlciBwcmVmZXJlbmNlXG4gICAqIEByZXR1cm5zIE9ic2VydmFibGUgb2YgY3JlYXRlZCB1c2VyIHByZWZlcmVuY2VzXG4gICAqL1xuICBjcmVhdGVQcmVmZXJlbmNlKGFwcE5hbWU6IHN0cmluZywga2V5OiBzdHJpbmcsIG5ld1ByZWZlcmVuY2U6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgaWYgKGFwcE5hbWUpIHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuZ2V0QmFzZVBhdGgoYXBwTmFtZSl9L3ByZWZlcmVuY2UvdjEvcHJlZmVyZW5jZXMvJHtrZXl9YDtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShuZXdQcmVmZXJlbmNlKTtcblxuICAgICAgcmV0dXJuIHRoaXMucHV0KHVybCwgcGF5bG9hZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubG9nU2VydmljZS5lcnJvcignQXBwbmFtZSAgYW5kIGtleSBhcmUgIG1hbmRhdG9yeSBmb3IgY3JlYXRpbmcgcHJlZmVyZW5jZScpO1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoJ0FwcG5hbWUgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB1c2VyIHByZWZlcmVuY2UuXG4gICAqIEBwYXJhbSBhcHBOYW1lIE5hbWUgb2YgdGhlIHRhcmdldCBhcHBcbiAgICogQHBhcmFtIGtleSBLZXkgb2YgdGhlIHRhcmdldCBwcmVmZXJlbmNlXG4gICAqIEBwYXJhbSB1cGRhdGVkUHJlZmVyZW5jZSBEZXRhaWxzIG9mIHVwZGF0ZWQgcHJlZmVyZW5jZVxuICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlIG9mIHVwZGF0ZWQgdXNlciBwcmVmZXJlbmNlc1xuICAgKi9cbiAgdXBkYXRlUHJlZmVyZW5jZShhcHBOYW1lOiBzdHJpbmcsIGtleTogc3RyaW5nLCB1cGRhdGVkUHJlZmVyZW5jZTogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVQcmVmZXJlbmNlKGFwcE5hbWUsIGtleSwgdXBkYXRlZFByZWZlcmVuY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdXNlciBwcmVmZXJlbmNlIGJ5IGdpdmVuIHByZWZlcmVuY2Uga2V5LlxuICAgKiBAcGFyYW0gYXBwTmFtZSBOYW1lIG9mIHRoZSB0YXJnZXQgYXBwXG4gICAqIEBwYXJhbSBrZXkgS2V5IG9mIHRoZSB0YXJnZXQgcHJlZmVyZW5jZVxuICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlIG9mIGRlbGV0ZSBvcGVyYXRpb24gc3RhdHVzXG4gICAqL1xuICBkZWxldGVQcmVmZXJlbmNlKGFwcE5hbWU6IHN0cmluZywga2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChhcHBOYW1lKSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXRoKGFwcE5hbWUpfS9wcmVmZXJlbmNlL3YxL3ByZWZlcmVuY2VzLyR7a2V5fWA7XG4gICAgICByZXR1cm4gdGhpcy5kZWxldGUodXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2dTZXJ2aWNlLmVycm9yKCdBcHBuYW1lIGFuZCBrZXkgYXJlIG1hbmRhdG9yeSB0byBkZWxldGUgcHJlZmVyZW5jZScpO1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoJ0FwcG5hbWUgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==