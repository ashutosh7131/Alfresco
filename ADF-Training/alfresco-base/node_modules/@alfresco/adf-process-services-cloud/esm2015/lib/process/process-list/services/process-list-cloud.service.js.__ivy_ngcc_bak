import { Injectable } from '@angular/core';
import { AlfrescoApiService, AppConfigService, LogService } from '@alfresco/adf-core';
import { throwError } from 'rxjs';
import { BaseCloudService } from '../../../services/base-cloud.service';
import { map } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@alfresco/adf-core";
export class ProcessListCloudService extends BaseCloudService {
    constructor(apiService, appConfigService, logService) {
        super(apiService, appConfigService);
        this.logService = logService;
    }
    getProcessByRequest(requestNode, queryUrl) {
        if (requestNode.appName || requestNode.appName === '') {
            queryUrl = queryUrl || `${this.getBasePath(requestNode.appName)}/query/v1/process-instances`;
            const queryParams = this.buildQueryParams(requestNode);
            const sortingParams = this.buildSortingParam(requestNode.sorting);
            if (sortingParams) {
                queryParams['sort'] = sortingParams;
            }
            return this.get(queryUrl, queryParams).pipe(map((response) => {
                const entries = response.list && response.list.entries;
                if (entries) {
                    response.list.entries = entries.map((entryData) => {
                        return entryData.entry;
                    });
                }
                return response;
            }));
        }
        else {
            this.logService.error('Appname is mandatory for querying task');
            return throwError('Appname not configured');
        }
    }
    isPropertyValueValid(requestNode, property) {
        return requestNode[property] !== '' && requestNode[property] !== null && requestNode[property] !== undefined;
    }
    buildQueryParams(requestNode) {
        const queryParam = {};
        for (const property in requestNode) {
            if (requestNode.hasOwnProperty(property) &&
                !this.isExcludedField(property) &&
                this.isPropertyValueValid(requestNode, property)) {
                queryParam[property] = requestNode[property];
            }
        }
        if (!queryParam['status']) {
            queryParam['status'] = this.buildFilterForAllStatus();
        }
        return queryParam;
    }
    buildFilterForAllStatus() {
        return ['RUNNING', 'SUSPENDED', 'CANCELLED', 'COMPLETED'];
    }
    isExcludedField(property) {
        return property === 'appName' || property === 'sorting';
    }
    buildSortingParam(models) {
        let finalSorting = '';
        if (models) {
            for (const sort of models) {
                if (!finalSorting) {
                    finalSorting = `${sort.orderBy},${sort.direction}`;
                }
                else {
                    finalSorting = `${finalSorting}&${sort.orderBy},${sort.direction}`;
                }
            }
        }
        return encodeURI(finalSorting);
    }
}
ProcessListCloudService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ProcessListCloudService_Factory() { return new ProcessListCloudService(i0.ɵɵinject(i1.AlfrescoApiService), i0.ɵɵinject(i1.AppConfigService), i0.ɵɵinject(i1.LogService)); }, token: ProcessListCloudService, providedIn: "root" });
ProcessListCloudService.decorators = [
    { type: Injectable, args: [{ providedIn: 'root' },] }
];
ProcessListCloudService.ctorParameters = () => [
    { type: AlfrescoApiService },
    { type: AppConfigService },
    { type: LogService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzcy1saXN0LWNsb3VkLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvdHJhdmlzL2J1aWxkL0FsZnJlc2NvL2FsZnJlc2NvLW5nMi1jb21wb25lbnRzL2xpYi9wcm9jZXNzLXNlcnZpY2VzLWNsb3VkL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9wcm9jZXNzL3Byb2Nlc3MtbGlzdC9zZXJ2aWNlcy9wcm9jZXNzLWxpc3QtY2xvdWQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnQkEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsZ0JBQWdCLEVBQUUsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFdEYsT0FBTyxFQUFjLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUU5QyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUN4RSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7OztBQUdyQyxNQUFNLE9BQU8sdUJBQXdCLFNBQVEsZ0JBQWdCO0lBRXpELFlBQVksVUFBOEIsRUFDOUIsZ0JBQWtDLEVBQzFCLFVBQXNCO1FBQ3RDLEtBQUssQ0FBQyxVQUFVLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQURwQixlQUFVLEdBQVYsVUFBVSxDQUFZO0lBRTFDLENBQUM7SUFRRCxtQkFBbUIsQ0FBQyxXQUEwQyxFQUFFLFFBQWlCO1FBQzdFLElBQUksV0FBVyxDQUFDLE9BQU8sSUFBSSxXQUFXLENBQUMsT0FBTyxLQUFLLEVBQUUsRUFBRTtZQUNuRCxRQUFRLEdBQUcsUUFBUSxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLDZCQUE2QixDQUFDO1lBQzdGLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUN2RCxNQUFNLGFBQWEs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QVUiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWxmcmVzY29BcGlTZXJ2aWNlLCBBcHBDb25maWdTZXJ2aWNlLCBMb2dTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IFByb2Nlc3NRdWVyeUNsb3VkUmVxdWVzdE1vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2Nlc3MtY2xvdWQtcXVlcnktcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBQcm9jZXNzTGlzdENsb3VkU29ydGluZ01vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2Nlc3MtbGlzdC1zb3J0aW5nLm1vZGVsJztcbmltcG9ydCB7IEJhc2VDbG91ZFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9iYXNlLWNsb3VkLnNlcnZpY2UnO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuZXhwb3J0IGNsYXNzIFByb2Nlc3NMaXN0Q2xvdWRTZXJ2aWNlIGV4dGVuZHMgQmFzZUNsb3VkU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihhcGlTZXJ2aWNlOiBBbGZyZXNjb0FwaVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgYXBwQ29uZmlnU2VydmljZTogQXBwQ29uZmlnU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGxvZ1NlcnZpY2U6IExvZ1NlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoYXBpU2VydmljZSwgYXBwQ29uZmlnU2VydmljZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYSBwcm9jZXNzIHVzaW5nIGFuIG9iamVjdCB3aXRoIG9wdGlvbmFsIHF1ZXJ5IHByb3BlcnRpZXMuXG4gICAgICogQHBhcmFtIHJlcXVlc3ROb2RlIFF1ZXJ5IG9iamVjdFxuICAgICAqIEBwYXJhbSBxdWVyeVVybCBRdWVyeSB1cmxcbiAgICAgKiBAcmV0dXJucyBQcm9jZXNzIGluZm9ybWF0aW9uXG4gICAgICovXG4gICAgZ2V0UHJvY2Vzc0J5UmVxdWVzdChyZXF1ZXN0Tm9kZTogUHJvY2Vzc1F1ZXJ5Q2xvdWRSZXF1ZXN0TW9kZWwsIHF1ZXJ5VXJsPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHJlcXVlc3ROb2RlLmFwcE5hbWUgfHwgcmVxdWVzdE5vZGUuYXBwTmFtZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHF1ZXJ5VXJsID0gcXVlcnlVcmwgfHwgYCR7dGhpcy5nZXRCYXNlUGF0aChyZXF1ZXN0Tm9kZS5hcHBOYW1lKX0vcXVlcnkvdjEvcHJvY2Vzcy1pbnN0YW5jZXNgO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB0aGlzLmJ1aWxkUXVlcnlQYXJhbXMocmVxdWVzdE5vZGUpO1xuICAgICAgICAgICAgY29uc3Qgc29ydGluZ1BhcmFtcyA9IHRoaXMuYnVpbGRTb3J0aW5nUGFyYW0ocmVxdWVzdE5vZGUuc29ydGluZyk7XG4gICAgICAgICAgICBpZiAoc29ydGluZ1BhcmFtcykge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zWydzb3J0J10gPSBzb3J0aW5nUGFyYW1zO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQocXVlcnlVcmwsIHF1ZXJ5UGFyYW1zKS5waXBlKFxuICAgICAgICAgICAgICAgIG1hcCgocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzID0gcmVzcG9uc2UubGlzdCAmJiByZXNwb25zZS5saXN0LmVudHJpZXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5saXN0LmVudHJpZXMgPSBlbnRyaWVzLm1hcCgoZW50cnlEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5RGF0YS5lbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nU2VydmljZS5lcnJvcignQXBwbmFtZSBpcyBtYW5kYXRvcnkgZm9yIHF1ZXJ5aW5nIHRhc2snKTtcbiAgICAgICAgICAgIHJldHVybiB0aHJvd0Vycm9yKCdBcHBuYW1lIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaXNQcm9wZXJ0eVZhbHVlVmFsaWQocmVxdWVzdE5vZGU6IGFueSwgcHJvcGVydHk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gcmVxdWVzdE5vZGVbcHJvcGVydHldICE9PSAnJyAmJiByZXF1ZXN0Tm9kZVtwcm9wZXJ0eV0gIT09IG51bGwgJiYgcmVxdWVzdE5vZGVbcHJvcGVydHldICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGJ1aWxkUXVlcnlQYXJhbXMocmVxdWVzdE5vZGU6IFByb2Nlc3NRdWVyeUNsb3VkUmVxdWVzdE1vZGVsKTogT2JqZWN0IHtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbSA9IHt9O1xuXG4gICAgICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gcmVxdWVzdE5vZGUpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Tm9kZS5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0V4Y2x1ZGVkRmllbGQocHJvcGVydHkpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3BlcnR5VmFsdWVWYWxpZChyZXF1ZXN0Tm9kZSwgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbVtwcm9wZXJ0eV0gPSByZXF1ZXN0Tm9kZVtwcm9wZXJ0eV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXF1ZXJ5UGFyYW1bJ3N0YXR1cyddKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtWydzdGF0dXMnXSA9IHRoaXMuYnVpbGRGaWx0ZXJGb3JBbGxTdGF0dXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBxdWVyeVBhcmFtO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBidWlsZEZpbHRlckZvckFsbFN0YXR1cygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBbJ1JVTk5JTkcnLCAnU1VTUEVOREVEJywgJ0NBTkNFTExFRCcsICdDT01QTEVURUQnXTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaXNFeGNsdWRlZEZpZWxkKHByb3BlcnR5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnR5ID09PSAnYXBwTmFtZScgfHwgcHJvcGVydHkgPT09ICdzb3J0aW5nJztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYnVpbGRTb3J0aW5nUGFyYW0obW9kZWxzOiBQcm9jZXNzTGlzdENsb3VkU29ydGluZ01vZGVsW10pOiBzdHJpbmcge1xuICAgICAgICBsZXQgZmluYWxTb3J0aW5nOiBzdHJpbmcgPSAnJztcbiAgICAgICAgaWYgKG1vZGVscykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzb3J0IG9mIG1vZGVscykge1xuICAgICAgICAgICAgICAgIGlmICghZmluYWxTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsU29ydGluZyA9IGAke3NvcnQub3JkZXJCeX0sJHtzb3J0LmRpcmVjdGlvbn1gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsU29ydGluZyA9IGAke2ZpbmFsU29ydGluZ30mJHtzb3J0Lm9yZGVyQnl9LCR7c29ydC5kaXJlY3Rpb259YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSShmaW5hbFNvcnRpbmcpO1xuICAgIH1cbn1cbiJdfQ==