import { AlfrescoApiService, AppConfigService, LogService } from '@alfresco/adf-core';
import { Injectable } from '@angular/core';
import { throwError } from 'rxjs';
import { map } from 'rxjs/operators';
import { ProcessDefinitionCloud } from '../../../models/process-definition-cloud.model';
import { BaseCloudService } from '../../../services/base-cloud.service';
import * as i0 from "@angular/core";
import * as i1 from "@alfresco/adf-core";
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@alfresco/adf-core';
export class StartProcessCloudService extends BaseCloudService {
    constructor(apiService, logService, appConfigService) {
        super(apiService, appConfigService);
        this.logService = logService;
    }
    getProcessDefinitions(appName) {
        if (appName || appName === '') {
            const url = `${this.getBasePath(appName)}/rb/v1/process-definitions`;
            return this.get(url).pipe(map((res) => {
                return res.list.entries.map((processDefs) => new ProcessDefinitionCloud(processDefs.entry));
            }));
        }
        else {
            this.logService.error('AppName is mandatory for querying task');
            return throwError('AppName not configured');
        }
    }
    createProcess(appName, payload) {
        const url = `${this.getBasePath(appName)}/rb/v1/process-instances/create`;
        payload.payloadType = 'CreateProcessInstancePayload';
        return this.post(url, payload).pipe(map((result) => result.entry));
    }
    startCreatedProcess(appName, createdProcessInstanceId, payload) {
        const url = `${this.getBasePath(appName)}/rb/v1/process-instances/${createdProcessInstanceId}/start`;
        return this.post(url, payload).pipe(map((result) => result.entry));
    }
    startProcess(appName, payload) {
        const url = `${this.getBasePath(appName)}/rb/v1/process-instances`;
        payload.payloadType = 'StartProcessPayload';
        return this.post(url, payload);
    }
    updateProcess(appName, processInstanceId, payload) {
        const url = `${this.getBasePath(appName)}/rb/v1/process-instances/${processInstanceId}`;
        payload.payloadType = 'UpdateProcessPayload';
        return this.put(url, payload).pipe(map((processInstance) => processInstance.entry));
    }
    deleteProcess(appName, processInstanceId) {
        const url = `${this.getBasePath(appName)}/rb/v1/process-instances/${processInstanceId}`;
        return this.delete(url);
    }
}
StartProcessCloudService.ɵfac = function StartProcessCloudService_Factory(t) { return new (t || StartProcessCloudService)(ɵngcc0.ɵɵinject(ɵngcc1.AlfrescoApiService), ɵngcc0.ɵɵinject(ɵngcc1.LogService), ɵngcc0.ɵɵinject(ɵngcc1.AppConfigService)); };
StartProcessCloudService.ɵprov = i0.ɵɵdefineInjectable({ factory: function StartProcessCloudService_Factory() { return new StartProcessCloudService(i0.ɵɵinject(i1.AlfrescoApiService), i0.ɵɵinject(i1.LogService), i0.ɵɵinject(i1.AppConfigService)); }, token: StartProcessCloudService, providedIn: "root" });
StartProcessCloudService.ctorParameters = () => [
    { type: AlfrescoApiService },
    { type: LogService },
    { type: AppConfigService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StartProcessCloudService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: ɵngcc1.AlfrescoApiService }, { type: ɵngcc1.LogService }, { type: ɵngcc1.AppConfigService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnQtcHJvY2Vzcy1jbG91ZC5zZXJ2aWNlLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ob21lL3RyYXZpcy9idWlsZC9BbGZyZXNjby9hbGZyZXNjby1uZzItY29tcG9uZW50cy9saWIvcHJvY2Vzcy1zZXJ2aWNlcy1jbG91ZC9zcmMvbGliL3Byb2Nlc3Mvc3RhcnQtcHJvY2Vzcy9zZXJ2aWNlcy9zdGFydC1wcm9jZXNzLWNsb3VkLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBaUJBLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUN0RixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBYyxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDOUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBR3JDLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQ3hGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3hFO0FBRXNCOzs7QUFFdEIsTUFBTSxPQUFPLHdCQUF5QixTQUFRLGdCQUFnQjtBQUM5RCxJQUNJLFlBQVksVUFBOEIsRUFDdEIsVUFBc0IsRUFDOUIsZ0JBQWtDO0FBQ2xELFFBQVEsS0FBSyxDQUFDLFVBQVUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVDLFFBSHdCLGVBQVUsR0FBVixVQUFVLENBQVk7QUFBQyxJQUczQyxDQUFDO0FBQ0wsSUFNSSxxQkFBcUIsQ0FBQyxPQUFlO0FBQUksUUFDckMsSUFBSSxPQUFPLElBQUksT0FBTyxLQUFLLEVBQUUsRUFBRTtBQUN2QyxZQUFZLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsNEJBQTRCLENBQUM7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QWtCO0tBVXZCLFVBQVUsRUFBRSxNQUFNLHZCQVZTLFlBQWdCLFVBQVU7V0FXeEQsWEFYNEQsWUFBaEMsZ0JBQWdCO0FBQUc7Ozs7OzttSkFBRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQWxmcmVzY29BcGlTZXJ2aWNlLCBBcHBDb25maWdTZXJ2aWNlLCBMb2dTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFByb2Nlc3NJbnN0YW5jZUNsb3VkIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2Nlc3MtaW5zdGFuY2UtY2xvdWQubW9kZWwnO1xuaW1wb3J0IHsgUHJvY2Vzc1BheWxvYWRDbG91ZCB9IGZyb20gJy4uL21vZGVscy9wcm9jZXNzLXBheWxvYWQtY2xvdWQubW9kZWwnO1xuaW1wb3J0IHsgUHJvY2Vzc0RlZmluaXRpb25DbG91ZCB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9wcm9jZXNzLWRlZmluaXRpb24tY2xvdWQubW9kZWwnO1xuaW1wb3J0IHsgQmFzZUNsb3VkU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL2Jhc2UtY2xvdWQuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgU3RhcnRQcm9jZXNzQ2xvdWRTZXJ2aWNlIGV4dGVuZHMgQmFzZUNsb3VkU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihhcGlTZXJ2aWNlOiBBbGZyZXNjb0FwaVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBsb2dTZXJ2aWNlOiBMb2dTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIGFwcENvbmZpZ1NlcnZpY2U6IEFwcENvbmZpZ1NlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoYXBpU2VydmljZSwgYXBwQ29uZmlnU2VydmljZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcHJvY2VzcyBkZWZpbml0aW9ucyBhc3NvY2lhdGVkIHdpdGggYW4gYXBwLlxuICAgICAqIEBwYXJhbSBhcHBOYW1lIE5hbWUgb2YgdGhlIHRhcmdldCBhcHBcbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBwcm9jZXNzIGRlZmluaXRpb25zXG4gICAgICovXG4gICAgZ2V0UHJvY2Vzc0RlZmluaXRpb25zKGFwcE5hbWU6IHN0cmluZyk6IE9ic2VydmFibGU8UHJvY2Vzc0RlZmluaXRpb25DbG91ZFtdPiB7XG4gICAgICAgIGlmIChhcHBOYW1lIHx8IGFwcE5hbWUgPT09ICcnKSB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXRoKGFwcE5hbWUpfS9yYi92MS9wcm9jZXNzLWRlZmluaXRpb25zYDtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHVybCkucGlwZShcbiAgICAgICAgICAgICAgICBtYXAoKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMubGlzdC5lbnRyaWVzLm1hcCgocHJvY2Vzc0RlZnMpID0+IG5ldyBQcm9jZXNzRGVmaW5pdGlvbkNsb3VkKHByb2Nlc3NEZWZzLmVudHJ5KSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoJ0FwcE5hbWUgaXMgbWFuZGF0b3J5IGZvciBxdWVyeWluZyB0YXNrJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhyb3dFcnJvcignQXBwTmFtZSBub3QgY29uZmlndXJlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgcHJvY2VzcyBiYXNlZCBvbiBhIHByb2Nlc3MgZGVmaW5pdGlvbiwgbmFtZSwgZm9ybSB2YWx1ZXMgb3IgdmFyaWFibGVzLlxuICAgICAqIEBwYXJhbSBhcHBOYW1lIG5hbWUgb2YgdGhlIEFwcGxpY2F0aW9uXG4gICAgICogQHBhcmFtIHBheWxvYWQgRGV0YWlscyBvZiB0aGUgcHJvY2VzcyAoZGVmaW5pdGlvbiBrZXksIG5hbWUsIHZhcmlhYmxlcywgZXRjKVxuICAgICAqIEByZXR1cm5zIERldGFpbHMgb2YgdGhlIHByb2Nlc3MgaW5zdGFuY2UganVzdCBjcmVhdGVkXG4gICAgICovXG4gICAgY3JlYXRlUHJvY2VzcyhhcHBOYW1lOiBzdHJpbmcsIHBheWxvYWQ6IFByb2Nlc3NQYXlsb2FkQ2xvdWQpOiBPYnNlcnZhYmxlPFByb2Nlc3NJbnN0YW5jZUNsb3VkPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuZ2V0QmFzZVBhdGgoYXBwTmFtZSl9L3JiL3YxL3Byb2Nlc3MtaW5zdGFuY2VzL2NyZWF0ZWA7XG4gICAgICAgIHBheWxvYWQucGF5bG9hZFR5cGUgPSAnQ3JlYXRlUHJvY2Vzc0luc3RhbmNlUGF5bG9hZCc7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdCh1cmwsIHBheWxvYWQpLnBpcGUoXG4gICAgICAgICAgICBtYXAoKHJlc3VsdDogYW55KSA9PiByZXN1bHQuZW50cnkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnRzIGFuIGFscmVhZHkgY3JlYXRlZCBwcm9jZXNzIHVzaW5nIHRoZSBwcm9jZXNzIGluc3RhbmNlIGlkLlxuICAgICAqIEBwYXJhbSBjcmVhdGVkUHJvY2Vzc0luc3RhbmNlSWQgcHJvY2VzcyBpbnN0YW5jZSBpZCBvZiB0aGUgcHJvY2VzcyBwcmV2aW91c2x5IGNyZWF0ZWRcbiAgICAgKiBAcmV0dXJucyBEZXRhaWxzIG9mIHRoZSBwcm9jZXNzIGluc3RhbmNlIGp1c3Qgc3RhcnRlZFxuICAgICAqL1xuICAgIHN0YXJ0Q3JlYXRlZFByb2Nlc3MoYXBwTmFtZTogc3RyaW5nLCBjcmVhdGVkUHJvY2Vzc0luc3RhbmNlSWQ6IHN0cmluZywgcGF5bG9hZDogUHJvY2Vzc1BheWxvYWRDbG91ZCk6IE9ic2VydmFibGU8UHJvY2Vzc0luc3RhbmNlQ2xvdWQ+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5nZXRCYXNlUGF0aChhcHBOYW1lKX0vcmIvdjEvcHJvY2Vzcy1pbnN0YW5jZXMvJHtjcmVhdGVkUHJvY2Vzc0luc3RhbmNlSWR9L3N0YXJ0YDtcblxuICAgICAgICByZXR1cm4gdGhpcy5wb3N0KHVybCwgcGF5bG9hZCkucGlwZShcbiAgICAgICAgICAgIG1hcCgocmVzdWx0OiBhbnkpID0+IHJlc3VsdC5lbnRyeSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgYSBwcm9jZXNzIGJhc2VkIG9uIGEgcHJvY2VzcyBkZWZpbml0aW9uLCBuYW1lLCBmb3JtIHZhbHVlcyBvciB2YXJpYWJsZXMuXG4gICAgICogQHBhcmFtIGFwcE5hbWUgbmFtZSBvZiB0aGUgQXBwbGljYXRpb25cbiAgICAgKiBAcGFyYW0gcGF5bG9hZCBEZXRhaWxzIG9mIHRoZSBwcm9jZXNzIChkZWZpbml0aW9uIGtleSwgbmFtZSwgdmFyaWFibGVzLCBldGMpXG4gICAgICogQHJldHVybnMgRGV0YWlscyBvZiB0aGUgcHJvY2VzcyBpbnN0YW5jZSBqdXN0IHN0YXJ0ZWRcbiAgICAgKi9cbiAgICBzdGFydFByb2Nlc3MoYXBwTmFtZTogc3RyaW5nLCBwYXlsb2FkOiBQcm9jZXNzUGF5bG9hZENsb3VkKTogT2JzZXJ2YWJsZTxQcm9jZXNzSW5zdGFuY2VDbG91ZD4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXRoKGFwcE5hbWUpfS9yYi92MS9wcm9jZXNzLWluc3RhbmNlc2A7XG4gICAgICAgIHBheWxvYWQucGF5bG9hZFR5cGUgPSAnU3RhcnRQcm9jZXNzUGF5bG9hZCc7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdCh1cmwsIHBheWxvYWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbiBleGlzdGluZyBwcm9jZXNzIGluc3RhbmNlXG4gICAgICogQHBhcmFtIGFwcE5hbWUgbmFtZSBvZiB0aGUgQXBwbGljYXRpb25cbiAgICAgKiBAcGFyYW0gcHJvY2Vzc0luc3RhbmNlSWQgcHJvY2VzcyBpbnN0YW5jZSB0byB1cGRhdGVcbiAgICAgKiBAcGFyYW0gcGF5bG9hZCBEZXRhaWxzIG9mIHRoZSBwcm9jZXNzIChkZWZpbml0aW9uIGtleSwgbmFtZSwgdmFyaWFibGVzLCBldGMpXG4gICAgICogQHJldHVybnMgRGV0YWlscyBvZiB0aGUgcHJvY2VzcyBpbnN0YW5jZSBqdXN0IHN0YXJ0ZWRcbiAgICAgKi9cbiAgICB1cGRhdGVQcm9jZXNzKGFwcE5hbWU6IHN0cmluZywgcHJvY2Vzc0luc3RhbmNlSWQ6IHN0cmluZywgcGF5bG9hZDogUHJvY2Vzc1BheWxvYWRDbG91ZCk6IE9ic2VydmFibGU8UHJvY2Vzc0luc3RhbmNlQ2xvdWQ+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5nZXRCYXNlUGF0aChhcHBOYW1lKX0vcmIvdjEvcHJvY2Vzcy1pbnN0YW5jZXMvJHtwcm9jZXNzSW5zdGFuY2VJZH1gO1xuICAgICAgICBwYXlsb2FkLnBheWxvYWRUeXBlID0gJ1VwZGF0ZVByb2Nlc3NQYXlsb2FkJztcblxuICAgICAgICByZXR1cm4gdGhpcy5wdXQodXJsLCBwYXlsb2FkKS5waXBlKFxuICAgICAgICAgICAgbWFwKChwcm9jZXNzSW5zdGFuY2U6IGFueSkgPT4gcHJvY2Vzc0luc3RhbmNlLmVudHJ5KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhbiBleGlzdGluZyBwcm9jZXNzIGluc3RhbmNlXG4gICAgICogQHBhcmFtIGFwcE5hbWUgbmFtZSBvZiB0aGUgQXBwbGljYXRpb25cbiAgICAgKiBAcGFyYW0gcHJvY2Vzc0luc3RhbmNlSWQgcHJvY2VzcyBpbnN0YW5jZSB0byB1cGRhdGVcbiAgICAgKi9cbiAgICBkZWxldGVQcm9jZXNzKGFwcE5hbWU6IHN0cmluZywgcHJvY2Vzc0luc3RhbmNlSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8dm9pZD4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXRoKGFwcE5hbWUpfS9yYi92MS9wcm9jZXNzLWluc3RhbmNlcy8ke3Byb2Nlc3NJbnN0YW5jZUlkfWA7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlKHVybCk7XG4gICAgfVxufVxuIl19