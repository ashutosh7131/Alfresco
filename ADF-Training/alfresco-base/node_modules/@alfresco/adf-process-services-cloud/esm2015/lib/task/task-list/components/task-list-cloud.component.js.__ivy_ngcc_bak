/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Component, ViewEncapsulation, Input } from '@angular/core';
import { AppConfigService, UserPreferencesService } from '@alfresco/adf-core';
import { TaskQueryCloudRequestModel } from '../models/filter-cloud-model';
import { TaskListCloudService } from '../services/task-list-cloud.service';
import { BaseTaskListCloudComponent } from './base-task-list-cloud.component';
import { TaskCloudService } from '../../services/task-cloud.service';
export class TaskListCloudComponent extends BaseTaskListCloudComponent {
    constructor(taskListCloudService, appConfigService, taskCloudService, userPreferences) {
        super(appConfigService, taskCloudService, userPreferences, TaskListCloudComponent.PRESET_KEY);
        this.taskListCloudService = taskListCloudService;
        this.assignee = '';
        this.createdFrom = '';
        this.createdTo = '';
        this.lastModifiedFrom = '';
        this.lastModifiedTo = '';
        this.dueDateFrom = '';
        this.dueDateTo = '';
        this.id = '';
        this.name = '';
        this.parentTaskId = '';
        this.processDefinitionName = '';
        this.processDefinitionId = '';
        this.processInstanceId = '';
        this.status = '';
        this.owner = '';
        this.standalone = false;
        this.completedDate = '';
        this.completedFrom = '';
        this.completedTo = '';
        this.candidateGroupId = '';
    }
    load(requestNode) {
        this.isLoading = true;
        this.taskListCloudService.getTaskByRequest(requestNode).subscribe((tasks) => {
            this.rows = tasks.list.entries;
            this.success.emit(tasks);
            this.isLoading = false;
            this.pagination.next(tasks.list.pagination);
        }, (error) => {
            this.error.emit(error);
            this.isLoading = false;
        });
    }
    createRequestNode() {
        const requestNode = {
            appName: this.appName,
            assignee: this.assignee,
            id: this.id,
            name: this.name,
            parentTaskId: this.parentTaskId,
            processDefinitionName: this.processDefinitionName,
            processDefinitionId: this.processDefinitionId,
            processInstanceId: this.processInstanceId,
            owner: this.owner,
            priority: this.priority,
            lastModifiedFrom: this.lastModifiedFrom,
            lastModifiedTo: this.lastModifiedTo,
            dueDateFrom: this.dueDateFrom,
            dueDateTo: this.dueDateTo,
            status: this.status,
            dueDate: this.dueDate,
            createdDate: this.createdDate,
            createdFrom: this.createdFrom,
            createdTo: this.createdTo,
            maxItems: this.size,
            skipCount: this.skipCount,
            sorting: this.sorting,
            standalone: this.standalone,
            completedBy: this.completedBy,
            completedFrom: this.completedFrom,
            completedTo: this.completedTo,
            completedDate: this.completedDate,
            candidateGroupId: this.candidateGroupId
        };
        return new TaskQueryCloudRequestModel(requestNode);
    }
}
TaskListCloudComponent.PRESET_KEY = 'adf-cloud-task-list.presets';
TaskListCloudComponent.decorators = [
    { type: Component, args: [{
                selector: 'adf-cloud-task-list',
                template: "<div *ngIf=\"!rows\">{{ 'ADF_CLOUD_TASK_LIST.FILTERS.MESSAGES.NONE' | translate }}</div>\n<ng-container *ngIf=\"rows\">\n        <adf-datatable\n            [rows]=\"rows\"\n            [columns]=\"columns\"\n            [loading]=\"isLoading\"\n            [sorting]=\"formattedSorting\"\n            [multiselect]=\"multiselect\"\n            [selectionMode]=\"selectionMode\"\n            [stickyHeader]=\"stickyHeader\"\n            [actions]=\"showActions\"\n            [actionsPosition]=\"actionsPosition\"\n            [contextMenu]=\"showContextMenu\"\n            [resolverFn]=\"boundReplacePriorityValues\"\n            (showRowActionsMenu)=\"onShowRowActionsMenu($event)\"\n            (showRowContextMenu)=\"onShowRowContextMenu($event)\"\n            (executeRowAction)=\"onExecuteRowAction($event)\"\n            (row-select)=\"onRowSelect($any($event))\"\n            (row-unselect)=\"onRowUnselect($any($event))\"\n            (rowClick)=\"onRowClick($any($event))\"\n            (row-keyup)=\"onRowKeyUp($any($event))\"\n            (sorting-changed)=\"onSortingChanged($any($event))\">\n            <adf-loading-content-template>\n                <ng-template>\n                    <!-- Add your custom loading template here -->\n                    <mat-progress-spinner class=\"adf-cloud-task-list-loading-margin\"\n                                          [color]=\"'primary'\"\n                                          [mode]=\"'indeterminate'\">\n                    </mat-progress-spinner>\n                </ng-template>\n            </adf-loading-content-template>\n            <adf-no-content-template>\n                <ng-template>\n                    <adf-empty-content *ngIf=\"!emptyCustomContent\"\n                                       icon=\"assignment\"\n                                       [title]=\"'ADF_CLOUD_TASK_LIST.LIST.MESSAGES.TITLE' | translate\"\n                                       [subtitle]=\"'ADF_CLOUD_TASK_LIST.LIST.MESSAGES.SUBTITLE' | translate\">\n                    </adf-empty-content>\n                    <ng-content select=\"adf-custom-empty-content-template\"></ng-content>\n                </ng-template>\n            </adf-no-content-template>\n        </adf-datatable>\n</ng-container>\n",
                encapsulation: ViewEncapsulation.None,
                styles: [".adf-cloud-task-list-loading-margin{margin-left:calc(50% - 50px);margin-right:calc(50% - 50px)}"]
            },] }
];
TaskListCloudComponent.ctorParameters = () => [
    { type: TaskListCloudService },
    { type: AppConfigService },
    { type: TaskCloudService },
    { type: UserPreferencesService }
];
TaskListCloudComponent.propDecorators = {
    assignee: [{ type: Input }],
    createdDate: [{ type: Input }],
    createdFrom: [{ type: Input }],
    createdTo: [{ type: Input }],
    dueDate: [{ type: Input }],
    lastModifiedFrom: [{ type: Input }],
    lastModifiedTo: [{ type: Input }],
    dueDateFrom: [{ type: Input }],
    dueDateTo: [{ type: Input }],
    id: [{ type: Input }],
    name: [{ type: Input }],
    parentTaskId: [{ type: Input }],
    processDefinitionName: [{ type: Input }],
    processDefinitionId: [{ type: Input }],
    processInstanceId: [{ type: Input }],
    status: [{ type: Input }],
    owner: [{ type: Input }],
    priority: [{ type: Input }],
    completedBy: [{ type: Input }],
    standalone: [{ type: Input }],
    completedDate: [{ type: Input }],
    completedFrom: [{ type: Input }],
    completedTo: [{ type: Input }],
    candidateGroupId: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1saXN0LWNsb3VkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS90cmF2aXMvYnVpbGQvQWxmcmVzY28vYWxmcmVzY28tbmcyLWNvbXBvbmVudHMvbGliL3Byb2Nlc3Mtc2VydmljZXMtY2xvdWQvc3JjLyIsInNvdXJjZXMiOlsibGliL3Rhc2svdGFzay1saXN0L2NvbXBvbmVudHMvdGFzay1saXN0LWNsb3VkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNwRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUM5RSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUMxRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUMzRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUM5RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQVFyRSxNQUFNLE9BQU8sc0JBQXVCLFNBQVEsMEJBQTBCO0lBd0dsRSxZQUFvQixvQkFBMEMsRUFDbEQsZ0JBQWtDLEVBQ2xDLGdCQUFrQyxFQUNsQyxlQUF1QztRQUMvQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBSjlFLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUE5RjlELGFBQVEsR0FBVyxFQUFFLENBQUM7UUFRdEIsZ0JBQVcsR0FBVyxFQUFFLENBQUM7UUFJekIsY0FBUyxHQUFXLEVBQUUsQ0FBQztRQVF2QixxQkFBZ0IsR0FBVyxFQUFFLENBQUM7UUFJOUIsbUJBQWMsR0FBVyxFQUFF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SSxDQUFDLGFBQWE7WUFDakMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGdCQUFnQjtTQUMxQyxDQUFDO1FBQ0YsT0FBTyxJQUFJLDBCQUEwQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7O0FBM0pNLGlDQUFVLEdBQUcsNkJBQTZCLENBQUM7O1lBUnJELFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUscUJBQXFCO2dCQUMvQixtdUVBQW9EO2dCQUVwRCxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTs7YUFDeEM7OztZQVRRLG9CQUFvQjtZQUZwQixnQkFBZ0I7WUFJaEIsZ0JBQWdCO1lBSkUsc0JBQXNCOzs7dUJBcUI1QyxLQUFLOzBCQUlMLEtBQUs7MEJBSUwsS0FBSzt3QkFJTCxLQUFLO3NCQUlMLEtBQUs7K0JBSUwsS0FBSzs2QkFJTCxLQUFLOzBCQUlMLEtBQUs7d0JBSUwsS0FBSztpQkFJTCxLQUFLO21CQUlMLEtBQUs7MkJBSUwsS0FBSztvQ0FJTCxLQUFLO2tDQUlMLEtBQUs7Z0NBSUwsS0FBSztxQkFJTCxLQUFLO29CQUlMLEtBQUs7dUJBSUwsS0FBSzswQkFJTCxLQUFLO3lCQUlMLEtBQUs7NEJBSUwsS0FBSzs0QkFJTCxLQUFLOzBCQUlMLEtBQUs7K0JBSUwsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgVmlld0VuY2Fwc3VsYXRpb24sIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBcHBDb25maWdTZXJ2aWNlLCBVc2VyUHJlZmVyZW5jZXNTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IFRhc2tRdWVyeUNsb3VkUmVxdWVzdE1vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL2ZpbHRlci1jbG91ZC1tb2RlbCc7XG5pbXBvcnQgeyBUYXNrTGlzdENsb3VkU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3Rhc2stbGlzdC1jbG91ZC5zZXJ2aWNlJztcbmltcG9ydCB7IEJhc2VUYXNrTGlzdENsb3VkQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLXRhc2stbGlzdC1jbG91ZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGFza0Nsb3VkU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3Rhc2stY2xvdWQuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWNsb3VkLXRhc2stbGlzdCcsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Jhc2UtdGFzay1saXN0LWNsb3VkLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9iYXNlLXRhc2stbGlzdC1jbG91ZC5jb21wb25lbnQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgVGFza0xpc3RDbG91ZENvbXBvbmVudCBleHRlbmRzIEJhc2VUYXNrTGlzdENsb3VkQ29tcG9uZW50IHtcblxuICAgIHN0YXRpYyBQUkVTRVRfS0VZID0gJ2FkZi1jbG91ZC10YXNrLWxpc3QucHJlc2V0cyc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYXNzaWduZWUgb2YgdGhlIHByb2Nlc3MuIFBvc3NpYmxlIHZhbHVlcyBhcmU6IFwiYXNzaWduZWVcIiAodGhlIGN1cnJlbnQgdXNlciBpcyB0aGUgYXNzaWduZWUpLFxuICAgICAqIFwiY2FuZGlkYXRlXCIgKHRoZSBjdXJyZW50IHVzZXIgaXMgYSB0YXNrIGNhbmRpZGF0ZVwiLCBcImdyb3VwX3hcIiAodGhlIHRhc2sgaXMgYXNzaWduZWQgdG8gYSBncm91cFxuICAgICAqIHdoZXJlIHRoZSBjdXJyZW50IHVzZXIgaXMgYSBtZW1iZXIsIG5vIHZhbHVlICh0aGUgY3VycmVudCB1c2VyIGlzIGludm9sdmVkKS5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIGFzc2lnbmVlOiBzdHJpbmcgPSAnJztcblxuICAgIC8qKiBGaWx0ZXIgdGhlIHRhc2tzLiBEaXNwbGF5IG9ubHkgdGFza3MgY3JlYXRlZCBvbiB0aGUgc3VwcGxpZWQgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGNyZWF0ZWREYXRlOiBEYXRlO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIGNyZWF0ZWRGcm9tIGVxdWFsIHRvIHRoZSBzdXBwbGllZCBkYXRlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgY3JlYXRlZEZyb206IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIGNyZWF0ZWRUbyBlcXVhbCB0byB0aGUgc3VwcGxpZWQgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGNyZWF0ZWRUbzogc3RyaW5nID0gJyc7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggZHVlRGF0ZSBlcXVhbCB0byB0aGUgc3VwcGxpZWQgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGR1ZURhdGU6IERhdGU7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggbGFzdE1vZGlmaWVkRnJvbSBlcXVhbCB0byB0aGUgc3VwcGxpZWQgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGxhc3RNb2RpZmllZEZyb206IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIGxhc3RNb2RpZmllZFRvIGVxdWFsIHRvIHRoZSBzdXBwbGllZCBkYXRlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbGFzdE1vZGlmaWVkVG86IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIGR1ZURhdGUgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHRoZSBzdXBwbGllZCBkYXRlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZHVlRGF0ZUZyb206IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIGR1ZURhdGUgbGVzcyBvciBlcXVhbCB0byB0aGUgc3VwcGxpZWQgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGR1ZURhdGVUbzogc3RyaW5nID0gJyc7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggaWQgZXF1YWwgdG8gdGhlIHN1cHBsaWVkIHZhbHVlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgaWQ6IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIHRoZSBzdXBwbGllZCBuYW1lLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbmFtZTogc3RyaW5nID0gJyc7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggcGFyZW50VGFza0lkIGVxdWFsIHRvIHRoZSBzdXBwbGllZCB2YWx1ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIHBhcmVudFRhc2tJZDogc3RyaW5nID0gJyc7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggcHJvY2Vzc0RlZmluaXRpb25OYW1lIGVxdWFsIHRvIHRoZSBzdXBwbGllZCB2YWx1ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIHByb2Nlc3NEZWZpbml0aW9uTmFtZTogc3RyaW5nID0gJyc7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggcHJvY2Vzc0RlZmluaXRpb25JZCBlcXVhbCB0byB0aGUgc3VwcGxpZWQgdmFsdWUuICovXG4gICAgQElucHV0KClcbiAgICBwcm9jZXNzRGVmaW5pdGlvbklkOiBzdHJpbmcgPSAnJztcblxuICAgIC8qKiBGaWx0ZXIgdGhlIHRhc2tzLiBEaXNwbGF5IG9ubHkgdGFza3Mgd2l0aCBwcm9jZXNzSW5zdGFuY2VJZCBlcXVhbCB0byB0aGUgc3VwcGxpZWQgdmFsdWUuICovXG4gICAgQElucHV0KClcbiAgICBwcm9jZXNzSW5zdGFuY2VJZDogc3RyaW5nID0gJyc7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggc3RhdHVzIGVxdWFsIHRvIHRoZSBzdXBwbGllZCB2YWx1ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIHN0YXR1czogc3RyaW5nID0gJyc7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggb3duZXIgZXF1YWwgdG8gdGhlIHN1cHBsaWVkIHZhbHVlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgb3duZXI6IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIHByaW9yaXR5IGVxdWFsIHRvIHRoZSBzdXBwbGllZCB2YWx1ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIHByaW9yaXR5OiBudW1iZXI7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggY3JlYXRlZEJ5IGVxdWFsIHRvIHRoZSBzdXBwbGllZCB2YWx1ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGNvbXBsZXRlZEJ5OiBudW1iZXI7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRoZSB0YXNrcyB0aGF0IGJlbG9uZyB0byBhIHByb2Nlc3MgaW4gY2FzZSBpcyBmYWxzZSBvciB0YXNrcyB0aGF0IGRvZXNuJ3QgYmVsb25nIHRvIGEgcHJvY2VzcyBpbiBjYXNlIG9mIHRydWUuICovXG4gICAgQElucHV0KClcbiAgICBzdGFuZGFsb25lOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogRmlsdGVyIHRoZSB0YXNrcy4gRGlzcGxheSBvbmx5IHRhc2tzIHdpdGggY29tcGxldGVkRGF0ZSBlcXVhbCB0byB0aGUgc3VwcGxpZWQgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGNvbXBsZXRlZERhdGU6IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEZpbHRlciB0aGUgdGFza3MuIERpc3BsYXkgb25seSB0YXNrcyB3aXRoIGNvbXBsZXRlZEZyb20gZXF1YWwgdG8gdGhlIHN1cHBsaWVkIGRhdGUuICovXG4gICAgQElucHV0KClcbiAgICBjb21wbGV0ZWRGcm9tOiBzdHJpbmcgPSAnJztcblxuICAgIC8qKiBGaWx0ZXIgdGhlIHRhc2tzLiBEaXNwbGF5IG9ubHkgdGFza3Mgd2l0aCBjb21wbGV0ZWRUbyBlcXVhbCB0byB0aGUgc3VwcGxpZWQgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGNvbXBsZXRlZFRvOiBzdHJpbmcgPSAnJztcblxuICAgIC8qKiBGaWx0ZXIgdGhlIHRhc2tzLiBEaXNwbGF5IG9ubHkgdGFza3Mgd2l0aCBjYW5kaWRhdGVHcm91cHMgZXF1YWwgdG8gdGhlIHN1cHBsaWVkIHZhbHVlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgY2FuZGlkYXRlR3JvdXBJZDogc3RyaW5nID0gJyc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRhc2tMaXN0Q2xvdWRTZXJ2aWNlOiBUYXNrTGlzdENsb3VkU2VydmljZSxcbiAgICAgICAgICAgICAgICBhcHBDb25maWdTZXJ2aWNlOiBBcHBDb25maWdTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHRhc2tDbG91ZFNlcnZpY2U6IFRhc2tDbG91ZFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgdXNlclByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZXNTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKGFwcENvbmZpZ1NlcnZpY2UsIHRhc2tDbG91ZFNlcnZpY2UsIHVzZXJQcmVmZXJlbmNlcywgVGFza0xpc3RDbG91ZENvbXBvbmVudC5QUkVTRVRfS0VZKTtcbiAgICB9XG5cbiAgICBsb2FkKHJlcXVlc3ROb2RlOiBUYXNrUXVlcnlDbG91ZFJlcXVlc3RNb2RlbCkge1xuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudGFza0xpc3RDbG91ZFNlcnZpY2UuZ2V0VGFza0J5UmVxdWVzdChyZXF1ZXN0Tm9kZSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKHRhc2tzKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gdGFza3MubGlzdC5lbnRyaWVzO1xuICAgICAgICAgICAgICAgIHRoaXMuc3VjY2Vzcy5lbWl0KHRhc2tzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbi5uZXh0KHRhc2tzLmxpc3QucGFnaW5hdGlvbik7XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yLmVtaXQoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVSZXF1ZXN0Tm9kZSgpOiBUYXNrUXVlcnlDbG91ZFJlcXVlc3RNb2RlbCB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3ROb2RlID0ge1xuICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5hcHBOYW1lLFxuICAgICAgICAgICAgYXNzaWduZWU6IHRoaXMuYXNzaWduZWUsXG4gICAgICAgICAgICBpZDogdGhpcy5pZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIHBhcmVudFRhc2tJZDogdGhpcy5wYXJlbnRUYXNrSWQsXG4gICAgICAgICAgICBwcm9jZXNzRGVmaW5pdGlvbk5hbWU6IHRoaXMucHJvY2Vzc0RlZmluaXRpb25OYW1lLFxuICAgICAgICAgICAgcHJvY2Vzc0RlZmluaXRpb25JZDogdGhpcy5wcm9jZXNzRGVmaW5pdGlvbklkLFxuICAgICAgICAgICAgcHJvY2Vzc0luc3RhbmNlSWQ6IHRoaXMucHJvY2Vzc0luc3RhbmNlSWQsXG4gICAgICAgICAgICBvd25lcjogdGhpcy5vd25lcixcbiAgICAgICAgICAgIHByaW9yaXR5OiB0aGlzLnByaW9yaXR5LFxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkRnJvbTogdGhpcy5sYXN0TW9kaWZpZWRGcm9tLFxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkVG86IHRoaXMubGFzdE1vZGlmaWVkVG8sXG4gICAgICAgICAgICBkdWVEYXRlRnJvbTogdGhpcy5kdWVEYXRlRnJvbSxcbiAgICAgICAgICAgIGR1ZURhdGVUbzogdGhpcy5kdWVEYXRlVG8sXG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgICAgICAgZHVlRGF0ZTogdGhpcy5kdWVEYXRlLFxuICAgICAgICAgICAgY3JlYXRlZERhdGU6IHRoaXMuY3JlYXRlZERhdGUsXG4gICAgICAgICAgICBjcmVhdGVkRnJvbTogdGhpcy5jcmVhdGVkRnJvbSxcbiAgICAgICAgICAgIGNyZWF0ZWRUbzogdGhpcy5jcmVhdGVkVG8sXG4gICAgICAgICAgICBtYXhJdGVtczogdGhpcy5zaXplLFxuICAgICAgICAgICAgc2tpcENvdW50OiB0aGlzLnNraXBDb3VudCxcbiAgICAgICAgICAgIHNvcnRpbmc6IHRoaXMuc29ydGluZyxcbiAgICAgICAgICAgIHN0YW5kYWxvbmU6IHRoaXMuc3RhbmRhbG9uZSxcbiAgICAgICAgICAgIGNvbXBsZXRlZEJ5OiB0aGlzLmNvbXBsZXRlZEJ5LFxuICAgICAgICAgICAgY29tcGxldGVkRnJvbTogdGhpcy5jb21wbGV0ZWRGcm9tLFxuICAgICAgICAgICAgY29tcGxldGVkVG86IHRoaXMuY29tcGxldGVkVG8sXG4gICAgICAgICAgICBjb21wbGV0ZWREYXRlOiB0aGlzLmNvbXBsZXRlZERhdGUsXG4gICAgICAgICAgICBjYW5kaWRhdGVHcm91cElkOiB0aGlzLmNhbmRpZGF0ZUdyb3VwSWRcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXNrUXVlcnlDbG91ZFJlcXVlc3RNb2RlbChyZXF1ZXN0Tm9kZSk7XG4gICAgfVxufVxuIl19